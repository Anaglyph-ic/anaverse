(()=>{function a(a,e,t,o,r){var c={room:parseInt(a.room),skybox:parseInt(a.skybox),name:JSON.stringify(a.name),contract:e,collection:a.collection,id:t,curator:o,gallery:[],thumbnail:r,type:"remote"};a.gallery.forEach((a=>{for(const e in a)switch(e){case"position":case"rotation":case"scale":for(const t in a[e])"x"===t||"y"===t||"z"===t||delete a[e][t];break;case"objktMetaData":case"openSeaMetaData":case"tokenType":break;default:delete a[e]}})),a.gallery.forEach((a=>{var e=!1;if(a.hasOwnProperty("objktMetaData")){var t=!1;for(const e in a.objktMetaData)"contract"===e||"token_id"===e?t=!0:delete a.objktMetaData[e];t&&(e=!0)}e&&c.gallery.push(a)})),c.gallery.length>0&&postMessage(c)}const e=new FileReader;e.onload=function(a){const e=JSON.parse(a.target.result),t={collection:e.collection,gallery:[],name:e.name,room:e.room,skybox:e.skybox,type:"local"};e.gallery.forEach((a=>{for(const e in a)switch(e){case"position":case"rotation":case"scale":for(const t in a[e])"x"===t||"y"===t||"z"===t||delete a[e][t];break;case"objktMetaData":case"openSeaMetaData":case"tokenType":break;default:delete a[e]}})),e.gallery.forEach((a=>{var e=!1;if(a.hasOwnProperty("objktMetaData")){var o=!1;for(const e in a.objktMetaData)"contract"===e||"token_id"===e?o=!0:delete a.objktMetaData[e];o&&(e=!0)}e&&t.gallery.push(a)})),t.gallery.length>0&&postMessage(t)},onmessage=function(t){switch(t.data.type){case"remote":(e=>{e.data.galleryURLs.forEach((e=>{fetch(e.galurl).then((a=>a.json())).then((t=>{t&&a(t,e.contract,e.id,e.curator,e.thumbnail)})).catch((t=>{fetch(e.galurl+"/gallery.json").then((a=>a.json())).then((t=>{t&&a(t,e.contract,e.id,e.curator,e.thumbnail)})).catch((a=>{}))}))}))})(t);break;case"local":(a=>{e.readAsText(a.data.path)})(t)}}})();
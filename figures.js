const genererFigures=(t,e)=>{console.log("anaverse is",e);let r="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",o=t.slice(2),a=new RegExp(".{"+(t.length/4|0)+"}","g");var n=((t,e,r,o)=>()=>{var a=((t|=0)+(e|=0)|0)+(o|=0)|0;return o=o+1|0,t=e^e>>>9,e=(r|=0)+(r<<3)|0,r=(r=r<<21|r>>>11)+a|0,(a>>>0)/4294967296})(...o.match(a).map((t=>{return e=t,[...e].reduce(((t,e)=>t*r.length+r.indexOf(e)|0),0);var e})));const l=[],s=n,h=(t,e=0)=>(0===e&&(e=t,t=0),Math.floor(t+s()*(e-t))),c=t=>t[Math.floor(s()*t.length)],i=(t,e,r)=>{const o=e*Math.min(r,1-r),a=(e,a=(e+t/30)%12)=>r-o*Math.max(Math.min(a-3,9-a,1),-1);return[a(0),a(8),a(4)]},u=s()>.5?1:2,g=2===u?5:s()>.9?15:5;let f=h(360),p=35;2===u&&s()>.5&&(p=-15-h(45));let y=c([0,20,40,60,80,160,180,200,240,260,280]),M=0===y?[.8,.8,.8]:i(y,.5,.9),w=0===y?[.8,.8,.8]:i(y,.15,.7),m=!(s()>.5),x=c([16,32,64,128,128,128,128]),v=s()>.9;const z={rgb:M,rgba:w,cx:f,cy:p,caveNy:g,structure:1===u?"asteroid":"meteroid",caves:15===g?"horizontal":"normal",hue:y,lava:m,resolution:x,scraps:v},d=new Uint32Array(512),A=new Int32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);{const t=new Uint32Array(256);for(let e=0;e<256;e++)t[e]=e;for(let e=255;e>0;e--){const r=Math.floor((e+1)*s()),o=t[e];t[e]=t[r],t[r]=o}for(let e=0;e<512;e++)d[e]=t[255&e]}const U=(t,e,r)=>{const o=.3333333*(t+e+r),a=t+o|0,n=e+o|0,l=r+o|0,s=.1666666*(a+n+l),h=t-(a-s),c=e-(n-s),i=r-(l-s);let u,g,f,p,y,M;h>=c?c>=i?(u=1,g=0,f=0,p=1,y=1,M=0):h>=i?(u=1,g=0,f=0,p=1,y=0,M=1):(u=0,g=0,f=1,p=1,y=0,M=1):c<i?(u=0,g=0,f=1,p=0,y=1,M=1):h<i?(u=0,g=1,f=0,p=0,y=1,M=1):(u=0,g=1,f=0,p=1,y=1,M=0);const w=h-u+.1666666,m=c-g+.1666666,x=i-f+.1666666,v=h-p+.3333333,z=c-y+.3333333,U=i-M+.3333333,b=h-.5,B=c-.5,F=i-.5,G=255&a,q=255&n,E=255&l,N=d[G+d[q+d[E]]]%12*3,R=d[G+u+d[q+g+d[E+f]]]%12*3,j=d[G+p+d[q+y+d[E+M]]]%12*3,k=d[G+1+d[q+1+d[E+1]]]%12*3;let C,D,H,I,J,K,L,O;return C=.6-h*h-c*c-i*i,C<0?J=0:(C*=C,J=C*C*(h*A[N]+c*A[N+1]+i*A[N+2])),D=.6-w*w-m*m-x*x,D<0?K=0:(D*=D,K=D*D*(w*A[R]+m*A[R+1]+x*A[R+2])),H=.6-v*v-z*z-U*U,H<0?L=0:(H*=H,L=H*H*(v*A[j]+z*A[j+1]+U*A[j+2])),I=.6-b*b-B*B-F*F,I<0?O=0:(I*=I,O=I*I*(b*A[k]+B*A[k+1]+F*A[k+2])),20*(J+K+L+O)+1},b=(t,e,r)=>U(t,e,r)+U(2*t,2*e,2*r)+ +U(4*t,4*e,4*r)+ +U(8*t,8*e,8*r)+ +U(16*t,16*e,16*r),B=(t,e,r,o)=>l.push({geometry:{type:"BoxGeometry",args:[1,1,1]},pos:{x:1*t,y:1*e,z:1*r},rot:{x:0,y:0,z:0},lines:!o,hatch:!o,full:o}),F=(t=>{const r=new Uint8Array(t*t*t);let o,a,n;for(let l=1;l<t-1;l++)for(let h=1;h<t-1;h++)for(let c=1;c<t-1;c++){let i=l/t,f=h/t,p=c/t;if(Math.pow(U(5*i,f*g,5*p),3)<.5?n=0:(1===u?(o=f<=.8?1:.8<f&&f<.9?15===g?1.5-15*(f-.8):1-10*(f-.8):0,a=.1/(Math.pow(1.5*(i-.5),2)+Math.pow(.8*(f-1),2)+Math.pow(1.5*(p-.5),2))):(o=.8,a=.1/(Math.pow(1.5*(i-.5),2)+Math.pow(1.5*(f-.5),2)+Math.pow(1.5*(p-.5),2))),n=b(i,.5*f,p)*a*o*Math.pow(U(3*(i+1),3*(f+1),3*(p+1)),2.5)),n>2.5){let o=1;if(m){const r=2*(l-.5*t)/t,a=2*(h-.5*t)/t,n=2*(c-.5*t)/t,s=Math.sqrt(r*r+a*a+n*n);U(5*r+4,5*a+4,5*n+4)>1.1&&s<.55&&(e&&B(l,h,c,!0),o=2)}r[l+h*t+c*t*t]=o,1===o&&e&&B(l,h,c)}!0===v&&s()>.99995&&(e&&B(l,h,c),r[l+h*t+c*t*t]=1)}return r})(x);for(let t=0;t<4;t++)for(let e=0;e<4;e++)l.push({geometry:{type:"BoxGeometry",args:[1,1,1]},pos:{x:1*t,y:-1.5,z:1*e},rot:{x:0,y:0,z:0},lines:!0,hatch:!0,full:!1});return console.log(z),console.log("lava is ",z.lava),{figures:l,features:z,volume:F,noise:U}};export{genererFigures};
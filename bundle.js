/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={8203:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,a=s(e),o=a[0],u=a[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,o,u)),c=0,h=u>0?o-4:o;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===u&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===u&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=16383,s=0,l=r-i;s<l;s+=o)a.push(u(e,s,s+o>l?l:s+o));return 1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,r){for(var i,a,o=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},1880:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:String(t)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var c=n(8203),h=n(1988),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Sn=m,t.ZK=50;var d=2147483647;function p(e){if(e>d)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,m.prototype),t}function m(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return y(e)}return v(e,t,n)}function v(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!m.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|_(e,t),r=p(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ne(e,Uint8Array)){var t=new Uint8Array(e);return x(t.buffer,t.byteOffset,t.byteLength)}return b(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(e));if(ne(e,ArrayBuffer)||e&&ne(e.buffer,ArrayBuffer))return x(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(ne(e,SharedArrayBuffer)||e&&ne(e.buffer,SharedArrayBuffer)))return x(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return m.from(r,t,n);var i=function(e){if(m.isBuffer(e)){var t=0|w(e.length),n=p(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||re(e.length)?p(0):b(e):"Buffer"===e.type&&Array.isArray(e.data)?b(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return m.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(e))}function g(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function y(e){return g(e),p(e<0?0:0|w(e))}function b(e){for(var t=e.length<0?0:0|w(e.length),n=p(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function x(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,m.prototype),r}function w(e){if(e>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|e}function _(e,t){if(m.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ne(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+l(e));var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ee(e).length;default:if(i)return r?-1:$(e).length;t=(""+t).toLowerCase(),i=!0}}function E(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function S(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function T(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),re(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=m.from(t,r)),m.isBuffer(t))return 0===t.length?-1:M(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):M(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function M(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(l(e,a+f)!==l(t,f)){h=!1;break}if(h)return a}return-1}function k(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a,o=t.length;for(r>o/2&&(r=o/2),a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(re(s))return a;e[n+a]=s}return a}function A(e,t,n,r){return te($(t,e.length-n),e,n,r)}function I(e,t,n,r){return te(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function L(e,t,n,r){return te(ee(t),e,n,r)}function R(e,t,n,r){return te(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?c.fromByteArray(e):c.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=n){var u=void 0,l=void 0,c=void 0,h=void 0;switch(s){case 1:a<128&&(o=a);break;case 2:128==(192&(u=e[i+1]))&&(h=(31&a)<<6|63&u)>127&&(o=h);break;case 3:u=e[i+1],l=e[i+2],128==(192&u)&&128==(192&l)&&(h=(15&a)<<12|(63&u)<<6|63&l)>2047&&(h<55296||h>57343)&&(o=h);break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(h=(15&a)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&h<1114112&&(o=h)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(e){var t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=O));return n}(r)}m.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),m.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(e,t,n){return v(e,t,n)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(e,t,n){return function(e,t,n){return g(e),e<=0?p(e):void 0!==t?"string"==typeof n?p(e).fill(t,n):p(e).fill(t):p(e)}(e,t,n)},m.allocUnsafe=function(e){return y(e)},m.allocUnsafeSlow=function(e){return y(e)},m.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==m.prototype},m.compare=function(e,t){if(ne(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),ne(t,Uint8Array)&&(t=m.from(t,t.offset,t.byteLength)),!m.isBuffer(e)||!m.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},m.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return m.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=m.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(ne(a,Uint8Array))i+a.length>r.length?(m.isBuffer(a)||(a=m.from(a)),a.copy(r,i)):Uint8Array.prototype.set.call(r,a,i);else{if(!m.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},m.byteLength=_,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},m.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},m.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},m.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?P(this,0,e):E.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(e){if(!m.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===m.compare(this,e)},m.prototype.inspect=function(){var e="",n=t.ZK;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},f&&(m.prototype[f]=m.prototype.inspect),m.prototype.compare=function(e,t,n,r,i){if(ne(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),!m.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+l(e));if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(r,i),c=e.slice(t,n),h=0;h<s;++h)if(u[h]!==c[h]){a=u[h],o=c[h];break}return a<o?-1:o<a?1:0},m.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},m.prototype.indexOf=function(e,t,n){return T(this,e,t,n,!0)},m.prototype.lastIndexOf=function(e,t,n){return T(this,e,t,n,!1)},m.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return k(this,e,t,n);case"utf8":case"utf-8":return A(this,e,t,n);case"ascii":case"latin1":case"binary":return I(this,e,t,n);case"base64":return L(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function B(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=ie[e[a]];return i}function U(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length-1;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function F(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function z(e,t,n,r,i,a){if(!m.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function H(e,t,n,r,i){K(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function G(e,t,n,r,i){K(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function j(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(e,t,n,r,i){return t=+t,n>>>=0,i||j(e,0,n,4),h.write(e,t,n,r,23,4),n+4}function q(e,t,n,r,i){return t=+t,n>>>=0,i||j(e,0,n,8),h.write(e,t,n,r,52,8),n+8}m.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,m.prototype),r},m.prototype.readUintLE=m.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},m.prototype.readUintBE=m.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},m.prototype.readUint8=m.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},m.prototype.readBigUInt64LE=ae((function(e){J(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),m.prototype.readBigUInt64BE=ae((function(e){J(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),m.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},m.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},m.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},m.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},m.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},m.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},m.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},m.prototype.readBigInt64LE=ae((function(e){J(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),m.prototype.readBigInt64BE=ae((function(e){J(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),m.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),h.read(this,e,!0,23,4)},m.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),h.read(this,e,!1,23,4)},m.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),h.read(this,e,!0,52,8)},m.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),h.read(this,e,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},m.prototype.writeUint8=m.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,1,255,0),this[t]=255&e,t+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},m.prototype.writeBigUInt64LE=ae((function(e){return H(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),m.prototype.writeBigUInt64BE=ae((function(e){return G(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),m.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);z(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},m.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);z(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},m.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},m.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},m.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},m.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},m.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},m.prototype.writeBigInt64LE=ae((function(e){return H(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),m.prototype.writeBigInt64BE=ae((function(e){return G(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),m.prototype.writeFloatLE=function(e,t,n){return V(this,e,t,!0,n)},m.prototype.writeFloatBE=function(e,t,n){return V(this,e,t,!1,n)},m.prototype.writeDoubleLE=function(e,t,n){return q(this,e,t,!0,n)},m.prototype.writeDoubleBE=function(e,t,n){return q(this,e,t,!1,n)},m.prototype.copy=function(e,t,n,r){if(!m.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},m.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!m.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=m.isBuffer(e)?e:m.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var W={};function X(e,t,n){W[e]=function(n){function i(){var n,r,u,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=this,u=o(u=i),n=function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(r,a()?Reflect.construct(u,c||[],o(r).constructor):u.apply(r,c)),Object.defineProperty(s(n),"message",{value:t.apply(s(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}var c,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(i,n),c=i,(h=[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}])&&r(c.prototype,h),Object.defineProperty(c,"prototype",{writable:!1}),i}(n)}function Y(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function K(e,t,n,r,i,a){if(e>n||e<t){var o,s="bigint"==typeof t?"n":"";throw o=a>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(a+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(a+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new W.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,n){J(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Z(t,e.length-(n+1))}(r,i,a)}function J(e,t){if("number"!=typeof e)throw new W.ERR_INVALID_ARG_TYPE(t,"number",e)}function Z(e,t,n){if(Math.floor(e)!==e)throw J(e,n),new W.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new W.ERR_BUFFER_OUT_OF_BOUNDS;throw new W.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}X("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),X("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(l(t))}),TypeError),X("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=Y(String(n)):"bigint"==typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=Y(i)),i+="n"),r+" It must be ".concat(t,". Received ").concat(i)}),RangeError);var Q=/[^+/0-9A-Za-z-_]/g;function $(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function ee(e){return c.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function te(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ne(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function re(e){return e!=e}var ie=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function ae(e){return"undefined"==typeof BigInt?oe:e}function oe(){throw new Error("BigInt not supported")}},6964:function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in e,o="ArrayBuffer"in e;if(o)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n,r=d(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=p(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=l(e),t=c(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},f.prototype.delete=function(e){delete this.map[l(e)]},f.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},f.prototype.set=function(e,t){this.map[l(e)]=c(t)},f.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},r&&(f.prototype[Symbol.iterator]=f.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var n,r,i=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function x(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},g.call(b.prototype),g.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];w.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function E(e,n){return new Promise((function(r,a){var o=new b(e,n);if(o.signal&&o.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new w(i,n))},s.onerror=function(){a(new TypeError("Network request failed"))},s.ontimeout=function(){a(new TypeError("Network request failed"))},s.onabort=function(){a(new t.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",u)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}E.polyfill=!0,e.fetch||(e.fetch=E,e.Headers=f,e.Request=b,e.Response=w),t.Headers=f,t.Request=b,t.Response=w,t.fetch=E,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},3880:e=>{"use strict";var t={single_source_shortest_paths:function(e,n,r){var i={},a={};a[n]=0;var o,s,u,l,c,h,f,d=t.PriorityQueue.make();for(d.push(n,0);!d.empty();)for(u in s=(o=d.pop()).value,l=o.cost,c=e[s]||{})c.hasOwnProperty(u)&&(h=l+c[u],f=a[u],(void 0===a[u]||f>h)&&(a[u]=h,d.push(u,h),i[u]=s));if(void 0!==r&&void 0===a[r]){var p=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(p)}return i},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,n,r){var i=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(e){var n,r=t.PriorityQueue,i={};for(n in e=e||{},r)r.hasOwnProperty(n)&&(i[n]=r[n]);return i.queue=[],i.sorter=e.sorter||r.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},7540:e=>{"use strict";e.exports=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319&&n>r+1){var a=e.charCodeAt(r+1);a>=56320&&a<=57343&&(i=1024*(i-55296)+a-56320+65536,r+=1)}i<128?t.push(i):i<2048?(t.push(i>>6|192),t.push(63&i|128)):i<55296||i>=57344&&i<65536?(t.push(i>>12|224),t.push(i>>6&63|128),t.push(63&i|128)):i>=65536&&i<=1114111?(t.push(i>>18|240),t.push(i>>12&63|128),t.push(i>>6&63|128),t.push(63&i|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},6884:e=>{"use strict";e.exports=function(e){var t=e.uri,n=e.name,r=e.type;this.uri=t,this.name=n,this.type=r}},9652:(e,t,n)=>{"use strict";var r=n(3140);e.exports=function e(t,n,i){var a;void 0===n&&(n=""),void 0===i&&(i=r);var o=new Map;function s(e,t){var n=o.get(t);n?n.push.apply(n,e):o.set(t,e)}if(i(t))a=null,s([n],t);else{var u=n?n+".":"";if("undefined"!=typeof FileList&&t instanceof FileList)a=Array.prototype.map.call(t,(function(e,t){return s([""+u+t],e),null}));else if(Array.isArray(t))a=t.map((function(t,n){var r=e(t,""+u+n,i);return r.files.forEach(s),r.clone}));else if(t&&t.constructor===Object)for(var l in a={},t){var c=e(t[l],""+u+l,i);c.files.forEach(s),a[l]=c.clone}else a=t}return{clone:a,files:o}}},5732:(e,t,n)=>{"use strict";t.ReactNativeFile=n(6884),t.extractFiles=n(9652),t.isExtractableFile=n(3140)},3140:(e,t,n)=>{"use strict";var r=n(6884);e.exports=function(e){return"undefined"!=typeof File&&e instanceof File||"undefined"!=typeof Blob&&e instanceof Blob||e instanceof r}},3640:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports="object"==("undefined"==typeof self?"undefined":t(self))?self.FormData:window.FormData},5044:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(5732),o=i(n(3640)),s=function(e){return a.isExtractableFile(e)||null!==e&&"object"===r(e)&&"function"==typeof e.pipe};t.default=function(e,t,n){var r=a.extractFiles({query:e,variables:t,operationName:n},"",s),i=r.clone,u=r.files;if(0===u.size){if(!Array.isArray(e))return JSON.stringify(i);if(void 0!==t&&!Array.isArray(t))throw new Error("Cannot create request body with given variable type, array expected");var l=e.reduce((function(e,n,r){return e.push({query:n,variables:t?t[r]:void 0}),e}),[]);return JSON.stringify(l)}var c=new("undefined"==typeof FormData?o.default:FormData);c.append("operations",JSON.stringify(i));var h={},f=0;return u.forEach((function(e){h[++f]=e})),c.append("map",JSON.stringify(h)),f=0,u.forEach((function(e,t){c.append(""+ ++f,t)})),c}},4780:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.gql=t.batchRequests=t.request=t.rawRequest=t.GraphQLClient=t.ClientError=void 0;var h=o(n(6964)),f=h,d=n(5937),p=c(n(5044)),m=n(3796);Object.defineProperty(t,"ClientError",{enumerable:!0,get:function(){return m.ClientError}});var v=function(e){var t={};return e&&("undefined"!=typeof Headers&&e instanceof Headers||e instanceof f.Headers?t=function(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}(e):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];t[n]=r})):t=e),t},g=function(e){return e.replace(/([\s,]|#[^\n\r]+)+/g," ").trim()},y=function(e){var t=e.url,n=e.query,i=e.variables,a=e.operationName,o=e.headers,l=e.fetch,c=e.fetchOptions;return s(void 0,void 0,void 0,(function(){var e;return u(this,(function(s){switch(s.label){case 0:return e=p.default(n,i,a),[4,l(t,r({method:"POST",headers:r(r({},"string"==typeof e?{"Content-Type":"application/json"}:{}),o),body:e},c))];case 1:return[2,s.sent()]}}))}))},b=function(e){var t=e.url,n=e.query,i=e.variables,a=e.operationName,o=e.headers,l=e.fetch,c=e.fetchOptions;return s(void 0,void 0,void 0,(function(){var e;return u(this,(function(s){switch(s.label){case 0:return e=function(e){var t=e.query,n=e.variables,r=e.operationName;if(!Array.isArray(t)){var i=["query="+encodeURIComponent(g(t))];return n&&i.push("variables="+encodeURIComponent(JSON.stringify(n))),r&&i.push("operationName="+encodeURIComponent(r)),i.join("&")}if(void 0!==n&&!Array.isArray(n))throw new Error("Cannot create query with given variable type, array expected");var a=t.reduce((function(e,t,r){return e.push({query:g(t),variables:n?JSON.stringify(n[r]):void 0}),e}),[]);return"query="+encodeURIComponent(JSON.stringify(a))}({query:n,variables:i,operationName:a}),[4,l(t+"?"+e,r({method:"GET",headers:o},c))];case 1:return[2,s.sent()]}}))}))},x=function(){function e(e,t){this.url=e,this.options=t||{}}return e.prototype.rawRequest=function(e,t,n){var i=this.options,a=i.headers,o=i.fetch,s=void 0===o?h.default:o,u=i.method,c=void 0===u?"POST":u,f=l(i,["headers","fetch","method"]);return w({url:this.url,query:e,variables:t,headers:r(r({},v(a)),v(n)),operationName:void 0,fetch:s,method:c,fetchOptions:f})},e.prototype.request=function(e,t,n){return s(this,void 0,void 0,(function(){var i,a,o,s,c,f,d,p,m,g,y;return u(this,(function(u){switch(u.label){case 0:return i=this.options,a=i.headers,o=i.fetch,s=void 0===o?h.default:o,c=i.method,f=void 0===c?"POST":c,d=l(i,["headers","fetch","method"]),p=this.url,m=S(e),g=m.query,y=m.operationName,[4,w({url:p,query:g,variables:t,headers:r(r({},v(a)),v(n)),operationName:y,fetch:s,method:f,fetchOptions:d})];case 1:return[2,u.sent().data]}}))}))},e.prototype.batchRequests=function(e,t){return s(this,void 0,void 0,(function(){var n,i,a,o,s,c,f,d,p,m;return u(this,(function(u){switch(u.label){case 0:return n=this.options,i=n.headers,a=n.fetch,o=void 0===a?h.default:a,s=n.method,c=void 0===s?"POST":s,f=l(n,["headers","fetch","method"]),d=this.url,p=e.map((function(e){return S(e.document).query})),m=e.map((function(e){return e.variables})),[4,w({url:d,query:p,variables:m,headers:r(r({},v(i)),v(t)),operationName:void 0,fetch:o,method:c,fetchOptions:f})];case 1:return[2,u.sent().data]}}))}))},e.prototype.setHeaders=function(e){return this.options.headers=e,this},e.prototype.setHeader=function(e,t){var n,r=this.options.headers;return r?r[e]=t:this.options.headers=((n={})[e]=t,n),this},e.prototype.setEndpoint=function(e){return this.url=e,this},e}();function w(e){var t=e.url,n=e.query,i=e.variables,a=e.headers,o=e.operationName,l=e.fetch,c=e.method,h=void 0===c?"POST":c,f=e.fetchOptions;return s(this,void 0,void 0,(function(){var e,s,c,d,p,v,g,x;return u(this,(function(u){switch(u.label){case 0:return e="POST"===h.toUpperCase()?y:b,s=Array.isArray(n),[4,e({url:t,query:n,variables:i,operationName:o,headers:a,fetch:l,fetchOptions:f})];case 1:return[4,E(c=u.sent())];case 2:if(d=u.sent(),p=s&&Array.isArray(d)?!d.some((function(e){return!e.data})):!!d.data,c.ok&&!d.errors&&p)return v=c.headers,g=c.status,[2,r(r({},s?{data:d}:d),{headers:v,status:g})];throw x="string"==typeof d?{error:d}:d,new m.ClientError(r(r({},x),{status:c.status,headers:c.headers}),{query:n,variables:i})}}))}))}function _(e,t,n,r){return s(this,void 0,void 0,(function(){return u(this,(function(i){return[2,new x(e).request(t,n,r)]}))}))}function E(e){var t=e.headers.get("Content-Type");return t&&t.startsWith("application/json")?e.json():e.text()}function S(e){var t;if("string"==typeof e)return{query:e};var n=void 0,r=e.definitions.filter((function(e){return"OperationDefinition"===e.kind}));return 1===r.length&&(n=null===(t=r[0].name)||void 0===t?void 0:t.value),{query:d.print(e),operationName:n}}t.GraphQLClient=x,t.rawRequest=function(e,t,n,r){return s(this,void 0,void 0,(function(){return u(this,(function(i){return[2,new x(e).rawRequest(t,n,r)]}))}))},t.request=_,t.batchRequests=function(e,t,n){return s(this,void 0,void 0,(function(){return u(this,(function(r){return[2,new x(e).batchRequests(t,n)]}))}))},t.default=_,t.gql=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.reduce((function(e,n,r){return""+e+n+(r in t?t[r]:"")}),"")}},3796:function(e,t){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ClientError=void 0;var i=function(e){function t(n,r){var i=this,a=t.extractMessage(n)+": "+JSON.stringify({response:n,request:r});return i=e.call(this,a)||this,Object.setPrototypeOf(i,t.prototype),i.response=n,i.request=r,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(i,t),i}return r(t,e),t.extractMessage=function(e){try{return e.errors[0].message}catch(t){return"GraphQL Error (Code: "+e.status+")"}},t}(Error);t.ClientError=i},3848:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.devAssert=function(e,t){if(!Boolean(e))throw new Error(t)}},4688:(e,t)=>{"use strict";function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.inspect=function(e){return s(e,[])};var a=10,o=2;function s(e,t){switch(i(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return function(e,t){if(null===e)return"null";if(t.includes(e))return"[Circular]";var i,u=[].concat(function(e){if(Array.isArray(e))return r(e)}(i=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||n(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e]);if(function(e){return"function"==typeof e.toJSON}(e)){var l=e.toJSON();if(l!==e)return"string"==typeof l?l:s(l,u)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>o)return"[Array]";for(var n=Math.min(a,e.length),r=e.length-n,i=[],u=0;u<n;++u)i.push(s(e[u],t));return 1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items")),"["+i.join(", ")+"]"}(e,u);return function(e,t){var r=Object.entries(e);if(0===r.length)return"{}";if(t.length>o)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";var i=r.map((function(e){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2);return r[0]+": "+s(r[1],t)}));return"{ "+i.join(", ")+" }"}(e,u)}(e,t);default:return String(e)}}},3356:(e,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:String(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Token=t.QueryDocumentKeys=t.OperationTypeNode=t.Location=void 0,t.isNode=function(e){var t=null==e?void 0:e.kind;return"string"==typeof t&&h.has(t)};var s=function(e){function t(e,n,i){r(this,t),this.start=e.start,this.end=n.end,this.startToken=e,this.endToken=n,this.source=i}return a(t,[{key:Symbol.toStringTag,get:function(){return"Location"}},{key:"toJSON",value:function(){return{start:this.start,end:this.end}}}]),t}();t.Location=s;var u=function(e){function t(e,n,i,a,o,s){r(this,t),this.kind=e,this.start=n,this.end=i,this.line=a,this.column=o,this.value=s,this.prev=null,this.next=null}return a(t,[{key:Symbol.toStringTag,get:function(){return"Token"}},{key:"toJSON",value:function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}]),t}();t.Token=u;var l={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};t.QueryDocumentKeys=l;var c,h=new Set(Object.keys(l));t.OperationTypeNode=c,function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"}(c||(t.OperationTypeNode=c={}))},9029:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dedentBlockStringLines=function(e){for(var t,n=Number.MAX_SAFE_INTEGER,r=null,a=-1,o=0;o<e.length;++o){var s,u=e[o],l=i(u);l!==u.length&&(r=null!==(s=r)&&void 0!==s?s:o,a=o,0!==o&&l<n&&(n=l))}return e.map((function(e,t){return 0===t?e:e.slice(n)})).slice(null!==(t=r)&&void 0!==t?t:0,a+1)},t.isPrintableAsBlockString=function(e){if(""===e)return!0;for(var t=!0,n=!1,r=!0,i=!1,a=0;a<e.length;++a)switch(e.codePointAt(a)){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 11:case 12:case 14:case 15:case 13:return!1;case 10:if(t&&!i)return!1;i=!0,t=!0,n=!1;break;case 9:case 32:n||(n=t);break;default:r&&(r=n),t=!1}return!t&&(!r||!i)},t.printBlockString=function(e,t){var n=e.replace(/"""/g,'\\"""'),i=n.split(/\r\n|[\n\r]/g),a=1===i.length,o=i.length>1&&i.slice(1).every((function(e){return 0===e.length||(0,r.isWhiteSpace)(e.charCodeAt(0))})),s=n.endsWith('\\"""'),u=e.endsWith('"')&&!s,l=e.endsWith("\\"),c=u||l,h=!(null!=t&&t.minimize)&&(!a||e.length>70||c||o||s),f="",d=a&&(0,r.isWhiteSpace)(e.charCodeAt(0));return(h&&!d||o)&&(f+="\n"),f+=n,(h||c)&&(f+="\n"),'"""'+f+'"""'};var r=n(6176);function i(e){for(var t=0;t<e.length&&(0,r.isWhiteSpace)(e.charCodeAt(t));)++t;return t}},6176:(e,t)=>{"use strict";function n(e){return e>=48&&e<=57}function r(e){return e>=97&&e<=122||e>=65&&e<=90}Object.defineProperty(t,"__esModule",{value:!0}),t.isDigit=n,t.isLetter=r,t.isNameContinue=function(e){return r(e)||n(e)||95===e},t.isNameStart=function(e){return r(e)||95===e},t.isWhiteSpace=function(e){return 9===e||32===e}},7164:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Kind=void 0,t.Kind=n,function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"}(n||(t.Kind=n={}))},7339:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printString=function(e){return'"'.concat(e.replace(n,r),'"')};var n=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function r(e){return i[e.charCodeAt(0)]}var i=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"]},5937:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.print=function(e){return(0,r.visit)(e,o)};var r=n(8536),i=n(9029),a=n(7339),o={Name:{leave:function(e){return e.value}},Variable:{leave:function(e){return"$"+e.name}},Document:{leave:function(e){return s(e.definitions,"\n\n")}},OperationDefinition:{leave:function(e){var t=l("(",s(e.variableDefinitions,", "),")"),n=s([e.operation,s([e.name,t]),s(e.directives," ")]," ");return("query"===n?"":n+" ")+e.selectionSet}},VariableDefinition:{leave:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+l(" = ",r)+l(" ",s(i," "))}},SelectionSet:{leave:function(e){return u(e.selections)}},Field:{leave:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,a=e.selectionSet,o=l("",t,": ")+n,u=o+l("(",s(r,", "),")");return u.length>80&&(u=o+l("(\n",c(s(r,"\n")),"\n)")),s([u,s(i," "),a]," ")}},Argument:{leave:function(e){return e.name+": "+e.value}},FragmentSpread:{leave:function(e){return"..."+e.name+l(" ",s(e.directives," "))}},InlineFragment:{leave:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return s(["...",l("on ",t),s(n," "),r]," ")}},FragmentDefinition:{leave:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,a=e.selectionSet;return"fragment ".concat(t).concat(l("(",s(r,", "),")")," ")+"on ".concat(n," ").concat(l("",s(i," ")," "))+a}},IntValue:{leave:function(e){return e.value}},FloatValue:{leave:function(e){return e.value}},StringValue:{leave:function(e){var t=e.value;return e.block?(0,i.printBlockString)(t):(0,a.printString)(t)}},BooleanValue:{leave:function(e){return e.value?"true":"false"}},NullValue:{leave:function(){return"null"}},EnumValue:{leave:function(e){return e.value}},ListValue:{leave:function(e){return"["+s(e.values,", ")+"]"}},ObjectValue:{leave:function(e){return"{"+s(e.fields,", ")+"}"}},ObjectField:{leave:function(e){return e.name+": "+e.value}},Directive:{leave:function(e){return"@"+e.name+l("(",s(e.arguments,", "),")")}},NamedType:{leave:function(e){return e.name}},ListType:{leave:function(e){return"["+e.type+"]"}},NonNullType:{leave:function(e){return e.type+"!"}},SchemaDefinition:{leave:function(e){var t=e.description,n=e.directives,r=e.operationTypes;return l("",t,"\n")+s(["schema",s(n," "),u(r)]," ")}},OperationTypeDefinition:{leave:function(e){return e.operation+": "+e.type}},ScalarTypeDefinition:{leave:function(e){var t=e.description,n=e.name,r=e.directives;return l("",t,"\n")+s(["scalar",n,s(r," ")]," ")}},ObjectTypeDefinition:{leave:function(e){var t=e.description,n=e.name,r=e.interfaces,i=e.directives,a=e.fields;return l("",t,"\n")+s(["type",n,l("implements ",s(r," & ")),s(i," "),u(a)]," ")}},FieldDefinition:{leave:function(e){var t=e.description,n=e.name,r=e.arguments,i=e.type,a=e.directives;return l("",t,"\n")+n+(h(r)?l("(\n",c(s(r,"\n")),"\n)"):l("(",s(r,", "),")"))+": "+i+l(" ",s(a," "))}},InputValueDefinition:{leave:function(e){var t=e.description,n=e.name,r=e.type,i=e.defaultValue,a=e.directives;return l("",t,"\n")+s([n+": "+r,l("= ",i),s(a," ")]," ")}},InterfaceTypeDefinition:{leave:function(e){var t=e.description,n=e.name,r=e.interfaces,i=e.directives,a=e.fields;return l("",t,"\n")+s(["interface",n,l("implements ",s(r," & ")),s(i," "),u(a)]," ")}},UnionTypeDefinition:{leave:function(e){var t=e.description,n=e.name,r=e.directives,i=e.types;return l("",t,"\n")+s(["union",n,s(r," "),l("= ",s(i," | "))]," ")}},EnumTypeDefinition:{leave:function(e){var t=e.description,n=e.name,r=e.directives,i=e.values;return l("",t,"\n")+s(["enum",n,s(r," "),u(i)]," ")}},EnumValueDefinition:{leave:function(e){var t=e.description,n=e.name,r=e.directives;return l("",t,"\n")+s([n,s(r," ")]," ")}},InputObjectTypeDefinition:{leave:function(e){var t=e.description,n=e.name,r=e.directives,i=e.fields;return l("",t,"\n")+s(["input",n,s(r," "),u(i)]," ")}},DirectiveDefinition:{leave:function(e){var t=e.description,n=e.name,r=e.arguments,i=e.repeatable,a=e.locations;return l("",t,"\n")+"directive @"+n+(h(r)?l("(\n",c(s(r,"\n")),"\n)"):l("(",s(r,", "),")"))+(i?" repeatable":"")+" on "+s(a," | ")}},SchemaExtension:{leave:function(e){var t=e.directives,n=e.operationTypes;return s(["extend schema",s(t," "),u(n)]," ")}},ScalarTypeExtension:{leave:function(e){return s(["extend scalar",e.name,s(e.directives," ")]," ")}},ObjectTypeExtension:{leave:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return s(["extend type",t,l("implements ",s(n," & ")),s(r," "),u(i)]," ")}},InterfaceTypeExtension:{leave:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return s(["extend interface",t,l("implements ",s(n," & ")),s(r," "),u(i)]," ")}},UnionTypeExtension:{leave:function(e){var t=e.name,n=e.directives,r=e.types;return s(["extend union",t,s(n," "),l("= ",s(r," | "))]," ")}},EnumTypeExtension:{leave:function(e){var t=e.name,n=e.directives,r=e.values;return s(["extend enum",t,s(n," "),u(r)]," ")}},InputObjectTypeExtension:{leave:function(e){var t=e.name,n=e.directives,r=e.fields;return s(["extend input",t,s(n," "),u(r)]," ")}}};function s(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function u(e){return l("{\n",c(s(e,"\n")),"\n}")}function l(e,t){return null!=t&&""!==t?e+t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""):""}function c(e){return l("  ",e.replace(/\n/g,"\n  "))}function h(e){var t;return null!==(t=null==e?void 0:e.some((function(e){return e.includes("\n")})))&&void 0!==t&&t}},8536:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.BREAK=void 0,t.getEnterLeaveForKind=d,t.getVisitFn=function(e,t,n){var r=d(e,t),i=r.enter,a=r.leave;return n?a:i},t.visit=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.QueryDocumentKeys,r=new Map,o=0,s=Object.values(h.Kind);o<s.length;o++){var p=s[o];r.set(p,d(t,p))}var m=void 0,v=Array.isArray(e),g=[e],y=-1,b=[],x=void 0,w=void 0,_=void 0,E=[],S=[],T=e;do{var M=++y===g.length,k=M&&0!==b.length;if(M){if(w=0===S.length?void 0:E[E.length-1],x=_,_=S.pop(),k)if(v){x=x.slice();var A,I=0,L=a(b);try{for(L.s();!(A=L.n()).done;){var R=i(A.value,2),C=R[0],P=R[1],O=C-I;null===P?(x.splice(O,1),I++):x[O]=P}}catch(e){L.e(e)}finally{L.f()}}else{x=Object.defineProperties({},Object.getOwnPropertyDescriptors(x));var D,N=a(b);try{for(N.s();!(D=N.n()).done;){var B=i(D.value,2),U=B[0],F=B[1];x[U]=F}}catch(e){N.e(e)}finally{N.f()}}y=m.index,g=m.keys,b=m.edits,v=m.inArray,m=m.prev}else{if(w=_?v?y:g[y]:void 0,null==(x=_?_[w]:T))continue;_&&E.push(w)}var z,H=void 0;if(!Array.isArray(x)){var G,j;(0,c.isNode)(x)||(0,l.devAssert)(!1,"Invalid AST Node: ".concat((0,u.inspect)(x),"."));var V=M?null===(G=r.get(x.kind))||void 0===G?void 0:G.leave:null===(j=r.get(x.kind))||void 0===j?void 0:j.enter;if((H=null==V?void 0:V.call(t,x,w,_,E,S))===f)break;if(!1===H){if(!M){E.pop();continue}}else if(void 0!==H&&(b.push([w,H]),!M)){if(!(0,c.isNode)(H)){E.pop();continue}x=H}}void 0===H&&k&&b.push([w,x]),M?E.pop():(m={inArray:v,index:y,keys:g,edits:b,prev:m},g=(v=Array.isArray(x))?x:null!==(z=n[x.kind])&&void 0!==z?z:[],y=-1,b=[],_&&S.push(_),_=x)}while(void 0!==m);return 0!==b.length&&(T=b[b.length-1][1]),T},t.visitInParallel=function(e){for(var t=new Array(e.length).fill(null),n=Object.create(null),r=function(){for(var r=a[i],o=!1,s=new Array(e.length).fill(void 0),u=new Array(e.length).fill(void 0),l=0;l<e.length;++l){var c=d(e[l],r),h=c.enter,p=c.leave;o||(o=null!=h||null!=p),s[l]=h,u[l]=p}if(!o)return 1;var m={enter:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var a=r[0],o=0;o<e.length;o++)if(null===t[o]){var u,l=null===(u=s[o])||void 0===u?void 0:u.apply(e[o],r);if(!1===l)t[o]=a;else if(l===f)t[o]=f;else if(void 0!==l)return l}},leave:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var a=r[0],o=0;o<e.length;o++)if(null===t[o]){var s,l=null===(s=u[o])||void 0===s?void 0:s.apply(e[o],r);if(l===f)t[o]=f;else if(void 0!==l&&!1!==l)return l}else t[o]===a&&(t[o]=null)}};n[r]=m},i=0,a=Object.values(h.Kind);i<a.length;i++)r();return n};var u=n(4688),l=n(3848),c=n(3356),h=n(7164),f=Object.freeze({});function d(e,t){var n=e[t];return"object"===r(n)?n:"function"==typeof n?{enter:n,leave:void 0}:{enter:e.enter,leave:e.leave}}t.BREAK=f},1988:(e,t)=>{t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+h],h+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=l}return(d?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*u-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+d]=255&o,d+=p,o/=256,l-=8);e[n+d-p]|=128*m}},5280:(e,t,n)=>{var r=n(5704),i=n(9904),a=n(4364),o=n(9616);function s(e,t,n,a,o){var s=[].slice.call(arguments,1),u=s.length,l="function"==typeof s[u-1];if(!l&&!r())throw new Error("Callback required as last argument");if(!l){if(u<1)throw new Error("Too few arguments provided");return 1===u?(n=t,t=a=void 0):2!==u||t.getContext||(a=n,n=t,t=void 0),new Promise((function(r,o){try{var s=i.create(n,a);r(e(s,t,a))}catch(e){o(e)}}))}if(u<2)throw new Error("Too few arguments provided");2===u?(o=n,n=t,t=a=void 0):3===u&&(t.getContext&&void 0===o?(o=a,a=void 0):(o=a,a=n,n=t,t=void 0));try{var c=i.create(n,a);o(null,e(c,t,a))}catch(e){o(e)}}t.create=i.create,t.toCanvas=s.bind(null,a.render),t.toDataURL=s.bind(null,a.renderToDataURL),t.toString=s.bind(null,(function(e,t,n){return o.render(e,n)}))},5704:e=>{e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},9504:(e,t,n)=>{var r=n(2624).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,n=r(e),i=145===n?26:2*Math.ceil((n-13)/(2*t-2)),a=[n-7],o=1;o<t-1;o++)a[o]=a[o-1]-i;return a.push(6),a.reverse()},t.getPositions=function(e){for(var n=[],r=t.getRowColCoords(e),i=r.length,a=0;a<i;a++)for(var o=0;o<i;o++)0===a&&0===o||0===a&&o===i-1||a===i-1&&0===o||n.push([r[a],r[o]]);return n}},8e3:(e,t,n)=>{var r=n(8596),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(e){this.mode=r.ALPHANUMERIC,this.data=e}a.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var n=45*i.indexOf(this.data[t]);n+=i.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(i.indexOf(this.data[t]),6)},e.exports=a},5868:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},6320:e=>{function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,n,r){var i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},9660:(e,t,n)=>{var r=n(7540),i=n(8596);function a(e){this.mode=i.BYTE,"string"==typeof e&&(e=r(e)),this.data=new Uint8Array(e)}a.getBitsLength=function(e){return 8*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=a},7800:(e,t,n)=>{var r=n(3728),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return i[4*(e-1)+0];case r.M:return i[4*(e-1)+1];case r.Q:return i[4*(e-1)+2];case r.H:return i[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return a[4*(e-1)+0];case r.M:return a[4*(e-1)+1];case r.Q:return a[4*(e-1)+2];case r.H:return a[4*(e-1)+3];default:return}}},3728:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return n}}},9116:(e,t,n)=>{var r=n(2624).getSymbolSize;t.getPositions=function(e){var t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},9844:(e,t,n)=>{var r=n(2624),i=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var n=e.bit<<3|t,a=n<<10;r.getBCHDigit(a)-i>=0;)a^=1335<<r.getBCHDigit(a)-i;return 21522^(n<<10|a)}},3988:(e,t)=>{var n=new Uint8Array(512),r=new Uint8Array(256);!function(){for(var e=1,t=0;t<255;t++)n[t]=e,r[e]=t,256&(e<<=1)&&(e^=285);for(var i=255;i<512;i++)n[i]=n[i-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},408:(e,t,n)=>{var r=n(8596),i=n(2624);function a(e){this.mode=r.KANJI,this.data=e}a.getBitsLength=function(e){return 13*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var n=i.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=a},9515:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function n(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(n+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return n*r%2+n*r%3==0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,n=0,r=0,i=0,a=null,o=null,s=0;s<t;s++){r=i=0,a=o=null;for(var u=0;u<t;u++){var l=e.get(s,u);l===a?r++:(r>=5&&(n+=r-5+3),a=l,r=1),(l=e.get(u,s))===o?i++:(i>=5&&(n+=i-5+3),o=l,i=1)}r>=5&&(n+=r-5+3),i>=5&&(n+=i-5+3)}return n},t.getPenaltyN2=function(e){for(var t=e.size,n=0,r=0;r<t-1;r++)for(var i=0;i<t-1;i++){var a=e.get(r,i)+e.get(r,i+1)+e.get(r+1,i)+e.get(r+1,i+1);4!==a&&0!==a||n++}return 3*n},t.getPenaltyN3=function(e){for(var t=e.size,n=0,r=0,i=0,a=0;a<t;a++){r=i=0;for(var o=0;o<t;o++)r=r<<1&2047|e.get(a,o),o>=10&&(1488===r||93===r)&&n++,i=i<<1&2047|e.get(o,a),o>=10&&(1488===i||93===i)&&n++}return 40*n},t.getPenaltyN4=function(e){for(var t=0,n=e.data.length,r=0;r<n;r++)t+=e.data[r];return 10*Math.abs(Math.ceil(100*t/n/5)-10)},t.applyMask=function(e,t){for(var r=t.size,i=0;i<r;i++)for(var a=0;a<r;a++)t.isReserved(a,i)||t.xor(a,i,n(e,a,i))},t.getBestMask=function(e,n){for(var r=Object.keys(t.Patterns).length,i=0,a=1/0,o=0;o<r;o++){n(o),t.applyMask(o,e);var s=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),s<a&&(a=s,i=o)}return i}},8596:(e,t,n)=>{var r=n(2664),i=n(8540);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return i.testNumeric(e)?t.NUMERIC:i.testAlphanumeric(e)?t.ALPHANUMERIC:i.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return n}}},3932:(e,t,n)=>{var r=n(8596);function i(e){this.mode=r.NUMERIC,this.data=e.toString()}i.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);var i=this.data.length-t;i>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*i+1))},e.exports=i},8560:(e,t,n)=>{var r=n(3988);t.mul=function(e,t){for(var n=new Uint8Array(e.length+t.length-1),i=0;i<e.length;i++)for(var a=0;a<t.length;a++)n[i+a]^=r.mul(e[i],t[a]);return n},t.mod=function(e,t){for(var n=new Uint8Array(e);n.length-t.length>=0;){for(var i=n[0],a=0;a<t.length;a++)n[a]^=r.mul(t[a],i);for(var o=0;o<n.length&&0===n[o];)o++;n=n.slice(o)}return n},t.generateECPolynomial=function(e){for(var n=new Uint8Array([1]),i=0;i<e;i++)n=t.mul(n,new Uint8Array([1,r.exp(i)]));return n}},9904:(e,t,n)=>{var r=n(2624),i=n(3728),a=n(5868),o=n(6320),s=n(9504),u=n(9116),l=n(9515),c=n(7800),h=n(6435),f=n(6504),d=n(9844),p=n(8596),m=n(4968);function v(e,t,n){var r,i,a=e.size,o=d.getEncodedBits(t,n);for(r=0;r<15;r++)i=1==(o>>r&1),r<6?e.set(r,8,i,!0):r<8?e.set(r+1,8,i,!0):e.set(a-15+r,8,i,!0),r<8?e.set(8,a-r-1,i,!0):r<9?e.set(8,15-r-1+1,i,!0):e.set(8,15-r-1,i,!0);e.set(a-8,8,1,!0)}function g(e,t,n,i){var d;if(Array.isArray(e))d=m.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");var g=t;if(!g){var y=m.rawSplit(e);g=f.getBestVersionForData(y,n)}d=m.fromString(e,g||40)}var b=f.getBestVersionForData(d,n);if(!b)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<b)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+b+".\n")}else t=b;var x=function(e,t,n){var i=new a;n.forEach((function(t){i.put(t.mode.bit,4),i.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(i)}));var o=8*(r.getSymbolTotalCodewords(e)-c.getTotalCodewordsCount(e,t));for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);for(var s=(o-i.getLengthInBits())/8,u=0;u<s;u++)i.put(u%2?17:236,8);return function(e,t,n){for(var i=r.getSymbolTotalCodewords(t),a=i-c.getTotalCodewordsCount(t,n),o=c.getBlocksCount(t,n),s=o-i%o,u=Math.floor(i/o),l=Math.floor(a/o),f=l+1,d=u-l,p=new h(d),m=0,v=new Array(o),g=new Array(o),y=0,b=new Uint8Array(e.buffer),x=0;x<o;x++){var w=x<s?l:f;v[x]=b.slice(m,m+w),g[x]=p.encode(v[x]),m+=w,y=Math.max(y,w)}var _,E,S=new Uint8Array(i),T=0;for(_=0;_<y;_++)for(E=0;E<o;E++)_<v[E].length&&(S[T++]=v[E][_]);for(_=0;_<d;_++)for(E=0;E<o;E++)S[T++]=g[E][_];return S}(i,e,t)}(t,n,d),w=r.getSymbolSize(t),_=new o(w);return function(e,t){for(var n=e.size,r=u.getPositions(t),i=0;i<r.length;i++)for(var a=r[i][0],o=r[i][1],s=-1;s<=7;s++)if(!(a+s<=-1||n<=a+s))for(var l=-1;l<=7;l++)o+l<=-1||n<=o+l||(s>=0&&s<=6&&(0===l||6===l)||l>=0&&l<=6&&(0===s||6===s)||s>=2&&s<=4&&l>=2&&l<=4?e.set(a+s,o+l,!0,!0):e.set(a+s,o+l,!1,!0))}(_,t),function(e){for(var t=e.size,n=8;n<t-8;n++){var r=n%2==0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}(_),function(e,t){for(var n=s.getPositions(t),r=0;r<n.length;r++)for(var i=n[r][0],a=n[r][1],o=-2;o<=2;o++)for(var u=-2;u<=2;u++)-2===o||2===o||-2===u||2===u||0===o&&0===u?e.set(i+o,a+u,!0,!0):e.set(i+o,a+u,!1,!0)}(_,t),v(_,n,0),t>=7&&function(e,t){for(var n,r,i,a=e.size,o=f.getEncodedBits(t),s=0;s<18;s++)n=Math.floor(s/3),r=s%3+a-8-3,i=1==(o>>s&1),e.set(n,r,i,!0),e.set(r,n,i,!0)}(_,t),function(e,t){for(var n=e.size,r=-1,i=n-1,a=7,o=0,s=n-1;s>0;s-=2)for(6===s&&s--;;){for(var u=0;u<2;u++)if(!e.isReserved(i,s-u)){var l=!1;o<t.length&&(l=1==(t[o]>>>a&1)),e.set(i,s-u,l),-1==--a&&(o++,a=7)}if((i+=r)<0||n<=i){i-=r,r=-r;break}}}(_,x),isNaN(i)&&(i=l.getBestMask(_,v.bind(null,_,n))),l.applyMask(i,_),v(_,n,i),{modules:_,version:t,errorCorrectionLevel:n,maskPattern:i,segments:d}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");var n,a,o=i.M;return void 0!==t&&(o=i.from(t.errorCorrectionLevel,i.M),n=f.from(t.version),a=l.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),g(e,n,o,a)}},6435:(e,t,n)=>{var r=n(8560);function i(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=new Uint8Array(e.length+this.degree);t.set(e);var n=r.mod(t,this.genPoly),i=this.degree-n.length;if(i>0){var a=new Uint8Array(this.degree);return a.set(n,i),a}return n},e.exports=i},8540:(e,t)=>{var n="[0-9]+",r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",i="(?:(?![A-Z0-9 $%*+\\-./:]|"+(r=r.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(i,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var a=new RegExp("^"+r+"$"),o=new RegExp("^"+n+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return a.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return s.test(e)}},4968:(e,t,n)=>{var r=n(8596),i=n(3932),a=n(8e3),o=n(9660),s=n(408),u=n(8540),l=n(2624),c=n(3880);function h(e){return unescape(encodeURIComponent(e)).length}function f(e,t,n){for(var r,i=[];null!==(r=e.exec(n));)i.push({data:r[0],index:r.index,mode:t,length:r[0].length});return i}function d(e){var t,n,i=f(u.NUMERIC,r.NUMERIC,e),a=f(u.ALPHANUMERIC,r.ALPHANUMERIC,e);return l.isKanjiModeEnabled()?(t=f(u.BYTE,r.BYTE,e),n=f(u.KANJI,r.KANJI,e)):(t=f(u.BYTE_KANJI,r.BYTE,e),n=[]),i.concat(a,t,n).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function p(e,t){switch(t){case r.NUMERIC:return i.getBitsLength(e);case r.ALPHANUMERIC:return a.getBitsLength(e);case r.KANJI:return s.getBitsLength(e);case r.BYTE:return o.getBitsLength(e)}}function m(e,t){var n,u=r.getBestModeForData(e);if((n=r.from(t,u))!==r.BYTE&&n.bit<u.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(u));switch(n!==r.KANJI||l.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new i(e);case r.ALPHANUMERIC:return new a(e);case r.KANJI:return new s(e);case r.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e}),[])},t.fromString=function(e,n){for(var i=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];switch(i.mode){case r.NUMERIC:t.push([i,{data:i.data,mode:r.ALPHANUMERIC,length:i.length},{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.ALPHANUMERIC:t.push([i,{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.KANJI:t.push([i,{data:i.data,mode:r.BYTE,length:h(i.data)}]);break;case r.BYTE:t.push([{data:i.data,mode:r.BYTE,length:h(i.data)}])}}return t}(d(e,l.isKanjiModeEnabled())),a=function(e,t){for(var n={},i={start:{}},a=["start"],o=0;o<e.length;o++){for(var s=e[o],u=[],l=0;l<s.length;l++){var c=s[l],h=""+o+l;u.push(h),n[h]={node:c,lastCount:0},i[h]={};for(var f=0;f<a.length;f++){var d=a[f];n[d]&&n[d].node.mode===c.mode?(i[d][h]=p(n[d].lastCount+c.length,c.mode)-p(n[d].lastCount,c.mode),n[d].lastCount+=c.length):(n[d]&&(n[d].lastCount=c.length),i[d][h]=p(c.length,c.mode)+4+r.getCharCountIndicator(c.mode,t))}}a=u}for(var m=0;m<a.length;m++)i[a[m]].end=0;return{map:i,table:n}}(i,n),o=c.find_path(a.map,"start","end"),s=[],u=1;u<o.length-1;u++)s.push(a.table[o[u]].node);return t.fromArray(s.reduce((function(e,t){var n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[]))},t.rawSplit=function(e){return t.fromArray(d(e,l.isKanjiModeEnabled()))}},2624:(e,t)=>{var n,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},2664:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},6504:(e,t,n)=>{var r=n(2624),i=n(7800),a=n(3728),o=n(8596),s=n(2664),u=r.getBCHDigit(7973);function l(e,t){return o.getCharCountIndicator(e,t)+4}function c(e,t){var n=0;return e.forEach((function(e){var r=l(e.mode,t);n+=r+e.getBitsLength()})),n}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!s.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=o.BYTE);var a=8*(r.getSymbolTotalCodewords(e)-i.getTotalCodewordsCount(e,t));if(n===o.MIXED)return a;var u=a-l(n,e);switch(n){case o.NUMERIC:return Math.floor(u/10*3);case o.ALPHANUMERIC:return Math.floor(u/11*2);case o.KANJI:return Math.floor(u/13);case o.BYTE:default:return Math.floor(u/8)}},t.getBestVersionForData=function(e,n){var r,i=a.from(n,a.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(var r=1;r<=40;r++)if(c(e,r)<=t.getCapacity(r,n,o.MIXED))return r}(e,i);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(var i=1;i<=40;i++)if(n<=t.getCapacity(i,r,e))return i}(r.mode,r.getLength(),i)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;r.getBCHDigit(t)-u>=0;)t^=7973<<r.getBCHDigit(t)-u;return e<<12|t}},4364:(e,t,n)=>{var r=n(2336);t.render=function(e,t,n){var i=n,a=t;void 0!==i||t&&t.getContext||(i=t,t=void 0),t||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),i=r.getOptions(i);var o=r.getImageWidth(e.modules.size,i),s=a.getContext("2d"),u=s.createImageData(o,o);return r.qrToImageData(u.data,e,i),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(s,a,o),s.putImageData(u,0,0),a},t.renderToDataURL=function(e,n,r){var i=r;void 0!==i||n&&n.getContext||(i=n,n=void 0),i||(i={});var a=t.render(e,n,i),o=i.type||"image/png",s=i.rendererOpts||{};return a.toDataURL(o,s.quality)}},9616:(e,t,n)=>{var r=n(2336);function i(e,t){var n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function a(e,t,n){var r=e+t;return void 0!==n&&(r+=" "+n),r}t.render=function(e,t,n){var o=r.getOptions(t),s=e.modules.size,u=e.modules.data,l=s+2*o.margin,c=o.color.light.a?"<path "+i(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",h="<path "+i(o.color.dark,"stroke")+' d="'+function(e,t,n){for(var r="",i=0,o=!1,s=0,u=0;u<e.length;u++){var l=Math.floor(u%t),c=Math.floor(u/t);l||o||(o=!0),e[u]?(s++,u>0&&l>0&&e[u-1]||(r+=o?a("M",l+n,.5+c+n):a("m",i,0),i=0,o=!1),l+1<t&&e[u+1]||(r+=a("h",s),s=0)):i++}return r}(u,s,o.margin)+'"/>',f='viewBox="0 0 '+l+" "+l+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+f+' shape-rendering="crispEdges">'+c+h+"</svg>\n";return"function"==typeof n&&n(null,d),d}},2336:(e,t)=>{function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){var r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){for(var i=n.modules.size,a=n.modules.data,o=t.getScale(i,r),s=Math.floor((i+2*r.margin)*o),u=r.margin*o,l=[r.color.light,r.color.dark],c=0;c<s;c++)for(var h=0;h<s;h++){var f=4*(c*s+h),d=r.color.light;c>=u&&h>=u&&c<s-u&&h<s-u&&(d=l[a[Math.floor((c-u)/o)*i+Math.floor((h-u)/o)]?1:0]),e[f++]=d.r,e[f++]=d.g,e[f++]=d.b,e[f]=d.a}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.u=e=>e+".bundle.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&!e;)e=r[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>di,AddEquation:()=>Nr,AddOperation:()=>ui,AdditiveAnimationBlendMode:()=>Ga,AdditiveBlending:()=>Cr,AlphaFormat:()=>qi,AlwaysDepth:()=>$r,AlwaysStencilFunc:()=>yo,AmbientLight:()=>Sv,AmbientLightProbe:()=>zv,AnimationAction:()=>mg,AnimationClip:()=>Xm,AnimationLoader:()=>rv,AnimationMixer:()=>gg,AnimationObjectGroup:()=>pg,AnimationUtils:()=>Om,ArcCurve:()=>Qd,ArrayCamera:()=>Sf,ArrowHelper:()=>uy,Audio:()=>Qv,AudioAnalyser:()=>ig,AudioContext:()=>Bv,AudioListener:()=>Zv,AudioLoader:()=>Uv,AxesHelper:()=>ly,BackSide:()=>kr,BasicDepthPacking:()=>Ya,BasicShadowMap:()=>_r,Bone:()=>dd,BooleanKeyframeTrack:()=>zm,Box2:()=>Ig,Box3:()=>Ts,Box3Helper:()=>ay,BoxBufferGeometry:()=>hy,BoxGeometry:()=>Nl,BoxHelper:()=>iy,BufferAttribute:()=>Qu,BufferGeometry:()=>vl,BufferGeometryLoader:()=>Rv,ByteType:()=>Di,Cache:()=>Jm,Camera:()=>Gl,CameraHelper:()=>$g,CanvasTexture:()=>Kd,CapsuleBufferGeometry:()=>fy,CapsuleGeometry:()=>bp,CatmullRomCurve3:()=>ip,CineonToneMapping:()=>fi,CircleBufferGeometry:()=>dy,CircleGeometry:()=>xp,ClampToEdgeWrapping:()=>_i,Clock:()=>qv,Color:()=>Gu,ColorKeyframeTrack:()=>Hm,ColorManagement:()=>us,CompressedArrayTexture:()=>Yd,CompressedTexture:()=>Xd,CompressedTextureLoader:()=>iv,ConeBufferGeometry:()=>py,ConeGeometry:()=>_p,CubeCamera:()=>ql,CubeReflectionMapping:()=>vi,CubeRefractionMapping:()=>gi,CubeTexture:()=>Wl,CubeTextureLoader:()=>ov,CubeUVReflectionMapping:()=>xi,CubicBezierCurve:()=>up,CubicBezierCurve3:()=>lp,CubicInterpolant:()=>Nm,CullFaceBack:()=>br,CullFaceFront:()=>xr,CullFaceFrontBack:()=>wr,CullFaceNone:()=>yr,Curve:()=>Jd,CurvePath:()=>vp,CustomBlending:()=>Dr,CustomToneMapping:()=>pi,CylinderBufferGeometry:()=>my,CylinderGeometry:()=>wp,Cylindrical:()=>kg,Data3DTexture:()=>ys,DataArrayTexture:()=>vs,DataTexture:()=>pd,DataTextureLoader:()=>sv,DataUtils:()=>Ku,DecrementStencilOp:()=>oo,DecrementWrapStencilOp:()=>uo,DefaultLoadingManager:()=>Qm,DepthFormat:()=>Ki,DepthStencilFormat:()=>Ji,DepthTexture:()=>Af,DirectionalLight:()=>Ev,DirectionalLightHelper:()=>Jg,DiscreteInterpolant:()=>Um,DisplayP3ColorSpace:()=>to,DodecahedronBufferGeometry:()=>vy,DodecahedronGeometry:()=>Sp,DoubleSide:()=>Ar,DstAlphaFactor:()=>Xr,DstColorFactor:()=>Kr,DynamicCopyUsage:()=>Mo,DynamicDrawUsage:()=>xo,DynamicReadUsage:()=>Eo,EdgesGeometry:()=>Ip,EllipseCurve:()=>Zd,EqualDepth:()=>ni,EqualStencilFunc:()=>fo,EquirectangularReflectionMapping:()=>yi,EquirectangularRefractionMapping:()=>bi,Euler:()=>uu,EventDispatcher:()=>Ro,ExtrudeBufferGeometry:()=>gy,ExtrudeGeometry:()=>im,FileLoader:()=>nv,Float16BufferAttribute:()=>ol,Float32BufferAttribute:()=>sl,Float64BufferAttribute:()=>ul,FloatType:()=>zi,Fog:()=>Nf,FogExp2:()=>Df,FramebufferTexture:()=>Wd,FrontSide:()=>Mr,Frustum:()=>ec,GLBufferAttribute:()=>_g,GLSL1:()=>Ao,GLSL3:()=>Io,GreaterDepth:()=>ii,GreaterEqualDepth:()=>ri,GreaterEqualStencilFunc:()=>go,GreaterStencilFunc:()=>mo,GridHelper:()=>qg,Group:()=>Tf,HalfFloatType:()=>Hi,HemisphereLight:()=>cv,HemisphereLightHelper:()=>Vg,HemisphereLightProbe:()=>Fv,IcosahedronBufferGeometry:()=>yy,IcosahedronGeometry:()=>om,ImageBitmapLoader:()=>Nv,ImageLoader:()=>av,ImageUtils:()=>ls,IncrementStencilOp:()=>ao,IncrementWrapStencilOp:()=>so,InstancedBufferAttribute:()=>yd,InstancedBufferGeometry:()=>Lv,InstancedInterleavedBuffer:()=>wg,InstancedMesh:()=>Md,Int16BufferAttribute:()=>nl,Int32BufferAttribute:()=>il,Int8BufferAttribute:()=>$u,IntType:()=>Ui,InterleavedBuffer:()=>Uf,InterleavedBufferAttribute:()=>zf,Interpolant:()=>Dm,InterpolateDiscrete:()=>Da,InterpolateLinear:()=>Na,InterpolateSmooth:()=>Ba,InvertStencilOp:()=>lo,KeepStencilOp:()=>ro,KeyframeTrack:()=>Fm,LOD:()=>id,LatheBufferGeometry:()=>by,LatheGeometry:()=>yp,Layers:()=>lu,LessDepth:()=>ei,LessEqualDepth:()=>ti,LessEqualStencilFunc:()=>po,LessStencilFunc:()=>ho,Light:()=>lv,LightProbe:()=>kv,Line:()=>Pd,Line3:()=>Cg,LineBasicMaterial:()=>kd,LineCurve:()=>cp,LineCurve3:()=>hp,LineDashedMaterial:()=>km,LineLoop:()=>Bd,LineSegments:()=>Nd,LinearEncoding:()=>Wa,LinearFilter:()=>Ii,LinearInterpolant:()=>Bm,LinearMipMapLinearFilter:()=>Pi,LinearMipMapNearestFilter:()=>Ri,LinearMipmapLinearFilter:()=>Ci,LinearMipmapNearestFilter:()=>Li,LinearSRGBColorSpace:()=>eo,LinearToneMapping:()=>ci,Loader:()=>$m,LoaderUtils:()=>Iv,LoadingManager:()=>Zm,LoopOnce:()=>Ca,LoopPingPong:()=>Oa,LoopRepeat:()=>Pa,LuminanceAlphaFormat:()=>Yi,LuminanceFormat:()=>Xi,MOUSE:()=>vr,Material:()=>Bu,MaterialLoader:()=>Av,MathUtils:()=>qo,Matrix3:()=>Xo,Matrix4:()=>Qs,MaxEquation:()=>zr,Mesh:()=>Ol,MeshBasicMaterial:()=>Vu,MeshDepthMaterial:()=>yf,MeshDistanceMaterial:()=>bf,MeshLambertMaterial:()=>Tm,MeshMatcapMaterial:()=>Mm,MeshNormalMaterial:()=>Sm,MeshPhongMaterial:()=>_m,MeshPhysicalMaterial:()=>wm,MeshStandardMaterial:()=>xm,MeshToonMaterial:()=>Em,MinEquation:()=>Fr,MirroredRepeatWrapping:()=>Ei,MixOperation:()=>si,MultiplyBlending:()=>Or,MultiplyOperation:()=>oi,NearestFilter:()=>Si,NearestMipMapLinearFilter:()=>Ai,NearestMipMapNearestFilter:()=>Mi,NearestMipmapLinearFilter:()=>ki,NearestMipmapNearestFilter:()=>Ti,NeverDepth:()=>Qr,NeverStencilFunc:()=>co,NoBlending:()=>Lr,NoColorSpace:()=>Qa,NoToneMapping:()=>li,NormalAnimationBlendMode:()=>Ha,NormalBlending:()=>Rr,NotEqualDepth:()=>ai,NotEqualStencilFunc:()=>vo,NumberKeyframeTrack:()=>Gm,Object3D:()=>Eu,ObjectLoader:()=>Cv,ObjectSpaceNormalMap:()=>Za,OctahedronBufferGeometry:()=>xy,OctahedronGeometry:()=>sm,OneFactor:()=>Gr,OneMinusDstAlphaFactor:()=>Yr,OneMinusDstColorFactor:()=>Jr,OneMinusSrcAlphaFactor:()=>Wr,OneMinusSrcColorFactor:()=>Vr,OrthographicCamera:()=>pc,PCFShadowMap:()=>Er,PCFSoftShadowMap:()=>Sr,PMREMGenerator:()=>Ec,Path:()=>gp,PerspectiveCamera:()=>jl,Plane:()=>Zl,PlaneBufferGeometry:()=>wy,PlaneGeometry:()=>rc,PlaneHelper:()=>oy,PointLight:()=>wv,PointLightHelper:()=>zg,Points:()=>jd,PointsMaterial:()=>Ud,PolarGridHelper:()=>Wg,PolyhedronBufferGeometry:()=>_y,PolyhedronGeometry:()=>Ep,PositionalAudio:()=>rg,PropertyBinding:()=>dg,PropertyMixer:()=>ag,QuadraticBezierCurve:()=>fp,QuadraticBezierCurve3:()=>dp,Quaternion:()=>ws,QuaternionKeyframeTrack:()=>Vm,QuaternionLinearInterpolant:()=>jm,RED_GREEN_RGTC2_Format:()=>La,RED_RGTC1_Format:()=>Aa,REVISION:()=>mr,RGBADepthPacking:()=>Ka,RGBAFormat:()=>Wi,RGBAIntegerFormat:()=>ta,RGBA_ASTC_10x10_Format:()=>Sa,RGBA_ASTC_10x5_Format:()=>wa,RGBA_ASTC_10x6_Format:()=>_a,RGBA_ASTC_10x8_Format:()=>Ea,RGBA_ASTC_12x10_Format:()=>Ta,RGBA_ASTC_12x12_Format:()=>Ma,RGBA_ASTC_4x4_Format:()=>da,RGBA_ASTC_5x4_Format:()=>pa,RGBA_ASTC_5x5_Format:()=>ma,RGBA_ASTC_6x5_Format:()=>va,RGBA_ASTC_6x6_Format:()=>ga,RGBA_ASTC_8x5_Format:()=>ya,RGBA_ASTC_8x6_Format:()=>ba,RGBA_ASTC_8x8_Format:()=>xa,RGBA_BPTC_Format:()=>ka,RGBA_ETC2_EAC_Format:()=>fa,RGBA_PVRTC_2BPPV1_Format:()=>la,RGBA_PVRTC_4BPPV1_Format:()=>ua,RGBA_S3TC_DXT1_Format:()=>ra,RGBA_S3TC_DXT3_Format:()=>ia,RGBA_S3TC_DXT5_Format:()=>aa,RGB_ETC1_Format:()=>ca,RGB_ETC2_Format:()=>ha,RGB_PVRTC_2BPPV1_Format:()=>sa,RGB_PVRTC_4BPPV1_Format:()=>oa,RGB_S3TC_DXT1_Format:()=>na,RGFormat:()=>$i,RGIntegerFormat:()=>ea,RawShaderMaterial:()=>bm,Ray:()=>Zs,Raycaster:()=>Eg,RectAreaLight:()=>Tv,RedFormat:()=>Zi,RedIntegerFormat:()=>Qi,ReinhardToneMapping:()=>hi,RepeatWrapping:()=>wi,ReplaceStencilOp:()=>io,ReverseSubtractEquation:()=>Ur,RingBufferGeometry:()=>Ey,RingGeometry:()=>um,SIGNED_RED_GREEN_RGTC2_Format:()=>Ra,SIGNED_RED_RGTC1_Format:()=>Ia,SRGBColorSpace:()=>$a,Scene:()=>Bf,ShaderChunk:()=>ic,ShaderLib:()=>oc,ShaderMaterial:()=>Hl,ShadowMaterial:()=>ym,Shape:()=>Lp,ShapeBufferGeometry:()=>Sy,ShapeGeometry:()=>lm,ShapePath:()=>cy,ShapeUtils:()=>tm,ShortType:()=>Ni,Skeleton:()=>gd,SkeletonHelper:()=>Ug,SkinnedMesh:()=>fd,Source:()=>cs,Sphere:()=>js,SphereBufferGeometry:()=>Ty,SphereGeometry:()=>cm,Spherical:()=>Mg,SphericalHarmonics3:()=>Mv,SplineCurve:()=>pp,SpotLight:()=>vv,SpotLightHelper:()=>Og,Sprite:()=>ed,SpriteMaterial:()=>Hf,SrcAlphaFactor:()=>qr,SrcAlphaSaturateFactor:()=>Zr,SrcColorFactor:()=>jr,StaticCopyUsage:()=>To,StaticDrawUsage:()=>bo,StaticReadUsage:()=>_o,StereoCamera:()=>Vv,StreamCopyUsage:()=>ko,StreamDrawUsage:()=>wo,StreamReadUsage:()=>So,StringKeyframeTrack:()=>qm,SubtractEquation:()=>Br,SubtractiveBlending:()=>Pr,TOUCH:()=>gr,TangentSpaceNormalMap:()=>Ja,TetrahedronBufferGeometry:()=>My,TetrahedronGeometry:()=>hm,Texture:()=>ds,TextureLoader:()=>uv,TorusBufferGeometry:()=>ky,TorusGeometry:()=>fm,TorusKnotBufferGeometry:()=>Ay,TorusKnotGeometry:()=>dm,Triangle:()=>Du,TriangleFanDrawMode:()=>qa,TriangleStripDrawMode:()=>Va,TrianglesDrawMode:()=>ja,TubeBufferGeometry:()=>Iy,TubeGeometry:()=>pm,TwoPassDoubleSide:()=>Ir,UVMapping:()=>mi,Uint16BufferAttribute:()=>rl,Uint32BufferAttribute:()=>al,Uint8BufferAttribute:()=>el,Uint8ClampedBufferAttribute:()=>tl,Uniform:()=>yg,UniformsGroup:()=>xg,UniformsLib:()=>ac,UniformsUtils:()=>zl,UnsignedByteType:()=>Oi,UnsignedInt248Type:()=>Vi,UnsignedIntType:()=>Fi,UnsignedShort4444Type:()=>Gi,UnsignedShort5551Type:()=>ji,UnsignedShortType:()=>Bi,VSMShadowMap:()=>Tr,Vector2:()=>Wo,Vector3:()=>_s,Vector4:()=>ps,VectorKeyframeTrack:()=>Wm,VideoTexture:()=>qd,WebGL1Renderer:()=>Pf,WebGL3DRenderTarget:()=>bs,WebGLArrayRenderTarget:()=>gs,WebGLCubeRenderTarget:()=>Xl,WebGLMultipleRenderTargets:()=>xs,WebGLRenderTarget:()=>ms,WebGLRenderer:()=>Cf,WebGLUtils:()=>Ef,WireframeGeometry:()=>mm,WrapAroundEnding:()=>za,ZeroCurvatureEnding:()=>Ua,ZeroFactor:()=>Hr,ZeroSlopeEnding:()=>Fa,ZeroStencilOp:()=>no,_SRGBAFormat:()=>Lo,sRGBEncoding:()=>Xa});var t={};n.r(t),n.d(t,{Decoder:()=>OL,Encoder:()=>CL,PacketType:()=>IL,protocol:()=>RL});var r={"Total ANAVER.SE":{dbut:0,fin:0,dure:"NA"},"Code Barre":{dbut:0,fin:0,dure:"NA"},Identit:{dbut:0,fin:0,dure:"NA"},"Liste des Jetons Natifs":{dbut:0,fin:0,dure:"NA"},"Choix alatoire":{dbut:0,fin:0,dure:"NA"},"Tlchargement premier espace":{dbut:0,fin:0,dure:"NA"},"Cration Monde":{dbut:0,fin:0,dure:"NA"},"Galleries Natives":{dbut:0,fin:0,dure:"NA"}};function i(){}function a(e){return null==e?i:function(){return this.querySelector(e)}}function o(){return[]}function s(e){return null==e?o:function(){return this.querySelectorAll(e)}}function u(e){return function(){return this.matches(e)}}function l(e){return function(t){return t.matches(e)}}window.horlogesLog=function(){for(var e in console.log("%cTableau de bord des horloges","font-weight:bold;text-decoration:underline;"),console.log("Toutes les dures sont en millisecondes."),r)r[e].fin>0?r[e].dure=r[e].fin-r[e].dbut:r[e].dure="NA";console.table(r)};var c=Array.prototype.find;function h(){return this.firstElementChild}var f=Array.prototype.filter;function d(){return Array.from(this.children)}function p(e){return new Array(e.length)}function m(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t,n,r,i,a){for(var o,s=0,u=t.length,l=a.length;s<l;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new m(e,a[s]);for(;s<u;++s)(o=t[s])&&(i[s]=o)}function y(e,t,n,r,i,a,o){var s,u,l,c=new Map,h=t.length,f=a.length,d=new Array(h);for(s=0;s<h;++s)(u=t[s])&&(d[s]=l=o.call(u,u.__data__,s,t)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<f;++s)l=o.call(e,a[s],s,a)+"",(u=c.get(l))?(r[s]=u,u.__data__=a[s],c.delete(l)):n[s]=new m(e,a[s]);for(s=0;s<h;++s)(u=t[s])&&c.get(d[s])===u&&(i[s]=u)}function b(e){return e.__data__}function x(e){return"object"===v(e)&&"length"in e?e:Array.from(e)}function w(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}m.prototype={constructor:m,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var E="http://www.w3.org/1999/xhtml";const S={svg:"http://www.w3.org/2000/svg",xhtml:E,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function T(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),S.hasOwnProperty(t)?{space:S[t],local:e}:e}function M(e){return function(){this.removeAttribute(e)}}function k(e){return function(){this.removeAttributeNS(e.space,e.local)}}function A(e,t){return function(){this.setAttribute(e,t)}}function I(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function L(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function R(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function C(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function P(e){return function(){this.style.removeProperty(e)}}function O(e,t,n){return function(){this.style.setProperty(e,t,n)}}function D(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function N(e,t){return e.style.getPropertyValue(t)||C(e).getComputedStyle(e,null).getPropertyValue(t)}function B(e){return function(){delete this[e]}}function U(e,t){return function(){this[e]=t}}function F(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function z(e){return e.trim().split(/^|\s+/)}function H(e){return e.classList||new G(e)}function G(e){this._node=e,this._names=z(e.getAttribute("class")||"")}function j(e,t){for(var n=H(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function V(e,t){for(var n=H(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function q(e){return function(){j(this,e)}}function W(e){return function(){V(this,e)}}function X(e,t){return function(){(t.apply(this,arguments)?j:V)(this,e)}}function Y(){this.textContent=""}function K(e){return function(){this.textContent=e}}function J(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Z(){this.innerHTML=""}function Q(e){return function(){this.innerHTML=e}}function $(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ee(){this.nextSibling&&this.parentNode.appendChild(this)}function te(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ne(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===E&&t.documentElement.namespaceURI===E?t.createElement(e):t.createElementNS(n,e)}}function re(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ie(e){var t=T(e);return(t.local?re:ne)(t)}function ae(){return null}function oe(){var e=this.parentNode;e&&e.removeChild(this)}function se(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ue(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function le(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function ce(e,t,n){return function(){var r,i=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}function he(e,t,n){var r=C(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function fe(e,t){return function(){return he(this,e,t)}}function de(e,t){return function(){return he(this,e,t.apply(this,arguments))}}function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function me(){me=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:M(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",v={};function g(){}function y(){}function b(){}var x={};l(x,o,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(R([])));_&&_!==n&&r.call(_,o)&&(x=_);var E=b.prototype=g.prototype=Object.create(x);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var u=h(e[i],e,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==pe(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function M(t,n,r){var i=f;return function(a,o){if(i===p)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=k(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?m:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(pe(t)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(T.prototype),l(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(E),l(E,u,"Generator"),l(E,o,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}G.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ve=me().mark(ge);function ge(){var e,t,n,r,i,a,o;return me().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){s.next=13;break}r=e[t],i=0,a=r.length;case 3:if(!(i<a)){s.next=10;break}if(!(o=r[i])){s.next=7;break}return s.next=7,o;case 7:++i,s.next=3;break;case 10:++t,s.next=1;break;case 13:case"end":return s.stop()}}),ve,this)}function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}var be=[null];function xe(e,t){this._groups=e,this._parents=t}function we(){return new xe([[document.documentElement]],be)}xe.prototype=we.prototype=function(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ye(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ye(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({constructor:xe,select:function(e){"function"!=typeof e&&(e=a(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s,u=t[i],l=u.length,c=r[i]=new Array(l),h=0;h<l;++h)(o=u[h])&&(s=e.call(o,o.__data__,h,u))&&("__data__"in o&&(s.__data__=o.__data__),c[h]=s);return new xe(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}(e):s(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,u=t[a],l=u.length,c=0;c<l;++c)(o=u[c])&&(r.push(e.call(o,o.__data__,c,u)),i.push(o));return new xe(r,i)},selectChild:function(e){return this.select(null==e?h:function(e){return function(){return c.call(this.children,e)}}("function"==typeof e?e:l(e)))},selectChildren:function(e){return this.selectAll(null==e?d:function(e){return function(){return f.call(this.children,e)}}("function"==typeof e?e:l(e)))},filter:function(e){"function"!=typeof e&&(e=u(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new xe(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,b);var n=t?y:g,r=this._parents,i=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=r[l],h=i[l],f=h.length,d=x(e.call(c,c&&c.__data__,l,r)),p=d.length,m=s[l]=new Array(p),v=o[l]=new Array(p);n(c,h,m,v,u[l]=new Array(f),d,t);for(var w,_,E=0,S=0;E<p;++E)if(w=m[E]){for(E>=S&&(S=E+1);!(_=v[S])&&++S<p;);w._next=_||null}}return(o=new xe(o,r))._enter=s,o._exit=u,o},enter:function(){return new xe(this._enter||this._groups.map(p),this._parents)},exit:function(){return new xe(this._exit||this._groups.map(p),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var l,c=n[u],h=r[u],f=c.length,d=s[u]=new Array(f),p=0;p<f;++p)(l=c[p]||h[p])&&(d[p]=l);for(;u<i;++u)s[u]=n[u];return new xe(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=w);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],u=s.length,l=i[a]=new Array(u),c=0;c<u;++c)(o=s[c])&&(l[c]=o);l.sort(t)}return new xe(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e,t=0,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this);try{for(n.s();!(e=n.n()).done;)e.value,++t}catch(e){n.e(e)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=T(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?k:M:"function"==typeof t?n.local?R:L:n.local?I:A)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?P:"function"==typeof t?D:O)(e,t,null==n?"":n)):N(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?B:"function"==typeof t?F:U)(e,t)):this.node()[e]},classed:function(e,t){var n=z(e+"");if(arguments.length<2){for(var r=H(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?X:t?q:W)(n,t))},text:function(e){return arguments.length?this.each(null==e?Y:("function"==typeof e?J:K)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Z:("function"==typeof e?$:Q)(e)):this.node().innerHTML},raise:function(){return this.each(ee)},lower:function(){return this.each(te)},append:function(e){var t="function"==typeof e?e:ie(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:ie(e),r=null==t?ae:"function"==typeof t?t:a(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(oe)},clone:function(e){return this.select(e?ue:se)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?ce:le,r=0;r<o;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?de:fe)(e,t))}},Symbol.iterator,ge);const _e=we;var Ee={value:function(){}};function Se(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Te(r)}function Te(e){this._=e}function Me(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function ke(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ee,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Te.prototype=Se.prototype={constructor:Te,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=a[o]).type)i[n]=ke(i[n],e.name,t);else if(null==t)for(n in i)i[n]=ke(i[n],e.name,null);return this}for(;++o<s;)if((n=(e=a[o]).type)&&(n=Me(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Te(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};const Ae=Se;function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}var Le,Re,Ce=0,Pe=0,Oe=0,De=1e3,Ne=0,Be=0,Ue=0,Fe="object"===("undefined"==typeof performance?"undefined":Ie(performance))&&performance.now?performance:Date,ze="object"===("undefined"==typeof window?"undefined":Ie(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function He(){return Be||(ze(Ge),Be=Fe.now()+Ue)}function Ge(){Be=0}function je(){this._call=this._time=this._next=null}function Ve(e,t,n){var r=new je;return r.restart(e,t,n),r}function qe(){Be=(Ne=Fe.now())+Ue,Ce=Pe=0;try{!function(){He(),++Ce;for(var e,t=Le;t;)(e=Be-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ce}()}finally{Ce=0,function(){for(var e,t,n=Le,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Le=t);Re=e,Xe(r)}(),Be=0}}function We(){var e=Fe.now(),t=e-Ne;t>De&&(Ue-=t,Ne=e)}function Xe(e){Ce||(Pe&&(Pe=clearTimeout(Pe)),e-Be>24?(e<1/0&&(Pe=setTimeout(qe,e-Fe.now()-Ue)),Oe&&(Oe=clearInterval(Oe))):(Oe||(Ne=Fe.now(),Oe=setInterval(We,De)),Ce=1,ze(qe)))}function Ye(e,t,n){var r=new je;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}je.prototype=Ve.prototype={constructor:je,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?He():+n)+(null==t?0:+t),this._next||Re===this||(Re?Re._next=this:Le=this,Re=this),this._call=e,this._time=n,Xe()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xe())}};var Ke=Ae("start","end","cancel","interrupt"),Je=[],Ze=0,Qe=3;function $e(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(u){var l,c,h,f;if(1!==n.state)return s();for(l in i)if((f=i[l]).name===n.name){if(f.state===Qe)return Ye(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[l]):+l<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[l])}if(Ye((function(){n.state===Qe&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(u))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=Qe,r=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function o(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Ve((function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:i,on:Ke,tween:Je,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ze})}function et(e,t){var n=nt(e,t);if(n.state>Ze)throw new Error("too late; already scheduled");return n}function tt(e,t){var n=nt(e,t);if(n.state>Qe)throw new Error("too late; already running");return n}function nt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function rt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var it,at=180/Math.PI,ot={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function st(e,t,n,r,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*at,skewX:Math.atan(u)*at,scaleX:o,scaleY:s}}function ut(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var s=[],u=[];return a=e(a),o=e(o),function(e,r,i,a,o,s){if(e!==i||r!==a){var u=o.push("translate(",null,t,null,n);s.push({i:u-4,x:rt(e,i)},{i:u-2,x:rt(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,u),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:rt(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,s,u),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:rt(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,s,u),function(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:rt(e,n)},{i:s-2,x:rt(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,u),a=o=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var lt=ut((function(e){var t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ot:st(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),ct=ut((function(e){return null==e?ot:(it||(it=document.createElementNS("http://www.w3.org/2000/svg","g")),it.setAttribute("transform",e),(e=it.transform.baseVal.consolidate())?st((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):ot)}),", ",")",")");function ht(e,t){var n,r;return function(){var i=tt(this,e),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}function ft(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=tt(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function dt(e,t,n){var r=e._id;return e.each((function(){var e=tt(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return nt(e,r).value[t]}}function pt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function mt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function vt(){return vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vt.apply(this,arguments)}function gt(){}var yt=.7,bt=1/yt,xt="\\s*([+-]?\\d+)\\s*",wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Et=/^#([0-9a-f]{3,8})$/,St=new RegExp("^rgb\\(".concat(xt,",").concat(xt,",").concat(xt,"\\)$")),Tt=new RegExp("^rgb\\(".concat(_t,",").concat(_t,",").concat(_t,"\\)$")),Mt=new RegExp("^rgba\\(".concat(xt,",").concat(xt,",").concat(xt,",").concat(wt,"\\)$")),kt=new RegExp("^rgba\\(".concat(_t,",").concat(_t,",").concat(_t,",").concat(wt,"\\)$")),At=new RegExp("^hsl\\(".concat(wt,",").concat(_t,",").concat(_t,"\\)$")),It=new RegExp("^hsla\\(".concat(wt,",").concat(_t,",").concat(_t,",").concat(wt,"\\)$")),Lt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Rt(){return this.rgb().formatHex()}function Ct(){return this.rgb().formatRgb()}function Pt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Et.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Ot(t):3===n?new Bt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Dt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Dt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=St.exec(e))?new Bt(t[1],t[2],t[3],1):(t=Tt.exec(e))?new Bt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Mt.exec(e))?Dt(t[1],t[2],t[3],t[4]):(t=kt.exec(e))?Dt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=At.exec(e))?jt(t[1],t[2]/100,t[3]/100,1):(t=It.exec(e))?jt(t[1],t[2]/100,t[3]/100,t[4]):Lt.hasOwnProperty(e)?Ot(Lt[e]):"transparent"===e?new Bt(NaN,NaN,NaN,0):null}function Ot(e){return new Bt(e>>16&255,e>>8&255,255&e,1)}function Dt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Bt(e,t,n,r)}function Nt(e,t,n,r){return 1===arguments.length?((i=e)instanceof gt||(i=Pt(i)),i?new Bt((i=i.rgb()).r,i.g,i.b,i.opacity):new Bt):new Bt(e,t,n,null==r?1:r);var i}function Bt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ut(){return"#".concat(Gt(this.r)).concat(Gt(this.g)).concat(Gt(this.b))}function Ft(){var e=zt(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Ht(this.r),", ").concat(Ht(this.g),", ").concat(Ht(this.b)).concat(1===e?")":", ".concat(e,")"))}function zt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Gt(e){return((e=Ht(e))<16?"0":"")+e.toString(16)}function jt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qt(e,t,n,r)}function Vt(e){if(e instanceof qt)return new qt(e.h,e.s,e.l,e.opacity);if(e instanceof gt||(e=Pt(e)),!e)return new qt;if(e instanceof qt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new qt(o,s,u,e.opacity)}function qt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Wt(e){return(e=(e||0)%360)<0?e+360:e}function Xt(e){return Math.max(0,Math.min(1,e||0))}function Yt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Kt(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}pt(gt,Pt,{copy:function(e){return vt(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Rt,formatHex:Rt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Vt(this).formatHsl()},formatRgb:Ct,toString:Ct}),pt(Bt,Nt,mt(gt,{brighter:function(e){return e=null==e?bt:Math.pow(bt,e),new Bt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?yt:Math.pow(yt,e),new Bt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new Bt(Ht(this.r),Ht(this.g),Ht(this.b),zt(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ut,formatHex:Ut,formatHex8:function(){return"#".concat(Gt(this.r)).concat(Gt(this.g)).concat(Gt(this.b)).concat(Gt(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Ft,toString:Ft})),pt(qt,(function(e,t,n,r){return 1===arguments.length?Vt(e):new qt(e,t,n,null==r?1:r)}),mt(gt,{brighter:function(e){return e=null==e?bt:Math.pow(bt,e),new qt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?yt:Math.pow(yt,e),new qt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Bt(Yt(e>=240?e-240:e+120,i,r),Yt(e,i,r),Yt(e<120?e+240:e-120,i,r),this.opacity)},clamp:function(){return new qt(Wt(this.h),Xt(this.s),Xt(this.l),zt(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=zt(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Wt(this.h),", ").concat(100*Xt(this.s),"%, ").concat(100*Xt(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Jt=function(e){return function(){return e}};function Zt(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Jt(isNaN(e)?t:e)}const Qt=function e(t){var n=function(e){return 1==(e=+e)?Zt:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Jt(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=Nt(e)).r,(t=Nt(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=Zt(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function $t(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Nt(t[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=e(a),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=s(e),r+""}}}$t((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return Kt((n-r/t)*t,o,i,a,s)}})),$t((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return Kt((n-r/t)*t,i,a,o,s)}}));var en=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tn=new RegExp(en.source,"g");function nn(e,t){var n,r,i,a=en.lastIndex=tn.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=en.exec(e))&&(r=tn.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:rt(n,r)})),a=tn.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function rn(e,t){var n;return("number"==typeof t?rt:t instanceof Pt?Qt:(n=Pt(t))?(t=n,Qt):nn)(e,t)}function an(e){return function(){this.removeAttribute(e)}}function on(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sn(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}}function un(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}function ln(e,t,n){var r,i,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttribute(e))===(s=u+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,u));this.removeAttribute(e)}}function cn(e,t,n){var r,i,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,u));this.removeAttributeNS(e.space,e.local)}}function hn(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function fn(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function dn(e,t){return function(){et(this,e).delay=+t.apply(this,arguments)}}function pn(e,t){return t=+t,function(){et(this,e).delay=t}}function mn(e,t){return function(){tt(this,e).duration=+t.apply(this,arguments)}}function vn(e,t){return t=+t,function(){tt(this,e).duration=t}}var gn=_e.prototype.constructor;function yn(e){return function(){this.style.removeProperty(e)}}function bn(e){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(e)}var xn=0;function wn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function _n(){return++xn}var En=_e.prototype;wn.prototype=function(e){return _e().transition(e)}.prototype=function(e,t,n){return t=function(e){var t=function(e,t){if("object"!=bn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=bn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bn(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({constructor:wn,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=a(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var u,l,c=r[s],h=c.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=c[d])&&(l=e.call(u,u.__data__,d,c))&&("__data__"in u&&(l.__data__=u.__data__),f[d]=l,$e(f[d],t,n,d,f,nt(u,n)));return new wn(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=s(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var l,c=r[u],h=c.length,f=0;f<h;++f)if(l=c[f]){for(var d,p=e.call(l,l.__data__,f,c),m=nt(l,n),v=0,g=p.length;v<g;++v)(d=p[v])&&$e(d,t,n,v,p,m);a.push(p),o.push(l)}return new wn(a,o,t,n)},selectChild:En.selectChild,selectChildren:En.selectChildren,filter:function(e){"function"!=typeof e&&(e=u(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new wn(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=t[s],c=n[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)o[s]=t[s];return new wn(o,this._parents,this._name,this._id)},selection:function(){return new gn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=_n(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)if(o=s[l]){var c=nt(o,t);$e(o,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new wn(r,this._parents,e,n)},call:En.call,nodes:En.nodes,node:En.node,size:En.size,empty:En.empty,each:En.each,on:function(e,t){var n=this._id;return arguments.length<2?nt(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?et:tt;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}(n,e,t))},attr:function(e,t){var n=T(e),r="transform"===n?ct:rn;return this.attrTween(e,"function"==typeof t?(n.local?cn:ln)(n,r,dt(this,"attr."+e,t)):null==t?(n.local?on:an)(n):(n.local?un:sn)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=T(e);return this.tween(n,(r.local?hn:fn)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?lt:rn;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=N(this,e),o=(this.style.removeProperty(e),N(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}(e,r)).on("end.style."+e,yn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,a;return function(){var o=N(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=N(this,e)),o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s))}}(e,r,dt(this,"style."+e,t))).each(function(e,t){var n,r,i,a,o="style."+t,s="end."+o;return function(){var u=tt(this,e),l=u.on,c=null==u.value[o]?a||(a=yn(t)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,a=n+"";return function(){var o=N(this,e);return o===a?null:o===r?i:i=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,a,n)),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(dt(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=nt(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?ht:ft)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?dn:pn)(t,e)):nt(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?mn:vn)(t,e)):nt(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){tt(this,e).ease=t}}(t,e)):nt(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;tt(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},u={value:function(){0==--i&&a()}};n.each((function(){var n=tt(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})),0===i&&a()}))}},Symbol.iterator,En[Symbol.iterator]);var Sn={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Tn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}function Mn(e){return{type:e}}function kn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}_e.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}}(this,e)}))},_e.prototype.transition=function(e){var t,n;e instanceof wn?(t=e._id,e=e._name):(t=_n(),(n=Sn).time=He(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)(o=s[l])&&$e(o,e,t,l,s,n||Tn(o,t));return new wn(r,this._parents,e,t)},Math.abs,Math.max,Math.min,["w","e"].map(Mn),["n","s"].map(Mn),["n","w","e","s","nw","ne","sw","se"].map(Mn);var An,In=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ln(e){if(!(t=In.exec(e)))throw new Error("invalid format: "+e);var t;return new Rn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Rn(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Cn(e,t){var n=kn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Ln.prototype=Rn.prototype,Rn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Pn={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Cn(100*e,t)},r:Cn,s:function(e,t){var n=kn(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(An=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+kn(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function On(e){return e}var Dn,Nn,Bn=Array.prototype.map,Un=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Fn(e){return Dn=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?On:(t=Bn.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?On:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Bn.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Ln(e)).fill,n=e.align,h=e.sign,f=e.symbol,d=e.zero,p=e.width,m=e.comma,v=e.precision,g=e.trim,y=e.type;"n"===y?(m=!0,y="g"):Pn[y]||(void 0===v&&(v=12),g=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var b="$"===f?i:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===f?a:/[%p]/.test(y)?u:"",w=Pn[y],_=/[defgprs%]/.test(y);function E(e){var i,a,u,f=b,E=x;if("c"===y)E=w(e)+E,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),v),g&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),S&&0==+e&&"+"!==h&&(S=!1),f=(S?"("===h?h:l:"-"===h||"("===h?"":h)+f,E=("s"===y?Un[8+An/3]:"")+E+(S&&"("===h?")":""),_)for(i=-1,a=e.length;++i<a;)if(48>(u=e.charCodeAt(i))||u>57){E=(46===u?o+e.slice(i+1):e.slice(i))+E,e=e.slice(0,i);break}}m&&!d&&(e=r(e,1/0));var T=f.length+e.length+E.length,M=T<p?new Array(p-T+1).join(t):"";switch(m&&d&&(e=r(M+e,M.length?p-E.length:1/0),M=""),n){case"<":e=f+e+E+M;break;case"=":e=f+M+e+E;break;case"^":e=M.slice(0,T=M.length>>1)+f+e+E+M.slice(T);break;default:e=M+f+e+E}return s(e)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),E.toString=function(){return e+""},E}return{format:h,formatPrefix:function(e,t){var n=h(((e=Ln(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(function(e){return(e=kn(Math.abs(e)))?e[1]:NaN}(t)/3))),i=Math.pow(10,-r),a=Un[8+r/3];return function(e){return n(i*e)+a}}}}(e),Nn=Dn.format,Dn.formatPrefix,Dn}function zn(e){return"string"==typeof e?new xe([[document.querySelector(e)]],[document.documentElement]):new xe([[e]],be)}function Hn(e){return zn(ie(e).call(document.documentElement))}function Gn(e,t,n){this.k=e,this.x=t,this.y=n}Fn({thousands:",",grouping:[3],currency:["$",""]}),Gn.prototype={constructor:Gn,scale:function(e){return 1===e?this:new Gn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Gn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Gn(1,0,0),Gn.prototype;var jn=(new Date).getHours(),Vn=new URLSearchParams(window.location.search);Vn.has("nightMode")&&(jn="night"===Vn.get("nightMode")?23:8);for(var qn=[],Wn=jn<=6||jn>=20?"screen":"multiply",Xn=0;Xn<25;Xn++)qn.push(parseInt(4*Math.random()));function Yn(e){var t="function"==typeof Map?new Map:void 0;return Yn=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(rr())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&sr(i,n.prototype),i}(e,arguments,ir(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),sr(n,e)},Yn(e)}function Kn(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Jn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Kn(a,r,i,o,s,"next",e)}function s(e){Kn(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Zn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Qn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Qn(e,t){if(e){if("string"==typeof e)return $n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$n(e,t):void 0}}function $n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function er(){return er="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ir(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},er.apply(this,arguments)}function tr(){return tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tr.apply(this,arguments)}function nr(e,t,n){return t=ir(t),function(e,t){if(t&&("object"===cr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ar(e)}(e,rr()?Reflect.construct(t,n||[],ir(e).constructor):t.apply(e,n))}function rr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rr=function(){return!!e})()}function ir(e){return ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ir(e)}function ar(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function or(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sr(e,t)}function sr(e,t){return sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sr(e,t)}function ur(e,t,n){return(t=pr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(){lr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:M(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",v={};function g(){}function y(){}function b(){}var x={};l(x,o,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(R([])));_&&_!==n&&r.call(_,o)&&(x=_);var E=b.prototype=g.prototype=Object.create(x);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var u=h(e[i],e,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==cr(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function M(t,n,r){var i=f;return function(a,o){if(i===p)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=k(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?m:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(cr(t)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(T.prototype),l(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(E),l(E,u,"Generator"),l(E,o,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function cr(e){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cr(e)}function hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pr(r.key),r)}}function dr(e,t,n){return t&&fr(e.prototype,t),n&&fr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pr(e){var t=function(e,t){if("object"!=cr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==cr(t)?t:String(t)}var mr="152",vr={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},gr={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},yr=0,br=1,xr=2,wr=3,_r=0,Er=1,Sr=2,Tr=3,Mr=0,kr=1,Ar=2,Ir=2,Lr=0,Rr=1,Cr=2,Pr=3,Or=4,Dr=5,Nr=100,Br=101,Ur=102,Fr=103,zr=104,Hr=200,Gr=201,jr=202,Vr=203,qr=204,Wr=205,Xr=206,Yr=207,Kr=208,Jr=209,Zr=210,Qr=0,$r=1,ei=2,ti=3,ni=4,ri=5,ii=6,ai=7,oi=0,si=1,ui=2,li=0,ci=1,hi=2,fi=3,di=4,pi=5,mi=300,vi=301,gi=302,yi=303,bi=304,xi=306,wi=1e3,_i=1001,Ei=1002,Si=1003,Ti=1004,Mi=1004,ki=1005,Ai=1005,Ii=1006,Li=1007,Ri=1007,Ci=1008,Pi=1008,Oi=1009,Di=1010,Ni=1011,Bi=1012,Ui=1013,Fi=1014,zi=1015,Hi=1016,Gi=1017,ji=1018,Vi=1020,qi=1021,Wi=1023,Xi=1024,Yi=1025,Ki=1026,Ji=1027,Zi=1028,Qi=1029,$i=1030,ea=1031,ta=1033,na=33776,ra=33777,ia=33778,aa=33779,oa=35840,sa=35841,ua=35842,la=35843,ca=36196,ha=37492,fa=37496,da=37808,pa=37809,ma=37810,va=37811,ga=37812,ya=37813,ba=37814,xa=37815,wa=37816,_a=37817,Ea=37818,Sa=37819,Ta=37820,Ma=37821,ka=36492,Aa=36283,Ia=36284,La=36285,Ra=36286,Ca=2200,Pa=2201,Oa=2202,Da=2300,Na=2301,Ba=2302,Ua=2400,Fa=2401,za=2402,Ha=2500,Ga=2501,ja=0,Va=1,qa=2,Wa=3e3,Xa=3001,Ya=3200,Ka=3201,Ja=0,Za=1,Qa="",$a="srgb",eo="srgb-linear",to="display-p3",no=0,ro=7680,io=7681,ao=7682,oo=7683,so=34055,uo=34056,lo=5386,co=512,ho=513,fo=514,po=515,mo=516,vo=517,go=518,yo=519,bo=35044,xo=35048,wo=35040,_o=35045,Eo=35049,So=35041,To=35046,Mo=35050,ko=35042,Ao="100",Io="300 es",Lo=1035,Ro=function(){function e(){hr(this,e)}return dr(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),Co=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Po=1234567,Oo=Math.PI/180,Do=180/Math.PI;function No(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Co[255&e]+Co[e>>8&255]+Co[e>>16&255]+Co[e>>24&255]+"-"+Co[255&t]+Co[t>>8&255]+"-"+Co[t>>16&15|64]+Co[t>>24&255]+"-"+Co[63&n|128]+Co[n>>8&255]+"-"+Co[n>>16&255]+Co[n>>24&255]+Co[255&r]+Co[r>>8&255]+Co[r>>16&255]+Co[r>>24&255]).toLowerCase()}function Bo(e,t,n){return Math.max(t,Math.min(n,e))}function Uo(e,t){return(e%t+t)%t}function Fo(e,t,n){return(1-n)*e+n*t}function zo(e){return 0==(e&e-1)&&0!==e}function Ho(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Go(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function jo(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Vo(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var qo={DEG2RAD:Oo,RAD2DEG:Do,generateUUID:No,clamp:Bo,euclideanModulo:Uo,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Fo,damp:function(e,t,n,r){return Fo(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Uo(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Po=e);var t=Po+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Oo},radToDeg:function(e){return e*Do},isPowerOfTwo:zo,ceilPowerOfTwo:Ho,floorPowerOfTwo:Go,setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),l=a((t+r)/2),c=o((t+r)/2),h=a((t-r)/2),f=o((t-r)/2),d=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,u*h,u*f,s*l);break;case"YZY":e.set(u*f,s*c,u*h,s*l);break;case"ZXZ":e.set(u*h,u*f,s*c,s*l);break;case"XZX":e.set(s*c,u*p,u*d,s*l);break;case"YXY":e.set(u*d,s*c,u*p,s*l);break;case"ZYZ":e.set(u*p,u*d,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:Vo,denormalize:jo},Wo=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;hr(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return dr(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Bo(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(),Xo=function(){function e(){hr(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return dr(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],x=r[2],w=r[5],_=r[8];return i[0]=a*p+o*g+s*x,i[3]=a*m+o*y+s*w,i[6]=a*v+o*b+s*_,i[1]=u*p+l*g+c*x,i[4]=u*m+l*y+c*w,i[7]=u*v+l*b+c*_,i[2]=h*p+f*g+d*x,i[5]=h*m+f*y+d*w,i[8]=h*v+f*b+d*_,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-n*i*l+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=l*a-o*u,h=o*s-l*i,f=u*i-a*s,d=t*c+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=f*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(Yo.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(Yo.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(Yo.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}(),Yo=new Xo;function Ko(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var Jo={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Zo(e,t){return new Jo[e](t)}function Qo(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}var $o={};function es(e){e in $o||($o[e]=!0,console.warn(e))}function ts(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ns(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var rs,is=(new Xo).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),as=(new Xo).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),os=ur(ur(ur({},eo,(function(e){return e})),$a,(function(e){return e.convertSRGBToLinear()})),to,(function(e){return e.convertSRGBToLinear().applyMatrix3(as)})),ss=ur(ur(ur({},eo,(function(e){return e})),$a,(function(e){return e.convertLinearToSRGB()})),to,(function(e){return e.applyMatrix3(is).convertLinearToSRGB()})),us={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return eo},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;var r=os[t],i=ss[n];if(void 0===r||void 0===i)throw new Error('Unsupported color space conversion, "'.concat(t,'" to "').concat(n,'".'));return i(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},ls=function(){function e(){hr(this,e)}return dr(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===rs&&(rs=Qo("canvas")),rs.width=e.width,rs.height=e.height;var n=rs.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=rs}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var t=Qo("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,a=0;a<i.length;a++)i[a]=255*ts(i[a]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*ts(o[s]/255)):o[s]=ts(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),cs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;hr(this,e),this.isSource=!0,this.uuid=No(),this.data=t,this.version=0}return dr(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(hs(r[a].image)):i.push(hs(r[a]))}else i=hs(r);n.url=i}return t||(e.images[this.uuid]=n),n}}]),e}();function hs(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?ls.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var fs=0,ds=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_IMAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DEFAULT_MAPPING,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ii,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ci,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wi,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Oi,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:t.DEFAULT_ANISOTROPY,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Qa;return hr(this,t),(e=nr(this,t)).isTexture=!0,Object.defineProperty(ar(e),"id",{value:fs++}),e.uuid=No(),e.name="",e.source=new cs(n),e.mipmaps=[],e.mapping=r,e.channel=0,e.wrapS=i,e.wrapT=a,e.magFilter=o,e.minFilter=s,e.anisotropy=c,e.format=u,e.internalFormat=null,e.type=l,e.offset=new Wo(0,0),e.repeat=new Wo(1,1),e.center=new Wo(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new Xo,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,"string"==typeof h?e.colorSpace=h:(es("THREE.Texture: Property .encoding has been replaced by .colorSpace."),e.colorSpace=h===Xa?$a:Qa),e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return or(t,e),dr(t,[{key:"image",get:function(){return this.source.data},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==mi)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case wi:e.x=e.x-Math.floor(e.x);break;case _i:e.x=e.x<0?0:1;break;case Ei:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case wi:e.y=e.y-Math.floor(e.y);break;case _i:e.y=e.y<0?0:1;break;case Ei:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}},{key:"encoding",get:function(){return es("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===$a?Xa:Wa},set:function(e){es("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Xa?$a:Qa}}]),t}(Ro);ds.DEFAULT_IMAGE=null,ds.DEFAULT_MAPPING=mi,ds.DEFAULT_ANISOTROPY=1;var ps=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;hr(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}return dr(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,u=s[0],l=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],m=s[6],v=s[10];if(Math.abs(l-h)<a&&Math.abs(c-p)<a&&Math.abs(d-m)<a){if(Math.abs(l+h)<o&&Math.abs(c+p)<o&&Math.abs(d+m)<o&&Math.abs(u+f+v-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(f+1)/2,b=(v+1)/2,x=(l+h)/4,w=(c+p)/4,_=(d+m)/4;return g>y&&g>b?g<a?(n=0,r=.707106781,i=.707106781):(r=x/(n=Math.sqrt(g)),i=w/n):y>b?y<a?(n=.707106781,r=0,i=.707106781):(n=x/(r=Math.sqrt(y)),i=_/r):b<a?(n=.707106781,r=.707106781,i=0):(n=w/(i=Math.sqrt(b)),r=_/i),this.set(n,r,i,t),this}var E=Math.sqrt((m-d)*(m-d)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(E)<.001&&(E=1),this.x=(m-d)/E,this.y=(c-p)/E,this.z=(h-l)/E,this.w=Math.acos((u+f+v-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(),ms=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};hr(this,t),(e=nr(this,t)).isWebGLRenderTarget=!0,e.width=n,e.height=r,e.depth=1,e.scissor=new ps(0,0,n,r),e.scissorTest=!1,e.viewport=new ps(0,0,n,r);var a={width:n,height:r,depth:1};return void 0!==i.encoding&&(es("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Xa?$a:Qa),e.texture=new ds(a,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),e.texture.isRenderTargetTexture=!0,e.texture.flipY=!1,e.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,e.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,e.texture.minFilter=void 0!==i.minFilter?i.minFilter:Ii,e.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,e.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,e.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,e.samples=void 0!==i.samples?i.samples:0,e}return or(t,e),dr(t,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=tr({},e.texture.image);return this.texture.source=new cs(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),t}(Ro),vs=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return hr(this,t),(e=nr(this,t,[null])).isDataArrayTexture=!0,e.image={data:n,width:r,height:i,depth:a},e.magFilter=Si,e.minFilter=Si,e.wrapR=_i,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return or(t,e),dr(t)}(ds),gs=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return hr(this,t),(e=nr(this,t,[n,r])).isWebGLArrayRenderTarget=!0,e.depth=i,e.texture=new vs(null,n,r,i),e.texture.isRenderTargetTexture=!0,e}return or(t,e),dr(t)}(ms),ys=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return hr(this,t),(e=nr(this,t,[null])).isData3DTexture=!0,e.image={data:n,width:r,height:i,depth:a},e.magFilter=Si,e.minFilter=Si,e.wrapR=_i,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return or(t,e),dr(t)}(ds),bs=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return hr(this,t),(e=nr(this,t,[n,r])).isWebGL3DRenderTarget=!0,e.depth=i,e.texture=new ys(null,n,r,i),e.texture.isRenderTargetTexture=!0,e}return or(t,e),dr(t)}(ms),xs=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};hr(this,t),(e=nr(this,t,[n,r,a])).isWebGLMultipleRenderTargets=!0;var o=e.texture;e.texture=[];for(var s=0;s<i;s++)e.texture[s]=o.clone(),e.texture[s].isRenderTargetTexture=!0;return e}return or(t,e),dr(t,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),t}(ms),ws=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;hr(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}return dr(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"YXZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"ZXY":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"ZYX":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"YZX":this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d;break;case"XZY":this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],l=t[6],c=t[10],h=n+o+c;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(l-s)*f,this._y=(i-u)*f,this._z=(a-r)*f}else if(n>o&&n>c){var d=2*Math.sqrt(1+n-o-c);this._w=(l-s)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(i+u)/d}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+l)/p}else{var m=2*Math.sqrt(1+c-n-o);this._w=(a-r)/m,this._x=(i+u)/m,this._y=(s+l)/m,this._z=.25*m}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Bo(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),h=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(c!==p||s!==h||u!==f||l!==d){var m=1-o,v=s*h+u*f+l*d+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,o=Math.sin(o*x)/b}var w=o*g;if(s=s*m+h*w,u=u*m+f*w,l=l*m+d*w,c=c*m+p*w,m===1-o){var _=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=_,u*=_,l*=_,c*=_}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[a],h=i[a+1],f=i[a+2],d=i[a+3];return e[t]=o*d+l*c+s*f-u*h,e[t+1]=s*d+l*h+u*c-o*f,e[t+2]=u*d+l*f+o*h-s*c,e[t+3]=l*d-o*c-s*h-u*f,e}}]),t}(),_s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;hr(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}return dr(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(Ss.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Ss.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,l=s*n+o*t-i*r,c=s*r+i*n-a*t,h=-i*t-a*n-o*r;return this.x=u*s+h*-i+l*-o-c*-a,this.y=l*s+h*-a+c*-i-u*-o,this.z=c*s+h*-o+u*-a-l*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Es.copy(this).projectOnVector(e),this.sub(Es)}},{key:"reflect",value:function(e){return this.sub(Es.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Bo(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),Es=new _s,Ss=new ws,Ts=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _s(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s(-1/0,-1/0,-1/0);hr(this,e),this.isBox3=!0,this.min=t,this.max=n}return dr(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t+=3)this.expandByPoint(ks.fromArray(e,t));return this}},{key:"setFromBufferAttribute",value:function(e){this.makeEmpty();for(var t=0,n=e.count;t<n;t++)this.expandByPoint(ks.fromBufferAttribute(e,t));return this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=ks.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),As.copy(e.boundingBox),As.applyMatrix4(e.matrixWorld),this.union(As);else{var n=e.geometry;if(void 0!==n)if(t&&void 0!==n.attributes&&void 0!==n.attributes.position)for(var r=n.attributes.position,i=0,a=r.count;i<a;i++)ks.fromBufferAttribute(r,i).applyMatrix4(e.matrixWorld),this.expandByPoint(ks);else null===n.boundingBox&&n.computeBoundingBox(),As.copy(n.boundingBox),As.applyMatrix4(e.matrixWorld),this.union(As)}for(var o=e.children,s=0,u=o.length;s<u;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,ks),ks.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Ds),Ns.subVectors(this.max,Ds),Is.subVectors(e.a,Ds),Ls.subVectors(e.b,Ds),Rs.subVectors(e.c,Ds),Cs.subVectors(Ls,Is),Ps.subVectors(Rs,Ls),Os.subVectors(Is,Rs);var t=[0,-Cs.z,Cs.y,0,-Ps.z,Ps.y,0,-Os.z,Os.y,Cs.z,0,-Cs.x,Ps.z,0,-Ps.x,Os.z,0,-Os.x,-Cs.y,Cs.x,0,-Ps.y,Ps.x,0,-Os.y,Os.x,0];return!!Fs(t,Is,Ls,Rs,Ns)&&!!Fs(t=[1,0,0,0,1,0,0,0,1],Is,Ls,Rs,Ns)&&(Bs.crossVectors(Cs,Ps),Fs(t=[Bs.x,Bs.y,Bs.z],Is,Ls,Rs,Ns))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,ks).distanceTo(e)}},{key:"getBoundingSphere",value:function(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(ks).length()),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Ms[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ms[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ms[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ms[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ms[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ms[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ms[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ms[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ms)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Ms=[new _s,new _s,new _s,new _s,new _s,new _s,new _s,new _s],ks=new _s,As=new Ts,Is=new _s,Ls=new _s,Rs=new _s,Cs=new _s,Ps=new _s,Os=new _s,Ds=new _s,Ns=new _s,Bs=new _s,Us=new _s;function Fs(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){Us.fromArray(e,a);var s=i.x*Math.abs(Us.x)+i.y*Math.abs(Us.y)+i.z*Math.abs(Us.z),u=t.dot(Us),l=n.dot(Us),c=r.dot(Us);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var zs=new Ts,Hs=new _s,Gs=new _s,js=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;hr(this,e),this.center=t,this.radius=n}return dr(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):zs.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Hs.subVectors(e,this.center);var t=Hs.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(Hs,r/n),this.radius+=r}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Gs.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Hs.copy(e.center).add(Gs)),this.expandByPoint(Hs.copy(e.center).sub(Gs))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Vs=new _s,qs=new _s,Ws=new _s,Xs=new _s,Ys=new _s,Ks=new _s,Js=new _s,Zs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s(0,0,-1);hr(this,e),this.origin=t,this.direction=n}return dr(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,Vs)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=Vs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Vs.copy(this.origin).addScaledVector(this.direction,t),Vs.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){qs.copy(e).add(t).multiplyScalar(.5),Ws.copy(t).sub(e).normalize(),Xs.copy(this.origin).sub(qs);var i,a,o,s,u=.5*e.distanceTo(t),l=-this.direction.dot(Ws),c=Xs.dot(this.direction),h=-Xs.dot(Ws),f=Xs.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(a=l*c-h,s=u*d,(i=l*h-c)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*h)+f}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+f):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(qs).addScaledVector(Ws,a),o}},{key:"intersectSphere",value:function(e,t){Vs.subVectors(e.center,this.origin);var n=Vs.dot(this.direction),r=Vs.dot(Vs)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,Vs)}},{key:"intersectTriangle",value:function(e,t,n,r,i){Ys.subVectors(t,e),Ks.subVectors(n,e),Js.crossVectors(Ys,Ks);var a,o=this.direction.dot(Js);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Xs.subVectors(this.origin,e);var s=a*this.direction.dot(Ks.crossVectors(Xs,Ks));if(s<0)return null;var u=a*this.direction.dot(Ys.cross(Xs));if(u<0)return null;if(s+u>o)return null;var l=-a*Xs.dot(Js);return l<0?null:this.at(l/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Qs=function(){function e(){hr(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return dr(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,l,c,h,f,d,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=a,v[9]=o,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/$s.setFromMatrixColumn(e,0).length(),i=1/$s.setFromMatrixColumn(e,1).length(),a=1/$s.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=a*l,f=a*c,d=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-o*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=a*s}else if("YXZ"===e.order){var m=s*l,v=s*c,g=u*l,y=u*c;t[0]=m+y*o,t[4]=g*o-v,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){var b=s*l,x=s*c,w=u*l,_=u*c;t[0]=b-_*o,t[4]=-a*c,t[8]=w+x*o,t[1]=x+w*o,t[5]=a*l,t[9]=_-b*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var E=a*l,S=a*c,T=o*l,M=o*c;t[0]=s*l,t[4]=T*u-S,t[8]=E*u+M,t[1]=s*c,t[5]=M*u+E,t[9]=S*u-T,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var k=a*s,A=a*u,I=o*s,L=o*u;t[0]=s*l,t[4]=L-k*c,t[8]=I*c+A,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=A*c+I,t[10]=k-L*c}else if("XZY"===e.order){var R=a*s,C=a*u,P=o*s,O=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=R*c+O,t[5]=a*l,t[9]=C*c-P,t[2]=P*c-C,t[6]=o*l,t[10]=O*c+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(tu,e,nu)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return au.subVectors(e,t),0===au.lengthSq()&&(au.z=1),au.normalize(),ru.crossVectors(n,au),0===ru.lengthSq()&&(1===Math.abs(n.z)?au.x+=1e-4:au.z+=1e-4,au.normalize(),ru.crossVectors(n,au)),ru.normalize(),iu.crossVectors(au,ru),r[0]=ru.x,r[4]=iu.x,r[8]=au.x,r[1]=ru.y,r[5]=iu.y,r[9]=au.y,r[2]=ru.z,r[6]=iu.z,r[10]=au.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],E=r[8],S=r[12],T=r[1],M=r[5],k=r[9],A=r[13],I=r[2],L=r[6],R=r[10],C=r[14],P=r[3],O=r[7],D=r[11],N=r[15];return i[0]=a*w+o*T+s*I+u*P,i[4]=a*_+o*M+s*L+u*O,i[8]=a*E+o*k+s*R+u*D,i[12]=a*S+o*A+s*C+u*N,i[1]=l*w+c*T+h*I+f*P,i[5]=l*_+c*M+h*L+f*O,i[9]=l*E+c*k+h*R+f*D,i[13]=l*S+c*A+h*C+f*N,i[2]=d*w+p*T+m*I+v*P,i[6]=d*_+p*M+m*L+v*O,i[10]=d*E+p*k+m*R+v*D,i[14]=d*S+p*A+m*C+v*N,i[3]=g*w+y*T+b*I+x*P,i[7]=g*_+y*M+b*L+x*O,i[11]=g*E+y*k+b*R+x*D,i[15]=g*S+y*A+b*C+x*N,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+i*s*c-r*u*c-i*o*h+n*u*h+r*o*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*a*h-r*a*f+r*u*l-i*s*l)+e[11]*(+t*u*c-t*o*f-i*a*c+n*a*f+i*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*h+r*a*c-n*a*h+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],m=e[14],v=e[15],g=c*m*u-p*h*u+p*s*f-o*m*f-c*s*v+o*h*v,y=d*h*u-l*m*u-d*s*f+a*m*f+l*s*v-a*h*v,b=l*p*u-d*c*u+d*o*f-a*p*f-l*o*v+a*c*v,x=d*c*s-l*p*s-d*o*h+a*p*h+l*o*m-a*c*m,w=t*g+n*y+r*b+i*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var _=1/w;return e[0]=g*_,e[1]=(p*h*i-c*m*i-p*r*f+n*m*f+c*r*v-n*h*v)*_,e[2]=(o*m*i-p*s*i+p*r*u-n*m*u-o*r*v+n*s*v)*_,e[3]=(c*s*i-o*h*i-c*r*u+n*h*u+o*r*f-n*s*f)*_,e[4]=y*_,e[5]=(l*m*i-d*h*i+d*r*f-t*m*f-l*r*v+t*h*v)*_,e[6]=(d*s*i-a*m*i-d*r*u+t*m*u+a*r*v-t*s*v)*_,e[7]=(a*h*i-l*s*i+l*r*u-t*h*u-a*r*f+t*s*f)*_,e[8]=b*_,e[9]=(d*c*i-l*p*i-d*n*f+t*p*f+l*n*v-t*c*v)*_,e[10]=(a*p*i-d*o*i+d*n*u-t*p*u-a*n*v+t*o*v)*_,e[11]=(l*o*i-a*c*i-l*n*u+t*c*u+a*n*f-t*o*f)*_,e[12]=x*_,e[13]=(l*p*r-d*c*r+d*n*h-t*p*h-l*n*m+t*c*m)*_,e[14]=(d*o*r-a*p*r-d*n*s+t*p*s+a*n*m-t*o*m)*_,e[15]=(a*c*r-l*o*r+l*n*s-t*c*s-a*n*h+t*o*h)*_,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,l=a+a,c=o+o,h=i*u,f=i*l,d=i*c,p=a*l,m=a*c,v=o*c,g=s*u,y=s*l,b=s*c,x=n.x,w=n.y,_=n.z;return r[0]=(1-(p+v))*x,r[1]=(f+b)*x,r[2]=(d-y)*x,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(d+y)*_,r[9]=(m-g)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=$s.set(r[0],r[1],r[2]).length(),a=$s.set(r[4],r[5],r[6]).length(),o=$s.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],eu.copy(this);var s=1/i,u=1/a,l=1/o;return eu.elements[0]*=s,eu.elements[1]*=s,eu.elements[2]*=s,eu.elements[4]*=u,eu.elements[5]*=u,eu.elements[6]*=u,eu.elements[8]*=l,eu.elements[9]*=l,eu.elements[10]*=l,t.setFromRotationMatrix(eu),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){var o=this.elements,s=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),h=-(a+i)/(a-i),f=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),u=1/(n-r),l=1/(a-i),c=(t+e)*s,h=(n+r)*u,f=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),$s=new _s,eu=new Qs,tu=new _s(0,0,0),nu=new _s(1,1,1),ru=new _s,iu=new _s,au=new _s,ou=new Qs,su=new ws,uu=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_ORDER;hr(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}return dr(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(Bo(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Bo(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Bo(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Bo(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Bo(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-Bo(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return ou.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ou,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return su.setFromEuler(this),this.setFromQuaternion(su,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))}]),t}();uu.DEFAULT_ORDER="XYZ";var lu=function(){function e(){hr(this,e),this.mask=1}return dr(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!=(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!=(this.mask&(1<<e|0))}}]),e}(),cu=0,hu=new _s,fu=new ws,du=new Qs,pu=new _s,mu=new _s,vu=new _s,gu=new ws,yu=new _s(1,0,0),bu=new _s(0,1,0),xu=new _s(0,0,1),wu={type:"added"},_u={type:"removed"},Eu=function(e){function t(){var e;hr(this,t),(e=nr(this,t)).isObject3D=!0,Object.defineProperty(ar(e),"id",{value:cu++}),e.uuid=No(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=t.DEFAULT_UP.clone();var n=new _s,r=new uu,i=new ws,a=new _s(1,1,1);return r._onChange((function(){i.setFromEuler(r,!1)})),i._onChange((function(){r.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(ar(e),{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Qs},normalMatrix:{value:new Xo}}),e.matrix=new Qs,e.matrixWorld=new Qs,e.matrixAutoUpdate=t.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.layers=new lu,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return or(t,e),dr(t,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return fu.setFromAxisAngle(e,t),this.quaternion.multiply(fu),this}},{key:"rotateOnWorldAxis",value:function(e,t){return fu.setFromAxisAngle(e,t),this.quaternion.premultiply(fu),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(yu,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(bu,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(xu,e)}},{key:"translateOnAxis",value:function(e,t){return hu.copy(e).applyQuaternion(this.quaternion),this.position.add(hu.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(yu,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(bu,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(xu,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(du.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?pu.copy(e):pu.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),mu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?du.lookAt(mu,pu,this.up):du.lookAt(pu,mu,this.up),this.quaternion.setFromRotationMatrix(du),r&&(du.extractRotation(r.matrixWorld),fu.setFromRotationMatrix(du),this.quaternion.premultiply(fu.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(wu)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(_u)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(_u)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),du.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),du.multiply(e.parent.matrixWorld)),e.applyMatrix4(du),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getObjectsByProperty",value:function(e,t){var n=[];this[e]===t&&n.push(this);for(var r=0,i=this.children.length;r<i;r++){var a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(n=n.concat(a))}return n}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mu,e,vu),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mu,gu,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++){var i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++){var o=r[i];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];i(e.shapes,l)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,f=this.material.length;h<f;h++)c.push(i(e.materials,this.material[h]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var m=this.animations[p];r.animations.push(i(e.animations,m))}}if(t){var v=S(e.geometries),g=S(e.materials),y=S(e.textures),b=S(e.images),x=S(e.shapes),w=S(e.skeletons),_=S(e.animations),E=S(e.nodes);v.length>0&&(n.geometries=v),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),b.length>0&&(n.images=b),x.length>0&&(n.shapes=x),w.length>0&&(n.skeletons=w),_.length>0&&(n.animations=_),E.length>0&&(n.nodes=E)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),t}(Ro);Eu.DEFAULT_UP=new _s(0,1,0),Eu.DEFAULT_MATRIX_AUTO_UPDATE=!0,Eu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Su=new _s,Tu=new _s,Mu=new _s,ku=new _s,Au=new _s,Iu=new _s,Lu=new _s,Ru=new _s,Cu=new _s,Pu=new _s,Ou=!1,Du=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _s;hr(this,e),this.a=t,this.b=n,this.c=r}return dr(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Su.subVectors(this.c,this.b),Tu.subVectors(this.a,this.b),.5*Su.cross(Tu).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return!1===Ou&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ou=!0),e.getInterpolation(t,this.a,this.b,this.c,n,r,i,a)}},{key:"getInterpolation",value:function(t,n,r,i,a){return e.getInterpolation(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;Au.subVectors(a,i),Iu.subVectors(o,i),Ru.subVectors(e,i);var s=Au.dot(Ru),u=Iu.dot(Ru);if(s<=0&&u<=0)return t.copy(i);Cu.subVectors(e,a);var l=Au.dot(Cu),c=Iu.dot(Cu);if(l>=0&&c<=l)return t.copy(a);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(Au,n);Pu.subVectors(e,o);var f=Au.dot(Pu),d=Iu.dot(Pu);if(d>=0&&f<=d)return t.copy(o);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(Iu,r);var m=l*d-f*c;if(m<=0&&c-l>=0&&f-d>=0)return Lu.subVectors(o,a),r=(c-l)/(c-l+(f-d)),t.copy(a).addScaledVector(Lu,r);var v=1/(m+p+h);return n=p*v,r=h*v,t.copy(i).addScaledVector(Au,n).addScaledVector(Iu,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),Su.subVectors(e,t),r.cross(Su);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Su.subVectors(r,t),Tu.subVectors(n,t),Mu.subVectors(e,t);var a=Su.dot(Su),o=Su.dot(Tu),s=Su.dot(Mu),u=Tu.dot(Tu),l=Tu.dot(Mu),c=a*u-o*o;if(0===c)return i.set(-2,-1,-1);var h=1/c,f=(u*s-o*l)*h,d=(a*l-o*s)*h;return i.set(1-f-d,d,f)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,ku),ku.x>=0&&ku.y>=0&&ku.x+ku.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return!1===Ou&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ou=!0),this.getInterpolation(e,t,n,r,i,a,o,s)}},{key:"getInterpolation",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,ku),s.setScalar(0),s.addScaledVector(i,ku.x),s.addScaledVector(a,ku.y),s.addScaledVector(o,ku.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return Su.subVectors(n,t),Tu.subVectors(e,t),Su.cross(Tu).dot(r)<0}}]),e}(),Nu=0,Bu=function(e){function t(){var e;return hr(this,t),(e=nr(this,t)).isMaterial=!0,Object.defineProperty(ar(e),"id",{value:Nu++}),e.uuid=No(),e.name="",e.type="Material",e.blending=Rr,e.side=Mr,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=qr,e.blendDst=Wr,e.blendEquation=Nr,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=ti,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=yo,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=ro,e.stencilZFail=ro,e.stencilZPass=ro,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return or(t,e),dr(t,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}else console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."))}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Rr&&(n.blending=this.blending),this.side!==Mr&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),t}(Ro),Uu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fu={h:0,s:0,l:0},zu={h:0,s:0,l:0};function Hu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}var Gu=function(e){function t(e,n,r){return hr(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}return dr(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$a;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,us.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:us.workingColorSpace;return this.r=e,this.g=t,this.b=n,us.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:us.workingColorSpace;if(e=Uo(e,1),t=Bo(t,0,1),n=Bo(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=Hu(a,i,e+1/3),this.g=Hu(a,i,e),this.b=Hu(a,i,e-1/3)}return us.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$a;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){var i,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var s=t[1],u=s.length;if(3===u)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(6===u)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$a,n=Uu[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=ts(e.r),this.g=ts(e.g),this.b=ts(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=ns(e.r),this.g=ns(e.g),this.b=ns(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a;return us.fromWorkingColorSpace(ju.copy(this),e),65536*Math.round(Bo(255*ju.r,0,255))+256*Math.round(Bo(255*ju.g,0,255))+Math.round(Bo(255*ju.b,0,255))}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:us.workingColorSpace;us.fromWorkingColorSpace(ju.copy(this),t);var n,r,i=ju.r,a=ju.g,o=ju.b,s=Math.max(i,a,o),u=Math.min(i,a,o),l=(u+s)/2;if(u===s)n=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case i:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-i)/c+2;break;case o:n=(i-a)/c+4}n/=6}return e.h=n,e.s=r,e.l=l,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:us.workingColorSpace;return us.fromWorkingColorSpace(ju.copy(this),t),e.r=ju.r,e.g=ju.g,e.b=ju.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a;us.fromWorkingColorSpace(ju.copy(this),e);var t=ju.r,n=ju.g,r=ju.b;return e!==$a?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(Fu),Fu.h+=e,Fu.s+=t,Fu.l+=n,this.setHSL(Fu.h,Fu.s,Fu.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(Fu),e.getHSL(zu);var n=Fo(Fu.h,zu.h,t),r=Fo(Fu.s,zu.s,t),i=Fo(Fu.l,zu.l,t);return this.setHSL(n,r,i),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),ju=new Gu;Gu.NAMES=Uu;var Vu=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isMeshBasicMaterial=!0,n.type="MeshBasicMaterial",n.color=new Gu(16777215),n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.specularMap=null,n.alphaMap=null,n.envMap=null,n.combine=oi,n.reflectivity=1,n.refractionRatio=.98,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.fog=!0,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),t}(Bu),qu=Wu();function Wu(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512),a=0;a<256;++a){var o=a-127;o<-27?(r[a]=0,r[256|a]=32768,i[a]=24,i[256|a]=24):o<-14?(r[a]=1024>>-o-14,r[256|a]=1024>>-o-14|32768,i[a]=-o-1,i[256|a]=-o-1):o<=15?(r[a]=o+15<<10,r[256|a]=o+15<<10|32768,i[a]=13,i[256|a]=13):o<128?(r[a]=31744,r[256|a]=64512,i[a]=24,i[256|a]=24):(r[a]=31744,r[256|a]=64512,i[a]=13,i[256|a]=13)}for(var s=new Uint32Array(2048),u=new Uint32Array(64),l=new Uint32Array(64),c=1;c<1024;++c){for(var h=c<<13,f=0;0==(8388608&h);)h<<=1,f-=8388608;h&=-8388609,f+=947912704,s[c]=h|f}for(var d=1024;d<2048;++d)s[d]=939524096+(d-1024<<13);for(var p=1;p<31;++p)u[p]=p<<23;u[31]=1199570944,u[32]=2147483648;for(var m=33;m<63;++m)u[m]=2147483648+(m-32<<23);u[63]=3347054592;for(var v=1;v<64;++v)32!==v&&(l[v]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:u,offsetTable:l}}function Xu(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Bo(e,-65504,65504),qu.floatView[0]=e;var t=qu.uint32View[0],n=t>>23&511;return qu.baseTable[n]+((8388607&t)>>qu.shiftTable[n])}function Yu(e){var t=e>>10;return qu.uint32View[0]=qu.mantissaTable[qu.offsetTable[t]+(1023&e)]+qu.exponentTable[t],qu.floatView[0]}var Ku={toHalfFloat:Xu,fromHalfFloat:Yu},Ju=new _s,Zu=new Wo,Qu=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(hr(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=r,this.usage=bo,this.updateRange={offset:0,count:-1},this.version=0}return dr(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Zu.fromBufferAttribute(this,t),Zu.applyMatrix3(e),this.setXY(t,Zu.x,Zu.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)Ju.fromBufferAttribute(this,r),Ju.applyMatrix3(e),this.setXYZ(r,Ju.x,Ju.y,Ju.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Ju.fromBufferAttribute(this,t),Ju.applyMatrix4(e),this.setXYZ(t,Ju.x,Ju.y,Ju.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Ju.fromBufferAttribute(this,t),Ju.applyNormalMatrix(e),this.setXYZ(t,Ju.x,Ju.y,Ju.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Ju.fromBufferAttribute(this,t),Ju.transformDirection(e),this.setXYZ(t,Ju.x,Ju.y,Ju.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=jo(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=jo(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=jo(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=jo(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=Vo(t,this.array),n=Vo(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Vo(t,this.array),n=Vo(n,this.array),r=Vo(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Vo(t,this.array),n=Vo(n,this.array),r=Vo(r,this.array),i=Vo(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==bo&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),e}(),$u=function(e){function t(e,n,r){return hr(this,t),nr(this,t,[new Int8Array(e),n,r])}return or(t,e),dr(t)}(Qu),el=function(e){function t(e,n,r){return hr(this,t),nr(this,t,[new Uint8Array(e),n,r])}return or(t,e),dr(t)}(Qu),tl=function(e){function t(e,n,r){return hr(this,t),nr(this,t,[new Uint8ClampedArray(e),n,r])}return or(t,e),dr(t)}(Qu),nl=function(e){function t(e,n,r){return hr(this,t),nr(this,t,[new Int16Array(e),n,r])}return or(t,e),dr(t)}(Qu),rl=function(e){function t(e,n,r){return hr(this,t),nr(this,t,[new Uint16Array(e),n,r])}return or(t,e),dr(t)}(Qu),il=function(e){function t(e,n,r){return hr(this,t),nr(this,t,[new Int32Array(e),n,r])}return or(t,e),dr(t)}(Qu),al=function(e){function t(e,n,r){return hr(this,t),nr(this,t,[new Uint32Array(e),n,r])}return or(t,e),dr(t)}(Qu),ol=function(e){function t(e,n,r){var i;return hr(this,t),(i=nr(this,t,[new Uint16Array(e),n,r])).isFloat16BufferAttribute=!0,i}return or(t,e),dr(t,[{key:"getX",value:function(e){var t=Yu(this.array[e*this.itemSize]);return this.normalized&&(t=jo(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.array[e*this.itemSize]=Xu(t),this}},{key:"getY",value:function(e){var t=Yu(this.array[e*this.itemSize+1]);return this.normalized&&(t=jo(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.array[e*this.itemSize+1]=Xu(t),this}},{key:"getZ",value:function(e){var t=Yu(this.array[e*this.itemSize+2]);return this.normalized&&(t=jo(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.array[e*this.itemSize+2]=Xu(t),this}},{key:"getW",value:function(e){var t=Yu(this.array[e*this.itemSize+3]);return this.normalized&&(t=jo(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.array[e*this.itemSize+3]=Xu(t),this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=Vo(t,this.array),n=Vo(n,this.array)),this.array[e+0]=Xu(t),this.array[e+1]=Xu(n),this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Vo(t,this.array),n=Vo(n,this.array),r=Vo(r,this.array)),this.array[e+0]=Xu(t),this.array[e+1]=Xu(n),this.array[e+2]=Xu(r),this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Vo(t,this.array),n=Vo(n,this.array),r=Vo(r,this.array),i=Vo(i,this.array)),this.array[e+0]=Xu(t),this.array[e+1]=Xu(n),this.array[e+2]=Xu(r),this.array[e+3]=Xu(i),this}}]),t}(Qu),sl=function(e){function t(e,n,r){return hr(this,t),nr(this,t,[new Float32Array(e),n,r])}return or(t,e),dr(t)}(Qu),ul=function(e){function t(e,n,r){return hr(this,t),nr(this,t,[new Float64Array(e),n,r])}return or(t,e),dr(t)}(Qu),ll=0,cl=new Qs,hl=new Eu,fl=new _s,dl=new Ts,pl=new Ts,ml=new _s,vl=function(e){function t(){var e;return hr(this,t),(e=nr(this,t)).isBufferGeometry=!0,Object.defineProperty(ar(e),"id",{value:ll++}),e.uuid=No(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return or(t,e),dr(t,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(Ko(e)?al:rl)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Xo).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return cl.makeRotationFromQuaternion(e),this.applyMatrix4(cl),this}},{key:"rotateX",value:function(e){return cl.makeRotationX(e),this.applyMatrix4(cl),this}},{key:"rotateY",value:function(e){return cl.makeRotationY(e),this.applyMatrix4(cl),this}},{key:"rotateZ",value:function(e){return cl.makeRotationZ(e),this.applyMatrix4(cl),this}},{key:"translate",value:function(e,t,n){return cl.makeTranslation(e,t,n),this.applyMatrix4(cl),this}},{key:"scale",value:function(e,t,n){return cl.makeScale(e,t,n),this.applyMatrix4(cl),this}},{key:"lookAt",value:function(e){return hl.lookAt(e),hl.updateMatrix(),this.applyMatrix4(hl.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(fl).negate(),this.translate(fl.x,fl.y,fl.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new sl(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Ts);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new _s(-1/0,-1/0,-1/0),new _s(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];dl.setFromBufferAttribute(i),this.morphTargetsRelative?(ml.addVectors(this.boundingBox.min,dl.min),this.boundingBox.expandByPoint(ml),ml.addVectors(this.boundingBox.max,dl.max),this.boundingBox.expandByPoint(ml)):(this.boundingBox.expandByPoint(dl.min),this.boundingBox.expandByPoint(dl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new js);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new _s,1/0);if(e){var n=this.boundingSphere.center;if(dl.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];pl.setFromBufferAttribute(a),this.morphTargetsRelative?(ml.addVectors(dl.min,pl.min),dl.expandByPoint(ml),ml.addVectors(dl.max,pl.max),dl.expandByPoint(ml)):(dl.expandByPoint(pl.min),dl.expandByPoint(pl.max))}dl.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)ml.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(ml));if(t)for(var l=0,c=t.length;l<c;l++)for(var h=t[l],f=this.morphTargetsRelative,d=0,p=h.count;d<p;d++)ml.fromBufferAttribute(h,d),f&&(fl.fromBufferAttribute(e,d),ml.add(fl)),o=Math.max(o,n.distanceToSquared(ml));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Qu(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,u=[],l=[],c=0;c<o;c++)u[c]=new _s,l[c]=new _s;var h=new _s,f=new _s,d=new _s,p=new Wo,m=new Wo,v=new Wo,g=new _s,y=new _s,b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(var x=0,w=b.length;x<w;++x)for(var _=b[x],E=_.start,S=E,T=E+_.count;S<T;S+=3)N(n[S+0],n[S+1],n[S+2]);for(var M=new _s,k=new _s,A=new _s,I=new _s,L=0,R=b.length;L<R;++L)for(var C=b[L],P=C.start,O=P,D=P+C.count;O<D;O+=3)B(n[O+0]),B(n[O+1]),B(n[O+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function N(e,t,n){h.fromArray(r,3*e),f.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(a,2*e),m.fromArray(a,2*t),v.fromArray(a,2*n),f.sub(h),d.sub(h),m.sub(p),v.sub(p);var i=1/(m.x*v.y-v.x*m.y);isFinite(i)&&(g.copy(f).multiplyScalar(v.y).addScaledVector(d,-m.y).multiplyScalar(i),y.copy(d).multiplyScalar(m.x).addScaledVector(f,-v.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),l[e].add(y),l[t].add(y),l[n].add(y))}function B(e){A.fromArray(i,3*e),I.copy(A);var t=u[e];M.copy(t),M.sub(A.multiplyScalar(A.dot(t))).normalize(),k.crossVectors(I,t);var n=k.dot(l[e])<0?-1:1;s[4*e]=M.x,s[4*e+1]=M.y,s[4*e+2]=M.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new Qu(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new _s,o=new _s,s=new _s,u=new _s,l=new _s,c=new _s,h=new _s,f=new _s;if(e)for(var d=0,p=e.count;d<p;d+=3){var m=e.getX(d+0),v=e.getX(d+1),g=e.getX(d+2);a.fromBufferAttribute(t,m),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,g),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),u.fromBufferAttribute(n,m),l.fromBufferAttribute(n,v),c.fromBufferAttribute(n,g),u.add(h),l.add(h),c.add(h),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,b=t.count;y<b;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)ml.fromBufferAttribute(e,t),ml.normalize(),e.setXYZ(t,ml.x,ml.y,ml.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,l=t.length;u<l;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new Qu(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var n=new t,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);n.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],h=0,f=c.length;h<f;h++){var d=e(c[h],r);l.push(d)}n.morphAttributes[u]=l}n.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,m=0,v=p.length;m<v;m++){var g=p[m];n.addGroup(g.start,g.count,g.materialIndex)}return n}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],h=[],f=0,d=c.length;f<d;f++){var p=c[f];h.push(p.toJSON(e.data))}h.length>0&&(s[l]=h,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var m=this.groups;m.length>0&&(e.data.groups=JSON.parse(JSON.stringify(m)));var v=this.boundingSphere;return null!==v&&(e.data.boundingSphere={center:v.center.toArray(),radius:v.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],l=o[s],c=0,h=l.length;c<h;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var f=e.groups,d=0,p=f.length;d<p;d++){var m=f[d];this.addGroup(m.start,m.count,m.materialIndex)}var v=e.boundingBox;null!==v&&(this.boundingBox=v.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),t}(Ro),gl=new Qs,yl=new Zs,bl=new js,xl=new _s,wl=new _s,_l=new _s,El=new _s,Sl=new _s,Tl=new _s,Ml=new Wo,kl=new Wo,Al=new Wo,Il=new _s,Ll=new _s,Rl=new _s,Cl=new _s,Pl=new _s,Ol=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu;return hr(this,t),(e=nr(this,t)).isMesh=!0,e.type="Mesh",e.geometry=n,e.material=r,e.updateMorphTargets(),e}return or(t,e),dr(t,[{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=tr({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},{key:"getVertexPosition",value:function(e,t){var n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);var o=this.morphTargetInfluences;if(i&&o){Tl.set(0,0,0);for(var s=0,u=i.length;s<u;s++){var l=o[s],c=i[s];0!==l&&(Sl.fromBufferAttribute(c,e),a?Tl.addScaledVector(Sl,l):Tl.addScaledVector(Sl.sub(t),l))}t.add(Tl)}return t}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),bl.copy(n.boundingSphere),bl.applyMatrix4(i),yl.copy(e.ray).recast(e.near),!1===bl.containsPoint(yl.origin)){if(null===yl.intersectSphere(bl,xl))return;if(yl.origin.distanceToSquared(xl)>Math.pow(e.far-e.near,2))return}gl.copy(i).invert(),yl.copy(e.ray).applyMatrix4(gl),null!==n.boundingBox&&!1===yl.intersectsBox(n.boundingBox)||this._computeIntersections(e,t)}}},{key:"_computeIntersections",value:function(e,t){var n,r=this.geometry,i=this.material,a=r.index,o=r.attributes.position,s=r.attributes.uv,u=r.attributes.uv1,l=r.attributes.normal,c=r.groups,h=r.drawRange;if(null!==a)if(Array.isArray(i))for(var f=0,d=c.length;f<d;f++)for(var p=c[f],m=i[p.materialIndex],v=Math.max(p.start,h.start),g=Math.min(a.count,Math.min(p.start+p.count,h.start+h.count));v<g;v+=3){var y=a.getX(v),b=a.getX(v+1),x=a.getX(v+2);(n=Dl(this,m,e,yl,s,u,l,y,b,x))&&(n.faceIndex=Math.floor(v/3),n.face.materialIndex=p.materialIndex,t.push(n))}else for(var w=Math.max(0,h.start),_=Math.min(a.count,h.start+h.count);w<_;w+=3){var E=a.getX(w),S=a.getX(w+1),T=a.getX(w+2);(n=Dl(this,i,e,yl,s,u,l,E,S,T))&&(n.faceIndex=Math.floor(w/3),t.push(n))}else if(void 0!==o)if(Array.isArray(i))for(var M=0,k=c.length;M<k;M++)for(var A=c[M],I=i[A.materialIndex],L=Math.max(A.start,h.start),R=Math.min(o.count,Math.min(A.start+A.count,h.start+h.count));L<R;L+=3)(n=Dl(this,I,e,yl,s,u,l,L,L+1,L+2))&&(n.faceIndex=Math.floor(L/3),n.face.materialIndex=A.materialIndex,t.push(n));else for(var C=Math.max(0,h.start),P=Math.min(o.count,h.start+h.count);C<P;C+=3)(n=Dl(this,i,e,yl,s,u,l,C,C+1,C+2))&&(n.faceIndex=Math.floor(C/3),t.push(n))}}]),t}(Eu);function Dl(e,t,n,r,i,a,o,s,u,l){e.getVertexPosition(s,wl),e.getVertexPosition(u,_l),e.getVertexPosition(l,El);var c=function(e,t,n,r,i,a,o,s){if(null===(t.side===kr?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side===Mr,s)))return null;Pl.copy(s),Pl.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Pl);return u<n.near||u>n.far?null:{distance:u,point:Pl.clone(),object:e}}(e,t,n,r,wl,_l,El,Cl);if(c){i&&(Ml.fromBufferAttribute(i,s),kl.fromBufferAttribute(i,u),Al.fromBufferAttribute(i,l),c.uv=Du.getInterpolation(Cl,wl,_l,El,Ml,kl,Al,new Wo)),a&&(Ml.fromBufferAttribute(a,s),kl.fromBufferAttribute(a,u),Al.fromBufferAttribute(a,l),c.uv1=Du.getInterpolation(Cl,wl,_l,El,Ml,kl,Al,new Wo),c.uv2=c.uv1),o&&(Il.fromBufferAttribute(o,s),Ll.fromBufferAttribute(o,u),Rl.fromBufferAttribute(o,l),c.normal=Du.getInterpolation(Cl,wl,_l,El,Il,Ll,Rl,new _s),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));var h={a:s,b:u,c:l,normal:new _s,materialIndex:0};Du.getNormal(wl,_l,El,h.normal),c.face=h}return c}var Nl=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;hr(this,t),(e=nr(this,t)).type="BoxGeometry",e.parameters={width:n,height:r,depth:i,widthSegments:a,heightSegments:o,depthSegments:s};var u=ar(e);a=Math.floor(a),o=Math.floor(o),s=Math.floor(s);var l=[],c=[],h=[],f=[],d=0,p=0;function m(e,t,n,r,i,a,o,s,m,v,g){for(var y=a/m,b=o/v,x=a/2,w=o/2,_=s/2,E=m+1,S=v+1,T=0,M=0,k=new _s,A=0;A<S;A++)for(var I=A*b-w,L=0;L<E;L++){var R=L*y-x;k[e]=R*r,k[t]=I*i,k[n]=_,c.push(k.x,k.y,k.z),k[e]=0,k[t]=0,k[n]=s>0?1:-1,h.push(k.x,k.y,k.z),f.push(L/m),f.push(1-A/v),T+=1}for(var C=0;C<v;C++)for(var P=0;P<m;P++){var O=d+P+E*C,D=d+P+E*(C+1),N=d+(P+1)+E*(C+1),B=d+(P+1)+E*C;l.push(O,D,B),l.push(D,N,B),M+=6}u.addGroup(p,M,g),p+=M,d+=T}return m("z","y","x",-1,-1,i,r,n,s,o,0),m("z","y","x",1,-1,i,r,-n,s,o,1),m("x","z","y",1,1,n,i,r,a,s,2),m("x","z","y",1,-1,n,i,-r,a,s,3),m("x","y","z",1,-1,n,r,i,a,o,4),m("x","y","z",-1,-1,n,r,-i,a,o,5),e.setIndex(l),e.setAttribute("position",new sl(c,3)),e.setAttribute("normal",new sl(h,3)),e.setAttribute("uv",new sl(f,2)),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),t}(vl);function Bl(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function Ul(e){for(var t={},n=0;n<e.length;n++){var r=Bl(e[n]);for(var i in r)t[i]=r[i]}return t}function Fl(e){return null===e.getRenderTarget()?e.outputColorSpace:eo}var zl={clone:Bl,merge:Ul},Hl=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isShaderMaterial=!0,n.type="ShaderMaterial",n.defines={},n.uniforms={},n.uniformsGroups=[],n.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",n.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",n.linewidth=1,n.wireframe=!1,n.wireframeLinewidth=1,n.fog=!1,n.lights=!1,n.clipping=!1,n.forceSinglePass=!0,n.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},n.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},n.index0AttributeName=void 0,n.uniformsNeedUpdate=!1,n.glslVersion=null,void 0!==e&&n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Bl(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=tr({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=tr({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var n=er(ir(t.prototype),"toJSON",this).call(this,e);for(var r in n.glslVersion=this.glslVersion,n.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?n.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?n.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?n.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?n.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?n.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?n.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?n.uniforms[r]={type:"m4",value:i.toArray()}:n.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(n.extensions=a),n}}]),t}(Bu),Gl=function(e){function t(){var e;return hr(this,t),(e=nr(this,t)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new Qs,e.projectionMatrix=new Qs,e.projectionMatrixInverse=new Qs,e}return or(t,e),dr(t,[{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){er(ir(t.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,n){er(ir(t.prototype),"updateWorldMatrix",this).call(this,e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(Eu),jl=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return hr(this,t),(e=nr(this,t)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=n,e.zoom=1,e.near=i,e.far=a,e.focus=10,e.aspect=r,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return or(t,e),dr(t,[{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:tr({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Do*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Oo*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Do*Math.atan(Math.tan(.5*Oo*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Oo*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var n=er(ir(t.prototype),"toJSON",this).call(this,e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,null!==this.view&&(n.object.view=tr({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}]),t}(Gl),Vl=-90,ql=function(e){function t(e,n,r){var i;hr(this,t),(i=nr(this,t)).type="CubeCamera",i.renderTarget=r;var a=new jl(Vl,1,e,n);a.layers=i.layers,a.up.set(0,1,0),a.lookAt(1,0,0),i.add(a);var o=new jl(Vl,1,e,n);o.layers=i.layers,o.up.set(0,1,0),o.lookAt(-1,0,0),i.add(o);var s=new jl(Vl,1,e,n);s.layers=i.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),i.add(s);var u=new jl(Vl,1,e,n);u.layers=i.layers,u.up.set(0,0,1),u.lookAt(0,-1,0),i.add(u);var l=new jl(Vl,1,e,n);l.layers=i.layers,l.up.set(0,1,0),l.lookAt(0,0,1),i.add(l);var c=new jl(Vl,1,e,n);return c.layers=i.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),i.add(c),i}return or(t,e),dr(t,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||Qn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.children,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=e.getRenderTarget(),h=e.toneMapping,f=e.xr.enabled;e.toneMapping=li,e.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=h,e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}]),t}(Eu),Wl=function(e){function t(e,n,r,i,a,o,s,u,l,c){var h;return hr(this,t),(h=nr(this,t,[e=void 0!==e?e:[],n=void 0!==n?n:vi,r,i,a,o,s,u,l,c])).isCubeTexture=!0,h.flipY=!1,h}return or(t,e),dr(t,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),t}(ds),Xl=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};hr(this,t),(e=nr(this,t,[n,n,r])).isWebGLCubeRenderTarget=!0;var i={width:n,height:n,depth:1},a=[i,i,i,i,i,i];return void 0!==r.encoding&&(es("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Xa?$a:Qa),e.texture=new Wl(a,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,e.texture.minFilter=void 0!==r.minFilter?r.minFilter:Ii,e}return or(t,e),dr(t,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n=new Nl(5,5,5),r=new Hl({name:"CubemapFromEquirect",uniforms:Bl({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:kr,blending:Lr});r.uniforms.tEquirect.value=t;var i=new Ol(n,r),a=t.minFilter;return t.minFilter===Ci&&(t.minFilter=Ii),new ql(1,10,this).update(e,i),t.minFilter=a,i.geometry.dispose(),i.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),t}(ms),Yl=new _s,Kl=new _s,Jl=new Xo,Zl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _s(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;hr(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return dr(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=Yl.subVectors(n,t).cross(Kl.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}},{key:"intersectLine",value:function(e,t){var n=e.delta(Yl),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Jl.getNormalMatrix(e),r=this.coplanarPoint(Yl).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Ql=new js,$l=new _s,ec=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zl,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zl,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Zl,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Zl,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Zl,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Zl;hr(this,e),this.planes=[t,n,r,i,a,o]}return dr(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-h,y-m).normalize(),t[1].setComponents(o+r,c+s,p+h,y+m).normalize(),t[2].setComponents(o+i,c+u,p+f,y+v).normalize(),t[3].setComponents(o-i,c-u,p-f,y-v).normalize(),t[4].setComponents(o-a,c-l,p-d,y-g).normalize(),t[5].setComponents(o+a,c+l,p+d,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Ql.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{var t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Ql.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ql)}},{key:"intersectsSprite",value:function(e){return Ql.center.set(0,0,0),Ql.radius=.7071067811865476,Ql.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ql)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if($l.x=r.normal.x>0?e.max.x:e.min.x,$l.y=r.normal.y>0?e.max.y:e.min.y,$l.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint($l)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function tc(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function nc(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i,a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,a,o),t.onUploadCallback(),a instanceof Float32Array)i=e.FLOAT;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");i=e.HALF_FLOAT}else i=e.UNSIGNED_SHORT;else if(a instanceof Int16Array)i=e.SHORT;else if(a instanceof Uint32Array)i=e.UNSIGNED_INT;else if(a instanceof Int32Array)i=e.INT;else if(a instanceof Int8Array)i=e.BYTE;else if(a instanceof Uint8Array)i=e.UNSIGNED_BYTE;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);i=e.UNSIGNED_BYTE}return{buffer:s,type:i,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),r.onUploadCallback()}(o.buffer,t,i),o.version=t.version)}}}}var rc=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;hr(this,t),(e=nr(this,t)).type="PlaneGeometry",e.parameters={width:n,height:r,widthSegments:i,heightSegments:a};for(var o=n/2,s=r/2,u=Math.floor(i),l=Math.floor(a),c=u+1,h=l+1,f=n/u,d=r/l,p=[],m=[],v=[],g=[],y=0;y<h;y++)for(var b=y*d-s,x=0;x<c;x++){var w=x*f-o;m.push(w,-b,0),v.push(0,0,1),g.push(x/u),g.push(1-y/l)}for(var _=0;_<l;_++)for(var E=0;E<u;E++){var S=E+c*_,T=E+c*(_+1),M=E+1+c*(_+1),k=E+1+c*_;p.push(S,T,k),p.push(T,M,k)}return e.setIndex(p),e.setAttribute("position",new sl(m,3)),e.setAttribute("normal",new sl(v,3)),e.setAttribute("uv",new sl(g,2)),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.width,e.height,e.widthSegments,e.heightSegments)}}]),t}(vl),ic={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ac={common:{diffuse:{value:new Gu(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Xo},alphaMap:{value:null},alphaMapTransform:{value:new Xo},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Xo}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Xo}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Xo}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Xo},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Xo},normalScale:{value:new Wo(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Xo},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Xo}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Xo}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Xo}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Gu(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Gu(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Xo}},sprite:{diffuse:{value:new Gu(16777215)},opacity:{value:1},center:{value:new Wo(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Xo},alphaMap:{value:null},alphaTest:{value:0}}},oc={basic:{uniforms:Ul([ac.common,ac.specularmap,ac.envmap,ac.aomap,ac.lightmap,ac.fog]),vertexShader:ic.meshbasic_vert,fragmentShader:ic.meshbasic_frag},lambert:{uniforms:Ul([ac.common,ac.specularmap,ac.envmap,ac.aomap,ac.lightmap,ac.emissivemap,ac.bumpmap,ac.normalmap,ac.displacementmap,ac.fog,ac.lights,{emissive:{value:new Gu(0)}}]),vertexShader:ic.meshlambert_vert,fragmentShader:ic.meshlambert_frag},phong:{uniforms:Ul([ac.common,ac.specularmap,ac.envmap,ac.aomap,ac.lightmap,ac.emissivemap,ac.bumpmap,ac.normalmap,ac.displacementmap,ac.fog,ac.lights,{emissive:{value:new Gu(0)},specular:{value:new Gu(1118481)},shininess:{value:30}}]),vertexShader:ic.meshphong_vert,fragmentShader:ic.meshphong_frag},standard:{uniforms:Ul([ac.common,ac.envmap,ac.aomap,ac.lightmap,ac.emissivemap,ac.bumpmap,ac.normalmap,ac.displacementmap,ac.roughnessmap,ac.metalnessmap,ac.fog,ac.lights,{emissive:{value:new Gu(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ic.meshphysical_vert,fragmentShader:ic.meshphysical_frag},toon:{uniforms:Ul([ac.common,ac.aomap,ac.lightmap,ac.emissivemap,ac.bumpmap,ac.normalmap,ac.displacementmap,ac.gradientmap,ac.fog,ac.lights,{emissive:{value:new Gu(0)}}]),vertexShader:ic.meshtoon_vert,fragmentShader:ic.meshtoon_frag},matcap:{uniforms:Ul([ac.common,ac.bumpmap,ac.normalmap,ac.displacementmap,ac.fog,{matcap:{value:null}}]),vertexShader:ic.meshmatcap_vert,fragmentShader:ic.meshmatcap_frag},points:{uniforms:Ul([ac.points,ac.fog]),vertexShader:ic.points_vert,fragmentShader:ic.points_frag},dashed:{uniforms:Ul([ac.common,ac.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ic.linedashed_vert,fragmentShader:ic.linedashed_frag},depth:{uniforms:Ul([ac.common,ac.displacementmap]),vertexShader:ic.depth_vert,fragmentShader:ic.depth_frag},normal:{uniforms:Ul([ac.common,ac.bumpmap,ac.normalmap,ac.displacementmap,{opacity:{value:1}}]),vertexShader:ic.meshnormal_vert,fragmentShader:ic.meshnormal_frag},sprite:{uniforms:Ul([ac.sprite,ac.fog]),vertexShader:ic.sprite_vert,fragmentShader:ic.sprite_frag},background:{uniforms:{uvTransform:{value:new Xo},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ic.background_vert,fragmentShader:ic.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ic.backgroundCube_vert,fragmentShader:ic.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ic.cube_vert,fragmentShader:ic.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ic.equirect_vert,fragmentShader:ic.equirect_frag},distanceRGBA:{uniforms:Ul([ac.common,ac.displacementmap,{referencePosition:{value:new _s},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ic.distanceRGBA_vert,fragmentShader:ic.distanceRGBA_frag},shadow:{uniforms:Ul([ac.lights,ac.fog,{color:{value:new Gu(0)},opacity:{value:1}}]),vertexShader:ic.shadow_vert,fragmentShader:ic.shadow_frag}};oc.physical={uniforms:Ul([oc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Xo},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Xo},clearcoatNormalScale:{value:new Wo(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Xo},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Xo},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Xo},sheen:{value:0},sheenColor:{value:new Gu(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Xo},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Xo},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Xo},transmissionSamplerSize:{value:new Wo},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Xo},attenuationDistance:{value:0},attenuationColor:{value:new Gu(0)},specularColor:{value:new Gu(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Xo},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Xo}}]),vertexShader:ic.meshphysical_vert,fragmentShader:ic.meshphysical_frag};var sc={r:0,b:0,g:0};function uc(e,t,n,r,i,a,o){var s,u,l=new Gu(0),c=!0===a?0:1,h=null,f=0,d=null;function p(t,n){t.getRGB(sc,Fl(e)),r.buffers.color.setClear(sc.r,sc.g,sc.b,n,o)}return{getClearColor:function(){return l},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l.set(e),p(l,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){p(l,c=e)},render:function(a,m){var v=!1,g=!0===m.isScene?m.background:null;switch(g&&g.isTexture&&(g=(m.backgroundBlurriness>0?n:t).get(g)),null===g?p(l,c):g&&g.isColor&&(p(g,1),v=!0),e.xr.getEnvironmentBlendMode()){case"opaque":v=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),v=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),v=!0}(e.autoClear||v)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||g.mapping===xi)?(void 0===u&&((u=new Ol(new Nl(1,1,1),new Hl({name:"BackgroundCubeMaterial",uniforms:Bl(oc.backgroundCube.uniforms),vertexShader:oc.backgroundCube.vertexShader,fragmentShader:oc.backgroundCube.fragmentShader,side:kr,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=g,u.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=g.colorSpace!==$a,h===g&&f===g.version&&d===e.toneMapping||(u.material.needsUpdate=!0,h=g,f=g.version,d=e.toneMapping),u.layers.enableAll(),a.unshift(u,u.geometry,u.material,0,0,null)):g&&g.isTexture&&(void 0===s&&((s=new Ol(new rc(2,2),new Hl({name:"BackgroundMaterial",uniforms:Bl(oc.background.uniforms),vertexShader:oc.background.vertexShader,fragmentShader:oc.background.fragmentShader,side:Mr,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=g,s.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,s.material.toneMapped=g.colorSpace!==$a,!0===g.matrixAutoUpdate&&g.updateMatrix(),s.material.uniforms.uvTransform.value.copy(g.matrix),h===g&&f===g.version&&d===e.toneMapping||(s.material.needsUpdate=!0,h=g,f=g.version,d=e.toneMapping),s.layers.enableAll(),a.unshift(s,s.geometry,s.material,0,0,null))}}}function lc(e,t,n,r){var i=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},u=d(null),l=u,c=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function f(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function d(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function m(e){v(e,0)}function v(n,i){var a=l.newAttributes,o=l.enabledAttributes,s=l.attributeDivisors;a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,a,o,s){!0!==r.isWebGL2||i!==e.INT&&i!==e.UNSIGNED_INT?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function b(){x(),c=!0,l!==u&&h((l=u).object)}function x(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,f,b,x){var w=!1;if(o){var _=function(t,n,i){var o=!0===i.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[o];return void 0===c&&(c=d(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),l[o]=c),c}(b,f,u);l!==_&&h((l=_).object),w=function(e,t,n,r){var i=l.attributes,a=t.attributes,o=0,s=n.getAttributes();for(var u in s)if(s[u].location>=0){var c=i[u],h=a[u];if(void 0===h&&("instanceMatrix"===u&&e.instanceMatrix&&(h=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(h=e.instanceColor)),void 0===c)return!0;if(c.attribute!==h)return!0;if(h&&c.data!==h.data)return!0;o++}return l.attributesNum!==o||l.index!==r}(i,b,f,x),w&&function(e,t,n,r){var i={},a=t.attributes,o=0,s=n.getAttributes();for(var u in s)if(s[u].location>=0){var c=a[u];void 0===c&&("instanceMatrix"===u&&e.instanceMatrix&&(c=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(c=e.instanceColor));var h={};h.attribute=c,c&&c.data&&(h.data=c.data),i[u]=h,o++}l.attributes=i,l.attributesNum=o,l.index=r}(i,b,f,x)}else{var E=!0===u.wireframe;l.geometry===b.id&&l.program===f.id&&l.wireframe===E||(l.geometry=b.id,l.program=f.id,l.wireframe=E,w=!0)}null!==x&&n.update(x,e.ELEMENT_ARRAY_BUFFER),(w||c)&&(c=!1,function(i,a,o,s){if(!1!==r.isWebGL2||!i.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){p();var u=s.attributes,l=o.getAttributes(),c=a.defaultAttributeValues;for(var h in l){var f=l[h];if(f.location>=0){var d=u[h];if(void 0===d&&("instanceMatrix"===h&&i.instanceMatrix&&(d=i.instanceMatrix),"instanceColor"===h&&i.instanceColor&&(d=i.instanceColor)),void 0!==d){var b=d.normalized,x=d.itemSize,w=n.get(d);if(void 0===w)continue;var _=w.buffer,E=w.type,S=w.bytesPerElement;if(d.isInterleavedBufferAttribute){var T=d.data,M=T.stride,k=d.offset;if(T.isInstancedInterleavedBuffer){for(var A=0;A<f.locationSize;A++)v(f.location+A,T.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=T.meshPerAttribute*T.count)}else for(var I=0;I<f.locationSize;I++)m(f.location+I);e.bindBuffer(e.ARRAY_BUFFER,_);for(var L=0;L<f.locationSize;L++)y(f.location+L,x/f.locationSize,E,b,M*S,(k+x/f.locationSize*L)*S)}else{if(d.isInstancedBufferAttribute){for(var R=0;R<f.locationSize;R++)v(f.location+R,d.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=d.meshPerAttribute*d.count)}else for(var C=0;C<f.locationSize;C++)m(f.location+C);e.bindBuffer(e.ARRAY_BUFFER,_);for(var P=0;P<f.locationSize;P++)y(f.location+P,x/f.locationSize,E,b,x*S,x/f.locationSize*P*S)}}else if(void 0!==c){var O=c[h];if(void 0!==O)switch(O.length){case 2:e.vertexAttrib2fv(f.location,O);break;case 3:e.vertexAttrib3fv(f.location,O);break;case 4:e.vertexAttrib4fv(f.location,O);break;default:e.vertexAttrib1fv(f.location,O)}}}}g()}}(i,u,f,b),null!==x&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(x).buffer))},reset:b,resetDefaultState:x,dispose:function(){for(var e in b(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)f(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)f(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)f(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:g}}function cc(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,l;if(a)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,o,s),n.update(o,i,s)}}}function hc(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=a||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),v=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,b=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?e.getParameter(e.MAX_SAMPLES):0}}function fc(e){var t=this,n=null,r=0,i=!1,a=!1,o=new Zl,s=new Xo,u={value:null,needsUpdate:!1};function l(e,n,r,i){var a=null!==e?e.length:0,l=null;if(0!==a){if(l=u.value,!0!==i||null===l){var c=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,d=r;f!==a;++f,d+=4)o.copy(e[f]).applyMatrix4(h,s),o.normal.toArray(l,d),l[d+3]=o.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){var n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,l(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=l(e,t,0)},this.setState=function(o,s,c){var h=o.clippingPlanes,f=o.clipIntersection,d=o.clipShadows,p=e.get(o);if(!i||null===h||0===h.length||a&&!d)a?l(null):(u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0);else{var m=a?0:r,v=4*m,g=p.clippingState||null;u.value=g,g=l(h,s,v,c);for(var y=0;y!==v;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=m}}}function dc(e){var t=new WeakMap;function n(e,t){return t===yi?e.mapping=vi:t===bi&&(e.mapping=gi),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(a===yi||a===bi){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=new Xl(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}var pc=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return hr(this,t),(e=nr(this,t)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=n,e.right=r,e.top=i,e.bottom=a,e.near=o,e.far=s,e.updateProjectionMatrix(),e}return or(t,e),dr(t,[{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:tr({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var n=er(ir(t.prototype),"toJSON",this).call(this,e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,null!==this.view&&(n.object.view=tr({},this.view)),n}}]),t}(Gl),mc=[.125,.215,.35,.446,.526,.582],vc=20,gc=new pc,yc=new Gu,bc=null,xc=(1+Math.sqrt(5))/2,wc=1/xc,_c=[new _s(1,1,1),new _s(-1,1,1),new _s(1,1,-1),new _s(-1,1,-1),new _s(0,xc,wc),new _s(0,xc,-wc),new _s(wc,0,xc),new _s(-wc,0,xc),new _s(xc,wc,0),new _s(-xc,wc,0)],Ec=function(){function e(t){hr(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return dr(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;bc=this._renderer.getRenderTarget(),this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=kc(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=Mc(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(bc),e.scissorTest=!1,Tc(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===vi||e.mapping===gi?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),bc=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ii,minFilter:Ii,generateMipmaps:!1,type:Hi,format:Wi,colorSpace:eo,depthBuffer:!1},r=Sc(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Sc(e,t,n);var i=this._lodMax,a=function(e){for(var t=[],n=[],r=[],i=e,a=e-4+1+mc.length,o=0;o<a;o++){var s=Math.pow(2,i);n.push(s);var u=1/s;o>e-4?u=mc[o-e+4-1]:0===o&&(u=0),r.push(u);for(var l=1/(s-2),c=-l,h=1+l,f=[c,c,h,c,h,h,c,c,h,h,c,h],d=new Float32Array(108),p=new Float32Array(72),m=new Float32Array(36),v=0;v<6;v++){var g=v%3*2/3-1,y=v>2?0:-1,b=[g,y,0,g+2/3,y,0,g+2/3,y+1,0,g,y,0,g+2/3,y+1,0,g,y+1,0];d.set(b,18*v),p.set(f,12*v);var x=[v,v,v,v,v,v];m.set(x,6*v)}var w=new vl;w.setAttribute("position",new Qu(d,3)),w.setAttribute("uv",new Qu(p,2)),w.setAttribute("faceIndex",new Qu(m,1)),t.push(w),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(i);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var r=new Float32Array(vc),i=new _s(0,1,0);return new Hl({name:"SphericalGaussianBlur",defines:{n:vc,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Lr,depthTest:!1,depthWrite:!1})}(i,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new Ol(this._lodPlanes[0],e);this._renderer.compile(t,gc)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new jl(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.toneMapping;s.getClearColor(yc),s.toneMapping=li,s.autoClear=!1;var c=new Vu({name:"PMREM.Background",side:kr,depthWrite:!1,depthTest:!1}),h=new Ol(new Nl,c),f=!1,d=e.background;d?d.isColor&&(c.color.copy(d),e.background=null,f=!0):(c.color.copy(yc),f=!0);for(var p=0;p<6;p++){var m=p%3;0===m?(i.up.set(0,a[p],0),i.lookAt(o[p],0,0)):1===m?(i.up.set(0,0,a[p]),i.lookAt(0,o[p],0)):(i.up.set(0,a[p],0),i.lookAt(0,0,o[p]));var v=this._cubeSize;Tc(r,m*v,p>2?v:0,v,v),s.setRenderTarget(r),f&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=l,s.autoClear=u,e.background=d}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===vi||e.mapping===gi;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=kc()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Mc());var i=r?this._cubemapMaterial:this._equirectMaterial,a=new Ol(this._lodPlanes[0],i);i.uniforms.envMap.value=e;var o=this._cubeSize;Tc(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,gc)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<this._lodPlanes.length;r++){var i=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=_c[(r-1)%_c.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new Ol(this._lodPlanes[r],u),c=u.uniforms,h=this._sizeLods[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,d=i/f,p=isFinite(i)?1+Math.floor(3*d):vc;p>vc&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(vc));for(var m=[],v=0,g=0;g<vc;++g){var y=g/d,b=Math.exp(-y*y/2);m.push(b),0===g?v+=b:g<p&&(v+=2*b)}for(var x=0;x<m.length;x++)m[x]=m[x]/v;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=m,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);var w=this._lodMax;c.dTheta.value=f,c.mipInt.value=w-n;var _=this._sizeLods[r];Tc(t,3*_*(r>w-4?r-w+4:0),4*(this._cubeSize-_),3*_,2*_),s.setRenderTarget(t),s.render(l,gc)}}]),e}();function Sc(e,t,n){var r=new ms(e,t,n);return r.texture.mapping=xi,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Tc(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Mc(){return new Hl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Lr,depthTest:!1,depthWrite:!1})}function kc(){return new Hl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Lr,depthTest:!1,depthWrite:!1})}function Ac(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping,o=a===yi||a===bi,s=a===vi||a===gi;if(o||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;var u=t.get(i);return null===n&&(n=new Ec(e)),u=o?n.fromEquirectangular(i,u):n.fromCubemap(i,u),t.set(i,u),u.texture}if(t.has(i))return t.get(i).texture;var l=i.image;if(o&&l&&l.height>0||s&&l&&function(e){for(var t=0,n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(l)){null===n&&(n=new Ec(e));var c=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Ic(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Lc(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",o),delete i[s.id];var l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],f=s[u+2];n.push(c,h,h,f,f,c)}}else{var d=i.array;o=i.version;for(var p=0,m=d.length/3-1;p<m;p+=3){var v=p+0,g=p+1,y=p+2;n.push(v,g,g,y,y,v)}}var b=new(Ko(n)?al:rl)(n,1);b.version=o;var x=a.get(e);x&&t.remove(x),a.set(e,b)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(n){var r=n.attributes;for(var i in r)t.update(r[i],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,l=s.length;u<l;u++)t.update(s[u],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function Rc(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,h;if(s)c=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,u,a,r*o,l),n.update(u,i,l)}}}function Cc(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Pc(e,t){return e[0]-t[0]}function Oc(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Dc(e,t,n){for(var r={},i=new Float32Array(8),a=new WeakMap,o=new ps,s=[],u=0;u<8;u++)s[u]=[u,0];return{update:function(u,l,c){var h=u.morphTargetInfluences;if(!0===t.isWebGL2){var f=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,d=void 0!==f?f.length:0,p=a.get(l);if(void 0===p||p.count!==d){void 0!==p&&p.texture.dispose();var m=void 0!==l.morphAttributes.position,v=void 0!==l.morphAttributes.normal,g=void 0!==l.morphAttributes.color,y=l.morphAttributes.position||[],b=l.morphAttributes.normal||[],x=l.morphAttributes.color||[],w=0;!0===m&&(w=1),!0===v&&(w=2),!0===g&&(w=3);var _=l.attributes.position.count*w,E=1;_>t.maxTextureSize&&(E=Math.ceil(_/t.maxTextureSize),_=t.maxTextureSize);var S=new Float32Array(_*E*4*d),T=new vs(S,_,E,d);T.type=zi,T.needsUpdate=!0;for(var M=4*w,k=0;k<d;k++)for(var A=y[k],I=b[k],L=x[k],R=_*E*4*k,C=0;C<A.count;C++){var P=C*M;!0===m&&(o.fromBufferAttribute(A,C),S[R+P+0]=o.x,S[R+P+1]=o.y,S[R+P+2]=o.z,S[R+P+3]=0),!0===v&&(o.fromBufferAttribute(I,C),S[R+P+4]=o.x,S[R+P+5]=o.y,S[R+P+6]=o.z,S[R+P+7]=0),!0===g&&(o.fromBufferAttribute(L,C),S[R+P+8]=o.x,S[R+P+9]=o.y,S[R+P+10]=o.z,S[R+P+11]=4===L.itemSize?o.w:1)}p={count:d,texture:T,size:new Wo(_,E)},a.set(l,p),l.addEventListener("dispose",(function e(){T.dispose(),a.delete(l),l.removeEventListener("dispose",e)}))}for(var O=0,D=0;D<h.length;D++)O+=h[D];var N=l.morphTargetsRelative?1:1-O;c.getUniforms().setValue(e,"morphTargetBaseInfluence",N),c.getUniforms().setValue(e,"morphTargetInfluences",h),c.getUniforms().setValue(e,"morphTargetsTexture",p.texture,n),c.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{var B=void 0===h?0:h.length,U=r[l.id];if(void 0===U||U.length!==B){U=[];for(var F=0;F<B;F++)U[F]=[F,0];r[l.id]=U}for(var z=0;z<B;z++){var H=U[z];H[0]=z,H[1]=h[z]}U.sort(Oc);for(var G=0;G<8;G++)G<B&&U[G][1]?(s[G][0]=U[G][0],s[G][1]=U[G][1]):(s[G][0]=Number.MAX_SAFE_INTEGER,s[G][1]=0);s.sort(Pc);for(var j=l.morphAttributes.position,V=l.morphAttributes.normal,q=0,W=0;W<8;W++){var X=s[W],Y=X[0],K=X[1];Y!==Number.MAX_SAFE_INTEGER&&K?(j&&l.getAttribute("morphTarget"+W)!==j[Y]&&l.setAttribute("morphTarget"+W,j[Y]),V&&l.getAttribute("morphNormal"+W)!==V[Y]&&l.setAttribute("morphNormal"+W,V[Y]),i[W]=K,q+=K):(j&&!0===l.hasAttribute("morphTarget"+W)&&l.deleteAttribute("morphTarget"+W),V&&!0===l.hasAttribute("morphNormal"+W)&&l.deleteAttribute("morphNormal"+W),i[W]=0)}var J=l.morphTargetsRelative?1:1-q;c.getUniforms().setValue(e,"morphTargetBaseInfluence",J),c.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Nc(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){var s=r.render.frame,u=o.geometry,l=t.get(o,u);return i.get(l)!==s&&(t.update(l),i.set(l,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER)),l},dispose:function(){i=new WeakMap}}}var Bc=new ds,Uc=new vs,Fc=new ys,zc=new Wl,Hc=[],Gc=[],jc=new Float32Array(16),Vc=new Float32Array(9),qc=new Float32Array(4);function Wc(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=Hc[i];if(void 0===a&&(a=new Float32Array(i),Hc[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Xc(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Yc(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Kc(e,t){var n=Gc[t];void 0===n&&(n=new Int32Array(t),Gc[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Jc(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Zc(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Xc(n,t))return;e.uniform2fv(this.addr,t),Yc(n,t)}}function Qc(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Xc(n,t))return;e.uniform3fv(this.addr,t),Yc(n,t)}}function $c(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Xc(n,t))return;e.uniform4fv(this.addr,t),Yc(n,t)}}function eh(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Xc(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Yc(n,t)}else{if(Xc(n,r))return;qc.set(r),e.uniformMatrix2fv(this.addr,!1,qc),Yc(n,r)}}function th(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Xc(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Yc(n,t)}else{if(Xc(n,r))return;Vc.set(r),e.uniformMatrix3fv(this.addr,!1,Vc),Yc(n,r)}}function nh(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Xc(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Yc(n,t)}else{if(Xc(n,r))return;jc.set(r),e.uniformMatrix4fv(this.addr,!1,jc),Yc(n,r)}}function rh(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ih(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Xc(n,t))return;e.uniform2iv(this.addr,t),Yc(n,t)}}function ah(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Xc(n,t))return;e.uniform3iv(this.addr,t),Yc(n,t)}}function oh(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Xc(n,t))return;e.uniform4iv(this.addr,t),Yc(n,t)}}function sh(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function uh(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Xc(n,t))return;e.uniform2uiv(this.addr,t),Yc(n,t)}}function lh(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Xc(n,t))return;e.uniform3uiv(this.addr,t),Yc(n,t)}}function ch(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Xc(n,t))return;e.uniform4uiv(this.addr,t),Yc(n,t)}}function hh(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Bc,i)}function fh(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Fc,i)}function dh(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||zc,i)}function ph(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Uc,i)}function mh(e,t){e.uniform1fv(this.addr,t)}function vh(e,t){var n=Wc(t,this.size,2);e.uniform2fv(this.addr,n)}function gh(e,t){var n=Wc(t,this.size,3);e.uniform3fv(this.addr,n)}function yh(e,t){var n=Wc(t,this.size,4);e.uniform4fv(this.addr,n)}function bh(e,t){var n=Wc(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function xh(e,t){var n=Wc(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function wh(e,t){var n=Wc(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function _h(e,t){e.uniform1iv(this.addr,t)}function Eh(e,t){e.uniform2iv(this.addr,t)}function Sh(e,t){e.uniform3iv(this.addr,t)}function Th(e,t){e.uniform4iv(this.addr,t)}function Mh(e,t){e.uniform1uiv(this.addr,t)}function kh(e,t){e.uniform2uiv(this.addr,t)}function Ah(e,t){e.uniform3uiv(this.addr,t)}function Ih(e,t){e.uniform4uiv(this.addr,t)}function Lh(e,t,n){var r=this.cache,i=t.length,a=Kc(n,i);Xc(r,a)||(e.uniform1iv(this.addr,a),Yc(r,a));for(var o=0;o!==i;++o)n.setTexture2D(t[o]||Bc,a[o])}function Rh(e,t,n){var r=this.cache,i=t.length,a=Kc(n,i);Xc(r,a)||(e.uniform1iv(this.addr,a),Yc(r,a));for(var o=0;o!==i;++o)n.setTexture3D(t[o]||Fc,a[o])}function Ch(e,t,n){var r=this.cache,i=t.length,a=Kc(n,i);Xc(r,a)||(e.uniform1iv(this.addr,a),Yc(r,a));for(var o=0;o!==i;++o)n.setTextureCube(t[o]||zc,a[o])}function Ph(e,t,n){var r=this.cache,i=t.length,a=Kc(n,i);Xc(r,a)||(e.uniform1iv(this.addr,a),Yc(r,a));for(var o=0;o!==i;++o)n.setTexture2DArray(t[o]||Uc,a[o])}var Oh=dr((function e(t,n,r){hr(this,e),this.id=t,this.addr=r,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Jc;case 35664:return Zc;case 35665:return Qc;case 35666:return $c;case 35674:return eh;case 35675:return th;case 35676:return nh;case 5124:case 35670:return rh;case 35667:case 35671:return ih;case 35668:case 35672:return ah;case 35669:case 35673:return oh;case 5125:return sh;case 36294:return uh;case 36295:return lh;case 36296:return ch;case 35678:case 36198:case 36298:case 36306:case 35682:return hh;case 35679:case 36299:case 36307:return fh;case 35680:case 36300:case 36308:case 36293:return dh;case 36289:case 36303:case 36311:case 36292:return ph}}(n.type)})),Dh=dr((function e(t,n,r){hr(this,e),this.id=t,this.addr=r,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return mh;case 35664:return vh;case 35665:return gh;case 35666:return yh;case 35674:return bh;case 35675:return xh;case 35676:return wh;case 5124:case 35670:return _h;case 35667:case 35671:return Eh;case 35668:case 35672:return Sh;case 35669:case 35673:return Th;case 5125:return Mh;case 36294:return kh;case 36295:return Ah;case 36296:return Ih;case 35678:case 36198:case 36298:case 36306:case 35682:return Lh;case 35679:case 36299:case 36307:return Rh;case 35680:case 36300:case 36308:case 36293:return Ch;case 36289:case 36303:case 36311:case 36292:return Ph}}(n.type)})),Nh=function(){function e(t){hr(this,e),this.id=t,this.seq=[],this.map={}}return dr(e,[{key:"setValue",value:function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}}}]),e}(),Bh=/(\w+)(\])?(\[|\.)?/g;function Uh(e,t){e.seq.push(t),e.map[t.id]=t}function Fh(e,t,n){var r=e.name,i=r.length;for(Bh.lastIndex=0;;){var a=Bh.exec(r),o=Bh.lastIndex,s=a[1],u="]"===a[2],l=a[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===i){Uh(n,void 0===l?new Oh(s,e,t):new Dh(s,e,t));break}var c=n.map[s];void 0===c&&Uh(n,c=new Nh(s)),n=c}}var zh=function(){function e(t,n){hr(this,e),this.seq=[],this.map={};for(var r=t.getProgramParameter(n,t.ACTIVE_UNIFORMS),i=0;i<r;++i){var a=t.getActiveUniform(n,i);Fh(a,t.getUniformLocation(n,a.name),this)}}return dr(e,[{key:"setValue",value:function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)}},{key:"setOptional",value:function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)}}],[{key:"upload",value:function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n}}]),e}();function Hh(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var Gh=0;function jh(e,t,n){var r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";var a=/ERROR: 0:(\d+)/.exec(i);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){for(var n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length),o=i;o<a;o++){var s=o+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}(e.getShaderSource(t),o)}return i}function Vh(e,t){var n;switch(t){case ci:n="Linear";break;case hi:n="Reinhard";break;case fi:n="OptimizedCineon";break;case di:n="ACESFilmic";break;case pi:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function qh(e){return""!==e}function Wh(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Xh(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Yh=/^[ \t]*#include +<([\w\d./]+)>/gm;function Kh(e){return e.replace(Yh,Jh)}function Jh(e,t){var n=ic[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Kh(n)}var Zh=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Qh(e){return e.replace(Zh,$h)}function $h(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function ef(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function tf(e,t,n,r){var i,a,o,s,u,l=e.getContext(),c=n.defines,h=n.vertexShader,f=n.fragmentShader,d=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Er?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Sr?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Tr&&(t="SHADOWMAP_TYPE_VSM"),t}(n),p=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case vi:case gi:t="ENVMAP_TYPE_CUBE";break;case xi:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),m=function(e){var t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===gi&&(t="ENVMAP_MODE_REFRACTION"),t}(n),v=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case oi:t="ENVMAP_BLENDING_MULTIPLY";break;case si:t="ENVMAP_BLENDING_MIX";break;case ui:t="ENVMAP_BLENDING_ADD"}return t}(n),g=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),y=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(qh).join("\n")}(n),b=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(c),x=l.createProgram(),w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[b].filter(qh).join("\n")).length>0&&(i+="\n"),(a=[y,b].filter(qh).join("\n")).length>0&&(a+="\n")):(i=[ef(n),"#define SHADER_NAME "+n.shaderName,b,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(qh).join("\n"),a=[y,ef(n),"#define SHADER_NAME "+n.shaderName,b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.envMap?"#define "+m:"",n.envMap?"#define "+v:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==li?"#define TONE_MAPPING":"",n.toneMapping!==li?ic.tonemapping_pars_fragment:"",n.toneMapping!==li?Vh("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ic.encodings_pars_fragment,(o="linearToOutputTexel",s=n.outputColorSpace,u=function(e){switch(e){case eo:return["Linear","( value )"];case $a:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),["Linear","( value )"]}}(s),"vec4 "+o+"( vec4 value ) { return LinearTo"+u[0]+u[1]+"; }"),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(qh).join("\n")),h=Xh(h=Wh(h=Kh(h),n),n),f=Xh(f=Wh(f=Kh(f),n),n),h=Qh(h),f=Qh(f),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===Io?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Io?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var _,E,S=w+i+h,T=w+a+f,M=Hh(l,l.VERTEX_SHADER,S),k=Hh(l,l.FRAGMENT_SHADER,T);if(l.attachShader(x,M),l.attachShader(x,k),void 0!==n.index0AttributeName?l.bindAttribLocation(x,0,n.index0AttributeName):!0===n.morphTargets&&l.bindAttribLocation(x,0,"position"),l.linkProgram(x),e.debug.checkShaderErrors){var A=l.getProgramInfoLog(x).trim(),I=l.getShaderInfoLog(M).trim(),L=l.getShaderInfoLog(k).trim(),R=!0,C=!0;if(!1===l.getProgramParameter(x,l.LINK_STATUS))if(R=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(l,x,M,k);else{var P=jh(l,M,"vertex"),O=jh(l,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(x,l.VALIDATE_STATUS)+"\n\nProgram Info Log: "+A+"\n"+P+"\n"+O)}else""!==A?console.warn("THREE.WebGLProgram: Program Info Log:",A):""!==I&&""!==L||(C=!1);C&&(this.diagnostics={runnable:R,programLog:A,vertexShader:{log:I,prefix:i},fragmentShader:{log:L,prefix:a}})}return l.deleteShader(M),l.deleteShader(k),this.getUniforms=function(){return void 0===_&&(_=new zh(l,x)),_},this.getAttributes=function(){return void 0===E&&(E=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;a.type===e.FLOAT_MAT2&&(s=2),a.type===e.FLOAT_MAT3&&(s=3),a.type===e.FLOAT_MAT4&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(l,x)),E},this.destroy=function(){r.releaseStatesOfProgram(this),l.deleteProgram(x),this.program=void 0},this.name=n.shaderName,this.id=Gh++,this.cacheKey=t,this.usedTimes=1,this.program=x,this.vertexShader=M,this.fragmentShader=k,this}var nf=0,rf=function(){function e(){hr(this,e),this.shaderCache=new Map,this.materialCache=new Map}return dr(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}},{key:"remove",value:function(e){var t,n=Zn(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code)}}catch(e){n.e(e)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new af(e),t.set(e,n)),n}}]),e}(),af=dr((function e(t){hr(this,e),this.id=nf++,this.code=t,this.usedTimes=0}));function of(e,t,n,r,i,a,o){var s=new lu,u=new rf,l=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return 1===e?"uv1":2===e?"uv2":3===e?"uv3":"uv"}return{getParameters:function(a,s,l,v,g){var y=v.fog,b=g.geometry,x=a.isMeshStandardMaterial?v.environment:null,w=(a.isMeshStandardMaterial?n:t).get(a.envMap||x),_=w&&w.mapping===xi?w.image.height:null,E=p[a.type];null!==a.precision&&(d=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead.");var S,T,M,k,A=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,I=void 0!==A?A.length:0,L=0;if(void 0!==b.morphAttributes.position&&(L=1),void 0!==b.morphAttributes.normal&&(L=2),void 0!==b.morphAttributes.color&&(L=3),E){var R=oc[E];S=R.vertexShader,T=R.fragmentShader}else S=a.vertexShader,T=a.fragmentShader,u.update(a),M=u.getVertexShaderID(a),k=u.getFragmentShaderID(a);var C=e.getRenderTarget(),P=!0===g.isInstancedMesh,O=!!a.map,D=!!a.matcap,N=!!w,B=!!a.aoMap,U=!!a.lightMap,F=!!a.bumpMap,z=!!a.normalMap,H=!!a.displacementMap,G=!!a.emissiveMap,j=!!a.metalnessMap,V=!!a.roughnessMap,q=a.clearcoat>0,W=a.iridescence>0,X=a.sheen>0,Y=a.transmission>0,K=q&&!!a.clearcoatMap,J=q&&!!a.clearcoatNormalMap,Z=q&&!!a.clearcoatRoughnessMap,Q=W&&!!a.iridescenceMap,$=W&&!!a.iridescenceThicknessMap,ee=X&&!!a.sheenColorMap,te=X&&!!a.sheenRoughnessMap,ne=!!a.specularMap,re=!!a.specularColorMap,ie=!!a.specularIntensityMap,ae=Y&&!!a.transmissionMap,oe=Y&&!!a.thicknessMap,se=!!a.gradientMap,ue=!!a.alphaMap,le=a.alphaTest>0,ce=!!a.extensions,he=!!b.attributes.uv1,fe=!!b.attributes.uv2,de=!!b.attributes.uv3;return{isWebGL2:c,shaderID:E,shaderName:a.type,vertexShader:S,fragmentShader:T,defines:a.defines,customVertexShaderID:M,customFragmentShaderID:k,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:P,instancingColor:P&&null!==g.instanceColor,supportsVertexTextures:f,outputColorSpace:null===C?e.outputColorSpace:!0===C.isXRRenderTarget?C.texture.colorSpace:eo,map:O,matcap:D,envMap:N,envMapMode:N&&w.mapping,envMapCubeUVHeight:_,aoMap:B,lightMap:U,bumpMap:F,normalMap:z,displacementMap:f&&H,emissiveMap:G,normalMapObjectSpace:z&&a.normalMapType===Za,normalMapTangentSpace:z&&a.normalMapType===Ja,metalnessMap:j,roughnessMap:V,clearcoat:q,clearcoatMap:K,clearcoatNormalMap:J,clearcoatRoughnessMap:Z,iridescence:W,iridescenceMap:Q,iridescenceThicknessMap:$,sheen:X,sheenColorMap:ee,sheenRoughnessMap:te,specularMap:ne,specularColorMap:re,specularIntensityMap:ie,transmission:Y,transmissionMap:ae,thicknessMap:oe,gradientMap:se,opaque:!1===a.transparent&&a.blending===Rr,alphaMap:ue,alphaTest:le,combine:a.combine,mapUv:O&&m(a.map.channel),aoMapUv:B&&m(a.aoMap.channel),lightMapUv:U&&m(a.lightMap.channel),bumpMapUv:F&&m(a.bumpMap.channel),normalMapUv:z&&m(a.normalMap.channel),displacementMapUv:H&&m(a.displacementMap.channel),emissiveMapUv:G&&m(a.emissiveMap.channel),metalnessMapUv:j&&m(a.metalnessMap.channel),roughnessMapUv:V&&m(a.roughnessMap.channel),clearcoatMapUv:K&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:J&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Z&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:Q&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:$&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:ee&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:te&&m(a.sheenRoughnessMap.channel),specularMapUv:ne&&m(a.specularMap.channel),specularColorMapUv:re&&m(a.specularColorMap.channel),specularIntensityMapUv:ie&&m(a.specularIntensityMap.channel),transmissionMapUv:ae&&m(a.transmissionMap.channel),thicknessMapUv:oe&&m(a.thicknessMap.channel),alphaMapUv:ue&&m(a.alphaMap.channel),vertexTangents:z&&!!b.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,vertexUv1s:he,vertexUv2s:fe,vertexUv3s:de,pointsUvs:!0===g.isPoints&&!!b.attributes.uv&&(O||ue),fog:!!y,useFog:!0===a.fog,fogExp2:y&&y.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:I,morphTextureStride:L,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:li,useLegacyLights:e.useLegacyLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===Ar,flipSided:a.side===kr,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:ce&&!0===a.extensions.derivatives,extensionFragDepth:ce&&!0===a.extensions.fragDepth,extensionDrawBuffers:ce&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:ce&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.matcap&&s.enable(4),t.envMap&&s.enable(5),t.normalMapObjectSpace&&s.enable(6),t.normalMapTangentSpace&&s.enable(7),t.clearcoat&&s.enable(8),t.iridescence&&s.enable(9),t.alphaTest&&s.enable(10),t.vertexColors&&s.enable(11),t.vertexAlphas&&s.enable(12),t.vertexUv1s&&s.enable(13),t.vertexUv2s&&s.enable(14),t.vertexUv3s&&s.enable(15),t.vertexTangents&&s.enable(16),e.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.skinning&&s.enable(4),t.morphTargets&&s.enable(5),t.morphNormals&&s.enable(6),t.morphColors&&s.enable(7),t.premultipliedAlpha&&s.enable(8),t.shadowMapEnabled&&s.enable(9),t.useLegacyLights&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.transmission&&s.enable(15),t.sheen&&s.enable(16),t.opaque&&s.enable(17),t.pointsUvs&&s.enable(18),e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=oc[n];t=zl.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,o=l.length;i<o;i++){var s=l[i];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new tf(e,n,t,a),l.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){var t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:l,dispose:function(){u.dispose()}}}function sf(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function uf(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function lf(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function cf(){var e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.groupOrder=a,u.renderOrder=n.renderOrder,u.z=o,u.group=s),t++,u}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,u,l){var c=a(e,t,o,s,u,l);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,u,l){var c=a(e,t,o,s,u,l);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(var n=t,r=e.length;n<r;n++){var i=e[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||uf),r.length>1&&r.sort(t||lf),i.length>1&&i.sort(t||lf)}}}function hf(){var e=new WeakMap;return{get:function(t,n){var r,i=e.get(t);return void 0===i?(r=new cf,e.set(t,[r])):n>=i.length?(r=new cf,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function ff(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new _s,color:new Gu};break;case"SpotLight":n={position:new _s,direction:new _s,color:new Gu,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new _s,color:new Gu,distance:0,decay:0};break;case"HemisphereLight":n={direction:new _s,skyColor:new Gu,groundColor:new Gu};break;case"RectAreaLight":n={color:new Gu,position:new _s,halfWidth:new _s,halfHeight:new _s}}return e[t.id]=n,n}}}var df=0;function pf(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function mf(e,t){for(var n,r=new ff,i=(n={},{get:function(e){if(void 0!==n[e.id])return n[e.id];var t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wo};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wo,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},o=0;o<9;o++)a.probe.push(new _s);var s=new _s,u=new Qs,l=new Qs;return{setup:function(n,o){for(var s=0,u=0,l=0,c=0;c<9;c++)a.probe[c].set(0,0,0);var h=0,f=0,d=0,p=0,m=0,v=0,g=0,y=0,b=0,x=0;n.sort(pf);for(var w=!0===o?Math.PI:1,_=0,E=n.length;_<E;_++){var S=n[_],T=S.color,M=S.intensity,k=S.distance,A=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)s+=T.r*M*w,u+=T.g*M*w,l+=T.b*M*w;else if(S.isLightProbe)for(var I=0;I<9;I++)a.probe[I].addScaledVector(S.sh.coefficients[I],M);else if(S.isDirectionalLight){var L=r.get(S);if(L.color.copy(S.color).multiplyScalar(S.intensity*w),S.castShadow){var R=S.shadow,C=i.get(S);C.shadowBias=R.bias,C.shadowNormalBias=R.normalBias,C.shadowRadius=R.radius,C.shadowMapSize=R.mapSize,a.directionalShadow[h]=C,a.directionalShadowMap[h]=A,a.directionalShadowMatrix[h]=S.shadow.matrix,v++}a.directional[h]=L,h++}else if(S.isSpotLight){var P=r.get(S);P.position.setFromMatrixPosition(S.matrixWorld),P.color.copy(T).multiplyScalar(M*w),P.distance=k,P.coneCos=Math.cos(S.angle),P.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),P.decay=S.decay,a.spot[d]=P;var O=S.shadow;if(S.map&&(a.spotLightMap[b]=S.map,b++,O.updateMatrices(S),S.castShadow&&x++),a.spotLightMatrix[d]=O.matrix,S.castShadow){var D=i.get(S);D.shadowBias=O.bias,D.shadowNormalBias=O.normalBias,D.shadowRadius=O.radius,D.shadowMapSize=O.mapSize,a.spotShadow[d]=D,a.spotShadowMap[d]=A,y++}d++}else if(S.isRectAreaLight){var N=r.get(S);N.color.copy(T).multiplyScalar(M),N.halfWidth.set(.5*S.width,0,0),N.halfHeight.set(0,.5*S.height,0),a.rectArea[p]=N,p++}else if(S.isPointLight){var B=r.get(S);if(B.color.copy(S.color).multiplyScalar(S.intensity*w),B.distance=S.distance,B.decay=S.decay,S.castShadow){var U=S.shadow,F=i.get(S);F.shadowBias=U.bias,F.shadowNormalBias=U.normalBias,F.shadowRadius=U.radius,F.shadowMapSize=U.mapSize,F.shadowCameraNear=U.camera.near,F.shadowCameraFar=U.camera.far,a.pointShadow[f]=F,a.pointShadowMap[f]=A,a.pointShadowMatrix[f]=S.shadow.matrix,g++}a.point[f]=B,f++}else if(S.isHemisphereLight){var z=r.get(S);z.skyColor.copy(S.color).multiplyScalar(M*w),z.groundColor.copy(S.groundColor).multiplyScalar(M*w),a.hemi[m]=z,m++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(a.rectAreaLTC1=ac.LTC_FLOAT_1,a.rectAreaLTC2=ac.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=ac.LTC_HALF_1,a.rectAreaLTC2=ac.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=s,a.ambient[1]=u,a.ambient[2]=l;var H=a.hash;H.directionalLength===h&&H.pointLength===f&&H.spotLength===d&&H.rectAreaLength===p&&H.hemiLength===m&&H.numDirectionalShadows===v&&H.numPointShadows===g&&H.numSpotShadows===y&&H.numSpotMaps===b||(a.directional.length=h,a.spot.length=d,a.rectArea.length=p,a.point.length=f,a.hemi.length=m,a.directionalShadow.length=v,a.directionalShadowMap.length=v,a.pointShadow.length=g,a.pointShadowMap.length=g,a.spotShadow.length=y,a.spotShadowMap.length=y,a.directionalShadowMatrix.length=v,a.pointShadowMatrix.length=g,a.spotLightMatrix.length=y+b-x,a.spotLightMap.length=b,a.numSpotLightShadowsWithMaps=x,H.directionalLength=h,H.pointLength=f,H.spotLength=d,H.rectAreaLength=p,H.hemiLength=m,H.numDirectionalShadows=v,H.numPointShadows=g,H.numSpotShadows=y,H.numSpotMaps=b,a.version=df++)},setupView:function(e,t){for(var n=0,r=0,i=0,o=0,c=0,h=t.matrixWorldInverse,f=0,d=e.length;f<d;f++){var p=e[f];if(p.isDirectionalLight){var m=a.directional[n];m.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(s),m.direction.transformDirection(h),n++}else if(p.isSpotLight){var v=a.spot[i];v.position.setFromMatrixPosition(p.matrixWorld),v.position.applyMatrix4(h),v.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(s),v.direction.transformDirection(h),i++}else if(p.isRectAreaLight){var g=a.rectArea[o];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),l.identity(),u.copy(p.matrixWorld),u.premultiply(h),l.extractRotation(u),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),o++}else if(p.isPointLight){var y=a.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var b=a.hemi[c];b.direction.setFromMatrixPosition(p.matrixWorld),b.direction.transformDirection(h),c++}}},state:a}}function vf(e,t){var n=new mf(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function gf(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n.get(r);return void 0===o?(i=new vf(e,t),n.set(r,[i])):a>=o.length?(i=new vf(e,t),o.push(i)):i=o[a],i},dispose:function(){n=new WeakMap}}}var yf=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isMeshDepthMaterial=!0,n.type="MeshDepthMaterial",n.depthPacking=Ya,n.map=null,n.alphaMap=null,n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.wireframe=!1,n.wireframeLinewidth=1,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),t}(Bu),bf=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isMeshDistanceMaterial=!0,n.type="MeshDistanceMaterial",n.map=null,n.alphaMap=null,n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),t}(Bu);function xf(e,t,n){var r=new ec,i=new Wo,a=new Wo,o=new ps,s=new yf({depthPacking:Ka}),u=new bf,l={},c=n.maxTextureSize,h=ur(ur(ur({},Mr,kr),kr,Mr),Ar,Ar),f=new Hl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Wo},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;var p=new vl;p.setAttribute("position",new Qu(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new Ol(p,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Er;var g=this.type;function y(n,r){var a=t.update(m);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new ms(i.x,i.y)),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,f,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,d,m,null)}function b(t,n,r,i){var a=null,o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===r.isPointLight?u:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){var c=a.uuid,f=n.uuid,d=l[c];void 0===d&&(d={},l[c]=d);var p=d[f];void 0===p&&(p=a.clone(),d[f]=p),a=p}return a.visible=n.visible,a.wireframe=n.wireframe,a.side=i===Tr?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial&&(e.properties.get(a).light=r),a}function x(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===Tr)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=l[d.materialIndex];if(p&&p.visible){var m=b(n,p,o,s);e.renderBufferDirect(a,null,u,m,n,d)}}else if(l.visible){var v=b(n,l,o,s);e.renderBufferDirect(a,null,u,v,n,null)}}for(var g=n.children,y=0,w=g.length;y<w;y++)x(g[y],i,a,o,s)}}this.render=function(t,n,s){if(!1!==v.enabled&&(!1!==v.autoUpdate||!1!==v.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(Lr),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=g!==Tr&&this.type===Tr,p=g===Tr&&this.type!==Tr,m=0,b=t.length;m<b;m++){var w=t[m],_=w.shadow;if(void 0!==_){if(!1!==_.autoUpdate||!1!==_.needsUpdate){i.copy(_.mapSize);var E=_.getFrameExtents();if(i.multiply(E),a.copy(_.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/E.x),i.x=a.x*E.x,_.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/E.y),i.y=a.y*E.y,_.mapSize.y=a.y)),null===_.map||!0===d||!0===p){var S=this.type!==Tr?{minFilter:Si,magFilter:Si}:{};null!==_.map&&_.map.dispose(),_.map=new ms(i.x,i.y,S),_.map.texture.name=w.name+".shadowMap",_.camera.updateProjectionMatrix()}e.setRenderTarget(_.map),e.clear();for(var T=_.getViewportCount(),M=0;M<T;M++){var k=_.getViewport(M);o.set(a.x*k.x,a.y*k.y,a.x*k.z,a.y*k.w),f.viewport(o),_.updateMatrices(w,M),r=_.getFrustum(),x(n,s,_.camera,w,this.type)}!0!==_.isPointLightShadow&&this.type===Tr&&y(_,s),_.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",w,"has no shadow.")}g=this.type,v.needsUpdate=!1,e.setRenderTarget(u,l,h)}}}function wf(e,t,n){var r,i=n.isWebGL2,a=new function(){var t=!1,n=new ps,r=null,i=new ps(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?H(e.DEPTH_TEST):G(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case Qr:e.depthFunc(e.NEVER);break;case $r:e.depthFunc(e.ALWAYS);break;case ei:e.depthFunc(e.LESS);break;case ti:e.depthFunc(e.LEQUAL);break;case ni:e.depthFunc(e.EQUAL);break;case ri:e.depthFunc(e.GEQUAL);break;case ii:e.depthFunc(e.GREATER);break;case ai:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},s=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):G(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null}}},u=new WeakMap,l=new WeakMap,c={},h={},f=new WeakMap,d=[],p=null,m=!1,v=null,g=null,y=null,b=null,x=null,w=null,_=null,E=!1,S=null,T=null,M=null,k=null,A=null,I=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),L=!1,R=0,C=e.getParameter(e.VERSION);-1!==C.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(C)[1]),L=R>=1):-1!==C.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(C)[1]),L=R>=2);var P=null,O={},D=e.getParameter(e.SCISSOR_BOX),N=e.getParameter(e.VIEWPORT),B=(new ps).fromArray(D),U=(new ps).fromArray(N);function F(t,n,r,a){var o=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var u=0;u<r;u++)!i||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+u,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,o);return s}var z={};function H(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function G(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}z[e.TEXTURE_2D]=F(e.TEXTURE_2D,e.TEXTURE_2D,1),z[e.TEXTURE_CUBE_MAP]=F(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(z[e.TEXTURE_2D_ARRAY]=F(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),z[e.TEXTURE_3D]=F(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),o.setClear(1),s.setClear(0),H(e.DEPTH_TEST),o.setFunc(ti),X(!1),Y(br),H(e.CULL_FACE),W(Lr);var j=ur(ur(ur({},Nr,e.FUNC_ADD),Br,e.FUNC_SUBTRACT),Ur,e.FUNC_REVERSE_SUBTRACT);if(i)j[Fr]=e.MIN,j[zr]=e.MAX;else{var V=t.get("EXT_blend_minmax");null!==V&&(j[Fr]=V.MIN_EXT,j[zr]=V.MAX_EXT)}var q=(ur(ur(ur(ur(ur(ur(ur(ur(ur(ur(r={},Hr,e.ZERO),Gr,e.ONE),jr,e.SRC_COLOR),qr,e.SRC_ALPHA),Zr,e.SRC_ALPHA_SATURATE),Kr,e.DST_COLOR),Xr,e.DST_ALPHA),Vr,e.ONE_MINUS_SRC_COLOR),Wr,e.ONE_MINUS_SRC_ALPHA),Jr,e.ONE_MINUS_DST_COLOR),ur(r,Yr,e.ONE_MINUS_DST_ALPHA));function W(t,n,r,i,a,o,s,u){if(t!==Lr){if(!1===m&&(H(e.BLEND),m=!0),t===Dr)a=a||n,o=o||r,s=s||i,n===g&&a===x||(e.blendEquationSeparate(j[n],j[a]),g=n,x=a),r===y&&i===b&&o===w&&s===_||(e.blendFuncSeparate(q[r],q[i],q[o],q[s]),y=r,b=i,w=o,_=s),v=t,E=!1;else if(t!==v||u!==E){if(g===Nr&&x===Nr||(e.blendEquation(e.FUNC_ADD),g=Nr,x=Nr),u)switch(t){case Rr:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Cr:e.blendFunc(e.ONE,e.ONE);break;case Pr:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case Or:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Rr:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Cr:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case Pr:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case Or:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,b=null,w=null,_=null,v=t,E=u}}else!0===m&&(G(e.BLEND),m=!1)}function X(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function Y(t){t!==yr?(H(e.CULL_FACE),t!==T&&(t===br?e.cullFace(e.BACK):t===xr?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):G(e.CULL_FACE),T=t}function K(t,n,r){t?(H(e.POLYGON_OFFSET_FILL),k===n&&A===r||(e.polygonOffset(n,r),k=n,A=r)):G(e.POLYGON_OFFSET_FILL)}return{buffers:{color:a,depth:o,stencil:s},enable:H,disable:G,bindFramebuffer:function(t,n){return h[t]!==n&&(e.bindFramebuffer(t,n),h[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(h[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(h[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){var a=d,o=!1;if(r)if(void 0===(a=f.get(i))&&(a=[],f.set(i,a)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(a.length!==s.length||a[0]!==e.COLOR_ATTACHMENT0){for(var u=0,l=s.length;u<l;u++)a[u]=e.COLOR_ATTACHMENT0+u;a.length=s.length,o=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,o=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:W,setMaterial:function(t,n){t.side===Ar?G(e.CULL_FACE):H(e.CULL_FACE);var r=t.side===kr;n&&(r=!r),X(r),t.blending===Rr&&!1===t.transparent?W(Lr):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),a.setMask(t.colorWrite);var i=t.stencilWrite;s.setTest(i),i&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),K(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):G(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:X,setCullFace:Y,setLineWidth:function(t){t!==M&&(L&&e.lineWidth(t),M=t)},setPolygonOffset:K,setScissorTest:function(t){t?H(e.SCISSOR_TEST):G(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+I-1),P!==t&&(e.activeTexture(t),P=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===P?e.TEXTURE0+I-1:P);var i=O[r];void 0===i&&(i={type:void 0,texture:void 0},O[r]=i),i.type===t&&i.texture===n||(P!==r&&(e.activeTexture(r),P=r),e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=O[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){var r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));var i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){var r=l.get(n).get(t);u.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),u.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===B.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),B.copy(t))},viewport:function(t){!1===U.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),U.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},P=null,O={},h={},f=new WeakMap,d=[],p=null,m=!1,v=null,g=null,y=null,b=null,x=null,w=null,_=null,E=!1,S=null,T=null,M=null,k=null,A=null,B.set(0,0,e.canvas.width,e.canvas.height),U.set(0,0,e.canvas.width,e.canvas.height),a.reset(),o.reset(),s.reset()}}}function _f(e,t,n,r,i,a,o){var s,u=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,h=i.maxTextureSize,f=i.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,v=new WeakMap,g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function y(e,t){return g?new OffscreenCanvas(e,t):Qo("canvas")}function b(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Go:Math.floor,o=a(i*e.width),u=a(i*e.height);void 0===s&&(s=y(o,u));var l=n?y(o,u):s;return l.width=o,l.height=u,l.getContext("2d").drawImage(e,0,0,o,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+u+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return zo(e.width)&&zo(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==Si&&e.minFilter!==Ii}function _(t){e.generateMipmap(t)}function E(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===u)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;return r===e.RED&&(i===e.FLOAT&&(s=e.R32F),i===e.HALF_FLOAT&&(s=e.R16F),i===e.UNSIGNED_BYTE&&(s=e.R8)),r===e.RG&&(i===e.FLOAT&&(s=e.RG32F),i===e.HALF_FLOAT&&(s=e.RG16F),i===e.UNSIGNED_BYTE&&(s=e.RG8)),r===e.RGBA&&(i===e.FLOAT&&(s=e.RGBA32F),i===e.HALF_FLOAT&&(s=e.RGBA16F),i===e.UNSIGNED_BYTE&&(s=a===$a&&!1===o?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)),s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function S(e,t,n){return!0===w(e,n)||e.isFramebufferTexture&&e.minFilter!==Si&&e.minFilter!==Ii?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function T(t){return t===Si||t===Ti||t===ki?e.NEAREST:e.LINEAR}function M(e){var t=e.target;t.removeEventListener("dispose",M),function(e){var t=r.get(e);if(void 0!==t.__webglInit){var n=e.source,i=v.get(n);if(i){var a=i[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&A(e),0===Object.keys(i).length&&v.delete(n)}r.remove(e)}}(t),t.isVideoTexture&&m.delete(t)}function k(t){var n=t.target;n.removeEventListener("dispose",k),function(t){var n=t.texture,i=r.get(t),a=r.get(n);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(var u=0;u<i.__webglColorRenderbuffer.length;u++)i.__webglColorRenderbuffer[u]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[u]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var l=0,c=n.length;l<c;l++){var h=r.get(n[l]);h.__webglTexture&&(e.deleteTexture(h.__webglTexture),o.memory.textures--),r.remove(n[l])}r.remove(n),r.remove(t)}(n)}function A(t){var n=r.get(t);e.deleteTexture(n.__webglTexture);var i=t.source;delete v.get(i)[n.__cacheKey],o.memory.textures--}var I=0;function L(t,i){var a=r.get(t);if(t.isVideoTexture&&function(e){var t=o.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){var s=t.image;if(null===s)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==s.complete)return void D(a,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}var R=ur(ur(ur({},wi,e.REPEAT),_i,e.CLAMP_TO_EDGE),Ei,e.MIRRORED_REPEAT),C=ur(ur(ur(ur(ur(ur({},Si,e.NEAREST),Ti,e.NEAREST_MIPMAP_NEAREST),ki,e.NEAREST_MIPMAP_LINEAR),Ii,e.LINEAR),Li,e.LINEAR_MIPMAP_NEAREST),Ci,e.LINEAR_MIPMAP_LINEAR);function P(n,a,o){if(o?(e.texParameteri(n,e.TEXTURE_WRAP_S,R[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,R[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,R[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,C[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,C[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS===_i&&a.wrapT===_i||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,T(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,T(a.minFilter)),a.minFilter!==Si&&a.minFilter!==Ii&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===Si)return;if(a.minFilter!==ki&&a.minFilter!==Ci)return;if(a.type===zi&&!1===t.has("OES_texture_float_linear"))return;if(!1===u&&a.type===Hi&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function O(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",M));var i=n.source,a=v.get(i);void 0===a&&(a={},v.set(i,a));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;var u=a[t.__cacheKey];void 0!==u&&(a[t.__cacheKey].usedTimes--,0===u.usedTimes&&A(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function D(t,i,o){var s=e.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(s=e.TEXTURE_2D_ARRAY),i.isData3DTexture&&(s=e.TEXTURE_3D);var l=O(t,i),c=i.source;n.bindTexture(s,t.__webglTexture,e.TEXTURE0+o);var f=r.get(c);if(c.version!==f.__version||!0===l){n.activeTexture(e.TEXTURE0+o),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);var d,p=function(e){return!u&&(e.wrapS!==_i||e.wrapT!==_i||e.minFilter!==Si&&e.minFilter!==Ii)}(i)&&!1===x(i.image),m=b(i.image,p,!1,h),v=x(m=H(i,m))||u,g=a.convert(i.format,i.colorSpace),y=a.convert(i.type),T=E(i.internalFormat,g,y,i.colorSpace);P(s,i,v);var M=i.mipmaps,k=u&&!0!==i.isVideoTexture,A=void 0===f.__version||!0===l,I=S(i,m,v);if(i.isDepthTexture)T=e.DEPTH_COMPONENT,u?T=i.type===zi?e.DEPTH_COMPONENT32F:i.type===Fi?e.DEPTH_COMPONENT24:i.type===Vi?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:i.type===zi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Ki&&T===e.DEPTH_COMPONENT&&i.type!==Bi&&i.type!==Fi&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Fi,y=a.convert(i.type)),i.format===Ji&&T===e.DEPTH_COMPONENT&&(T=e.DEPTH_STENCIL,i.type!==Vi&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Vi,y=a.convert(i.type))),A&&(k?n.texStorage2D(e.TEXTURE_2D,1,T,m.width,m.height):n.texImage2D(e.TEXTURE_2D,0,T,m.width,m.height,0,g,y,null));else if(i.isDataTexture)if(M.length>0&&v){k&&A&&n.texStorage2D(e.TEXTURE_2D,I,T,M[0].width,M[0].height);for(var L=0,R=M.length;L<R;L++)d=M[L],k?n.texSubImage2D(e.TEXTURE_2D,L,0,0,d.width,d.height,g,y,d.data):n.texImage2D(e.TEXTURE_2D,L,T,d.width,d.height,0,g,y,d.data);i.generateMipmaps=!1}else k?(A&&n.texStorage2D(e.TEXTURE_2D,I,T,m.width,m.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,m.height,g,y,m.data)):n.texImage2D(e.TEXTURE_2D,0,T,m.width,m.height,0,g,y,m.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){k&&A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,I,T,M[0].width,M[0].height,m.depth);for(var C=0,D=M.length;C<D;C++)d=M[C],i.format!==Wi?null!==g?k?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,C,0,0,0,d.width,d.height,m.depth,g,d.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,C,T,d.width,d.height,m.depth,0,d.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):k?n.texSubImage3D(e.TEXTURE_2D_ARRAY,C,0,0,0,d.width,d.height,m.depth,g,y,d.data):n.texImage3D(e.TEXTURE_2D_ARRAY,C,T,d.width,d.height,m.depth,0,g,y,d.data)}else{k&&A&&n.texStorage2D(e.TEXTURE_2D,I,T,M[0].width,M[0].height);for(var N=0,B=M.length;N<B;N++)d=M[N],i.format!==Wi?null!==g?k?n.compressedTexSubImage2D(e.TEXTURE_2D,N,0,0,d.width,d.height,g,d.data):n.compressedTexImage2D(e.TEXTURE_2D,N,T,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):k?n.texSubImage2D(e.TEXTURE_2D,N,0,0,d.width,d.height,g,y,d.data):n.texImage2D(e.TEXTURE_2D,N,T,d.width,d.height,0,g,y,d.data)}else if(i.isDataArrayTexture)k?(A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,I,T,m.width,m.height,m.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,g,y,m.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,T,m.width,m.height,m.depth,0,g,y,m.data);else if(i.isData3DTexture)k?(A&&n.texStorage3D(e.TEXTURE_3D,I,T,m.width,m.height,m.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,g,y,m.data)):n.texImage3D(e.TEXTURE_3D,0,T,m.width,m.height,m.depth,0,g,y,m.data);else if(i.isFramebufferTexture){if(A)if(k)n.texStorage2D(e.TEXTURE_2D,I,T,m.width,m.height);else for(var U=m.width,F=m.height,z=0;z<I;z++)n.texImage2D(e.TEXTURE_2D,z,T,U,F,0,g,y,null),U>>=1,F>>=1}else if(M.length>0&&v){k&&A&&n.texStorage2D(e.TEXTURE_2D,I,T,M[0].width,M[0].height);for(var G=0,j=M.length;G<j;G++)d=M[G],k?n.texSubImage2D(e.TEXTURE_2D,G,0,0,g,y,d):n.texImage2D(e.TEXTURE_2D,G,T,g,y,d);i.generateMipmaps=!1}else k?(A&&n.texStorage2D(e.TEXTURE_2D,I,T,m.width,m.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,g,y,m)):n.texImage2D(e.TEXTURE_2D,0,T,g,y,m);w(i,v)&&_(s),f.__version=c.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function N(t,i,o,s,u){var l=a.convert(o.format,o.colorSpace),c=a.convert(o.type),h=E(o.internalFormat,l,c,o.colorSpace);r.get(i).__hasExternalTextures||(u===e.TEXTURE_3D||u===e.TEXTURE_2D_ARRAY?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,h,i.width,i.height,0,l,c,null)),n.bindFramebuffer(e.FRAMEBUFFER,t),z(i)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,u,r.get(o).__webglTexture,0,F(i)):(u===e.TEXTURE_2D||u>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&u<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,s,u,r.get(o).__webglTexture,0),n.bindFramebuffer(e.FRAMEBUFFER,null)}function B(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){var i=e.DEPTH_COMPONENT16;if(r||z(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===zi?i=e.DEPTH_COMPONENT32F:o.type===Fi&&(i=e.DEPTH_COMPONENT24));var s=F(n);z(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,s,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,s,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){var u=F(n);r&&!1===z(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,e.DEPTH24_STENCIL8,n.width,n.height):z(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else for(var l=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],c=0;c<l.length;c++){var h=l[c],f=a.convert(h.format,h.colorSpace),p=a.convert(h.type),m=E(h.internalFormat,f,p,h.colorSpace),v=F(n);r&&!1===z(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,v,m,n.width,n.height):z(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,v,m,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,m,n.width,n.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function U(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),L(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture,o=F(i);if(i.depthTexture.format===Ki)z(i)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(i.depthTexture.format!==Ji)throw new Error("Unknown depthTexture format");z(i)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),B(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),B(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function F(e){return Math.min(f,e.samples)}function z(e){var n=r.get(e);return u&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(e,n){var r=e.colorSpace,i=e.format,a=e.type;return!0===e.isCompressedTexture||e.format===Lo||r!==eo&&r!==Qa&&(r===$a?!1===u?!0===t.has("EXT_sRGB")&&i===Wi?(e.format=Lo,e.minFilter=Ii,e.generateMipmaps=!1):n=ls.sRGBToLinear(n):i===Wi&&a===Oi||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=function(){var e=I;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),I+=1,e},this.resetTextureUnits=function(){I=0},this.setTexture2D=L,this.setTexture2DArray=function(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?D(a,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?D(a,t,i):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,i,o){if(6===i.image.length){var s=O(t,i),l=i.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);var h=r.get(l);if(l.version!==h.__version||!0===s){n.activeTexture(e.TEXTURE0+o),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);for(var f=i.isCompressedTexture||i.image[0].isCompressedTexture,d=i.image[0]&&i.image[0].isDataTexture,p=[],m=0;m<6;m++)p[m]=f||d?d?i.image[m].image:i.image[m]:b(i.image[m],!1,!0,c),p[m]=H(i,p[m]);var v,g=p[0],y=x(g)||u,T=a.convert(i.format,i.colorSpace),M=a.convert(i.type),k=E(i.internalFormat,T,M,i.colorSpace),A=u&&!0!==i.isVideoTexture,I=void 0===h.__version||!0===s,L=S(i,g,y);if(P(e.TEXTURE_CUBE_MAP,i,y),f){A&&I&&n.texStorage2D(e.TEXTURE_CUBE_MAP,L,k,g.width,g.height);for(var R=0;R<6;R++){v=p[R].mipmaps;for(var C=0;C<v.length;C++){var D=v[C];i.format!==Wi?null!==T?A?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+R,C,0,0,D.width,D.height,T,D.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+R,C,k,D.width,D.height,0,D.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+R,C,0,0,D.width,D.height,T,M,D.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+R,C,k,D.width,D.height,0,T,M,D.data)}}}else{v=i.mipmaps,A&&I&&(v.length>0&&L++,n.texStorage2D(e.TEXTURE_CUBE_MAP,L,k,p[0].width,p[0].height));for(var N=0;N<6;N++)if(d){A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+N,0,0,0,p[N].width,p[N].height,T,M,p[N].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+N,0,k,p[N].width,p[N].height,0,T,M,p[N].data);for(var B=0;B<v.length;B++){var U=v[B].image[N].image;A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+N,B+1,0,0,U.width,U.height,T,M,U.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+N,B+1,k,U.width,U.height,0,T,M,U.data)}}else{A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+N,0,0,0,T,M,p[N]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+N,0,k,T,M,p[N]);for(var F=0;F<v.length;F++){var z=v[F];A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+N,F+1,0,0,T,M,z.image[N]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+N,F+1,k,T,M,z.image[N])}}}w(i,y)&&_(e.TEXTURE_CUBE_MAP),h.__version=l.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}}(o,t,i):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+i)},this.rebindTextures=function(t,n,i){var a=r.get(t);void 0!==n&&N(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),void 0!==i&&U(t)},this.setupRenderTarget=function(t){var s=t.texture,l=r.get(t),c=r.get(s);t.addEventListener("dispose",k),!0!==t.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,d=x(t)||u;if(h){l.__webglFramebuffer=[];for(var p=0;p<6;p++)l.__webglFramebuffer[p]=e.createFramebuffer()}else{if(l.__webglFramebuffer=e.createFramebuffer(),f)if(i.drawBuffers)for(var m=t.texture,v=0,g=m.length;v<g;v++){var y=r.get(m[v]);void 0===y.__webglTexture&&(y.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&t.samples>0&&!1===z(t)){var b=f?s:[s];l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,l.__webglMultisampledFramebuffer);for(var S=0;S<b.length;S++){var T=b[S];l.__webglColorRenderbuffer[S]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,l.__webglColorRenderbuffer[S]);var M=a.convert(T.format,T.colorSpace),A=a.convert(T.type),I=E(T.internalFormat,M,A,T.colorSpace,!0===t.isXRRenderTarget),L=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,L,I,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+S,e.RENDERBUFFER,l.__webglColorRenderbuffer[S])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),B(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(h){n.bindTexture(e.TEXTURE_CUBE_MAP,c.__webglTexture),P(e.TEXTURE_CUBE_MAP,s,d);for(var R=0;R<6;R++)N(l.__webglFramebuffer[R],t,s,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+R);w(s,d)&&_(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(f){for(var C=t.texture,O=0,D=C.length;O<D;O++){var H=C[O],G=r.get(H);n.bindTexture(e.TEXTURE_2D,G.__webglTexture),P(e.TEXTURE_2D,H,d),N(l.__webglFramebuffer,t,H,e.COLOR_ATTACHMENT0+O,e.TEXTURE_2D),w(H,d)&&_(e.TEXTURE_2D)}n.unbindTexture()}else{var j=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(u?j=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(j,c.__webglTexture),P(j,s,d),N(l.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0,j),w(s,d)&&_(j),n.unbindTexture()}t.depthBuffer&&U(t)},this.updateRenderTargetMipmap=function(t){for(var i=x(t)||u,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=0,s=a.length;o<s;o++){var l=a[o];if(w(l,i)){var c=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,h=r.get(l).__webglTexture;n.bindTexture(c,h),_(c),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(u&&t.samples>0&&!1===z(t)){var i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=e.COLOR_BUFFER_BIT,l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,h=r.get(t),f=!0===t.isWebGLMultipleRenderTargets;if(f)for(var d=0;d<i.length;d++)n.bindFramebuffer(e.FRAMEBUFFER,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+d,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,h.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+d,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,h.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,h.__webglFramebuffer);for(var m=0;m<i.length;m++){l.push(e.COLOR_ATTACHMENT0+m),t.depthBuffer&&l.push(c);var v=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===v&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),f&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,h.__webglColorRenderbuffer[m]),!0===v&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),f){var g=r.get(i[m]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,g,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),p&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),f)for(var y=0;y<i.length;y++){n.bindFramebuffer(e.FRAMEBUFFER,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+y,e.RENDERBUFFER,h.__webglColorRenderbuffer[y]);var b=r.get(i[y]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,h.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+y,e.TEXTURE_2D,b,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,h.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=U,this.setupFrameBufferTexture=N,this.useMultisampledRTT=z}function Ef(e,t,n){var r=n.isWebGL2;return{convert:function(n){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qa;if(n===Oi)return e.UNSIGNED_BYTE;if(n===Gi)return e.UNSIGNED_SHORT_4_4_4_4;if(n===ji)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Di)return e.BYTE;if(n===Ni)return e.SHORT;if(n===Bi)return e.UNSIGNED_SHORT;if(n===Ui)return e.INT;if(n===Fi)return e.UNSIGNED_INT;if(n===zi)return e.FLOAT;if(n===Hi)return r?e.HALF_FLOAT:null!==(i=t.get("OES_texture_half_float"))?i.HALF_FLOAT_OES:null;if(n===qi)return e.ALPHA;if(n===Wi)return e.RGBA;if(n===Xi)return e.LUMINANCE;if(n===Yi)return e.LUMINANCE_ALPHA;if(n===Ki)return e.DEPTH_COMPONENT;if(n===Ji)return e.DEPTH_STENCIL;if(n===Lo)return null!==(i=t.get("EXT_sRGB"))?i.SRGB_ALPHA_EXT:null;if(n===Zi)return e.RED;if(n===Qi)return e.RED_INTEGER;if(n===$i)return e.RG;if(n===ea)return e.RG_INTEGER;if(n===ta)return e.RGBA_INTEGER;if(n===na||n===ra||n===ia||n===aa)if(a===$a){if(null===(i=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===na)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===ra)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===ia)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===aa)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(i=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===na)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ra)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ia)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===aa)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===oa||n===sa||n===ua||n===la){if(null===(i=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===oa)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===sa)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ua)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===la)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ca)return null!==(i=t.get("WEBGL_compressed_texture_etc1"))?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===ha||n===fa){if(null===(i=t.get("WEBGL_compressed_texture_etc")))return null;if(n===ha)return a===$a?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===fa)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===da||n===pa||n===ma||n===va||n===ga||n===ya||n===ba||n===xa||n===wa||n===_a||n===Ea||n===Sa||n===Ta||n===Ma){if(null===(i=t.get("WEBGL_compressed_texture_astc")))return null;if(n===da)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===pa)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===ma)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===va)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ga)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===ya)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===ba)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===xa)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===wa)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===_a)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Ea)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Sa)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Ta)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Ma)return a===$a?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===ka){if(null===(i=t.get("EXT_texture_compression_bptc")))return null;if(n===ka)return a===$a?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===Aa||n===Ia||n===La||n===Ra){if(null===(i=t.get("EXT_texture_compression_rgtc")))return null;if(n===ka)return i.COMPRESSED_RED_RGTC1_EXT;if(n===Ia)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===La)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Ra)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Vi?r?e.UNSIGNED_INT_24_8:null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var Sf=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return hr(this,t),(e=nr(this,t)).isArrayCamera=!0,e.cameras=n,e}return or(t,e),dr(t)}(jl),Tf=function(e){function t(){var e;return hr(this,t),(e=nr(this,t)).isGroup=!0,e.type="Group",e}return or(t,e),dr(t)}(Eu),Mf={type:"move"},kf=function(){function e(){hr(this,e),this._targetRay=null,this._grip=null,this._hand=null}return dr(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Tf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Tf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new _s,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new _s),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Tf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new _s,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new _s),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var t=this._hand;if(t){var n,r=Zn(e.hand.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this._getHandJoint(t,i)}}catch(e){r.e(e)}finally{r.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){a=!0;var l,c=Zn(e.hand.values());try{for(c.s();!(l=c.n()).done;){var h=l.value,f=t.getJointPose(h,n),d=this._getHandJoint(u,h);null!==f&&(d.matrix.fromArray(f.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.jointRadius=f.radius),d.visible=null!==f}}catch(e){c.e(e)}finally{c.f()}var p=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],v=p.position.distanceTo(m.position);u.inputState.pinching&&v>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&v<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Mf)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==a),this}},{key:"_getHandJoint",value:function(e,t){if(void 0===e.joints[t.jointName]){var n=new Tf;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}]),e}(),Af=function(e){function t(e,n,r,i,a,o,s,u,l,c){var h;if(hr(this,t),(c=void 0!==c?c:Ki)!==Ki&&c!==Ji)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===r&&c===Ki&&(r=Fi),void 0===r&&c===Ji&&(r=Vi),(h=nr(this,t,[null,i,a,o,s,u,c,r,l])).isDepthTexture=!0,h.image={width:e,height:n},h.magFilter=void 0!==s?s:Si,h.minFilter=void 0!==u?u:Si,h.flipY=!1,h.generateMipmaps=!1,h}return or(t,e),dr(t)}(ds),If=function(e){function t(e,n){var r;hr(this,t);var i=ar(r=nr(this,t)),a=null,o=1,s=null,u="local-floor",l=1,c=null,h=null,f=null,d=null,p=null,m=null,v=n.getContextAttributes(),g=null,y=null,b=[],x=[],w=new Set,_=new Map,E=new jl;E.layers.enable(1),E.viewport=new ps;var S=new jl;S.layers.enable(2),S.viewport=new ps;var T=[E,S],M=new Sf;M.layers.enable(1),M.layers.enable(2);var k=null,A=null;function I(e){var t=x.indexOf(e.inputSource);if(-1!==t){var n=b[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function L(){a.removeEventListener("select",I),a.removeEventListener("selectstart",I),a.removeEventListener("selectend",I),a.removeEventListener("squeeze",I),a.removeEventListener("squeezestart",I),a.removeEventListener("squeezeend",I),a.removeEventListener("end",L),a.removeEventListener("inputsourceschange",R);for(var t=0;t<b.length;t++){var n=x[t];null!==n&&(x[t]=null,b[t].disconnect(n))}k=null,A=null,e.setRenderTarget(g),p=null,d=null,f=null,a=null,y=null,N.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function R(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],r=x.indexOf(n);r>=0&&(x[r]=null,b[r].disconnect(n))}for(var i=0;i<e.added.length;i++){var a=e.added[i],o=x.indexOf(a);if(-1===o){for(var s=0;s<b.length;s++){if(s>=x.length){x.push(a),o=s;break}if(null===x[s]){x[s]=a,o=s;break}}if(-1===o)break}var u=b[o];u&&u.connect(a)}}r.cameraAutoUpdate=!0,r.enabled=!1,r.isPresenting=!1,r.getController=function(e){var t=b[e];return void 0===t&&(t=new kf,b[e]=t),t.getTargetRaySpace()},r.getControllerGrip=function(e){var t=b[e];return void 0===t&&(t=new kf,b[e]=t),t.getGripSpace()},r.getHand=function(e){var t=b[e];return void 0===t&&(t=new kf,b[e]=t),t.getHandSpace()},r.setFramebufferScaleFactor=function(e){o=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},r.setReferenceSpaceType=function(e){u=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},r.getReferenceSpace=function(){return c||s},r.setReferenceSpace=function(e){c=e},r.getBaseLayer=function(){return null!==d?d:p},r.getBinding=function(){return f},r.getFrame=function(){return m},r.getSession=function(){return a},r.setSession=function(){var t=Jn(lr().mark((function t(r){var h,m,b,x,w;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(a=r)){t.next=25;break}if(g=e.getRenderTarget(),a.addEventListener("select",I),a.addEventListener("selectstart",I),a.addEventListener("selectend",I),a.addEventListener("squeeze",I),a.addEventListener("squeezestart",I),a.addEventListener("squeezeend",I),a.addEventListener("end",L),a.addEventListener("inputsourceschange",R),!0===v.xrCompatible){t.next=14;break}return t.next=14,n.makeXRCompatible();case 14:return void 0===a.renderState.layers||!1===e.capabilities.isWebGL2?(h={antialias:void 0!==a.renderState.layers||v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:o},p=new XRWebGLLayer(a,n,h),a.updateRenderState({baseLayer:p}),y=new ms(p.framebufferWidth,p.framebufferHeight,{format:Wi,type:Oi,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})):(m=null,b=null,x=null,v.depth&&(x=v.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,m=v.stencil?Ji:Ki,b=v.stencil?Vi:Fi),w={colorFormat:n.RGBA8,depthFormat:x,scaleFactor:o},f=new XRWebGLBinding(a,n),d=f.createProjectionLayer(w),a.updateRenderState({layers:[d]}),y=new ms(d.textureWidth,d.textureHeight,{format:Wi,type:Oi,depthTexture:new Af(d.textureWidth,d.textureHeight,b,void 0,void 0,void 0,void 0,void 0,void 0,m),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0}),e.properties.get(y).__ignoreDepthValues=d.ignoreDepthValues),y.isXRRenderTarget=!0,this.setFoveation(l),c=null,t.next=20,a.requestReferenceSpace(u);case 20:s=t.sent,N.setContext(a),N.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getEnvironmentBlendMode=function(){if(null!==a)return a.environmentBlendMode};var C=new _s,P=new _s;function O(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}r.updateCamera=function(e){if(null!==a){M.near=S.near=E.near=e.near,M.far=S.far=E.far=e.far,k===M.near&&A===M.far||(a.updateRenderState({depthNear:M.near,depthFar:M.far}),k=M.near,A=M.far);var t=e.parent,n=M.cameras;O(M,t);for(var r=0;r<n.length;r++)O(n[r],t);2===n.length?function(e,t,n){C.setFromMatrixPosition(t.matrixWorld),P.setFromMatrixPosition(n.matrixWorld);var r=C.distanceTo(P),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],f=o*c,d=o*h,p=r/(-c+h),m=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var v=o+p,g=s+p,y=f-m,b=d+(r-m),x=u*s/g*v,w=l*s/g*v;e.projectionMatrix.makePerspective(y,b,x,w,v,g),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(M,E,S):M.projectionMatrix.copy(E.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0);for(var r=e.children,i=0,a=r.length;i<a;i++)r[i].updateMatrixWorld(!0);e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Do*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,M,t)}},r.getCamera=function(){return M},r.getFoveation=function(){if(null!==d||null!==p)return l},r.setFoveation=function(e){l=e,null!==d&&(d.fixedFoveation=e),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=e)},r.getPlanes=function(){return w};var D=null,N=new tc;return N.setAnimationLoop((function(t,n){if(h=n.getViewerPose(c||s),m=n,null!==h){var r=h.views;null!==p&&(e.setRenderTargetFramebuffer(y,p.framebuffer),e.setRenderTarget(y));var a=!1;r.length!==M.cameras.length&&(M.cameras.length=0,a=!0);for(var o=0;o<r.length;o++){var u=r[o],l=null;if(null!==p)l=p.getViewport(u);else{var v=f.getViewSubImage(d,u);l=v.viewport,0===o&&(e.setRenderTargetTextures(y,v.colorTexture,d.ignoreDepthValues?void 0:v.depthStencilTexture),e.setRenderTarget(y))}var g=T[o];void 0===g&&((g=new jl).layers.enable(o),g.viewport=new ps,T[o]=g),g.matrix.fromArray(u.transform.matrix),g.matrix.decompose(g.position,g.quaternion,g.scale),g.projectionMatrix.fromArray(u.projectionMatrix),g.projectionMatrixInverse.copy(g.projectionMatrix).invert(),g.viewport.set(l.x,l.y,l.width,l.height),0===o&&(M.matrix.copy(g.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),!0===a&&M.cameras.push(g)}}for(var E=0;E<b.length;E++){var S=x[E],k=b[E];null!==S&&void 0!==k&&k.update(S,n,c||s)}if(D&&D(t,n),n.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});var A,I=null,L=Zn(w);try{for(L.s();!(A=L.n()).done;){var R=A.value;n.detectedPlanes.has(R)||(null===I&&(I=[]),I.push(R))}}catch(e){L.e(e)}finally{L.f()}if(null!==I){var C,P=Zn(I);try{for(P.s();!(C=P.n()).done;){var O=C.value;w.delete(O),_.delete(O),i.dispatchEvent({type:"planeremoved",data:O})}}catch(e){P.e(e)}finally{P.f()}}var N,B=Zn(n.detectedPlanes);try{for(B.s();!(N=B.n()).done;){var U=N.value;if(w.has(U)){var F=_.get(U);U.lastChangedTime>F&&(_.set(U,U.lastChangedTime),i.dispatchEvent({type:"planechanged",data:U}))}else w.add(U),_.set(U,n.lastChangedTime),i.dispatchEvent({type:"planeadded",data:U})}}catch(e){B.e(e)}finally{B.f()}}m=null})),r.setAnimationLoop=function(e){D=e},r.dispose=function(){},r}return or(t,e),dr(t)}(Ro);function Lf(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===kr&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===kr&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);var a=t.get(i).envMap;if(a&&(r.envMap.value=a,r.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;var o=!0===e.useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*o,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Fl(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,o,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform)),e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform)),t.get(r).envMap&&(e.envMapIntensity.value=r.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===kr&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,s)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){var r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Rf(e,t,n,r){var i={},a={},o=[],s=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function u(e,t,n){var r=e.value;if(void 0===n[t]){if("number"==typeof r)n[t]=r;else{for(var i=Array.isArray(r)?r:[r],a=[],o=0;o<i.length;o++)a.push(i[o].clone());n[t]=a}return!0}if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else for(var s=Array.isArray(n[t])?n[t]:[n[t]],u=Array.isArray(r)?r:[r],l=0;l<s.length;l++){var c=s[l];if(!1===c.equals(u[l]))return c.copy(u[l]),!0}return!1}function l(e){var t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){var n=t.target;n.removeEventListener("dispose",c);var r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){var f=i[n.id];void 0===f&&(function(e){for(var t=e.uniforms,n=0,r=0,i=0,a=t.length;i<a;i++){for(var o=t[i],s={boundary:0,storage:0},u=Array.isArray(o.value)?o.value:[o.value],c=0,h=u.length;c<h;c++){var f=l(u[c]);s.boundary+=f.boundary,s.storage+=f.storage}o.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),o.__offset=n,i>0&&0!=(r=n%16)&&16-r-s.boundary<0&&(n+=16-r,o.__offset=n),n+=s.storage}(r=n%16)>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),f=function(t){var n=function(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=f,n.addEventListener("dispose",c));var d=h.program;r.updateUBOMapping(n,d);var p=t.render.frame;a[n.id]!==p&&(function(t){var n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(var o=0,s=r.length;o<s;o++){var c=r[o];if(!0===u(c,o,a)){for(var h=c.__offset,f=Array.isArray(c.value)?c.value:[c.value],d=0,p=0;p<f.length;p++){var m=f[p],v=l(m);"number"==typeof m?(c.__data[0]=m,e.bufferSubData(e.UNIFORM_BUFFER,h+d,c.__data)):m.isMatrix3?(c.__data[0]=m.elements[0],c.__data[1]=m.elements[1],c.__data[2]=m.elements[2],c.__data[3]=m.elements[0],c.__data[4]=m.elements[3],c.__data[5]=m.elements[4],c.__data[6]=m.elements[5],c.__data[7]=m.elements[0],c.__data[8]=m.elements[6],c.__data[9]=m.elements[7],c.__data[10]=m.elements[8],c.__data[11]=m.elements[0]):(m.toArray(c.__data,d),d+=v.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,h,c.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=p)},dispose:function(){for(var t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}var Cf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hr(this,e);var n,r=t.canvas,i=void 0===r?function(){var e=Qo("canvas");return e.style.display="block",e}():r,a=t.context,o=void 0===a?null:a,s=t.depth,u=void 0===s||s,l=t.stencil,c=void 0===l||l,h=t.alpha,f=void 0!==h&&h,d=t.antialias,p=void 0!==d&&d,m=t.premultipliedAlpha,v=void 0===m||m,g=t.preserveDrawingBuffer,y=void 0!==g&&g,b=t.powerPreference,x=void 0===b?"default":b,w=t.failIfMajorPerformanceCaveat,_=void 0!==w&&w;this.isWebGLRenderer=!0,n=null!==o?o.getContextAttributes().alpha:f;var E=null,S=null,T=[],M=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=$a,this.useLegacyLights=!0,this.toneMapping=li,this.toneMappingExposure=1;var k=this,A=!1,I=0,L=0,R=null,C=-1,P=null,O=new ps,D=new ps,N=null,B=i.width,U=i.height,F=1,z=null,H=null,G=new ps(0,0,B,U),j=new ps(0,0,B,U),V=!1,q=new ec,W=!1,X=!1,Y=null,K=new Qs,J=new _s,Z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Q(){return null===R?F:1}var $,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,he,fe,de,pe,me,ve,ge,ye,be,xe,we,_e,Ee=o;function Se(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=i.getContext(r,t);if(null!==a)return a}return null}try{var Te={alpha:!0,depth:u,stencil:c,antialias:p,premultipliedAlpha:v,preserveDrawingBuffer:y,powerPreference:x,failIfMajorPerformanceCaveat:_};if("setAttribute"in i&&i.setAttribute("data-engine","three.js r".concat(mr)),i.addEventListener("webglcontextlost",Ie,!1),i.addEventListener("webglcontextrestored",Le,!1),i.addEventListener("webglcontextcreationerror",Re,!1),null===Ee){var Me=["webgl2","webgl","experimental-webgl"];if(!0===k.isWebGL1Renderer&&Me.shift(),null===(Ee=Se(Me,Te)))throw Se(Me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ee.getShaderPrecisionFormat&&(Ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function ke(){$=new Ic(Ee),ee=new hc(Ee,$,t),$.init(ee),xe=new Ef(Ee,$,ee),te=new wf(Ee,$,ee),ne=new Cc(Ee),re=new sf,ie=new _f(Ee,$,te,re,ee,xe,ne),ae=new dc(k),oe=new Ac(k),se=new nc(Ee,ee),we=new lc(Ee,$,se,ee),ue=new Lc(Ee,se,ne,we),le=new Nc(Ee,ue,se,ne),ge=new Dc(Ee,ee,ie),pe=new fc(re),ce=new of(k,ae,oe,$,ee,we,pe),he=new Lf(k,re),fe=new hf,de=new gf($,ee),ve=new uc(k,ae,oe,te,le,n,v),me=new xf(k,le,ee),_e=new Rf(Ee,ne,ee,te),ye=new cc(Ee,$,ne,ee),be=new Rc(Ee,$,ne,ee),ne.programs=ce.programs,k.capabilities=ee,k.extensions=$,k.properties=re,k.renderLists=fe,k.shadowMap=me,k.state=te,k.info=ne}ke();var Ae=new If(k,Ee);function Ie(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function Le(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;var e=ne.autoReset,t=me.enabled,n=me.autoUpdate,r=me.needsUpdate,i=me.type;ke(),ne.autoReset=e,me.enabled=t,me.autoUpdate=n,me.needsUpdate=r,me.type=i}function Re(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ce(e){var t=e.target;t.removeEventListener("dispose",Ce),function(e){(function(e){var t=re.get(e).programs;void 0!==t&&(t.forEach((function(e){ce.releaseProgram(e)})),e.isShaderMaterial&&ce.releaseShaderCache(e))})(e),re.remove(e)}(t)}this.xr=Ae,this.getContext=function(){return Ee},this.getContextAttributes=function(){return Ee.getContextAttributes()},this.forceContextLoss=function(){var e=$.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=$.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(e){void 0!==e&&(F=e,this.setSize(B,U,!1))},this.getSize=function(e){return e.set(B,U)},this.setSize=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ae.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(B=e,U=t,i.width=Math.floor(e*F),i.height=Math.floor(t*F),!0===n&&(i.style.width=e+"px",i.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(B*F,U*F).floor()},this.setDrawingBufferSize=function(e,t,n){B=e,U=t,F=n,i.width=Math.floor(e*n),i.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(O)},this.getViewport=function(e){return e.copy(G)},this.setViewport=function(e,t,n,r){e.isVector4?G.set(e.x,e.y,e.z,e.w):G.set(e,t,n,r),te.viewport(O.copy(G).multiplyScalar(F).floor())},this.getScissor=function(e){return e.copy(j)},this.setScissor=function(e,t,n,r){e.isVector4?j.set(e.x,e.y,e.z,e.w):j.set(e,t,n,r),te.scissor(D.copy(j).multiplyScalar(F).floor())},this.getScissorTest=function(){return V},this.setScissorTest=function(e){te.setScissorTest(V=e)},this.setOpaqueSort=function(e){z=e},this.setTransparentSort=function(e){H=e},this.getClearColor=function(e){return e.copy(ve.getClearColor())},this.setClearColor=function(){ve.setClearColor.apply(ve,arguments)},this.getClearAlpha=function(){return ve.getClearAlpha()},this.setClearAlpha=function(){ve.setClearAlpha.apply(ve,arguments)},this.clear=function(){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(n|=Ee.COLOR_BUFFER_BIT),e&&(n|=Ee.DEPTH_BUFFER_BIT),t&&(n|=Ee.STENCIL_BUFFER_BIT),Ee.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",Ie,!1),i.removeEventListener("webglcontextrestored",Le,!1),i.removeEventListener("webglcontextcreationerror",Re,!1),fe.dispose(),de.dispose(),re.dispose(),ae.dispose(),oe.dispose(),le.dispose(),we.dispose(),_e.dispose(),ce.dispose(),Ae.dispose(),Ae.removeEventListener("sessionstart",Oe),Ae.removeEventListener("sessionend",De),Y&&(Y.dispose(),Y=null),Ne.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=Z);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=Z),ie.resetTextureUnits();var a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===R?k.outputColorSpace:!0===R.isXRRenderTarget?R.texture.colorSpace:eo,u=(r.isMeshStandardMaterial?oe:ae).get(r.envMap||o),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,d=!!n.morphAttributes.color,p=r.toneMapped?k.toneMapping:li,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,g=re.get(r),y=S.state.lights;if(!0===W&&(!0===X||e!==P)){var b=e===P&&r.id===C;pe.setState(r,e,b)}var x=!1;r.version===g.__version?g.needsLights&&g.lightsStateVersion!==y.state.version||g.outputColorSpace!==s||i.isInstancedMesh&&!1===g.instancing?x=!0:i.isInstancedMesh||!0!==g.instancing?i.isSkinnedMesh&&!1===g.skinning?x=!0:i.isSkinnedMesh||!0!==g.skinning?g.envMap!==u||!0===r.fog&&g.fog!==a?x=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===pe.numPlanes&&g.numIntersection===pe.numIntersection?(g.vertexAlphas!==l||g.vertexTangents!==c||g.morphTargets!==h||g.morphNormals!==f||g.morphColors!==d||g.toneMapping!==p||!0===ee.isWebGL2&&g.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,g.__version=r.version);var w=g.currentProgram;!0===x&&(w=He(r,t,i));var _=!1,E=!1,T=!1,M=w.getUniforms(),A=g.uniforms;if(te.useProgram(w.program)&&(_=!0,E=!0,T=!0),r.id!==C&&(C=r.id,E=!0),_||P!==e){if(M.setValue(Ee,"projectionMatrix",e.projectionMatrix),ee.logarithmicDepthBuffer&&M.setValue(Ee,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),P!==e&&(P=e,E=!0,T=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var I=M.map.cameraPosition;void 0!==I&&I.setValue(Ee,J.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&M.setValue(Ee,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&M.setValue(Ee,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){M.setOptional(Ee,i,"bindMatrix"),M.setOptional(Ee,i,"bindMatrixInverse");var L=i.skeleton;L&&(ee.floatVertexTextures?(null===L.boneTexture&&L.computeBoneTexture(),M.setValue(Ee,"boneTexture",L.boneTexture,ie),M.setValue(Ee,"boneTextureSize",L.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var O=n.morphAttributes;if((void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===ee.isWebGL2)&&ge.update(i,n,w),(E||g.receiveShadow!==i.receiveShadow)&&(g.receiveShadow=i.receiveShadow,M.setValue(Ee,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(A.envMap.value=u,A.flipEnvMap.value=u.isCubeTexture&&!1===u.isRenderTargetTexture?-1:1),E&&(M.setValue(Ee,"toneMappingExposure",k.toneMappingExposure),g.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(A,T),a&&!0===r.fog&&he.refreshFogUniforms(A,a),he.refreshMaterialUniforms(A,r,F,U,Y),zh.upload(Ee,g.uniformsList,A,ie)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(zh.upload(Ee,g.uniformsList,A,ie),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&M.setValue(Ee,"center",i.center),M.setValue(Ee,"modelViewMatrix",i.modelViewMatrix),M.setValue(Ee,"normalMatrix",i.normalMatrix),M.setValue(Ee,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial)for(var D=r.uniformsGroups,N=0,B=D.length;N<B;N++)if(ee.isWebGL2){var z=D[N];_e.update(z,w),_e.bind(z,w)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return w}(e,t,n,r,i);te.setMaterial(r,o);var u=n.index,l=1;!0===r.wireframe&&(u=ue.getWireframeAttribute(n),l=2);var c=n.drawRange,h=n.attributes.position,f=c.start*l,d=(c.start+c.count)*l;null!==a&&(f=Math.max(f,a.start*l),d=Math.min(d,(a.start+a.count)*l)),null!==u?(f=Math.max(f,0),d=Math.min(d,u.count)):null!=h&&(f=Math.max(f,0),d=Math.min(d,h.count));var p=d-f;if(!(p<0||p===1/0)){var m;we.setup(i,r,s,n,u);var v=ye;if(null!==u&&(m=se.get(u),(v=be).setIndex(m)),i.isMesh)!0===r.wireframe?(te.setLineWidth(r.wireframeLinewidth*Q()),v.setMode(Ee.LINES)):v.setMode(Ee.TRIANGLES);else if(i.isLine){var g=r.linewidth;void 0===g&&(g=1),te.setLineWidth(g*Q()),i.isLineSegments?v.setMode(Ee.LINES):i.isLineLoop?v.setMode(Ee.LINE_LOOP):v.setMode(Ee.LINE_STRIP)}else i.isPoints?v.setMode(Ee.POINTS):i.isSprite&&v.setMode(Ee.TRIANGLES);if(i.isInstancedMesh)v.renderInstances(f,p,i.count);else if(n.isInstancedBufferGeometry){var y=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,b=Math.min(n.instanceCount,y);v.renderInstances(f,p,b)}else v.render(f,p)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===Ar&&!1===e.forceSinglePass?(e.side=kr,e.needsUpdate=!0,He(e,t,n),e.side=Mr,e.needsUpdate=!0,He(e,t,n),e.side=Ar):He(e,t,n)}(S=de.get(e)).init(),M.push(S),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(S.pushLight(e),e.castShadow&&S.pushShadow(e))})),S.setupLights(k.useLegacyLights),e.traverse((function(t){var r=t.material;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++)n(r[i],e,t);else n(r,e,t)})),M.pop(),S=null};var Pe=null;function Oe(){Ne.stop()}function De(){Ne.start()}var Ne=new tc;function Be(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)S.pushLight(e),e.castShadow&&S.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||q.intersectsSprite(e)){r&&J.setFromMatrixPosition(e.matrixWorld).applyMatrix4(K);var i=le.update(e),a=e.material;a.visible&&E.push(e,i,a,n,J.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||q.intersectsObject(e))){e.isSkinnedMesh&&e.skeleton.frame!==ne.render.frame&&(e.skeleton.update(),e.skeleton.frame=ne.render.frame);var o=le.update(e),s=e.material;if(r&&(null===o.boundingSphere&&o.computeBoundingSphere(),J.copy(o.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(K)),Array.isArray(s))for(var u=o.groups,l=0,c=u.length;l<c;l++){var h=u[l],f=s[h.materialIndex];f&&f.visible&&E.push(e,o,f,n,J.z,h)}else s.visible&&E.push(e,o,s,n,J.z,null)}for(var d=e.children,p=0,m=d.length;p<m;p++)Be(d[p],t,n,r)}}function Ue(e,t,n,r){var i=e.opaque,a=e.transmissive,o=e.transparent;S.setupLightsView(n),!0===W&&pe.setGlobalState(k.clippingPlanes,n),a.length>0&&function(e,t,n,r){if(null===Y){var i=ee.isWebGL2;Y=new ms(1024,1024,{generateMipmaps:!0,type:$.has("EXT_color_buffer_half_float")?Hi:Oi,minFilter:Ci,samples:i&&!0===p?4:0})}var a=k.getRenderTarget();k.setRenderTarget(Y),k.clear();var o=k.toneMapping;k.toneMapping=li,Fe(e,n,r),ie.updateMultisampleRenderTarget(Y),ie.updateRenderTargetMipmap(Y);for(var s=!1,u=0,l=t.length;u<l;u++){var c=t[u],h=c.object,f=c.geometry,d=c.material,m=c.group;if(d.side===Ar&&h.layers.test(r.layers)){var v=d.side;d.side=kr,d.needsUpdate=!0,ze(h,n,r,f,d,m),d.side=v,d.needsUpdate=!0,s=!0}}!0===s&&(ie.updateMultisampleRenderTarget(Y),ie.updateRenderTargetMipmap(Y)),k.setRenderTarget(a),k.toneMapping=o}(i,a,t,n),r&&te.viewport(O.copy(r)),i.length>0&&Fe(i,t,n),a.length>0&&Fe(a,t,n),o.length>0&&Fe(o,t,n),te.buffers.depth.setTest(!0),te.buffers.depth.setMask(!0),te.buffers.color.setMask(!0),te.setPolygonOffset(!1)}function Fe(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&ze(s,t,n,u,l,c)}}function ze(e,t,n,r,i,a){e.onBeforeRender(k,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(k,t,n,r,e,a),!0===i.transparent&&i.side===Ar&&!1===i.forceSinglePass?(i.side=kr,i.needsUpdate=!0,k.renderBufferDirect(n,t,r,i,e,a),i.side=Mr,i.needsUpdate=!0,k.renderBufferDirect(n,t,r,i,e,a),i.side=Ar):k.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(k,t,n,r,i,a)}function He(e,t,n){!0!==t.isScene&&(t=Z);var r=re.get(e),i=S.state.lights,a=S.state.shadowsArray,o=i.state.version,s=ce.getParameters(e,i.state,a,t,n),u=ce.getProgramCacheKey(s),l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?oe:ae).get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",Ce),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Ge(e,s),c}else s.uniforms=ce.getUniforms(e),e.onBuild(n,s,k),e.onBeforeCompile(s,k),c=ce.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=pe.uniform),Ge(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);var f=c.getUniforms(),d=zh.seqWithValue(f.seq,h);return r.currentProgram=c,r.uniformsList=d,c}function Ge(e,t){var n=re.get(e);n.outputColorSpace=t.outputColorSpace,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ne.setAnimationLoop((function(e){Pe&&Pe(e)})),"undefined"!=typeof self&&Ne.setContext(self),this.setAnimationLoop=function(e){Pe=e,Ae.setAnimationLoop(e),null===e?Ne.stop():Ne.start()},Ae.addEventListener("sessionstart",Oe),Ae.addEventListener("sessionend",De),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==A){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Ae.enabled&&!0===Ae.isPresenting&&(!0===Ae.cameraAutoUpdate&&Ae.updateCamera(t),t=Ae.getCamera()),!0===e.isScene&&e.onBeforeRender(k,e,t,R),(S=de.get(e,M.length)).init(),M.push(S),K.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),q.setFromProjectionMatrix(K),X=this.localClippingEnabled,W=pe.init(this.clippingPlanes,X),(E=fe.get(e,T.length)).init(),T.push(E),Be(e,t,0,k.sortObjects),E.finish(),!0===k.sortObjects&&E.sort(z,H),!0===W&&pe.beginShadows();var n=S.state.shadowsArray;if(me.render(n,e,t),!0===W&&pe.endShadows(),!0===this.info.autoReset&&this.info.reset(),ve.render(E,e),S.setupLights(k.useLegacyLights),t.isArrayCamera)for(var r=t.cameras,i=0,a=r.length;i<a;i++){var o=r[i];Ue(E,e,o,o.viewport)}else Ue(E,e,t);null!==R&&(ie.updateMultisampleRenderTarget(R),ie.updateRenderTargetMipmap(R)),!0===e.isScene&&e.onAfterRender(k,e,t),we.resetDefaultState(),C=-1,P=null,M.pop(),S=M.length>0?M[M.length-1]:null,T.pop(),E=T.length>0?T[T.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(e,t,n){re.get(e.texture).__webglTexture=t,re.get(e.depthTexture).__webglTexture=n;var r=re.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===$.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=re.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;R=e,I=t,L=n;var r=!0,i=null,a=!1,o=!1;if(e){var s=re.get(e);void 0!==s.__useDefaultFramebuffer?(te.bindFramebuffer(Ee.FRAMEBUFFER,null),r=!1):void 0===s.__webglFramebuffer?ie.setupRenderTarget(e):s.__hasExternalTextures&&ie.rebindTextures(e,re.get(e.texture).__webglTexture,re.get(e.depthTexture).__webglTexture);var u=e.texture;(u.isData3DTexture||u.isDataArrayTexture||u.isCompressedArrayTexture)&&(o=!0);var l=re.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=l[t],a=!0):i=ee.isWebGL2&&e.samples>0&&!1===ie.useMultisampledRTT(e)?re.get(e).__webglMultisampledFramebuffer:l,O.copy(e.viewport),D.copy(e.scissor),N=e.scissorTest}else O.copy(G).multiplyScalar(F).floor(),D.copy(j).multiplyScalar(F).floor(),N=V;if(te.bindFramebuffer(Ee.FRAMEBUFFER,i)&&ee.drawBuffers&&r&&te.drawBuffers(e,i),te.viewport(O),te.scissor(D),te.setScissorTest(N),a){var c=re.get(e.texture);Ee.framebufferTexture2D(Ee.FRAMEBUFFER,Ee.COLOR_ATTACHMENT0,Ee.TEXTURE_CUBE_MAP_POSITIVE_X+t,c.__webglTexture,n)}else if(o){var h=re.get(e.texture),f=t||0;Ee.framebufferTextureLayer(Ee.FRAMEBUFFER,Ee.COLOR_ATTACHMENT0,h.__webglTexture,n||0,f)}C=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=re.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){te.bindFramebuffer(Ee.FRAMEBUFFER,s);try{var u=e.texture,l=u.format,c=u.type;if(l!==Wi&&xe.convert(l)!==Ee.getParameter(Ee.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===Hi&&($.has("EXT_color_buffer_half_float")||ee.isWebGL2&&$.has("EXT_color_buffer_float"));if(!(c===Oi||xe.convert(c)===Ee.getParameter(Ee.IMPLEMENTATION_COLOR_READ_TYPE)||c===zi&&(ee.isWebGL2||$.has("OES_texture_float")||$.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&Ee.readPixels(t,n,r,i,xe.convert(l),xe.convert(c),a)}finally{var f=null!==R?re.get(R).__webglFramebuffer:null;te.bindFramebuffer(Ee.FRAMEBUFFER,f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);ie.setTexture2D(t,0),Ee.copyTexSubImage2D(Ee.TEXTURE_2D,n,0,0,e.x,e.y,i,a),te.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=xe.convert(n.format),s=xe.convert(n.type);ie.setTexture2D(n,0),Ee.pixelStorei(Ee.UNPACK_FLIP_Y_WEBGL,n.flipY),Ee.pixelStorei(Ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),Ee.pixelStorei(Ee.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?Ee.texSubImage2D(Ee.TEXTURE_2D,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?Ee.compressedTexSubImage2D(Ee.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):Ee.texSubImage2D(Ee.TEXTURE_2D,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&Ee.generateMipmap(Ee.TEXTURE_2D),te.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(k.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,l=xe.convert(r.format),c=xe.convert(r.type);if(r.isData3DTexture)ie.setTexture3D(r,0),a=Ee.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ie.setTexture2DArray(r,0),a=Ee.TEXTURE_2D_ARRAY}Ee.pixelStorei(Ee.UNPACK_FLIP_Y_WEBGL,r.flipY),Ee.pixelStorei(Ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),Ee.pixelStorei(Ee.UNPACK_ALIGNMENT,r.unpackAlignment);var h=Ee.getParameter(Ee.UNPACK_ROW_LENGTH),f=Ee.getParameter(Ee.UNPACK_IMAGE_HEIGHT),d=Ee.getParameter(Ee.UNPACK_SKIP_PIXELS),p=Ee.getParameter(Ee.UNPACK_SKIP_ROWS),m=Ee.getParameter(Ee.UNPACK_SKIP_IMAGES),v=n.isCompressedTexture?n.mipmaps[0]:n.image;Ee.pixelStorei(Ee.UNPACK_ROW_LENGTH,v.width),Ee.pixelStorei(Ee.UNPACK_IMAGE_HEIGHT,v.height),Ee.pixelStorei(Ee.UNPACK_SKIP_PIXELS,e.min.x),Ee.pixelStorei(Ee.UNPACK_SKIP_ROWS,e.min.y),Ee.pixelStorei(Ee.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?Ee.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,v.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ee.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,v.data)):Ee.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,v),Ee.pixelStorei(Ee.UNPACK_ROW_LENGTH,h),Ee.pixelStorei(Ee.UNPACK_IMAGE_HEIGHT,f),Ee.pixelStorei(Ee.UNPACK_SKIP_PIXELS,d),Ee.pixelStorei(Ee.UNPACK_SKIP_ROWS,p),Ee.pixelStorei(Ee.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&Ee.generateMipmap(a),te.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?ie.setTextureCube(e,0):e.isData3DTexture?ie.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ie.setTexture2DArray(e,0):ie.setTexture2D(e,0),te.unbindTexture()},this.resetState=function(){I=0,L=0,R=null,te.reset(),we.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}return dr(e,[{key:"physicallyCorrectLights",get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}},{key:"outputEncoding",get:function(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===$a?Xa:Wa},set:function(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Xa?$a:eo}}]),e}(),Pf=function(e){function t(){return hr(this,t),nr(this,t,arguments)}return or(t,e),dr(t)}(Cf);Pf.prototype.isWebGL1Renderer=!0;var Of,Df=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;hr(this,e),this.isFogExp2=!0,this.name="",this.color=new Gu(t),this.density=n}return dr(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}(),Nf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;hr(this,e),this.isFog=!0,this.name="",this.color=new Gu(t),this.near=n,this.far=r}return dr(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),Bf=function(e){function t(){var e;return hr(this,t),(e=nr(this,t)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:ar(e)})),e}return or(t,e),dr(t,[{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var n=er(ir(t.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(n.object.backgroundIntensity=this.backgroundIntensity),n}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),t}(Eu),Uf=function(){function e(t,n){hr(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=bo,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=No()}return dr(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=No()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=No()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),Ff=new _s,zf=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];hr(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=i}return dr(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Ff.fromBufferAttribute(this,t),Ff.applyMatrix4(e),this.setXYZ(t,Ff.x,Ff.y,Ff.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Ff.fromBufferAttribute(this,t),Ff.applyNormalMatrix(e),this.setXYZ(t,Ff.x,Ff.y,Ff.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Ff.fromBufferAttribute(this,t),Ff.transformDirection(e),this.setXYZ(t,Ff.x,Ff.y,Ff.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=Vo(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=jo(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=jo(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=jo(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=jo(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vo(t,this.array),n=Vo(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vo(t,this.array),n=Vo(n,this.array),r=Vo(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vo(t,this.array),n=Vo(n,this.array),r=Vo(r,this.array),i=Vo(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new Qu(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),Hf=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isSpriteMaterial=!0,n.type="SpriteMaterial",n.color=new Gu(16777215),n.map=null,n.alphaMap=null,n.rotation=0,n.sizeAttenuation=!0,n.transparent=!0,n.fog=!0,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),t}(Bu),Gf=new _s,jf=new _s,Vf=new _s,qf=new Wo,Wf=new Wo,Xf=new Qs,Yf=new _s,Kf=new _s,Jf=new _s,Zf=new Wo,Qf=new Wo,$f=new Wo,ed=function(e){function t(e){var n;if(hr(this,t),(n=nr(this,t)).isSprite=!0,n.type="Sprite",void 0===Of){Of=new vl;var r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Uf(r,5);Of.setIndex([0,1,2,0,2,3]),Of.setAttribute("position",new zf(i,3,0,!1)),Of.setAttribute("uv",new zf(i,2,3,!1))}return n.geometry=Of,n.material=void 0!==e?e:new Hf,n.center=new Wo(.5,.5),n}return or(t,e),dr(t,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),jf.setFromMatrixScale(this.matrixWorld),Xf.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Vf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&jf.multiplyScalar(-Vf.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;td(Yf.set(-.5,-.5,0),Vf,a,jf,n,r),td(Kf.set(.5,-.5,0),Vf,a,jf,n,r),td(Jf.set(.5,.5,0),Vf,a,jf,n,r),Zf.set(0,0),Qf.set(1,0),$f.set(1,1);var o=e.ray.intersectTriangle(Yf,Kf,Jf,!1,Gf);if(null!==o||(td(Kf.set(-.5,.5,0),Vf,a,jf,n,r),Qf.set(0,1),null!==(o=e.ray.intersectTriangle(Yf,Jf,Kf,!1,Gf)))){var s=e.ray.origin.distanceTo(Gf);s<e.near||s>e.far||t.push({distance:s,point:Gf.clone(),uv:Du.getInterpolation(Gf,Yf,Kf,Jf,Zf,Qf,$f,new Wo),face:null,object:this})}}},{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),t}(Eu);function td(e,t,n,r,i,a){qf.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Wf.x=a*qf.x-i*qf.y,Wf.y=i*qf.x+a*qf.y):Wf.copy(qf),e.copy(t),e.x+=Wf.x,e.y+=Wf.y,e.applyMatrix4(Xf)}var nd=new _s,rd=new _s,id=function(e){function t(){var e;return hr(this,t),(e=nr(this,t))._currentLevel=0,e.type="LOD",Object.defineProperties(ar(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return or(t,e),dr(t,[{key:"copy",value:function(e){er(ir(t.prototype),"copy",this).call(this,e,!1);for(var n=e.levels,r=0,i=n.length;r<i;r++){var a=n[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);var r,i=this.levels;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r;n++){var i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){nd.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(nd);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){nd.setFromMatrixPosition(e.matrixWorld),rd.setFromMatrixPosition(this.matrixWorld);var n,r,i=nd.distanceTo(rd)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r;n++){var a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),!(i>=a))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var n=er(ir(t.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(n.object.autoUpdate=!1),n.object.levels=[];for(var r=this.levels,i=0,a=r.length;i<a;i++){var o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}]),t}(Eu),ad=new _s,od=new ps,sd=new ps,ud=new _s,ld=new Qs,cd=new _s,hd=new js,fd=function(e){function t(e,n){var r;return hr(this,t),(r=nr(this,t,[e,n])).isSkinnedMesh=!0,r.type="SkinnedMesh",r.bindMode="attached",r.bindMatrix=new Qs,r.bindMatrixInverse=new Qs,r.boundingBox=null,r.boundingSphere=null,r}return or(t,e),dr(t,[{key:"computeBoundingBox",value:function(){var e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Ts),this.boundingBox.makeEmpty();for(var t=e.getAttribute("position"),n=0;n<t.count;n++)cd.fromBufferAttribute(t,n),this.applyBoneTransform(n,cd),this.boundingBox.expandByPoint(cd)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new js),this.boundingSphere.makeEmpty();for(var t=e.getAttribute("position"),n=0;n<t.count;n++)cd.fromBufferAttribute(t,n),this.applyBoneTransform(n,cd),this.boundingSphere.expandByPoint(cd)}},{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"raycast",value:function(e,t){null===this.boundingSphere&&this.computeBoundingSphere(),hd.copy(this.boundingSphere),hd.applyMatrix4(this.matrixWorld),!1!==e.ray.intersectsSphere(hd)&&this._computeIntersections(e,t)}},{key:"getVertexPosition",value:function(e,n){return er(ir(t.prototype),"getVertexPosition",this).call(this,e,n),this.applyBoneTransform(e,n),n}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new ps,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){er(ir(t.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"applyBoneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;od.fromBufferAttribute(r.attributes.skinIndex,e),sd.fromBufferAttribute(r.attributes.skinWeight,e),ad.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=sd.getComponent(i);if(0!==a){var o=od.getComponent(i);ld.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(ud.copy(ad).applyMatrix4(ld),a)}}return t.applyMatrix4(this.bindMatrixInverse)}},{key:"boneTransform",value:function(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}]),t}(Ol),dd=function(e){function t(){var e;return hr(this,t),(e=nr(this,t)).isBone=!0,e.type="Bone",e}return or(t,e),dr(t)}(Eu),pd=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Si,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Si,f=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0;return hr(this,t),(e=nr(this,t,[null,s,u,l,c,h,a,o,f,d])).isDataTexture=!0,e.image={data:n,width:r,height:i},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return or(t,e),dr(t)}(ds),md=new Qs,vd=new Qs,gd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];hr(this,e),this.uuid=No(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return dr(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Qs)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new Qs;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:vd;md.multiplyMatrices(o,t[i]),md.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=Ho(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new pd(t,e,e,Wi,zi);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new dd),this.bones.push(a),this.boneInverses.push((new Qs).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var a=t[r];e.bones.push(a.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),yd=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return hr(this,t),(i=nr(this,t,[e,n,r])).isInstancedBufferAttribute=!0,i.meshPerAttribute=a,i}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),t}(Qu),bd=new Qs,xd=new Qs,wd=[],_d=new Ts,Ed=new Qs,Sd=new Ol,Td=new js,Md=function(e){function t(e,n,r){var i;hr(this,t),(i=nr(this,t,[e,n])).isInstancedMesh=!0,i.instanceMatrix=new yd(new Float32Array(16*r),16),i.instanceColor=null,i.count=r,i.boundingBox=null,i.boundingSphere=null;for(var a=0;a<r;a++)i.setMatrixAt(a,Ed);return i}return or(t,e),dr(t,[{key:"computeBoundingBox",value:function(){var e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Ts),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(var n=0;n<t;n++)this.getMatrixAt(n,bd),_d.copy(e.boundingBox).applyMatrix4(bd),this.boundingBox.union(_d)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new js),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(var n=0;n<t;n++)this.getMatrixAt(n,bd),Td.copy(e.boundingSphere).applyMatrix4(bd),this.boundingSphere.union(Td)}},{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(Sd.geometry=this.geometry,Sd.material=this.material,void 0!==Sd.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Td.copy(this.boundingSphere),Td.applyMatrix4(n),!1!==e.ray.intersectsSphere(Td)))for(var i=0;i<r;i++){this.getMatrixAt(i,bd),xd.multiplyMatrices(n,bd),Sd.matrixWorld=xd,Sd.raycast(e,wd);for(var a=0,o=wd.length;a<o;a++){var s=wd[a];s.instanceId=i,s.object=this,t.push(s)}wd.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new yd(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),t}(Ol),kd=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isLineBasicMaterial=!0,n.type="LineBasicMaterial",n.color=new Gu(16777215),n.map=null,n.linewidth=1,n.linecap="round",n.linejoin="round",n.fog=!0,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),t}(Bu),Ad=new _s,Id=new _s,Ld=new Qs,Rd=new Zs,Cd=new js,Pd=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kd;return hr(this,t),(e=nr(this,t)).isLine=!0,e.type="Line",e.geometry=n,e.material=r,e.updateMorphTargets(),e}return or(t,e),dr(t,[{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)Ad.fromBufferAttribute(t,r-1),Id.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Ad.distanceTo(Id);e.setAttribute("lineDistance",new sl(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Cd.copy(n.boundingSphere),Cd.applyMatrix4(r),Cd.radius+=i,!1!==e.ray.intersectsSphere(Cd)){Ld.copy(r).invert(),Rd.copy(e.ray).applyMatrix4(Ld);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=new _s,l=new _s,c=new _s,h=new _s,f=this.isLineSegments?2:1,d=n.index,p=n.attributes.position;if(null!==d)for(var m=Math.max(0,a.start),v=Math.min(d.count,a.start+a.count)-1;m<v;m+=f){var g=d.getX(m),y=d.getX(m+1);if(u.fromBufferAttribute(p,g),l.fromBufferAttribute(p,y),!(Rd.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(var x=Math.max(0,a.start),w=Math.min(p.count,a.start+a.count)-1;x<w;x+=f)if(u.fromBufferAttribute(p,x),l.fromBufferAttribute(p,x+1),!(Rd.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(h);_<e.near||_>e.far||t.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),t}(Eu),Od=new _s,Dd=new _s,Nd=function(e){function t(e,n){var r;return hr(this,t),(r=nr(this,t,[e,n])).isLineSegments=!0,r.type="LineSegments",r}return or(t,e),dr(t,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)Od.fromBufferAttribute(t,r),Dd.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Od.distanceTo(Dd);e.setAttribute("lineDistance",new sl(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),t}(Pd),Bd=function(e){function t(e,n){var r;return hr(this,t),(r=nr(this,t,[e,n])).isLineLoop=!0,r.type="LineLoop",r}return or(t,e),dr(t)}(Pd),Ud=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isPointsMaterial=!0,n.type="PointsMaterial",n.color=new Gu(16777215),n.map=null,n.alphaMap=null,n.size=1,n.sizeAttenuation=!0,n.fog=!0,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),t}(Bu),Fd=new Qs,zd=new Zs,Hd=new js,Gd=new _s,jd=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ud;return hr(this,t),(e=nr(this,t)).isPoints=!0,e.type="Points",e.geometry=n,e.material=r,e.updateMorphTargets(),e}return or(t,e),dr(t,[{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Hd.copy(n.boundingSphere),Hd.applyMatrix4(r),Hd.radius+=i,!1!==e.ray.intersectsSphere(Hd)){Fd.copy(r).invert(),zd.copy(e.ray).applyMatrix4(Fd);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,a.start),h=Math.min(u.count,a.start+a.count);c<h;c++){var f=u.getX(c);Gd.fromBufferAttribute(l,f),Vd(Gd,f,s,r,e,t,this)}else for(var d=Math.max(0,a.start),p=Math.min(l.count,a.start+a.count);d<p;d++)Gd.fromBufferAttribute(l,d),Vd(Gd,d,s,r,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),t}(Eu);function Vd(e,t,n,r,i,a,o){var s=zd.distanceSqToPoint(e);if(s<n){var u=new _s;zd.closestPointToPoint(e,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:o})}}var qd=function(e){function t(e,n,r,i,a,o,s,u,l){var c;hr(this,t),(c=nr(this,t,[e,n,r,i,a,o,s,u,l])).isVideoTexture=!0,c.minFilter=void 0!==o?o:Ii,c.magFilter=void 0!==a?a:Ii,c.generateMipmaps=!1;var h=ar(c);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){h.needsUpdate=!0,e.requestVideoFrameCallback(t)})),c}return or(t,e),dr(t,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),t}(ds),Wd=function(e){function t(e,n,r){var i;return hr(this,t),(i=nr(this,t,[{width:e,height:n}])).isFramebufferTexture=!0,i.format=r,i.magFilter=Si,i.minFilter=Si,i.generateMipmaps=!1,i.needsUpdate=!0,i}return or(t,e),dr(t)}(ds),Xd=function(e){function t(e,n,r,i,a,o,s,u,l,c,h,f){var d;return hr(this,t),(d=nr(this,t,[null,o,s,u,l,c,i,a,h,f])).isCompressedTexture=!0,d.image={width:n,height:r},d.mipmaps=e,d.flipY=!1,d.generateMipmaps=!1,d}return or(t,e),dr(t)}(ds),Yd=function(e){function t(e,n,r,i,a,o){var s;return hr(this,t),(s=nr(this,t,[e,n,r,a,o])).isCompressedArrayTexture=!0,s.image.depth=i,s.wrapR=_i,s}return or(t,e),dr(t)}(Xd),Kd=function(e){function t(e,n,r,i,a,o,s,u,l){var c;return hr(this,t),(c=nr(this,t,[e,n,r,i,a,o,s,u,l])).isCanvasTexture=!0,c.needsUpdate=!0,c}return or(t,e),dr(t)}(ds),Jd=function(){function e(){hr(this,e),this.type="Curve",this.arcLengthDivisions=200}return dr(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new Wo:new _s);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new _s,r=[],i=[],a=[],o=new _s,s=new Qs,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new _s)}i[0]=new _s,a[0]=new _s;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),d<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var m=Math.acos(Bo(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(o,m))}a[p].crossVectors(r[p],i[p])}if(!0===t){var v=Math.acos(Bo(i[0].dot(i[e]),-1,1));v/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(v=-v);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],v*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),Zd=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return hr(this,t),(e=nr(this,t)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=n,e.aY=r,e.xRadius=i,e.yRadius=a,e.aStartAngle=o,e.aEndAngle=s,e.aClockwise=u,e.aRotation=l,e}return or(t,e),dr(t,[{key:"getPoint",value:function(e,t){for(var n=t||new Wo,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*l-f*c+this.aX,u=h*c+f*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return er(ir(t.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),t}(Jd),Qd=function(e){function t(e,n,r,i,a,o){var s;return hr(this,t),(s=nr(this,t,[e,n,r,r,i,a,o])).isArcCurve=!0,s.type="ArcCurve",s}return or(t,e),dr(t)}(Zd);function $d(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var u=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,u*=o,l*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}var ep=new _s,tp=new $d,np=new $d,rp=new $d,ip=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return hr(this,t),(e=nr(this,t)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=n,e.closed=r,e.curveType=i,e.tension=a,e}return or(t,e),dr(t,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s,i=this.points,a=i.length,o=(a-(this.closed?0:1))*e,s=Math.floor(o),u=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:0===u&&s===a-1&&(s=a-2,u=1),this.closed||s>0?t=i[(s-1)%a]:(ep.subVectors(i[0],i[1]).add(i[0]),t=ep);var l=i[s%a],c=i[(s+1)%a];if(this.closed||s+2<a?n=i[(s+2)%a]:(ep.subVectors(i[a-1],i[a-2]).add(i[a-1]),n=ep),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,f=Math.pow(t.distanceToSquared(l),h),d=Math.pow(l.distanceToSquared(c),h),p=Math.pow(c.distanceToSquared(n),h);d<1e-4&&(d=1),f<1e-4&&(f=d),p<1e-4&&(p=d),tp.initNonuniformCatmullRom(t.x,l.x,c.x,n.x,f,d,p),np.initNonuniformCatmullRom(t.y,l.y,c.y,n.y,f,d,p),rp.initNonuniformCatmullRom(t.z,l.z,c.z,n.z,f,d,p)}else"catmullrom"===this.curveType&&(tp.initCatmullRom(t.x,l.x,c.x,n.x,this.tension),np.initCatmullRom(t.y,l.y,c.y,n.y,this.tension),rp.initCatmullRom(t.z,l.z,c.z,n.z,this.tension));return r.set(tp.calc(u),np.calc(u),rp.calc(u)),r}},{key:"copy",value:function(e){er(ir(t.prototype),"copy",this).call(this,e),this.points=[];for(var n=0,r=e.points.length;n<r;n++){var i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);e.points=[];for(var n=0,r=this.points.length;n<r;n++){var i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){er(ir(t.prototype),"fromJSON",this).call(this,e),this.points=[];for(var n=0,r=e.points.length;n<r;n++){var i=e.points[n];this.points.push((new _s).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),t}(Jd);function ap(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function op(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function sp(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}var up=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wo,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wo,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wo,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Wo;return hr(this,t),(e=nr(this,t)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=n,e.v1=r,e.v2=i,e.v3=a,e}return or(t,e),dr(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wo,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(sp(e,n.x,r.x,i.x,a.x),sp(e,n.y,r.y,i.y,a.y)),t}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return er(ir(t.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),t}(Jd),lp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _s,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _s,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new _s;return hr(this,t),(e=nr(this,t)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=n,e.v1=r,e.v2=i,e.v3=a,e}return or(t,e),dr(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(sp(e,n.x,r.x,i.x,a.x),sp(e,n.y,r.y,i.y,a.y),sp(e,n.z,r.z,i.z,a.z)),t}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return er(ir(t.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),t}(Jd),cp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wo,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wo;return hr(this,t),(e=nr(this,t)).isLineCurve=!0,e.type="LineCurve",e.v1=n,e.v2=r,e}return or(t,e),dr(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wo;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wo).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return er(ir(t.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),t}(Jd),hp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _s,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s;return hr(this,t),(e=nr(this,t)).isLineCurve3=!0,e.type="LineCurve3",e.v1=n,e.v2=r,e}return or(t,e),dr(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return er(ir(t.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),t}(Jd),fp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wo,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wo,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wo;return hr(this,t),(e=nr(this,t)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=n,e.v1=r,e.v2=i,e}return or(t,e),dr(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wo,n=this.v0,r=this.v1,i=this.v2;return t.set(op(e,n.x,r.x,i.x),op(e,n.y,r.y,i.y)),t}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return er(ir(t.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),t}(Jd),dp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _s,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _s;return hr(this,t),(e=nr(this,t)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=n,e.v1=r,e.v2=i,e}return or(t,e),dr(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s,n=this.v0,r=this.v1,i=this.v2;return t.set(op(e,n.x,r.x,i.x),op(e,n.y,r.y,i.y),op(e,n.z,r.z,i.z)),t}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return er(ir(t.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),t}(Jd),pp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return hr(this,t),(e=nr(this,t)).isSplineCurve=!0,e.type="SplineCurve",e.points=n,e}return or(t,e),dr(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wo,n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,o=n[0===i?i:i-1],s=n[i],u=n[i>n.length-2?n.length-1:i+1],l=n[i>n.length-3?n.length-1:i+2];return t.set(ap(a,o.x,s.x,u.x,l.x),ap(a,o.y,s.y,u.y,l.y)),t}},{key:"copy",value:function(e){er(ir(t.prototype),"copy",this).call(this,e),this.points=[];for(var n=0,r=e.points.length;n<r;n++){var i=e.points[n];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);e.points=[];for(var n=0,r=this.points.length;n<r;n++){var i=this.points[n];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){er(ir(t.prototype),"fromJSON",this).call(this,e),this.points=[];for(var n=0,r=e.points.length;n<r;n++){var i=e.points[n];this.points.push((new Wo).fromArray(i))}return this}}]),t}(Jd),mp=Object.freeze({__proto__:null,ArcCurve:Qd,CatmullRomCurve3:ip,CubicBezierCurve:up,CubicBezierCurve3:lp,EllipseCurve:Zd,LineCurve:cp,LineCurve3:hp,QuadraticBezierCurve:fp,QuadraticBezierCurve3:dp,SplineCurve:pp}),vp=function(e){function t(){var e;return hr(this,t),(e=nr(this,t)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return or(t,e),dr(t,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new cp(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var a=r[i]-n,o=this.curves[i],s=o.getLength(),u=0===s?0:1-a/s;return o.getPointAt(u,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){er(ir(t.prototype),"copy",this).call(this,e),this.curves=[];for(var n=0,r=e.curves.length;n<r;n++){var i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var n=0,r=this.curves.length;n<r;n++){var i=this.curves[n];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){er(ir(t.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var n=0,r=e.curves.length;n<r;n++){var i=e.curves[n];this.curves.push((new mp[i.type]).fromJSON(i))}return this}}]),t}(Jd),gp=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).type="Path",n.currentPoint=new Wo,e&&n.setFromPoints(e),n}return or(t,e),dr(t,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new cp(this.currentPoint.clone(),new Wo(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new fp(this.currentPoint.clone(),new Wo(e,t),new Wo(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var o=new up(this.currentPoint.clone(),new Wo(e,t),new Wo(n,r),new Wo(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new pp(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,a,o,s),this}},{key:"absellipse",value:function(e,t,n,r,i,a,o,s){var u=new Zd(e,t,n,r,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return er(ir(t.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),t}(vp),yp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Wo(0,-.5),new Wo(.5,0),new Wo(0,.5)],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;hr(this,t),(e=nr(this,t)).type="LatheGeometry",e.parameters={points:n,segments:r,phiStart:i,phiLength:a},r=Math.floor(r),a=Bo(a,0,2*Math.PI);for(var o=[],s=[],u=[],l=[],c=[],h=1/r,f=new _s,d=new Wo,p=new _s,m=new _s,v=new _s,g=0,y=0,b=0;b<=n.length-1;b++)switch(b){case 0:g=n[b+1].x-n[b].x,y=n[b+1].y-n[b].y,p.x=1*y,p.y=-g,p.z=0*y,v.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case n.length-1:l.push(v.x,v.y,v.z);break;default:g=n[b+1].x-n[b].x,y=n[b+1].y-n[b].y,p.x=1*y,p.y=-g,p.z=0*y,m.copy(p),p.x+=v.x,p.y+=v.y,p.z+=v.z,p.normalize(),l.push(p.x,p.y,p.z),v.copy(m)}for(var x=0;x<=r;x++)for(var w=i+x*h*a,_=Math.sin(w),E=Math.cos(w),S=0;S<=n.length-1;S++){f.x=n[S].x*_,f.y=n[S].y,f.z=n[S].x*E,s.push(f.x,f.y,f.z),d.x=x/r,d.y=S/(n.length-1),u.push(d.x,d.y);var T=l[3*S+0]*_,M=l[3*S+1],k=l[3*S+0]*E;c.push(T,M,k)}for(var A=0;A<r;A++)for(var I=0;I<n.length-1;I++){var L=I+A*n.length,R=L,C=L+n.length,P=L+n.length+1,O=L+1;o.push(R,C,O),o.push(P,O,C)}return e.setIndex(o),e.setAttribute("position",new sl(s,3)),e.setAttribute("uv",new sl(u,2)),e.setAttribute("normal",new sl(c,3)),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.points,e.segments,e.phiStart,e.phiLength)}}]),t}(vl),bp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;hr(this,t);var o=new gp;return o.absarc(0,-r/2,n,1.5*Math.PI,0),o.absarc(0,r/2,n,0,.5*Math.PI),(e=nr(this,t,[o.getPoints(i),a])).type="CapsuleGeometry",e.parameters={radius:n,height:r,capSegments:i,radialSegments:a},e}return or(t,e),dr(t,null,[{key:"fromJSON",value:function(e){return new t(e.radius,e.length,e.capSegments,e.radialSegments)}}]),t}(yp),xp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;hr(this,t),(e=nr(this,t)).type="CircleGeometry",e.parameters={radius:n,segments:r,thetaStart:i,thetaLength:a},r=Math.max(3,r);var o=[],s=[],u=[],l=[],c=new _s,h=new Wo;s.push(0,0,0),u.push(0,0,1),l.push(.5,.5);for(var f=0,d=3;f<=r;f++,d+=3){var p=i+f/r*a;c.x=n*Math.cos(p),c.y=n*Math.sin(p),s.push(c.x,c.y,c.z),u.push(0,0,1),h.x=(s[d]/n+1)/2,h.y=(s[d+1]/n+1)/2,l.push(h.x,h.y)}for(var m=1;m<=r;m++)o.push(m,m+1,0);return e.setIndex(o),e.setAttribute("position",new sl(s,3)),e.setAttribute("normal",new sl(u,3)),e.setAttribute("uv",new sl(l,2)),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),t}(vl),wp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;hr(this,t),(e=nr(this,t)).type="CylinderGeometry",e.parameters={radiusTop:n,radiusBottom:r,height:i,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:u,thetaLength:l};var c=ar(e);a=Math.floor(a),o=Math.floor(o);var h=[],f=[],d=[],p=[],m=0,v=[],g=i/2,y=0;function b(e){for(var t=m,i=new Wo,o=new _s,s=0,v=!0===e?n:r,b=!0===e?1:-1,x=1;x<=a;x++)f.push(0,g*b,0),d.push(0,b,0),p.push(.5,.5),m++;for(var w=m,_=0;_<=a;_++){var E=_/a*l+u,S=Math.cos(E),T=Math.sin(E);o.x=v*T,o.y=g*b,o.z=v*S,f.push(o.x,o.y,o.z),d.push(0,b,0),i.x=.5*S+.5,i.y=.5*T*b+.5,p.push(i.x,i.y),m++}for(var M=0;M<a;M++){var k=t+M,A=w+M;!0===e?h.push(A,A+1,k):h.push(A+1,A,k),s+=3}c.addGroup(y,s,!0===e?1:2),y+=s}return function(){for(var e=new _s,t=new _s,s=0,b=(r-n)/i,x=0;x<=o;x++){for(var w=[],_=x/o,E=_*(r-n)+n,S=0;S<=a;S++){var T=S/a,M=T*l+u,k=Math.sin(M),A=Math.cos(M);t.x=E*k,t.y=-_*i+g,t.z=E*A,f.push(t.x,t.y,t.z),e.set(k,b,A).normalize(),d.push(e.x,e.y,e.z),p.push(T,1-_),w.push(m++)}v.push(w)}for(var I=0;I<a;I++)for(var L=0;L<o;L++){var R=v[L][I],C=v[L+1][I],P=v[L+1][I+1],O=v[L][I+1];h.push(R,C,O),h.push(C,P,O),s+=6}c.addGroup(y,s,0),y+=s}(),!1===s&&(n>0&&b(!0),r>0&&b(!1)),e.setIndex(h),e.setAttribute("position",new sl(f,3)),e.setAttribute("normal",new sl(d,3)),e.setAttribute("uv",new sl(p,2)),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),t}(vl),_p=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return hr(this,t),(e=nr(this,t,[0,n,r,i,a,o,s,u])).type="ConeGeometry",e.parameters={radius:n,height:r,radialSegments:i,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:u},e}return or(t,e),dr(t,null,[{key:"fromJSON",value:function(e){return new t(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),t}(wp),Ep=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;hr(this,t),(e=nr(this,t)).type="PolyhedronGeometry",e.parameters={vertices:n,indices:r,radius:i,detail:a};var o=[],s=[];function u(e,t,n,r){for(var i=r+1,a=[],o=0;o<=i;o++){a[o]=[];for(var s=e.clone().lerp(n,o/i),u=t.clone().lerp(n,o/i),c=i-o,h=0;h<=c;h++)a[o][h]=0===h&&o===i?s:s.clone().lerp(u,h/c)}for(var f=0;f<i;f++)for(var d=0;d<2*(i-f)-1;d++){var p=Math.floor(d/2);d%2==0?(l(a[f][p+1]),l(a[f+1][p]),l(a[f][p])):(l(a[f][p+1]),l(a[f+1][p+1]),l(a[f+1][p]))}}function l(e){o.push(e.x,e.y,e.z)}function c(e,t){var r=3*e;t.x=n[r+0],t.y=n[r+1],t.z=n[r+2]}function h(e,t,n,r){r<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=r/2/Math.PI+.5)}function f(e){return Math.atan2(e.z,-e.x)}return function(e){for(var t=new _s,n=new _s,i=new _s,a=0;a<r.length;a+=3)c(r[a+0],t),c(r[a+1],n),c(r[a+2],i),u(t,n,i,e)}(a),function(e){for(var t=new _s,n=0;n<o.length;n+=3)t.x=o[n+0],t.y=o[n+1],t.z=o[n+2],t.normalize().multiplyScalar(e),o[n+0]=t.x,o[n+1]=t.y,o[n+2]=t.z}(i),function(){for(var e=new _s,t=0;t<o.length;t+=3){e.x=o[t+0],e.y=o[t+1],e.z=o[t+2];var n=f(e)/2/Math.PI+.5,r=(i=e,Math.atan2(-i.y,Math.sqrt(i.x*i.x+i.z*i.z))/Math.PI+.5);s.push(n,1-r)}var i;(function(){for(var e=new _s,t=new _s,n=new _s,r=new _s,i=new Wo,a=new Wo,u=new Wo,l=0,c=0;l<o.length;l+=9,c+=6){e.set(o[l+0],o[l+1],o[l+2]),t.set(o[l+3],o[l+4],o[l+5]),n.set(o[l+6],o[l+7],o[l+8]),i.set(s[c+0],s[c+1]),a.set(s[c+2],s[c+3]),u.set(s[c+4],s[c+5]),r.copy(e).add(t).add(n).divideScalar(3);var d=f(r);h(i,c+0,e,d),h(a,c+2,t,d),h(u,c+4,n,d)}})(),function(){for(var e=0;e<s.length;e+=6){var t=s[e+0],n=s[e+2],r=s[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),r<.2&&(s[e+4]+=1))}}()}(),e.setAttribute("position",new sl(o,3)),e.setAttribute("normal",new sl(o.slice(),3)),e.setAttribute("uv",new sl(s,2)),0===a?e.computeVertexNormals():e.normalizeNormals(),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.vertices,e.indices,e.radius,e.details)}}]),t}(vl),Sp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;hr(this,t);var i=(1+Math.sqrt(5))/2,a=1/i;return(e=nr(this,t,[[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-i,0,-a,i,0,a,-i,0,a,i,-a,-i,0,-a,i,0,a,-i,0,a,i,0,-i,0,-a,i,0,-a,-i,0,a,i,0,a],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],n,r])).type="DodecahedronGeometry",e.parameters={radius:n,detail:r},e}return or(t,e),dr(t,null,[{key:"fromJSON",value:function(e){return new t(e.radius,e.detail)}}]),t}(Ep),Tp=new _s,Mp=new _s,kp=new _s,Ap=new Du,Ip=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(hr(this,t),(e=nr(this,t)).type="EdgesGeometry",e.parameters={geometry:n,thresholdAngle:r},null!==n){for(var i=Math.pow(10,4),a=Math.cos(Oo*r),o=n.getIndex(),s=n.getAttribute("position"),u=o?o.count:s.count,l=[0,0,0],c=["a","b","c"],h=new Array(3),f={},d=[],p=0;p<u;p+=3){o?(l[0]=o.getX(p),l[1]=o.getX(p+1),l[2]=o.getX(p+2)):(l[0]=p,l[1]=p+1,l[2]=p+2);var m=Ap.a,v=Ap.b,g=Ap.c;if(m.fromBufferAttribute(s,l[0]),v.fromBufferAttribute(s,l[1]),g.fromBufferAttribute(s,l[2]),Ap.getNormal(kp),h[0]="".concat(Math.round(m.x*i),",").concat(Math.round(m.y*i),",").concat(Math.round(m.z*i)),h[1]="".concat(Math.round(v.x*i),",").concat(Math.round(v.y*i),",").concat(Math.round(v.z*i)),h[2]="".concat(Math.round(g.x*i),",").concat(Math.round(g.y*i),",").concat(Math.round(g.z*i)),h[0]!==h[1]&&h[1]!==h[2]&&h[2]!==h[0])for(var y=0;y<3;y++){var b=(y+1)%3,x=h[y],w=h[b],_=Ap[c[y]],E=Ap[c[b]],S="".concat(x,"_").concat(w),T="".concat(w,"_").concat(x);T in f&&f[T]?(kp.dot(f[T].normal)<=a&&(d.push(_.x,_.y,_.z),d.push(E.x,E.y,E.z)),f[T]=null):S in f||(f[S]={index0:l[y],index1:l[b],normal:kp.clone()})}}for(var M in f)if(f[M]){var k=f[M],A=k.index0,I=k.index1;Tp.fromBufferAttribute(s,A),Mp.fromBufferAttribute(s,I),d.push(Tp.x,Tp.y,Tp.z),d.push(Mp.x,Mp.y,Mp.z)}e.setAttribute("position",new sl(d,3))}return e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}]),t}(vl),Lp=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t,[e])).uuid=No(),n.type="Shape",n.holes=[],n}return or(t,e),dr(t,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){er(ir(t.prototype),"copy",this).call(this,e),this.holes=[];for(var n=0,r=e.holes.length;n<r;n++){var i=e.holes[n];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var n=0,r=this.holes.length;n<r;n++){var i=this.holes[n];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){er(ir(t.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var n=0,r=e.holes.length;n<r;n++){var i=e.holes[n];this.holes.push((new gp).fromJSON(i))}return this}}]),t}(gp);function Rp(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=Qp(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=Qp(a,e[a],e[a+1],o);return o&&Wp(o,o.next)&&($p(o),o=o.next),o}function Cp(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Wp(r,r.next)&&0!==qp(r.prev,r,r.next))r=r.next;else{if($p(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Pp(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=Hp(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?Dp(e,r,i,a):Op(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),$p(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?Pp(e=Np(Cp(e),t,n),t,n,r,i,a,2):2===o&&Bp(e,t,n,r,i,a):Pp(Cp(e),t,n,r,i,a,1);break}}}function Op(e){var t=e.prev,n=e,r=e.next;if(qp(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,u=n.y,l=r.y,c=i<a?i<o?i:o:a<o?a:o,h=s<u?s<l?s:l:u<l?u:l,f=i>a?i>o?i:o:a>o?a:o,d=s>u?s>l?s:l:u>l?u:l,p=r.next;p!==t;){if(p.x>=c&&p.x<=f&&p.y>=h&&p.y<=d&&jp(i,s,a,u,o,l,p.x,p.y)&&qp(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Dp(e,t,n,r){var i=e.prev,a=e,o=e.next;if(qp(i,a,o)>=0)return!1;for(var s=i.x,u=a.x,l=o.x,c=i.y,h=a.y,f=o.y,d=s<u?s<l?s:l:u<l?u:l,p=c<h?c<f?c:f:h<f?h:f,m=s>u?s>l?s:l:u>l?u:l,v=c>h?c>f?c:f:h>f?h:f,g=Hp(d,p,t,n,r),y=Hp(m,v,t,n,r),b=e.prevZ,x=e.nextZ;b&&b.z>=g&&x&&x.z<=y;){if(b.x>=d&&b.x<=m&&b.y>=p&&b.y<=v&&b!==i&&b!==o&&jp(s,c,u,h,l,f,b.x,b.y)&&qp(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=d&&x.x<=m&&x.y>=p&&x.y<=v&&x!==i&&x!==o&&jp(s,c,u,h,l,f,x.x,x.y)&&qp(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=g;){if(b.x>=d&&b.x<=m&&b.y>=p&&b.y<=v&&b!==i&&b!==o&&jp(s,c,u,h,l,f,b.x,b.y)&&qp(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=y;){if(x.x>=d&&x.x<=m&&x.y>=p&&x.y<=v&&x!==i&&x!==o&&jp(s,c,u,h,l,f,x.x,x.y)&&qp(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Np(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Wp(i,a)&&Xp(i,r,r.next,a)&&Jp(i,a)&&Jp(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),$p(r),$p(r.next),r=e=a),r=r.next}while(r!==e);return Cp(r)}function Bp(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Vp(o,s)){var u=Zp(o,s);return o=Cp(o,o.next),u=Cp(u,u.next),Pp(o,t,n,r,i,a,0),void Pp(u,t,n,r,i,a,0)}s=s.next}o=o.next}while(o!==e)}function Up(e,t){return e.x-t.x}function Fp(e,t){var n=function(e,t){var n,r=t,i=-1/0,a=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>i&&(i=s,n=r.x<r.next.x?r:r.next,s===a))return n}r=r.next}while(r!==t);if(!n)return null;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{a>=r.x&&r.x>=c&&a!==r.x&&jp(o<h?a:i,o,c,h,o<h?i:a,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(a-r.x),Jp(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&zp(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(e,t);if(!n)return t;var r=Zp(n,e);return Cp(r,r.next),Cp(n,n.next)}function zp(e,t){return qp(e.prev,e,t.prev)<0&&qp(t.next,e,e.next)<0}function Hp(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Gp(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function jp(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function Vp(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Xp(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Jp(e,t)&&Jp(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(qp(e.prev,e,t.prev)||qp(e,t.prev,t))||Wp(e,t)&&qp(e.prev,e,e.next)>0&&qp(t.prev,t,t.next)>0)}function qp(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Wp(e,t){return e.x===t.x&&e.y===t.y}function Xp(e,t,n,r){var i=Kp(qp(e,t,n)),a=Kp(qp(e,t,r)),o=Kp(qp(n,r,e)),s=Kp(qp(n,r,t));return i!==a&&o!==s||!(0!==i||!Yp(e,n,t))||!(0!==a||!Yp(e,r,t))||!(0!==o||!Yp(n,e,r))||!(0!==s||!Yp(n,t,r))}function Yp(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Kp(e){return e>0?1:e<0?-1:0}function Jp(e,t){return qp(e.prev,e,e.next)<0?qp(e,t,e.next)>=0&&qp(e,e.prev,t)>=0:qp(e,t,e.prev)<0||qp(e,e.next,t)<0}function Zp(e,t){var n=new em(e.i,e.x,e.y),r=new em(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Qp(e,t,n,r){var i=new em(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function $p(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function em(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var tm=function(){function e(){hr(this,e)}return dr(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];nm(e),rm(n,e);var a=e.length;t.forEach(nm);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,rm(n,t[o]);for(var s=function(e,t){var n,r,i,a,o,s,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,h=c?t[0]*l:e.length,f=Rp(e,0,h,l,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Rp(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Gp(o));for(s.sort(Up),i=0;i<s.length;i++)n=Fp(s[i],n);return n}(e,t,f,l)),e.length>80*l){n=i=e[0],r=a=e[1];for(var p=l;p<h;p+=l)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>i&&(i=o),s>a&&(a=s);u=0!==(u=Math.max(i-n,a-r))?32767/u:0}return Pp(f,d,l,n,r,u,0),d}(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),e}();function nm(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function rm(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var im=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Lp([new Wo(.5,.5),new Wo(-.5,.5),new Wo(-.5,-.5),new Wo(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};hr(this,t),(e=nr(this,t)).type="ExtrudeGeometry",e.parameters={shapes:n,options:r},n=Array.isArray(n)?n:[n];for(var i=ar(e),a=[],o=[],s=0,u=n.length;s<u;s++)l(n[s]);function l(e){var t,n,s,u,l,c=[],h=void 0!==r.curveSegments?r.curveSegments:12,f=void 0!==r.steps?r.steps:1,d=void 0!==r.depth?r.depth:1,p=void 0===r.bevelEnabled||r.bevelEnabled,m=void 0!==r.bevelThickness?r.bevelThickness:.2,v=void 0!==r.bevelSize?r.bevelSize:m-.1,g=void 0!==r.bevelOffset?r.bevelOffset:0,y=void 0!==r.bevelSegments?r.bevelSegments:3,b=r.extrudePath,x=void 0!==r.UVGenerator?r.UVGenerator:am,w=!1;b&&(t=b.getSpacedPoints(f),w=!0,p=!1,n=b.computeFrenetFrames(f,!1),s=new _s,u=new _s,l=new _s),p||(y=0,m=0,v=0,g=0);var _=e.extractPoints(h),E=_.shape,S=_.holes;if(!tm.isClockWise(E)){E=E.reverse();for(var T=0,M=S.length;T<M;T++){var k=S[T];tm.isClockWise(k)&&(S[T]=k.reverse())}}for(var A=tm.triangulateShape(E,S),I=E,L=0,R=S.length;L<R;L++){var C=S[L];E=E.concat(C)}function P(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}var O=E.length,D=A.length;function N(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=o*o+s*s,h=o*l-s*u;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(u*u+l*l),p=t.x-s/f,m=t.y+o/f,v=((n.x-l/d-p)*l-(n.y+u/d-m)*u)/(o*l-s*u),g=(r=p+o*v-e.x)*r+(i=m+s*v-e.y)*i;if(g<=2)return new Wo(r,i);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?u>Number.EPSILON&&(y=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new Wo(r/a,i/a)}for(var B=[],U=0,F=I.length,z=F-1,H=U+1;U<F;U++,z++,H++)z===F&&(z=0),H===F&&(H=0),B[U]=N(I[U],I[z],I[H]);for(var G,j=[],V=B.concat(),q=0,W=S.length;q<W;q++){var X=S[q];G=[];for(var Y=0,K=X.length,J=K-1,Z=Y+1;Y<K;Y++,J++,Z++)J===K&&(J=0),Z===K&&(Z=0),G[Y]=N(X[Y],X[J],X[Z]);j.push(G),V=V.concat(G)}for(var Q=0;Q<y;Q++){for(var $=Q/y,ee=m*Math.cos($*Math.PI/2),te=v*Math.sin($*Math.PI/2)+g,ne=0,re=I.length;ne<re;ne++){var ie=P(I[ne],B[ne],te);Re(ie.x,ie.y,-ee)}for(var ae=0,oe=S.length;ae<oe;ae++){var se=S[ae];G=j[ae];for(var ue=0,le=se.length;ue<le;ue++){var ce=P(se[ue],G[ue],te);Re(ce.x,ce.y,-ee)}}}for(var he=v+g,fe=0;fe<O;fe++){var de=p?P(E[fe],V[fe],he):E[fe];w?(u.copy(n.normals[0]).multiplyScalar(de.x),s.copy(n.binormals[0]).multiplyScalar(de.y),l.copy(t[0]).add(u).add(s),Re(l.x,l.y,l.z)):Re(de.x,de.y,0)}for(var pe=1;pe<=f;pe++)for(var me=0;me<O;me++){var ve=p?P(E[me],V[me],he):E[me];w?(u.copy(n.normals[pe]).multiplyScalar(ve.x),s.copy(n.binormals[pe]).multiplyScalar(ve.y),l.copy(t[pe]).add(u).add(s),Re(l.x,l.y,l.z)):Re(ve.x,ve.y,d/f*pe)}for(var ge=y-1;ge>=0;ge--){for(var ye=ge/y,be=m*Math.cos(ye*Math.PI/2),xe=v*Math.sin(ye*Math.PI/2)+g,we=0,_e=I.length;we<_e;we++){var Ee=P(I[we],B[we],xe);Re(Ee.x,Ee.y,d+be)}for(var Se=0,Te=S.length;Se<Te;Se++){var Me=S[Se];G=j[Se];for(var ke=0,Ae=Me.length;ke<Ae;ke++){var Ie=P(Me[ke],G[ke],xe);w?Re(Ie.x,Ie.y+t[f-1].y,t[f-1].x+be):Re(Ie.x,Ie.y,d+be)}}}function Le(e,t){for(var n=e.length;--n>=0;){var r=n,i=n-1;i<0&&(i=e.length-1);for(var a=0,o=f+2*y;a<o;a++){var s=O*a,u=O*(a+1);Pe(t+r+s,t+i+s,t+i+u,t+r+u)}}}function Re(e,t,n){c.push(e),c.push(t),c.push(n)}function Ce(e,t,n){Oe(e),Oe(t),Oe(n);var r=a.length/3,o=x.generateTopUV(i,a,r-3,r-2,r-1);De(o[0]),De(o[1]),De(o[2])}function Pe(e,t,n,r){Oe(e),Oe(t),Oe(r),Oe(t),Oe(n),Oe(r);var o=a.length/3,s=x.generateSideWallUV(i,a,o-6,o-3,o-2,o-1);De(s[0]),De(s[1]),De(s[3]),De(s[1]),De(s[2]),De(s[3])}function Oe(e){a.push(c[3*e+0]),a.push(c[3*e+1]),a.push(c[3*e+2])}function De(e){o.push(e.x),o.push(e.y)}!function(){var e=a.length/3;if(p){for(var t=0,n=O*t,r=0;r<D;r++){var o=A[r];Ce(o[2]+n,o[1]+n,o[0]+n)}n=O*(t=f+2*y);for(var s=0;s<D;s++){var u=A[s];Ce(u[0]+n,u[1]+n,u[2]+n)}}else{for(var l=0;l<D;l++){var c=A[l];Ce(c[2],c[1],c[0])}for(var h=0;h<D;h++){var d=A[h];Ce(d[0]+O*f,d[1]+O*f,d[2]+O*f)}}i.addGroup(e,a.length/3-e,0)}(),function(){var e=a.length/3,t=0;Le(I,t),t+=I.length;for(var n=0,r=S.length;n<r;n++){var o=S[n];Le(o,t),t+=o.length}i.addGroup(e,a.length/3-e,1)}()}return e.setAttribute("position",new sl(a,3)),e.setAttribute("uv",new sl(o,2)),e.computeVertexNormals(),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return n.options=tr({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,n){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=n[e.shapes[i]];r.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new mp[s.type]).fromJSON(s)),new t(r,e.options)}}]),t}(vl),am={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new Wo(a,o),new Wo(s,u),new Wo(l,c)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],h=t[3*r+2],f=t[3*i],d=t[3*i+1],p=t[3*i+2],m=t[3*a],v=t[3*a+1],g=t[3*a+2];return Math.abs(s-c)<Math.abs(o-l)?[new Wo(o,1-u),new Wo(l,1-h),new Wo(f,1-p),new Wo(m,1-g)]:[new Wo(s,1-u),new Wo(c,1-h),new Wo(d,1-p),new Wo(v,1-g)]}},om=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;hr(this,t);var i=(1+Math.sqrt(5))/2;return(e=nr(this,t,[[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],n,r])).type="IcosahedronGeometry",e.parameters={radius:n,detail:r},e}return or(t,e),dr(t,null,[{key:"fromJSON",value:function(e){return new t(e.radius,e.detail)}}]),t}(Ep),sm=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return hr(this,t),(e=nr(this,t,[[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],n,r])).type="OctahedronGeometry",e.parameters={radius:n,detail:r},e}return or(t,e),dr(t,null,[{key:"fromJSON",value:function(e){return new t(e.radius,e.detail)}}]),t}(Ep),um=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;hr(this,t),(e=nr(this,t)).type="RingGeometry",e.parameters={innerRadius:n,outerRadius:r,thetaSegments:i,phiSegments:a,thetaStart:o,thetaLength:s},i=Math.max(3,i);for(var u=[],l=[],c=[],h=[],f=n,d=(r-n)/(a=Math.max(1,a)),p=new _s,m=new Wo,v=0;v<=a;v++){for(var g=0;g<=i;g++){var y=o+g/i*s;p.x=f*Math.cos(y),p.y=f*Math.sin(y),l.push(p.x,p.y,p.z),c.push(0,0,1),m.x=(p.x/r+1)/2,m.y=(p.y/r+1)/2,h.push(m.x,m.y)}f+=d}for(var b=0;b<a;b++)for(var x=b*(i+1),w=0;w<i;w++){var _=w+x,E=_,S=_+i+1,T=_+i+2,M=_+1;u.push(E,S,M),u.push(S,T,M)}return e.setIndex(u),e.setAttribute("position",new sl(l,3)),e.setAttribute("normal",new sl(c,3)),e.setAttribute("uv",new sl(h,2)),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),t}(vl),lm=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Lp([new Wo(0,.5),new Wo(-.5,-.5),new Wo(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;hr(this,t),(e=nr(this,t)).type="ShapeGeometry",e.parameters={shapes:n,curveSegments:r};var i=[],a=[],o=[],s=[],u=0,l=0;if(!1===Array.isArray(n))h(n);else for(var c=0;c<n.length;c++)h(n[c]),e.addGroup(u,l,c),u+=l,l=0;function h(e){var t=a.length/3,n=e.extractPoints(r),u=n.shape,c=n.holes;!1===tm.isClockWise(u)&&(u=u.reverse());for(var h=0,f=c.length;h<f;h++){var d=c[h];!0===tm.isClockWise(d)&&(c[h]=d.reverse())}for(var p=tm.triangulateShape(u,c),m=0,v=c.length;m<v;m++){var g=c[m];u=u.concat(g)}for(var y=0,b=u.length;y<b;y++){var x=u[y];a.push(x.x,x.y,0),o.push(0,0,1),s.push(x.x,x.y)}for(var w=0,_=p.length;w<_;w++){var E=p[w],S=E[0]+t,T=E[1]+t,M=E[2]+t;i.push(S,T,M),l+=3}}return e.setIndex(i),e.setAttribute("position",new sl(a,3)),e.setAttribute("normal",new sl(o,3)),e.setAttribute("uv",new sl(s,2)),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,n){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=n[e.shapes[i]];r.push(o)}return new t(r,e.curveSegments)}}]),t}(vl),cm=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;hr(this,t),(e=nr(this,t)).type="SphereGeometry",e.parameters={radius:n,widthSegments:r,heightSegments:i,phiStart:a,phiLength:o,thetaStart:s,thetaLength:u},r=Math.max(3,Math.floor(r)),i=Math.max(2,Math.floor(i));for(var l=Math.min(s+u,Math.PI),c=0,h=[],f=new _s,d=new _s,p=[],m=[],v=[],g=[],y=0;y<=i;y++){var b=[],x=y/i,w=0;0===y&&0===s?w=.5/r:y===i&&l===Math.PI&&(w=-.5/r);for(var _=0;_<=r;_++){var E=_/r;f.x=-n*Math.cos(a+E*o)*Math.sin(s+x*u),f.y=n*Math.cos(s+x*u),f.z=n*Math.sin(a+E*o)*Math.sin(s+x*u),m.push(f.x,f.y,f.z),d.copy(f).normalize(),v.push(d.x,d.y,d.z),g.push(E+w,1-x),b.push(c++)}h.push(b)}for(var S=0;S<i;S++)for(var T=0;T<r;T++){var M=h[S][T+1],k=h[S][T],A=h[S+1][T],I=h[S+1][T+1];(0!==S||s>0)&&p.push(M,k,I),(S!==i-1||l<Math.PI)&&p.push(k,A,I)}return e.setIndex(p),e.setAttribute("position",new sl(m,3)),e.setAttribute("normal",new sl(v,3)),e.setAttribute("uv",new sl(g,2)),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),t}(vl),hm=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return hr(this,t),(e=nr(this,t,[[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],n,r])).type="TetrahedronGeometry",e.parameters={radius:n,detail:r},e}return or(t,e),dr(t,null,[{key:"fromJSON",value:function(e){return new t(e.radius,e.detail)}}]),t}(Ep),fm=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;hr(this,t),(e=nr(this,t)).type="TorusGeometry",e.parameters={radius:n,tube:r,radialSegments:i,tubularSegments:a,arc:o},i=Math.floor(i),a=Math.floor(a);for(var s=[],u=[],l=[],c=[],h=new _s,f=new _s,d=new _s,p=0;p<=i;p++)for(var m=0;m<=a;m++){var v=m/a*o,g=p/i*Math.PI*2;f.x=(n+r*Math.cos(g))*Math.cos(v),f.y=(n+r*Math.cos(g))*Math.sin(v),f.z=r*Math.sin(g),u.push(f.x,f.y,f.z),h.x=n*Math.cos(v),h.y=n*Math.sin(v),d.subVectors(f,h).normalize(),l.push(d.x,d.y,d.z),c.push(m/a),c.push(p/i)}for(var y=1;y<=i;y++)for(var b=1;b<=a;b++){var x=(a+1)*y+b-1,w=(a+1)*(y-1)+b-1,_=(a+1)*(y-1)+b,E=(a+1)*y+b;s.push(x,w,E),s.push(w,_,E)}return e.setIndex(s),e.setAttribute("position",new sl(u,3)),e.setAttribute("normal",new sl(l,3)),e.setAttribute("uv",new sl(c,2)),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),t}(vl),dm=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;hr(this,t),(e=nr(this,t)).type="TorusKnotGeometry",e.parameters={radius:n,tube:r,tubularSegments:i,radialSegments:a,p:o,q:s},i=Math.floor(i),a=Math.floor(a);for(var u=[],l=[],c=[],h=[],f=new _s,d=new _s,p=new _s,m=new _s,v=new _s,g=new _s,y=new _s,b=0;b<=i;++b){var x=b/i*o*Math.PI*2;R(x,o,s,n,p),R(x+.01,o,s,n,m),g.subVectors(m,p),y.addVectors(m,p),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize();for(var w=0;w<=a;++w){var _=w/a*Math.PI*2,E=-r*Math.cos(_),S=r*Math.sin(_);f.x=p.x+(E*y.x+S*v.x),f.y=p.y+(E*y.y+S*v.y),f.z=p.z+(E*y.z+S*v.z),l.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),h.push(b/i),h.push(w/a)}}for(var T=1;T<=i;T++)for(var M=1;M<=a;M++){var k=(a+1)*(T-1)+(M-1),A=(a+1)*T+(M-1),I=(a+1)*T+M,L=(a+1)*(T-1)+M;u.push(k,A,L),u.push(A,I,L)}function R(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*a,i.y=r*(2+u)*o*.5,i.z=r*Math.sin(s)*.5}return e.setIndex(u),e.setAttribute("position",new sl(l,3)),e.setAttribute("normal",new sl(c,3)),e.setAttribute("uv",new sl(h,2)),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),t}(vl),pm=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dp(new _s(-1,-1,0),new _s(-1,1,0),new _s(1,1,0)),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];hr(this,t),(e=nr(this,t)).type="TubeGeometry",e.parameters={path:n,tubularSegments:r,radius:i,radialSegments:a,closed:o};var s=n.computeFrenetFrames(r,o);e.tangents=s.tangents,e.normals=s.normals,e.binormals=s.binormals;var u=new _s,l=new _s,c=new Wo,h=new _s,f=[],d=[],p=[],m=[];function v(e){h=n.getPointAt(e/r,h);for(var t=s.normals[e],o=s.binormals[e],c=0;c<=a;c++){var p=c/a*Math.PI*2,m=Math.sin(p),v=-Math.cos(p);l.x=v*t.x+m*o.x,l.y=v*t.y+m*o.y,l.z=v*t.z+m*o.z,l.normalize(),d.push(l.x,l.y,l.z),u.x=h.x+i*l.x,u.y=h.y+i*l.y,u.z=h.z+i*l.z,f.push(u.x,u.y,u.z)}}return function(){for(var e=0;e<r;e++)v(e);v(!1===o?r:0),function(){for(var e=0;e<=r;e++)for(var t=0;t<=a;t++)c.x=e/r,c.y=t/a,p.push(c.x,c.y)}(),function(){for(var e=1;e<=r;e++)for(var t=1;t<=a;t++){var n=(a+1)*(e-1)+(t-1),i=(a+1)*e+(t-1),o=(a+1)*e+t,s=(a+1)*(e-1)+t;m.push(n,i,s),m.push(i,o,s)}}()}(),e.setIndex(m),e.setAttribute("position",new sl(f,3)),e.setAttribute("normal",new sl(d,3)),e.setAttribute("uv",new sl(p,2)),e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new t((new mp[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),t}(vl),mm=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(hr(this,t),(e=nr(this,t)).type="WireframeGeometry",e.parameters={geometry:n},null!==n){var r=[],i=new Set,a=new _s,o=new _s;if(null!==n.index){var s=n.attributes.position,u=n.index,l=n.groups;0===l.length&&(l=[{start:0,count:u.count,materialIndex:0}]);for(var c=0,h=l.length;c<h;++c)for(var f=l[c],d=f.start,p=d,m=d+f.count;p<m;p+=3)for(var v=0;v<3;v++){var g=u.getX(p+v),y=u.getX(p+(v+1)%3);a.fromBufferAttribute(s,g),o.fromBufferAttribute(s,y),!0===vm(a,o,i)&&(r.push(a.x,a.y,a.z),r.push(o.x,o.y,o.z))}}else for(var b=n.attributes.position,x=0,w=b.count/3;x<w;x++)for(var _=0;_<3;_++){var E=3*x+_,S=3*x+(_+1)%3;a.fromBufferAttribute(b,E),o.fromBufferAttribute(b,S),!0===vm(a,o,i)&&(r.push(a.x,a.y,a.z),r.push(o.x,o.y,o.z))}e.setAttribute("position",new sl(r,3))}return e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.parameters=tr({},e.parameters),this}}]),t}(vl);function vm(e,t,n){var r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var gm=Object.freeze({__proto__:null,BoxGeometry:Nl,CapsuleGeometry:bp,CircleGeometry:xp,ConeGeometry:_p,CylinderGeometry:wp,DodecahedronGeometry:Sp,EdgesGeometry:Ip,ExtrudeGeometry:im,IcosahedronGeometry:om,LatheGeometry:yp,OctahedronGeometry:sm,PlaneGeometry:rc,PolyhedronGeometry:Ep,RingGeometry:um,ShapeGeometry:lm,SphereGeometry:cm,TetrahedronGeometry:hm,TorusGeometry:fm,TorusKnotGeometry:dm,TubeGeometry:pm,WireframeGeometry:mm}),ym=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isShadowMaterial=!0,n.type="ShadowMaterial",n.color=new Gu(0),n.transparent=!0,n.fog=!0,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),t}(Bu),bm=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t,[e])).isRawShaderMaterial=!0,n.type="RawShaderMaterial",n}return or(t,e),dr(t)}(Hl),xm=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isMeshStandardMaterial=!0,n.defines={STANDARD:""},n.type="MeshStandardMaterial",n.color=new Gu(16777215),n.roughness=1,n.metalness=0,n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Gu(0),n.emissiveIntensity=1,n.emissiveMap=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=Ja,n.normalScale=new Wo(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.roughnessMap=null,n.metalnessMap=null,n.alphaMap=null,n.envMap=null,n.envMapIntensity=1,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.flatShading=!1,n.fog=!0,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),t}(Bu),wm=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isMeshPhysicalMaterial=!0,n.defines={STANDARD:"",PHYSICAL:""},n.type="MeshPhysicalMaterial",n.clearcoatMap=null,n.clearcoatRoughness=0,n.clearcoatRoughnessMap=null,n.clearcoatNormalScale=new Wo(1,1),n.clearcoatNormalMap=null,n.ior=1.5,Object.defineProperty(ar(n),"reflectivity",{get:function(){return Bo(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),n.iridescenceMap=null,n.iridescenceIOR=1.3,n.iridescenceThicknessRange=[100,400],n.iridescenceThicknessMap=null,n.sheenColor=new Gu(0),n.sheenColorMap=null,n.sheenRoughness=1,n.sheenRoughnessMap=null,n.transmissionMap=null,n.thickness=0,n.thicknessMap=null,n.attenuationDistance=1/0,n.attenuationColor=new Gu(1,1,1),n.specularIntensity=1,n.specularIntensityMap=null,n.specularColor=new Gu(1,1,1),n.specularColorMap=null,n._sheen=0,n._clearcoat=0,n._iridescence=0,n._transmission=0,n.setValues(e),n}return or(t,e),dr(t,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=function(e){if(Array.isArray(e))return $n(e)}(n=e.iridescenceThicknessRange)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||Qn(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this;var n}}]),t}(xm),_m=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isMeshPhongMaterial=!0,n.type="MeshPhongMaterial",n.color=new Gu(16777215),n.specular=new Gu(1118481),n.shininess=30,n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Gu(0),n.emissiveIntensity=1,n.emissiveMap=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=Ja,n.normalScale=new Wo(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=null,n.alphaMap=null,n.envMap=null,n.combine=oi,n.reflectivity=1,n.refractionRatio=.98,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.flatShading=!1,n.fog=!0,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),t}(Bu),Em=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isMeshToonMaterial=!0,n.defines={TOON:""},n.type="MeshToonMaterial",n.color=new Gu(16777215),n.map=null,n.gradientMap=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Gu(0),n.emissiveIntensity=1,n.emissiveMap=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=Ja,n.normalScale=new Wo(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.alphaMap=null,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.fog=!0,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),t}(Bu),Sm=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isMeshNormalMaterial=!0,n.type="MeshNormalMaterial",n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=Ja,n.normalScale=new Wo(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.wireframe=!1,n.wireframeLinewidth=1,n.flatShading=!1,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),t}(Bu),Tm=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isMeshLambertMaterial=!0,n.type="MeshLambertMaterial",n.color=new Gu(16777215),n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Gu(0),n.emissiveIntensity=1,n.emissiveMap=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=Ja,n.normalScale=new Wo(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=null,n.alphaMap=null,n.envMap=null,n.combine=oi,n.reflectivity=1,n.refractionRatio=.98,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.flatShading=!1,n.fog=!0,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),t}(Bu),Mm=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isMeshMatcapMaterial=!0,n.defines={MATCAP:""},n.type="MeshMatcapMaterial",n.color=new Gu(16777215),n.matcap=null,n.map=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=Ja,n.normalScale=new Wo(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.alphaMap=null,n.flatShading=!1,n.fog=!0,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),t}(Bu),km=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).isLineDashedMaterial=!0,n.type="LineDashedMaterial",n.scale=1,n.dashSize=3,n.gapSize=1,n.setValues(e),n}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),t}(kd);function Am(e,t,n){return Lm(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function Im(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Lm(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rm(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function Cm(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,u=0;u!==t;++u)i[o++]=e[s+u];return i}function Pm(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}}var Om={arraySlice:Am,convertArray:Im,isTypedArray:Lm,getKeyframeOrder:Rm,sortedArray:Cm,flattenJSON:Pm,subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],l=u.getValueSize(),c=[],h=[],f=0;f<u.times.length;++f){var d=u.times[f]*i;if(!(d<n||d>=r)){c.push(u.times[f]);for(var p=0;p<l;++p)h.push(u.values[f*l+p])}}0!==c.length&&(u.times=Im(c,u.times.constructor),u.values=Im(h,u.values.constructor),o.push(u))}a.tracks=o;for(var m=1/0,v=0;v<a.tracks.length;++v)m>a.tracks[v].times[0]&&(m=a.tracks[v].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*m);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,o=function(){var t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)return 0;var i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)return 0;var o=0,u=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=u/3);var l=0,c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var h,f=t.times.length-1;if(a<=t.times[0]){var d=o,p=u-o;h=Am(t.values,d,p)}else if(a>=t.times[f]){var m=f*u+o,v=m+u-o;h=Am(t.values,m,v)}else{var g=t.createInterpolant(),y=o,b=u-o;g.evaluate(a),h=Am(g.resultBuffer,y,b)}"quaternion"===r&&(new ws).fromArray(h).normalize().conjugate().toArray(h);for(var x=i.times.length,w=0;w<x;++w){var _=w*c+l;if("quaternion"===r)ws.multiplyQuaternionsFlat(i.values,_,h,0,i.values,_);else for(var E=c-2*l,S=0;S<E;++S)i.values[_+S]-=h[S]}},s=0;s<i;++s)o();return e.blendMode=Ga,e}},Dm=function(){function e(t,n,r,i){hr(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return dr(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),Nm=function(e){function t(e,n,r,i){var a;return hr(this,t),(a=nr(this,t,[e,n,r,i]))._weightPrev=-0,a._offsetPrev=-0,a._weightNext=-0,a._offsetNext=-0,a.DefaultSettings_={endingStart:Ua,endingEnd:Ua},a}return or(t,e),dr(t,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case Fa:i=e,o=2*t-n;break;case za:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Fa:a=e,s=2*n-t;break;case za:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,m=p*d,v=-h*m+2*h*p-h*d,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p,x=0;x!==o;++x)i[x]=v*a[l+x]+g*a[u+x]+y*a[s+x]+b*a[c+x];return i}}]),t}(Dm),Bm=function(e){function t(e,n,r,i){return hr(this,t),nr(this,t,[e,n,r,i])}return or(t,e),dr(t,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=(n-t)/(r-t),c=1-l,h=0;h!==o;++h)i[h]=a[u+h]*c+a[s+h]*l;return i}}]),t}(Dm),Um=function(e){function t(e,n,r,i){return hr(this,t),nr(this,t,[e,n,r,i])}return or(t,e),dr(t,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),t}(Dm),Fm=function(){function e(t,n,r,i){if(hr(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Im(n,this.TimeBufferType),this.values=Im(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return dr(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Um(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Bm(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new Nm(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Da:t=this.InterpolantFactoryMethodDiscrete;break;case Na:t=this.InterpolantFactoryMethodLinear;break;case Ba:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Da;case this.InterpolantFactoryMethodLinear:return Na;case this.InterpolantFactoryMethodSmooth:return Ba}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Am(n,i,a),this.values=Am(this.values,i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&Lm(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=Am(this.times),t=Am(this.values),n=this.getValueSize(),r=this.getInterpolation()===Ba,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var l=o*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=t[l+f];if(d!==t[c+f]||d!==t[h+f]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,m=a*n,v=0;v!==n;++v)t[m+v]=t[p+v]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,b=0;b!==n;++b)t[y+b]=t[g+b];++a}return a!==e.length?(this.times=Am(e,0,a),this.values=Am(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=Am(this.times,0),t=Am(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Im(e.times,Array),values:Im(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();Fm.prototype.TimeBufferType=Float32Array,Fm.prototype.ValueBufferType=Float32Array,Fm.prototype.DefaultInterpolation=Na;var zm=function(e){function t(){return hr(this,t),nr(this,t,arguments)}return or(t,e),dr(t)}(Fm);zm.prototype.ValueTypeName="bool",zm.prototype.ValueBufferType=Array,zm.prototype.DefaultInterpolation=Da,zm.prototype.InterpolantFactoryMethodLinear=void 0,zm.prototype.InterpolantFactoryMethodSmooth=void 0;var Hm=function(e){function t(){return hr(this,t),nr(this,t,arguments)}return or(t,e),dr(t)}(Fm);Hm.prototype.ValueTypeName="color";var Gm=function(e){function t(){return hr(this,t),nr(this,t,arguments)}return or(t,e),dr(t)}(Fm);Gm.prototype.ValueTypeName="number";var jm=function(e){function t(e,n,r,i){return hr(this,t),nr(this,t,[e,n,r,i])}return or(t,e),dr(t,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,l=u+o;u!==l;u+=4)ws.slerpFlat(i,0,a,u-o,a,u,s);return i}}]),t}(Dm),Vm=function(e){function t(){return hr(this,t),nr(this,t,arguments)}return or(t,e),dr(t,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new jm(this.times,this.values,this.getValueSize(),e)}}]),t}(Fm);Vm.prototype.ValueTypeName="quaternion",Vm.prototype.DefaultInterpolation=Na,Vm.prototype.InterpolantFactoryMethodSmooth=void 0;var qm=function(e){function t(){return hr(this,t),nr(this,t,arguments)}return or(t,e),dr(t)}(Fm);qm.prototype.ValueTypeName="string",qm.prototype.ValueBufferType=Array,qm.prototype.DefaultInterpolation=Da,qm.prototype.InterpolantFactoryMethodLinear=void 0,qm.prototype.InterpolantFactoryMethodSmooth=void 0;var Wm=function(e){function t(){return hr(this,t),nr(this,t,arguments)}return or(t,e),dr(t)}(Fm);Wm.prototype.ValueTypeName="vector";var Xm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ha;hr(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=No(),this.duration<0&&this.resetDuration()}return dr(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Ym(n[i]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(Fm.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var l=Rm(s);s=Cm(s,1,l),u=Cm(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new Gm(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var h=[];for(var f in r)h.push(this.CreateFromMorphTargetSequence(f,r[f],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];Pm(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,u=e.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},f=void 0;for(f=0;f<c.length;f++)if(c[f].morphTargets)for(var d=0;d<c[f].morphTargets.length;d++)h[c[f].morphTargets[d]]=-1;for(var p in h){for(var m=[],v=[],g=0;g!==c[f].morphTargets.length;++g){var y=c[f];m.push(y.time),v.push(y.morphTarget===p?1:0)}r.push(new Gm(".morphTargetInfluence["+p+"]",m,v))}s=h.length*a}else{var b=".bones["+t[l].name+"]";n(Wm,b+".position",c,"pos",r),n(Vm,b+".quaternion",c,"rot",r),n(Wm,b+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),e}();function Ym(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gm;case"vector":case"vector2":case"vector3":case"vector4":return Wm;case"color":return Hm;case"quaternion":return Vm;case"bool":case"boolean":return zm;case"string":return qm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];Pm(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Km,Jm={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Zm=dr((function e(t,n,r){hr(this,e);var i=this,a=!1,o=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),Qm=new Zm,$m=function(){function e(t){hr(this,e),this.manager=void 0!==t?t:Qm,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return dr(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),ev={},tv=function(e){function t(e,n){var r;return hr(this,t),(r=nr(this,t,[e])).response=n,r}return or(t,e),dr(t)}(Yn(Error)),nv=function(e){function t(e){return hr(this,t),nr(this,t,[e])}return or(t,e),dr(t,[{key:"load",value:function(e,t,n,r){var i=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=Jm.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===ev[e]){ev[e]=[],ev[e].push({onLoad:t,onProgress:n,onError:r});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,u=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=ev[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=i?parseInt(i):0,o=0!==a,s=0,u=new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var i=r.done,u=r.value;if(i)e.close();else{s+=u.byteLength;for(var l=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),c=0,h=n.length;c<h;c++){var f=n[c];f.onProgress&&f.onProgress(l)}e.enqueue(u),t()}}))}()}});return new Response(u)}throw new tv('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(u){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((function(e){return r.decode(e)}))}})).then((function(t){Jm.add(e,t);var n=ev[e];delete ev[e];for(var r=0,i=n.length;r<i;r++){var a=n[r];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=ev[e];if(void 0===n)throw i.manager.itemError(e),t;delete ev[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e)})).finally((function(){i.manager.itemEnd(e)})),this.manager.itemStart(e)}else ev[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),t}($m),rv=function(e){function t(e){return hr(this,t),nr(this,t,[e])}return or(t,e),dr(t,[{key:"load",value:function(e,t,n,r){var i=this,a=new nv(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=Xm.parse(e[n]);t.push(r)}return t}}]),t}($m),iv=function(e){function t(e){return hr(this,t),nr(this,t,[e])}return or(t,e),dr(t,[{key:"load",value:function(e,t,n,r){var i=this,a=[],o=new Xd,s=new nv(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);var u=0;function l(l){s.load(e[l],(function(e){var n=i.parse(e,!0);a[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(o.minFilter=Ii),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(var c=0,h=e.length;c<h;++c)l(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Ii),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}]),t}($m),av=function(e){function t(e){return hr(this,t),nr(this,t,[e])}return or(t,e),dr(t,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Jm.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=Qo("img");function s(){l(),Jm.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),t}($m),ov=function(e){function t(e){return hr(this,t),nr(this,t,[e])}return or(t,e),dr(t,[{key:"load",value:function(e,t,n,r){var i=new Wl,a=new av(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,6==++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}]),t}($m),sv=function(e){function t(e){return hr(this,t),nr(this,t,[e])}return or(t,e),dr(t,[{key:"load",value:function(e,t,n,r){var i=this,a=new pd,o=new nv(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:_i,a.wrapT=void 0!==n.wrapT?n.wrapT:_i,a.magFilter=void 0!==n.magFilter?n.magFilter:Ii,a.minFilter=void 0!==n.minFilter?n.minFilter:Ii,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?a.colorSpace=n.colorSpace:void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Ci),1===n.mipmapCount&&(a.minFilter=Ii),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,r),a}}]),t}($m),uv=function(e){function t(e){return hr(this,t),nr(this,t,[e])}return or(t,e),dr(t,[{key:"load",value:function(e,t,n,r){var i=new ds,a=new av(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),t}($m),lv=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return hr(this,t),(n=nr(this,t)).isLight=!0,n.type="Light",n.color=new Gu(e),n.intensity=r,n}return or(t,e),dr(t,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var n=er(ir(t.prototype),"toJSON",this).call(this,e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,void 0!==this.groundColor&&(n.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(n.object.distance=this.distance),void 0!==this.angle&&(n.object.angle=this.angle),void 0!==this.decay&&(n.object.decay=this.decay),void 0!==this.penumbra&&(n.object.penumbra=this.penumbra),void 0!==this.shadow&&(n.object.shadow=this.shadow.toJSON()),n}}]),t}(Eu),cv=function(e){function t(e,n,r){var i;return hr(this,t),(i=nr(this,t,[e,r])).isHemisphereLight=!0,i.type="HemisphereLight",i.position.copy(Eu.DEFAULT_UP),i.updateMatrix(),i.groundColor=new Gu(n),i}return or(t,e),dr(t,[{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.groundColor.copy(e.groundColor),this}}]),t}(lv),hv=new Qs,fv=new _s,dv=new _s,pv=function(){function e(t){hr(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Wo(512,512),this.map=null,this.mapPass=null,this.matrix=new Qs,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ec,this._frameExtents=new Wo(1,1),this._viewportCount=1,this._viewports=[new ps(0,0,1,1)]}return dr(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;fv.setFromMatrixPosition(e.matrixWorld),t.position.copy(fv),dv.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(dv),t.updateMatrixWorld(),hv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hv),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(hv)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),mv=function(e){function t(){var e;return hr(this,t),(e=nr(this,t,[new jl(50,1,.5,500)])).isSpotLightShadow=!0,e.focus=1,e}return or(t,e),dr(t,[{key:"updateMatrices",value:function(e){var n=this.camera,r=2*Do*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||n.far;r===n.fov&&i===n.aspect&&a===n.far||(n.fov=r,n.aspect=i,n.far=a,n.updateProjectionMatrix()),er(ir(t.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),t}(pv),vv=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return hr(this,t),(r=nr(this,t,[e,n])).isSpotLight=!0,r.type="SpotLight",r.position.copy(Eu.DEFAULT_UP),r.updateMatrix(),r.target=new Eu,r.distance=i,r.angle=a,r.penumbra=o,r.decay=s,r.map=null,r.shadow=new mv,r}return or(t,e),dr(t,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),t}(lv),gv=new Qs,yv=new _s,bv=new _s,xv=function(e){function t(){var e;return hr(this,t),(e=nr(this,t,[new jl(90,1,.5,500)])).isPointLightShadow=!0,e._frameExtents=new Wo(4,2),e._viewportCount=6,e._viewports=[new ps(2,1,1,1),new ps(0,1,1,1),new ps(3,1,1,1),new ps(1,1,1,1),new ps(3,0,1,1),new ps(1,0,1,1)],e._cubeDirections=[new _s(1,0,0),new _s(-1,0,0),new _s(0,0,1),new _s(0,0,-1),new _s(0,1,0),new _s(0,-1,0)],e._cubeUps=[new _s(0,1,0),new _s(0,1,0),new _s(0,1,0),new _s(0,1,0),new _s(0,0,1),new _s(0,0,-1)],e}return or(t,e),dr(t,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),yv.setFromMatrixPosition(e.matrixWorld),n.position.copy(yv),bv.copy(n.position),bv.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(bv),n.updateMatrixWorld(),r.makeTranslation(-yv.x,-yv.y,-yv.z),gv.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gv)}}]),t}(pv),wv=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return hr(this,t),(r=nr(this,t,[e,n])).isPointLight=!0,r.type="PointLight",r.distance=i,r.decay=a,r.shadow=new xv,r}return or(t,e),dr(t,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),t}(lv),_v=function(e){function t(){var e;return hr(this,t),(e=nr(this,t,[new pc(-5,5,5,-5,.5,500)])).isDirectionalLightShadow=!0,e}return or(t,e),dr(t)}(pv),Ev=function(e){function t(e,n){var r;return hr(this,t),(r=nr(this,t,[e,n])).isDirectionalLight=!0,r.type="DirectionalLight",r.position.copy(Eu.DEFAULT_UP),r.updateMatrix(),r.target=new Eu,r.shadow=new _v,r}return or(t,e),dr(t,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),t}(lv),Sv=function(e){function t(e,n){var r;return hr(this,t),(r=nr(this,t,[e,n])).isAmbientLight=!0,r.type="AmbientLight",r}return or(t,e),dr(t)}(lv),Tv=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return hr(this,t),(r=nr(this,t,[e,n])).isRectAreaLight=!0,r.type="RectAreaLight",r.width=i,r.height=a,r}return or(t,e),dr(t,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var n=er(ir(t.prototype),"toJSON",this).call(this,e);return n.object.width=this.width,n.object.height=this.height,n}}]),t}(lv),Mv=function(){function e(){hr(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new _s)}return dr(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}(),kv=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mv,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return hr(this,t),(e=nr(this,t,[void 0,r])).isLightProbe=!0,e.sh=n,e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var n=er(ir(t.prototype),"toJSON",this).call(this,e);return n.object.sh=this.sh.toArray(),n}}]),t}(lv),Av=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t,[e])).textures={},n}return or(t,e),dr(t,[{key:"load",value:function(e,t,n,r){var i=this,a=new nv(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var n=this.textures;function r(e){return void 0===n[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),n[e]}var i=t.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new Gu).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var o=e.uniforms[a];switch(i.uniforms[a]={},o.type){case"t":i.uniforms[a].value=r(o.value);break;case"c":i.uniforms[a].value=(new Gu).setHex(o.value);break;case"v2":i.uniforms[a].value=(new Wo).fromArray(o.value);break;case"v3":i.uniforms[a].value=(new _s).fromArray(o.value);break;case"v4":i.uniforms[a].value=(new ps).fromArray(o.value);break;case"m3":i.uniforms[a].value=(new Xo).fromArray(o.value);break;case"m4":i.uniforms[a].value=(new Qs).fromArray(o.value);break;default:i.uniforms[a].value=o.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(var s in e.extensions)i.extensions[s]=e.extensions[s];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=r(e.map)),void 0!==e.matcap&&(i.matcap=r(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=r(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var u=e.normalScale;!1===Array.isArray(u)&&(u=[u,u]),i.normalScale=(new Wo).fromArray(u)}return void 0!==e.displacementMap&&(i.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=r(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=r(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=r(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=r(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=r(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=r(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Wo).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=r(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=r(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=r(e.thicknessMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=r(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){return new{ShadowMaterial:ym,SpriteMaterial:Hf,RawShaderMaterial:bm,ShaderMaterial:Hl,PointsMaterial:Ud,MeshPhysicalMaterial:wm,MeshStandardMaterial:xm,MeshPhongMaterial:_m,MeshToonMaterial:Em,MeshNormalMaterial:Sm,MeshLambertMaterial:Tm,MeshDepthMaterial:yf,MeshDistanceMaterial:bf,MeshBasicMaterial:Vu,MeshMatcapMaterial:Mm,LineDashedMaterial:km,LineBasicMaterial:kd,Material:Bu}[e]}}]),t}($m),Iv=function(){function e(){hr(this,e)}return dr(e,null,[{key:"decodeText",value:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),Lv=function(e){function t(){var e;return hr(this,t),(e=nr(this,t)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=er(ir(t.prototype),"toJSON",this).call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),t}(vl),Rv=function(e){function t(e){return hr(this,t),nr(this,t,[e])}return or(t,e),dr(t,[{key:"load",value:function(e,t,n,r){var i=this,a=new nv(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t={},n={};function r(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),o=Zo(i.type,a),s=new Uf(o,i.stride);return s.uuid=i.uuid,t[r]=s,s}var i=e.isInstancedBufferGeometry?new Lv:new vl,a=e.data.index;if(void 0!==a){var o=Zo(a.type,a.array);i.setIndex(new Qu(o,1))}var s=e.data.attributes;for(var u in s){var l=s[u],c=void 0;if(l.isInterleavedBufferAttribute){var h=r(e.data,l.data);c=new zf(h,l.itemSize,l.offset,l.normalized)}else{var f=Zo(l.type,l.array);c=new(l.isInstancedBufferAttribute?yd:Qu)(f,l.itemSize,l.normalized)}void 0!==l.name&&(c.name=l.name),void 0!==l.usage&&c.setUsage(l.usage),void 0!==l.updateRange&&(c.updateRange.offset=l.updateRange.offset,c.updateRange.count=l.updateRange.count),i.setAttribute(u,c)}var d=e.data.morphAttributes;if(d)for(var p in d){for(var m=d[p],v=[],g=0,y=m.length;g<y;g++){var b=m[g],x=void 0;if(b.isInterleavedBufferAttribute){var w=r(e.data,b.data);x=new zf(w,b.itemSize,b.offset,b.normalized)}else{var _=Zo(b.type,b.array);x=new Qu(_,b.itemSize,b.normalized)}void 0!==b.name&&(x.name=b.name),v.push(x)}i.morphAttributes[p]=v}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var E=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==E)for(var S=0,T=E.length;S!==T;++S){var M=E[S];i.addGroup(M.start,M.count,M.materialIndex)}var k=e.data.boundingSphere;if(void 0!==k){var A=new _s;void 0!==k.center&&A.fromArray(k.center),i.boundingSphere=new js(A,k.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}]),t}($m),Cv=function(e){function t(e){return hr(this,t),nr(this,t,[e])}var n,r,i;return or(t,e),dr(t,[{key:"load",value:function(e,t,n,r){var i=this,a=""===this.path?Iv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new nv(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(a,t)}),n,r)}},{key:"loadAsync",value:(i=Jn(lr().mark((function e(t,n){var r,i,a,o,s,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,i=""===this.path?Iv.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||i,(a=new nv(this.manager)).setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),e.next=9,a.loadAsync(t,n);case 9:if(o=e.sent,s=JSON.parse(o),void 0!==(u=s.metadata)&&void 0!==u.type&&"geometry"!==u.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,r.parseAsync(s);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(u)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,i,s,o,n),l=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,l),void 0!==t){var c=!1;for(var h in a)if(a[h].data instanceof HTMLImageElement){c=!0;break}!1===c&&t(u)}return u}},{key:"parseAsync",value:(r=Jn(lr().mark((function e(t){var n,r,i,a,o,s,u,l;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,o=this.parseTextures(t.textures,a),s=this.parseMaterials(t.materials,o),u=this.parseObject(t.object,i,s,o,n),l=this.parseSkeletons(t.skeletons,u),this.bindSkeletons(u,l),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Lp).fromJSON(e[n]);t[i.uuid]=i}return t}},{key:"parseSkeletons",value:function(e,t){var n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=(new gd).fromJSON(e[i],r);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var r=new Rv,i=0,a=e.length;i<a;i++){var o=void 0,s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;default:s.type in gm?o=gm[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n}},{key:"parseMaterials",value:function(e,t){var n={},r={};if(void 0!==e){var i=new Av;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n],i=Xm.parse(r);t[i.uuid]=i}return t}},{key:"parseImages",value:function(e,t){var n,r=this,i={};function a(e){if("string"==typeof e){var t=e;return function(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:r.resourcePath+t)}return e.data?{data:Zo(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var o=new Zm(t);(n=new av(o)).setCrossOrigin(this.crossOrigin);for(var s=0,u=e.length;s<u;s++){var l=e[s],c=l.url;if(Array.isArray(c)){for(var h=[],f=0,d=c.length;f<d;f++){var p=a(c[f]);null!==p&&(p instanceof HTMLImageElement?h.push(p):h.push(new pd(p.data,p.width,p.height)))}i[l.uuid]=new cs(h)}else{var m=a(l.url);i[l.uuid]=new cs(m)}}}return i}},{key:"parseImagesAsync",value:(n=Jn(lr().mark((function e(t){var n,r,i,a,o,s,u,l,c,h,f,d,p,m,v;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(){return o=Jn(lr().mark((function e(t){var r,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=8;break}return a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r=t)?r:n.resourcePath+r,e.next=5,i.loadAsync(a);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:Zo(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)},a=function(e){return o.apply(this,arguments)},n=this,r={},!(void 0!==t&&t.length>0)){e.next=33;break}(i=new av(this.manager)).setCrossOrigin(this.crossOrigin),s=0,u=t.length;case 8:if(!(s<u)){e.next=33;break}if(l=t[s],c=l.url,!Array.isArray(c)){e.next=26;break}h=[],f=0,d=c.length;case 14:if(!(f<d)){e.next=23;break}return p=c[f],e.next=18,a(p);case 18:null!==(m=e.sent)&&(m instanceof HTMLImageElement?h.push(m):h.push(new pd(m.data,m.width,m.height)));case 20:f++,e.next=14;break;case 23:r[l.uuid]=new cs(h),e.next=30;break;case 26:return e.next=28,a(l.url);case 28:v=e.sent,r[l.uuid]=new cs(v);case 30:s++,e.next=8;break;case 33:return e.abrupt("return",r);case 34:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=t[o.image],u=s.data,l=void 0;Array.isArray(u)?(l=new Wl,6===u.length&&(l.needsUpdate=!0)):(l=u&&u.data?new pd:new ds,u&&(l.needsUpdate=!0)),l.source=s,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,Pv)),void 0!==o.channel&&(l.channel=o.channel),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],Ov),l.wrapT=n(o.wrap[1],Ov)),void 0!==o.format&&(l.format=o.format),void 0!==o.internalFormat&&(l.internalFormat=o.internalFormat),void 0!==o.type&&(l.type=o.type),void 0!==o.colorSpace&&(l.colorSpace=o.colorSpace),void 0!==o.encoding&&(l.encoding=o.encoding),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,Dv)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,Dv)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.generateMipmaps&&(l.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(l.userData=o.userData),r[o.uuid]=l}return r}},{key:"parseObject",value:function(e,t,n,r,i){var a,o,s;function u(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function l(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new Bf,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new Gu(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new Nf(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Df(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new jl(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=tr({},e.view));break;case"OrthographicCamera":a=new pc(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=tr({},e.view));break;case"AmbientLight":a=new Sv(e.color,e.intensity);break;case"DirectionalLight":a=new Ev(e.color,e.intensity);break;case"PointLight":a=new wv(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Tv(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new vv(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new cv(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new kv).fromJSON(e);break;case"SkinnedMesh":o=u(e.geometry),s=l(e.material),a=new fd(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=u(e.geometry),s=l(e.material),a=new Ol(o,s);break;case"InstancedMesh":o=u(e.geometry),s=l(e.material);var h=e.count,f=e.instanceMatrix,d=e.instanceColor;(a=new Md(o,s,h)).instanceMatrix=new yd(new Float32Array(f.array),16),void 0!==d&&(a.instanceColor=new yd(new Float32Array(d.array),d.itemSize));break;case"LOD":a=new id;break;case"Line":a=new Pd(u(e.geometry),l(e.material));break;case"LineLoop":a=new Bd(u(e.geometry),l(e.material));break;case"LineSegments":a=new Nd(u(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new jd(u(e.geometry),l(e.material));break;case"Sprite":a=new ed(l(e.material));break;case"Group":a=new Tf;break;case"Bone":a=new dd;break;default:a=new Eu}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var p=e.children,m=0;m<p.length;m++)a.add(this.parseObject(p[m],t,n,r,i));if(void 0!==e.animations)for(var v=e.animations,g=0;g<v.length;g++){var y=v[g];a.animations.push(i[y])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var b=e.levels,x=0;x<b.length;x++){var w=b[x],_=a.getObjectByProperty("uuid",w.object);void 0!==_&&a.addLevel(_,w.distance,w.hysteresis)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}]),t}($m),Pv={UVMapping:mi,CubeReflectionMapping:vi,CubeRefractionMapping:gi,EquirectangularReflectionMapping:yi,EquirectangularRefractionMapping:bi,CubeUVReflectionMapping:xi},Ov={RepeatWrapping:wi,ClampToEdgeWrapping:_i,MirroredRepeatWrapping:Ei},Dv={NearestFilter:Si,NearestMipmapNearestFilter:Ti,NearestMipmapLinearFilter:ki,LinearFilter:Ii,LinearMipmapNearestFilter:Li,LinearMipmapLinearFilter:Ci},Nv=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t,[e])).isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),n.options={premultiplyAlpha:"none"},n}return or(t,e),dr(t,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Jm.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,tr(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Jm.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),t}($m),Bv=function(){function e(){hr(this,e)}return dr(e,null,[{key:"getContext",value:function(){return void 0===Km&&(Km=new(window.AudioContext||window.webkitAudioContext)),Km}},{key:"setContext",value:function(e){Km=e}}]),e}(),Uv=function(e){function t(e){return hr(this,t),nr(this,t,[e])}return or(t,e),dr(t,[{key:"load",value:function(e,t,n,r){var i=this,a=new nv(this.manager);function o(t){r?r(t):console.error(t),i.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){try{var n=e.slice(0);Bv.getContext().decodeAudioData(n,(function(e){t(e)}),o)}catch(e){o(e)}}),n,r)}}]),t}($m),Fv=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;hr(this,t),(r=nr(this,t,[void 0,i])).isHemisphereLightProbe=!0;var a=(new Gu).set(e),o=(new Gu).set(n),s=new _s(a.r,a.g,a.b),u=new _s(o.r,o.g,o.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);return r.sh.coefficients[0].copy(s).add(u).multiplyScalar(l),r.sh.coefficients[1].copy(s).sub(u).multiplyScalar(c),r}return or(t,e),dr(t)}(kv),zv=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;hr(this,t),(n=nr(this,t,[void 0,r])).isAmbientLightProbe=!0;var i=(new Gu).set(e);return n.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI)),n}return or(t,e),dr(t)}(kv),Hv=new Qs,Gv=new Qs,jv=new Qs,Vv=function(){function e(){hr(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new jl,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new jl,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return dr(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,jv.copy(e.projectionMatrix);var n,r,i=t.eyeSep/2,a=i*t.near/t.focus,o=t.near*Math.tan(Oo*t.fov*.5)/t.zoom;Gv.elements[12]=-i,Hv.elements[12]=i,n=-o*t.aspect+a,r=o*t.aspect+a,jv.elements[0]=2*t.near/(r-n),jv.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(jv),n=-o*t.aspect-a,r=o*t.aspect-a,jv.elements[0]=2*t.near/(r-n),jv.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(jv)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Gv),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Hv)}}]),e}(),qv=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];hr(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return dr(e,[{key:"start",value:function(){this.startTime=Wv(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=Wv();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function Wv(){return("undefined"==typeof performance?Date:performance).now()}var Xv=new _s,Yv=new ws,Kv=new _s,Jv=new _s,Zv=function(e){function t(){var e;return hr(this,t),(e=nr(this,t)).type="AudioListener",e.context=Bv.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new qv,e}return or(t,e),dr(t,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){er(ir(t.prototype),"updateMatrixWorld",this).call(this,e);var n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xv,Yv,Kv),Jv.set(0,0,-1).applyQuaternion(Yv),n.positionX){var i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Xv.x,i),n.positionY.linearRampToValueAtTime(Xv.y,i),n.positionZ.linearRampToValueAtTime(Xv.z,i),n.forwardX.linearRampToValueAtTime(Jv.x,i),n.forwardY.linearRampToValueAtTime(Jv.y,i),n.forwardZ.linearRampToValueAtTime(Jv.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Xv.x,Xv.y,Xv.z),n.setOrientation(Jv.x,Jv.y,Jv.z,r.x,r.y,r.z)}}]),t}(Eu),Qv=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t)).type="Audio",n.listener=e,n.context=e.context,n.gain=n.context.createGain(),n.gain.connect(e.getInput()),n.autoplay=!1,n.buffer=null,n.detune=0,n.loop=!1,n.loopStart=0,n.loopEnd=0,n.offset=0,n.duration=void 0,n.playbackRate=1,n.isPlaying=!1,n.hasPlaybackControl=!0,n.source=null,n.sourceType="empty",n._startedAt=0,n._progress=0,n._connected=!1,n.filters=[],n}return or(t,e),dr(t,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),t}(Eu),$v=new _s,eg=new ws,tg=new _s,ng=new _s,rg=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t,[e])).panner=n.context.createPanner(),n.panner.panningModel="HRTF",n.panner.connect(n.gain),n}return or(t,e),dr(t,[{key:"disconnect",value:function(){er(ir(t.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if(er(ir(t.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose($v,eg,tg),ng.set(0,0,1).applyQuaternion(eg);var n=this.panner;if(n.positionX){var r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime($v.x,r),n.positionY.linearRampToValueAtTime($v.y,r),n.positionZ.linearRampToValueAtTime($v.z,r),n.orientationX.linearRampToValueAtTime(ng.x,r),n.orientationY.linearRampToValueAtTime(ng.y,r),n.orientationZ.linearRampToValueAtTime(ng.z,r)}else n.setPosition($v.x,$v.y,$v.z),n.setOrientation(ng.x,ng.y,ng.z)}}}]),t}(Qv),ig=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;hr(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return dr(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),ag=function(){function e(t,n,r){var i,a,o;switch(hr(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return dr(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,l=t+t;u!==l;++u)if(n[u]!==n[u+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,r){ws.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var a=this._workIndex*i;ws.multiplyQuaternionsFlat(e,a,e,t,e,n),ws.slerpFlat(e,t,e,t,e,a,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}}]),e}(),og="\\[\\]\\.:\\/",sg=new RegExp("["+og+"]","g"),ug="[^"+og+"]",lg="[^"+og.replace("\\.","")+"]",cg=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",ug)+/(WCOD+)?/.source.replace("WCOD",lg)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ug)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ug)+"$"),hg=["material","materials","bones","map"],fg=function(){function e(t,n,r){hr(this,e);var i=r||dg.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return dr(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),dg=function(){function e(t,n,r){hr(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return dr(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(sg,"")}},{key:"parseTrackName",value:function(e){var t=cg.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==hg.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();dg.Composite=fg,dg.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},dg.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},dg.prototype.GetterByBindingType=[dg.prototype._getValue_direct,dg.prototype._getValue_array,dg.prototype._getValue_arrayElement,dg.prototype._getValue_toArray],dg.prototype.SetterByBindingTypeAndVersioning=[[dg.prototype._setValue_direct,dg.prototype._setValue_direct_setNeedsUpdate,dg.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[dg.prototype._setValue_array,dg.prototype._setValue_array_setNeedsUpdate,dg.prototype._setValue_array_setMatrixWorldNeedsUpdate],[dg.prototype._setValue_arrayElement,dg.prototype._setValue_arrayElement_setNeedsUpdate,dg.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[dg.prototype._setValue_fromArray,dg.prototype._setValue_fromArray_setNeedsUpdate,dg.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var pg=function(){function e(){hr(this,e),this.isAnimationObjectGroup=!0,this.uuid=No(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return dr(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=t[f];if(void 0===d){d=s++,t[f]=d,e.push(h);for(var p=0,m=a;p!==m;++p)i[p].push(new dg(h,n[p],r[p]))}else if(d<u){o=e[d];var v=--u,g=e[v];t[g.uuid]=d,e[d]=g,t[f]=v,e[v]=h;for(var y=0,b=a;y!==b;++y){var x=i[y],w=x[v],_=x[d];x[d]=w,void 0===_&&(_=new dg(h,n[y],r[y])),x[v]=_}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,l=t[u];if(void 0!==l&&l>=i){var c=i++,h=e[c];t[h.uuid]=l,e[l]=h,t[u]=c,e[c]=s;for(var f=0,d=r;f!==d;++f){var p=n[f],m=p[c],v=p[l];p[l]=m,p[c]=v}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o].uuid,l=t[u];if(void 0!==l)if(delete t[u],l<i){var c=--i,h=e[c],f=--a,d=e[f];t[h.uuid]=l,e[l]=h,t[d.uuid]=c,e[c]=d,e.pop();for(var p=0,m=r;p!==m;++p){var v=n[p],g=v[c],y=v[f];v[l]=g,v[c]=y,v.pop()}}else{var b=--a,x=e[b];b>0&&(t[x.uuid]=l),e[l]=x,e.pop();for(var w=0,_=r;w!==_;++w){var E=n[w];E[l]=E[b],E.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(var h=l,f=s.length;h!==f;++h){var d=s[h];c[h]=new dg(d,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}]),e}(),mg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;hr(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,o=a.length,s=new Array(o),u={endingStart:Ua,endingEnd:Ua},l=0;l!==o;++l){var c=a[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Pa,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return dr(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;a<0||0===n?t=0:(this._startTime=null,t=n*a)}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,l=this._propertyBindings;if(this.blendMode===Ga)for(var c=0,h=u.length;c!==h;++c)u[c].evaluate(o),l[c].accumulateAdditive(s);else for(var f=0,d=u.length;f!==d;++f)u[f].evaluate(o),l[f].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=n===Oa;if(0===e)return-1===i?r:a&&1==(1&i)?t-r:r;if(n===Ca){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1==(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Fa,r.endingEnd=Fa):(r.endingStart=e?this.zeroSlopeAtStart?Fa:Ua:za,r.endingEnd=t?this.zeroSlopeAtEnd?Fa:Ua:za)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}]),e}(),vg=new Float32Array(1),gg=function(e){function t(e){var n;return hr(this,t),(n=nr(this,t))._root=e,n._initMemoryManager(),n._accuIndex=0,n.time=0,n.timeScale=1,n}return or(t,e),dr(t,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=r[c],f=h.name,d=l[f];if(void 0!==d)++d.referenceCount,a[c]=d;else{if(void 0!==(d=a[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(d=new ag(dg.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),a[c]=d}o[c].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Bm(new Float32Array(2),new Float32Array(2),1,vg)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"==typeof e?Xm.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:Ha),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var c=new mg(this,a,t,n);return this._bindAction(c,u),this._addInactiveAction(c,o,i),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Xm.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(r,e,i,a);for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),t}(Ro),yg=function(){function e(t){hr(this,e),this.value=t}return dr(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),bg=0,xg=function(e){function t(){var e;return hr(this,t),(e=nr(this,t)).isUniformsGroup=!0,Object.defineProperty(ar(e),"id",{value:bg++}),e.name="",e.usage=bo,e.uniforms=[],e}return or(t,e),dr(t,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var t=e.uniforms;this.uniforms.length=0;for(var n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(Ro),wg=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return hr(this,t),(r=nr(this,t,[e,n])).isInstancedInterleavedBuffer=!0,r.meshPerAttribute=i,r}return or(t,e),dr(t,[{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var n=er(ir(t.prototype),"clone",this).call(this,e);return n.meshPerAttribute=this.meshPerAttribute,n}},{key:"toJSON",value:function(e){var n=er(ir(t.prototype),"toJSON",this).call(this,e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}]),t}(Uf),_g=function(){function e(t,n,r,i,a){hr(this,e),this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}return dr(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}(),Eg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;hr(this,e),this.ray=new Zs(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new lu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return dr(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Tg(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(Sg),t}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)Tg(e[r],this,n,t);return n.sort(Sg),n}}]),e}();function Sg(e,t){return e.distance-t.distance}function Tg(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,a=0,o=i.length;a<o;a++)Tg(i[a],t,n,!0)}var Mg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return hr(this,e),this.radius=t,this.phi=n,this.theta=r,this}return dr(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Bo(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),kg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return hr(this,e),this.radius=t,this.theta=n,this.y=r,this}return dr(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Ag=new Wo,Ig=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wo(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wo(-1/0,-1/0);hr(this,e),this.isBox2=!0,this.min=t,this.max=n}return dr(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Ag.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,Ag).distanceTo(e)}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Lg=new _s,Rg=new _s,Cg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s;hr(this,e),this.start=t,this.end=n}return dr(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){Lg.subVectors(e,this.start),Rg.subVectors(this.end,this.start);var n=Rg.dot(Rg),r=Rg.dot(Lg)/n;return t&&(r=Bo(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Pg=new _s,Og=function(e){function t(e,n){var r;hr(this,t),(r=nr(this,t)).light=e,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.color=n,r.type="SpotLightHelper";for(var i=new vl,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],o=0,s=1;o<32;o++,s++){var u=o/32*Math.PI*2,l=s/32*Math.PI*2;a.push(Math.cos(u),Math.sin(u),1,Math.cos(l),Math.sin(l),1)}i.setAttribute("position",new sl(a,3));var c=new kd({fog:!1,toneMapped:!1});return r.cone=new Nd(i,c),r.add(r.cone),r.update(),r}return or(t,e),dr(t,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Pg.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Pg),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),t}(Eu),Dg=new _s,Ng=new Qs,Bg=new Qs,Ug=function(e){function t(e){var n;hr(this,t);for(var r=Fg(e),i=new vl,a=[],o=[],s=new Gu(0,0,1),u=new Gu(0,1,0),l=0;l<r.length;l++){var c=r[l];c.parent&&c.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),o.push(s.r,s.g,s.b),o.push(u.r,u.g,u.b))}return i.setAttribute("position",new sl(a,3)),i.setAttribute("color",new sl(o,3)),(n=nr(this,t,[i,new kd({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})])).isSkeletonHelper=!0,n.type="SkeletonHelper",n.root=e,n.bones=r,n.matrix=e.matrixWorld,n.matrixAutoUpdate=!1,n}return or(t,e),dr(t,[{key:"updateMatrixWorld",value:function(e){var n=this.bones,r=this.geometry,i=r.getAttribute("position");Bg.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<n.length;a++){var s=n[a];s.parent&&s.parent.isBone&&(Ng.multiplyMatrices(Bg,s.matrixWorld),Dg.setFromMatrixPosition(Ng),i.setXYZ(o,Dg.x,Dg.y,Dg.z),Ng.multiplyMatrices(Bg,s.parent.matrixWorld),Dg.setFromMatrixPosition(Ng),i.setXYZ(o+1,Dg.x,Dg.y,Dg.z),o+=2)}r.getAttribute("position").needsUpdate=!0,er(ir(t.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),t}(Nd);function Fg(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Fg(e.children[n]));return t}var zg=function(e){function t(e,n,r){var i;return hr(this,t),(i=nr(this,t,[new cm(n,4,2),new Vu({wireframe:!0,fog:!1,toneMapped:!1})])).light=e,i.color=r,i.type="PointLightHelper",i.matrix=i.light.matrixWorld,i.matrixAutoUpdate=!1,i.update(),i}return or(t,e),dr(t,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),t}(Ol),Hg=new _s,Gg=new Gu,jg=new Gu,Vg=function(e){function t(e,n,r){var i;hr(this,t),(i=nr(this,t)).light=e,i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.color=r,i.type="HemisphereLightHelper";var a=new sm(n);a.rotateY(.5*Math.PI),i.material=new Vu({wireframe:!0,fog:!1,toneMapped:!1}),void 0===i.color&&(i.material.vertexColors=!0);var o=a.getAttribute("position"),s=new Float32Array(3*o.count);return a.setAttribute("color",new Qu(s,3)),i.add(new Ol(a,i.material)),i.update(),i}return or(t,e),dr(t,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Gg.copy(this.light.color),jg.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?Gg:jg;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Hg.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),t}(Eu),qg=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;hr(this,t),i=new Gu(i),a=new Gu(a);for(var o=r/2,s=n/r,u=n/2,l=[],c=[],h=0,f=0,d=-u;h<=r;h++,d+=s){l.push(-u,0,d,u,0,d),l.push(d,0,-u,d,0,u);var p=h===o?i:a;p.toArray(c,f),f+=3,p.toArray(c,f),f+=3,p.toArray(c,f),f+=3,p.toArray(c,f),f+=3}var m=new vl;return m.setAttribute("position",new sl(l,3)),m.setAttribute("color",new sl(c,3)),(e=nr(this,t,[m,new kd({vertexColors:!0,toneMapped:!1})])).type="GridHelper",e}return or(t,e),dr(t,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),t}(Nd),Wg=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;hr(this,t),o=new Gu(o),s=new Gu(s);var u=[],l=[];if(r>1)for(var c=0;c<r;c++){var h=c/r*(2*Math.PI),f=Math.sin(h)*n,d=Math.cos(h)*n;u.push(0,0,0),u.push(f,0,d);var p=1&c?o:s;l.push(p.r,p.g,p.b),l.push(p.r,p.g,p.b)}for(var m=0;m<i;m++)for(var v=1&m?o:s,g=n-n/i*m,y=0;y<a;y++){var b=y/a*(2*Math.PI),x=Math.sin(b)*g,w=Math.cos(b)*g;u.push(x,0,w),l.push(v.r,v.g,v.b),b=(y+1)/a*(2*Math.PI),x=Math.sin(b)*g,w=Math.cos(b)*g,u.push(x,0,w),l.push(v.r,v.g,v.b)}var _=new vl;return _.setAttribute("position",new sl(u,3)),_.setAttribute("color",new sl(l,3)),(e=nr(this,t,[_,new kd({vertexColors:!0,toneMapped:!1})])).type="PolarGridHelper",e}return or(t,e),dr(t,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),t}(Nd),Xg=new _s,Yg=new _s,Kg=new _s,Jg=function(e){function t(e,n,r){var i;hr(this,t),(i=nr(this,t)).light=e,i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.color=r,i.type="DirectionalLightHelper",void 0===n&&(n=1);var a=new vl;a.setAttribute("position",new sl([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));var o=new kd({fog:!1,toneMapped:!1});return i.lightPlane=new Pd(a,o),i.add(i.lightPlane),(a=new vl).setAttribute("position",new sl([0,0,0,0,0,1],3)),i.targetLine=new Pd(a,o),i.add(i.targetLine),i.update(),i}return or(t,e),dr(t,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Xg.setFromMatrixPosition(this.light.matrixWorld),Yg.setFromMatrixPosition(this.light.target.matrixWorld),Kg.subVectors(Yg,Xg),this.lightPlane.lookAt(Yg),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Yg),this.targetLine.scale.z=Kg.length()}}]),t}(Eu),Zg=new _s,Qg=new Gl,$g=function(e){function t(e){var n;hr(this,t);var r=new vl,i=new kd({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],o=[],s={};function u(e,t){l(e),l(t)}function l(e){a.push(0,0,0),o.push(0,0,0),void 0===s[e]&&(s[e]=[]),s[e].push(a.length/3-1)}u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4"),r.setAttribute("position",new sl(a,3)),r.setAttribute("color",new sl(o,3)),(n=nr(this,t,[r,i])).type="CameraHelper",n.camera=e,n.camera.updateProjectionMatrix&&n.camera.updateProjectionMatrix(),n.matrix=e.matrixWorld,n.matrixAutoUpdate=!1,n.pointMap=s,n.update();var c=new Gu(16755200),h=new Gu(16711680),f=new Gu(43775),d=new Gu(16777215),p=new Gu(3355443);return n.setColors(c,h,f,d,p),n}return or(t,e),dr(t,[{key:"setColors",value:function(e,t,n,r,i){var a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap;Qg.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ey("c",t,e,Qg,0,0,-1),ey("t",t,e,Qg,0,0,1),ey("n1",t,e,Qg,-1,-1,-1),ey("n2",t,e,Qg,1,-1,-1),ey("n3",t,e,Qg,-1,1,-1),ey("n4",t,e,Qg,1,1,-1),ey("f1",t,e,Qg,-1,-1,1),ey("f2",t,e,Qg,1,-1,1),ey("f3",t,e,Qg,-1,1,1),ey("f4",t,e,Qg,1,1,1),ey("u1",t,e,Qg,.7,1.1,-1),ey("u2",t,e,Qg,-.7,1.1,-1),ey("u3",t,e,Qg,0,2,-1),ey("cf1",t,e,Qg,-1,0,1),ey("cf2",t,e,Qg,1,0,1),ey("cf3",t,e,Qg,0,-1,1),ey("cf4",t,e,Qg,0,1,1),ey("cn1",t,e,Qg,-1,0,-1),ey("cn2",t,e,Qg,1,0,-1),ey("cn3",t,e,Qg,0,-1,-1),ey("cn4",t,e,Qg,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),t}(Nd);function ey(e,t,n,r,i,a,o){Zg.set(i,a,o).unproject(r);var s=t[e];if(void 0!==s)for(var u=n.getAttribute("position"),l=0,c=s.length;l<c;l++)u.setXYZ(s[l],Zg.x,Zg.y,Zg.z)}var ty,ny,ry=new Ts,iy=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;hr(this,t);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),o=new vl;return o.setIndex(new Qu(i,1)),o.setAttribute("position",new Qu(a,3)),(n=nr(this,t,[o,new kd({color:r,toneMapped:!1})])).object=e,n.type="BoxHelper",n.matrixAutoUpdate=!1,n.update(),n}return or(t,e),dr(t,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&ry.setFromObject(this.object),!ry.isEmpty()){var t=ry.min,n=ry.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,n){return er(ir(t.prototype),"copy",this).call(this,e,n),this.object=e.object,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),t}(Nd),ay=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;hr(this,t);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new vl;return a.setIndex(new Qu(i,1)),a.setAttribute("position",new sl([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(n=nr(this,t,[a,new kd({color:r,toneMapped:!1})])).box=e,n.type="Box3Helper",n.geometry.computeBoundingSphere(),n}return or(t,e),dr(t,[{key:"updateMatrixWorld",value:function(e){var n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),er(ir(t.prototype),"updateMatrixWorld",this).call(this,e))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),t}(Nd),oy=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;hr(this,t);var a=i,o=new vl;o.setAttribute("position",new sl([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),o.computeBoundingSphere(),(n=nr(this,t,[o,new kd({color:a,toneMapped:!1})])).type="PlaneHelper",n.plane=e,n.size=r;var s=new vl;return s.setAttribute("position",new sl([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),s.computeBoundingSphere(),n.add(new Ol(s,new Vu({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),n}return or(t,e),dr(t,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),er(ir(t.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}]),t}(Pd),sy=new _s,uy=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _s(0,0,1),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _s(0,0,0),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*i,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*o;return hr(this,t),(e=nr(this,t)).type="ArrowHelper",void 0===ty&&((ty=new vl).setAttribute("position",new sl([0,0,0,0,1,0],3)),(ny=new wp(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(r),e.line=new Pd(ty,new kd({color:a,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new Ol(ny,new Vu({color:a,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(n),e.setLength(i,o,s),e}return or(t,e),dr(t,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{sy.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(sy,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return er(ir(t.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}},{key:"dispose",value:function(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}]),t}(Eu),ly=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;hr(this,t);var r=[0,0,0,n,0,0,0,0,0,0,n,0,0,0,0,0,0,n],i=new vl;return i.setAttribute("position",new sl(r,3)),i.setAttribute("color",new sl([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),(e=nr(this,t,[i,new kd({vertexColors:!0,toneMapped:!1})])).type="AxesHelper",e}return or(t,e),dr(t,[{key:"setColors",value:function(e,t,n){var r=new Gu,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),t}(Nd),cy=function(){function e(){hr(this,e),this.type="ShapePath",this.color=new Gu,this.subPaths=[],this.currentPath=null}return dr(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new gp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function t(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],u=-u,s=t[i],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=l*(e.x-o.x)-u*(e.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var n,r,i,a=tm.isClockWise,o=this.subPaths;if(0===o.length)return[];var s=[];if(1===o.length)return r=o[0],(i=new Lp).curves=r.curves,s.push(i),s;var u=!a(o[0].getPoints());u=e?!u:u;var l,c,h=[],f=[],d=[],p=0;f[p]=void 0,d[p]=[];for(var m=0,v=o.length;m<v;m++)n=a(l=(r=o[m]).getPoints()),(n=e?!n:n)?(!u&&f[p]&&p++,f[p]={s:new Lp,p:l},f[p].s.curves=r.curves,u&&p++,d[p]=[]):d[p].push({h:r,p:l[0]});if(!f[0])return function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new Lp;a.curves=i.curves,t.push(a)}return t}(o);if(f.length>1){for(var g=!1,y=0,b=0,x=f.length;b<x;b++)h[b]=[];for(var w=0,_=f.length;w<_;w++)for(var E=d[w],S=0;S<E.length;S++){for(var T=E[S],M=!0,k=0;k<f.length;k++)t(T.p,f[k].p)&&(w!==k&&y++,M?(M=!1,h[k].push(T)):g=!0);M&&h[w].push(T)}y>0&&!1===g&&(d=h)}for(var A=0,I=f.length;A<I;A++){i=f[A].s,s.push(i);for(var L=0,R=(c=d[A]).length;L<R;L++)i.holes.push(c[L].h)}return s}}]),e}(),hy=function(e){function t(e,n,r,i,a,o){return hr(this,t),console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),nr(this,t,[e,n,r,i,a,o])}return or(t,e),dr(t)}(Nl),fy=function(e){function t(e,n,r,i){return hr(this,t),console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),nr(this,t,[e,n,r,i])}return or(t,e),dr(t)}(bp),dy=function(e){function t(e,n,r,i){return hr(this,t),console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),nr(this,t,[e,n,r,i])}return or(t,e),dr(t)}(xp),py=function(e){function t(e,n,r,i,a,o,s){return hr(this,t),console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),nr(this,t,[e,n,r,i,a,o,s])}return or(t,e),dr(t)}(_p),my=function(e){function t(e,n,r,i,a,o,s,u){return hr(this,t),console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),nr(this,t,[e,n,r,i,a,o,s,u])}return or(t,e),dr(t)}(wp),vy=function(e){function t(e,n){return hr(this,t),console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),nr(this,t,[e,n])}return or(t,e),dr(t)}(Sp),gy=function(e){function t(e,n){return hr(this,t),console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),nr(this,t,[e,n])}return or(t,e),dr(t)}(im),yy=function(e){function t(e,n){return hr(this,t),console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),nr(this,t,[e,n])}return or(t,e),dr(t)}(om),by=function(e){function t(e,n,r,i){return hr(this,t),console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),nr(this,t,[e,n,r,i])}return or(t,e),dr(t)}(yp),xy=function(e){function t(e,n){return hr(this,t),console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),nr(this,t,[e,n])}return or(t,e),dr(t)}(sm),wy=function(e){function t(e,n,r,i){return hr(this,t),console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),nr(this,t,[e,n,r,i])}return or(t,e),dr(t)}(rc),_y=function(e){function t(e,n,r,i){return hr(this,t),console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),nr(this,t,[e,n,r,i])}return or(t,e),dr(t)}(Ep),Ey=function(e){function t(e,n,r,i,a,o){return hr(this,t),console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),nr(this,t,[e,n,r,i,a,o])}return or(t,e),dr(t)}(um),Sy=function(e){function t(e,n){return hr(this,t),console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),nr(this,t,[e,n])}return or(t,e),dr(t)}(lm),Ty=function(e){function t(e,n,r,i,a,o,s){return hr(this,t),console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),nr(this,t,[e,n,r,i,a,o,s])}return or(t,e),dr(t)}(cm),My=function(e){function t(e,n){return hr(this,t),console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),nr(this,t,[e,n])}return or(t,e),dr(t)}(hm),ky=function(e){function t(e,n,r,i,a){return hr(this,t),console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),nr(this,t,[e,n,r,i,a])}return or(t,e),dr(t)}(fm),Ay=function(e){function t(e,n,r,i,a,o){return hr(this,t),console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),nr(this,t,[e,n,r,i,a,o])}return or(t,e),dr(t)}(dm),Iy=function(e){function t(e,n,r,i,a){return hr(this,t),console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),nr(this,t,[e,n,r,i,a])}return or(t,e),dr(t)}(pm);function Ly(e){return Ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ly(e)}function Ry(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cy(r.key),r)}}function Cy(e){var t=function(e,t){if("object"!=Ly(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ly(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ly(t)?t:String(t)}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:mr}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=mr);var Py=new pc(-1,1,1,-1,0,1),Oy=new vl;Oy.setAttribute("position",new sl([-1,3,0,-1,-1,0,3,-1,0],3)),Oy.setAttribute("uv",new sl([0,2,0,0,2,0],2));var Dy=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._mesh=new Ol(Oy,t)}return t=e,n=[{key:"dispose",value:function(){this._mesh.geometry.dispose()}},{key:"render",value:function(e){e.render(this._mesh,Py)}},{key:"material",get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}],n&&Ry(t.prototype,n),r&&Ry(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e;var t,n,r}();function Ny(e){return Ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(e)}function By(e,t,n,r){return By="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var i,a=zy(e,t);if(a){if((i=Object.getOwnPropertyDescriptor(a,t)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,t)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,t,i)}else!function(e,t,n){(t=Zy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0},By(e,t,n,r)}function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uy.apply(this,arguments)}function Fy(){return Fy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=zy(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Fy.apply(this,arguments)}function zy(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qy(e)););return e}function Hy(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Gy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gy(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Gy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jy(e,t,n){return t=qy(t),function(e,t){if(t&&("object"===Ny(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Vy()?Reflect.construct(t,n||[],qy(e).constructor):t.apply(e,n))}function Vy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vy=function(){return!!e})()}function qy(e){return qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qy(e)}function Wy(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xy(e,t)}function Xy(e,t){return Xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xy(e,t)}function Yy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ky(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zy(r.key),r)}}function Jy(e,t,n){return t&&Ky(e.prototype,t),n&&Ky(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zy(e){var t=function(e,t){if("object"!=Ny(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ny(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ny(t)?t:String(t)}var Qy="srgb",$y="srgb-linear",eb=Number(mr.replace(/\D+/g,""))>=152,tb=new Map([[Wa,$y],[Xa,Qy]]),nb=new Map([[$y,Wa],[Qy,Xa]]);function rb(e){return null===e?null:eb?e.outputColorSpace:tb.get(e.outputEncoding)}function ib(e,t){null!==e&&(eb?e.colorSpace=t:e.encoding=nb.get(t))}new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10]);var ab=function(e){function t(){return Yy(this,t),jy(this,t,[{name:"CopyMaterial",uniforms:{inputBuffer:new yg(null),opacity:new yg(1)},blending:Lr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:"varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}"}])}return Wy(t,e),Jy(t,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"getOpacity",value:function(e){return this.uniforms.opacity.value}},{key:"setOpacity",value:function(e){this.uniforms.opacity.value=e}}]),t}(Hl),ob=new Gl,sb=null,ub=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pass",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bf,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ob;Yy(this,e),this.name=t,this.renderer=null,this.scene=n,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}return Jy(e,[{key:"renderToScreen",get:function(){return!this.rtt},set:function(e){if(this.rtt===e){var t=this.fullscreenMaterial;null!==t&&(t.needsUpdate=!0),this.rtt=!e}}},{key:"mainScene",set:function(e){}},{key:"mainCamera",set:function(e){}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){this.enabled=e}},{key:"fullscreenMaterial",get:function(){return null!==this.screen?this.screen.material:null},set:function(e){var t=this.screen;null!==t?t.material=e:((t=new Ol(function(){if(null===sb){var e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(sb=new vl).setAttribute?(sb.setAttribute("position",new Qu(e,3)),sb.setAttribute("uv",new Qu(t,2))):(sb.addAttribute("position",new Qu(e,3)),sb.addAttribute("uv",new Qu(t,2)))}return sb}(),e)).frustumCulled=!1,null===this.scene&&(this.scene=new Bf),this.scene.add(t),this.screen=t)}},{key:"getFullscreenMaterial",value:function(){return this.fullscreenMaterial}},{key:"setFullscreenMaterial",value:function(e){this.fullscreenMaterial=e}},{key:"getDepthTexture",value:function(){return null}},{key:"setDepthTexture",value:function(e){}},{key:"render",value:function(e,t,n,r,i){throw new Error("Render method not implemented!")}},{key:"setSize",value:function(e,t){}},{key:"initialize",value:function(e,t,n){}},{key:"dispose",value:function(){for(var t=0,n=Object.keys(this);t<n.length;t++){var r=n[t],i=this[r];(i instanceof ms||i instanceof Bu||i instanceof ds||i instanceof e)&&this[r].dispose()}}}]),e}(),lb=function(e){function t(e){var n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Yy(this,t),(n=jy(this,t,["CopyPass"])).fullscreenMaterial=new ab,n.needsSwap=!1,n.renderTarget=e,void 0===e&&(n.renderTarget=new ms(1,1,{minFilter:Ii,magFilter:Ii,stencilBuffer:!1,depthBuffer:!1}),n.renderTarget.texture.name="CopyPass.Target"),n.autoResize=r,n}return Wy(t,e),Jy(t,[{key:"resize",get:function(){return this.autoResize},set:function(e){this.autoResize=e}},{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"setAutoResizeEnabled",value:function(e){this.autoResize=e}},{key:"render",value:function(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}},{key:"initialize",value:function(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==Oi?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":rb(e)===Qy&&ib(this.renderTarget.texture,Qy))}}]),t}(ub),cb=function(e){function t(){var e;return Yy(this,t),(e=jy(this,t,["ClearMaskPass",null,null])).needsSwap=!1,e}return Wy(t,e),Jy(t,[{key:"render",value:function(e,t,n,r,i){var a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}}]),t}(ub),hb=new Gu,fb=function(e){function t(){var e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Yy(this,t),(e=jy(this,t,["ClearPass",null,null])).needsSwap=!1,e.color=n,e.depth=r,e.stencil=i,e.overrideClearColor=null,e.overrideClearAlpha=-1,e}return Wy(t,e),Jy(t,[{key:"setClearFlags",value:function(e,t,n){this.color=e,this.depth=t,this.stencil=n}},{key:"getOverrideClearColor",value:function(){return this.overrideClearColor}},{key:"setOverrideClearColor",value:function(e){this.overrideClearColor=e}},{key:"getOverrideClearAlpha",value:function(){return this.overrideClearAlpha}},{key:"setOverrideClearAlpha",value:function(e){this.overrideClearAlpha=e}},{key:"render",value:function(e,t,n,r,i){var a=this.overrideClearColor,o=this.overrideClearAlpha,s=e.getClearAlpha(),u=null!==a,l=o>=0;u?(e.getClearColor(hb),e.setClearColor(a,l?o:s)):l&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),u?e.setClearColor(hb,s):l&&e.setClearAlpha(s)}}]),t}(ub),db=!1,pb=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Yy(this,e),this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=function(e){if(e.isMesh){var n;if(e.material.flatShading)switch(e.material.side){case Ar:n=t.materialsFlatShadedDoubleSide;break;case kr:n=t.materialsFlatShadedBackSide;break;default:n=t.materialsFlatShaded}else switch(e.material.side){case Ar:n=t.materialsDoubleSide;break;case kr:n=t.materialsBackSide;break;default:n=t.materials}t.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++t.meshCount}}}return Jy(e,[{key:"cloneMaterial",value:function(e){if(!(e instanceof Hl))return e.clone();var t=e.uniforms,n=new Map;for(var r in t){var i=t[r].value;i.isRenderTargetTexture&&(t[r].value=null,n.set(r,i))}var a,o=e.clone(),s=Hy(n);try{for(s.s();!(a=s.n()).done;){var u=a.value;t[u[0]].value=u[1],o.uniforms[u[0]].value=u[1]}}catch(e){s.e(e)}finally{s.f()}return o}},{key:"setMaterial",value:function(e){var t=this;if(this.disposeMaterials(),this.material=e,null!==e){for(var n=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)],r=0,i=n;r<i.length;r++){var a=i[r];a.uniforms=Uy({},e.uniforms),a.side=Mr}n[2].skinning=!0,this.materialsBackSide=n.map((function(n){var r=t.cloneMaterial(n);return r.uniforms=Uy({},e.uniforms),r.side=kr,r})),this.materialsDoubleSide=n.map((function(n){var r=t.cloneMaterial(n);return r.uniforms=Uy({},e.uniforms),r.side=Ar,r})),this.materialsFlatShaded=n.map((function(n){var r=t.cloneMaterial(n);return r.uniforms=Uy({},e.uniforms),r.flatShading=!0,r})),this.materialsFlatShadedBackSide=n.map((function(n){var r=t.cloneMaterial(n);return r.uniforms=Uy({},e.uniforms),r.flatShading=!0,r.side=kr,r})),this.materialsFlatShadedDoubleSide=n.map((function(n){var r=t.cloneMaterial(n);return r.uniforms=Uy({},e.uniforms),r.flatShading=!0,r.side=Ar,r}))}}},{key:"render",value:function(e,t,n){var r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,db){var i=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);var a,o=Hy(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;s[0].material=s[1]}}catch(e){o.e(e)}finally{o.f()}this.meshCount!==i.size&&i.clear()}else{var u=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=u}e.shadowMap.enabled=r}},{key:"disposeMaterials",value:function(){if(null!==this.material){var e,t=Hy(this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide));try{for(t.s();!(e=t.n()).done;)e.value.dispose()}catch(e){t.e(e)}finally{t.f()}}}},{key:"dispose",value:function(){this.originalMaterials.clear(),this.disposeMaterials()}}],[{key:"workaroundEnabled",get:function(){return db},set:function(e){db=e}}]),e}(),mb=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Yy(this,t),(r=jy(this,t,["RenderPass",e,n])).needsSwap=!1,r.clearPass=new fb,r.overrideMaterialManager=null===i?null:new pb(i),r.ignoreBackground=!1,r.skipShadowMapUpdate=!1,r.selection=null,r}return Wy(t,e),Jy(t,[{key:"mainScene",set:function(e){this.scene=e}},{key:"mainCamera",set:function(e){this.camera=e}},{key:"renderToScreen",get:function(){return Fy(qy(t.prototype),"renderToScreen",this)},set:function(e){!function(e,t,n,r,i){if(!By(e,"renderToScreen",n,r||e))throw new TypeError("failed to set property")}(qy(t.prototype),0,e,this),this.clearPass.renderToScreen=e}},{key:"overrideMaterial",get:function(){var e=this.overrideMaterialManager;return null!==e?e.material:null},set:function(e){var t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new pb(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}},{key:"getOverrideMaterial",value:function(){return this.overrideMaterial}},{key:"setOverrideMaterial",value:function(e){this.overrideMaterial=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getSelection",value:function(){return this.selection}},{key:"setSelection",value:function(e){this.selection=e}},{key:"isBackgroundDisabled",value:function(){return this.ignoreBackground}},{key:"setBackgroundDisabled",value:function(e){this.ignoreBackground=e}},{key:"isShadowMapDisabled",value:function(){return this.skipShadowMapUpdate}},{key:"setShadowMapDisabled",value:function(e){this.skipShadowMapUpdate=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"render",value:function(e,t,n,r,i){var a=this.scene,o=this.camera,s=this.selection,u=o.layers.mask,l=a.background,c=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;null!==s&&o.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,a,o):e.render(a,o),o.layers.mask=u,a.background=l,e.shadowMap.autoUpdate=c}}]),t}(ub);new Float32Array([255/256/Math.pow(256,3),255/256/Math.pow(256,2),255/256/256,255/256]);var vb=function(e){function t(e,n){var r;return Yy(this,t),(r=jy(this,t,["MaskPass",e,n])).needsSwap=!1,r.clearPass=new fb(!1,!1,!0),r.inverse=!1,r}return Wy(t,e),Jy(t,[{key:"mainScene",set:function(e){this.scene=e}},{key:"mainCamera",set:function(e){this.camera=e}},{key:"inverted",get:function(){return this.inverse},set:function(e){this.inverse=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"isInverted",value:function(){return this.inverted}},{key:"setInverted",value:function(e){this.inverted=e}},{key:"render",value:function(e,t,n,r,i){var a=e.getContext(),o=e.state.buffers,s=this.scene,u=this.camera,l=this.clearPass,c=this.inverted?0:1,h=1-c;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.stencil.setFunc(a.ALWAYS,c,4294967295),o.stencil.setClear(h),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?l.render(e,null):(l.render(e,t),l.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,u)):(e.setRenderTarget(t),e.render(s,u),e.setRenderTarget(n),e.render(s,u)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(a.EQUAL,1,4294967295),o.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.stencil.setLocked(!0)}}]),t}(ub),gb=.001,yb=function(){function e(){Yy(this,e),this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}return Jy(e,[{key:"autoReset",get:function(){return this._autoReset},set:function(e){"undefined"!=typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}},{key:"delta",get:function(){return this._delta*gb}},{key:"fixedDelta",get:function(){return this._fixedDelta*gb},set:function(e){this._fixedDelta=1e3*e}},{key:"elapsed",get:function(){return this._elapsed*gb}},{key:"update",value:function(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}},{key:"reset",value:function(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}},{key:"handleEvent",value:function(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}},{key:"dispose",value:function(){this.autoReset=!1}}]),e}(),bb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.depthBuffer,i=void 0===r||r,a=n.stencilBuffer,o=void 0!==a&&a,s=n.multisampling,u=void 0===s?0:s,l=n.frameBufferType;Yy(this,e),this.renderer=null,this.inputBuffer=this.createBuffer(i,o,l,u),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new lb,this.depthTexture=null,this.passes=[],this.timer=new yb,this.autoRenderToScreen=!0,this.setRenderer(t)}return Jy(e,[{key:"multisampling",get:function(){return this.inputBuffer.samples||0},set:function(e){var t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}},{key:"getTimer",value:function(){return this.timer}},{key:"getRenderer",value:function(){return this.renderer}},{key:"setRenderer",value:function(e){if(this.renderer=e,null!==e){var t=e.getSize(new Wo),n=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===Oi&&rb(e)===Qy&&(ib(this.inputBuffer.texture,Qy),ib(this.outputBuffer.texture,Qy),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);var i,a=Hy(this.passes);try{for(a.s();!(i=a.n()).done;)i.value.initialize(e,n,r)}catch(e){a.e(e)}finally{a.f()}}}},{key:"replaceRenderer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(e),t&&null!==r&&(r.removeChild(n.domElement),r.appendChild(e.domElement)),n}},{key:"createDepthTexture",value:function(){var e=this.depthTexture=new Af;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Ji,e.type=Vi):e.type=Fi,e}},{key:"deleteDepthTexture",value:function(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();var e,t=Hy(this.passes);try{for(t.s();!(e=t.n()).done;)e.value.setDepthTexture(null)}catch(e){t.e(e)}finally{t.f()}}}},{key:"createBuffer",value:function(e,t,n,r){var i=this.renderer,a=null===i?new Wo:i.getDrawingBufferSize(new Wo),o={minFilter:Ii,magFilter:Ii,stencilBuffer:t,depthBuffer:e,type:n},s=new ms(a.width,a.height,o);return r>0&&(s.ignoreDepthForMultisampleCopy=!1,s.samples=r),n===Oi&&rb(i)===Qy&&ib(s.texture,Qy),s.texture.name="EffectComposer.Buffer",s.texture.generateMipmaps=!1,s}},{key:"setMainScene",value:function(e){var t,n=Hy(this.passes);try{for(n.s();!(t=n.n()).done;)t.value.mainScene=e}catch(e){n.e(e)}finally{n.f()}}},{key:"setMainCamera",value:function(e){var t,n=Hy(this.passes);try{for(n.s();!(t=n.n()).done;)t.value.mainCamera=e}catch(e){n.e(e)}finally{n.f()}}},{key:"addPass",value:function(e,t){var n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new Wo),a=r.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(i.width,i.height),e.initialize(r,a,o),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){var s,u=this.createDepthTexture(),l=Hy(n);try{for(l.s();!(s=l.n()).done;)(e=s.value).setDepthTexture(u)}catch(e){l.e(e)}finally{l.f()}}else e.setDepthTexture(this.depthTexture)}},{key:"removePass",value:function(e){var t=this.passes,n=t.indexOf(e);-1!==n&&t.splice(n,1).length>0&&(null!==this.depthTexture&&(t.reduce((function(e,t){return e||t.needsDepthTexture}),!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())),this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0)))}},{key:"removeAllPasses",value:function(){var e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}},{key:"render",value:function(e){var t,n,r,i=this.renderer,a=this.copyPass,o=this.inputBuffer,s=this.outputBuffer,u=!1;void 0===e&&(this.timer.update(),e=this.timer.delta);var l,c=Hy(this.passes);try{for(c.s();!(l=c.n()).done;){var h=l.value;h.enabled&&(h.render(i,o,s,e,u),h.needsSwap&&(u&&(a.renderToScreen=h.renderToScreen,t=i.getContext(),(n=i.state.buffers.stencil).setFunc(t.NOTEQUAL,1,4294967295),a.render(i,o,s,e,u),n.setFunc(t.EQUAL,1,4294967295)),r=o,o=s,s=r),h instanceof vb?u=!0:h instanceof cb&&(u=!1))}}catch(e){c.e(e)}finally{c.f()}}},{key:"setSize",value:function(e,t,n){var r=this.renderer,i=r.getSize(new Wo);void 0!==e&&void 0!==t||(e=i.width,t=i.height),i.width===e&&i.height===t||r.setSize(e,t,n);var a=r.getDrawingBufferSize(new Wo);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);var o,s=Hy(this.passes);try{for(s.s();!(o=s.n()).done;)o.value.setSize(a.width,a.height)}catch(e){s.e(e)}finally{s.f()}}},{key:"reset",value:function(){var e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}},{key:"dispose",value:function(){var e,t=Hy(this.passes);try{for(t.s();!(e=t.n()).done;)e.value.dispose()}catch(e){t.e(e)}finally{t.f()}this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}}]),e}();function xb(e,t,n){return e+(t-e)*n}function wb(e,t,n,r){var i=xb(e,t,.75),a=xb(n,r,.75);return xb(i,a,.875)}function _b(e){return _b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_b(e)}function Eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eb(Object(n),!0).forEach((function(t){Tb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tb(e,t,n){return(t=kb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kb(r.key),r)}}function kb(e){var t=function(e,t){if("object"!=_b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=_b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_b(t)?t:String(t)}function Ab(e,t,n){return t=Lb(t),function(e,t){if(t&&("object"===_b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ib()?Reflect.construct(t,n||[],Lb(e).constructor):t.apply(e,n))}function Ib(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ib=function(){return!!e})()}function Lb(e){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lb(e)}function Rb(e,t){return Rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rb(e,t)}new _s,new Qs,new Gu,new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),wb(0,0,0,0),new Float32Array([0,0,0,0]),wb(0,0,0,1),new Float32Array([0,0,0,1]),wb(0,0,1,0),new Float32Array([0,0,1,0]),wb(0,0,1,1),new Float32Array([0,0,1,1]),wb(0,1,0,0),new Float32Array([0,1,0,0]),wb(0,1,0,1),new Float32Array([0,1,0,1]),wb(0,1,1,0),new Float32Array([0,1,1,0]),wb(0,1,1,1),new Float32Array([0,1,1,1]),wb(1,0,0,0),new Float32Array([1,0,0,0]),wb(1,0,0,1),new Float32Array([1,0,0,1]),wb(1,0,1,0),new Float32Array([1,0,1,0]),wb(1,0,1,1),new Float32Array([1,0,1,1]),wb(1,1,0,0),new Float32Array([1,1,0,0]),wb(1,1,0,1),new Float32Array([1,1,0,1]),wb(1,1,1,0),new Float32Array([1,1,1,0]),wb(1,1,1,1),new Float32Array([1,1,1,1]),Math.PI,new _s,new _s;var Cb={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},projMat:{value:new Qs},viewMat:{value:new Qs},projViewMat:{value:new Qs},projectionMatrixInv:{value:new Qs},viewMatrixInv:{value:new Qs},cameraPos:{value:new _s},resolution:{value:new Wo},time:{value:0},samples:{value:[]},samplesR:{value:[]},bluenoise:{value:null},distanceFalloff:{value:1},radius:{value:5},near:{value:.1},far:{value:1e3},logDepth:{value:!1},ortho:{value:!1}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\n    #define SAMPLES 16\n    #define FSAMPLES 16.0\nuniform sampler2D sceneDiffuse;\nuniform highp sampler2D sceneDepth;\nuniform mat4 projectionMatrixInv;\nuniform mat4 viewMatrixInv;\nuniform mat4 projMat;\nuniform mat4 viewMat;\nuniform mat4 projViewMat;\nuniform vec3 cameraPos;\nuniform vec2 resolution;\nuniform float time;\nuniform vec3[SAMPLES] samples;\nuniform float[SAMPLES] samplesR;\nuniform float radius;\nuniform float distanceFalloff;\nuniform float near;\nuniform float far;\nuniform bool logDepth;\nuniform bool ortho;\nuniform sampler2D bluenoise;\n    varying vec2 vUv;\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        return (zFar * zNear) / (zFar - d * (zFar - zNear));\n    }\n    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n      return nearZ + (farZ - nearZ) * d;\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      return ortho ? linearize_depth_ortho(\n        linDepth,\n        nearZ,\n        farZ\n      ) :linearize_depth(linDepth, nearZ, farZ);\n    }\n\n    vec3 getWorldPosLog(vec3 posS) {\n      vec2 uv = posS.xy;\n      float z = posS.z;\n      float nearZ =near;\n      float farZ = far;\n      float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n      vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n      return wpos.xyz / wpos.w;\n    }\n    vec3 getWorldPos(float depth, vec2 coord) {\n      #ifdef LOGDEPTH\n        return getWorldPosLog(vec3(coord, depth));\n      #endif\n      float z = depth * 2.0 - 1.0;\n      vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n      vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n      // Perspective division\n     vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n     worldSpacePosition.xyz /= worldSpacePosition.w;\n      return worldSpacePosition.xyz;\n  }\n\n  vec3 computeNormal(vec3 worldPos, vec2 vUv) {\n    ivec2 p = ivec2(vUv * resolution);\n    float c0 = texelFetch(sceneDepth, p, 0).x;\n    float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;\n    float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;\n    float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;\n    float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;\n    float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;\n    float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;\n    float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;\n    float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;\n\n    float dl = abs((2.0 * l1 - l2) - c0);\n    float dr = abs((2.0 * r1 - r2) - c0);\n    float db = abs((2.0 * b1 - b2) - c0);\n    float dt = abs((2.0 * t1 - t2) - c0);\n\n    vec3 ce = getWorldPos(c0, vUv).xyz;\n\n    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz\n                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;\n    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz\n                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;\n\n    return normalize(cross(dpdx, dpdy));\n}\n\nvoid main() {\n      vec4 diffuse = texture2D(sceneDiffuse, vUv);\n      float depth = texture2D(sceneDepth, vUv).x;\n      if (depth == 1.0) {\n        gl_FragColor = vec4(vec3(1.0), 1.0);\n        return;\n      }\n      vec3 worldPos = getWorldPos(depth, vUv);\n      float bias = (near / 0.1) * fwidth(distance(worldPos, cameraPos)) / radius;\n      vec3 normal = computeNormal(worldPos, vUv);\n      vec4 noise = texture2D(bluenoise, vUv * (resolution / vec2(128.0)));\n      vec3 randomVec = normalize(noise.rgb * 2.0 - 1.0);\n      vec3 tangent = normalize(randomVec - normal * dot(randomVec, normal));\n      vec3 bitangent = cross(normal, tangent);\n      mat3 tbn = mat3(tangent, bitangent, normal);\n      float occluded = 0.0;\n      float totalWeight = 0.0;\n      for(float i = 0.0; i < FSAMPLES; i++) {\n        vec3 sampleDirection = \n        tbn * \n        samples[int(i)];\n        ;\n        float moveAmt = samplesR[int(mod(i + noise.a * FSAMPLES, FSAMPLES))];\n        vec3 samplePos = worldPos + radius * moveAmt * sampleDirection;\n        vec4 offset = projViewMat * vec4(samplePos, 1.0);\n        offset.xyz /= offset.w;\n        offset.xyz = offset.xyz * 0.5 + 0.5;\n        float sampleDepth = textureLod(sceneDepth, offset.xy, 0.0).x;\n        /*float distSample = logDepth ? linearize_depth_log(sampleDepth, near, far) \n         (ortho ?  linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far));*/\n        #ifdef LOGDEPTH\n        float distSample = linearize_depth_log(sampleDepth, near, far);\n        #else\n        float distSample = ortho ? linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far);\n        #endif\n        float distWorld = ortho ? linearize_depth_ortho(offset.z, near, far) : linearize_depth(offset.z, near, far);\n        float rangeCheck = smoothstep(0.0, 1.0, distanceFalloff / (abs(distSample - distWorld)));\n        vec2 diff = gl_FragCoord.xy - ( offset.xy * resolution);\n        float weight = dot(sampleDirection, normal);\n          occluded += rangeCheck * weight * \n            (distSample + bias\n               < distWorld ? 1.0 : 0.0) * (\n          (dot(\n            diff,\n            diff\n             \n            ) < 1.0 || (sampleDepth == depth) ? 0.0 : 1.0)\n          );\n          totalWeight += weight;\n      }\n      float occ = clamp(1.0 - occluded / totalWeight, 0.0, 1.0);\n      gl_FragColor = vec4(0.5 + 0.5 * normal, occ);\n}"},Pb={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new Qs},viewMat:{value:new Qs},projectionMatrixInv:{value:new Qs},viewMatrixInv:{value:new Qs},cameraPos:{value:new _s},resolution:{value:new Wo},color:{value:new _s(0,0,0)},blueNoise:{value:null},time:{value:0},intensity:{value:10},renderMode:{value:0},gammaCorrection:{value:!1}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\t\tuniform sampler2D sceneDiffuse;\n    uniform sampler2D sceneDepth;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D blueNoise;\n    uniform vec2 resolution;\n    uniform vec3 color;\n    uniform float intensity;\n    uniform float renderMode;\n    uniform bool gammaCorrection;\n    varying vec2 vUv;\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        highp float z_n = 2.0 * d - 1.0;\n        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));\n    }\n    #include <common>\n    #include <dithering_pars_fragment>\n    void main() {\n        vec4 texel = texture2D(tDiffuse, vUv);//vec3(0.0);\n        vec4 sceneTexel = texture2D(sceneDiffuse, vUv);\n        float finalAo = pow(texel.a, intensity);\n        if (renderMode == 0.0) {\n            gl_FragColor = vec4( mix(sceneTexel.rgb, color, 1.0 - finalAo), sceneTexel.a);\n        } else if (renderMode == 1.0) {\n            gl_FragColor = vec4( mix(vec3(1.0), color, 1.0 - finalAo), sceneTexel.a);\n        } else if (renderMode == 2.0) {\n            gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n        } else if (renderMode == 3.0) {\n            if (vUv.x < 0.5) {\n                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {\n                gl_FragColor = vec4(1.0);\n            } else {\n                gl_FragColor = vec4( mix(sceneTexel.rgb, color, 1.0 - finalAo), sceneTexel.a);\n            }\n        } else if (renderMode == 4.0) {\n            if (vUv.x < 0.5) {\n                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {\n                gl_FragColor = vec4(1.0);\n            } else {\n                gl_FragColor = vec4( mix(vec3(1.0), color, 1.0 - finalAo), sceneTexel.a);\n            }\n        }\n        #include <dithering_fragment>\n        if (gammaCorrection) {\n            gl_FragColor = LinearTosRGB(gl_FragColor);\n        }\n    }\n    "},Ob={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new Qs},viewMat:{value:new Qs},projectionMatrixInv:{value:new Qs},viewMatrixInv:{value:new Qs},cameraPos:{value:new _s},resolution:{value:new Wo},time:{value:0},r:{value:5},blueNoise:{value:null},radius:{value:12},index:{value:0},poissonDisk:{value:[]},distanceFalloff:{value:1},near:{value:.1},far:{value:1e3},logDepth:{value:!1}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\t\tuniform sampler2D sceneDiffuse;\n    uniform highp sampler2D sceneDepth;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D blueNoise;\n    uniform mat4 projectionMatrixInv;\n    uniform mat4 viewMatrixInv;\n    uniform vec2 resolution;\n    uniform float r;\n    uniform float radius;\n    uniform float index;\n     uniform float near;\n     uniform float far;\n     uniform float distanceFalloff;\n     uniform bool logDepth;\n    varying vec2 vUv;\n\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        highp float z_n = 2.0 * d - 1.0;\n        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n     float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n     float a = farZ / (farZ - nearZ);\n     float b = farZ * nearZ / (nearZ - farZ);\n     float linDepth = a + b / depth;\n     return linearize_depth(linDepth, nearZ, farZ);\n   }\n   highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n     return nearZ + (farZ - nearZ) * d;\n   }\n   vec3 getWorldPosLog(vec3 posS) {\n     vec2 uv = posS.xy;\n     float z = posS.z;\n     float nearZ =near;\n     float farZ = far;\n     float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n     float a = farZ / (farZ - nearZ);\n     float b = farZ * nearZ / (nearZ - farZ);\n     float linDepth = a + b / depth;\n     vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n     vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n     return wpos.xyz / wpos.w;\n   }\n    vec3 getWorldPos(float depth, vec2 coord) {\n     #ifdef LOGDEPTH\n          return getWorldPosLog(vec3(coord, depth));\n     #endif\n        \n        float z = depth * 2.0 - 1.0;\n        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n        // Perspective division\n       vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n       worldSpacePosition.xyz /= worldSpacePosition.w;\n        return worldSpacePosition.xyz;\n    }\n    #include <common>\n    #define NUM_SAMPLES 16\n  //  #define NUM_RINGS 11\n    uniform vec2 poissonDisk[NUM_SAMPLES];\n\t\t\t\t/*void initPoissonSamples( ) {\n\t\t\t\t\tfloat ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\n\t\t\t\t\tfloat INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\n\n\t\t\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\t\t\t\t\t//float angle = texture2D(blueNoise, vUv * (resolution / vec2(1024.0))).x * PI2;\n                    float angle;\n                    if (index == 0.0) {\n                         angle = texture2D(blueNoise, vUv * (resolution / vec2(1024.0))).x * PI2;\n                    } else if (index == 1.0) {\n                         angle = texture2D(blueNoise, vUv * (resolution / vec2(1024.0))).y * PI2;\n                    } else if (index == 2.0) {\n                         angle = texture2D(blueNoise, vUv * (resolution / vec2(1024.0))).z * PI2;\n                    } else {\n                         angle = texture2D(blueNoise, vUv * (resolution / vec2(1024.0))).w * PI2;\n                    }\n\t\t\t\t\tfloat radius = INV_NUM_SAMPLES;\n\t\t\t\t\tfloat radiusStep = radius;\n\n\t\t\t\t\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\n\t\t\t\t\t\tpoissonDisk[i] = vec2( cos( angle ), sin( angle ) ) * pow( radius, 0.75 );\n\t\t\t\t\t\tradius += radiusStep;\n\t\t\t\t\t\tangle += ANGLE_STEP;\n\t\t\t\t\t}\n\t\t\t\t}*/\n    void main() {\n        const float pi = 3.14159;\n        //vec3 texel = texture2D(tDiffuse, vUv).rgb;\n       // initPoissonSamples();\n        vec2 texelSize = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n        vec2 uv = vUv;\n        vec4 data = texture2D(tDiffuse, vUv);\n        float occlusion = data.a;\n        float baseOcc = data.a;\n        vec3 normal = data.rgb * 2.0 - 1.0;\n        float count = 1.0;\n        float d = texture2D(sceneDepth, vUv).x;\n        vec3 worldPos = getWorldPos(d, vUv);\n        float size = radius;\n        float angle;\n        if (index == 0.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).x * PI2;\n        } else if (index == 1.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).y * PI2;\n        } else if (index == 2.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).z * PI2;\n        } else {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).w * PI2;\n        }\n\n        mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n        \n        for(int i = 0; i < NUM_SAMPLES; i++) {\n            vec2 offset = (rotationMatrix * poissonDisk[i]) * texelSize * size;\n            vec4 dataSample = texture2D(tDiffuse, uv + offset);\n            float occSample = dataSample.a;\n            vec3 normalSample = dataSample.rgb * 2.0 - 1.0;\n            float dSample = texture2D(sceneDepth, uv + offset).x;\n            vec3 worldPosSample = getWorldPos(dSample, uv + offset);\n            float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));\n            float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloff)) * max(dot(normal, normalSample), 0.0) * (1.0 - abs(occSample - baseOcc));\n            occlusion += occSample * rangeCheck;\n            count += rangeCheck;\n        }\n        occlusion /= count;\n        gl_FragColor = vec4(0.5 + 0.5 * normal, occlusion);\n    }\n    "},Db="5L7pP4UXrOIr/VZ1G3f6p89FIWU7lqc7J3DPxKjJUXODJoHQzf/aNVM+ABlvhXeBGN7iC0WkmTjEaAqOItBfBdaK5KSGV1ET5SOKl3x9JOX5w2sAl6+6KjDhVUHgbqq7DZ5EeYzbdSNxtrQLW/KkPJoOTG4u5CBUZkCKHniY9l7DUgjuz708zG1HIC8qfohi1vPjPH9Lq47ksjRrjwXD4MlVCjdAqYFGodQ8tRmHkOfq4wVRIAHvoavPHvN1lpk3X4Y1yzAPGe8S9KBs3crc4GwlU1dEOXiWol/mgQqxkNqB1xd04+0Bmpwj0GcCc4NUi+c731FUxjvaexCkCJ0qhrJJ++htWqetNC4NewClu8aFRSwrqiJEGe+qtTg4CYCHaF1wJI0sy/ZBQAI0qAMyBvVjWZlv2pdkCaro9eWDLK5I4mbb8E4d7hZr9dDJiTJm6Bmb5S+2F7yal/JPdeLUfwq7jmVLaQfhv4tWMJAt7V4sG9LuAv2oPJgSj1nnlBvPibfHM2TrlWHwGCLGxW/5Jm2TotaDL+pHDM5pn1r0UuTZ24N8S5k68bLHW9tfD+2k4zGev23ExJb4YTRKWrj82N5LjJ26lj1BkGZ0CsXLGGELoPaYQomjTqPxYqhfwOwDliNGVqux9ffuybqOKgsbB51B1GbZfG8vHDBE2JQGib1mnCmWOWAMJcHN0cKeDHYTflbDTVXajtr68mwfRje6WueQ/6yWqmZMLWNH7P27zGFhMFqaqfg11Q88g/9UA/FROe9yfq0yOO0pnNAxvepFy2BpEbcgG+mCyjCC01JWlOZlIPdf1TtlyOt7L94ToYGCukoFt4OqwOrofamjECpSgKLLmrRM+sNRAw12eaqk8KtdFk7pn2IcDQiPXCh16t1a+psi+w9towHTKPyQM0StKr61b2BnN1HU+aezFNBLfHTiXwhGTbdxLLmrsAGIVSiNAeCGE8GlB0iOv2v78kP0CTmAPUEqnHYRSDlP+L6m/rYjEK6Q85GRDJi2W20/7NLPpSOaMR++IFvpkcwRuc59j8hh9tYlc1xjdt2jmp9KJczB7U9P43inuxLOv11P5/HYH5d6gLB0CsbGC8APjh+EcCP0zFWqlaACZweLhVfv3yiyd8R3bdVg8sRKsxPvhDaPpiFp9+MN+0Ua0bsPr+lhxfZhMhlevkLbR4ZvcSRP6ApQLy3+eMh9ehCB3z5DVAaN3P6J8pi5Qa88ZQsOuCTWyH6q8yMfBw8y8nm6jaOxJhPH6Hf0I4jmALUBsWKH4gWBnyijHh7z3/1HhQzFLRDRrIQwUtu11yk7U0gDw/FatOIZOJaBx3UqbUxSZ6dboFPm5pAyyXC2wYdSWlpZx/D2C6hDO2sJM4HT9IKWWmDkZIO2si/6BKHruXIEDpfAtz3xDlIdKnnlqnkfCyy6vNOPyuoWsSWBeiN0mcfIrnOtp2j7bxjOkr25skfS/lwOC692cEp7TKSlymbsyzoWg/0AN66SvQYo6BqpNwPpTaUu25zMWlwVUdfu1EEdc0O06TI0JmHk4f6GZQbfOs//OdgtGPO6uLoadJycR8Z80rkd88QoNmimZd8vcpQKScCFkxH1RMTkPlN3K7CL/NSMOiXEvxrn9VyUPFee63uRflgaPMSsafvqMgzTt3T1RaHNLLFatQbD0Vha4YXZ/6Ake7onM65nC9cyLkteYkDfHoJtef7wCrWXTK0+vH38VUBcFJP0+uUXpkiK0gDXNA39HL/qdVcaOA16kd2gzq8aHpNSaKtgMLJC6fdLLS/I/4lUWV2+djY9Rc3QuJOUrlHFQERtXN4xJaAHZERCUQZ9ND2pEtZg8dsnilcnqmqYn3c1sRyK0ziKpHNytEyi2gmzxEFchvT1uBWxZUikkAlWuyqvvhteSG9kFhTLNM97s3X1iS2UbE6cvApgbmeJ/KqtP0NNT3bZiG9TURInCZtVsNZzYus6On0wcdMlVfqo8XLhT5ojaOk4DtCyeoQkBt1mf5luFNaLFjI/1cnPefyCQwcq5ia/4pN4NB+xE/3SEPsliJypS964SI6o5fDVa0IERR8DoeQ+1iyRLU1qGYexB61ph4pkG1rf3c2YD6By1pFCmww9B0r2VjFeaubkIdgWx4RKLQRPLENdGo8ezI5mkNtdCws19aP1uHhenD+HKa8GDeLulb2fiMRhU2xJzzz9e4yOMPvEnGEfbCiQ17nUDpcFDWthr68mhZ4WiHUkRpaVWJNExuULcGkuyVLsQj59pf6OHFR7tofhy9FMrWPCEvX1d5sCVJt8yBFiB6NoOuwMy4wlso9I2G4E5/5B2c6vIZUUY9fFujT3hpkdTuVhbhBwLCtnlIjBpN4cq+waZ0wXSrmebcl+dcrb7sPh9jKxFINkScDTBgjSUfLkC3huJJs/M4M8AOFxbbSIVpBUarYFmLpGsv+V6TJnWNTwI41tubwo7QSI1VOdRKT/Pp8U3oK2ciDbeuWnAGAANvQjGfcewdAdo6H83XzqlK/4yudtFHJSv9Y+qJskwnVToH1I0+tJ3vsLBXtlvMzLIxUj/8LcqZnrNHfVRgabFNXW0qpUvDgxnP3f54KooR3NI+2Q/VHAYFigMkQE5dLH6C6fGs/TKeE6E2jOhZQcP9/rrJjJKcLYdn5cw6XLCUe9F7quk5Yhac+nYL5HOXvp6Q/5qbiQHkuebanX77YSNx34YaWYpcEHuY1u/lEVTCQ7taPaw3oNcn/qJhMzGPZUs3XAq48wj/hCIO2d5aFdfXnS0yg57/jxzDJBwkdOgeVnyyh19Iz1UqiysT4J1eeKwUuWEYln23ydtP7g3R1BnvnxqFPAnOMgOIop2dkXPfUh/9ZKV3ZQbZNactPD4ql5Qg9CxSBnIwzlj/tseQKWRstwNbf17neGwDFFWdm/8f+nDWt/WlKV3MUiAm3ci6xXMDSL5ubPXBg/gKEE7TsZVGUcrIbdXILcMngvGs7unvlPJh6oadeBDqiAviIZ/iyiUMdQZAuf/YBAY0VP1hcgInuWoKbx31AOjyTN2OOHrlthB3ny9JKHOAc8BMvqopikPldcwIQoFxTccKKIeI815GcwaKDLsMbCsxegrzXl8E0bpic/xffU9y1DCgeKZoF2PIY77RIn6kSRdBiGd8NtNwT74dyeFBMkYraPkudN26x9NPuBt4iCOAnBFaNSKVgKiZQruw22kM1fgBKG7cPYAxdHJ8M4V/jzBn2jEJg+jk/jjV4oMmMNOpKB5oVpVh7tK529Z+5vKZ0NSY2A4YdcT0x4BdkoNEDrpsTmekSTjvx9ZBiTHrm9M/n/hGmgpjz4WEjttRfAEy5DYH5vCK/9GuVPa4hoApFaNlrFD/n2PpKOw24iKujKhVIz41p1E0HwsCd/c17OA0H0RjZi1V/rjJLexUzpmXTMIMuzaOBbU4dxvQMgyvxJvR6DyF3BaHkaqT4P3FRYlm+zh8EEGgmkNqD1WRUubDW62VqLoH8UEelIpL7C8CguWWGGCAIDPma9bnh+7IJSt0Cn6ACER2mYk8dLsrN70RUVLiE0ig+08yPY9IOtuqHf/KYsT84BwhMcVq7t8q1WVjpJGNyXdtIPIjhAzabtrX03Itn29QO3TCixE9WpkHIOdAoGvqCrw1D3x9g9Px8u0yZZuulZuGy0veSY34KDSlhsO1zx2ZMrpDBzCHPB4niwApk6NevIvmBxU3+4yaewDvgEQDJ6Of5iRxjAIpp9UO8EzNY4blj4qh8SCSZTqbe/lShE6tNU9Y5IoWHeJxPcHF9KwYQD7lFcIpcscHrcfkHJfL2lL1zczKywEF7BwkjXEirgBcvNWayatqdTVT5oLbzTmED3EOYBSXFyb2VIYk3t0dOZWJdG1nP+W7Qfyeb8MSIyUGKEA57ptPxrPHKYGZPHsuBqQuVSrn0i8KJX+rlzAqo8AawchsJ26FckxTf5+joTcw+2y8c8bushpRYEbgrdr64ltEYPV2AbVgKXV3XACoD1gbs01CExbJALkuItjfYN3+6I8kbiTYmdzBLaNC+xu9z/eXcRQV1Lo8cJoSsKyWJPuTncu5vcmfMUAWmuwhjymK1rhYR8pQMXNQg9X+5ha5fEnap+LhUL1d5SURZz9rGdOWLhrMcMKSaU3LhOQ/6a6qSCwgzQxCW2gFs53fpvfWxhH+xDHdKRV6w29nQ6rNqd9by+zm1OpzYyJwvFyOkrVXQUwt4HaapnweCa7Tj2Mp/tT4YcY3Q/tk1czgkzlV5mpDrdp1spOYB8ionAwxujjdhj5y9qEHu0uc36PAKAYsKLaEoiwPnob0pdluPWdv4sNSlG8GWViI+x/Z4DkW/kSs2iE3ADFjg4TCvgCbX3v0Hz0KZkerrpzEIukAusidDs2g/w0zgmLnZXvVr5kkpwQTLZ0L6uaTHl0LVikIuNIVPmL3fOQJqIdfzymUN0zucIrDintBn6ICl/inj5zteISv5hEMGMqtHc2ghcFJvmH3ZhIZi34vqqTFCb9pltTYz582Y3dwYaHb9khdfve1YryzEwEKbI8qm62qv+NyllC+WxLLAJjz0ZaEF2aTn35qeFmkbP6LDYcbwqWxA0WKsteB7vy8bRHE4r8LhubWDc0pbe90XckSDDAkRej0TQlmWsWwaz18Tx2phykVvwuIRzf4kt9srT8N7gsMjMs0NLAAldabFf2tiMoaaxHcZSX51WPc1BrwApMxih227qTZkcgtkdK1h314XvZKUKh/XysWYnk1ST4kiBI1B9OlfTjB3WHzTAReFLofsGtikwpIXzQBc/gOjz2Thlj36WN0sxyf4RmAFtrYt64fwm+ThjbhlmUTZzebLl4yAkAqzJSfjPBZS2H/IvkkTUdVh0qdB6EuiHEjEil5lk9BTPzxmoW4Jx543hiyy4ASdYA2DNoprsR9iwGFwFG3F2vIROy4L5CZrl230+k733JwboSNBKngsaFPtqo+q3mFFSjC1k0kIAFmKihaYSwaSF7konmYHZWmchuaq15TpneA2ADSRvA07I7US0lTOOfKrgxhzRl0uJihcEZhhYWxObjvNTJ/5sR4Aa5wOQhGClGLb746cJhQ2E6Jie1hbGgWxUH7YSKETptrTeR/xfcMNk2WM12S0XElC9klR8O7jLYekEOZdscP0ypSdoCVZAoK+2ju2PHE869Q9rxCs9DVQco4BriiPbCjN/8tBjsah4IuboR5QbmbyDpcdXVxGMxvWKIjocBuKbjb+B4HvkunbG0wX0IFCjQKoNMFIKcJSJXtkP3EO+J16uh4img0LQlBAOYwBLupu5r1NALMo0g3xkd9b4f7KoCBWHeyk24FmYUCy/PGLv0xErOTyORp8TJ5nnc2k1dOVBTJok7iHye9dwxwRVP3c7eAS8pMmJYHGpzIHz6ii2WJm8HMTPAZdA4q+ugj3PNCL/N45kyglqvQV4f/+ryDDG5RPy5HVoV9FVuJcq2dxF9Y0heVoipV6q1LyfAeuMzbsUV+rsSBmCSV+1CdKlxy0T0Y6Om0X6701URm2Ml6DIQgJ/3KO6kwcMYRrmKsY7TfxWhSXZll+1PfyRXe9HS0t1IKTQMZL7ZqQ8D/o+en57Y9XAQ9C+kZYykNr0xOMxEwu2+Cppm69mQyTm3H7QX6kHvXF201r+KVAf354qypJC5OHSeBU47bM1bTaVmdVEWQ+9CcvvHdu8Ue5UndHM+EeukmR82voQpetZ7WJjyXs+tPS60nk09gymuORoHNtbm0VuvyigiEvOsyHiRBW7V6FyTCppLPEHvesan91SlEh1/QEunq+qgREFXByDwNKcAH5s8/RFg8hP4wcPmFqX0xXGSKY087bqRLsBZe52jThx0XLkhKQUWPvI18WQQS3g2Ra1pzQ1oNFKdfJJjyaH5tJH6w0/upJobwB8KZ5cIs9LnVGxfBaHXBfvLkNpab7dpU6TdcbBIc+A4bqXE/Xt8/xsGQOdoXra4Us5nDAM6v2BNBQaGMmgMfQQV+ikTteSHvyl8wUxULiYRIEKaiDxpBJnyf9OoqQdZVJ8ahqOvuwqq5mnDUAUzUr/Lvs1wLu2F+r4eZMfJPL4gV5mKLkITmozRnTvA7VABaxZmFRtkhvU5iH9RQ1z26ku7aABokvptx7RKZBVL6dveLKOzg0NC7HAxcg5kE1wuyJiEQLOpO0ma3AtWD2Q2Wmn2oPZeDYAwVyEpxuwDy7ivmdUDSL95ol3h2JByTMovOCgxZ1q4E5nwwa7+4WtDAse6bDdr27XgAi5Px3IWbyZ/vRiECKwOMeJSuIl8A4Ds0emI3SgKVVWVO5uyiEUET+ucEq0casA+DQyhzRc8j+Plo0pxKynB/t0uXod1FVV4fX1sC4kDfwFaUDGQ4p9HYgaMqIWX3OF/S8+vcR0JS0bDapWKJwAIIQiRUzvh5YwtzkjccbbrT9Ky/qt5X7MAGA0lzh43mDF9EB6lCGuO/aFCMhdOqNryvd73KdJNy3mxtT8AqgmG4xq7eE1jKu6rV0g8UGyMatzyIMjiOCf4lIJFzAfwDbIfC72TJ/TK+cGsLR8blpjlEILjD8Mxr7IffhbFhgo12CzXRQ2O8JqBJ70+t12385tSmFC8Or+U8svOaoGoojT1/EmjRMT7x2iTUZ7Ny02VGeMZTtGy029tGN1/9k7x3mFu63lYnaWjfJT1m1zpWO3HSXpGkFqVd/m3kDMv4X9rmLOpwEeu8r6TI6C2zUG+MT6v90OU3y5hKqLhpyFLGtkZhDmUg/W1JGSmA8N1TapR4Kny+P6+DuMadZ9+xBbv06nfOjMwkoTsjG0zFmNbvlxEjw+Pl5QYK+V8Qyb+nknZ0Nb/Ofi9+V0eoNtTrtD1/0wzUGGG5u2D/J1ouO/PjXFJVx6LurVnPOyFVbZx7s3ZSjSq+7YN3wzTbFbUvP8GBh7cKieJt56SIowQ2I577+UEXrxUKMFO+XaLLCALuiJWB2vUdpsT+kQ+adoeTfwOulXhd/KZ7ygjj6PhvGT1xzfT7hTwd6dzSB4xV70CesHC0dsg2VyujlMGBKjg5snbrHHX/LNj3SsoLGSX+bZNTDDCNTXh+dCVPlj4K8+hJ/kVddrbtZw26Hx5qYiv3oNNg5blHRSPtmojhZmBQAz8sLC9nAuWNSz1dIofFtlryEKklbdkhBCcx5dhj7pinXDNlCeatCeTCEjYCpZ3HRf5QzUcRR1Tdb3gwtYtpPdgMxmWfJGoZSu1EsCJbIhS16Ed97+8br4Ar1mB1GcnZVx/HPtJl4CgbHXrrDPwlE4od8deRQYLt9IlsvCqgesMmLAVxB+igH7WGTcY/e3lLHJ4rkBgh2p1QpUBRb/cSQsJCbosFDkalbJigimldVK7TIHKSq2w8mezku9hgw8fXJxGdXoL1ggma52kXzjP78l0d0zMwtTVlt0FqnRyGLPGEjmICzgSp7XPFlUr7AeMclQ4opqwBFInziM5F8oJJ8qeuckGOnAcZZOLl1+ZhGF17pfIuujipwFJL7ChIIB2vlo0IQZGTJPNa2YjNcGUw+a/gWYLkCp+bOGIYhWr08UIE709ZEHlUoEbumzgpJv1D0+hWYNEpj+laoZIK5weO2DFwLL6UBYNrXTm9YvvxeN9U9oKsB3zKBwzFFwDgid5ESMhy68xBnVa55sCZd+l5AnzT8etYjIwF/BGwEx1jjzFv32bk6EeJulESARh8RZ48o7rKw67UZpudPa15SDnL8AL8xMV2SC0D1P53p190zhCFkMmEiir2olwxcJppl/kLm6/0QSUQLNaxi1AC3Pg1CTosX2YQr73PjEIxIlg4mJ62vP7ZyoHE55B0SX9YrrrCPtNsrJEwtn6KOSt7nLT3n3DLJTPbLulcqQ1kETP6Huts29oP+JLEqRGWgnrqMD+mhCl1XCZifjgQ39AeudE8pyu2DqnYU3PyPbJhStq1HbP+VxgseWL+hQ+4w1okADlA9WqoaRuoS7IY77Cm40cJiE6FLomUMltT+xO3Upcv5dzSh9F57hodSBnMHukcH1kd9tqlpprBQ/Ij9E+wMQXrZG5PlzwYJ6jmRdnQtRj64wC/7vsDaaMFteBOUDR4ebRrNZJHhwlNEK9Bz3k7jqOV5KJpL74p2sQnd7vLE374Jz+G7H3RUbX17SobYOe9wKkL/Ja/zeiKExOBmPo0X29bURQMxJkN4ddbrHnOkn6+M1zTZHo0efsB23WSSsByfmye2ZuTEZ12J3Y8ffT6Fcv8XVfA/k+p+xJGreKHJRVUIBqfEIlRt987/QXkssXuvLkECSpVEBs+gE1meB6Xn1RWISG6sV3+KOVjiE9wGdRHS8rmTERRnk0mDNU/+kOQYN/6jdeq0IHeh9c6xlSNICo9OcX1MmAiEuvGay43xCZgxHeZqD7etZMigoJI5V2q7xDcXcPort7AEjLwWlEf4ouzy2iPa3lxpcJWdIcHjhLZf1zg/Kv3/yN1voOmCLrI1Fe0MuFbB0TFSUt+t4Wqe2Mj1o2KS0TFQPGRlFm26IvVP9OXKIQkjfueRtMPoqLfVgDhplKvWWJA673+52FgEEgm+HwEgzOjaTuBz639XtCTwaQL/DrCeRdXun0VU3HDmNmTkc6YrNR6tTVWnbqHwykSBswchFLnvouR0KRhDhZiTYYYNWdvXzY+61Jz5IBcTJavGXr9BcHdk/3tqaLbwCbfpwjxCFSUs1xfFcRzRfMAl+QYuCpsYGz9H01poc1LyzhXwmODmUSg/xFq/RosgYikz4Om/ni9QCcr28ZPISaKrY7O+CspM/s+sHtnA9o9WgFWhcBX2LDN2/AL5uB6UxL/RaBp7EI+JHGz6MeLfvSNJnBgI9THFdUwmg1AXb9pvd7ccLqRdmcHLRT1I2VuEAghBduBm7pHNrZIjb2UVrijpZPlGL68hr+SDlC31mdis0BjP4aZFEOcw+uB17y5u7WOnho60Vcy7gRr7BZ9z5zY1uIwo+tW1YKpuQpdR0Vi7AxKmaIa4jXTjUh7MRlNM0W/Ut/CSD7atFd4soMsX7QbcrUZZaWuN0KOVCL9E09UcJlX+esWK56mre/s6UO9ks0owQ+foaVopkuKG+HZYbE1L1e0VwY2J53aCpwC77HqtpyNtoIlBVzOPtFvzBpDV9TjiP3CcTTGqLKh+m7urHvtHSB/+cGuRk4SsTma9sPCVJ19UPvaAv5WB8u57lNeUewwKpXmmKm5XZV91+FqCCT6nVrrrOgXfYmGFlVjqsSn3/yufkGIdtmdD0yVBcYFR3hDx43e3E4iuiEtP3Me9gcsBqveQdKojKR//qD2nEDY0IktMgFvH+SqVWi9mAorym92NEGbY8MeDjp553MiTXCRSASPt+Ga5q7pB9vwFQCTpaoevx0yEfrq9rMs3eU6wclBMJ9Ve8m6QuLYZ58J41YG3jW/khW92h6M/vbFIUPuopZ6VVtpciesU74Ef7ic8iSymDohGeUn4ubT0vRsXmbsjaJaYhL8f+8I5EiD5l680MJbxX/4GYrOg4iPQqpKp0qddSu/HKtznHeVyxgTwhfEORMCwnaqetVSzvidaWN9P+fXtGXfEP9cTdwx2gKVfDdICq7hecgRhIs0qlCt6+5pGlCc6kWoplHa/KjP+FJdXBU/IDoKMxRjFhSYkggIkhvRKiN/b2ud8URPF+lB87AGAwyMjr/Wju2Uj5IrppXZWjI3d14BdKE2fhALyQPmHqqA+AXd2LwvRHcBq4mhOQ4oNRWH7wpzc6Pggfcbv9kqhLxrJKEaJqA6Rxi+TDNOJstd5DoRVCDjmVspCVyHJsFEWPg9+NA8l1e4X2PDvOd5MPZAGw6LRhWqeZoSQcPf9/dGJYAyzCmttlRnx0BfrKQ/G9i5DVJft9fuJwMi3OD/0Dv1bRoxcXAyZ0wMJ6rwk9RjRTF4ZK8JviCCNuVt/BqQYiphOzWCpnbwOZt6qXuiAabQWrS4mNXQ7cEErXR/yJcbdFp5nWE1bPBjD0fmG3ovMxmOq5blpcOs0DtNQpci1t+9DKERWAO53IVV/S4yhMklvIp0j0FIQgwjdUptqmoMYGVWSI5YkTKLHZdXRDv9zs+HdFZt1QVcdlGOgATro3fg6ticCrDQKUJC7bYX50wdvetilEwVenHhlr85HMLRLTD6nDXWId4ORLwwe5IXiOhpuZTVTv+xdkTxJofqeCRM/jcZqQlU0gFVTlYlfwMi6HKR2YG4fQ8TOtgR+yV+BMZb6L5OwDc/28/xdfD7GXFaVA2ZSObiIxBwT2Zev637EuvpM6rxcogdM4FJFa0ZhF7nrqtNsqWg5M7hZMORpjd4szf/wS+Ahs1shY54Ct5J1dOBO4sdEtSnRc0P9PhgyOCt6aQW98R22DpAcNTDe72AHK40vutKTPfpokghRPuGvz0dulBPKfC3O4KVDCyWrJGO7Ikdu06A0keKlVfi0tGcpO0NhzXEh75NHyMysAMV19fq7//sPC0For1k2uFEvq8lwrMAfmP7afR69U2RqaILHe7glpc8HmVf87Qb2ohsw+Di9U+ePdHLecS66MhB/0OwdcXR5WBcWTZLGq/kiAaT+bzkjR8GIpWdv6pfIgQ+Q0xdiKvo+gNB7/Nf9knNJGxnh7LeZEFtMn517tNc74PPS0M4K3I6HHZqNPA+VZcBc/g5a2ARyqKrJ4Z3krsuA+VOJJz2KJpBMgCCWFln3u7k6/q3DETAubKG/pt3ObaNT0NI0Qug90L2ip5dHnZJUjPTvK5E96aX/4mRU2u8n8kh6MKbY7ANBro3huF06U+JvfyELQP25oIaj+n0ITQ4KT9rXZD4EtBIOj95fYNldDN3io/VMIvWNj9P/b95WEMq8UAVfG2XG0N6fSYdnBEC7sUEbatbDICH9qA8TTuW9kEt9DlFOZFP7bdfYLa/khSY8W5K/AkIIAPXtMvyVKyESjKx9nfragssxC0jFMVY94d8lOAwRocdS/l/P43cBGa3IqDa0ihGPcmwS8O8Vj16Uy55rOrnN0shhRJZdW8I7F0Q0KeHc35GFo4aJOFc25gNafBu1V/VO0qS4Qkb6wjRrnlepUWjtYyaDABZceValuOMtoDdeIITWKOJiwGPpB12lQgwkmXh9M86podb0D117mNQ8ElluFvbaS8RTKQ6lyj88dUwoJU/ofOeubhoXWBF8eNumkVJu+As3ED/AvLlrV91UowIWI2m8HBG+a3k247ZKAGYsOcWe7fTWqL8eqwM5ZFuoXbeugPKuMOAtOsN+4dSwkhrSAlfGNTzFwEmCNWtzpa9CgPbYNcmoHtO8pj8qMvlGET6nrkJoQ2lp5MEUV1E2A4ZH70JUlCLXvqTIpZlzyxdr5p/GZiD1/BuFOGbyfFzhuxaC/l3lC2jjt6GNRBa06AqqPlYtdA7kiidYa5Qi0/XpXiMDyMXNOj3kmJEaXufW0GO8+DF8OoMULX1vvjCePKNis4AmxQKLCF+cjf/wyilCJvuiyLVPSdsuRTPZ0AhpdDF/1uFmDwG7iP3qYwNsKzqd3sYdnMolCOuQOIHWy1eQpWhuV+jmSeAC5zCc0/KsOIXkZPdiw8vtB33jEBpezpGDBP4JLY2wH1J7Fzp8y8RICqVd25mDT2tDb/L1mh4fv9TOfDH5dTeATqu+diOZi+/sIt18hiTovPsVQVaqXLPRx/4R/uH/86tBMcF+WBkThKLfblcVCIECc8DgNRVX97KdrsCeIK+CvJZMfwrftcDZDZyp7G8HeKl7bPYnTKX88dXAwAyz66O2chkPDHy/2K2XcT/61XnlAKgPwtI8yP9Vu45yh55KHhJu93mL4nfo8szp/IyDjmFHtSMqqoWsj8WaVhbjXgzZxcqZcyOe7pUK6aXF/Y32LnBOt0WN28UmHRiOpL525C63I2JQPX8vvOU0fz2ij74OeJ1Apgu3JRObfdo9xGDpp7cv3TdULEfNS6Gu3EJu7drBsBsogUqUc6wAUW3ux0/1hLVI/JEKJrAGm8g72C2aJSsGAsKFW4CBvBXVlNIKa5r7HvT1BeGYBfxTR1vhNlFFNN8WQYwr39yT/13XzRGiF2IsfE8HcN0+lN1zN/OnzekVBKkFY11GgrK5CLxrE/2HCEMwQb9yOuP2rTXiZzTEETp/ismFGcTWmbM9G1Sn2D/x3G74uWYZY4rgKB2Zo2bTKS6QnM5x1Yee66Y1L7K44AyiY5K2MH5wrTwxMFh+S8LzNQ25z6sunWZyiRwFIIvSnioltUXNiOr+XMZ6O9h9HcHxZJkfF0tUm6QkU7iJ2ozXARitiL86aqVsMOpmvdIBROhUoanPtCjgft8up3hAaKpw9Qs9MzYtBA2ijHXotzarkV3zKEK0dFFQUwT74NgCmGGuSCEDmFCezXPC9BhyGhmzNa6rQeQQz+r9CmGUZjIQEPsHwe86oCOQhWaHERsv5ia9rZvJ//7UXO7B329YUkLLAiqpLRsVV5XpcfdawlJqi/BVcCqO6dr9YJTFFRMVGhfUbB9YWNvYPY6RyaydAFYq1YIBQxuNAGfYWLMAHtt2XRHoOKCLz+qf5HCVBDOPOktQ3SdJBfxUkaiD585bmTzMwU3oeXUHZ55EC99Kz9kk4ZXMIENwVVpqW2JmGIcUiutIMj2KkpjE2QD+dIZUCxcX57kH7hiuUPnKCTdaw4KN95XPeFRvMcvo5L8LexWqvaJPECzwXCs/4XPAlSMpWUzBBjK3pEnkbueMkMJQrYcnXf7PjbAoJra1VLX4YuscQLpaeYWbT+h24hCFrfcHjxxx6WTSe4AGY/KHRZCQKqTuFWt0D8RmGWmvXSdg1ptIefYPshuIVZT7CV4Ny67fvjJugy0TNYHqoCO45CB88kxrvIsih19DqjD0UqiJsTFPcGW3P/ULOG3nb8CjpgVTIoa5nO9ZYEX4uEHu8hLXrJPjV1lTQ5xTdZVagg+Wj8V0EE4yPsTc345KM6lVXqLiHtm+G6edC4GVEiPgd98g+twSYm18gCsPnjqlLcFm9e72CLJbYD+ocIZOxuVjrX6IKh9fh7WqdIZ66x9PWkDGOVVGkx7jM76Ywe16DX9ng205kg5eq+R2q2MguTJxYv/wWHliD9mOYpzZKNXYC3Wr4iBGkm54hBwkPzFhiX/VBHdVH/KJ1ZIMOHxIN6arKdxrm6EBsgwDt0mPe0MX1HRUMq8ctcmysU6xX0bzM1J07kAvq33jw1q0Pq2cyMWme8F7aVkfhzZEFdyi8fVBQav0YZqvAjZ83WKH726rBx5Bn7GHFthR6H4lFsltu+jWmsAibJ3kpWMG/QbncU7n9skIBL0MuXXtj9sJg+4Dl0XhKJ1LcrMydaIgyrgZgScP4k8YQvcsBmD26X1iYXKLzMYfZn2IfRjznsrJ1e5cnl/3a5xiNoI6n1x1U36FWckJbyx+hiSZg0QqAqeeSvzFYMlZ2REnO/a6yoQhu7PdHMYEPFIvfyGeyCU8e7rpju4DrlOhszj9rOIpNsvCkuD+TLyf5J7D/wsPkBpscFVI1q7oUSU9bN30vH5AqnO7bsf+9rGhtVjOJQ32H9hHSAzR2ape4L0Cz4WxaySm4jvuGXwkFp5NMMLrgZ8LdA+5uLuyxO5SMOmJNDBcbbLefv7z6LyxBwltnfQLd7qqpG1MmNcoLUcx73BkNF/xpdS0cKd6G646ntChXSeTZJJTFYGw39T7fqXDPKoG2cF7/ZcTvME42gXLVjTqzAER1Rt5m7GYsh0X0+XgOeW9MJqE5j/rpGzY6vUu6ACcCTzDMdZHiWELpDnvgE1hmztLcSYz0MtNyUBLqvylUJJnJu79Sku9NMHCTkgqozTnhMFfduV2NLCSYvAI5HUvQp1h/M02vKFD6eosIkGTg6mujUo1W8hy5Knf/erkBQC9LzNqPAYCgR+hczgevta88NNqSlBZryq9QNeUK7RpbvHjoNhUKAAeNYH55LeTW36KyFaXdAkBvyNP9xmRuBokPi2OhqDby6IZ61mwfzG+GmACkS+G80A4WGON5izgJWeeDK91jzusfOi0RmEsVJXwbVUr8u/J2LCQaMnHhi+wJTEPN9tS2b6W4GRGCNmtjAMgPsP357nOeD3H2tcDAPu5xQBKMHf/j4ZhXlkvvy3YmBJsjsd4pSOlfPZCnw5JvzxEXM5JIc+E2mU4CgB0mdJnH4NEsCHYNeVRDXFNuyZUE4nuvaJf1h+11AWLdAZ72D9XNRcxfb2+XHZN/SN48U7yl+sNZhg5gn/PD8wkBtnRj1zBUPIWnoMP6yGUEEzuT+VaX3x2jEIZAZsr3rs9wCfY1Ss0EdIFFzBbyruUup4EPanbSYew5tf16/ZWVup5iykttuqL4xoC/jdZWsAZeSfDSd3fP9kbyAFYXkf0Q2lmxaTkKRZrCo9XCoiUG4yP1URJ5G7+HSOhhJp0Anz0N07QZtyFUye6rcgiOFbtyoO1lkuV0iQ602MTyFK9xLqNHtNy4cJaTO6hjtiwNynVc34ZA6H7k8ai6S6eF6jIG0xJx+JfP97lzuCZr8vU5SIzImaNpiQhyvDbz23//PJcOk7hD4iIvJzfIgOGIR6ZPEJpWHZQoacbF+omeHw8aWHaNOfaIyGeG4lEryMfhtNmWh4RAIpn8dLs7ZE2eTVDwK++xDoSUgh47WDmKlZ/k6OosEUoQjk7Q+Kp7OxwgMFShAv6z4pTW8loVj2+qXLQ0T3hmIue8qHy1o/HXjm089m71t6mrrUyDftqMYtmfvQXKDlZ+K1HR/FkqPSqcjGlcPPIwbMw3wIFKBdVMJ4pFLt+oOIkWZMw8pkoYZ3byw4LmAF+7BdicGXFcb5PWtDw5XNNVc6eB9dv0rAEpgr5J+bLr010bpfGw+IkRoxDbkDFmQdEQUSElP5bViLo1ur/23KN0jEwl+rGC6AUMKxHcv+T9F1Ktpn8jSSrKxJnVkK8UD/tH5DN6nXB8mjUdFU539e9ywLtLYCwmHYVEVqnFmdubduaSd1ivIo4pTsX+mJcOAkrR1D60RIoocCBIdwJhCBM1rOE2XSlPo0U+khALvw+zfxYzwzd4roWlLJkZheFRR8QB8v4USwmAcDswUZ2P/7v7Xa51Fs7orYebYyww4YW5869Y/c6Kq2eTR9HLSjYuChTkXaDygoo8nz/yJ0KzfX8oowaNAwz8HvQdlLU9V9hjqYMURyYvPzZ60G0itmUdZwB+sY6rUkMAZZtWStbDFmnk/dQorhwr3121XQWffrK3as0g29ASwxbsZ3dZAq/96b7/XWckbjmo8+jwdE680DzoEUUivnBgowMuBQxHXoGyp+w/cSGY88rWtmwoyNNIvChs/QsZRnbdV7y8x7t2RkliJV/j8e6qfctrTsMV22zoqgQuTSNFh7U7p/Q49L0kygXNnEYXCBDgi5BeNWxu7VjULcUHI+lGj+OTCEATzWrDmaynq3wT9IAejtvh3esCu6sEu9JOsXxMDpqxm4Tzl+pt2Wa5Bq3TM5TKH4N7KLir8FGIPA569+uJ1VEL3fW8Jyigz/nEUjAVYrdCWq2MnS4hQVgcvXq9aF7Xke/k++rAtIQqckPNwjKrV2t7HCOrA1ps88Y5Rw1Zp+9itnB71j8tNiQc7mV1kUCQXkoi5fOsq1uC6hUPUL7Z69NAM6lg0c/aeiifHoi35v+pVBh7CDM1XfvYpiK5JIbIQFHafmnhHfRTnMagKcjdE7zzgtxkTPKVrObTySTT51g9bB5ro/dzn/sB24fNM2LGJuRQsmC49PLi1jTRfZaLpo8Txxxczij5Pl2vur+S1wQW3W5qyVcIUySZHtFDQHv+EYDoZG1T1J7D91vEIV8dHzUBzW1UyuxRbP+M/CM/vsas6RzmS5traXnQ0Jzv9hYXxKHcs15TQCP744XsLjzFjILYURXFnhM+nnV0iO6nwls9TR4tlz1J9/NvE8FGg5mgpZA4htS05AK0NnU2gxuqf2vjCyWlm3ypKvaX4vxh8Um1MHGB2NTeAFhbDyGm+5w2zqJAWxVlj6dVePb5yR+aMhuz05YubCQJ0BOtoYQ6PoDoW5fCwCtXj5SHvCgL/3B5z2mcXWaRTf8/GsFAfX/ntdWZWFc2xg8MJeenwZ4dZUToce43If4zVb1ex3BMAWGhgkPwR5EgktZhW3Yi+nsnZTUr9FYI160YhAraB0zMV+ouHz6hYm25/ETDM0MTmcypoGgZISSkfwYAQaHGY45yZ91K4A4Mm4fnbMk8GTc4orypT3NLBqAxYdcY/qCH82PpIkmVOEHi1NoYaUymuImLLcib5pmd2MHTB3JR+4rLdRc3gtQ9zeFdciciRiWviu3HkqaLSxJeI2rgc7OKQslItumACQow89elXmi4P3gTZeCauvMH5nF4VrBcLjjwGD+KlKqe/RWIEgT2wGqAgSuL6b+RTTPnQZzxZ5y5HQJkEEKJp5NfoB8hJBM8qn6xbOFtyzBjVBrwSS1zCJR3lEc9ODQ5Wu/xct9/2Q6qLHnmNx6XwZus/i8rEd6UsVxGtoDrm+Br0L5oUojlwdcqyVV4PIMsR60JhZwJtgX7izQWj+GOeF9DA8Wexdmv6DWjgR8LEBp9YuPAM8tJDu3uCumNqHnF2ATYX/tuVO55OgQuiUhmDmJbF9jJyifBRtxOVI9DCNLUY71IXZYTuiYcnILQ/XHuVJ8aHDStL0N+3eYNvXwHi2vEiTPnBqzsC4TsPnFVnYY042j5i7C11AVdBZ1pGSa52jM9dIL119rry0mgGxFzI8xPs+7bmMfYKh37A4HtA081olG1m9S4Zch2hoNCGVvVhd6UL7C2d5hKIBHoB+Uxarq/4aQXhh7IWjSj+ca7Vhqb4+ZwY3nHXh2S9JH4XZxQojbe/eINxYlozTYtT2rpU/xbj+W2hXjFQ+z+dQ8wh9751MP0UpjutQdxz3/FJYAEG5BF400JXWCBs7KrCRf/l+F+d9EuwVk6thOPDB+HNS9iWlLmDgXvY6K0vgiyoeA3An+jWufdAG1suUMBuJT+/w0FNJZbObUT8c5q5WtQxASQF6E+/u8UwVBs1eo8jTamCrcdhZJlADJbqn3crcDHQlBQNGq7btcGKiJXW6q0cn3F0xzf+k1JJS2testB3rx15ZPTDXm8QV5XE2qxBOdM2n6t5YbxyNOmEdsHx+hMp+y9pWkcgw1NikeXuafJvzcjaNwE1Ad6gG79S68aO7jWpKgBETYLmV4ONHhBk7Be8tjf2WVvWMDQvQdOnk448yeMv1tQKU1xev0L171e/qxkMZbmkfKnd29XRCK2hgNNJhwt1qiYWZGKz7Di6K3fGDT7DO2YQ7WU33svE/WKGbWQEvzUV2w+VNYDocI4yxQ6i3i4zU2TjmjCwu5Pk+Ja9HSwLpEoUswq3tFJ1jimthgMXd7KjSl6Qd0K+vxWT8G4/+xITHsWDGSfQTSdFQth5uVVfa8wrkDZHTGVgpJys2ik+3I0dSf6TNo6A/sVptyY/kx1hdAWKPI6t/xj6s+fPMU3hg1vkEB0RRHq/tCy3KUUhzU/d0JKxTyjvUms5iy1GbOFco0NA4t83SK9sBmtLWm4kOLLflyxqgQYP08iyXwYXzKnlQ6VTipuaspSJ9g5H5Lu3eLMnPKbhcwuEg0VZ80ppJWjUnhS3rL35erzysp+fJhxsUs86m28/UwW+IgrS5Y0zWaxlFJ8xML5wk8sg1ragF+eNajyI0Y4mwStxt1RZH2BjaAhvu+SnNNIK88thEgZEsoHv+ii+OMmXJL7dnAiINVDz3tCnqDgpQX9OguNGgZj3axcjq1UgxDw785yNIpqNiLgv57399jVmJ0/RStNswaFIs6FtnkilFZldxj6m562jL4p5g3Y9XCiXRJX6nq2PGJFifFR7EyPG4jDMnBM4t+O8ZpEp3th7TCxEw+ZG4afHl4sNFaqxyLh6+979tt0Aq9BrqI+CS2U7HJoKiGmyVU1lFa3/0O5mNC1bzRgNMy+GXyifLwJP7FwUSUmxmVRpn+gnXWoIuswPutsiciurvN6lsMG7yqEc2Y5ZI3jrPgPq0xEKPZpF7teJa0TQn8BQL4Th+hjv2ByfwKookyXEmj0d1KMcsmfKaeKK3cZZubiYqmSCrnGpYTwgPk5itKucVtjViuswQsDR6TuyGSIHYvlz7wkLg1Rr0K9kV1o8RgABlhbLrN74cVWJW6TnfXN0q12JFMpUbEa8t1+j440FA+17o8qa8PQ9igkctVROVIfB3jU5vtGm5pYYHYSDvU2TEc15pIz19ka1q6c/7WXfF8+POkApdOw7nn7Kqz6V4tru7NXgnA/u0g6+fPRT3hp/QrDQwMsjwNCZxdWrR6pgCBDJNc7/KAlwC0UZ4yWQs0KsuwbbOgcTxQPK54wiXr7s+221hzZ8RVxfoRUKM3e4lpxHC83JllxlrV760tl06f7/65qhE1jhMfivAUXIXfRMe3uY/G2TpWYzDrw5Cm5cS062Bx9lhHq9gtJp8xZwAtSdSuW/Kd7+orEAiswA76N8ezmVGYgNaYlQ/xk930LAWAtKVBC4U6R08L45IohB1kFia7XJs0TcaT2zBZoLFuOGu4iJaoAnfjL3uS6gnRH7G7A+aT6ETlmkYUfgrBuaSLLDJfhPJe01PfN0oqBTeQURasl3N8BZiQSgdr0aDv3hPTiog4NSyfAUyy98WP7dnTDWQTY+Qwzgk1uxwRqHl5MpC/84Cuw1TXfRlgJrwPop10kCHjmffnFdxCe2J3R3J5j+3H/sZn3IUu3Suy+I+dAOMWvzwExNR3RRPVelZAhtarKlXPWNjPRIVP4JsAFSRXs3o/fSYAPaV/zP8q6DltH47/rYhCLdy/LrpOsbaLf09eACcClJosNefetNElkSFSuCgeY7oTAAl+8Y2zOXJb/bgEDpoDXfQqc6lnlBr/WsmVznkBS1M7ufiqpxvKXjwvR4WxLbh5NbMNy8LsnX4UiuAi8XonbSUcVZKQOWBYUecSOMj6jMG8gHu7WNreBHY90lV7FocDprSrSbexkAtMW9KlXcnrOyLnZdodGYdxz8aw71HztIqLhRdCOB6NyzHPoS2hDy6wLk0I5Jr2t+U0A+A7EsgSn/Ih03A5CspHnVF4MOic+Lck3m61Um+GHDEe4DrHBhmgtDlRQl1XJ/V/VumCHtUDDcZCkgjVMBOmVOGYW0Rcdi1ahdjhBcFlfjA+5cRjBop1aNDvdrf7CxkLVgxiCxhRctW8wczM8+kVmIrGtkaHGlr8y2D098HXE23r7fnJFUU68zyeyM265igNOGPzFG0dIgUDWN6S3ZcfMERJdWVvpGhVEHXNLeWqHiTcF3wOt0FbJY4XHEpmkoG9MQPJJ4ueQ01+MB+SR0rCSGzlE8zod19q75LlLWgzogpnJoD4gPxUYcX+Gpc5Ly4nk+Zm8LDXcNR7SNVxLh6NAcx8ekjb/AC7ADlRnfuHaHJaBodZr7RBX9FLTvocY6kY8bavdAkQicE9bbwGLkZu6whTCJ56lOvM39ijehpTOFqR3V53nQx4hfOvwRPU2y2w7UU8yiRbcyaX6jGJ9CRvl9ybV1tebTp5MMuMnwLcx/lven0w9T0atJuiUE2WtYGiVMaP3EchABl5AsyaCpu/BKAWDFvU2vaCL2/fJBKCKLjxG6xzT4Mh4wHhH3/EqsGSoQAHu2wbHmXHj2LvoW19GXDa2oyeKRwGG1PU+S7mE/S+UmjHiDF1oqJ0R5QsdjAZYN1MzpNX5YDqWYfhfdjAXyFQaVyGKkp1oEGTR8MK6jaGfRDFd41u2Ex8ac8jKPYu3pXsk8gu+m9tr1RVzTTuDsACW4S1h32yFHX7qpXSmA0QVEcR8W9j2Juu0pcYqTmdis88VgT3gq7iYue5Hx/3K6hFQa9rZrNSDcjaSQlNn4LSqs20bypnKqpzvnnxjMdz5StbzvoAJKgVZa4DLCVoJW765/KyTF4s4YztmAT1c0pTmKJHTpa106FegDo8p2zD6uOnwpYi0vJlRMDe9wPT6964UfAf6lq3qWypUOx9q6BbKEYt7K3gWMXDNN6wAm1fNnSOnZ4JkbPq7jLQrl0wL1V7QwO/sXneKGfTgUL28I5iPVG9dA2gS7Ki005JUR7Vmw4gX4TJvy1WS74cIXD08LCF5obqcZwamuoZ+FPMJEck0TLHjyH1baPr55/Cy0ptDfRJ7d89pbP48tLMHG5dO11Z8xSSpPGQSgXDWmpsNsmm+MvxJjMCi7OFDHxxpmTtjgnOCq+c7Fi1DybfhAntviKccz+sj+OPKPYOKeYYPLvq6MpUx/chSvBccg9dfbeqetQNCs3eiCFZTU1mrDido/mib64STMgsa+IKLk9PyxGGbVSQB9GsHto6f5prAFIbRDSItDedz3t5+Nn69FFS0nEfmkF7hKBmNVce5xv65USKGBoHYxJyutSGnRIq7vMDsAMvirOEJOzNi5Kt7fypuSU2c2Npo6UH5jMOkePH0TwgpammO3Fb2FX6f11309z/mqRmQ949HHRj/wMzKNx95M9pwKf+UQkMEwisL3YVotvHhCv4y00Ui0Ql8dR7tGqFcSdYtmoAOuAodkBNs4PZSjAAF7S/szwLddFMdCyB/dWPgFUiUE+WmUUCjYrKfJLQfNNpQ4NKaF57w7Kp/isZVwQPUJyjJavN3fQNKU+F74jVBJYQEcEdw0Niinyea0l9PJ1/AcTm/LI91RZjDvLI81pnat7RKU2P4/TnIAa3hIEfeg4iGQ+wTDlURK6YjNpN5s5VkQW9w7sDYKU4XmjyZsCQLxztqd4SDQvLyuPDhURAJXKfR1c7tq3mRu4usFHPqz7HgS0X7kNxiWWR3fb3uVwbgKpmgLYkwKrXKt09COw4MjhxeZlDXKy7nNLHXAIKPtferWQnZLboonQXK81x+BB3oUidBehK1swSXxVbscj/LsfONu/xYEXYPM3aMqIYd+2hAnFvDHbdrJLhGEd3sG5PyxqhzejhQJo9wauFK3xmPYqxB99J8zYU9/yzrEZNzzbvPoR9vUlE3Ha4zspVDzHHffPZMJ1VLZkKqGCf8ZqupqMt6T+NRPfmPm2xeDgvzMrRJEL4/zzlu7Z35smvzbgeC25VP2CUrZkRxEi15A0769ojdO1d7C9OG+swj1ROMM3NgKdeBADoRMeJkRZcZ1FbQu6C0BS9NNSaoxtFzYT4lX7+PQ7BKa84yrN+ujVVef+SgnEie1G0N+eOtbZF/UU+wkeerWjloYqFiqo0vBnmxh+TwNMo9I/8lfU2XTCT0K4OoWE08ipyNHjxHvfhY6qa3x4HzdQ8+jkiO5+j91YkihS5memfpFREHP/2veN5XcRue2zCVuAub8V6vDlOvyP+PBm+owyRhMmng5wwGGIXsOkQekXrXpE/6dFjkHwwoFoj5bIFiqp+4wHpSWRbv2xGrRpd2c87FzMP6Hfj/3LWIBqFiNOAxBw+AAP1XqUBszdZhzOSQrQS4Ein4fyV7MaGsB0VsMF4bPb4lx/foTGQRJv45LpoxDd84xCawHaX7jpXUrOdkFxx2oUvY2xqpgIvcVufwd+zAnaaVTnEyDXD7S/o/xrrk4mgTjXhcjj5Rzrbr23NmuZQvpdNzny5MCR9bwvIRIqzOZZLsstZSCDYa56JTvzxgBs20dYTtTUbe21uljlWqGfSh2bYAzOpf6UguK30ZxNXgLHs6Y6urtxFA5iLYvlue5mDONW0MOtQjhqr8fRbCkYneiDkvzHkQVT4F9v9vxh2SIGPBH8bZb8ugo/BSgXojeSdNXbBAIDsB6DUNSXnwlu/bFLaCqSbvu4+YLplwO1JbtrMf9ZUfsxerAZjB7E/zl3qwgK27FswemUmSM4i37YAVhQSocuV8AcDI/CSeCDNPavESshDQ8A/lVIrAJAMdP/rHXouiNU8RL/TIvfQiuZEb6dkIKMGGOW5kT8vO8pivWnT4v7qmwuJo52AS1r/RyQ2g/7c9ZJgmMIzf0GvJJRfMNu1utRNuLWHOm9JIMcJK3qiDtVpGCDP45W1oTTMUnMC91kYhP0GHjhCW8V38xhjHgFFBfuWMsmSQ9MvNqKXiqtUhDAkIy0PW7YSKaKUv6zctAiIk+Jt17kG6LpNVOeMvJnlVBaJSkKe0HTJJUMvf8R2zna35/yh2wNlWLzIP3BJR5aRNxkV94ICOlycI1/JYRZtzvWMNoIpQrdNvyBuBydhSwhRwPo079Xk/XQZpbhzN/KK4NbdJQV0JIMP+Y5UBIM3TTYlFGYVjcvA5yVozkimco91Fx/eo+ydgAx1gMezTh+bYxCtXPYkMoPdtaElRusxlmdSV9zgF4Np+iylun3LVxCycAFxGCFsmARf6y4I6zXY0tx81aQyalr3/ih+ZjxGNWdhItgNLdEZ/BOIJpPoAveh2bKbEFxU/M0+4xqDo3Ox8MnNn8Lmv15NJigSvJV+y2W/ZogEXNiv0/nuFzZGr0pKujOShzcdkEVlMw8mNZXZCbtM9V+mfawtLxCTvo+enFWhJcFv8LVTFycDjPGBXRQKNN+z68HJtYdpH++g5WdhQpCO+DE7Qdu6TmZgtetrpU2ZlgpslOx+4hb3aXaqbdc92LCh51er8vm1GQ9uWD9+fAPRV50ixhgc5zi2Jsg1xQVxzlaELRWJ5biyF+eCwNV0oFnTbBHr3Glm9qlGVOpoOsQC8hlNG88fxeAekkCGnHFn6i5WzyO7ShDYbZ2KM4eqndyy01v+6TFhmkxgc0dndt7EzRCcEfBxSaWZwcev6MDZcuvSZQ9CNSd4Tx25TY6UAbrhikuP1vNFfPdZhCG1pe6vx4D6Ez3zIb0zDa42FPpxWvIpEeXb7YTcfZOahSpSYaWLH/vq0F3U1KO7ZxliZpoMBBYJs91IE0bOkrPNQ/USYY0qKCO3CU+AFbOYxzKWBkIglrX34377BZ18MKQCv1KWfIHEeguSpvrNH5RQOD4LeiH2gdx1MOAKphlL41F4RpxaU4dy8xERFgqoyICQq9XmQ8WJSokwqvhQM0fLtsvyCO2PAkJ3BZg5IqoR5q/GdTLgOWPFR53Nqw9Ma5vBzZcQ4+iZgetmKg5ZIn+/7Jbi+VlViXuD9CaAUtdEmnwWTS7wZWuskVvc/SDaaKV+Jz6HrZTHo3UrAu0IZDBkXWmL+mTTjdTb1A+MdhKkY/hvFNwXj1FzUngsN58u/kTdJ3Xi0hy7efR6faAOi4SKGaiOty8lxDFkiD9wq2GW1EZEsoWGw/WzxXhWDzYY8CC7WuLFHc+x19jhH+FiLXwDIARRtnkJPF2BUPZ9+grZ3tjqAWhhN3h74w5pooRQUNATy05A9HDLnILGSCtfESoSilqtqAIQ/TV2t3KhOc+teDf5t+DqZDdB8Ob9YXyklrSO73pR0QAxPvQj57c6FIR5dOciqeHZ2LRABMROo8Jk8V6JFewCL8TCd/A5MSbXLky1cW7mXobqgeEXdFDoEydKo5oCuyn+2JYI/7pIGFAzErlHZ5hOaiT17HC3zp2HpJwsIAb4/oIoZ8x8ak43Yp83Ermq55Dg8HxKGHXbXs47sh0PzQELTGFsf5eO3lYAuJjMneoYWk8W/3tW2WLntEKBZEW4hOFgo8K58Rj0vk5KLyezu1d8SO/JcuxpOJqFUM2sxBmbQ/9qqwb90R0WulpR/Ju84bQ5/fTh7po/pbBb7AQaYNdK3fatD3K4TLHAaa66MQzp/+ZGyCjzo5OXRzJ8UHyg/YpNHvvlOpwQIOjakpLHwGV4WsLDPjEIqG23ily3LL0dlkYQxj3Xx0ApCo35zYGoGOtIclYS83MnI5TwVdQ+Hg453WFQN694DaqhGaL/dm0KncXYqXLi5polgT4DOrzD4oSVhrkh8GW2PaXjOFDCLPcn4RQj8dRGIJuV81LxMPZ0UL6zpkaebhbFBxcRJe38UiTbUPDjFWk2jBqzrBvXcKmgdDcmRyJhIpuq+3DQY464AlY42z2EM0yIK0I6b+VgpanMfpdWo7OxKY8RM5tSJv340/qD8SxrYsybMuUkF8fHj7HcvxEPC5YYrH4LW1YKg6QaeFZLvPbrHZHvi4OXLKkN8cGQO8019OKqcv6QnBlj01e7qS5evoGm53rv+VmDxxCXDiOrDg+IaPeMPrn8TJ1oReXYI3yb+4HQbikxP5TQXHk4YXPUv95+KmkxGsRgTwP71YiMpqNXp0loHZeXRp9i3euKrVtxMM0e6XAoACwNtcc6sOuhZVb1htBLudzahrDFt5GkdlwHjZl5y0LbvSHwII+qYeDwRKTTzyXaInHIM+8rc5TrjUlPRVwB5LKFpQnV8e7vLv7T7V/iJTW9h9TnRtNCSGcofBWYm5P7wZcAq3AFamEW/GMbo27ldz0plt5HI53ddWkn9IuCZY+Iy0MATUh3YenRTbVgdLYtu893SuN6EL4e9V4NhlzUjI8nOS6B99ecyC1Ot8sDahQpWHbmt2YvWGyL3S9tEVLKYs+LnghBmmSl2uPWfqPobPwBHNLW21LUjfZb7jfLMTsMp3icGO1npK/rCsUgdBVKVg0Ys+/WKuTmVJoC8Oe5h3PK1TQhbpZ2ytP9nlutQPtLAEt+CVT90DfVkn7lHLOX8AfS6HLzfHeAhu1alnl19RHKV1LI0G7RPzYgVaSpX7th9f06uo2WpxjL86i/2uzK2qj/ClHbGDyQr3F9/axmq4kJ7zZFVXVVwfiFr5bhUGVZeQJHKFAcsnqPKsb8vHyB9SpFpT9U1U7D4aS9vYgqajxhC+hOkolJV2dKAxysCkWBo3SPiPUrSQYZxOWwWCoQzbV0oeaDEcgUtqI3nq9TSmpQ688/+wb26P2CHLY1H7q5lypXSrnwnnztq/jN1o9lyvLmLyGguV0VJnDCREkiUNrZqGG06MsyA+Phd9CuFoM5M1Pyk7S6TJaHdTw0ni3n5ysAup0kyxr65lFc81NcH8xSmpp+iOEtQZrH/y01k1rGMRJAGFhi+nDecpUlnrh+qBOCMZCcSCovOPJrxjZnZJDMLdpMVu+tBSVS1nKxsYjY9Dtq1/++riVfLUVhzofIcIgQQPOqHioELxU3EpCcZMoL9laa5YlOZAMEp5apx7CphrkL+fyKbBAf8ctwVd93FTo7F5Oc/alNsCgK6lHruPROtN2RybiLqx8P5LTUZXU+Aoyz08zYHasR3U8hPDKj+6arWXR9yWdJoMn45prCSURKKy3+JHgvs2Ot6v6GbEtdCumgCttv2VNoU3KOqUwqNIWHqYm4eMijTM9VWB7umEyp7UPOI8fduHJY0W9xSCZdvc2xMjo3Zdu2o/WZKDMOSh9UmLvo45IBppD2dG++HJu8kbfFdlwuIxk2KHhgHQeNKcHhFkYGRzL2VJVMOAb0Co64wvds5CaYl9ZmBm4zuGDeaO2eI1XM4+rD/HmZyRF62SabgAe8TF43VuMutigJJMfbW2UK0azGLFbOfujnHD+GGBYmSmOQbUCOY99HYvswBQA6r9hrc2jtsUUxLVjxnZ4JnIrTwIVdWCTPtpJpvlA7m01/4tbUMyz9mv1jdN1jkiHQCJXXKg8bJ+aqW6rbwbn5yDSHBTcFXIegrhHGAjJOZI1pyP83Z3vMYTAJoo8V9IwyS+U6OVg78+IhSYHDYjRs8FrF8smHQ9h4qAYxp49rRP2d5uxLAuP72GvZaYvfeLOkMrcg0PkPuq7NsXhMFmiZa6PKBH1l+oKHI5DBLdZCvCwTPdXqmnz8gLzVRb/ixLTSdit2nrzt0x+5rDeZT+ac31NKNskQs6noKlQccyD3UxzfVZFmcbpmrfPsZD0Ve34xpKWk/E9Khn4A5yVPVq+dwnv0EyYecPqXGU7R8suTW0A6NJWweLI3iSGDlQXzMYsSWkSMhFTfyA2vTDt/3wXk+mVU6bRNkZvNnyVHYiA4tmnNwdh/RVsk/EgSerfTIf5VBmuAc2IKSeL5Nbrg3acgFj80mI8SWsc3dNAGCBLLMP89gH5UnLTKq78d9SxQH/g7DVnBh/qnBdw5CDrw/uMzcdXSxWqGIFcnQZt/1aOHxUg88MN2w+FPx/V75gy2wzEVe6G51PQIR2tZsxbv62HhgjwtlzrVREw/yzlaAiuXC26cnpvQzWXp2mOgihyPCWqq38nEadX2T7f1Y5zGxEGBaT//IcL/BsquAJX5EDbX8X1p8nLWR2yyjFRvqC/jssoCJBCDJOsZvoBfXqQSEKhNARH1YfueeKBslAwLi24/wAO1BHptlf1kQFNsOPlDvlYednrEp3a4SAz/G7LIVEsZBu0EKWZu/euB/XKdkGonP6t6lgEcCOw8mceuzvEVzyoPnMyzrqoNQXJb9C8ZCXSiedKiCgNwfNkpVlHbUgE2Rb9WFScOeEad+T+jT8XlSc8rcvkIuhAv/gxRu2eb2GonLTyokjcGF1EBpCJbhy2H3lhL0rdZIw1okA5pBg2oRfQceXTPzhuNKorTEF7t1UIgDqIo7/loxyTgbtKu29o9K9KujvCqUGyPY7upcfiZLNBVKh5uXAAZjQjhlhBp0ukmO4Avxu4xAVhCtnsOIA/tAm94U3HEuSr3wq+ZLo8pyoC9EB/q3pOzQRyCTkozmJwo1Ln/2xEbtNnS2S0NUIS3yz3/mBIdxONHxqP9FW+uoGI1F415lI1nZwK0SoPA0+flaokBGEoXgZnO4GOExU7VOjdPns59ekmDxqNhEHeAF5i5N/3W2NC1XGFjTpqLrnCECiwVkOTrLtp2ehUIaejOG6+1336YQSKMSsL4zhUjw6SQKryVRz5Ldn3R5/r8AOi02RJkQXPdvPsl/FMg96E/cJmIFLmEDzr1Gkh9G3zisG4pqM/MV6XIz+CtDUh6hmJB97VzN8jaPSS90vgDjvnaNlKky2/zIhE9ObugwrftI+Oi2a4VVaB/Mwn3VmaWjsU9NOf2usbcN/GLQMjvfeU/YvyEERPKw1leXZWWk1HXzY3P9MUq6MZq1hkEgFzds51mv8mnp1i4pQprPwY0TId1szXwe5TG+R5mMD76nGPQr7/EhQWksjsgGs7Zy5QYvMcGV5tcXJR+6hlHFIAc/M6XjkKYtwm673Bi+K1tNO9i1YBePTur4I+gMsOK7f7980mcJXhgdWdhNzUN2JvFsvXq3zZRG2V30sJtJYxj0aUv1u4/ppVHi1iHnTY3gDHsrQS8YwMX5XwZ2gcFYYe2wd7ZO9swr0gb8zf/fXx8QWKPXcK1UdJk3760B/TMlpWLCbhkqVoSTsOqzgkmFmFteCCTGhNyvFhw1RrTIWzRxq8Tj5FirvKvtkp2GAVhnZ7vnr71pyI0rKwQbVxKZuqM7GAvn2mRBj5p8djlHUsh/r/eBECptpbbjP5nFyuN4mvQLZCaxeTkDUzd/kNGLIzBFv1CElQO+xmf7Dzt1f7GM1Bh+wLDCJZlhcVDXbtPuGssdEie3lZNiWcXMTjZtWAT5MCmpq6JCRuFSHZYGKcSFZ9kOYJfEqLIcWdzpTA+Hmu+ktgSUwXVSwkaa/aHdZXh7IOyrudCBalCZpgXGRNbhN2XpEY60DXXO1Ci5ayZSoxtG0WRCC50+XtgWz7qgX5MRA5S+jzXCYy7O7Nn0ljVxiBxQNCZKZMTqi6mPfy2LZx76uyRUXHjnpJJEimflHDUxyX7fFg7iJvSrsZMH6Uv2xbfQNx5eCbx3oKycUrBY22KPmgfg/w07CDVsw6tb5VxPg5/X38cQtXI47U7MAGGjO28II12T+PjaXHlstPtkUQNn0DKkCYis+kVAkA1wyAJgYKLGnKD3nlVCarYqCkNIZbiVwO2Ydjl7N6iOtvvbAfuq7VKZLo0jEdw1YdsRaHcuJQulgb51JyELzYBkP1hd03IDcZfPg5XmNvYQSOINsCSn3BuLtkCPZRalK7+S97zxvJHiJCZJM9XP785NZ8B8fqDe/Ot0BS3PH1ptErwxBtpgfOj4d/41nrSjJQf9bV1kfdBHJxYbHILxOsWkZvoP/Z4Sl0Yx3bDjTF96xf96+6uIoQ351Ce6DeTwTnkPr20YwATlnhskWIddUohklNITCq/07zkiEc3B58uiBG6d9YAc4h/7s44FN2RG1UuZWeojrOZIhElvDP4KqHcOYbqqS95o7ilQH5ONJfy+aYiB+sPpn35HfHG3duLpNvBjXc+Klf4IKrFHjeVty02xPTNnbdL4gtkqPqMLhSgR/fDXzxJbSScqewiF1wdVoJ/fGL/nGWZfVlDHOQKD+/i/mqwXqvNqxtZeRHwoe/bodk66B9soOnZp36gdzVMRRQsQiBFf+HXjRcrRf9FsGghw3+qoN0JeeMvDJrkSBPsESDai/uVOzn2Ohge+UVdi050fdWpsjP0D/QuTdYs6QyI9xnhU8WT2+KBKzoZ7Bq8fOdKPeLulUhJjT34/EOnUloqus8+pzqNh/UdUOhgTlrbkuTfsaIYDm87u/GNIl3N53uaU8bgaBjpz0jdu1f59K4KFDtwUUeEUoeYx6DEkWKHdi7dtHhQF44lbysk7PqERrsuAQu2D5tDMl7kFoGdI8r/s8rMytJzYBU40wqeFvTl0ZVLdOB6Ya9E/f8VPbGx5MdpYqYMLMyB0QxVdnoJ+tgAQVWfH+jtOHD3PsjuT8dOTSrupuvHWRHQoGI1Qj1Hc6k+Mg84FAZ/gzl3SEzuGWZKFwuo2D3EiG95D2Z1szTqAuFRmT1nEh20tkC4ysmXx6JtN0taK1iRR62s2uNW5rSAvMEJ8yotr3UhJe22brlQn8Gvcq1I0aODaHJucQKVe6SXyfcDWODMw8xf+2C7Zx5a4Qlh7pJs550DictL4OxcDXKvVmLgVWRwb3moxv4kcxzm89EERJXCl7X/BziBkGQWOHPGF+6K5NFJYOFVv4+NyFq+OPMaSWZKoydplufY+CYyL63T8MCMmwqLTmAE8h0prhi174wnx7DHZWYuRJSYZ63uz97AGOzyI3aebclnud77znbZetbWUripe+AadLQeZPtWsF+FNiaXCy/98km137lWewyc7Gamai1Hd3Ls+KMMVh0R3NKTQ08TIClDfMKwUGKy/7YZlJHU3uW60X0r74Afh02v5MJgVOYkjmors6GAaDU7yKHydfkXYd6nEjYc76xws1LDLWCNNKBtUHNyLseOyNDgmHiJ41lXvq638RzDGis8WIniOb/pbTs+HsQVGPi6mxG+CU+oflMR6/qx3pVP+GPgqa0U0lo8MVmI1cBgSnPGgrh+J+m9TVg8nivua0EQP7xai44ruC5gsAVOp9bLsDXfHQujo6IpBmpfbbU8PDavZpTuJtmflVQuOImnRQ5kKoQz2NBFjdiHH3cF9QLgDP5vz/W5trCy22Uk+TCjXjdbCCHB3rJhKYTwiyQUf8xu6yTKtIwrbw4tzFgXDODmWYEnnpDupk3b4AP3qz4AZ2En5wi6aZV287AgCF4vH8TlWLni1E5Hd93vLxSYLBWSuj3eXGFtWyWpBkIeKu+YsBh19VeakA8OePM0ILu6dYYl9DNIK3kU1ybH+A5xYhFI/EqSX3vtNs6V5eQgxYLvu0hYFjiG+n8JzqLQVROiVa8XNQDYJtDAetPFSuEtGI3B8rnbbrNo9TJn/z3lRYq0ecBIe7a03vLESwhKOm1bGTk2kPMv/Sh9wyCOmIore7JhSFT9HIjonBfi+gcdDLfFt7dpShJmW1gkcXmitWwm1cC480CraHm/or2MHphB9Q1bmt/SBXFqXJdcv5GTt3IS2fRgqThhInCjRkh7Dk1iS2vMBLSGtRPppb4FEu762JehUMQxxLQre365CKoJGvJwVde91XQ+bDp5ZsMu/QHmLgITmwGXSpQFQlQBajqquxlwIOe2cyfezaSHIoRNLcwjW+epnmAtmmWA9KU29v/cA2iuWbj9ZV7HR4anhHkjbxnzKPHnIZ7Mm5wAf2o/3xUhnfH++quS20TdhalHgNhusidPKWyKWV8ZjFLgb1fX2r7ifLyUtxuKHHIfCWXQJ/DKeU61vxmPT34MTi2Q9r7/sK1CYuHVqMBsgtfenn31bUzCoyPN89KiO5wHveqnk3uyHnJSUBVTQQ3NyRPmeRKTQvWEBZ4QWcSgMyZF0RQgvUXRcp6KflF056fwahSioP622TdcTVYi4cAwSZLWDvfjoKFLMowPQpzn6ogXHc93fFA5NZmnwslSuesOyNI1EE3RM8kzat6thkmpOiGmm69Yn8yNuxz1YuuPWekoybkee106T9WTPXo44ea9E5QH2Ig6FZn716DBa2FyXHG1B+YfnmhbEpANlOi61BoGO4+G3WMJDokJXj9GhNsFqdaLjA1pkhLP+/mGCZoYsxNI+A+sMvWyoj+PMWeR8koRz+r9pNVEWT70WhiAkNTrojdr0sBLwxIM7D4zT+cVy96ZE+ABi9CqkM9VK7iOfkJVp7AqCqQ9EZ9emn8rB8zfoQZUBrVd6YS2AqiTFt0nJ8HfPGmnBWf3Xi5CgyWoLAmHJp/AfTdHB0+Ns5DlhL6UJ+O/6xys+CWVKtL9S8fVHkpwZZMJn6jVtiUTtXjywmiVXw9a6f/G7Qd4tZtcoS3aytxXYA9aGGmEeBobjiammhUaMDicH3nlOkDvvz19NqWOvHC2SMv7OQHtDIykYerPuoLz6SQNOBtw6oX2Sj3ZLITBDcWNx9CuZYYVaE+vleXnATrwn+PnuQ34jL52tp85aIOk684SUlQ8uyO2t+eIOHndZ3oxD+BcMAba/JVxRYUAUZoEw3D80WWOz0/ul+fYbhFnffx3PgOy2LLiu82D5FMSpi+Pd4EkIFTgfv7p/0vnX1wp0VpNzyXs/5S/4z0RFS21vIF67k1ERTfFuhLM/8fdbKognohMqTNF/+oqvXXLuJB7IHeDdn1X2eParLBEpz8y9CAN2g5VdE7EimekAOhkw+tTzqeEsgyQL4iVDnWrP/RcBd6CDm16/5t+I1SAxCn9wo8knzmpg8DYP8V/vHw8Stu7cliAt+G/VR4XPNZXWF2rZBeQO75os2jFJrbtkfhN9BzHT4HGgXTjyTy8NGsiQdeOw12GjYKCyxP+34kRHZqYsn0pFvVubB0+/emKRgiGXNRWQwMSvAB1xvTprD0Zyt08BjP/4W9HGNfNBcA0Qb9qF5hdQ4dDqpKAFLoIW2gFEVKOganw3M9/4WP9ckP0/g6kaJDRurtxNgT+PjvWYEWlFa80wKYCkd/0ZChV94njjGyg0t98Pz3AL2AFAhvRRiJwdfRcQqqhWkv/o6X45d5w1YLJOye3v7rgta7Ya0jAl/an42ng5Wz4S5we7n2+1W94JnpoGyV8WW2HYjKLkKmp4hBKlNtb5y4W1MrsG/wfq2N5Xrz2kqhdPQL/YoxgCQd6Y2KNkADVu7TxugQRWVuNL0BUj3JRFyWNeCmB74Wsz54OPnbq0GFFxzSkoiJ3Rtq8yEJMKvOMMalFKH7YFHKjb2nwrKVfuUUuRtTfJDiBuaEHHoX+MUrM2bBaAsSdnY5PjqcMBn/wwojQxzt2MoOCC3OEArr09ghhsj2M0mue5ntQcmcC1R/sK3zfShGJuazS+mJUeKxk5u36CYj8+SJCq8ZEv7bNf1+BywGeDQoTDGq6Yh1xW3Suwo2O/ykazTPK/TdVOICyiwK8MuQpK+FX3mqSPzxfLwFJ/iYDjs0WgW2kqXYgm+gkNToB5+jYH83Xlt0cbtEmkkBaVGlHz61rVuWzrK1yjn5nYHKvKCrBPPRth3AKDQQB83fdrbgIeIfB3iHya5NPpEyxbzmtN5Dnk7GqrQ4uu4h3QSoHU+74zs31cWqIx4SZ2bwWLvIxUtR6gufZhNZoMcmSB5z1O9TKvHMORD+VmuiqzsyJKA1OaApB+b9x6u9FTvUkalgl0r7raV+wRqimc2D7B1z/OiSagdd5UME2igLGUcgPlMSX1VsKQp/9yDiYei87KTBA2NPCUmgaLwVdvQFFFxWp2vGCY/KCUvxt3FOu6xIgwS4Vybvbj6feUCkrQPpO/wPHJPhAobSj/aa5YrUvjHMcQkDZwfc9mvghrk/PIPvcJa5InhVBfjh3Xr9vIvA4ac+m+pywS/EqkSX55xgiyj0TB1EE0NT3W2CPFdVD88P72SpdFzHS/6XsmbGtM8JE/m8eojzd4PM1bNADliZ+XG/9hbcKg6PftVKyKKt/8Bz4lGsHyT0VKj2vDGp/qDGBajSHrqzmpEjW5LXsb5kTV6HgbMcnPW2dzQju9N1sI/gPVlgGmk0bHKOX2Ws1q4aPizhcM/XiJ5EZNUK6bZNUeFaUJVTvGxglRUY7vdnoVOe0Raho3huh1XDeTlHpk/2gBjjhUQXe8FN5A4zcRqkNtKpSVq0xyw9j3yQlQxq/Lnqklpz8lXmzHkz8sX9HJjHwyn8UAjblvN0ZFIk4liejx0lVACoKvpsT9+pQoLY4weMHRzcuVC60DUFkaqLfclS4UJti5WK4FE3dYcc0OilX50uscLJomlR6pXriD6ELNNBWOSMt50CJjPkyt3Zn/xj1dlPVP1t6XExK+b3jMoULLPOrEGvjELfAMM1qcuBb0AijkIuFca8f8xapUlkvLjmmJW7RK94r8HaPzvmHHSqX9MXdivNI4A+JHy0VCe79UZZJvzMGzpnsj+Q6k3EItDBiA12fTMlSbEOMAWCdQq9TtyUiAaAqJozMzryEg0k+yVHqCc/DyJcCE2V4WXIhEnsOc5c8f4ChWfUaONhPPWogpDs/lyVCvp3m0NSfrAJKNiVy5aNC9gZ6c9BqwYgj/cDO3kdam6gCjhR+akALFYmt4ixHkWxKhDTGs5K+CwRiKJnvxP9dbxRPCBHbiVa8gsd2GuiNHZD98MNwXMdMC0MubVodd7dnyk3UQFfCIIL1osPxY0ZJ6DvZXwtZ2I0th6aqlTMULVo+lhSIU/5qO63lTSa3MgPRJEOi0AJ8/UlZuvgqLw9dyEDQoHTKWOsq+6fzoAyvIpv14fLaY+braPd6NkSaq0RClMenK1QLH87NZriUaeuCo6SZ7/CfUt2K6VOt0AjIK2jR0vorf6R8+TVzxZb+QdLimH9pU5tQc73xW93QRPMGy/gCK+R+YzmV4fHK52GWBEBL05EEoTY6OYG1WWji66dWnVTg0uPNw839p/yjLxkCfdTaH+v6hVUCd6HlROj6W8Mil6AYGC7NI2+qkZvJh/dAw/iQspXQNwwWHr6slLIp0hBHYTDh/J7Ba7ZR6cp3iU4bSXdmzhTahYDev4yKiIHyN64EANhI5OHYv1G4KXfIOvQizYWchPhzQg5eVGNMxsqrvWVxjtIbkKuHzE+IcA2NZ83GKz0D8z5zmgRnoJGKigseP9TmMS7BgAqtqyixA/SLc1KEUWrhXOQ6kA5ZQRazp3wwSa404cppBnfsS8EsEpbr/gXyW36cZ9pt1RhzyxGxDUmnZeBz/Uf1AP+gyLIg9x04u1fThm2w/H1ZXGvVqsO1VqutV5gUhFkdkwoCjzz3F3FUr1v0njGYT2mSZYvoF/fSd1W11c5VIhkEO06US5wYRmHVPYXmZnbK5YHQ8pkIDJ0yqssqFK34CuHE8RWb+Dr4omk779QOOcYomAMYQ9ILt2KUk2uNlahW/IjGtenuGLxb/t3aFoVz4oNwMZ7iyp4td8mdzgJAfnCcYtklubGAUB9k6bGC5DSkf5VFarnGEBWz600VGR8QywZ+jIYFZbtKT2QdDOYP6k7D8qVgEZByGmRedZRWaQDTggLyNgDD6pQwEeSs82+hTxWypqwU3zuAWqfwil+mytzVnKztyvMFJyJwPFaPr4Z3mTjyxCR2Jv674JVGGMUSWb0l+GtcYtd+NBGChwr8mB2hlyccget9liJhQEb0XgXfgVRlHlbO+jlZ9CcAew0Nw+tRcWgNnz/GL9Kur7RohRhaYZBBmQA6JhvzkazHRcdZDn0zDkfBmYP1PfQjP3d6qqx6gE7vrb3lBKEfK3Y/nCe4COdpr23oZCoIpssGXmqE8CGpO2bEwkSN6uqeqR4UtWR+xsgOzNeR49PTLJpFEAkXha5YaecJ8t/KR+eG7/HKV23zPZAMvHDC1rdxQ0l+6wlIgZbUybjBe6yusL7isRuuYYwg4+8+4lia2ox8RCdvmXlt00ZshBnAIfLkSwIqUzCcsD/d1ZG6Az728L4FCIqBKpbA6bzkJ87lYQpbaHpwPpqu3S0UqNDCwgg3q9MEn02X16E4xibz/rLx7NMDtHcwMOt9r1dVU6Hws9TvJVH7THrnSFESgN5eBy53Nq2Fdb8mySTxz5CitvVE+ZjHaYS3hq9Bax+uS7TxMIT4qJE7HGdsHM1/9uPNBylhP04Lck39JMe8v2dPOSJzyQoy8m/8Fc6h+X+5/mBVA9jAsG4vmx/KdUW+NXxgRt//SS2Ib7aGILsjOz+ZZQu/NMeuAsP1pFRTN90rqIVULbJ20ZJlrjoZD1VxHEoDFFGVWCVOT3jGK+vFD06gc3yDUSnZ7ZHjGmw4ZiAglY2nm78aUpXxI4BfUHqL6YQKFDCazUIryLi53RczlaTh0ry7WN4WpWK9sPJ0J49fu6RGUMYZd3+NrRvEdOrS5n+EJOTkr4lNzo8vawcYnR/n1Dq0rCHu5o2BGBEHABJbsFLi/mlWFO1MjpvUu6UPJjXlXse6MtBROT/mQfyegWGmFRQ7Q/O+rJp471+tQF10+bvkExfBoTQrewd5UwhAUODpyeW+aK6vx2AroUo2bGBZ/ZjcsJFfMYEMsm47LdQSq7T7peI2Ex+4/9oIAJGfhidbXA9UYPNhxigFTg83CETNYfYVkoambj3vv4MZNtE/wrIfTguBNqkQk9ebLPTmY2U4UCzbYqPKO5vjaZXeVksobDAJzhVjoU7p9TdFmNMyLyCQJryBSOcm0hFk/pcwcV15KZ/+IIqeQGPkTbiY1haWSnuQYBeyW5uSPHGtYw28cQS/v3rToNAUGVBSQ6zpBt4CHvaOfEJhuDJYZCcxvPeOStdCzaoSQn9nDe8wDc1MXrJ0+9N9TAKcS6u8ANLCLY4UfHLGf884/LFIn4OLOlRcNl7FS1IJgu1/vLm4INkgHt5ISp2vC3MFJHz1zJnopnKS1AgJtCmhJRZDaW6wis8CJ0KAJW0Yy0+kWI3lJ9N8yqJht68FMNVgkgaAGi5LuKmkZWm+ztKvf9gT8hJrXZkM/QdHI6wy9BqVeWa7g7ZM1YLbUv37YSnLmGsCrl/UVi/tG+fZbzY4bGye0zH08VQpGmyd/v++fS9EtasmbkQEIYnmLZLxO+tNHp3myIGwYBZVXjlWvrCiQcsP/Fu9l0HWmLBu3gvuJ4phtJsXXllJdM8iZIQR8Z6zEMs+cqVL7+TYhxDd0c0l4sbyIEw6N+V0v3ZbUlidyekdcz/aIomGdZtmdI+1QUrrHw7eDXT+G3zbTZMXxpEgJc4zY5bH5az8eHzwoo8QUleUKpVRrsErGmSF6GPJ2OltKYL6/C4zx4rHdcfsrQTcWBmrBWMMiFiU4NGtpYeACqYafRyu8j8x7ltp3nxVbsPO0MSoaR8tv61/q+YCqHX3h4vy4HzjCYEl+4ZDtj2+mawuj4J0rBpcDw+spzuCQ2khFbks09lPGxK8HYJl0Y/lNLUxGLZ+2h6+EFSaD22bYzF7dk/EhCWh6u/v1HUVKC/r/Wl6JHtd1V68J9zdOTgbvJuQug4r4vUV3JJolQQ5tecHKqcNoYjOIs6BZTlfB+yHGfGdxTKsGxbU/4taKuH8Qpd/M7fIG5zebrpiDHV97T4jiUNt7K64/u1e/+erXV34aOjfddcKNO76EzIf1pfD+KivBsRlzlsjj17aDPq/lnKHQCLsD+3TK021HNzhZyuwpLRKS3KE0XH/0TqUOr3VqLMcsSZM6349QJDznPG+sUqeS6wwMWp28TAoDKdmjzW6f+2au71HsOzLIeWencRa5JapKkVTYpvwMIC8u2L+/hYGJmk0588rq6Nnqe041NMzU6lj1K5KmSj0ZRiVpzu2FSTl4PBYHAuhe5dtwnRQwvvNqIELVxKMFWedxxB7UO4zpYRe2x0zH4X6pI2m4g6YdCs08vR9B7omy/goQUYbUZA+wJamq7/c0FhkNm74Mp05NSCK1Dcy1+9qp82p8XVkUB4+SsVRJ/Tqtn8v2esmemr7zjCfjLicMb05JqNoL6zzz0KaYkXeStBrF9+T7EbZTo2Fa/wS5NhJvRoZc8QUfS46HX8HIZ8A6LK8zKtROnakAnEEFoonVlvYR71xYuBAXbjtxfu/bteN8WkArB3//qp+3btpi2SIMyK6rX03iCLnzOd2OrPnD6xqgVT35e6NUMpN7EJSz0DRRzyze1J+Dx3cfx0M577W84qifD51mZG8VNbBf+5PxmGGrGOmkO+Q41YnCkx51D+X3CXsNAjaz/XfcPJUXJ00vaQyfYDtmFq4kU1ZHdnep48T4IskzPsYT9or3rd/ubiYLqeBqjnGbuNWb9ZdPDxkeBmJwYTjsTU+VugQmtz5+C3QBX0piVh3d7BK+Hk4mO3q8qJVQXeIqs4hKuRvBfIwwUyKg9W1x8dv+EwESuk2Bgs1+Zc3wzx4eGasynWs3V360wH3fKXZFTckeHZdgtzTqcQPC2hCHhSXyFMyljvrneLE+c+b/YQ0XcDBam1oAPzvKmmcgER6AqnyC32Ic4HMP4FQN2rh4Y2ntrawByV+9oq/Z8hdwQEPYRYiELBCnuGGXDQbl3ZLuUo0vfKU/AuMwYfNXmNM2vkn/GRrpc5WDP+MEL80tbJDZfDNBRfpfcvVpf75u0LrkIIjnU4adaolZWzB2yjIVwNrF7zF//n4N5xHeaGc7Vh1EYRdc0h2l23qFvLBNQ5kHbmX8Yta2Vj4DU6eBN3XyJBvJf9iL4x+hw1hx/7Ej5U8EZr/Qhgoni5r9PxBfU3fdvXICGW9DzST7GV141bvyMDXblFG5PizNjJUVAWNSxIAStz6+eDAbkYeAKTj6DIR6ysFvZAloBLCgSdMFd3ol/WXDQh3BbBtLqO9hp08BfumZjLpTJGRAIHzDizXZfhbgqejNSS27BIXQLV0muwzgXGqYt9McSvtLWo1Fos3k6Nu2qGyFftqQyDz0/bmgvtZyiFce/SLYnjt2Q9BnlmUVBWOtbDPvUgOSizvJDhdiSkbLLP96MJ7dKO3eUK2nZnpb4s4b2XGF4T6gC4qo9TDv9z2SY4Rffb/RjPs76P0YiWADpPB/nQjC2tDRlxt4sdNCIjmMsLgU+cr8cpyaMSYI9maP4HHww2jTPkGKvF6H6+DFAF+jAZKT9oi23gpZ2zavE0xXPkF7a2FTNJ3bwxvsJV+o0fXZAkmouYq6B2+6ccHhnUIeL10QtZaPoZPJB7/Xry/2Nv+JJFmQ/p2NSiO5bYGA8ej1vh5QlWhaX3JMs5gMBnyyIfXIMf4im0WEUnCPAJzq9q04Tmxzy7nGKKEf31kAp6IFk95aj0AogL7iljLVJlOXNvV7BwZn4dKfuZweSEZBqy+Mvual0TVDHiwHuIuXbvaw+OkU7aeAfck0Hc6H0jgt9g6Rxb6dAuaiKEN1cUYtD88y0b9Arq1q6ML9B20/FunTnZNF+IHgsg641FfllDFpQ+dqrIPKQ8IkLx/2ppx0ivQSrehNaf5dwtBjnPHroRGzG/RWOdiW0COPzepxIqcsWjhfmBXSUD7YCvPm/qTGcSnhcriFKew6a5s0AgK03I1gEifX6y90cJBY9REbQ7yW/XB+zAXN1XZQVEs7r+0ajtx8KvVBKJksKj5YFGdhEennMbwgCJJIMdt/pJD6FIcNVegt2LiQS70DAJeiNNG86dQVNYNZmYEfo8oa002xKLh1+rHlBX40iY8Wlv7FqswQFktpyLn5oSdo1jBRz8V3aRIOmhSnrs2wxGwGBEVEXvRm8RZVvSQ0xlKMVWs9Y7nnmJ9jEVuDL08D2ES3plzvCNP3FpKQeSknFeVBXv5T1Yk0/X5vdj1J1LYa6Ffxxrv90ObLHARkCI+tz6+0i5cZTinvgIYLMVnV/OL+m4RCsTy/+9VQPsYv6X2qSSlVdQ3KM1SOntMNUBpb4C0MsDh10xHQ0cbJK0gsR6X93ru63BDYbRZmPISt1casVwVVE7+u3l55XJGJ0Ev6S+2zpNqOAH66RuzpVskXE6X8x6wHOfp5PAI/7YG3Zozh1U27IXGEEKIm13Rt/nTE3pKWA7i1NFdVQKQ0CNdqEsBkjiuM41dd5rIbR4DMnoDva07v1esxYBGU4JWJUJQyejYbI9p7pqjrpHZUNlz2exX1lTAks+WxY6CExoPlSlNNv6AIsE0VdPmHOj4m0a8bigDelTpIL1WoePLhblmhRlkPDKiZvkzz6eG8vLeJjCGJL1+VFa4QREBVyuhcpZm1ygJm9kuQ+8v4yEMw0VO+TKee6sMFRVc/kS4IirJupnw48LoR2aRk+GuDBZ25xnKFxdSYqZqvWlEcemsbzl7wvQg5z2xKxEUsquyGziyzd/X+XFl/ct9KRLzyyb6ComIL8Wam9x6LPNZXvhO0QQZmQ8T2MFjmRJ42WyRzfyLGkJKft94uO0Yy6Fflo3AoIEon3XBygpi3Je932ToU5EKoikvqkeLFACpsBN5dseemiMdHxOJKrVJDdTS0qCcTzPCyz506oyENFdelskwdghmUnWyXK2WeJX2CBXudNUBON/i8kMdtJm52REvmGqVmxe5aricuTCGLbgZtYvigT++E7xltEh/ZgUoMP+d8vaPU/HdhZaUjsgQ8OoqZeezvNR2JFm2on+IliVyYQ/58LmZ2stgKoBbs4SllwiTpNRw7ecL2WR8bbg05aTN00C8aGWtReWSsYsirJ0K0I97flI2gJRRN717wESryWahXUAFZAdyD08j9SIZQm+wq5GkoUkK5cQ3wk1x01x4fKLPgPIj6D6lZiylqvWGtl6KxCfoSQXlNZIHeDsrIRqhINxdrCinM0iMMkveNxhqrEzhnBn8F6nXVY5zUDLzOXpp338I2HycFa2pueObEof3HQgFEMnHS3/CDKwJAyYl3HyA4X5vXUE8MMa79gYELseTf0IEUJRsfSa873vl6n29lFq+GCqF1I+mB5PSyLFvgHv6hG5Hd14PAHTKhY+xzCgOwwRZxygPwNET0UiO9ynH0p3j7GAFEs+VSjl4ArhHJbySohRLfm6B7FxxYJLJxJlQr5UdD+5Vs0nM6CehSZZNYw4FzcpYoL6nS+wGGSNKLVLXgbgvzAbT4B1J4GMS16IKMlo5S/dzM/NM4NI+a1Fuk4qwaewoHqGp78vgp+SkuhLyAVhI2Or50Id4LlHwRon9o7JT3D2pibchFvFi2VTEx6cLX/qorW2YGSSmnu9+M8teW9DIRH1TfabuDIuLk16NFz3kNr5QLPGAd0JzN2IYFA140yqfi9LfBcZI3aUK/Gt2bfMMk8eqttN8c92OmUYKUaHbB9C9cpEwaOYs49MztuGtI0VMqDDHN8HiRP55BpRIJtIWbSyi0/LOC94XhzqGVyuzaVaBfg0f++sV8wy7ytxlQYA9w1ejE0XaCkpM9zbOrymf4OrEaIyQX84Z9e6wQ1czIvOihnSaq/fcFdkxJcMzE2kWcARwWT1U80dW6B+v6HdclWMyMWLYr49iKWrhm7o1yumJKxVGiv1Rx3Tw61jrh+vuNjikpFRxa0F9G7ZWs57nuhaIeT8ZRjYzuyq4WZBEXs4CyfvmZxGcS4/G2aWon2O/UkjqrfdbBUF0yavSPdNJacaaZxFQNejGDPK7SCF82XxiahbNpwFs/t07gbCJkDUvvKjqaYv1SNJBa21RKsOuGJNKO/F6HTjc1Q5t8lqLL4e83gWTT4aubYGtE+D4e9zdPPo2R3dvG7bDrCQosp62YhTaV3B/kEQGqtzvu59fbgA6lFyGe7urhYr3TWCBFYBmrEpB78fWnXUEd1z0LSzMcWL6vuh4CJYR0tg1jX4H0wkw9mkbM07MXopLJ2Rt7/aL3Hl3MjO8h/1lqNlK74QTbgkurmgd23XflEcMhjO52Y/Wsz+CqwkBCDN8SUcd0hvJ6srikURdDKw75ZZMyms8NdzvzfsXreeCzpVaPKbkgWo0BlD+qWqaXziVa7YTSezNkCD1UBphMwE3IFwG3+Oja0AILbwR+VMjirrIkRPt+DMtp+OKLpkiE15AVv3jn19brZGZkhhAsuT2sTiWSjLvxJkMICAGdQY6CcJ1bmQsycrXCCxoxrME8B5k7aYQkl31h4kmnvmUA1Uo5bGEJkzebQNuMeVIRwKr7shM3Y3iowzuO8Jm833ALhjeDbR9i+ajGdiv5nuQcBDW0PZ0CB/GHvnmE702e3iEmWKin/StmkbfvsVh9mXnjLzZCRfht3g5Fu6OpDSsq1DSVUie4hNThGTSTWkOhTKbARv54Bxp1m/BqW0CfvfUJMQYci+HzQBrAw7lHJI8klNzq1wbwtxf0zzTFIpYQcsU3ddDWDMuciKmN+BHJ47B6FkgX4uR5QSWzLqgN2wQK1aLp2hgMJGqMII4rLK56VcDk89QQhw6cy8PCM19olNpuDwdrQFvP+77wiyyKx8Z4MVJNxV5vJWOwvF+aDouZMW5HNno5d960qcPPO89qYm6Zh6UO7MyFx272aWYtu/0+UZ6eThOP3s/uMGRarrYNGVN2bkl0VbM7ZArP2AnCQLuPoIbkry4nTS/RsIdFmPg98zeYI4R0RY41FQsBym1OXnJcHtmKPjfEXuujVQGfCPrCZsaT+vFbMFWIvUy7OxquIvdi2DVp3+q3E3NGG06d/cz77wgHGWrfcy5LJIzCMZHkk6m2QnZCXYVXwMsVhJI9nJcgG/CrU5lgDb/DlVEsXG06BHIuqVfnTyLdAQZYmJlEEk43pdgF69V12XC+sB9W5Tfm3jPwiHn/VmGszkYx+Er49CLbyk3hDBSKuzDj+nzCo77ZO40EIP4ZROdSwWlf5S8wfYcAzjNdj/aZ8uknw3tur126RfCzMA+cUo5mPaZL9cVp33X0mRTUIS2vgtwDRgsSSX5xcJUWR8gZbdeqyqQEEAeDu3+BMlrgYP2SH/le2u1yfVFn5JX9VQ04X9mmABR/KOd3rAYqR+OQwLWao9MXVS1y+0OKo0FlXuirKuPaY1BQbY3Vo05Gf/+N+u4rDcFBQqiCrYhgRAEjvVW9eNCaOsukcJWEaDuo/pWCYGJLadm4ssTCPvVVEJNBfVXAcTIxH4EFtWFMJUy5of50QNXNZBl+oRuFIkdbt04DeU6j2A3vzzP+IkMahLD6zBVJv+xRBIc5fODvnJMmJRMI8kcyMFqxpeWZAHxC68tGFNyl6yyGN95SwNYXwDSIQCPlL9bzjZaWNWvs5puiP2lbEBlDw5vCHtVmb/sD8QBgOhRassChwM5o5g4lhlD4u86wmdmVmhmEXnCyLeQJ0rRtqYIWRhg72ieDnqmPvOkDTWtKR38TeJwrK/7IRYfbNspygrU6yV9YtJyw3I3uEkDgbPrpcNUpISYvzv3beFg3ZN+swedqf3IVKkcdiAezu/KpHGHPyvX9oT6qzTS342/DenW9ctM197UfFl4rk21KxSma1KnLIWlGGasMF4+G3dxTnqBscul4CqNda6Qy8ita7HCzKlYa86yljm+HQA2B5ArJoZy4LNxeT9izFuQhEoEhUTNJQj2pCc/O44h8GpQX6XgpaAvAQJLVNq0yXGFbzb3O54XQ6sm557+lT3A+VWPyCJn1MLbsssHIdFhJcMtBFQYi0bS+exQ4Rq74xNE2CIRSzi3nj5TNy2AoO0gdyBC0/2iH67UB581jmM92OHqgD4EzAzyxDauPnlIdZu0nWwB4dtxWN+meq/faIuQpK2hoRP/ULwIJ9r3xyxtXxfFwJ3YquXldSEnxoPiYD85u0OAHvKOG6+3eBraUiOgvdfp1EjiroeSLLFutuPPV9XqhAReYPaRy87OAkV5tzSqvyfufCvOMTtkpxApWsJ9n+cNM2uBWu4lj1oDjGasCfCt6cfgCzh6UbZanbL/qCgf/iHjKYaavIiRLJrU2BuzdsP97XHkXLYbbfsHVTlXSohKOXOJ+3LiR6ix9UFLo9qieejYk+P4e5wC64jGQLSxJzYt3cErx1Rtc2+xlJaEBynLN4hLl/qOrgBM7a+yswC0Mh2OieA4SR6MfM9WK/FOWbVyoUBIUAKOhhIZp2LOgukk0/DInn7sF7dRP6Nw77MaAcYg6k0gdjQN9/1wtGVSBm+6LwkI+xfcK9l+JiWepXul+/EEdV7XXp/9lUsW4RQmIkda9H38FJj3EYJTrG4hEU9YWtNd2lKI1683cXFVzSMkh+2nuu9K0JUBoAnrYkKVZpAKF9G7y5n/KMZrP2xPuUFSOaruqriffSEX9Euj/k5dgewEyQCFTif83LhkIjt5qJ1LyI4ynIznWl1SoAdecEp+I5WmKBB2fr5yw33NX94q6HIP0jW3Np2E0r1f7fUjqdxV+iCRULU+yAwPXFvTL7HqfFLj+wCfIbOg+nsW03rGTf1haLvAZA/nC52pSDnC4f0qOiA6WtK20BldZUaA6GO3m5ZOCGyemGK4a12hM3BXnbladA/yTRV+pH7IiT/9WOijGGNXzV+K4wmdmRjU3It+QwUCRat2mGkEHhOcQY06pWeQqBGjHkWcceX8/drkk+tYysHMXVk8hLhLGjUVgivK1Ra4K+RtUcZO5fkVkWQ4W8fyo2tafhGEDSsflUH7yj8wsATBE9YpskR+r7Ac8xqdxtEAfRioGXSprjbLI2DAZZz9HAYR7rUHzvh/UPpFvrLbd/hFf7sF3RimWNpiGsQRZ11RqfZkck9IJu/FPU2DYr/HWUdskJHuLufXCvDbKn0F9sM31Hn3zIuAMTUc+tQsO9ll6jnNnW9Ulo7d32jEQMqJIrWQL5+Se0a8lKRp+XhYp4IfyUaTRC58vFEjKupeFEpU4EOp1AjeALc7vZV0ovza8QSl3ru6xFpY0/ckElMOChkhLWSDHLCKaFK/qC/SIfT50GJZnkCr5SgXZRddXq8Gc6XNjIzSdCF+9YlUFKMiri/sn1Gp/dEMhARah97GidLqitLNBlF+H8XoQmdrM3GXBSCN6izNn2ON0OzpCxOuM917OZCw2ZC0DSvNuTOFCGGYf1TYgUbgK2KKc4zm/25dz3GhVpFqs6x4yhZBbiy/6FD1vXW/aIcDiSUoIhwrUtxuGGZijb47Jz8JfUTblzx4eNPbXeYpygkQo1xXonjeouTuJvAH/zH+FK50zOLAtbN9AO6xjfX09CsjKitMVlHWmmQybLoBHBPkC5IbAZxvs3cH1VAcy2X90WL6y/0SXNsGeLBdr1OWVuYg+/wUNiR7QnP2ec7jNrZZOosT6Olwn02Dh6zSwKoDnMFLfk7lBO0p9mWjex7gEFXNfxFO19qmaoISUZEgdTuy7sHgrD/36o3XeFdzLFoFnOJa4yaENBXdTSmVZacz+5IGdVkEgjQt/TxuhNGHGtQuzNDfM4iNZ28Ly9S9WkUGMNAfDRLr4ipZkJxUA6HnlOi4Yb04/Ze8rB+HEXpDGC5Jpr4fN62LQh8o6kxknE1P5/rNmz43jehFlRUvCyNi3Y5St7lC7a2ogCt3Za6M7AshQdbVV2+R2DuuiLEJz0MLhnn/1/F2Z2U3h560PrnhR0Gc/5GW5DwO/DGrR/4PvL046BKjUp1lfrtKfE4osRTS9/oB0GrNW3cYgvhU8ld61sHhKOf4P94t4n7h9zdRXDaFv4ORPHokkY+NA9QA49RmsGMfJLu1/RXuluq0J4fsUUBoa9dL9T0yDJXvGtuoln8aYrNzoapa7E8cR73/wX6KwBPpwCUUlxsBtOj0rnca7zu5FqJC5W0U8Yt529SAI0S6nmWnS8zguQLRzf/gRLaqSQ6E9T6Q84u1cs56dzBMv2eBG+zAKw2V0x1NJX1gC8M2MYZpScdXEKPG1442UFWTEUlkM9OjbR4FurtJNV4IqEu1htlgltESO0SeZMHZ1JM7bNtYegevwPSCmW+S8uEGj7FTSSV0HbDg1rOnt4Ws8DxqN2T/HOXNd5NGboZ8VTSD6g6rLWcoWOwsyeG08GPG6KHPiLRunEdTPNmY74ObRGT1VCHP7nmBYmjnH+kqK6rDyrEoNjdqc8uG8yZrHWBXU9weqD5rpQ6S/annq7P/GiYepA2ZDdJA/GbdxpHYatPgkXt5sop564gVHZamW6cq/cdADaLCXWt1WgK7y11WaQR90YOen8BECQ56pmJbLvzzfWBhUUJP+dAEEK4o4wZv2+IBAFEdNkNF3mKntsLE5PDLA/IEiV0rziyORzLJsoxRMCQV/HlpCkXsaizcHT/vxU9iadf2hOkKehGum3973fFs7uRlqxz/oDerFL0617PqG+VYIxjeRb2IRLZJGH8vp8ITzF7U7HUg8Crs3WpVY5r8wxn8tzGvUUwY5csVu15Vmm1xcs0UL/lUCkrOXdLtlaa4pHLeQgpd/vu1ZzjMOcgzfQaIwiZK+fMZjRLAHUf83TSCOkovb3xPkD0jElmb4TBqFrwn8G4KWr+RM58qhCnlVimQ390m8YLz+fNHbBRDs7GJgHSK+v5Z9cwZq4glnR2eTjnqTy8Wo7BEg24CL/RT1AKzOIE7muo8oegzn8R6qab08LzTcbb0ippsScfjQoJhsr4jKG2pMVczpCYqptZcGD5rxTHFbL3+NDnEUptRMyARhF2FMiM7pgaB/IpAna1AHa5EPt7oBdzMGg7kOdSOpxrPXbdP3l/+QCfCLMpCsxFd3VAxA/IPVvK8JaenCYCadhyZ6rJeGxTUh11+OOAjrXIJxb/EbIy8rv6h7hywPp9ZhPCcgt9BN808JhGIaKwtL85jO5nipQyAF690xJ9A2DMuCx55TSG88fN6rqBMYDI+I+DtFmoAqJB27B/xxN9xMLnQwLcLCHOx4GIFCq3/6i7gwJePjoG/HKNb0XjhuEQmYFzTgtt/uIo1bBX4C+y1jrb+R0mRj+RyaDkRus8W4WW73qbcjpjIh2tGUY6KJyhEaKiK+LHG5euQeYZO4zXoKbZOWiJTvJNNVrWugpXkIIIE4zK/g4JKATQjtaC1qbJ6khaJHxOTS2goU5zGyjmaPKvVPrBh27E7E2iZ/6omwpBARV/9EKeU1m4Msz8Q7y3MzEF0C8VIIqAxB+Fk8qG970lhV/ZIX6CsxiHqybemqil3Qv/cWKm96fPoMJWSA1dcF03dSwSyNMdvKKBCYVYLuqr2pISKPaNRJJw2R43RNE6avh/TNA1tGJ/ilW/e4LbOvIh7cS2OsbjyXcD6WS0DYaDa+og0lSxehZQiDSt2fVdtF+DO7/cEUAM3uju47Fl17rUPkRPaheA+6/jpSYK5Nh6rSwO8Pbi1y4/L0L5SStva0NcscpH0pw/3Y9+Eqw1SDVvRn2r2d8vRC6YhQywdhKWraKGBMILqjiU2l5d3jb1tnQIwi95QiTJW7MAjJD4Plr9FGRGlM4NQyAiG8wSAKUbRCpmxE+zk9YhXjiC/Rbt983pV0VzovJW+90dH65IOb2VS+Wk+MpsRgZ86uEuxeGPyB++07HlAwqFjq0sm5Lvom/rcHSaLduJrDdabujYJRWbbY2QZptvGwTHAiaqsAafE9NQa2oq6hV8+E2YRbdEcrirxyx9JVWpti7CsFfA/egMevH0MR40/X1jQzMYbw6mr01MI833RiE3EuU79cpspC8tuN6QxFB7ExHF8yrFQ4vRniEkTgKc8kT2tC2HgNJJ+l/FwYXky6qbHj1cMtBGVOw3SFMHn5l5odYVrLqhL6R4DujKq/CEsEj742QjUogvrSb9DOh1Mm5Z7n6MI+YHii3bWp2abi25FJIiX3GM/137MQVr4wwQ5IQETnYx0CoXX1nLeqLjQ2VlOulhy58iVxN5d0Q2TEV6MPr+wA6lluGEC5890db42elDUvTbbMcjHGrT7WA4eEhNLqVT35NhLruSPkwg1UCAUz94Dj23i6dqS1MPh40Oyi0W+wfoWYXIw+siweU3qKdQM/IWLUwDjgMQuiK+CTyRgR/Cg+XmfazCLiF1JChK7C2x+ROCl4t2WjYngGRxBWRQqqrNqx1EesLx8Z8GOimBJK3Ip3O0TWp1z6fhibUBvCtBpCBH7Wz0MrsYEtW/6gd/rLbB2IcMxOrxgW5u+/ZBOjd+9Zg9SRf7ln5tqXgM7wZE2rj4u7BOezWvuyca2TpJkQOR8U/bR+LRjmN6RAS7MCfYSPtJWSbZYnQL8vGmJb39SyiYiER2Via1nlShjJEe3JgCwTOTiIQJ5h+NQeEs7qWkpIDJiQHb7VwcR7T1gLGhKAqUT5DPO5zvGPny/DOh+Lo+Xhxf5wTkF5p5yY0vM1gw2UZQ2nhCedQ+PBxACaAeuBYTyBs9aNWvYATPBLUtXJ3H/+rMIUQ3Xz5MJKdV6OhLEEK73rb9hfjPlA0gKO4j120U6VHh4AJvL3WqjaY/KCbwpCzUCADZmnJdpD4p4U5ry6/YuhcWXcVV4dFm5J8qADBWw9jPITjUtkf0lhIJkzhXLTcXQBZaaunvCCxyWh6ifYzNTTCGJcUD6DyfGam2zj4qdBy7DwBaL2S2IxicF7F2ubPDvx0+DEQVydAIF4Utn+/niyxDQpGlaaG5eRQcfYEHaZeHBOfZ8x6KnSsZnB8YZbLVBcEF3Mv/87cj4r/BYDYAaUWrrm/rWPImSVpvPlB3xQvVG305B+bCj4kIW4ZWzFnX7/nApDibPZxncAV04laDsD872g54z55DZylkUKHXF7Y5iFwsc0HDovYpJ1P+XIAb4pKZnw/e2BrTZn6jCeAAvAt6Z8EdXqS/KoRwK37xhZL7w17n2PYpqnoCtRAvnU/CocUq+el+PFEwM2GkhLBAJXvVbqxBMfPWlA8XMNY1+dfsV9Uy0C+WgSzcXw/ylN23DlELK9DPZ1nzFCvyDWygh1ABv0LXhuVuDEraYOrX0J/NpbYoxjl/mfncXN1DorfumMjOo/dWEk/OvdZ8w/66CtISpGM2htGRpT929qEz+kRM+2XpAqcSS9GOrLWVVUVIm3Ez/yIqAWm019Td/ytbE6eeYJaY+mJpelcp0h+4Y1hmcF9J6cZQEJi7foY8n1psVTCzE0QYMX+ScYxKxb/bU9eproUaSNTxHeNhomtba4y/CfLAZYXndn5ndeIjFIsRWRpwX3HwrIsKxRgd52tRs/iun5uy44w8u2wZgayiPbOTWGXUn/BDqak5EZebXbdQHyE0yEhUO5HcDnE6xlAuZFDSKLDTTZz9bWcfe1wy8KhSOwh15cBRibt+faUQgl7/5na6Nl5d1o7iUWTjOhjQa4z2Pha1PNGSn0hZFeICMKGtHJ6EGQbB+HF6+M2e8YSQjJ2cnG2SVpdzXlnkzxYqwXv0s0WM8nggSh7Viq5joXNiF3RJ0A9637p1HFJd2I7GrQ4ZTOWRi8jcZaL/25Pox9feMT7VDPV6TT++0Ri3a1aLS8IABZh2dWfxnBmXDWPdvrxmBiF3eePVqd2ZM5bI9YAN23/3qVLElDeD61xvgRdjkXkl2tqif3zsX1gGp9mzEm6suh1kWL75XC2kXlrCreiNi2pfI+iWVFJDXPd3MBNp7VSAZRp1jpt3ug1pQEM470lZXwotpDljklvGxuNeKwTuKNJw0EK74nc0d851QXL9P4pxZdM7pkmbA7IU2S2Xa/AJRP2VOz3Kyp9oW6FgoQi4noNkoHeNnprbQod8n+dQSSbMzNRZIuL/riHaxoOHkaGYwROCZwqcbK1tUnU2Qt1J+3UTvklj6wOD/d8lrZG7ucjZiCyHxK5XVtzq9lDJ4N1FvARCTUfnLeOLc5bmrtGvb8mmsr0lDDyR5607k41wzglZH1fExfmsXrEjiNLSzSKGb7FVusl07/BgeCclDsQkds2G654GVeUpX7UHaqQBEmJsIyvfxvz85+WyRaoYuQfSH9WpJLeUoXpUt7+Crnl1Jqz+eARyCmzL59OUUBwBuoQAl5VddIrfG6xvDA/RZBOV5AfwjOrJ2xRo4N42rCSFCcnOY7xfewl6tVLetiM2tGLqRLc9k/owyHriX1A9BnluzfDc5xdEUKyuwzWPG+tZGNDV0WLl1JyHPflzcBpj92G0AR0lGaMSZuKui5/LUMn69X9wPKc6FVkNEHEjHjQKPQjuFCokjN+N/6DlMscpE48IhHIa0Ghrc36GwGEiPRymXWKD/di92yfjZjDM3fdHBdwSxJRSBVKHSwh6Ey1/zWZRZ4kk+KMS8HuroIw1UPa+PDVpsSIKvmqZnZisbfHFWNW/dl9n5+wM4VIzhmrETz3k9WU3s+z84SHh2f7dGT/G5WvoisBYAgwm+pqFS0A8xyhy4PiKfgS+6TgnQD5hDEerpzgFSaMcw3yvDZ0+xfL0yznf0uY8N6APiqHdoJZOWqTPnTIbeBLc5dvFdh+mvD+sDtl8BAWzYR7QkSgnx30Ru7TH5a/g4byacurCNvG0lTgpkj9w42uqBp1zMsKr2riOCQwfCRKkuSX9CGADOYGqCHh1JUsk6RwvI9OvM9fCJoL7Sap8NUQ7mAvdB2ougA01NdqxVo8NeGta0R9C7QybiN4uAtDxw2zLTG9+0we68JkqZrj9tJilUV/f4wOLc83GfstXOVF2bAJ6zf56YworQQEDj6QnC+lqyMkGAr0QuAikm0jqS7fy9bYSBz5hekPILc94b8aUau3Kt69QI1kFEmcb19aFQA4bSegA9/hFi61RDIVQ7iOBqViYdGaK8d3zH5qWIjed0hR9e6o4zELdXWhOVOcPCmZIYYXvgUsAyGUoCszsCiTdwOaPEL2kRnYh0mNSZGb6/kr8XfbyUdbEZ7mDBYy0yTDxhkrpIoJmVutN6FHk/E4cTEolaGnv7x+QxQIKZus8IEygpdtBDxj+lC5M6HaJ313pLDYbjpCA+oYl11ISRJ/fB2oIdDBHFLefQmF1uHk7vtSmIyI7Q9HG0qxu8QRWecP8ipKR1o4bGrAhR2KcGEDE6k8r2F7N9lNUZCswXi/EXaOlPb9fdsaw1Sspku1xrmyADIImEs//XiPqI3Jl8BlrsHf1mAVCBmlqE7usMbDEpilt45ia5CXzVqlIZ95Fesu48LEATS3dyXVEjwQAqVbFBttbLfXvX4LhaGKv6P3XBsKWvqEFfq1rPYdohHtQH03ehlVMpZ/BRCBFV6dffGCrIa7OngRAbORd6wsIcR/gQSxhfrfHFmb9Ws3Pk/SikwIvAIYljNbXbvIpKTROSiPcmBDp4hxLkrjR+MfBFZLV5I4usLY6WYmjhT2kzW9XAxxLYCELLIf6lg6p/GFgpoRTm+yQ6PYtmKVvdTHyBxv28y3vTiy+reYBZqmC7x0TDasiMCcA+TxdKgDY4s61MpZyI1+RUzeMfx1qh9MBXg1tI/HSKpcUj7+qTrwp35J3ezefo6UZiEWMPBtx0/tJyaej7NUmUHVRBJfB1q0bsw4yHfui2ZOPNh/6R2/I0j09t9QGeRxpuJzB6DNbaPTOmER6WTXYEGXq7DhzkvCP247uSz6r7MfaasDs419fVF4RAt4XoxkFRmk3sjrhpNSeuDoG5RpjE4pI3rH/ESPaF6RIIJBiAbVU/ct/nKrDmBQPBYlNob0WmW07GhOvvz0m/BXTsPB8qA8Iesm6PsDuOLEEm5+jbniDFyXfndwIXHgWBB1GCyGV52MU+5iXguncQS8T+WyxaPDqCCXMjwPJxGObdF8mBkG2+SpqaBQkeN+1IL8Cbb72d3ySQUR/uO+N9v36KAiKVEPx8EERU0vfKi53JWN50+LSYqgHmF0UrnnHCNpcwfX8ezokGL4sK/rgFZlXnIqg6a8EJh7DfMOwMgTwRjjZ+TrXsj7SA6EaMRroFgxXRIOGDPYZgkadllrCosfuVZqNQwAY1cDJzuD4ocR7PgZYXbCA3g9Jd1PRx7PyRTNad56qFMVIv/9AYYd32opL/KQOuEa2LIoyMUHWsHVeJEgDnTAizkdfigKSmZVUDrztoGXA+B+9B+MYT2q5BETXJUKRLiEw3upTpXnlh7hkEk8/0D3rV1lUxxSlnDzLfFArxdnXRhBNu085RxiTwTISjItGPuj0MQknBfLTi9AeLTT9QUKRG7bxHm7P2Kei6fVAeNBP31q/OVsTuBJZfKaxLodsCxObxFdyJNLV2tAt+2SCAO5/VWcDOd7Or0wzbVGwbXJr73+/PYn3VfNQ4CSxdqgXNPWDqh9ZFVRQbSeb+bFmOpdkO7C70y6dTSHVuHlIY33/KV1QHDJ226atG4ltS4fk0ZNDrmPZ2Lps6qyMYO+Wkmsyw/ECuxfXcZ0zM7vmLjkk/LsX/XG0vaL3KZb2C51I5TVf8fBJmMxHHzKvaXDwSTGiya0f8ZZ3olqbqcd2cjXM0jicXlX0cJsaB81POyuItwEiYZwsHn4gymrnlD0mfAro2YoSC7KxDdL1DQVO+0a7fN1fLkv8ElaXx46Z8EGJ/W6akIr6uEuiFIQB9fHujgNzIzAgaDEYVITJJO5XQkyimdgaTBvra1hUbw4jb8imqVpd7G9dSoQVNPatqBlbm7NLsdI/einfpw6HdFlo9bpLb/wBxf2BGK/YWhn6LhzEvBuRuBZJTDv7HV9WfnA2SyT3HV/F6f+23aOYC8rxO7QQ1FI4/0m/OAHdCwYedzx6F6TIlSh668B+Id3ZxNP3V+Z82Tt/AHYSzDsxyYC8mxyk+Za4Q6u8y70AKpUm1NPP2WMeSHfqCc5mUcG67RR+sJWZg7P5iG4FPnFmWKv1nwwk+fM0IIA5p7xmHnj1zbj89sN0hc81tzI6enBjIyPd6P5GXzsmp9IRHKS506SAEK7IxfjQLxkNK1x+M8YAYLrD1qWXqo03kTvXgYllmtbguZX1FQGpXYjbZzgqSLxcXTKqQ/GhYqBJzZtvPaYGODBTozt0Rw6/vP+hTUJGOAYcEWWr5Mqy4792lLWmElkf2k2HiF5268DSkEL2oQl+VXl2NXgbfa8xxQoI7lpuNkURcA/pNz/go3LD+w41q4eQy20ecjCwekr0XfODump0XPUm2vvNfk4P/tAVA2PLhl21zoFOrSKjd6D1AiMtz/f41uWlBWCDDY4tDRMhyGsls4GW7P8b0/dGx6VTgC6oCCWxMyJyOgl5RPaFDE/EzGGGL9XUm5X9L3crn0DvEELm/Vx6HwlGWtnfZK7dA8/zJkr9b7PBgLeFlmXyfUBxZHF8kxgW5tcxvkEz0roS70jNLvk3QNCTUIwCHnqk5NRDEaewDCzjTR5lKzNzx1RHHJNiZZJ0lXrAsSM03iKPyYNdJfMwUAvRlKP49yIx7XS9cvseBWVvGNAc2I0PmR6Xc9KjqauqjgG/Q8i16OIPtQ2Ll3qDkunTNq2O65AEFG5qycHaB2/159N4n67iMEpyNowNdkq/ZlDxsX4dRKNvBUJaYqhID70qa2Rgq8+AzqTaJhuYrqrDDO1n/0rWggrBcFsYwo7ujJZblKGamFf+3B5MTAXNUOKn5PW91Gx56gtqTqz1dYMML1dFR/KZUZom7Wky7v9EfKnYbBseAvDuBFBFFCuXnhvWc/JS4ipUIe59Ls/kL+W5lteo1xt5bkJYfug17vGw6cqrOjTG4nQXZ+RbEDCMTf5JZ4DBcuVv+tGPyucc3B6R9NMF/lc4ubulrqcBPhRUjGBILbQ+4uBJ9eUHMAj2ijfMskRMLcV5FdgqIWhiEvxNVlZSRrzTzySfBUjZHCJQtbgDZ8nRWLwk6rQKWD5aSHuJh0vBgvlNTP+a4P7p59l0FYBPtoNpiFl/dOo05KHesQCueTxj7IB6io9sqTWxTu2PK2C3ACiXWNyxs52441hxg3eco87pSRV1NUvQeac35o3tgUpXtmtl2yHh3QO1mQ55wSqIri3PtVxJ57l0nOuyav/0ixzLEq3QlLZmLb8Y2JVlrdQMjhpcC1j0DS+VHrYIB4JgyXacVu9PCRoC5Y2+p8qfeJA3OFreaabxWxz5omyn/l55+ufQkO5e9iODCdLWl2crwLrUpaMCi8EUcVXGb3Z8oBCUdwuuohn1sivwQp1O+DaRFYXIbHQibdPfq4dU8WeiYJ4WKMlNEuQr/BRIGwOrAIM3Ppjmzvh27Lyx6xK14sUHgNy2ggNG57CBbXznFP/0NVrUQef5mMdso3AJ33SJxInqYebzcZ2pEVYHYczXE/+mcptBHb4ANtGohwQabL1xmFHav/wFH/al8TKjzGnYiFLEifJHL7OJD0x/rtzWuCrDToEWPBNtRKXFZqz/kBH6gsxzy/TUzP6R+C/A456FbGm8soK/uYyafgNmX0re6fgXeehUvtDCXdAUJElJt7AMv+VMdIrrOK7TAaHo6E8Khx1rq48yOqMqtC08so9cQh/AV760CiEtSm6PBL7JKCZBV4m7t8Gbbc4TQRawpuwTFyS/vt1JBnAQUBDPdEddlJlVAfbGy+OKkohOw9BB/JY9rDZQK1o/kpfl82umHijUnj0gVqhJCsrzUxYl+ygkRPDEPZqUIo/+AtsGplmBSxL8bUE1iBc8lCtShF2iqMC1DdHIH1DcucbSNtxOF9LY4IMng4T9eTYzDr+gnOPVxWBYMambJUexTzxyvFOneFg3r4FBEHqG3QZRgnKISYUQKv9B23A8vhFRe8uNZpBtiMtXqOQlVEbO/HzkRbqVaGj4s2XRVlhO+ewkvEaTp4pNLXG1OVF6ncxf3Fq94KmGuG29LLsFI1fuX35J0TsRNGo+TCioyTrXLVEjPztNVQL1/q5tGSrMPhfJEaQxHcrnqhVVqN1gfF+JK9Pgcud/lGa+Ig7eKQpJuUN+PYhBYQ/b6ahi4nLNe5+d8rQlfK/gl3OQ3WDGWuUMOt1YlBKoX+99JWlZr6tTAVgDF0NSHs5fqbU0euO7cXKnvVB3taBFHP6/KKZCBfGqzNo6DgZgiAELh1EYOni64dmOWUuwAQCKu+L8tnTFLlL6uKkaNtO8YGlOBVU9mQFYx4aGPgGEI/HTycxYXBClfKbmSErtcsuhalOh73FnzRz/thPjvRJcRwPtZmCHs1nYjivLMWWGprl4fRUOlrCDiwNU+9TZuaVsuCxj/4DzKfcla139igH7Z+0uskWkEq/c0mrsRLlVpl8ln0G77hwK9rLKc+RLeI6KLKy3Um5C6Of3qiKNoY/7ad3EFvdP4VICsuTMTii/bee9efmKAiym0A+l3hS7SofuEJ46In7BEO+Kf597wnd6s5mL1d5zNRBdOEmfNKyPdUuCW3u/SfFQes7nYlfV/B1DOE9p/pmgK+bx+eZdZUMu44uBGlaPvej5wxU9aumiyt/uCCZ4PyO0OYfFAMMqTaYcI8GxYeHO/3tDJsJisLleLpS/gvPLbEksIm3R4OCJ21S4P//uyzQ4EJZyYmWZjtknKJbz0vFEi0zDWnZHl4kvpMSPlVI8cEAG5r0JoNN59joEsMhUcPZ1YtIDYX9cnR711x6SQEnBGgTz6d3b1iebIdotlgqE03w87xlD0+qEykcVizaOB3Z+ocaMGWybZTIdpR4niV9mDm65EzKK8VQq59iMlABk54A7zAlMdkYNmaRuWJN+bLJ7RqEZf8vrpM0+3cwD0NctuwJJA13JIJVFlPStNIXzAW4pp1OnTx3rMZQfF+o4p92WDkF2tx1MUdC14Er9l1RlYsEYnOubj2IotL4tkgKwnE219ZsjXb8PJFkzakaWhRBJAkgbR6myiYFsJgC/lellsN9g1ML0j4HX4rwIzHbq20FDkBdfqN9SUnIbJf0QQr+QxHx4f0kRekXaqKZYUXYMbRKa6OObLPOaKGft7xFAgT2pHuSw7kdfloER91zsJPWQJbkAzyDFkkgUg80kW7n7n+WBN3CMXA3lU6QR23Ipx/98577h2OGkpcp5YiTX/TikBkcza+iwBGNBi/j+GwW8tGbKxpiSNEQqUDdqfscbVMQ+OSYGoeQKSLwREfUGDjR/emc+ZAJsy3sraTZkpHFZAI69dwO1dvsOw/Q+O/2lgghmEsk6NKzmfI+OYuOG2UoagP9Le/y9UABk4VHk54+6fW891qe1yVDT2KUc5hNeePBaQwVb5BQYPt/+2xEpqsHC4GY37hXyRSGvfwYa7DGUDbMKd8vud28h67mpOl7fe4uFRe/HOKf3TFs+9RX+QpL0+C2b4R/8VfkUQOABt4tcaDV34nU/UFXBUDvPYMYe0F24AZPIWphY9bLwt+tWvmuWwhvAgPN1rxvo3hpXvQNSPsVKgFUKENrmSCjWPYCUoQfJFpepI6oqpsVwJt6IlBFGO4soABNOS2KtnF9P7E9sSLK1WWOdGvYNhxKO5/D5ACMSM3oLy6XvjzPe57hP26DKKsIbhLZqcz8tJOcm1zlVKV87cVqDh5iOgGkNIKp7JU8eBp4VRPvv6peu3DR+ROhro3GOnpo6Cdltkq395hUi+pDXzwcONA2YjC4BKvX3JGZi77wJboSzwwPelRCe5297Gau3hHdjkNfDMaoCdfo4BX1IthlFNEHUm2nTsuiPe/rOux7FSlxIwT09NqnvyBmWQYcleqlPEreuoCZRFvXL07v84AxlxNdJM/atDmCjpmzumIoYOf4uVqV/8ZnSwV78WW0S0R7AwI0EDq4B6IaI6AUBwPrNLY0eeSw24zQ6qVAgBGW5aK79Mg+Skj4XxdPl8axMl4x6nwmnAfEBIju1ssp4yr/gdi9kl+ScGW3r5NVqJ1fXRkW9O0A6JBottvWGypQioSH2C46bepNpt5dXRK28XY0hseEnW9fDBaUMHziavWy8Q7jttulrsjOd5WunqGz20rPiwX/3fdKuQgv0g4CDqGBMamo9htCyKqN0qTOxWP5MmZG0lur+eIMwtcrfYqJujT19J3dps8mrCySt1MRdmlNIykG8cIMszw/nMlRV1DmpxNn2zf3gflXm1sXSH00EqrICj29dnyNSbIteQOqjPLqBf2QDDVVCAgcCz7vER9m5X4XkTIeB4ppqaFa2UHE05QSkAhs7FkyPf40UFGlKG8GnrdKq0ZLUk9m5jleTBwhdDsYP8HCDKRE6LS48qLHD4pvSl3XFvmH8KBEmyeyNwwJzAJQd8MqhmKsdandB6Ec1bHOw8agmVGP/vvY2C60X8AnR2r2HhdkUbclW9+ozjmxmipA1AJIZnqxg4aa1Le0RHfU2vkpf68y/rFMYgCXue7eNqxoS0NkOw9a9/WcDFJOh0Grb8zYjPgaSDENIFMCM0H5OlIqq2r2FKGkaQSMzVm87r9L7fysa4xxVMD0h7CIExLBVbCe1/r/WavK3yPhHVe3XBjyVTDOqI4/90N/Cm5KnqxFrVYOHbwMIXa3GwNwVME+38OpXvNwD6l+jN8BDCRDEjGDFC+WObTdm+5/tfm0QeEfVUYFtA7gTobiCnl8rywroMyBHNClofz+W7OhssrGuos+fRhh8kBA+Ni0fYdhKK+qCZaY0LUDpn17UUKCX6dOZccCYzSsD2iSQP74pFnhlkOzACsapdT20zbjF6ZqLgELUPT8IglaX38zP6zfdyBF+NjNf247XNtmIz4QCO5iRy/GcS8jjaWMfTxI3EbUvzrprtgRQDOz/eMnyVQVbbFiTMZfhfQLeu+j6iY0Qs/QYGFdHefwzAYuVpPhVZK/tXsy6DAioLlmNDzAu1eQ5ihCnobO+MOZtSD0+uTpiOAvPwGWf52xDUHj4zbdFtZULPV4c1TmWflDGMkg/Ia6kPHprHErwFTGoBg+1D6oX8lSPdz5srAF0RbktUTmq44+USAYYowZQOVbM3BWMc603Oy9SQD3buNTgzJ7yaMBbo/pjkzVrpW5xYH0Ra11ykiz32vo4nBg9Zvm92KHWhJm7uQJV5DMPA1JHBWBMcjz/uZupwXqjoTffeHZ17N3waXUaR7cZDs94ewlhsbQrmI7/A4zJDUZj0qKiVQhn3f3AneEhDwl6GUdCBdKY14q9n6ay58twW2PRXXPJ6UE6TUs6oqH/0xgDpP3bx/mfcCUy5oo91agCPtpTfowGZ0tyw5mIOsUqvdURDhjuWLX/WIqaPlYx3zmJ3ahTcxtC5xQgKWrQskF57LaOvwYN0lzIwz/joNYkiZwLyB7Joi0CsWWRC6SapEN5TClIisNQtNPmfwKaKYb+Hguo76RtcQMXdRZWjEJNHq8KZKeg/uWWDOW6aygLP9JDrNNW7JfWDyHPR8GL+29zBAD5FY1WZXsmYfdKU1VTLLzAHERJJGTpwKZH5k0uZrDYM8zG9WX+RVDM8bsmN8cI2wKz0Td8GEq9T4DvY6FuhMsqPGHC1tkLdxuwBYP0Lu2RvjXaxodrZhKfkkIwGcfm+lFS4WMFPCz3FwWwuvNLNqv7c85xnk3aXWl49yCW0YTzTqwyKuKWSIFJum5G8BBjvxx2yDOZMh18M2WhRGX5VA0p3eAilBsGa54P+iEat2c0lLnTrXg7fzDLJrjO/213hRmT/92zHwHShntUiR+9KUWKWRcx9OrMWfefEo/p2FR7dbNWoP/P/se7JJUfBzJixcPvTzMvSTQrccDAmpwoLnh6pnsAF37U9Cakvwb0EZzywhYhfUyAZ4oAu4R1X55yrbJifKRbLIC6NaYqZxbpzV9ec4/SFSjJKEvmVGa9tHfUJayAvrPPbVHNaxlbdJOOn7f43GTTdGGufXu/daAhuYtol2y5rFVUxlDpyKCfYRz3fOyJZEjhxizetlF5kpK8kUuEpKNWnSG9VEdmcn7Tu0/U9Pho+IZiTincXepD9zQXGusmr6j19TKRCe4dmbGmRl1cDDNABYeOKT51fHc6+d1Q9T2n1UMmkd+aiSUgNIrogqtnInezaEs7HmtmpjKttWg7ulLhPvEEnGE5TqPY3iCItPzYojGET4V755b+cNmqdG6OBTlbYjDs4AAp+ho1Iq8R/eWa0/FOyB4K5JLQ/WqwpaNPuaoufHcJMEld4peiw/7uIRZ9U4otV2lACBY2PfSUUu7vJ/iZUtvPoJmd8K/BmbnNo2iumTtQxEeARnjsHdzf1JrE1L6NGFsI7t81c5GCgmWILKM5pWDA5HO53I6aju6916JkUl1YcYyk9Hwwf/waKzGbNaeXD2d1jBd+rriDyPgR5p32kxAb41vjMM5QjUrVztISMmbVDBnx2qArnLJ6ECRGZcfK4U6LCAMxRtE+Y32MobWIYqbeJLCsaF4pCXyZjPABVmN36NRAavX8RXO80JuF2m/Snmg2NL0dSW67EVH9I4fcFSjpL73r6ohLh/V+uK3786Tpz4u9p1byZEEFVjn4eK4wBNeQ7DGhdbFbRTt6/9b55EBMfJGakrqZ4U+Fgnh2uIpidUcG+iBjHE5HMRX2ZKkKLyYQElkw/Kbj2w8OvDaxd8rzWoSUnwkiP9DB4L1FBdrrf9anTqNfPehHTBlyG9cgcQLrR8tQEZN9zuxs8BV1Zf+cIk9kSStcCODphQCbZP7NYhgTuqPh967gyo6DhJVEeM/gq2arEo3NkVtX7D7mzM4zzsjwEazeZbygY6xwP5F5NLqPJ0Hxncni2XMn/GdHQmTbQF1zee4LOhZaDlBzMZLsKXcJ3sJsBmPODcSW/FKYiVgzz7wLdz0C3bFpTwedWpIZzG+H0kpS6hOFF5yNj/xUGHEQK75qxYUFuXq2vFITPVf7aaAWUF+eBV5VbBqFcUccHNaTmGaDdRTdXTurKJ8ATxX0DHWz2qNhGP4nrYJRCKI12hvvahdfR6RlR+zca42mjybVuHEEGrU2KvnHy9+mmlQDH4jYHZKC6knkne5Q28ldgrISAF0p2u8YVTy2bGLZqUkIV6zWDXi0DuZMiQhOJwUgZQNnrjzpboxif7CaCAFdxHukA5fPTubF6aLOTWCnS/EP8ZSOIyNGpkn86BVLEgxNoCo5XDdJHdnSB0Zy+5O4NQSsoKdZzikwg0eSvXAE6j6WW27irlXjNHHxiuOY/LaFsSgXv62JfK2/O09r1DMjpxv32Y457Wd8wFBf9V6i6CdLP2Z9qNFsxcP88S7N6b5FAkZAkO78T3f4mpUVnXed/QQC1AAudBr+gg118i202+jHf4m1tBvD2iwt/8PqoAWQSajReU2kDJ91lZ9cqfgKVbzge5mUlKDSh7aeClFOoVz9UEdTQyNyjj+u7JaX9DWyqtt6955fcvBJF1aKEjjPQjYV4+FQr9Fnd8NqWavBRL91OUcILzXVselzvLQtPmmvtdhkUNi8G+O+b/qcVyHvls9lJjRGbe0YWtuq9zXA02yIjtBjoQd1vY0EmEFvb3u3xiPt9Wix6NZ7ljWQVbw229SAPrh/hsIECHTLmxKxWD3/K6TUieQeqJIfpcIoOQcgmvHDyyRUevzKImeikRzg+ly1+qSicz7hh/DCm/39Fyk6M86XNkhcEgJKANNt1matUHBPuMmqkqR0Irsee0uIofjg8efSzC4Ml6OzAV1PuydANODV+SaVqKrg8qTvT2ROpiQHqoOAq3EdFRo1QW+1ak/AYmGEVA4cF99A82GRm5mLHhLHqOSqBVNF5d+tjFko2morW+bAtWqE3Mhi2uYPJEeL+puWOoJaLV9uHtQIj2GvjqEnPiF3gSNk2kq1rb+v31DDwcalu1nsmfE1n7J39uQgliDyyoBoudkZrUtnIUrDsC6iGs/DA1YU+EpC8VYQ4iw91D0O8kJIRK0Zo3YzUzYnm6vxq+9EDAP5SWf+Eyupwlhcyq7rgfu0UcsS/cyy18bZBvpooyg1q0GNkTJ+MwtXBtDoaChHEqMdF/a7GjUgboSb8jHDJrfqRhQ/bbI62r8nHoOa6UgOaJLxxg1EhXpXmkd3Rch7uNxgpPzxP/mBdrGsygnoth1z7Q/YLYJb7LwpuGREdhP+ef4imi3CBmJrq9pWR8/s43S4uxqNYHUv9ha9RBACBhuz+S4xTQTZaCKSoDHnxC8CxGhiHczvJUTlt4rrWQpu9+AvsrR2wMvwqpTTd2ETTsO/P3JJiLBUvcs0TXCPCRY2h9Nx8ZqMz8XSEqa9ByDLoNM8PxxK/62v/Wkztb9dlxfHsl4u4UjIZo5lD7knNDevOZvFRYHhwFE22lXrX+Sffrt3y9R1DKaG/GlAPLQQX/Hetzpmce0TT69U3cFZSUWj1hcJa25OoCXx3O5jXSizjPu68eF6JRu4ly0GPmihJAcdY54LAu+PeTtHdGWaRfb6RVp9zxwP+2PoTSQm+qFhD5LkhsYuT1IwWLIAUjU9P0z7IOUj2QP4sYABt2vX5hJCVUnjOBPVGQTmwyR8LSRc2WvhlmD4DMitovW8AmruHvsuxxMnY/ybXB0f6jgvY+7tMu0sJN5r4DBEBXa37SH5PepbiAlY5L6+09qF9dbg57qZdXr+Lkj+9ODwIdoY9Ogs9QXAMPBK9sNLNDM1mFaODMVpqeBBx3+/X8BkyPofOmxl+kYJsG1PP50FDBXj0A4uVUwSXOnyDvjHd5pupMiy5DyOMVDjPDi22YVTeKKPxtGz5/wLm/x/DzHO4PBKlriUyR2fdazZ8MZwZO2yzm40RwLqezNhsNT7aqhOqWBMfTbYcyVtVzrROKLQ/cw8h9MBYgLQZ5m7RtajLhjAmwWRubbOysVY9+MbTxulvSqQymjxTj0/yGmowXOk8LorLHbyciHZbi5Wipq5e028xOnXPq0SO1Ei/BmXFCr+iw4toQwld1d5KXZJaq1eDPduqLEuVRpKA9CzB7KJsTTpdrYpMaOsIFM7Wgr9Oh/caoRAohQN6A6HSrmbUuxffYlS4ymc4W40QYfauuqpQ/JTXe2l3gW1vBU3Q0CQWi+YnGMAlM7QCe806vIrrgQmejgYb3z21bFn0KNZj8qMbtk0fubcrDYYwmBhjZezZtAK7N3MQKKCODWwtmN/WYEGctudKJzRB3xrBGIXPbh2oyOsQ4psvw2packPl36ulG2AlW5rvS3xsDrZG0jPgcLNOBZVquBKudvtx5EyYnivmLREWPn30cbkfL4RsfTwuJVSFZZJFh6UkofGq/bkz/WqbPwyDk8xppCVNz7JQstijvxEWrb40THMQJebLnzyY2q2jx2SLecaR7/0b676f5ddR3aDQqQxzS6YlPvFcYbw+8vic5SAk75H9CSsEorQCVlJSk7DU5HBRkzDnV2QtTJe9fsfqy1sQNBXqUXzv+3HDVDSjlHNPKEmNGm5+zlEP/Pa0mLR8hxOG5PeuHfsO4YAaC+btxGwKVWC9Se7tv8fBJBx1n+Kox6GyPB1SVukkNQkjh9dl8s6dR8uwRo6Ep3zrpyoDHwNvpGU0zV5/27gpveUjCyrt2ZF4TOPsS/WygLkfE2dbNXsNDXjU0kggbh+REnbrOGVNbeYAoc4ZX0aRdyTYOFzlRKaGo4MoHLkMH9FMwYlY+jItBYVbIzsByLIUmu7xM7N3q4VtOAzdBtYpwYx/5yTIIJ9yh2VZWg/uPZimDRgASUeaIeF/TU+n3NBLOkQvsf4CKuJi9s4FqpE2p0HLaw6yIcFU8mcl8Jx6XPWv+eL9Uv+Eyr1QVYQfaJcVwJ6kjFn9GSZ3uvbIxaZMwi7x+nNLp60sgdzogotqc5oVT+LDsygUDk+S361me7L2BWYFkcDER/Rx+J0tgDZ6wwKRu7kFtxCpqtt19WgsF6LzpqmDlLORvOsY68JnuZgBdo7ozFmFR6uGXxbySNeCvPKl92vkVsYEYjZ70nSsNQz9WiIy0pcd4Cjnd16gHVj3X+IIr+ZH/gTnYy0JQvVtpoQKA3yqTH8ZK5WAWFLSXjNeHCwtYmaan6uJoOWW3ktmR0n9j0uxSEniCHfobcaa4adhh6U65iKCHer9DsvpoFJxkj5jhGLhPSjJ+hLddzatV/1Ocn1CE5uZoZAMtgkhUYN5zk9+VUjJxOTjDsX8kQFan+fCSw0rK8IhXNp3dynfHXSYCNq076Pn60lpsgbLC41pl75UNjAtdkXJ0OFBP9SOFxYd/qxoACmCf2c4BNjgll3P8P77ikGQPLbKe6Bprf5RR7SLTcoLj+WEriYD+XvlnCQ6gwN09MIkc6PH+xS8JfJD7iyBoSsLx/L/1AzaxG7e0eIP2dxroERhpC6jg8arrg7XQBksDHIJZIPRhy16WjWaucMUOLtxrgBU9rezETjoCtMnBYdaOAagkVHdueRkp+p0+SRoZ4ejQaCwhOiYRYYJC7NsV73oO8dwYLioC3qILoo9B/eMud5uERJdTB+L3gaZcXObntZ43fegezhpmSwHyw4dM10xfsXF1MY5XAR1XmGR9Qz8Yrc2BSBiUUf1wSye1tGQLKtmsheBI0zWEKzJu8/tdWQ84lcWgnXo9INPwDU5XiJi0OyBQbwRH1ahR14L10g9kAYWlDK/0N3VzcgYYursjTtw/2wSHmfTGJsx5NOXmMmVliBLLHGu6G0jFBLZtUkH7EzFzorhlKhKRrLqXXlXpO8crQ3CHEcZLu9XzwCc9SvkPe94gxwonijdizLHtGfLLKLF1cdtXMFa7Mf4P/JQHiBZIRXBzCKoqPaIuvh7X4/SQdEJnxbsIECUF90ZnrLUpBjTXiX4XAc3Mse7eTXKyZp8Q3Sf1S3esZyDQl+BBER4PmbGOeQ+K1112FbEeyqQZg56WiQ0jRCUmP+Kew9A1ZxSjutLVOfkpuBwoSkP4RGNoe7WrmyTXKI6nk1Tnz0oe2Vm3PjBDf8Gwhe+fwAYSAjlPra1TtCj1uu1GcdIAm6ViQn9Srqf1ym9fPIxInLxt48mCIl6DSTi4ZJ+XkJrz2dXWQqhpSF4nNWapdIjJH+p1Opedufkw0xHlr4vORb9BCJ3W8vAPdZSqI7VxbNaaOfqhI/8w7L9horVKv7MLnEr2l2XgUM6+i5Ix58xgRlYVxa+ltEdaupD5yktPEOlldMIatEHTM9j7h7hxVvQPEbtQP6BmDdVaPz2u/o7+Aiy4lsXGE+Km2ss6828uqY4y28croxcwQBaemP2+4hEA88WmmXnQTmIMFje/i5qVzP/dynhApy5GEB55hU7+jPdveexxyrULupZB1hjyqISvKscuKXOXZUnp8dPLlTkOIlOhMu9t4Vx5PLPIDK0SdUiZ95AlS0+/1macnq6hXYYejgXigt9NePxN2PY9CC0HftH0q8httvBeLZ48ootbmSIZgK7/Wm1zqq/lUDZBL6CYC5KDyLg/WfRKIQMNyN2X432uLr/f/9AoV132hvDNWvIbdgJKmzFwnqjd8+MjwrCINW480Y/0ve7EpvtXHg4WzJv5MuILg89gjdMk86QRO9Q/YKdmb+HV6eMqRTq/oudO/E6zvH3NzGgHNz/zI4Clc1kXUMDTrnDpBI2KbWe//7iI6d1A8nhX4F+4tGki7hfsA4VOK83fdLmcdAGqQRjtItVXa3J7vhE+x0h3K+fVJpM2FZDdY7gVF9ME1rtQmyQOE+F7b6vQAUregqMnIegpxtIKRhyTvfx+DFWZLf+VUZHUO+CicH8sE+9LpldACFUpG+WMfE56X+8xIB5l+Eu4ij2kBUNYythq4o1kyIEuD1kt9XQ97gS9+waaIHokWae6jm/Y8Govgmk31Z2M0SBZAIeudbA/y6RkBys3zsWVHoPxD73jIs92cougppJ3Uxf/pQcoOw/qt20epdVJgHhT5/Rg5mNf+bvQ4LJnwSxs7VE9Qc/myZF4IFBUAom49bMTIghVW6RJ2gfXkP6ovc0THTEpxZWx4zTkARVTfH75vftaIkZptS+h3ERciwL+zFBfxojqrdRqqdkYWAVmXpf+ueckOfXPrN5b9eEwl8OJWgoXwyPM73RDn5ix09+qYTUbhIRquBAIHnO03H3q5TFdSXzP+sPDF+FV61ALiJwLttts7/NF2qhFJI57p4sixeZfoEtm0Dg5wGwPCH6tc6aqO8oe5R+IkDR8TuyFEN2w2kBdTxxvejaSoap3bQlCW4svakUIjVrpe7zCbbcGL0xSe/T3hysCfb20Xj0oFitmmY1Q+1QAbHJj3MfeeZfxuvYYoF7mLnb9sF2SPQEFrRwt08qapY0ODw4ReEM3TamVg4j3BvgKWWLIeWrMXPSM+I3hBzjUn6TbqMNWIPDWj5FBYrWBwXYB71BOpmX+5iYomjHoQ7LUcQ867QRS3qZXYnBbLy/FO2tEGfzE/rGyNxED2nvMySIIs4Fx3fZIsIZn/tCkocG9krZ5TWha4eDI3zmyCQeBMYsXlRDNsMfjEEBFh6/Qhq12c9IUp606kEY5bwbG/QnU+IAyJhlftn2f8iRL5A7v4R9oAJGU2GYjNHqZUGg2z6az4YMtQyXcV9X9WBRlaYnfVIRsmuVGDhDBIoG6C8AkCK6LdXd0NgeShgVCNpx7iacd6L5r4rVi1Gco6rCBwBfwyIJs4Fhnq8IZrURn9zhkJ2FenUPijnbIom4cDNJT3zqMfvySGt4ko2KqwoGDH25QLfuWMbcuRhuQwYKgCX9VgClxETR6DM5DNjTv7F3ysG0kI8NKZ5AZDzjJnJD4VVPwVR/fNKHpzgM8QQGSapVEbQCuiSw0xjHphp0eDxZeames1Mp9WwQ2puhmhj5ql1Lv0eYJEpN8RFa01yfNY0KZkTpYzcO/Ckhbb36k9esVXSMPl1G/K7/sR9Mcqvz7tEmdFwGaO02c6azfLxlRg6byx5y5aqHXBgH+N8X+0pGSjHsaENs0tEcJU4XtLrRLBJGIFVEe3TvIYkvc3siaU1d3xi9t7TPq1L/+hMRqojqmp8jBLyo7KEuYZeOKHFM3mUkV+XkyhiFhmwxtLgSsGMbh8fE6hCR2rTOIinlmsF74yj7IpViQkLbyCbrvDt5/yX6I7Y1abrFs7QBI3D9QnlxlwbgZHvFTKeaFKcI3NvUQFQURMimQ5M+eF6vwSlYff+7/cWpYmvPrIh9BVONzVYOe2tQdAWWT5fJSYL5Upt0L6Dl/pZObBEdo+FPC4b2+iU09eJ6vb/kc2/uq9CvCUV9KB+C/CPAJdOu7vq8wf/Yxy8081PEnm7VGsIzzoFYnDvfYTUyPhdXV2yICWljxWqkyEe4e1n+SZCRACDyiLTdzj5Dq5ThMdA+CNJhV09iM2iW1Pgf2XiLDkIpNo8ugDtNdVTMEBsO+uHzrqEI+EwMOFr2gevD8TkmyjvrYH9Bw6rkARUFwc7DRpOCIaACn2Edjv7bmiS3MFeVgdj1y0Rv+v1DYqY6EwHst3CNlpq6XBW7Q/fu+F1R20aHUR5Z1LIZ7wvY0E/w99bKzAyUjG7671ZUYF6F5+Ynv4Cm0twLZ+GTrBp8VL/LMeq8XYgzYldrklMglyWJS7iWBhdA5GraO3m3rO2AorN4N62bHcpIhG8kbvIkybnRVTEWt5a5f7iIYJN61OO1gLp+lMKa9CuaUR/y9eoF3/jHgqh6iPSadglFYQ/GTsLkzIXMTFtBelXwJHtvmQtoXItuOsLGvL2IK/M295YD8SaNfSND8zTfgUXGYQRyrzsPYC1cxWOto+YkW9R3EinZBFUy/5HWXF6WeqLcPADGeJH3U642mjV9hMqA/GY+7DcN2bpls25VizlGv+FyH0qhDmmd0gUS8y90rDX+Xk6y6McJ6S7gM/DYcoTHv/2NeKg4rjMw8TqrlL9LBcLKWQxtuJxVX7ObKDCs6fNlfUj6iRrGPFdJD+ziFknCJKgixZ5RJQEQZi2MefRmUYi5crYu3Oh50a5Jf+upvNzFAo7KhxO8WRvoqnLO0wvvdcPsaVUOIcvfZoUierdTyFyoxwnJI91KCBroEodybtBGshuLseewOL8RJP+H2Oqsca/SYdeeRtivXY+FFQeTQ33eeX3DdtS0+wgHXVCCQk/CkG/az4aY+ExO9eyJRmpeKAXose57USPZEoRKo6m3uIY0rsGhjw0xAS7X1DuBTFVuo29v3dChgu70cPjpl5/xQmrPdA36PXNZRWOszr9FtTYYxG7dHUooremnYo1QnUGWsN/xygLq9TDGLLhVH/pc4pD+15uGiALFzU4PINmfD25G8LAsJea1dQlpC1s7rkYJUQqIwFNDY4Eh0dawLn8fCol/rhUCEbEHM1dJlCBpXxKfm7zt/ZpsbXgy68nEkEoLjs9rk0E9GFFZoYLZv/4qZR7nl7qBbeALu0FWvdWoNb4hCvlkME+i5nbMafn9uVxxXlpXBlOxHA7IKvKJLMXQanWkuK9A+2VI1JSDoY06+R0/g5TPJIHfO3roljfhM9ncx6Qrk66xY1H0+2UgF+oQgm28A27u9+T4rGo0sT6suA8Jdwthg1T9gojZro33dFb5pubkZ5ZHchLzsKkibaR3DHxf769V4iImNuKKrpgMMK8vcvF4YgFx9Asca63MVyNPtp5+zXPASns3bwdmsxnn1S54GTdkB4DwX4L7JXMnQGqIaS+mPgWxbIZbFcDNIrMilEIEGFczfvcACtmReTyzqnpITyfsh5QK4RKX9ZWtvUy4bWXjsLYbNV7MrrZsT82c9cmf4f8I0sSYqVIlcUYgI782imxBuEKs3OWcogWDmwlr9TGLtVSSTlyzHUW4PU9f7Wv06gLioBSoAf5esTj3FD9kKtTKQZfTKEIOcCYWcfIk4IkcfoFGKSLqsHhBpBOTfEJ6dxkBJXCSlknDrb8XJYO4/96XFd4ThAg4/Heg3u5p1kP3QG2yMuUrty2cFQaT3cWMABIB2diEu/1KfFFSKbfjTp8aUhb99C/ZA5m7h8JWsGwT5Ml9Uhw6CmNHyRA15TyVwIsOH0I1tFeVqQaoqT7wGjyqrJ9bI+WtpjMv5CAGQfj+k2aPOJZ/zLvxAtkd/Bzh9BZPEwVE0I0DI82uWK72P5+mHKig5zbXYrQE5bSNA9/gHvSND2qLV3hLPnoJp5q/NeZX7mhb2aWf7qkF8iM4HEHQ6YiYA+E+kPmfMGabHq62QBi8sSJ3yb68iTcA4YT6f+gJb6G3adGkY9eeu7XQZiQEi2fXRSKUOj/zLkyh4R3hOAX6xhT1yCvCHT2Jb9tAzSMxe0RFbM3g6b/VHgP8nyZkt45j1ZYBTwOpQIaFU7nU5focNbiclNOds9b6I+FOnBXwyAf1ViJPMKBBofmR8wg+77g5o3CiYUzQ+KdNxUo14XQc58/GKrIq3XSIefM9azql5sX7KlTsU8DGT1HlHIYnd10cJYsAEHoN0mLKcHTySHsjTFesKWsmK+siZFXhlavE6F44mweXOrX6FBoELRrvIrsst4OH+O47VaML4CK/cNrjlTodfRr3u2XZsHCcw9kXLGX/15sm10DYmP3G3387x7LDyVoplrs0pzIvfcy41eb2Ob/wM6tQNLxQKnfSbL0eyYL+RWR09qeHT/lWpCFvcISYlmdF/jMaIWDyxE/LA1tguYOSiQtSqHfgqHr1n/k5nFhnUBnU1J1eys/8qySmWwIplgfD3uNcFHlg6trf2B11Om/f7E9onO53sWHhas4nNuhBJsUn2OjOnOAFZi2dcAvexHytVxIdybjHcEdXUcp0jkab19hwZ0RddTUGjtyulBmpbfGD+4d+oynTEjmMlYS/pfoCyhEk9XbgbBf7wtFs5qleFrCmB0NrUYZLxmw+2wFqYEUy2hYP3ZxY8uhRZeFXZfhOD58zGBx7lo4yMjiBc0zvOGqVQm8d4tk1CRpyGJOGJWVU4EpHPxqgMP6hV7f0IxJugziIEJHavrZauRXe0/THYEOKpl/a4jm/fah+oAzHRBqwetjJBSjNp5LaZ3ZUNQElZJBDOF1e4muumSHF6da394Cvppq45QN1B2wYBfbx4Y9fnq5b+heTNTCmP9XhMQGniDhmdhGzfPUY5YPvTUhEcaaA2ucNDUO/xvaUVhXDIodrM/05R31bnFkjUjn34N7Aiuagl9VB9SjYsu83Ws9eoevaZVwZMC4uiZko2GtNzZCyMHRq6GKhvEGBiM1gLyvMZk3eR2dGcn19YX72JnDBY6RWncG7lGAg0YZR9lyoCyQ13gtnyBi05gPlO9yOeIYGqQrhgRpR+pAvx4czdaBMpVI7SgZMAhMSsdPUEQ9stTtwSabBmrln0uHsOMhDvi0bNRUWUmqnu3eiLgzk2XKGyTaHCe59vZZcmDkk8aOO6pTw5H+DWALBPMcCOmfIz4cF9E5zesXbQkQNDFk7vlnAcetbpid+Ce9MnTb3Clhv0lL7lyusJYCpLpalVXmQ67YNR+IIDh9vW7XeWnU3FFfdnO0yqCON1josSLVMTTaH/T3Q7Y+gOUofDwwXaGyGRB+4GRC2kk7zANlgd7PmE5kXda4IpmTbP2OqUJ/O9EXW4aslQR5PtYy3tNMamtk4Lwzb6WIFll7MVBneG5vPfEGslblvK4unzLLIvceI6WxhiZNc/nr10k9nn8ikKPz5jmA9oC+lWIE8QR4XYTcO6WZ7VMORykmWLBbTE1NQc8/TBpYSaYjlsyOK50EEwZC6/hyMiltFDU/OcVfSs/4s0Rk68qJkU5mIFxzQcySQSzLKmqQzkbb2ZlC8MLMP8Tt/ui2UK3r3IoyOWjDNfAV+2/iYAbaU/gcEuC9PqZbBCpHpobrsMSJpIpAbdk+lZArMaQfdQP2kY9Krk6TsjNb/ad7Ghc/HTlJyxRISEoijGyuLhUJB5Ch35PrR1oibmRE3vvhC5cWj/AFFMlliT5ELHoj9ieMLEG0BOkVRUXKuv2bfaF8AdXORnzTtMfXYqB8UVY5TvybX4Mkg9YXaiDDrp7KV8wVHpmx3MIlmRkznG4Q7DbYNTZBEi2yxQfQW37NrAOyCP8AXP/EHi/BLLFg/ip1tleZLojlnpdzKgSmJyi4IRDWNifCtFxTRjzh2z9DNa3KUZLZnixrksQWHwp2gRkmuu7HYPHYIQrdjih0WnNb7CL7hFDLjbfGaVLQh5Fu7SHtZTqDYzgY4QnM/x2PC8v6+qmCAMbOvWxZOIxjgpUF1ud2/e41K1bJAXPTZ0ctJLsigJDqNH6fNsXGGXNx7cwJPgP6INK3Qxc3ylfv0L1e9m37k+CqkJJTN6MvvQuae8WjO1l0JvBh6yHIrZgf/Bt/DNS1QULgHfUCLdwH6GVXxn8JChzrTEJL4dTZGD6nCwPWD+eeU/jxNc/wph/HYngIZcSTOnA7ZoHemc7pUYXx0Nr45Sbce9CyAvFnCzoIYbXxoDXYVwt/7sf509VEfvoLzjbFrRKr4vntb5dgeDiwRX6neO0yQZsOSoVjVvOOSAuP4PT+ezKgOTL5CMeBFh5fTyCTneXHNexLrs1pBpLHH3kmt/Gi6938ByjJyGR1wM7/rvRQQoS1drQjQ0vefqIJKlavxUAyi0PuILAyGGfaeCzz00DKjY1cowpRuwwf7rYPEZOByjttnqj6EUZ84F5gZp+4HJmTpMjNq0q/lyKFhwHKG0wkVp5h+gESx82VKGR+mbao8YOh23JnEy+eNJ45yos7d1gFc6GC67dt+OzE5TpAYicEpe2YtuuIHNt0hQpdLBdS8eqx9D9RSrya3h16jYIp9Ogfv58USTrQa6bOJgC6Fuw3VSohoUOQpQ/XY+PVKw2eV8Q1N6yxzymT6QIiLizm3kcA+jtFVJVj/IlTTGr7Tj6P8fQmh0ag3AJfRbLs8nmEQ1QHGUtaUv9djTgKNG5hVLyiujHLL77tNlHcYLwqquU6Z2V+WMoDwfBiMDqK39/tNhs7dXQhQTHYkold5VgNmV+WJr8ETyoKTHTS8g1RZL+KCbZw1LZoGTgR6eNleq+XGRggG9pbw1+WcW0jzJpvQle+pDWTA3yPaJogeuohg7EijR/48Se6kjwNpGStelAHWNOtzrfgmNxtH9r1eSRWLz79nRNF5th43Vy+rZ9FcwK7PlfJojQmk6yDIgDVpS2IJtFflHkl2pdrA/ZK4Grks9dfURGUNk54HimplKaYEZX5dE2M9W/60vxTLBE6XeIZ01h4YiHBHGMX+eAHZAHpSk2dFZUbQL/ylbq8VdzyOCnwzB532xAsz2XqmJFNJCZ6YuvEpyZtLa07GuhPki8MeZUI63KN4jC30SSX7/bWpsMyfpqrzmMI+cCYlmRUB0Mu4kG/untuIlFzWG2JnuSThOvNB87WuxDF4K9MPLtApA2nPV+2yMqZtQu/5eBgMzg8/6FBhddJz3kV0onK4Jbo71w6dhI4czF3ksh7/wVe0vAH8B/pVGb1v7xscPIhg6KL+hvTtq6g1+kCPpBURUhkj6yrfPgZ3/Xtc22MaQJp0ouI8smF0IW7P8ZfkCNRlxyoz5rOlXJ2YoBYf+hZJACLpIW6Ecg7s2fptIWtvuAgGvGV7dSNLkYv17ghjkJQx6tLucnApd6V56PAKNj/7Yyi6MOC9uwvXC4HnQSolMT49c6/5ZRIfWauOyw+arQBxET3gqjgZPldHDuhPDdYxffuJ1ityuwa75OUwVzCfQ3DhhKAfuieBFYqqN1i5usxjNFwKad4V39gjt2wLjcS1yX59qz0LCyVW9KbSYU9A28hy5DC7hdtdQxRU9PX4vfg8R4KZzpT7OhJe4Rwnuob88KsYJT3Xdb5uQj/iI2b9k+IAL2RazReg2nxwi3ia771jH8mWcStAs1NJu+cMgx6oarFqLe8b1HSRxQ7za0WtQhVKdhOSo+l5MyUbO7l4rtMf8vOidRDYSBoESyiDirZR/lirb7mNwOHR9B00U3KDHjR+/6/p0FjHCVpWNOzJcWfIRQkZ6XmbdXoGNbYi+/6K31kVQSpEiFHlf0XTAzQKDh03BJv6aoldSXInQfAEINY34mN7TGvaILI1iq1F8qQD9LdUyM1y1GkmIcoViAyaqPmTF6srtanuyTM4L1D0wyuj0tEVAfuycGdwEON4fnsCqlt5T6S1obgnUutprS4s5WpzQgzd4U9TRXJErli2+o2bS7A/uISBZhgh/679K/zLda6gWtuZwAvTGNdCbAN9uwZti3Hk9kKWrIq/zDHz00+fSYLcc5sgjgY5sWd/F9nGirgGojICMTxUzGmVVyjsC+0iZ7i++UKuLA2KCekIgylXj+DAZVKUFgBgXYW5+1bwyASMUltB5MhCcaMuivyyhZw3MJ7OjjmJyH+sH7zwWOwFaztw+KQpl6ETunGZ4wgXDkkep9RDpXHKdERy5R1KfOfi61l4kXklOVi+UvIPbGuKxTqSuKxjgg5aUU0X3V/EKdOugbYyeYKlYTyfe6Py6u2Z+A0k4k2giHiUVqkoC8MKxTXxmChSs68WryAMhUxyo84ORdwTONcLdmrVJbnyH+ugmyyx9iKEPADsMijuo2U3uJDa7Wnfr9gcycQq006VxIwrhk0FV/BDjqzquNOsEJXdrimGw0G+JVU4/5BNk+lE5kSCYz9cOOfNBtbtPUoVHnu1jfPwwGlaTc7GUxPcDFnEgwaHh5znVnSwPAAdXz5o6vI34Epz0NKfx11wmUjfW8nTAn60/CwPV4XjHM2yzXbq/EA9hUimpPyH+gMWQc8fiEpaTtk7l1iADxvDO8EMdlaQ0nXdXnhCuCrsoC+Uvlb9IaXpTbhDyzTzYYUPRsJ1khYU6+UMPk1YHn7mE5V3/F28Yia/wrwDdF+R6TmVzsqudzix7NyUGk46wXs0WaHIURcZDicGiV7SEhoVNTU0zgBoaSd49LNnCcmSgWRMUa0JKdpcVnfovdDcIyEcqOXD4VeP1baW1O5XKi8DuZzNuEL/drafxlkHz2RIla0Jp8ILNn7S3fdeg9UhAx9q0+SKtkZq2KsJrdjjyAjr3GfTjVIDAz98414NxYOtS7EWs2ZaFK7+4WBYoC5Hkeq4b/TVXen2W5sxGUXGVbea0PfIOieEzqtacY9iZH8JBwrLvaO9mQx8S8Xs1qoQA5mRuhLUFIcDGMj1wJK/K+vclB5Bl071Plrpq5+L4WJ77f/haemR3QBDVN+DYo/NMMFkqokI7b1nRwuzDmI5dEx4XMlGANd6UtZZVQ12+CHjwiLfAM9yPWaei6wRjGbxBRZUWxyt/lA3BanlqVbrdSdMBG5p3j4Pa9sSfYjUr77zB9h2qpnC6V8u1+XFmGBTP3y97KCCHykGfB6mbCNng2OYcDfFxSp12MaqtqOwry+xB9gUkHlnfW9DENAGqcYOxFOWwZHAJEeIuPuyLr3pc8euQGkJA6K1rmHJDoeAl370hmHY+Wk02WBNr6bOj8owlbEPXZobBQ/xU4JVN9l2GH0nnIedokXyCvBiq+jOf90wECFhhyXgaKiOos+J5t5i72+cySCooSeyr88ULT2mwUuMCLDw9Pty72PByiEtatpiqNeZF8Kladg4jD+8iY+w8ru/PveAVmrABMft/YevFyzmyB1LNidUz8yrnolKmitwK2bPJrQzSfyMg7RCZtnj801QmxB2Hh1RdODJ04NYCR84mkyeVmLrySQsPfWBiZawIPusj3W803YTrCIFZh55a7RhYSAh5uolGsv0TMC+pfZ8CJFMfhrjIkPX4iPlpoVij0m+1EDPaObMhssohxiQLjAb8un88eH/6Z8SnJxoDDY9JjIkM28xe9G9BMqE8CdRizNqXF+yzFoq+i0JXmGCunk6mGwVz7dw0Aht2yZLXL1jgrrUpP84ikBVljLiJmABWcOUt5aq4e2FLPP4IYwNw6/6kBGhUw92jqGvzzSz2IXFoSGkFThCZ6Hdi95k3hbTR+UyOtNXxKf3qOHtoG1+tO5u2H6XvCe4OZ0IsSdV2C22f4X0XRjnoLI9dkAJcmaPzyLbgrWgj/dizWHsrNz5PzGCCZ7zywhZMyk6RrEJ5ucZ5k4Fosm8+U94ZyJFHYaHthMhJSLgoHd9plpggxNFeaBMx2BdSg8d0qM1P9s3xHTr7n+uvFsfU5qJafAkyfAi/gC+OLxCw0uMl/XJ+id3bpdG4VxQwyKvZaxCWrPaRHIy9KcdR43jv9jfykGUTzB9KjyF1G0SkyMHMeY5wgAmcEp9B8ffD92GR4FQExXAD/Rm70xyf9mrg0HowJ+Y5o1trz3gJx6Em+pGPt0PvCVSXsmyA7BLMqIiL8iKyvmFzR0O7FJPoUD5dZJ1eKn4tDUJJ4Umb72XTHqR1qs8KsHPpu1Bas2jM6FoTMyoX5aScTz2RVJH0xso6SkxxuMBg3uUblz4fj83SnK1GADX8ZJtrY6l5lrbF1/ZuSi1BShVAdFnfBB3Sh1SW4KQz2mL+Y4svWwspzeGp4W6pTFKdMDjOxHzkJHkAfLjLjqf+T1Axa9og+Cl7gRTi70bSWjsQM9F19HqH1IdJOoerLMQTLpuVpFU//G6/hsxG6sFsnzMJ7n73SbIizBrcriqJQot6sKe+uP1gONUVuBIPlDJA49atkvafSdkS4NR+zciAFrwoHjdIsVSJKqDxAVrM15uFJb4cUI1Z5j3Wgo4gLqLZDMdNtYKJ1P7oBTGSBKZGTqguAYXj9FtcQ4sSbuwAvEKj0iSHfGzNYpAzMhIVEl+O5tVLe4s/3uEd9Gsrl6bogS5HKQwX3XK8Vnj7lf+5qIQiTSzRnfkEpdxxgU0LAZG7OSxjiHkVD2gFaZ1GjKhIedce7dFUwac8qA8Ut250wwH7O4rKHFECWEhhPfyyNNFFWeFrcIjCB9QkpXuz0U80DXFirexggv6bCvxlzrpYL2A02HykHogeIIum14ATyzZnKSfKNZqYUHkFr6qN2/mPO1WK01C9CpwXcl3fLEficn+qMiFNH5a/JFJBAF2ZZWJ5EP8mGzPCF9CDlr0z0YHruP+6bAUG47CNw5yDdR0WDTjq/DqDE8W+/fc6iTB4r9945YbHjR76ZqoOFAkp3KnRniRLdWK5iKvLCCH/Jf9vzHnX4LfdHlAiEucOADd6aaTJnMDTB0DnLoW9pvA/TvJPoH2GYOwUyBgDkGv7VLqRPzjz9nIWylnnWqIlm7L9YRAuucHIleKaTQCeUrXP0Wnyp2nmBxzeDiVOPsap6l6MYLHO4xg8HBAK3J1dgvBpIjcYDKZexJV5mf8c0hpw5ODKTwdkKCeeTezcPXh/9nI/FlRcIYy8sH3nKCQ0EEucVi+uinLNXGTmZXSuB5jYC2k1R6X8FYDLSs7G3qg+Wa30/SZZVsN+vbIWPDRqs9HMz/V2eXRrxClGwzMRZTnpwuqrD1GTjLUluOf9uPygJGxe+/EB6Ak5UCCsCWe2GLD5iZX8ywqGyaP9CGKOOsQ504tSVjAMPPpKo7Ex8LT3xYdh4QReijfasLvMKd8/bu689y+WY+S8IO9LXV7KYzmOOycnb7imsjeiBPCZgNd2Hd2fLIQOaLorPkKjFZcGRaNO6lp+pBPTMvw9QIbYuQZBlhu48VmV3i/3Y0m71BChUWR3cdNSS4D96YC5J0Y7ZFqMHBW6G9p9pf1EMvsoq2dzX2wSvNYXqdP47zyePLrk+nreb97cBNao7U34lHDXeFQ+HqT8XvcE26g42SyQZmHFRlH2UZ0kohpcgm7Li2wAo0IHMre/0XfRV0HtarB6og11KC3Z7/RUcqKzEPA7ZEJQgZNgBZE02MFT702HN67p516Nvqkm0Gjx83wQdQMeqxlml8LDK0V5SdTdnatEK7C+bhiQ3CLRBupVuTeGYhJY/BbrqiE1SY1vdXZ2SFuvNbcrI6ErGJV8/qH1acDEtu58Cm9IYXlR4R//8FS+sjKjiIPcuzVQ+9bV25MODrRYTzxFJYbLhp2Um/HKOncgLdKHj7tOrMZfxR6CrV1qRAGh+vD5dMMDkqvh3RtFI8M/B+95gOm4879zLjARkfVycAOqjJdoBfgWjWNsJnafTkmc7B3nIQv/Doeol9zaGW/DlpeEHHLSCVAFpPcoRFbXqIB0NIfCnsKcK8GmaNVe1S1WmDjR9kV2WjYdDpu3d+gX3edjZ363f9jQEbUhFXtuRXOQv+gmYCubqBrqUoagUdP7xj0HIFEZg93/KZ2CrZfN9t0A6WcpUJBI5WLyoLnqf11jJxzi7XP7icTGifXh8HPdPwOvmb7A1BFcfY2H1yrgpQ9LL1WPc8f4dqfuE91BNq8DtcEql3/06rGk4gsNyWI77GnH9IKwUsAFlrpUmA3zzUPojorig8/2Cbd3TjsCKM9wxliCLyKPngKsM1KFkqM6bMFtyxYYrU2eewcxYM6RkLIzuCbt2tjjkrWkSVoIS5lGaeH9ACsgsCD8uBJTg2FG+jOXwTTSCvGIWOiSPmrIKKcqEISVvUcMWhHEeUKjXTMdtBmPl8s4WipwTYa2j7rmaa0RNf7IXAOT77NGep/q0h0KdWRo5UPERTufgAqHgtum1dZEPq6OH8ILA+nokd8MXPhCko+zgkNqNlrLQew5ugiVBI+TSaF0+Nh/0lIpsCoBQWlDacVD+Vx3x3aSXTbkp6URafBo7r4W0YMJYL0MnwFM5mzSBvH459mHAZ0yzT09dEXgjVW9/ggg2LxRO6yGo5FTpGQS5EwMSjG3crtd3U4X4CO+KX5W46TC5B/X/DpEipFhWLaE6rpYO0r44KwsS9Ge9H2dfFY3QNvXA1sWHN6WR25HgQ091u/FmxcmTXpvXerH0b5xRi1MwmGmrK4ZAT1TapoD8+smzXuW4xfFWkVDOL7zk9xNtB53A3+dJrIzc5OTB601UXSFtQkX3hWaSnhB0fIWaxp9w7vGQDYtDAeTTDigrLMhVNfLUpJcIxhrMjO0Amicb+Ubauev6gApJbByzVQRTWq047GGRSYgxukHnlk5+xWTYTi31cQQCJ9ILZRJ3tV05M1AIgNeeDW2H8IBJqkzSl9nnKSajGYOD7eMyjHHWbG4SEV8CvAH8Iew6SodPSlX4spOyb4O8XdYQ2bne98jMMolgBIbc8j1VfPhmdPcqVcmf5qMjZcC2VzGSMF9s4863hYPVGq86Huy5cmg6zBz+qDU3yje9vmEr3yJ6kZhF5z8UdlkJdjq/581O9VuCR2B3lyEAfQoUZot9HdVILawreyRxAy11JlpE3UoO/fi5/5omkUs0A7Gvb5+bsteFVIW+9l+qR2dINow47smAidv0bLLEr/yqKcUanjvixyzAQCM5CVzq0r7rDR9M7wjLxBq9eBWRVmyK9TfSJqXHjL8T3l8phqzWGZrkRC5oiPO6C5Wf59fFDP+ituUaiEqytebX0Feyu7U5Leql5gBMTdDPsmK7KUOyA5TuWxjGc7dN7kJKEYpro0VWRhjMArMIGbutu6vN2OSHb6nvd508S4Q34uCRKu96bSAD7YHASNVhzXv8N8jroYf5Y7E9s4wTpkvo3BZkkWqpF0M1vka3jjUC/JuZvw9V8avX+D9bciICl12vr/bQJxDe+TN9MQwDJwOe5HRWZKtCtH/1/2brHVDE381FF3JIILjZf20UTFL4MLwmZtFv3M88Bv1x6hEyoaAlZ5p5QEWzlw8bJBt8orARhiododtduYtJBSF7octT9JzbeKdozaif0LBWL/u9RjbeVNLZ8UV44Ye6Sz56Vn8QlwftWL01WoPryii3ZZ930Zx6Ins/HGvGQmHAD+2qvuKQAs8Y6ublb+Dvhp3Y2NNMjsuzOvb6m4YtkPzbhlctKadex8tBQuo0zhmSxfDIZm5VnEDdG2vZ6kcykYFxgAz3wrkVyXQnwxyQIeYMIHQYT+257jBWD0yJIiC3PqmohMzTC/65XVgSsowG2kgnlR7pYY18nBQ8aVfJ64D79rH2pymM4xMU1Zk/OS14XiDcldhO0c0RhQxiPSY72XYxpiaKVYmzOcEvI1PzQa7+LVZ6pBIwn8ffWvhqa38b3IskTs4RBkYs9i+i9/AqdAQg2IOeWv2fuo5tEcFyefI9nATJXQchbBEQO2Cj3kaBe2X+81o97B22kYSwjOkgZybf53qZFQ6p/N0dL/VnuL1cYTGi8k6rMpkKGx4j+Mc/fcHUVNXTKhyO10FkvHiN+qSbJGepJ/aLXoLZ8RET0Bshv/4hAQgzeS7yl0n74cedqdnmAeHmQ2CyXvMM0MWpEvA2ezZIKU+WvUSaGpTt1kvMloerqnqxHLfT01Yh2n3iD29EWnrQsyjedi1I5SUgvQKBM9G+oAai15cO1con2QFz3UK7w7ZgzM+vPmbk2QqR87fzlbdTSAhrLXzqVfLnWBA/4+5aC+0BRMZ6iX9lH3QXtKU9D01K3HprdilL456y5lsl38VQaMbz9hk0LgquziMY01Znz2WE4ClHG9cF/e7stVmn89oNFUE9NZ1RAc97KzDEWHLoKwlCG6L20/2Gj7/M6PDhsvhY+FMzYRg+v/0jo2gPT0UTCfaLBDRVvKQgUSYPMG1dr6ox7ohepBUS0msHq/V7A6Y9WfKDgSLatqTzwhOXnuXAoFc1LsdlV/Nv7XHqg5TAohZGa1mOn44SyY1fyPMCxL1QmxvhBC7mxDyj9DUnBpbjdAzrBW0mUzZ51brDVW3f0A8oKL6FYBf0mwK6YxDMJogq94OPgpZyKHKBYvJXMfs6u0pYnEn/jPeTVQMK6uY9Egww5setjqwdQmwi1ea0/uoNw7QKPorCWZohFt4VB+HUy/ObjCDdxryIg/y0wXGMwFyftSyf0v/ESOVaUNOHg1aA0SQ0KOwx/oqBneMvSoxZc7SqvQaHcx3ZLg7I0FQgQ9799KuVGTfGNgWvzIMnHqMNnCyCLJMNoNQK9XA4Wkq+6tVuCUREehKj+szE6KlaSwgAPfb6JeGqIyBrjJK/wNw2yPaYB9wHia3A56M5r4OplAvdVjO1vrsc4I8LAy1zqqpo0yM1hfixHeLNDG6ufXaX/4mWxYpqL3hBHpPbnox49P3jj/wGgdZFaJe1JTer036xd0Xak5qCI6SV86xqAdAChv6sj7ESw0SU7w0leCi/08lfYfucRQHdzjO3JkA7lvHw0ouMCSCweP+ms5HlStT1HLlgQ/pkLQ0HiDkuoPtTY6fDW0UPlH3ebKJKJsiIlEwAnWQ1ExfQhfs1IRdbEO6sgyC7u2YqSye9WFoH3s0+d4P2X78UPcUsRitbiSflMds3+5ixk47wEAbwHOouv3l0AUb9zZIP32hh+8n3fJx3LXT4wqErJXRmufydvyJuKW5IkA+rD7B5y3hJGUFrf+je8x2WEZ93MMZZjKF3R4hY4E82J7y0z9znWEXqtnGce0dejOBkrf6CbP1VCh4ixhRvmOXO9yA0A2XQqeWYNfk1eUkRWlybRDBiE5SOOtjudxOpqC6Hv0XRqdL58/dsrEItVoppvb13l9MrZRKzOe/vtw9JP9aAkOa7ra6MbT/3YE4LlEJ5ticKWKe+rOGibg+N20Vx6Vg7J3byZG9+hIpULnZWH4Tq3LmlMA+oUfgAbbzPl3twbDuQozSElI95KSsXaBWevUxIWPQdY+4eolMlTtLwn+51SP6BWFEiioYy+r2Rza4OqKJPMbx7t0CZCtpMKxYQ5JCowbAH7J4Y3Eh3C04j1H/2a7qH3cVo01mg0KjVVR59qENmLLCnQ4LNMS3i2XshEK7QAIvi4D+egZPpMUywog3s+tqRiaGXIEMFp3rd3TuvLXVT9tpJGxjgQLGMKXmGL1MVjoN97by2NaOn0JoIbOQqeBIHTVbBYNON5DD3XP+rStPIfVbuHd+90TJpGh8BlfV0dLneK2wDMnndVGVvQLhvaQxu6sL3XsvtxmQzeFWUSHLeAlmTc9yNQKkXtOJWS9faewS8yotiXdJQ6EI1vpVOHgh46gljSllVDRx9qlH7i2QFU/dKpaQEbpAFUBI/eSUGbpgT2ORGcUGXXDWjQJQo+nCkQVnIMRUCP367os5Iw4Rb3LDvOi+/mwcBozzUa4WkjVcSIURKO3RTFCiY9j3O6C5MBS6Y0WbBooC0nOzhKxL8xMIIaM/tnyEzIdlABrz3f9XlCiQ0hh+C7/bNp14eUvnjcHWjBOSw8E7BjzeXkRQkpIuZSOriwZ8PiOLZxCkXFOQ4hbXa4Tu69lccJ9Hd0F1lxkg5QnAhhfx5WdcTkBH3SibBUMCLPb/cYypz6s4GGDMV5smYibldp//j9gbCEhqanpxLsoexOMik4SOt879z21iz+8V3wgG8CicQsmxcsqCc5QUqOZhnpO4qAFgzHF+noxN835P4xf5EsOcPvYWwtzK3WEYVGy5tuvxE5WZB246SGIDgeC4sMge0B4p70Tse4b6NjlPHW+90GmqnySqY83r0ilaew46qmwi4RzmOcPehbn4YPCoISjQ44RURV++dfU53vcKhkSj6cWuh75tdSSUNMysFwoP+lN2gGTwxOfrha9wWxDPpimhEBVrt6dcBIvdoUbCLTDQDZuUOVVhZP4sATqq8z7Ai0STnGxzKmAHG+3I+/tvrDN/OOTHwR6W5aWSRj+M5wmS5hfdvimlus2z4pE6RV+l6scSEX3XjFUVgbSuuufln4qZfmgBxNvIZmkPtMh4WHAtuqRVdgDOLksqdhjqc9jrNVpRsYL4L5fXaKhNXYNJfTorxbaoSpoqj6ZEp05xsc4y4Qryx7BRs3iYvuHRbCUsiCPmmGdUPXDn6H7woEjiz1YeriH6NPF5au5aVrtcw0DvEgLLKMuVq6QvzE1mu+x9AFhhIEE3jVvzGWs7x+IBGJ2hfG8Kb57q5sDsPmddrc0s2doavGt3j59SpKkbETAVxcSwwHbpAEsYTNPM1KhVl7EPpQp+gNotyPx7hI11xG47CrYE7+4xlCFpaDwvf9FWescjE9qNrcgCXvSeme0GAOo6QjsttWQcRguwWZb6OG1VPN2xZcfyUeEGLHhPkrziDDf4SHNaCcXXJ9CtFdyRMVueZNWqaoSKhpFI91MMLSXju3pGbSzJlM8FPf/oxZbRADvlZZCyb8fbb4mQVBZZ3GWV4hj4PCrLA1qQvEqs9XLsRnoal9WaSQhWRzLJmCurnGGRc6wxyAAejp0pAR70k0M8R+ziXphTbSz5jU2xp2cFe1EhegrqPqjFAtYWbYwsm9X969oYf76RSVpD5DfI8iDfFILBkfvnZaZtHikQ2tfNY1T0QOYafZ+dfiQjWZxqrDxXDWbc/jYZSbOzpgJ0HvC9wodOgTk5d5d9dmNrnM0LH8bvtI4zgktUZdf/DkYM10EF8yMhbFqvpMTi+TaLBUNd9aLSzSGAqu41xsKxsEYHFPhxozYZMPCafc4U5t8Ja7k34czb9pTsN2JFnwl8AmZSpI39KzBoEcD8fz0CAcio2KlaDIhPF8V0HkEbwc2c0mkpBazhOMI1d4cxnKG15nlJ+haP4D9g/H1z7jIEHS7enL9st+r19iJpqLFuJiKD2NT7LXyBzaAcFxIJ/fo4roeZSvHUyfgqUjSVcPiszEAuk4Fgqjxih+ln6TZW8b5sbDIvrB1Ul++c1B63XbFgHdVJTaRPzIXeh5f5u+QYvfa7pHyQV0ZUIv4SnfFMvTC0g0/fdaaBd9rcpxu/CBpbobKZgCIyVRDZGdPlZs8UGyu7+Hxb64E/k0YIIyG0d7ZSIcU1dOwyAQt25Ow5B4W/oUhgU+Gf+qB/Eqf+V11+GylEkiyGag2sSabnAwgaqTr549u7USX8FH6EnKLv1g9jl2zIU7C6GM3aeDn8kP+9aBM0Agrl165RV4/UHaXPnrBjs3YOHlrMK9jziNkwwt6+rC5FPPvSm2uVuOQouD4+Rk/8X2VoT+8bijB9PNpfsOsNhiSOVgntu7dzfzJItraFExs2ylPt0vanTgZJP3SIxPvZsgaDSBNmxIh0KPLS+EZkJ1Xy0gY8WVOZDbYF9v0GJta6+GUy7ek8lisYumJ1nyw90NF5n7L6H1aFMYqA/WI2COJA7pWaf9Ugf5pniETIJNyNXtonwZOLeCG380p2a2m5Fs4WDJIbVCtkJ77ah+h3HMvJJ0fzW8OXfnZDuzbWB935lP5zr2+vOc7CL44LjNt8p2deJJKd+d8n1mwKwxWxUjkxJRVlpIqwq1a+Sfeu1oNGDaOXyS/LVoiWAi4/RFFK77j8sVBWyTeqc13DCYWKdEbHTgEcIdtBewm3fvU99V8J4gYLJijdis2O/D+3FBz8kG/SwAXwjzKgO1TmXuA3syLPxxfnEUxttkUPpzQJgAzcN6o79tpHr3QWX3TVy4USKZJPX/G7/sFv7TB2RKaM9LvG8518UTl/oNK6/mqMpSOqsv0xRVzNjumgamqz/e3LG3e1lkrW5SquqlrDJIrN90AProjO2hsva2vAv1ZNPbHVfvH6K8KnMmDbXcZImS+YAXafdXLVILS/Q0MSKuRaLPQABT6AsH1SpBlkiSLXyhT/gT5IbfD6Z1Jx0n7l33o2uGW4lgd8BRn8WUeEHBHEn2SCXVQwlREQtvN7iSC2y8qSngF4ytc3vgOucrGccauebyUn9sdKmkhMom+XHRGLg4yr7NW/ZAq8UDCTjimw0unj204NYoihtZTNdXwgmCpqzA6Y4a3S/braI7FEXELgpjVSnB+dqkyFq3Tny2G8lAz1OtN0TZdE3wgbqL8XtsE5Ut1NayTqmPNmEhJVC0f6ZfMop0HP5VawTxA+lq1XoeRAoIGH0ojuV+9O13sh2V2zoxj5jVyNGuZDtqZVlEeSIRI05PVi7nZfKw+EuT5YTkdX/qnx/AmQXABJR8mEbt5A8Oab2RqMdG+P0zvDI0gODnGDSO2w4ZOrD1zi5LnYaIljibbOMhpDWcwsd6Ry5eUmiLQ24OpaErO6a3/sYLybm9xOJLqfn7DNg/5SKBxEfKNyyUYP4KtkSMQI5Xo7dHcIhqH4l3CRK/gB7WtFU6bj0mReNJIitL8grYbUyZpqDuMDT5s5WQsWjOEmRSbMiH7HIkEIPvRu0WxMnRCJKjGFWdlKGqK96T7jlsEHCjsPjk/9VEQ4W5qB2tRAFGJ5YGgbmyYxqxGxduvkNdd3IZKcIbvtEtH4X7aHeyV4Dcn4wkEzUNRRhISM51Av5I1mwi2lj3DP8d6K9iFzNVDCSb+eb9pBu+SEqYrvFC8WKSi8OcZDj50KV871120hgz6n6OZy1KOh8OzKNuCKFt9mVlUfJKzD9gcuL53q+oTHGGIKFz4+4/zLC13N3l3y4Fn9dzM02uGyBGoJXmF3jrwW9OguOsh1FVykE1suM6kC/e005VRngkgcn29tixbfGSx7k8JzTId+5wTXE1HgKXCtGlwA7L6FxS+RUGGP2az1Em91D7THACjjqlVdoDOltQ7Yb4S8n4kG/m/CvtFfQB0e/e/JMgICLGKds6v5THENB7WYOdJ0P5s3GQzdbeXjUAG5Y2WCUBs5LZ6xDZzv1L7jfUHqBbmnHW7U4g+UTYB/tW7B0Ya0JAbpzWFSoVQH6CbY6q9fM8ccelwWdxeWdjZm+TcmBAHpje+emw8T5mUgl7Omvks7D2xk04/HjynzVyBN2dI3dBgxTkB1keL9tMN0WgyjY0ddKI8pigHP9lOa8hb7F2bZIa/FqS6JJPPHnlyPbVl+weIG7j4ocmWH/OkvaT4qtcbnafk2ocwOkjSqUob66ehit1UDMwKXreD2R92MZugTHNe/PWAZesANg9eBbm2p+4kqK52j8MW3AhqaffDN+kK195DUM4FLVYm8BQhOF+OWoM5tTD8LImCNRenutbU6qRxpaMDXCBU37/K3Y7eobcg/IaZaBuw44FteI67Hdgufk5VqCDjlK7jDBUtVq07hpPI9ymWW/m3nNLQlusNGDSBNYXOUBDRWNnHira/1eo9GEwVgpXn2tG1PUUxT15p/fbfGXCvpsj0QlzwErC0ge/Oqlsh7E0QhpqDAcvlBJOiXDD/bv01SkM269rmghWHJPUbmpq4trj7H6cCMXMIwWgOLaTXR0w3tamzJpReC8FXDNwkxSCbmg/ag17JdPyptz7mR3k6KvXor6tFCfEv85TW7CDWLEap1AC12Ym+LK9/CxdKPnXz9Qz4xNXGn3sG1wAfthifQfjDyiCnLo2uhuMzI9yKxH4PUTt52mReMLmnHFrrLpDYcPC+cU7ge55guYhGv/ANB92YzoXrI+Hs6gdXnnfE8GGhfydGwvKBKCtpDecGnu41Mz28j9/LTVtSV9WZEoxANMgPGo4BDbY2p69ixYGQWATdyg9TRDAK7f/Lrlubat60yuVZ9wcwqZ7NBP71mX6NEgdvfK1EgMnkZzsDQl/wWDHdAoOYCo4pKwY5I/V26cKTO4aMYcV/YDdgglOtas2KtIXBJAcgotsV4YfF+CDN4T5WdX808VdXh3/UXLrAdcMDF3QIXj1HyUHIOkXBH7DXICbJt9eNiowRXiuB0d1J/FqjPFe2IlNdXnwFwpRusB5PLSv0Lk/AdI1gQmao8wwLmnoh/L9riMbMMsWAOI+5B71d+lGTKlxx4hQn4ixRfedyZUUsRcpGrgAS1XqCKzggl0/LFuyQpe9BsgvZGkEHQ4ELkl6bcLtiHZ+7uFxmRjnV7v8PP1Whug1igIT3OTMnmb/dGJPuGKY5fRdvWoatxfNU3ABi+fY7eHiPqC0gQDpAC19twVfWBtBur+ST+y7fzmSE5Q0C3mcp8/31XIdqm7sEZJHtFnXBgaTyG+fWRGAY70K10IBvKH2TE6IMzm1k92/Cn2payTupKTtojgP3uaWIgFVgV0lD0WGR0PanqiKtrBFwqznvb/rz2PgpSjWd2BESLQpxY+6tmKXZnjvY9xfR12CQ8o/aKz1t+XxCSzy0uE5f/kaFUCrwxjL8gT7SEUJshp//5/yvPFJHgJlgsvXp+gRQCSzz+vS6rl3BhMsbj/HzwJYz8GsWppOQDGVswlOHEaFE/qhImhDrt2DUfNxtt21GW7KwJRn9/mtYIjlnnwgESPEpwoLyTru3SsVGzRxnZG6x+BiseUs57lTdb3H8KG7UPeH1SSjy9wZHELnar9x5cOtOR7lOvyjWm4Ab18Q+qoMxxLCFit0V8SmOu7AU8XGY3eSXb6Ly+kaQmDkRlOstgmcj+rD34KNz7LTvLL0O1Z9J/nCjp+1flOFgtbd7Yg0t5eNrPuppxYxJfSpnJRNL4S3YTffnV+x+zVsuioseET/On2wNi/TnL2rAQIKswi7Er3Sv48D/+PLsa2WJOSk6DqcCLmusILDiz0FwKEhMewrxtNyM2IAE0/6hiopIQoUgC6U8CLirhWbfVibSnCGZlF5uywIcaUlcEaYP/evokbi1NSquO62XNnWR4+fB3M1N7LaI5pwdHYOKEjg9OaSiTtEDypKGOVxZhdQS0jEvZ46foNS4SBpwZfPn60p6pQldNUmimhWeU5LUnEpZYjPJU6hmAsh4AKaLFfJANrZ9ou428yoEIFuiY9UgOYkqtSUocWxyijxK+NTtuDdbh7NJcyLIl6CUBWQjZiL34Bk0Qe3vmT9tpIKus3r5CvEdEu5Va2Wxm8CQJT9bESzuFBeH0QIRybKFAUVqNa9tCXukd1jwLXYKWsuMuFda8R1UjVG2cvAZ+R3lBV+nLksL4Ti6lubX3hKFcSyFsG5rK9pJt5nlSGIkBLP/HFqLL/KX0S96NdOo4CS+GYPBk+lBZxz6Yie12vvUj8l4t1ik/5PmvbLOTPCcaoPeZ7APUQIKIcxcNUDin3R1okbeAUGwt7Ja3G0ntQokBhlajisyXeqbfPLrTTKpTauclKp+DGdyBsbzFHEYtIqZnlLe5wjluF/UID6EgwWPGj0FVKM59Jom3+0Y1QTb+IKqHZv/0FIEEuVItlJHSixdza2w0UN80Hyc/eUGv6SBybC/EEs9cOcLBR1eeQXXe7p7hfIhtxxBrGhk9n7jom/4LXF125WzPmMCUiNyE8iO7sVSmRf/iSNFBveZWGPeCirfJ8a43fk5jCfA3NPEJyMAamu3Q5im0DKo8aonWXtye9iE8vraixlVTAGSXFMjP3+XiOE9jrnXTDzARnt7+9gvHctQpaAI0za6N7bq9R1lb55jILwmx4Ih4OA0K1/Xx7B9jytPFBRhEO8xqXLhxotsIRjnGRvnkMK/KJ1YhE9T2mNmclLYgMSn+7dzik8BzoHt+EcXstV8yNpTspqsnS96ATq3A66NbF449w9JqViBt4gWi7yVzt3kR4XSJ8iEB5anMqG+EsSyrMQVv0sMeEysGx+yYs6G2xPJw3zqTq4RzDQXPhYra/VMlt7E8zzl4D7L3HS3kkWf4ZkmFmnjcENPQdkmohl6p/gqkOg+8McyzNxxb5Fl19DsSr3MTuSMqhSKDn95ibzYCEdrZXJiKaqu7BFBuju+jSObOPchog2IsE/u/3U/UK2mntvSnD0qNkPYoRTskBnLJ3NJamL0V4sEbryX8NMr7MKMJ0+h2+xMKY4KERpvUrd0c6ABXWHqLdY1QTugC/5dhdoLy3+KwgG5FnL0MZw6qvOvHkKQRoQrcKLuwUld15s05QxurH67A9eAr02a/vUWNBIgP6vOa69ZZuZKElWttIerRDGIAkZ54fw7HBctSZtfspPxaliwbOEH/Laxot3ZQonzvXknSVodzZHA1Jw7BcNRsYvl+KJ0Y6pMRPpIbaN/QSuHtnjUoej+vlVhq5021xMUPKxCK/D8rSRbOmduHG85/JrIimgo5wXWP83lLvRaxwCxeTGVt44fTUqsfUARmQcS3f5DbHR9SZ4nJYIEvcCjIqLezJ3I6S7xBop57j3ZyMQX0Xxr5mc6IUmrlOXM9fJG5iDZQQ9rWsGZ0Y26GzTAEsD6pjPuDa1XAT1MRpxyZ8zN53sl1YEV0E0EHvZqcnBnqMTXRh6zC9PwDXEk3OHs2zLLIjBhY5+7lDxp1X0qcm8XtWorat33mUx+kEDDgaDUdpclQq/ZM6mMYoF433nKbCKDxCozugSPVaRjNPosMDy8FujvIJSb763XuBGBIYLS9x+HZhYiUa9xod0xKV9aRt7yczWWlLgfK8qn4fULHMBSP48m/wTWfDBdTH8uDAKt5WM033+2bCpxDhmZtE+d7XP65yBTOf9/EWaCG+Gs9/5kVbWS0JlfoDH6Si2tVCzCRGfV0XZAUWfXOMJ5F9dkMagbwaeqVqqbVONDQGg8zID5MUV7IkazdAz4JLOXsn1RuZnoZNIGV2Na15+dRKYUAmXFmkWBJpPMBwT8N4bd8VZwBnhm3WzH9S0sbpoP0sgf2OmPvQ6smMyfkVK+OLjXYubmtioAhdwDb5/pLRg3PGwfHEz6v9OOe4AK8iw2cma49tV44In8Rc9jGcqSQlFXPdlC8366ke4U/ITFy0/SQBl1vWvGk40KycwWGaLf8cCtEi/4X2W8961i6lYnpfNQhGcQyC8s2oIOW+Pw545Thq3ZBEyNC8YDr/pzCEmBI8U3A4IiQJoHiD9kUMNd8wfzysC2Kqc4OGeWYsJxmDev4Jn4HV+vqpgN6xxSEMABhRMdTteHiJAgnQEX9BR2V1sNqh5EcMvQNYYa5+bblQn7Rli1UFCtQkP6ECmGkxmPNkg2CGS2mmf0/WEuTZSyPMtbbrnftPgleOmJ3jSm0m1EU9fQHQo1NZti+KczpJ8mSYIVtXzXh4rNJcL3Fm7Bbftpjmj5UnuDpPk8HvqKOj2DGJyk4R0Md1x7umiH0DTOXaLwO0EI94k7n6R8nfqiwekgUQZ1rRek0HViM5YN0JLWp4f4NRE8ErcGNSHZd58+9Kx8lmkc9ogfQmX0rX1kB8QQzNbH+eVDee0jOQNUgQcew3y+0QbifXrtLHXDIxsqsej41Kz7vfcQRE1zUnY2phYNILK8a657zyHNMzPiRhxs28s1JX2kiCMEloubOXnc8BzU+n7LM9wztf63eFWN/eWHXVivSdCWg5DfWsk2CF8aFJrOP277QEPdkWlOlewCVEkLjyd5wUn9ZzaKOJKnDQDLfliiRLTKlU8TOeQj8jOU8FfpM9tayJTDpxw6sVlZuJRAILfxn+QAGIB/W1FGDjuuVu62hFDBdvzVSfge95Ebf9pclp0GrpV3S+gwBWn5J7aGiim/fRyIN7YVVXJsnAnVeq90vDdAV0XearTqjT2Ck/AMkBW6T/ls/6VUVnFWs01wxkahKR0tRwyLRKgHefm3RWie/pTVQpUMZw+/7ozQSW+7vuZd8lsvT1iX5rwlpiaFnOnDbHsr1As6vLETd5HVbcBCGbJHcS7ax9Byd50jdYyagUtjAaHYX8ryyuR/bDkw1o4j8+hXMfbzy+CVmgrfRDyl4dn+5LxrqRAXLoDKpQREAHqdLSsVSJh1s8KnZ/SsUVq27cq+O6LMSBmhT4X3E750rmWwCsoCre6bT//oFWYALjp2SbcxnULBaTvnYDHtfEbO1m/3c9nJk8ZO5KHQTV88ivTWN/S2EXwmisTPdcupMrvI8e48QZdkZu9WHyKron7MKhGFJw6Z0KZ3tleVrvvJo89siUwByPY+Hs4gkKPBQbLQOaedcv/xeM+Ih8rl1eHEC/C65xWVciToVqSGp9HfbhVzFSrO6kBnv7mJwnRLvMEwqiNankVdJJMw4icU3lKyw/ecNSWIUddqlbThYMiq8nHjRRufs+28cq0OI9zhpvxFvFgSZE/eAYvm0x+9lZO+EH9NkBngaqU1NMYhdombNuy3awUN9p0mJQ//e9L65YbShgoc+ZUlNy+c6F6gDEHXV0JrzevPIZFAe2RyRa2dNqzLvihAAMCszYueqszzXRkSyobx5+LTLK2V3lfg3wbS9DzP3QW7VHdHbjZcttQRvtjrGveJnNn2DE2ZDIbvkCrT0H8RzbGDdmIq4P1ey+hoY/W6NuZKOz4dv4HUNznxdKV1Wf3MvqUv35r2jTKvpPWBUWNm5fytX/QJwp6qkIOsSx7Y67BSCbCDVLM8/VcMG+T0j+INrgL9sfT1ICtACH8BI0G6ViUZPVzzCmQHW2oVIwZjAoFl6+meO/pD8teO1E+1y03mCpYfW9S8qhtH2GhlFlebPf4NbezVv9xbXKWz0xezRNQWqUqtYRTUbuzK7KTvjG4rQHfzBpVmK4wDLnSIwdSzTSk1fPNeY0WOpPZTLlvQ59xwgfFrb326vT2hS1JAZ9E6sujFtKTiJ7bxI6o4cBhDaX+adXREThhR+MwA4TqD7rga/o9iY7d6TVRe14CS2S3iSQsD0R6ApnhG/2Wa0A0AY2NtWTjmabdKU+KgIRDP9RQYVjXiF1qC+xyNVG03I9vpmEpY/G/zC4nLOKgXAZ/uTikHI9Afbkhfgfgo9arWbix5eH7WUo9RQygDzwCnVSjbXc7MihEufVj6WGbK963pw8VjY3RS8IH1cy2yZbIcKLO5CgAUcXJfF2+McnDLKtXxyZaf7SPA6KJq+zF2NHyfoeTOwHhGqNcnHVr1hT73pcoyXyfvCYBnG1Bp/aR9t8hoI7CXM3UZOisWGA1SHZ2jf7k9GlRnp3mF/c1AV+JjvUsnZrsybEOQJg/dn/9eJkyykQHjbF56zgcPX6DdMG03WKUMlYz+uOZ+5DZy9E9MZOZ9GMoLFdrIPPQQLjv+GlCMpoyHPXkzIODjHAID2PrnaRpqWVHh0rnieDILKq+Emrd5RnjgE9pDUXWTmHaKuqqYlcgEz4zbi46dbWrAAFBjsQq1rLHIiPJEcwFLCOY4JNlXRXQJqCUKXk2d1RSBGzDP6HDSpo863BhVRFFF6uIpjQV7j5ebFe3UkkO/+coIo2BTAcgBqOtQ134s9a4QJvofuqBYMGOBMsWZ+sn/2AOxDx6SfAnDFGw==",Nb=Uint8Array.from(atob(Db),(function(e){return e.charCodeAt(0)}));function Bb(e,t,n){if(t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE)){var r=t.getQueryParameter(e,t.QUERY_RESULT)/1e6;n.lastTime=r}else setTimeout((function(){Bb(e,t,n)}),1)}var Ub=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ab(this,t)).width=i,r.height=a,r.clear=!0,r.camera=n,r.scene=e,r.autosetGamma=!0,r.configuration=new Proxy({aoSamples:16,aoRadius:5,denoiseSamples:8,denoiseRadius:12,distanceFalloff:1,intensity:5,denoiseIterations:2,renderMode:0,color:new Gu(0,0,0),gammaCorrection:!0,logarithmicDepthBuffer:!1},{set:function(e,t,n){var i=e[t];return e[t]=n,"aoSamples"===t&&i!==n&&r.configureAOPass(r.configuration.logarithmicDepthBuffer),"denoiseSamples"===t&&i!==n&&r.configureDenoisePass(r.configuration.logarithmicDepthBuffer),"gammaCorrection"===t&&(r.autosetGamma=!1),!0}}),r.samples=[],r.samplesR=[],r.samplesDenoise=[],r.configureSampleDependentPasses(),r.effectCompisterQuad=new Dy(new Hl(Pb)),r.copyQuad=new Dy(new Hl({uniforms:{tDiffuse:{value:null}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n            ",fragmentShader:"\n            uniform sampler2D tDiffuse;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = texture2D(tDiffuse, vUv);\n            }\n            "})),r.writeTargetInternal=new ms(r.width,r.height,{minFilter:Ii,magFilter:Ii,depthBuffer:!1}),r.readTargetInternal=new ms(r.width,r.height,{minFilter:Ii,magFilter:Ii,depthBuffer:!1}),r.bluenoise=new pd(Nb,128,128),r.bluenoise.colorSpace=Qa,r.bluenoise.wrapS=wi,r.bluenoise.wrapT=wi,r.bluenoise.minFilter=Si,r.bluenoise.magFilter=Si,r.bluenoise.needsUpdate=!0,r.lastTime=0,r.needsDepthTexture=!0,r._r=new Wo,r._c=new Gu,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rb(e,t)}(t,e),n=t,r=[{key:"configureSampleDependentPasses",value:function(){this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)}},{key:"configureAOPass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.samples=this.generateHemisphereSamples(this.configuration.aoSamples),this.samplesR=this.generateHemisphereSamplesR(this.configuration.aoSamples);var t=Sb({},Cb);t.fragmentShader=t.fragmentShader.replace("16",this.configuration.aoSamples).replace("16.0",this.configuration.aoSamples+".0"),e&&(t.fragmentShader="#define LOGDEPTH\n"+t.fragmentShader),this.effectShaderQuad?(this.effectShaderQuad.material.dispose(),this.effectShaderQuad.material=new Hl(t)):this.effectShaderQuad=new Dy(new Hl(t))}},{key:"configureDenoisePass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.samplesDenoise=this.generateDenoiseSamples(this.configuration.denoiseSamples,11);var t=Sb({},Ob);t.fragmentShader=t.fragmentShader.replace("16",this.configuration.denoiseSamples),e&&(t.fragmentShader="#define LOGDEPTH\n"+t.fragmentShader),this.poissonBlurQuad?(this.poissonBlurQuad.material.dispose(),this.poissonBlurQuad.material=new Hl(t)):this.poissonBlurQuad=new Dy(new Hl(t))}},{key:"generateHemisphereSamples",value:function(e){for(var t=[],n=0;n<e;n++){var r=2.399963*n,i=Math.sqrt(n+.5)/Math.sqrt(e),a=i*Math.cos(r),o=i*Math.sin(r),s=Math.sqrt(1-(a*a+o*o));t.push(new _s(a,o,s))}return t}},{key:"generateHemisphereSamplesR",value:function(e){for(var t=[],n=0;n<e;n++)t.push((n+1)/e);return t}},{key:"generateDenoiseSamples",value:function(e,t){for(var n=2*Math.PI*t/e,r=1/e,i=r,a=[],o=r,s=0,u=0;u<e;u++)a.push(new Wo(Math.cos(s),Math.sin(s)).multiplyScalar(Math.pow(o,.75))),o+=i,s+=n;return a}},{key:"setSize",value:function(e,t){this.width=e,this.height=t,this.writeTargetInternal.setSize(e,t),this.readTargetInternal.setSize(e,t)}},{key:"setDepthTexture",value:function(e){this.depthTexture=e}},{key:"render",value:function(e,t,n){var r,i,a;e.capabilities.logarithmicDepthBuffer!==this.configuration.logarithmicDepthBuffer&&(this.configuration.logarithmicDepthBuffer=e.capabilities.logarithmicDepthBuffer,this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)),this.debugMode&&null===(i=(r=e.getContext()).getExtension("EXT_disjoint_timer_query_webgl2"))&&(console.error("EXT_disjoint_timer_query_webgl2 not available, disabling debug mode."),this.debugMode=!1),this.debugMode&&(a=r.createQuery(),r.beginQuery(i.TIME_ELAPSED_EXT,a)),this.camera.updateMatrixWorld(),this.effectShaderQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectShaderQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.effectShaderQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.effectShaderQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.effectShaderQuad.material.uniforms.projViewMat.value=this.camera.projectionMatrix.clone().multiply(this.camera.matrixWorldInverse.clone()),this.effectShaderQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectShaderQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectShaderQuad.material.uniforms.cameraPos.value=this.camera.position,this._r.set(this.width,this.height),this.effectShaderQuad.material.uniforms.resolution.value=this._r,this.effectShaderQuad.material.uniforms.time.value=performance.now()/1e3,this.effectShaderQuad.material.uniforms.samples.value=this.samples,this.effectShaderQuad.material.uniforms.samplesR.value=this.samplesR,this.effectShaderQuad.material.uniforms.bluenoise.value=this.bluenoise,this.effectShaderQuad.material.uniforms.radius.value=this.configuration.aoRadius,this.effectShaderQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectShaderQuad.material.uniforms.near.value=this.camera.near,this.effectShaderQuad.material.uniforms.far.value=this.camera.far,this.effectShaderQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectShaderQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,e.setRenderTarget(this.writeTargetInternal),this.effectShaderQuad.render(e);for(var o=0;o<this.configuration.denoiseIterations;o++){var s=[this.readTargetInternal,this.writeTargetInternal];this.writeTargetInternal=s[0],this.readTargetInternal=s[1],this.poissonBlurQuad.material.uniforms.tDiffuse.value=this.readTargetInternal.texture,this.poissonBlurQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.poissonBlurQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.poissonBlurQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.poissonBlurQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.poissonBlurQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.poissonBlurQuad.material.uniforms.cameraPos.value=this.camera.position,this.poissonBlurQuad.material.uniforms.resolution.value=this._r,this.poissonBlurQuad.material.uniforms.time.value=performance.now()/1e3,this.poissonBlurQuad.material.uniforms.blueNoise.value=this.bluenoise,this.poissonBlurQuad.material.uniforms.radius.value=this.configuration.denoiseRadius,this.poissonBlurQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.poissonBlurQuad.material.uniforms.index.value=o,this.poissonBlurQuad.material.uniforms.poissonDisk.value=this.samplesDenoise,this.poissonBlurQuad.material.uniforms.near.value=this.camera.near,this.poissonBlurQuad.material.uniforms.far.value=this.camera.far,this.poissonBlurQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,e.setRenderTarget(this.writeTargetInternal),this.poissonBlurQuad.render(e)}this.effectCompisterQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectCompisterQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.effectCompisterQuad.material.uniforms.resolution.value=this._r,this.effectCompisterQuad.material.uniforms.blueNoise.value=this.bluenoise,this.effectCompisterQuad.material.uniforms.intensity.value=this.configuration.intensity,this.effectCompisterQuad.material.uniforms.renderMode.value=this.configuration.renderMode,this.effectCompisterQuad.material.uniforms.gammaCorrection.value=this.autosetGamma?this.renderToScreen:this.configuration.gammaCorrection,this.effectCompisterQuad.material.uniforms.tDiffuse.value=this.writeTargetInternal.texture,this.effectCompisterQuad.material.uniforms.color.value=this._c.copy(this.configuration.color).convertSRGBToLinear(),e.setRenderTarget(this.renderToScreen?null:n),this.effectCompisterQuad.render(e),this.debugMode&&(r.endQuery(i.TIME_ELAPSED_EXT),Bb(a,r,this))}},{key:"enableDebugMode",value:function(){this.debugMode=!0}},{key:"disableDebugMode",value:function(){this.debugMode=!1}},{key:"setDisplayMode",value:function(e){this.configuration.renderMode=["Combined","AO","No AO","Split","Split AO"].indexOf(e)}},{key:"setQualityMode",value:function(e){"Performance"===e?(this.configuration.aoSamples=8,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):"Low"===e?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):"Medium"===e?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=12):"High"===e?(this.configuration.aoSamples=64,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=6):"Ultra"===e&&(this.configuration.aoSamples=64,this.configuration.denoiseSamples=16,this.configuration.denoiseRadius=6)}}],r&&Mb(n.prototype,r),i&&Mb(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t;var n,r,i}(ub);Uint8Array.from(atob(Db),(function(e){return e.charCodeAt(0)}));var Fb=n(4780),zb=n.n(Fb);function Hb(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),a={},o={},s=e[0].morphTargetsRelative,u=new vl,l=0,c=0;c<e.length;++c){var h=e[c],f=0;if(n!==(null!==h.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var d in h.attributes){if(!r.has(d))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+d+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[d]&&(a[d]=[]),a[d].push(h.attributes[d]),f++}if(f!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(s!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var p in h.morphAttributes){if(!i.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[p]&&(o[p]=[]),o[p].push(h.morphAttributes[p])}if(t){var m=void 0;if(n)m=h.index.count;else{if(void 0===h.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;m=h.attributes.position.count}u.addGroup(l,m,c),l+=m}}if(n){for(var v=0,g=[],y=0;y<e.length;++y){for(var b=e[y].index,x=0;x<b.count;++x)g.push(b.getX(x)+v);v+=e[y].attributes.position.count}u.setIndex(g)}for(var w in a){var _=Gb(a[w]);if(!_)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+w+" attribute."),null;u.setAttribute(w,_)}for(var E in o){var S=o[E][0].length;if(0===S)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[E]=[];for(var T=0;T<S;++T){for(var M=[],k=0;k<o[E].length;++k)M.push(o[E][k][T]);var A=Gb(M);if(!A)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+E+" morphAttribute."),null;u.morphAttributes[E].push(A)}}return u}function Gb(e){for(var t,n,r,i=0,a=0;a<e.length;++a){var o=e[a];if(o.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=o.array.constructor),t!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=o.itemSize),n!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===r&&(r=o.normalized),r!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=o.array.length}for(var s=new t(i),u=0,l=0;l<e.length;++l)s.set(e[l].array,u),u+=e[l].array.length;return new Qu(s,n,r)}function jb(e,t){if(t===ja)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===qa||t===Va){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(t===qa)for(var u=1;u<=o;u++)s.push(n.getX(0)),s.push(n.getX(u)),s.push(n.getX(u+1));else for(var l=0;l<o;l++)l%2==0?(s.push(n.getX(l)),s.push(n.getX(l+1)),s.push(n.getX(l+2))):(s.push(n.getX(l+2)),s.push(n.getX(l+1)),s.push(n.getX(l)));s.length/3!==o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c.clearGroups(),c}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}function Vb(e,t,n){if(qb())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&Wb(i,n.prototype),i}function qb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qb=function(){return!!e})()}function Wb(e,t){return Wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wb(e,t)}function Xb(e){return function(e){if(Array.isArray(e))return Yb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Yb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yb(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kb={},Jb=function(t){var n;switch(t.type){case"ShapeGeometry":var r=new Lp;t.shapeArgs.forEach((function(e){var t;return(t=r)[e.draw].apply(t,Xb(e.drawArgs))})),(n={args:t.args,geometry:new lm(r)}).edges=new Ip(n.geometry);break;case"ExtrudeGeometry":r=new Lp,t.shapeArgs.forEach((function(e){var t;return(t=r)[e.draw].apply(t,Xb(e.drawArgs))})),(n={geometry:new im(r,t.extrudeSettings)}).edges=new Ip(n.geometry);break;case"ParametricGeometry":case"TubeGeometry":var i=new vl;i.setAttribute("position",new Qu(t.attributes.position.array,t.attributes.position.itemSize,t.attributes.position.Boolean)),i.setAttribute("normal",new Qu(t.attributes.normal.array,t.attributes.normal.itemSize,t.attributes.normal.Boolean)),i.setAttribute("uv",new Qu(t.attributes.uv.array,t.attributes.uv.itemSize,t.attributes.uv.Boolean)),i.setIndex(new Qu(t.index.array,t.index.itemSize,t.index.Boolean)),(n={geometry:i}).edges=new Ip(n.geometry);break;default:if(Kb.hasOwnProperty(t.type)){var a=!1;Kb[t.type].forEach((function(e){if(e.args.length===t.args.length){for(var r=!0,i=0;i<e.args.length;i++)e.args[i]===t.args[i]||(r=!1);r&&(a=!0,(n=e).count++,n.instances=[])}})),a||((n={args:t.args,geometry:Vb(e[t.type],Xb(t.args)),count:0}).edges=new Ip(n.geometry),Kb[t.type].push(n))}else Kb[t.type]=[],(n={args:t.args,geometry:Vb(e[t.type],Xb(t.args)),count:0}).edges=new Ip(n.geometry),Kb[t.type].push(n)}return n};function Zb(e){return Zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zb(e)}function Qb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ex,tx,nx,rx,ix,ax,ox,sx,ux,lx,cx,hx,fx={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},dx={duration:.5,overwrite:!1,delay:0},px=1e8,mx=1e-8,vx=2*Math.PI,gx=vx/4,yx=0,bx=Math.sqrt,xx=Math.cos,wx=Math.sin,_x=function(e){return"string"==typeof e},Ex=function(e){return"function"==typeof e},Sx=function(e){return"number"==typeof e},Tx=function(e){return void 0===e},Mx=function(e){return"object"===Zb(e)},kx=function(e){return!1!==e},Ax=function(){return"undefined"!=typeof window},Ix=function(e){return Ex(e)||_x(e)},Lx="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Rx=Array.isArray,Cx=/(?:-?\.?\d|\.)+/gi,Px=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ox=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Dx=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Nx=/[+-]=-?[.\d]+/,Bx=/[^,'"\[\]\s]+/gi,Ux=/[\d.+\-=]+(?:e[-+]\d*)*/i,Fx={},zx={},Hx=function(e){return(zx=fw(e,Fx))&&J_},Gx=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},jx=function(e,t){return!t&&console.warn(e)},Vx=function(e,t){return e&&(Fx[e]=t)&&zx&&(zx[e]=t)||Fx},qx=function(){return 0},Wx={},Xx=[],Yx={},Kx={},Jx={},Zx=30,Qx=[],$x="",ew=function(e){var t,n,r=e[0];if(Mx(r)||Ex(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=Qx.length;n--&&!Qx[n].targetTest(r););t=Qx[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new w_(e[n],t)))||e.splice(n,1);return e},tw=function(e){return e._gsap||ew(Hw(e))[0]._gsap},nw=function(e,t,n){return(n=e[t])&&Ex(n)?e[t]():Tx(n)&&e.getAttribute&&e.getAttribute(t)||n},rw=function(e,t){return(e=e.split(",")).forEach(t)||e},iw=function(e){return Math.round(1e5*e)/1e5||0},aw=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},ow=function(){var e,t,n=Xx.length,r=Xx.slice(0);for(Yx={},Xx.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},sw=function(e,t,n,r){Xx.length&&ow(),e.render(t,n,r),Xx.length&&ow()},uw=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(Bx).length<2?t:_x(e)?e.trim():e},lw=function(e){return e},cw=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},hw=function(e,t){for(var n in t)n in e||"duration"===n||"ease"===n||(e[n]=t[n])},fw=function(e,t){for(var n in t)e[n]=t[n];return e},dw=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=Mx(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},pw=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},mw=function(e){var t=e.parent||tx,n=e.keyframes?hw:cw;if(kx(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},vw=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,a=t._next;i?i._next=a:e[n]===t&&(e[n]=a),a?a._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},gw=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},yw=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},bw=function e(t){return!t||t._ts&&e(t.parent)},xw=function(e){return e._repeat?ww(e._tTime,e=e.duration()+e._rDelay)*e:0},ww=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},_w=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Ew=function(e){return e._end=iw(e._start+(e._tDur/Math.abs(e._ts||e._rts||mx)||0))},Sw=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=iw(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Ew(e),n._dirty||yw(n,e)),e},Tw=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=_w(e.rawTime(),t),(!t._dur||Bw(0,t.totalDuration(),n)-t._tTime>mx)&&t.render(n,!0)),yw(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Mw=function(e,t,n,r){return t.parent&&gw(t),t._start=iw((Sx(n)?n:n||e!==tx?Ow(e,n,t):e._time)+t._delay),t._end=iw(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var a,o=e[r];if(i)for(a=t[i];o&&o[i]>a;)o=o._prev;o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e}(e,t,"_first","_last",e._sort?"_start":0),Lw(t)||(e._recent=t),r||Tw(e,t),e},kw=function(e,t){return(Fx.ScrollTrigger||Gx("scrollTrigger",t))&&Fx.ScrollTrigger.create(t,e)},Aw=function(e,t,n,r){return A_(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&ox!==u_.frame?(Xx.push(e),e._lazy=[t,r],1):void 0:1},Iw=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Lw=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Rw=function(e,t,n,r){var i=e._repeat,a=iw(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=a/e._dur),e._dur=a,e._tDur=i?i<0?1e10:iw(a*(i+1)+e._rDelay*i):a,o&&!r?Sw(e,e._tTime=e._tDur*o):e.parent&&Ew(e),n||yw(e.parent,e),e},Cw=function(e){return e instanceof E_?yw(e):Rw(e,e._dur)},Pw={_start:0,endTime:qx,totalDuration:qx},Ow=function e(t,n,r){var i,a,o,s=t.labels,u=t._recent||Pw,l=t.duration()>=px?u.endTime(!1):t._dur;return _x(n)&&(isNaN(n)||n in s)?(a=n.charAt(0),o="%"===n.substr(-1),i=n.indexOf("="),"<"===a||">"===a?(i>=0&&(n=n.replace(/=/,"")),("<"===a?u._start:u.endTime(u._repeat>=0))+(parseFloat(n.substr(1))||0)*(o?(i<0?u:r).totalDuration()/100:1)):i<0?(n in s||(s[n]=l),s[n]):(a=parseFloat(n.charAt(i-1)+n.substr(i+1)),o&&r&&(a=a/100*(Rx(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+a:l+a)):null==n?l:+n},Dw=function(e,t,n){var r,i,a=Sx(t[1]),o=(a?2:1)+(e<2?0:1),s=t[o];if(a&&(s.duration=t[1]),s.parent=n,e){for(r=s,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=kx(i.vars.inherit)&&i.parent;s.immediateRender=kx(r.immediateRender),e<2?s.runBackwards=1:s.startAt=t[o-1]}return new C_(t[0],s,t[o+1])},Nw=function(e,t){return e||0===e?t(e):t},Bw=function(e,t,n){return n<e?e:n>t?t:n},Uw=function(e){if("string"!=typeof e)return"";var t=Ux.exec(e);return t?e.substr(t.index+t[0].length):""},Fw=[].slice,zw=function(e,t){return e&&Mx(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Mx(e[0]))&&!e.nodeType&&e!==nx},Hw=function(e,t,n){return!_x(e)||n||!rx&&l_()?Rx(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return _x(e)&&!t||zw(e,1)?(r=n).push.apply(r,Hw(e)):n.push(e)}))||n}(e,n):zw(e)?Fw.call(e,0):e?[e]:[]:Fw.call((t||ix).querySelectorAll(e),0)},Gw=function(e){return e.sort((function(){return.5-Math.random()}))},jw=function(e){if(Ex(e))return e;var t=Mx(e)?e:{each:e},n=v_(t.ease),r=t.from||0,i=parseFloat(t.base)||0,a={},o=r>0&&r<1,s=isNaN(r)||o,u=t.axis,l=r,c=r;return _x(r)?l=c={center:.5,edges:.5,end:1}[r]||0:!o&&s&&(l=r[0],c=r[1]),function(e,o,h){var f,d,p,m,v,g,y,b,x,w=(h||t).length,_=a[w];if(!_){if(!(x="auto"===t.grid?0:(t.grid||[1,px])[1])){for(y=-px;y<(y=h[x++].getBoundingClientRect().left)&&x<w;);x--}for(_=a[w]=[],f=s?Math.min(x,w)*l-.5:r%x,d=s?w*c/x-.5:r/x|0,y=0,b=px,g=0;g<w;g++)p=g%x-f,m=d-(g/x|0),_[g]=v=u?Math.abs("y"===u?m:p):bx(p*p+m*m),v>y&&(y=v),v<b&&(b=v);"random"===r&&Gw(_),_.max=y-b,_.min=b,_.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(x>w?w-1:u?"y"===u?w/x:x:Math.max(x,w/x))||0)*("edges"===r?-1:1),_.b=w<0?i-w:i,_.u=Uw(t.amount||t.each)||0,n=n&&w<0?p_(n):n}return w=(_[e]-_.min)/_.max||0,iw(_.b+(n?n(w):w)*_.v)+_.u}},Vw=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(n){var r=Math.round(parseFloat(n)/e)*e*t;return(r-r%1)/t+(Sx(n)?0:Uw(n))}},qw=function(e,t){var n,r,i=Rx(e);return!i&&Mx(e)&&(n=i=e.radius||px,e.values?(e=Hw(e.values),(r=!Sx(e[0]))&&(n*=n)):e=Vw(e.increment)),Nw(t,i?Ex(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var i,a,o=parseFloat(r?t.x:t),s=parseFloat(r?t.y:0),u=px,l=0,c=e.length;c--;)(i=r?(i=e[c].x-o)*i+(a=e[c].y-s)*a:Math.abs(e[c]-o))<u&&(u=i,l=c);return l=!n||u<=n?e[l]:t,r||l===t||Sx(t)?l:l+Uw(t)}:Vw(e))},Ww=function(e,t,n,r){return Nw(Rx(e)?!t:!0===n?!!(n=0):!r,(function(){return Rx(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},Xw=function(e,t,n){return Nw(n,(function(n){return e[~~t(n)]}))},Yw=function(e){for(var t,n,r,i,a=0,o="";~(t=e.indexOf("random(",a));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?Bx:Cx),o+=e.substr(a,t-a)+Ww(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),a=r+1;return o+e.substr(a,e.length-a)},Kw=function(e,t,n,r,i){var a=t-e,o=r-n;return Nw(i,(function(t){return n+((t-e)/a*o||0)}))},Jw=function(e,t,n){var r,i,a,o=e.labels,s=px;for(r in o)(i=o[r]-t)<0==!!n&&i&&s>(i=Math.abs(i))&&(a=r,s=i);return a},Zw=function(e,t,n){var r,i,a=e.vars,o=a[t];if(o)return r=a[t+"Params"],i=a.callbackScope||e,n&&Xx.length&&ow(),r?o.apply(i,r):o.call(i)},Qw=function(e){return gw(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&Zw(e,"onInterrupt"),e},$w=255,e_={aqua:[0,$w,$w],lime:[0,$w,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,$w],navy:[0,0,128],white:[$w,$w,$w],olive:[128,128,0],yellow:[$w,$w,0],orange:[$w,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[$w,0,0],pink:[$w,192,203],cyan:[0,$w,$w],transparent:[$w,$w,$w,0]},t_=function(e,t,n){return(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*$w+.5|0},n_=function(e,t,n){var r,i,a,o,s,u,l,c,h,f,d=e?Sx(e)?[e>>16,e>>8&$w,e&$w]:0:e_.black;if(!d){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),e_[e])d=e_[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),a=e.charAt(3),e="#"+r+r+i+i+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(d=parseInt(e.substr(1,6),16))>>16,d>>8&$w,d&$w,parseInt(e.substr(7),16)/255];d=[(e=parseInt(e.substr(1),16))>>16,e>>8&$w,e&$w]}else if("hsl"===e.substr(0,3))if(d=f=e.match(Cx),t){if(~e.indexOf("="))return d=e.match(Px),n&&d.length<4&&(d[3]=1),d}else o=+d[0]%360/360,s=+d[1]/100,r=2*(u=+d[2]/100)-(i=u<=.5?u*(s+1):u+s-u*s),d.length>3&&(d[3]*=1),d[0]=t_(o+1/3,r,i),d[1]=t_(o,r,i),d[2]=t_(o-1/3,r,i);else d=e.match(Cx)||e_.transparent;d=d.map(Number)}return t&&!f&&(r=d[0]/$w,i=d[1]/$w,a=d[2]/$w,u=((l=Math.max(r,i,a))+(c=Math.min(r,i,a)))/2,l===c?o=s=0:(h=l-c,s=u>.5?h/(2-l-c):h/(l+c),o=l===r?(i-a)/h+(i<a?6:0):l===i?(a-r)/h+2:(r-i)/h+4,o*=60),d[0]=~~(o+.5),d[1]=~~(100*s+.5),d[2]=~~(100*u+.5)),n&&d.length<4&&(d[3]=1),d},r_=function(e){var t=[],n=[],r=-1;return e.split(a_).forEach((function(e){var i=e.match(Ox)||[];t.push.apply(t,i),n.push(r+=i.length+1)})),t.c=n,t},i_=function(e,t,n){var r,i,a,o,s="",u=(e+s).match(a_),l=t?"hsla(":"rgba(",c=0;if(!u)return e;if(u=u.map((function(e){return(e=n_(e,t,1))&&l+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(a=r_(e),(r=n.c).join(s)!==a.c.join(s)))for(o=(i=e.replace(a_,"1").split(Ox)).length-1;c<o;c++)s+=i[c]+(~r.indexOf(c)?u.shift()||l+"0,0,0,0)":(a.length?a:u.length?u:n).shift());if(!i)for(o=(i=e.split(a_)).length-1;c<o;c++)s+=i[c]+u[c];return s+i[o]},a_=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in e_)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),o_=/hsl[a]?\(/,s_=function(e){var t,n=e.join(" ");if(a_.lastIndex=0,a_.test(n))return t=o_.test(n),e[1]=i_(e[1],t),e[0]=i_(e[0],t,r_(e[1])),!0},u_=function(){var e,t,n,r,i,a,o=Date.now,s=500,u=33,l=o(),c=l,h=1e3/240,f=h,d=[],p=function n(p){var m,v,g,y,b=o()-c,x=!0===p;if(b>s&&(l+=b-u),((m=(g=(c+=b)-l)-f)>0||x)&&(y=++r.frame,i=g-1e3*r.time,r.time=g/=1e3,f+=m+(m>=h?4:h-m),v=1),x||(e=t(n)),v)for(a=0;a<d.length;a++)d[a](g,i,y,p)};return r={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(e){return i/(1e3/(e||60))},wake:function(){ax&&(!rx&&Ax()&&(nx=rx=window,ix=nx.document||{},Fx.gsap=J_,(nx.gsapVersions||(nx.gsapVersions=[])).push(J_.version),Hx(zx||nx.GreenSockGlobals||!nx.gsap&&nx||{}),n=nx.requestAnimationFrame),e&&r.sleep(),t=n||function(e){return setTimeout(e,f-1e3*r.time+1|0)},ux=1,p(2))},sleep:function(){(n?nx.cancelAnimationFrame:clearTimeout)(e),ux=0,t=qx},lagSmoothing:function(e,t){s=e||1e8,u=Math.min(t,s,0)},fps:function(e){h=1e3/(e||240),f=1e3*r.time+h},add:function(e){d.indexOf(e)<0&&d.push(e),l_()},remove:function(e){var t;~(t=d.indexOf(e))&&d.splice(t,1)&&a>=t&&a--},_listeners:d},r}(),l_=function(){return!ux&&u_.wake()},c_={},h_=/^[\d.\-M][\d.\-,\s]/,f_=/["']/g,d_=function(e){for(var t,n,r,i={},a=e.substr(1,e.length-3).split(":"),o=a[0],s=1,u=a.length;s<u;s++)n=a[s],t=s!==u-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[o]=isNaN(r)?r.replace(f_,"").trim():+r,o=n.substr(t+1).trim();return i},p_=function(e){return function(t){return 1-e(1-t)}},m_=function e(t,n){for(var r,i=t._first;i;)i instanceof E_?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},v_=function(e,t){return e&&(Ex(e)?e:c_[e]||function(e){var t=(e+"").split("("),n=c_[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[d_(t[1])]:function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)}(e).split(",").map(uw)):c_._CE&&h_.test(e)?c_._CE("",e):n}(e))||t},g_=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,a={easeIn:t,easeOut:n,easeInOut:r};return rw(e,(function(e){for(var t in c_[e]=Fx[e]=a,c_[i=e.toLowerCase()]=n,a)c_[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=c_[e+"."+t]=a[t]})),a},y_=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},b_=function e(t,n,r){var i=n>=1?n:1,a=(r||(t?.3:.45))/(n<1?n:1),o=a/vx*(Math.asin(1/i)||0),s=function(e){return 1===e?1:i*Math.pow(2,-10*e)*wx((e-o)*a)+1},u="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:y_(s);return a=vx/a,u.config=function(n,r){return e(t,n,r)},u},x_=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:y_(r);return i.config=function(n){return e(t,n)},i};rw("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;g_(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),c_.Linear.easeNone=c_.none=c_.Linear.easeIn,g_("Elastic",b_("in"),b_("out"),b_()),lx=7.5625,cx=2.75,hx=function(e){return e<.36363636363636365?lx*e*e:e<.7272727272727273?lx*Math.pow(e-1.5/cx,2)+.75:e<.9090909090909092?lx*(e-=2.25/cx)*e+.9375:lx*Math.pow(e-2.625/cx,2)+.984375},g_("Bounce",(function(e){return 1-hx(1-e)}),hx),g_("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),g_("Circ",(function(e){return-(bx(1-e*e)-1)})),g_("Sine",(function(e){return 1===e?1:1-xx(e*gx)})),g_("Back",x_("in"),x_("out"),x_()),c_.SteppedEase=c_.steps=Fx.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*Bw(0,.99999999,e)|0)+i)*n}}},dx.ease=c_["quad.out"],rw("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return $x+=e+","+e+"Params,"}));var w_=function(e,t){this.id=yx++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:nw,this.set=t?t.getSetter:B_},__=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Rw(this,+e.duration,1,1),this.data=e.data,ux||u_.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Rw(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(l_(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Sw(this,e),!n._dp||n.parent||Tw(n,this);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Mw(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===mx||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),sw(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+xw(this))%this._dur||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+xw(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?ww(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?_w(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this.totalTime(Bw(-this._delay,this._tDur,t),!0))},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(l_(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=mx)&&Math.abs(this._zTime)!==mx))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Mw(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(kx(e)?this.totalDuration():this.duration())/Math.abs(this._ts)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_w(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,Cw(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){return arguments.length?(this._rDelay=e,Cw(this)):this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(Ow(this,e),kx(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,kx(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-mx))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=Ex(e)?e:lw,i=function(){var e=t.then;t.then=null,Ex(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))},t.kill=function(){Qw(this)},e}();cw(__.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var E_=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=kx(t.sortChildren),tx&&Mw(t.parent||tx,Qb(r),n),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&kw(Qb(r),t.scrollTrigger),r}$b(t,e);var n=t.prototype;return n.to=function(e,t,n){return Dw(0,arguments,this),this},n.from=function(e,t,n){return Dw(1,arguments,this),this},n.fromTo=function(e,t,n,r){return Dw(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,mw(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new C_(e,t,Ow(this,n),1),this},n.call=function(e,t,n){return Mw(this,C_.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,a,o){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=a,n.onCompleteParams=o,n.parent=this,new C_(e,n,Ow(this,i)),this},n.staggerFrom=function(e,t,n,r,i,a,o){return n.runBackwards=1,mw(n).immediateRender=kx(n.immediateRender),this.staggerTo(e,t,n,r,i,a,o)},n.staggerFromTo=function(e,t,n,r,i,a,o,s){return r.startAt=n,mw(r).immediateRender=kx(r.immediateRender),this.staggerTo(e,t,r,i,a,o,s)},n.render=function(e,t,n){var r,i,a,o,s,u,l,c,h,f,d,p,m=this._time,v=this._dirty?this.totalDuration():this._tDur,g=this._dur,y=this!==tx&&e>v-mx&&e>=0?v:e<mx?0:e,b=this._zTime<0!=e<0&&(this._initted||!g);if(y!==this._tTime||n||b){if(m!==this._time&&g&&(y+=this._time-m,e+=this._time-m),r=y,h=this._start,u=!(c=this._ts),b&&(g||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(d=this._yoyo,s=g+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*s+e,t,n);if(r=iw(y%s),y===v?(o=this._repeat,r=g):((o=~~(y/s))&&o===y/s&&(r=g,o--),r>g&&(r=g)),f=ww(this._tTime,s),!m&&this._tTime&&f!==o&&(f=o),d&&1&o&&(r=g-r,p=1),o!==f&&!this._lock){var x=d&&1&f,w=x===(d&&1&o);if(o<f&&(x=!x),m=x?0:g,this._lock=1,this.render(m||(p?0:iw(o*s)),t,!g)._lock=0,this._tTime=y,!t&&this.parent&&Zw(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),m&&m!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(g=this._dur,v=this._tDur,w&&(this._lock=2,m=x?g:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;m_(this,p)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(!r._dur&&"isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(!r._dur&&"isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,iw(m),iw(r)),l&&(y-=r-(r=l._start))),this._tTime=y,this._time=r,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&r&&!t&&(Zw(this,"onStart"),this._tTime!==y))return this;if(r>=m&&e>=0)for(i=this._first;i;){if(a=i._next,(i._act||r>=i._start)&&i._ts&&l!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!u){l=0,a&&(y+=this._zTime=-1e-8);break}}i=a}else{i=this._last;for(var _=e<0?e:r;i;){if(a=i._prev,(i._act||_<=i._end)&&i._ts&&l!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(_-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(_-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!u){l=0,a&&(y+=this._zTime=_?-1e-8:mx);break}}i=a}}if(l&&!t&&(this.pause(),l.render(r>=m?0:-1e-8)._zTime=r>=m?1:-1,this._ts))return this._start=h,Ew(this),this.render(e,t,n);this._onUpdate&&!t&&Zw(this,"onUpdate",!0),(y===v&&v>=this.totalDuration()||!y&&m)&&(h!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((e||!g)&&(y===v&&this._ts>0||!y&&this._ts<0)&&gw(this,1),t||e<0&&!m||!y&&!m&&v||(Zw(this,y===v&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<v&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(Sx(t)||(t=Ow(this,t,e)),!(e instanceof __)){if(Rx(e))return e.forEach((function(e){return n.add(e,t)})),this;if(_x(e))return this.addLabel(e,t);if(!Ex(e))return this;e=C_.delayedCall(0,e)}return this!==e?Mw(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-px);for(var i=[],a=this._first;a;)a._start>=r&&(a instanceof C_?t&&i.push(a):(n&&i.push(a),e&&i.push.apply(i,a.getChildren(!0,t,n)))),a=a._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return _x(e)?this.removeLabel(e):Ex(e)?this.killTweensOf(e):(vw(this,e),e===this._recent&&(this._recent=this._last),yw(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=iw(u_.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=Ow(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=C_.delayedCall(0,t||qx,n);return r.data="isPause",this._hasPause=1,Mw(this,r,Ow(this,e))},n.removePause=function(e){var t=this._first;for(e=Ow(this,e);t;)t._start===e&&"isPause"===t.data&&gw(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)S_!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=Hw(e),a=this._first,o=Sx(t);a;)a instanceof C_?aw(a._targets,i)&&(o?(!S_||a._initted&&a._ts)&&a.globalTime(0)<=t&&a.globalTime(a.totalDuration())>t:!t||a.isActive())&&r.push(a):(n=a.getTweensOf(i,t)).length&&r.push.apply(r,n),a=a._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=Ow(r,e),a=t,o=a.startAt,s=a.onStart,u=a.onStartParams,l=a.immediateRender,c=C_.to(r,cw({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(o&&"time"in o?o.time:r._time))/r.timeScale())||mx,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(o&&"time"in o?o.time:r._time))/r.timeScale());c._dur!==e&&Rw(c,e,0,1).render(c._time,!0,!0),n=1}s&&s.apply(c,u||[])}},t));return l?c.render(0):c},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,cw({startAt:{time:Ow(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),Jw(this,Ow(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),Jw(this,Ow(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+mx)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,a=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in a)a[r]>=n&&(a[r]+=e);return yw(this)},n.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),yw(this)},n.totalDuration=function(e){var t,n,r,i=0,a=this,o=a._last,s=px;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-e:e));if(a._dirty){for(r=a.parent;o;)t=o._prev,o._dirty&&o.totalDuration(),(n=o._start)>s&&a._sort&&o._ts&&!a._lock?(a._lock=1,Mw(a,o,n-o._delay,1)._lock=0):s=n,n<0&&o._ts&&(i-=n,(!r&&!a._dp||r&&r.smoothChildTiming)&&(a._start+=n/a._ts,a._time-=n,a._tTime-=n),a.shiftChildren(-n,!1,-Infinity),s=0),o._end>i&&o._ts&&(i=o._end),o=t;Rw(a,a===tx&&a._time>i?a._time:i,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(e){if(tx._ts&&(sw(tx,_w(e,tx)),ox=u_.frame),u_.frame>=Zx){Zx+=fx.autoSleep||120;var t=tx._first;if((!t||!t._ts)&&fx.autoSleep&&u_._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||u_.sleep()}}},t}(__);cw(E_.prototype,{_lock:0,_hasPause:0,_forcing:0});var S_,T_=function(e,t,n,r,i,a,o){var s,u,l,c,h,f,d,p,m=new W_(this._pt,e,t,0,1,z_,null,i),v=0,g=0;for(m.b=n,m.e=r,n+="",(d=~(r+="").indexOf("random("))&&(r=Yw(r)),a&&(a(p=[n,r],e,t),n=p[0],r=p[1]),u=n.match(Dx)||[];s=Dx.exec(r);)c=s[0],h=r.substring(v,s.index),l?l=(l+1)%5:"rgba("===h.substr(-5)&&(l=1),c!==u[g++]&&(f=parseFloat(u[g-1])||0,m._pt={_next:m._pt,p:h||1===g?h:",",s:f,c:"="===c.charAt(1)?parseFloat(c.substr(2))*("-"===c.charAt(0)?-1:1):parseFloat(c)-f,m:l&&l<4?Math.round:0},v=Dx.lastIndex);return m.c=v<r.length?r.substring(v,r.length):"",m.fp=o,(Nx.test(r)||d)&&(m.e=0),this._pt=m,m},M_=function(e,t,n,r,i,a,o,s,u){Ex(r)&&(r=r(i||0,e,a));var l,c=e[t],h="get"!==n?n:Ex(c)?u?e[t.indexOf("set")||!Ex(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():c,f=Ex(c)?u?D_:O_:P_;if(_x(r)&&(~r.indexOf("random(")&&(r=Yw(r)),"="===r.charAt(1)&&((l=parseFloat(h)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(Uw(h)||0))||0===l)&&(r=l)),h!==r)return isNaN(h*r)||""===r?(!c&&!(t in e)&&Gx(t,r),T_.call(this,e,t,h,r,f,s||fx.stringFilter,u)):(l=new W_(this._pt,e,t,+h||0,r-(h||0),"boolean"==typeof c?F_:U_,0,f),u&&(l.fp=u),o&&l.modifier(o,this,e),this._pt=l)},k_=function(e,t,n,r,i,a){var o,s,u,l;if(Kx[e]&&!1!==(o=new Kx[e]).init(i,o.rawVars?t[e]:function(e,t,n,r,i){if(Ex(e)&&(e=I_(e,i,t,n,r)),!Mx(e)||e.style&&e.nodeType||Rx(e)||Lx(e))return _x(e)?I_(e,i,t,n,r):e;var a,o={};for(a in e)o[a]=I_(e[a],i,t,n,r);return o}(t[e],r,i,a,n),n,r,a)&&(n._pt=s=new W_(n._pt,i,e,0,1,o.render,o,0,o.priority),n!==sx))for(u=n._ptLookup[n._targets.indexOf(i)],l=o._props.length;l--;)u[o._props[l]]=s;return o},A_=function e(t,n){var r,i,a,o,s,u,l,c,h,f,d,p,m,v=t.vars,g=v.ease,y=v.startAt,b=v.immediateRender,x=v.lazy,w=v.onUpdate,_=v.onUpdateParams,E=v.callbackScope,S=v.runBackwards,T=v.yoyoEase,M=v.keyframes,k=v.autoRevert,A=t._dur,I=t._startAt,L=t._targets,R=t.parent,C=R&&"nested"===R.data?R.parent._targets:L,P="auto"===t._overwrite&&!ex,O=t.timeline;if(O&&(!M||!g)&&(g="none"),t._ease=v_(g,dx.ease),t._yEase=T?p_(v_(!0===T?g:T,dx.ease)):0,T&&t._yoyo&&!t._repeat&&(T=t._yEase,t._yEase=t._ease,t._ease=T),t._from=!O&&!!v.runBackwards,!O){if(p=(c=L[0]?tw(L[0]).harness:0)&&v[c.prop],r=pw(v,Wx),I&&I.render(-1,!0).kill(),y)if(gw(t._startAt=C_.set(L,cw({data:"isStart",overwrite:!1,parent:R,immediateRender:!0,lazy:kx(x),startAt:null,delay:0,onUpdate:w,onUpdateParams:_,callbackScope:E,stagger:0},y))),n<0&&!b&&!k&&t._startAt.render(-1,!0),b){if(n>0&&!k&&(t._startAt=0),A&&n<=0)return void(n&&(t._zTime=n))}else!1===k&&(t._startAt=0);else if(S&&A)if(I)!k&&(t._startAt=0);else if(n&&(b=!1),a=cw({overwrite:!1,data:"isFromStart",lazy:b&&kx(x),immediateRender:b,stagger:0,parent:R},r),p&&(a[c.prop]=p),gw(t._startAt=C_.set(L,a)),n<0&&t._startAt.render(-1,!0),b){if(!n)return}else e(t._startAt,mx);for(t._pt=0,x=A&&kx(x)||x&&!A,i=0;i<L.length;i++){if(l=(s=L[i])._gsap||ew(L)[i]._gsap,t._ptLookup[i]=f={},Yx[l.id]&&Xx.length&&ow(),d=C===L?i:C.indexOf(s),c&&!1!==(h=new c).init(s,p||r,t,d,C)&&(t._pt=o=new W_(t._pt,s,h.name,0,1,h.render,h,0,h.priority),h._props.forEach((function(e){f[e]=o})),h.priority&&(u=1)),!c||p)for(a in r)Kx[a]&&(h=k_(a,r,t,d,s,C))?h.priority&&(u=1):f[a]=o=M_.call(t,s,a,"get",r[a],d,C,0,v.stringFilter);t._op&&t._op[i]&&t.kill(s,t._op[i]),P&&t._pt&&(S_=t,tx.killTweensOf(s,f,t.globalTime(0)),m=!t.parent,S_=0),t._pt&&x&&(Yx[l.id]=1)}u&&q_(t),t._onInit&&t._onInit(t)}t._onUpdate=w,t._initted=(!t._op||t._pt)&&!m},I_=function(e,t,n,r,i){return Ex(e)?e.call(t,n,r,i):_x(e)&&~e.indexOf("random(")?Yw(e):e},L_=$x+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",R_=(L_+",id,stagger,delay,duration,paused,scrollTrigger").split(","),C_=function(e){function t(t,n,r,i){var a;"number"==typeof n&&(r.duration=n,n=r,r=null);var o,s,u,l,c,h,f,d,p=(a=e.call(this,i?n:mw(n))||this).vars,m=p.duration,v=p.delay,g=p.immediateRender,y=p.stagger,b=p.overwrite,x=p.keyframes,w=p.defaults,_=p.scrollTrigger,E=p.yoyoEase,S=n.parent||tx,T=(Rx(t)||Lx(t)?Sx(t[0]):"length"in n)?[t]:Hw(t);if(a._targets=T.length?ew(T):jx("GSAP target "+t+" not found. https://greensock.com",!fx.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=b,x||y||Ix(m)||Ix(v)){if(n=a.vars,(o=a.timeline=new E_({data:"nested",defaults:w||{}})).kill(),o.parent=o._dp=Qb(a),o._start=0,x)cw(o.vars.defaults,{ease:"none"}),y?T.forEach((function(e,t){return x.forEach((function(n,r){return o.to(e,n,r?">":t*y)}))})):x.forEach((function(e){return o.to(T,e,">")}));else{if(l=T.length,f=y?jw(y):qx,Mx(y))for(c in y)~L_.indexOf(c)&&(d||(d={}),d[c]=y[c]);for(s=0;s<l;s++){for(c in u={},n)R_.indexOf(c)<0&&(u[c]=n[c]);u.stagger=0,E&&(u.yoyoEase=E),d&&fw(u,d),h=T[s],u.duration=+I_(m,Qb(a),s,h,T),u.delay=(+I_(v,Qb(a),s,h,T)||0)-a._delay,!y&&1===l&&u.delay&&(a._delay=v=u.delay,a._start+=v,u.delay=0),o.to(h,u,f(s,h,T))}o.duration()?m=v=0:a.timeline=0}m||a.duration(m=o.duration())}else a.timeline=0;return!0!==b||ex||(S_=Qb(a),tx.killTweensOf(T),S_=0),Mw(S,Qb(a),r),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(g||!m&&!x&&a._start===iw(S._time)&&kx(g)&&bw(Qb(a))&&"nested"!==S.data)&&(a._tTime=-1e-8,a.render(Math.max(0,-v))),_&&kw(Qb(a),_),a}$b(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,a,o,s,u,l,c,h,f=this._time,d=this._tDur,p=this._dur,m=e>d-mx&&e>=0?d:e<mx?0:e;if(p){if(m!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=e<0){if(r=m,c=this.timeline,this._repeat){if(o=p+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,n);if(r=iw(m%o),m===d?(a=this._repeat,r=p):((a=~~(m/o))&&a===m/o&&(r=p,a--),r>p&&(r=p)),(u=this._yoyo&&1&a)&&(h=this._yEase,r=p-r),s=ww(this._tTime,o),r===f&&!n&&this._initted)return this;a!==s&&(c&&this._yEase&&m_(c,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(iw(o*a),!0).invalidate()._lock=0))}if(!this._initted){if(Aw(this,e<0?e:r,n,t))return this._tTime=0,this;if(p!==this._dur)return this.render(e,t,n)}if(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(h||this._ease)(r/p),this._from&&(this.ratio=l=1-l),r&&!f&&!t&&Zw(this,"onStart"),r&&!f&&!t&&(Zw(this,"onStart"),this._tTime!==m))return this;for(i=this._pt;i;)i.r(l,i.d),i=i._next;c&&c.render(e<0?e:!r&&u?-1e-8:c._dur*l,t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),Zw(this,"onUpdate")),this._repeat&&a!==s&&this.vars.onRepeat&&!t&&this.parent&&Zw(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!p)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&gw(this,1),t||e<0&&!f||!m&&!f||(Zw(this,m===d?"onComplete":"onReverseComplete",!0),this._prom&&!(m<d&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var i,a,o,s=e.ratio,u=t<0||!t&&(!e._start&&Iw(e)&&(e._initted||!Lw(e))||(e._ts<0||e._dp._ts<0)&&!Lw(e))?0:1,l=e._rDelay,c=0;if(l&&e._repeat&&(c=Bw(0,e._tDur,t),a=ww(c,l),o=ww(e._tTime,l),e._yoyo&&1&a&&(u=1-u),a!==o&&(s=1-u,e.vars.repeatRefresh&&e._initted&&e.invalidate())),u!==s||r||e._zTime===mx||!t&&e._zTime){if(!e._initted&&Aw(e,t,r,n))return;for(o=e._zTime,e._zTime=t||(n?mx:0),n||(n=t&&!o),e.ratio=u,e._from&&(u=1-u),e._time=0,e._tTime=c,i=e._pt;i;)i.r(u,i.d),i=i._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&Zw(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&Zw(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===u&&(u&&gw(e,1),n||(Zw(e,u?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?Qw(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,S_&&!0!==S_.vars.overwrite)._first||Qw(this),this.parent&&n!==this.timeline.totalDuration()&&Rw(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,a,o,s,u,l,c=this._targets,h=e?Hw(e):c,f=this._ptLookup,d=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(c,h))return"all"===t&&(this._pt=0),Qw(this);for(r=this._op=this._op||[],"all"!==t&&(_x(t)&&(s={},rw(t,(function(e){return s[e]=1})),t=s),t=function(e,t){var n,r,i,a,o=e[0]?tw(e[0]).harness:0,s=o&&o.aliases;if(!s)return t;for(r in n=fw({},t),s)if(r in n)for(i=(a=s[r].split(",")).length;i--;)n[a[i]]=n[r];return n}(c,t)),l=c.length;l--;)if(~h.indexOf(c[l]))for(s in i=f[l],"all"===t?(r[l]=t,o=i,a={}):(a=r[l]=r[l]||{},o=t),o)(u=i&&i[s])&&("kill"in u.d&&!0!==u.d.kill(s)||vw(this,u,"_pt"),delete i[s]),"all"!==a&&(a[s]=1);return this._initted&&!this._pt&&d&&Qw(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return Dw(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return Dw(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return tx.killTweensOf(e,t,n)},t}(__);cw(C_.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),rw("staggerTo,staggerFrom,staggerFromTo",(function(e){C_[e]=function(){var t=new E_,n=Fw.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var P_=function(e,t,n){return e[t]=n},O_=function(e,t,n){return e[t](n)},D_=function(e,t,n,r){return e[t](r.fp,n)},N_=function(e,t,n){return e.setAttribute(t,n)},B_=function(e,t){return Ex(e[t])?O_:Tx(e[t])&&e.setAttribute?N_:P_},U_=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},F_=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},z_=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},H_=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},G_=function(e,t,n,r){for(var i,a=this._pt;a;)i=a._next,a.p===r&&a.modifier(e,t,n),a=i},j_=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?vw(this,r,"_pt"):r.dep||(t=1),r=n;return!t},V_=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},q_=function(e){for(var t,n,r,i,a=e._pt;a;){for(t=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:i)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:i=a,a=t}e._pt=r},W_=function(){function e(e,t,n,r,i,a,o,s,u){this.t=t,this.s=r,this.c=i,this.p=n,this.r=a||U_,this.d=o||this,this.set=s||P_,this.pr=u||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=V_,this.m=e,this.mt=n,this.tween=t},e}();rw($x+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return Wx[e]=1})),Fx.TweenMax=Fx.TweenLite=C_,Fx.TimelineLite=Fx.TimelineMax=E_,tx=new E_({sortChildren:!1,defaults:dx,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),fx.stringFilter=s_;var X_={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return function(e){var t=(e=!e.name&&e.default||e).name,n=Ex(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:qx,render:H_,add:M_,kill:j_,modifier:G_,rawVars:0},a={targetTest:0,get:0,getSetter:B_,aliases:{},register:0};if(l_(),e!==r){if(Kx[t])return;cw(r,cw(pw(e,i),a)),fw(r.prototype,fw(i,pw(e,a))),Kx[r.prop=t]=r,e.targetTest&&(Qx.push(r),Wx[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Vx(t,r),e.register&&e.register(J_,r,W_)}(e)}))},timeline:function(e){return new E_(e)},getTweensOf:function(e,t){return tx.getTweensOf(e,t)},getProperty:function(e,t,n,r){_x(e)&&(e=Hw(e)[0]);var i=tw(e||{}).get,a=n?lw:uw;return"native"===n&&(n=""),e?t?a((Kx[t]&&Kx[t].get||i)(e,t,n,r)):function(t,n,r){return a((Kx[t]&&Kx[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=Hw(e)).length>1){var r=e.map((function(e){return J_.quickSetter(e,t,n)})),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var a=Kx[t],o=tw(e),s=o.harness&&(o.harness.aliases||{})[t]||t,u=a?function(t){var r=new a;sx._pt=0,r.init(e,n?t+n:t,sx,0,[e]),r.render(1,r),sx._pt&&H_(1,sx)}:o.set(e,s);return a?u:function(t){return u(e,s,n?t+n:t,o,1)}},isTweening:function(e){return tx.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=v_(e.ease,dx.ease)),dw(dx,e||{})},config:function(e){return dw(fx,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,a=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!Kx[e]&&!Fx[e]&&jx(t+" effect requires "+e+" plugin.")})),Jx[t]=function(e,t,r){return n(Hw(e),cw(t||{},i),r)},a&&(E_.prototype[t]=function(e,n,r){return this.add(Jx[t](e,Mx(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){c_[e]=v_(t)},parseEase:function(e,t){return arguments.length?v_(e,t):c_},getById:function(e){return tx.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new E_(e);for(i.smoothChildTiming=kx(e.smoothChildTiming),tx.remove(i),i._dp=0,i._time=i._tTime=tx._time,n=tx._first;n;)r=n._next,!t&&!n._dur&&n instanceof C_&&n.vars.onComplete===n._targets[0]||Mw(i,n,n._start-n._delay),n=r;return Mw(tx,i,0),i},utils:{wrap:function e(t,n,r){var i=n-t;return Rx(t)?Xw(t,e(0,t.length),n):Nw(r,(function(e){return(i+(e-t)%i)%i+t}))},wrapYoyo:function e(t,n,r){var i=n-t,a=2*i;return Rx(t)?Xw(t,e(0,t.length-1),n):Nw(r,(function(e){return t+((e=(a+(e-t)%a)%a||0)>i?a-e:e)}))},distribute:jw,random:Ww,snap:qw,normalize:function(e,t,n){return Kw(e,t,0,1,n)},getUnit:Uw,clamp:function(e,t,n){return Nw(n,(function(n){return Bw(e,t,n)}))},splitColor:n_,toArray:Hw,selector:function(e){return e=Hw(e)[0]||jx("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Hw(t,n.querySelectorAll?n:n===e?jx("Invalid scope")||ix.createElement("div"):e)}},mapRange:Kw,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||Uw(n))}},interpolate:function e(t,n,r,i){var a=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!a){var o,s,u,l,c,h=_x(t),f={};if(!0===r&&(i=1)&&(r=null),h)t={p:t},n={p:n};else if(Rx(t)&&!Rx(n)){for(u=[],l=t.length,c=l-2,s=1;s<l;s++)u.push(e(t[s-1],t[s]));l--,a=function(e){e*=l;var t=Math.min(c,~~e);return u[t](e-t)},r=n}else i||(t=fw(Rx(t)?[]:{},t));if(!u){for(o in n)M_.call(f,t,o,"get",n[o]);a=function(e){return H_(e,f)||(h?t.p:t)}}}return Nw(r,a)},shuffle:Gw},install:Hx,effects:Jx,ticker:u_,updateRoot:E_.updateRoot,plugins:Kx,globalTimeline:tx,core:{PropTween:W_,globals:Vx,Tween:C_,Timeline:E_,Animation:__,getCache:tw,_removeLinkedListItem:vw,suppressOverwrites:function(e){return ex=e}}};rw("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return X_[e]=C_[e]})),u_.add(E_.updateRoot),sx=X_.to({},{duration:0});var Y_=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},K_=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(_x(n)&&(r={},rw(n,(function(e){return r[e]=1})),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}!function(e,t){var n,r,i,a=e._targets;for(n in t)for(r=a.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=Y_(i,n)),i&&i.modifier&&i.modifier(t[n],e,a[r],n))}(e,n)}}}},J_=X_.registerPlugin({name:"attr",init:function(e,t,n,r,i){var a,o;for(a in t)(o=this.add(e,"setAttribute",(e.getAttribute(a)||0)+"",t[a],r,i,0,0,a))&&(o.op=a),this._props.push(a)}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},K_("roundProps",Vw),K_("modifiers"),K_("snap",qw))||X_;function Z_(e){return Z_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z_(e)}C_.version=E_.version=J_.version="3.7.0",ax=1,Ax()&&l_(),c_.Power0,c_.Power1,c_.Power2,c_.Power3,c_.Power4,c_.Linear,c_.Quad,c_.Cubic,c_.Quart,c_.Quint,c_.Strong,c_.Elastic,c_.Back,c_.SteppedEase,c_.Bounce,c_.Sine,c_.Expo,c_.Circ;var Q_,$_,eE,tE,nE,rE,iE,aE={},oE=180/Math.PI,sE=Math.PI/180,uE=Math.atan2,lE=/([A-Z])/g,cE=/(?:left|right|width|margin|padding|x)/i,hE=/[\s,\(]\S/,fE={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},dE=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},pE=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},mE=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},vE=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},gE=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},yE=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},bE=function(e,t,n){return e.style[t]=n},xE=function(e,t,n){return e.style.setProperty(t,n)},wE=function(e,t,n){return e._gsap[t]=n},_E=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},EE=function(e,t,n,r,i){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(i,a)},SE=function(e,t,n,r,i){var a=e._gsap;a[t]=n,a.renderTransform(i,a)},TE="transform",ME=TE+"Origin",kE=function(e,t){var n=$_.createElementNS?$_.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):$_.createElement(e);return n.style?n:$_.createElement(e)},AE=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(lE,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,LE(n)||n,1)||""},IE="O,Moz,ms,Ms,Webkit".split(","),LE=function(e,t,n){var r=(t||nE).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(IE[i]+e in r););return i<0?null:(3===i?"ms":i>=0?IE[i]:"")+e},RE=function(){"undefined"!=typeof window&&window.document&&(Q_=window,$_=Q_.document,eE=$_.documentElement,nE=kE("div")||{style:{}},kE("div"),TE=LE(TE),ME=TE+"Origin",nE.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",iE=!!LE("perspective"),tE=1)},CE=function e(t){var n,r=kE("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,a=this.nextSibling,o=this.style.cssText;if(eE.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(a?i.insertBefore(this,a):i.appendChild(this)),eE.removeChild(r),this.style.cssText=o,n},PE=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},OE=function(e){var t;try{t=e.getBBox()}catch(n){t=CE.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===CE||(t=CE.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+PE(e,["x","cx","x1"])||0,y:+PE(e,["y","cy","y1"])||0,width:0,height:0}},DE=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!OE(e))},NE=function(e,t){if(t){var n=e.style;t in aE&&t!==ME&&(t=TE),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(lE,"-$1").toLowerCase())):n.removeAttribute(t)}},BE=function(e,t,n,r,i,a){var o=new W_(e._pt,t,n,0,1,a?yE:gE);return e._pt=o,o.b=r,o.e=i,e._props.push(n),o},UE={deg:1,rad:1,turn:1},FE=function e(t,n,r,i){var a,o,s,u,l=parseFloat(r)||0,c=(r+"").trim().substr((l+"").length)||"px",h=nE.style,f=cE.test(n),d="svg"===t.tagName.toLowerCase(),p=(d?"client":"offset")+(f?"Width":"Height"),m=100,v="px"===i,g="%"===i;return i===c||!l||UE[i]||UE[c]?l:("px"!==c&&!v&&(l=e(t,n,r,"px")),u=t.getCTM&&DE(t),!g&&"%"!==c||!aE[n]&&!~n.indexOf("adius")?(h[f?"width":"height"]=m+(v?c:i),o=~n.indexOf("adius")||"em"===i&&t.appendChild&&!d?t:t.parentNode,u&&(o=(t.ownerSVGElement||{}).parentNode),o&&o!==$_&&o.appendChild||(o=$_.body),(s=o._gsap)&&g&&s.width&&f&&s.time===u_.time?iw(l/s.width*m):((g||"%"===c)&&(h.position=AE(t,"position")),o===t&&(h.position="static"),o.appendChild(nE),a=nE[p],o.removeChild(nE),h.position="absolute",f&&g&&((s=tw(o)).time=u_.time,s.width=o[p]),iw(v?a*l/m:a&&l?m/a*l:0))):(a=u?t.getBBox()[f?"width":"height"]:t[p],iw(g?l/a*m:l/100*a)))},zE=function(e,t,n,r){var i;return tE||RE(),t in fE&&"transform"!==t&&~(t=fE[t]).indexOf(",")&&(t=t.split(",")[0]),aE[t]&&"transform"!==t?(i=QE(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:$E(AE(e,ME))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=qE[t]&&qE[t](e,t,n)||AE(e,t)||nw(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?FE(e,t,i,n)+n:i},HE=function(e,t,n,r){if(!n||"none"===n){var i=LE(t,e,1),a=i&&AE(e,i,1);a&&a!==n?(t=i,n=a):"borderColor"===t&&(n=AE(e,"borderTopColor"))}var o,s,u,l,c,h,f,d,p,m,v,g,y=new W_(this._pt,e.style,t,0,1,z_),b=0,x=0;if(y.b=n,y.e=r,n+="","auto"==(r+="")&&(e.style[t]=r,r=AE(e,t)||r,e.style[t]=n),s_(o=[n,r]),r=o[1],u=(n=o[0]).match(Ox)||[],(r.match(Ox)||[]).length){for(;s=Ox.exec(r);)f=s[0],p=r.substring(b,s.index),c?c=(c+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(c=1),f!==(h=u[x++]||"")&&(l=parseFloat(h)||0,v=h.substr((l+"").length),(g="="===f.charAt(1)?+(f.charAt(0)+"1"):0)&&(f=f.substr(2)),d=parseFloat(f),m=f.substr((d+"").length),b=Ox.lastIndex-m.length,m||(m=m||fx.units[t]||v,b===r.length&&(r+=m,y.e+=m)),v!==m&&(l=FE(e,t,h,m)||0),y._pt={_next:y._pt,p:p||1===x?p:",",s:l,c:g?g*d:d-l,m:c&&c<4||"zIndex"===t?Math.round:0});y.c=b<r.length?r.substring(b,r.length):""}else y.r="display"===t&&"none"===r?yE:gE;return Nx.test(r)&&(y.e=0),this._pt=y,y},GE={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},jE=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==r&&"right"!==r||(e=n,n=r,r=e),t[0]=GE[n]||n,t[1]=GE[r]||r,t.join(" ")},VE=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,a=t.t,o=a.style,s=t.u,u=a._gsap;if("all"===s||!0===s)o.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],aE[n]&&(r=1,n="transformOrigin"===n?ME:TE),NE(a,n);r&&(NE(a,TE),u&&(u.svg&&a.removeAttribute("transform"),QE(a,1),u.uncache=1))}},qE={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var a=e._pt=new W_(e._pt,t,n,0,0,VE);return a.u=r,a.pr=-10,a.tween=i,e._props.push(n),1}}},WE=[1,0,0,1,0,0],XE={},YE=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},KE=function(e){var t=AE(e,TE);return YE(t)?WE:t.substr(7).match(Px).map(iw)},JE=function(e,t){var n,r,i,a,o=e._gsap||tw(e),s=e.style,u=KE(e);return o.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?WE:u:(u!==WE||e.offsetParent||e===eE||o.svg||(i=s.display,s.display="block",(n=e.parentNode)&&e.offsetParent||(a=1,r=e.nextSibling,eE.appendChild(e)),u=KE(e),i?s.display=i:NE(e,"display"),a&&(r?n.insertBefore(e,r):n?n.appendChild(e):eE.removeChild(e))),t&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},ZE=function(e,t,n,r,i,a){var o,s,u,l=e._gsap,c=i||JE(e,!0),h=l.xOrigin||0,f=l.yOrigin||0,d=l.xOffset||0,p=l.yOffset||0,m=c[0],v=c[1],g=c[2],y=c[3],b=c[4],x=c[5],w=t.split(" "),_=parseFloat(w[0])||0,E=parseFloat(w[1])||0;n?c!==WE&&(s=m*y-v*g)&&(u=_*(-v/s)+E*(m/s)-(m*x-v*b)/s,_=_*(y/s)+E*(-g/s)+(g*x-y*b)/s,E=u):(_=(o=OE(e)).x+(~w[0].indexOf("%")?_/100*o.width:_),E=o.y+(~(w[1]||w[0]).indexOf("%")?E/100*o.height:E)),r||!1!==r&&l.smooth?(b=_-h,x=E-f,l.xOffset=d+(b*m+x*g)-b,l.yOffset=p+(b*v+x*y)-x):l.xOffset=l.yOffset=0,l.xOrigin=_,l.yOrigin=E,l.smooth=!!r,l.origin=t,l.originIsAbsolute=!!n,e.style[ME]="0px 0px",a&&(BE(a,l,"xOrigin",h,_),BE(a,l,"yOrigin",f,E),BE(a,l,"xOffset",d,l.xOffset),BE(a,l,"yOffset",p,l.yOffset)),e.setAttribute("data-svg-origin",_+" "+E)},QE=function(e,t){var n=e._gsap||new w_(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,a,o,s,u,l,c,h,f,d,p,m,v,g,y,b,x,w,_,E,S,T,M,k,A,I,L,R,C,P,O,D=e.style,N=n.scaleX<0,B="px",U="deg",F=AE(e,ME)||"0";return r=i=a=u=l=c=h=f=d=0,o=s=1,n.svg=!(!e.getCTM||!DE(e)),v=JE(e,n.svg),n.svg&&(M=(!n.uncache||"0px 0px"===F)&&!t&&e.getAttribute("data-svg-origin"),ZE(e,M||F,!!M||n.originIsAbsolute,!1!==n.smooth,v)),p=n.xOrigin||0,m=n.yOrigin||0,v!==WE&&(x=v[0],w=v[1],_=v[2],E=v[3],r=S=v[4],i=T=v[5],6===v.length?(o=Math.sqrt(x*x+w*w),s=Math.sqrt(E*E+_*_),u=x||w?uE(w,x)*oE:0,(h=_||E?uE(_,E)*oE+u:0)&&(s*=Math.abs(Math.cos(h*sE))),n.svg&&(r-=p-(p*x+m*_),i-=m-(p*w+m*E))):(O=v[6],C=v[7],I=v[8],L=v[9],R=v[10],P=v[11],r=v[12],i=v[13],a=v[14],l=(g=uE(O,R))*oE,g&&(M=S*(y=Math.cos(-g))+I*(b=Math.sin(-g)),k=T*y+L*b,A=O*y+R*b,I=S*-b+I*y,L=T*-b+L*y,R=O*-b+R*y,P=C*-b+P*y,S=M,T=k,O=A),c=(g=uE(-_,R))*oE,g&&(y=Math.cos(-g),P=E*(b=Math.sin(-g))+P*y,x=M=x*y-I*b,w=k=w*y-L*b,_=A=_*y-R*b),u=(g=uE(w,x))*oE,g&&(M=x*(y=Math.cos(g))+w*(b=Math.sin(g)),k=S*y+T*b,w=w*y-x*b,T=T*y-S*b,x=M,S=k),l&&Math.abs(l)+Math.abs(u)>359.9&&(l=u=0,c=180-c),o=iw(Math.sqrt(x*x+w*w+_*_)),s=iw(Math.sqrt(T*T+O*O)),g=uE(S,T),h=Math.abs(g)>2e-4?g*oE:0,d=P?1/(P<0?-P:P):0),n.svg&&(M=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!YE(AE(e,TE)),M&&e.setAttribute("transform",M))),Math.abs(h)>90&&Math.abs(h)<270&&(N?(o*=-1,h+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),n.x=r-((n.xPercent=r&&(n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+B,n.y=i-((n.yPercent=i&&(n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+B,n.z=a+B,n.scaleX=iw(o),n.scaleY=iw(s),n.rotation=iw(u)+U,n.rotationX=iw(l)+U,n.rotationY=iw(c)+U,n.skewX=h+U,n.skewY=f+U,n.transformPerspective=d+B,(n.zOrigin=parseFloat(F.split(" ")[2])||0)&&(D[ME]=$E(F)),n.xOffset=n.yOffset=0,n.force3D=fx.force3D,n.renderTransform=n.svg?oS:iE?aS:tS,n.uncache=0,n},$E=function(e){return(e=e.split(" "))[0]+" "+e[1]},eS=function(e,t,n){var r=Uw(t);return iw(parseFloat(t)+parseFloat(FE(e,"x",n+"px",r)))+r},tS=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,aS(e,t)},nS="0deg",rS="0px",iS=") ",aS=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,a=n.x,o=n.y,s=n.z,u=n.rotation,l=n.rotationY,c=n.rotationX,h=n.skewX,f=n.skewY,d=n.scaleX,p=n.scaleY,m=n.transformPerspective,v=n.force3D,g=n.target,y=n.zOrigin,b="",x="auto"===v&&e&&1!==e||!0===v;if(y&&(c!==nS||l!==nS)){var w,_=parseFloat(l)*sE,E=Math.sin(_),S=Math.cos(_);_=parseFloat(c)*sE,w=Math.cos(_),a=eS(g,a,E*w*-y),o=eS(g,o,-Math.sin(_)*-y),s=eS(g,s,S*w*-y+y)}m!==rS&&(b+="perspective("+m+iS),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(x||a!==rS||o!==rS||s!==rS)&&(b+=s!==rS||x?"translate3d("+a+", "+o+", "+s+") ":"translate("+a+", "+o+iS),u!==nS&&(b+="rotate("+u+iS),l!==nS&&(b+="rotateY("+l+iS),c!==nS&&(b+="rotateX("+c+iS),h===nS&&f===nS||(b+="skew("+h+", "+f+iS),1===d&&1===p||(b+="scale("+d+", "+p+iS),g.style[TE]=b||"translate(0, 0)"},oS=function(e,t){var n,r,i,a,o,s=t||this,u=s.xPercent,l=s.yPercent,c=s.x,h=s.y,f=s.rotation,d=s.skewX,p=s.skewY,m=s.scaleX,v=s.scaleY,g=s.target,y=s.xOrigin,b=s.yOrigin,x=s.xOffset,w=s.yOffset,_=s.forceCSS,E=parseFloat(c),S=parseFloat(h);f=parseFloat(f),d=parseFloat(d),(p=parseFloat(p))&&(d+=p=parseFloat(p),f+=p),f||d?(f*=sE,d*=sE,n=Math.cos(f)*m,r=Math.sin(f)*m,i=Math.sin(f-d)*-v,a=Math.cos(f-d)*v,d&&(p*=sE,o=Math.tan(d-p),i*=o=Math.sqrt(1+o*o),a*=o,p&&(o=Math.tan(p),n*=o=Math.sqrt(1+o*o),r*=o)),n=iw(n),r=iw(r),i=iw(i),a=iw(a)):(n=m,a=v,r=i=0),(E&&!~(c+"").indexOf("px")||S&&!~(h+"").indexOf("px"))&&(E=FE(g,"x",c,"px"),S=FE(g,"y",h,"px")),(y||b||x||w)&&(E=iw(E+y-(y*n+b*i)+x),S=iw(S+b-(y*r+b*a)+w)),(u||l)&&(o=g.getBBox(),E=iw(E+u/100*o.width),S=iw(S+l/100*o.height)),o="matrix("+n+","+r+","+i+","+a+","+E+","+S+")",g.setAttribute("transform",o),_&&(g.style[TE]=o)},sS=function(e,t,n,r,i,a){var o,s,u=360,l=_x(i),c=parseFloat(i)*(l&&~i.indexOf("rad")?oE:1),h=a?c*a:c-r,f=r+h+"deg";return l&&("short"===(o=i.split("_")[1])&&(h%=u)!=h%180&&(h+=h<0?u:-360),"cw"===o&&h<0?h=(h+36e9)%u-~~(h/u)*u:"ccw"===o&&h>0&&(h=(h-36e9)%u-~~(h/u)*u)),e._pt=s=new W_(e._pt,t,n,r,h,pE),s.e=f,s.u="deg",e._props.push(n),s},uS=function(e,t){for(var n in t)e[n]=t[n];return e},lS=function(e,t,n){var r,i,a,o,s,u,l,c=uS({},n._gsap),h=n.style;for(i in c.svg?(a=n.getAttribute("transform"),n.setAttribute("transform",""),h[TE]=t,r=QE(n,1),NE(n,TE),n.setAttribute("transform",a)):(a=getComputedStyle(n)[TE],h[TE]=t,r=QE(n,1),h[TE]=a),aE)(a=c[i])!==(o=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=Uw(a)!==(l=Uw(o))?FE(n,i,a,l):parseFloat(a),u=parseFloat(o),e._pt=new W_(e._pt,r,i,s,u-s,dE),e._pt.u=l||0,e._props.push(i));uS(r,c)};rw("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",i="Bottom",a="Left",o=(t<3?[n,r,i,a]:[n+a,n+r,i+r,i+a]).map((function(n){return t<2?e+n:"border"+n+e}));qE[t>1?"border"+e:e]=function(e,t,n,r,i){var a,s;if(arguments.length<4)return a=o.map((function(t){return zE(e,t,n)})),5===(s=a.join(" ")).split(a[0]).length?a[0]:s;a=(r+"").split(" "),s={},o.forEach((function(e,t){return s[e]=a[t]=a[t]||a[(t-1)/2|0]})),e.init(t,s,i)}}));var cS,hS,fS={name:"css",register:RE,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var a,o,s,u,l,c,h,f,d,p,m,v,g,y,b,x=this._props,w=e.style,_=n.vars.startAt;for(h in tE||RE(),t)if("autoRound"!==h&&(o=t[h],!Kx[h]||!k_(h,t,n,r,e,i)))if(l=Z_(o),c=qE[h],"function"===l&&(l=Z_(o=o.call(n,r,e,i))),"string"===l&&~o.indexOf("random(")&&(o=Yw(o)),c)c(this,e,h,o,n)&&(b=1);else if("--"===h.substr(0,2))a=(getComputedStyle(e).getPropertyValue(h)+"").trim(),o+="",a_.lastIndex=0,a_.test(a)||(f=Uw(a),d=Uw(o)),d?f!==d&&(a=FE(e,h,a,d)+d):f&&(o+=f),this.add(w,"setProperty",a,o,r,i,0,0,h),x.push(h);else if("undefined"!==l){if(_&&h in _?(a="function"==typeof _[h]?_[h].call(n,r,e,i):_[h],h in fx.units&&!Uw(a)&&(a+=fx.units[h]),"="===(a+"").charAt(1)&&(a=zE(e,h))):a=zE(e,h),u=parseFloat(a),(p="string"===l&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0)&&(o=o.substr(2)),s=parseFloat(o),h in fE&&("autoAlpha"===h&&(1===u&&"hidden"===zE(e,"visibility")&&s&&(u=0),BE(this,w,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==h&&"transform"!==h&&~(h=fE[h]).indexOf(",")&&(h=h.split(",")[0])),m=h in aE)if(v||((g=e._gsap).renderTransform&&!t.parseTransform||QE(e,t.parseTransform),y=!1!==t.smoothOrigin&&g.smooth,(v=this._pt=new W_(this._pt,w,TE,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===h)this._pt=new W_(this._pt,g,"scaleY",g.scaleY,(p?p*s:s-g.scaleY)||0),x.push("scaleY",h),h+="X";else{if("transformOrigin"===h){o=jE(o),g.svg?ZE(e,o,0,y,0,this):((d=parseFloat(o.split(" ")[2])||0)!==g.zOrigin&&BE(this,g,"zOrigin",g.zOrigin,d),BE(this,w,h,$E(a),$E(o)));continue}if("svgOrigin"===h){ZE(e,o,1,y,0,this);continue}if(h in XE){sS(this,g,h,u,o,p);continue}if("smoothOrigin"===h){BE(this,g,"smooth",g.smooth,o);continue}if("force3D"===h){g[h]=o;continue}if("transform"===h){lS(this,o,e);continue}}else h in w||(h=LE(h)||h);if(m||(s||0===s)&&(u||0===u)&&!hE.test(o)&&h in w)s||(s=0),(f=(a+"").substr((u+"").length))!==(d=Uw(o)||(h in fx.units?fx.units[h]:f))&&(u=FE(e,h,a,d)),this._pt=new W_(this._pt,m?g:w,h,u,p?p*s:s-u,m||"px"!==d&&"zIndex"!==h||!1===t.autoRound?dE:vE),this._pt.u=d||0,f!==d&&(this._pt.b=a,this._pt.r=mE);else if(h in w)HE.call(this,e,h,a,o);else{if(!(h in e)){Gx(h,o);continue}this.add(e,h,a||e[h],o,r,i)}x.push(h)}b&&q_(this)},get:zE,aliases:fE,getSetter:function(e,t,n){var r=fE[t];return r&&r.indexOf(",")<0&&(t=r),t in aE&&t!==ME&&(e._gsap.x||zE(e,"x"))?n&&rE===n?"scale"===t?_E:wE:(rE=n||{})&&("scale"===t?EE:SE):e.style&&!Tx(e.style[t])?bE:~t.indexOf("-")?xE:B_(e,t)},core:{_removeProperty:NE,_getMatrix:JE}};J_.utils.checkPrefix=LE,hS=rw("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(cS="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){aE[e]=1})),rw(cS,(function(e){fx.units[e]="deg",XE[e]=1})),fE[hS[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+cS,rw("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");fE[t[1]]=hS[t[0]]})),rw("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){fx.units[e]="px"})),J_.registerPlugin(fS);var dS=J_.registerPlugin(fS)||J_,pS=(dS.core.Tween,0),mS=1,vS=2,gS=2,yS=1.25,bS=1,xS=32,wS=65535,_S=Math.pow(2,-24),ES=Symbol("SKIP_GENERATION");function SS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function TS(e){return function(e){return e.index?e.index.count:e.attributes.position.count}(e)/3}function MS(e){var t=TS(e),n=e.drawRange,r=n.start/3,i=(n.start+n.count)/3,a=Math.max(0,r),o=Math.min(t,i)-a;return[{offset:Math.floor(a),count:Math.floor(o)}]}function kS(e){if(!e.groups||!e.groups.length)return MS(e);var t,n=[],r=new Set,i=e.drawRange,a=i.start/3,o=(i.start+i.count)/3,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return SS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SS(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(e.groups);try{for(s.s();!(t=s.n()).done;){var u=t.value,l=u.start/3,c=(u.start+u.count)/3;r.add(Math.max(a,l)),r.add(Math.min(o,c))}}catch(e){s.e(e)}finally{s.f()}for(var h=Array.from(r.values()).sort((function(e,t){return e-t})),f=0;f<h.length-1;f++){var d=h[f],p=h[f+1];n.push({offset:Math.floor(d),count:Math.floor(p-d)})}return n}function AS(e,t,n,r,i){for(var a=1/0,o=1/0,s=1/0,u=-1/0,l=-1/0,c=-1/0,h=1/0,f=1/0,d=1/0,p=-1/0,m=-1/0,v=-1/0,g=6*t,y=6*(t+n);g<y;g+=6){var b=e[g+0],x=e[g+1],w=b-x,_=b+x;w<a&&(a=w),_>u&&(u=_),b<h&&(h=b),b>p&&(p=b);var E=e[g+2],S=e[g+3],T=E-S,M=E+S;T<o&&(o=T),M>l&&(l=M),E<f&&(f=E),E>m&&(m=E);var k=e[g+4],A=e[g+5],I=k-A,L=k+A;I<s&&(s=I),L>c&&(c=L),k<d&&(d=k),k>v&&(v=k)}r[0]=a,r[1]=o,r[2]=s,r[3]=u,r[4]=l,r[5]=c,i[0]=h,i[1]=f,i[2]=d,i[3]=p,i[4]=m,i[5]=v}function IS(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function LS(e){for(var t=-1,n=-1/0,r=0;r<3;r++){var i=e[r+3]-e[r];i>n&&(n=i,t=r)}return t}function RS(e,t){t.set(e)}function CS(e,t,n){for(var r,i,a=0;a<3;a++){var o=a+3;r=e[a],i=t[a],n[a]=r<i?r:i,r=e[o],i=t[o],n[o]=r>i?r:i}}function PS(e,t,n){for(var r=0;r<3;r++){var i=t[e+2*r],a=t[e+2*r+1],o=i-a,s=i+a;o<n[r]&&(n[r]=o),s>n[r+3]&&(n[r+3]=s)}}function OS(e){var t=e[3]-e[0],n=e[4]-e[1],r=e[5]-e[2];return 2*(t*n+n*r+r*t)}function DS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var NS=32,BS=function(e,t){return e.candidate-t.candidate},US=new Array(NS).fill().map((function(){return{count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0}})),FS=new Float32Array(6);function zS(e){return zS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zS(e)}function HS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jS(r.key),r)}}function GS(e,t,n){return t&&HS(e.prototype,t),n&&HS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jS(e){var t=function(e,t){if("object"!=zS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=zS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zS(t)?t:String(t)}var VS,qS,WS,XS,YS=GS((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.boundingData=new Float32Array(6)}));function KS(e,t,n,r,i,a){for(var o=r,s=r+i-1,u=a.pos,l=2*a.axis;;){for(;o<=s&&n[6*o+l]<u;)o++;for(;o<=s&&n[6*s+l]>=u;)s--;if(!(o<s))return o;for(var c=0;c<3;c++){var h=t[3*o+c];t[3*o+c]=t[3*s+c],t[3*s+c]=h}for(var f=0;f<6;f++){var d=n[6*o+f];n[6*o+f]=n[6*s+f],n[6*s+f]=d}o++,s--}}function JS(e,t,n,r,i,a){for(var o=r,s=r+i-1,u=a.pos,l=2*a.axis;;){for(;o<=s&&n[6*o+l]<u;)o++;for(;o<=s&&n[6*s+l]>=u;)s--;if(!(o<s))return o;var c=e[o];e[o]=e[s],e[s]=c;for(var h=0;h<6;h++){var f=n[6*o+h];n[6*o+h]=n[6*s+h],n[6*s+h]=f}o++,s--}}function ZS(e,t){return 65535===t[e+15]}function QS(e,t){return t[e+6]}function $S(e,t){return t[e+14]}function eT(e){return e+8}function tT(e,t){return t[e+6]}function nT(e,t){return t[e+7]}var rT=Math.pow(2,32);function iT(e){return e.count?1:1+iT(e.left)+iT(e.right)}function aT(e,t,n){return VS=new Float32Array(n),qS=new Uint32Array(n),WS=new Uint16Array(n),XS=new Uint8Array(n),oT(e,t)}function oT(e,t){for(var n=e/4,r=e/2,i=!!t.count,a=t.boundingData,o=0;o<6;o++)VS[n+o]=a[o];if(i){if(t.buffer){var s=t.buffer;XS.set(new Uint8Array(s),e);for(var u=e,l=e+s.byteLength;u<l;u+=xS)ZS(u/2,WS)||(qS[u/4+6]+=n);return e+s.byteLength}var c=t.offset,h=t.count;return qS[n+6]=c,WS[r+14]=h,WS[r+15]=wS,e+xS}var f,d=t.left,p=t.right,m=t.splitAxis;if((f=oT(e+xS,d))/4>rT)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return qS[n+6]=f/4,f=oT(f,p),qS[n+7]=m,f}function sT(e,t){var n=e.geometry;t.indirect&&(e._indirectBuffer=function(e,t){for(var n=(e.index?e.index.count:e.attributes.position.count)/3,r=n>Math.pow(2,16),i=r?4:2,a=t?new SharedArrayBuffer(n*i):new ArrayBuffer(n*i),o=r?new Uint32Array(a):new Uint16Array(a),s=0,u=o.length;s<u;s++)o[s]=s;return o}(n,t.useSharedArrayBuffer),function(e){if(0===e.groups.length)return!1;var t=TS(e),n=kS(e).sort((function(e,t){return e.offset-t.offset})),r=n[n.length-1];r.count=Math.min(t-r.offset,r.count);var i=0;return n.forEach((function(e){var t=e.count;return i+=t})),t!==i}(n)&&!t.verbose&&console.warn('MeshBVH: Provided geometry contains groups that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),e._indirectBuffer||function(e,t){if(!e.index){var n=e.attributes.position.count,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ArrayBuffer;return e>65535?new Uint32Array(new t(4*e)):new Uint16Array(new t(2*e))}(n,t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer);e.setIndex(new Qu(r,1));for(var i=0;i<n;i++)r[i]=i}}(n,t);var r=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,i=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=e.attributes.position,o=e.index?e.index.array:null,s=TS(e),u=a.normalized;null===n?(t=new Float32Array(6*s*4),r=0,i=s):(t=n,r=r||0,i=i||s);var l=a.array,c=a.offset||0,h=3;a.isInterleavedBufferAttribute&&(h=a.data.stride);for(var f=["getX","getY","getZ"],d=r;d<r+i;d++){var p=3*d,m=6*d,v=p+0,g=p+1,y=p+2;o&&(v=o[v],g=o[g],y=o[y]),u||(v=v*h+c,g=g*h+c,y=y*h+c);for(var b=0;b<3;b++){var x=void 0,w=void 0,_=void 0;u?(x=a[f[b]](v),w=a[f[b]](g),_=a[f[b]](y)):(x=l[v+b],w=l[g+b],_=l[y+b]);var E=x;w<E&&(E=w),_<E&&(E=_);var S=x;w>S&&(S=w),_>S&&(S=_);var T=(S-E)/2,M=2*b;t[m+M+0]=E+T,t[m+M+1]=T+(Math.abs(E)+T)*_S}}return t}(n),a=t.indirect?MS(n):kS(n);e._roots=a.map((function(n){var a=function(e,t,n,r,i){var a=i.maxDepth,o=i.verbose,s=i.maxLeafTris,u=i.strategy,l=i.onProgress,c=i.indirect,h=e._indirectBuffer,f=e.geometry,d=f.index?f.index.array:null,p=c?JS:KS,m=TS(f),v=new Float32Array(6),g=!1,y=new YS;return AS(t,n,r,y.boundingData,v),function e(n,r,i){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!g&&c>=a&&(g=!0,o&&(console.warn("MeshBVH: Max depth of ".concat(a," reached when generating BVH. Consider increasing maxDepth.")),console.warn(f))),i<=s||c>=a)return b(r+i),n.offset=r,n.count=i,n;var m=function(e,t,n,r,i,a){var o,s=-1,u=0;if(a===pS)-1!==(s=LS(t))&&(u=(t[s]+t[s+3])/2);else if(a===mS)-1!==(s=LS(e))&&(u=function(e,t,n,r){for(var i=0,a=t,o=t+n;a<o;a++)i+=e[6*a+2*r];return i/n}(n,r,i,s));else if(a===vS)for(var l=OS(e),c=yS*i,h=6*r,f=6*(r+i),d=0;d<3;d++){var p=t[d],m=(t[d+3]-p)/NS;if(i<NS/4){var v=function(e){if(Array.isArray(e))return DS(e)}(o=US)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return DS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DS(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();v.length=i;for(var g=0,y=h;y<f;y+=6,g++){var b=v[g];b.candidate=n[y+2*d],b.count=0;for(var x=b.bounds,w=b.leftCacheBounds,_=b.rightCacheBounds,E=0;E<3;E++)_[E]=1/0,_[E+3]=-1/0,w[E]=1/0,w[E+3]=-1/0,x[E]=1/0,x[E+3]=-1/0;PS(y,n,x)}v.sort(BS);for(var S=i,T=0;T<S;T++)for(var M=v[T];T+1<S&&v[T+1].candidate===M.candidate;)v.splice(T+1,1),S--;for(var k=h;k<f;k+=6)for(var A=n[k+2*d],I=0;I<S;I++){var L=v[I];A>=L.candidate?PS(k,n,L.rightCacheBounds):(PS(k,n,L.leftCacheBounds),L.count++)}for(var R=0;R<S;R++){var C=v[R],P=C.count,O=i-C.count,D=C.leftCacheBounds,N=C.rightCacheBounds,B=0;0!==P&&(B=OS(D)/l);var U=0;0!==O&&(U=OS(N)/l);var F=bS+yS*(B*P+U*O);F<c&&(s=d,c=F,u=C.candidate)}}else{for(var z=0;z<NS;z++){var H=US[z];H.count=0,H.candidate=p+m+z*m;for(var G=H.bounds,j=0;j<3;j++)G[j]=1/0,G[j+3]=-1/0}for(var V=h;V<f;V+=6){var q=~~((n[V+2*d]-p)/m);q>=NS&&(q=NS-1);var W=US[q];W.count++,PS(V,n,W.bounds)}var X=US[NS-1];RS(X.bounds,X.rightCacheBounds);for(var Y=NS-2;Y>=0;Y--){var K=US[Y],J=US[Y+1];CS(K.bounds,J.rightCacheBounds,K.rightCacheBounds)}for(var Z=0,Q=0;Q<NS-1;Q++){var $=US[Q],ee=$.count,te=$.bounds,ne=US[Q+1].rightCacheBounds;0!==ee&&(0===Z?RS(te,FS):CS(te,FS,FS));var re=0,ie=0;0!==(Z+=ee)&&(re=OS(FS)/l);var ae=i-Z;0!==ae&&(ie=OS(ne)/l);var oe=bS+yS*(re*Z+ie*ae);oe<c&&(s=d,c=oe,u=$.candidate)}}}else console.warn("MeshBVH: Invalid build strategy value ".concat(a," used."));return{axis:s,pos:u}}(n.boundingData,l,t,r,i,u);if(-1===m.axis)return b(r+i),n.offset=r,n.count=i,n;var y=p(h,d,t,r,i,m);if(y===r||y===r+i)b(r+i),n.offset=r,n.count=i;else{n.splitAxis=m.axis;var x=new YS,w=r,_=y-r;n.left=x,AS(t,w,_,x.boundingData,v),e(x,w,_,v,c+1);var E=new YS,S=y,T=i-_;n.right=E,AS(t,S,T,E.boundingData,v),e(E,S,T,v,c+1)}return n}(y,n,r,v),y;function b(e){l&&l(e/m)}}(e,i,n.offset,n.count,t),o=iT(a),s=new r(xS*o);return aT(0,a,s),s}))}function uT(e){return uT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uT(e)}function lT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cT(r.key),r)}}function cT(e){var t=function(e,t){if("object"!=uT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=uT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==uT(t)?t:String(t)}var hT,fT=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.min=1/0,this.max=-1/0}var t,n;return t=e,n=[{key:"setFromPointsField",value:function(e,t){for(var n=1/0,r=-1/0,i=0,a=e.length;i<a;i++){var o=e[i][t];n=o<n?o:n,r=o>r?o:r}this.min=n,this.max=r}},{key:"setFromPoints",value:function(e,t){for(var n=1/0,r=-1/0,i=0,a=t.length;i<a;i++){var o=t[i],s=e.dot(o);n=s<n?s:n,r=s>r?s:r}this.min=n,this.max=r}},{key:"isSeparated",value:function(e){return this.min>e.max||e.min>this.max}}],n&&lT(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();fT.prototype.setFromBox=(hT=new _s,function(e,t){for(var n=t.min,r=t.max,i=1/0,a=-1/0,o=0;o<=1;o++)for(var s=0;s<=1;s++)for(var u=0;u<=1;u++){hT.x=n.x*o+r.x*(1-o),hT.y=n.y*s+r.y*(1-s),hT.z=n.z*u+r.z*(1-u);var l=e.dot(hT);i=Math.min(l,i),a=Math.max(l,a)}this.min=i,this.max=a}),new fT;var dT,pT,mT,vT,gT,yT,bT,xT=(dT=new _s,pT=new _s,mT=new _s,function(e,t,n){var r=e.start,i=dT,a=t.start,o=pT;mT.subVectors(r,a),dT.subVectors(e.end,e.start),pT.subVectors(t.end,t.start);var s,u,l=mT.dot(o),c=o.dot(i),h=o.dot(o),f=mT.dot(i),d=i.dot(i)*h-c*c;u=(l+(s=0!==d?(l*c-f*h)/d:0)*c)/h,n.x=s,n.y=u}),wT=function(){var e=new Wo,t=new _s,n=new _s;return function(r,i,a,o){xT(r,i,e);var s,u,l=e.x,c=e.y;if(l>=0&&l<=1&&c>=0&&c<=1)return r.at(l,a),void i.at(c,o);if(l>=0&&l<=1)return c<0?i.at(0,o):i.at(1,o),void r.closestPointToPoint(o,!0,a);if(c>=0&&c<=1)return l<0?r.at(0,a):r.at(1,a),void i.closestPointToPoint(a,!0,o);s=l<0?r.start:r.end,u=c<0?i.start:i.end;var h=t,f=n;return r.closestPointToPoint(u,!0,t),i.closestPointToPoint(s,!0,n),h.distanceToSquared(u)<=f.distanceToSquared(s)?(a.copy(h),void o.copy(u)):(a.copy(s),void o.copy(f))}}(),_T=(vT=new _s,gT=new _s,yT=new Zl,bT=new Cg,function(e,t){var n=e.radius,r=e.center,i=t.a,a=t.b,o=t.c;if(bT.start=i,bT.end=a,bT.closestPointToPoint(r,!0,vT).distanceTo(r)<=n)return!0;if(bT.start=i,bT.end=o,bT.closestPointToPoint(r,!0,vT).distanceTo(r)<=n)return!0;if(bT.start=a,bT.end=o,bT.closestPointToPoint(r,!0,vT).distanceTo(r)<=n)return!0;var s=t.getPlane(yT);if(Math.abs(s.distanceToPoint(r))<=n){var u=s.projectPoint(r,gT);if(t.containsPoint(u))return!0}return!1});function ET(e){return ET="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ET(e)}function ST(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,TT(r.key),r)}}function TT(e){var t=function(e,t){if("object"!=ET(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ET(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ET(t)?t:String(t)}function MT(e,t,n){return t=AT(t),function(e,t){if(t&&("object"===ET(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kT()?Reflect.construct(t,n||[],AT(e).constructor):t.apply(e,n))}function kT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kT=function(){return!!e})()}function AT(e){return AT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},AT(e)}function IT(e,t){return IT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},IT(e,t)}function LT(e){return Math.abs(e)<1e-15}var RT,CT,PT,OT,DT=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=MT(this,t,[].concat(r))).isExtendedTriangle=!0,e.satAxes=new Array(4).fill().map((function(){return new _s})),e.satBounds=new Array(4).fill().map((function(){return new fT})),e.points=[e.a,e.b,e.c],e.sphere=new js,e.plane=new Zl,e.needsUpdate=!0,e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IT(e,t)}(t,e),n=t,r=[{key:"intersectsSphere",value:function(e){return _T(e,this)}},{key:"update",value:function(){var e=this.a,t=this.b,n=this.c,r=this.points,i=this.satAxes,a=this.satBounds,o=i[0],s=a[0];this.getNormal(o),s.setFromPoints(o,r);var u=i[1],l=a[1];u.subVectors(e,t),l.setFromPoints(u,r);var c=i[2],h=a[2];c.subVectors(t,n),h.setFromPoints(c,r);var f=i[3],d=a[3];f.subVectors(n,e),d.setFromPoints(f,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}}],r&&ST(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(Du);function NT(e){return NT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NT(e)}function BT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,UT(r.key),r)}}function UT(e){var t=function(e,t){if("object"!=NT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=NT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==NT(t)?t:String(t)}DT.prototype.closestPointToSegment=(RT=new _s,CT=new _s,PT=new Cg,function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.start,a=e.end,o=this.points,s=1/0,u=0;u<3;u++){var l=(u+1)%3;PT.start.copy(o[u]),PT.end.copy(o[l]),wT(PT,e,RT,CT),(t=RT.distanceToSquared(CT))<s&&(s=t,n&&n.copy(RT),r&&r.copy(CT))}return this.closestPointToPoint(i,RT),(t=i.distanceToSquared(RT))<s&&(s=t,n&&n.copy(RT),r&&r.copy(i)),this.closestPointToPoint(a,RT),(t=a.distanceToSquared(RT))<s&&(s=t,n&&n.copy(RT),r&&r.copy(a)),Math.sqrt(s)}),DT.prototype.intersectsTriangle=function(){var e=new DT,t=new Array(3),n=new Array(3),r=new fT,i=new fT,a=new _s,o=new _s,s=new _s,u=new _s,l=new _s,c=new Cg,h=new Cg,f=new Cg,d=new _s;function p(e,t,n){for(var r=e.points,i=0,a=-1,s=0;s<3;s++){var u=c.start,l=c.end;u.copy(r[s]),l.copy(r[(s+1)%3]),c.delta(o);var h=LT(t.distanceToPoint(u));if(LT(t.normal.dot(o))&&h){n.copy(c),i=2;break}var f=t.intersectLine(c,d);if(!f&&h&&d.copy(u),(f||h)&&!LT(d.distanceTo(l))){if(i<=1)(1===i?n.start:n.end).copy(d),h&&(a=i);else if(i>=2){(1===a?n.start:n.end).copy(d),i=2;break}if(2==++i&&-1===a)break}}return i}return function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(e.copy(o),e.update(),o=e);var m=this.plane,v=o.plane;if(Math.abs(m.normal.dot(v.normal))>1-1e-10){var g=this.satBounds,y=this.satAxes;n[0]=o.a,n[1]=o.b,n[2]=o.c;for(var b=0;b<4;b++){var x=g[b],w=y[b];if(r.setFromPoints(w,n),x.isSeparated(r))return!1}var _=o.satBounds,E=o.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(var S=0;S<4;S++){var T=_[S],M=E[S];if(r.setFromPoints(M,t),T.isSeparated(r))return!1}for(var k=0;k<4;k++)for(var A=y[k],I=0;I<4;I++){var L=E[I];if(a.crossVectors(A,L),r.setFromPoints(a,t),i.setFromPoints(a,n),r.isSeparated(i))return!1}return c&&(d||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),c.start.set(0,0,0),c.end.set(0,0,0)),!0}var R=p(this,v,h);if(1===R&&o.containsPoint(h.end))return c&&(c.start.copy(h.end),c.end.copy(h.end)),!0;if(2!==R)return!1;var C=p(o,m,f);if(1===C&&this.containsPoint(f.end))return c&&(c.start.copy(f.end),c.end.copy(f.end)),!0;if(2!==C)return!1;if(h.delta(s),f.delta(u),s.dot(u)<0){var P=f.start;f.start=f.end,f.end=P}var O=h.start.dot(s),D=h.end.dot(s),N=f.start.dot(s),B=f.end.dot(s);return(O===B||N===D||D<N!=O<B)&&(c&&(l.subVectors(h.start,f.start),l.dot(s)>0?c.start.copy(h.start):c.start.copy(f.start),l.subVectors(h.end,f.end),l.dot(s)<0?c.end.copy(h.end):c.end.copy(f.end)),!0)}}(),DT.prototype.distanceToPoint=(OT=new _s,function(e){return this.closestPointToPoint(e,OT),e.distanceTo(OT)}),DT.prototype.distanceToTriangle=function(){var e=new _s,t=new _s,n=["a","b","c"],r=new Cg,i=new Cg;return function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=o||s?r:null;if(this.intersectsTriangle(a,u))return(o||s)&&(o&&u.getCenter(o),s&&u.getCenter(s)),0;for(var l=1/0,c=0;c<3;c++){var h=void 0,f=n[c],d=a[f];this.closestPointToPoint(d,e),(h=d.distanceToSquared(e))<l&&(l=h,o&&o.copy(e),s&&s.copy(d));var p=this[f];a.closestPointToPoint(p,e),(h=p.distanceToSquared(e))<l&&(l=h,o&&o.copy(p),s&&s.copy(e))}for(var m=0;m<3;m++){var v=n[m],g=n[(m+1)%3];r.set(this[v],this[g]);for(var y=0;y<3;y++){var b=n[y],x=n[(y+1)%3];i.set(a[b],a[x]),wT(r,i,e,t);var w=e.distanceToSquared(t);w<l&&(l=w,o&&o.copy(e),s&&s.copy(t))}}return Math.sqrt(l)}}();var FT,zT,HT,GT,jT,VT,qT=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isOrientedBox=!0,this.min=new _s,this.max=new _s,this.matrix=new Qs,this.invMatrix=new Qs,this.points=new Array(8).fill().map((function(){return new _s})),this.satAxes=new Array(3).fill().map((function(){return new _s})),this.satBounds=new Array(3).fill().map((function(){return new fT})),this.alignedSatBounds=new Array(3).fill().map((function(){return new fT})),this.needsUpdate=!1,t&&this.min.copy(t),n&&this.max.copy(n),r&&this.matrix.copy(r)}var t,n;return t=e,(n=[{key:"set",value:function(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}},{key:"copy",value:function(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}])&&BT(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function WT(e){return WT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WT(e)}function XT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YT(r.key),r)}}function YT(e){var t=function(e,t){if("object"!=WT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=WT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==WT(t)?t:String(t)}qT.prototype.update=function(){for(var e=this.matrix,t=this.min,n=this.max,r=this.points,i=0;i<=1;i++)for(var a=0;a<=1;a++)for(var o=0;o<=1;o++){var s=r[1*i|2*a|4*o];s.x=i?n.x:t.x,s.y=a?n.y:t.y,s.z=o?n.z:t.z,s.applyMatrix4(e)}for(var u=this.satBounds,l=this.satAxes,c=r[0],h=0;h<3;h++){var f=l[h],d=u[h],p=r[1<<h];f.subVectors(c,p),d.setFromPoints(f,r)}var m=this.alignedSatBounds;m[0].setFromPointsField(r,"x"),m[1].setFromPointsField(r,"y"),m[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},qT.prototype.intersectsBox=(FT=new fT,function(e){this.needsUpdate&&this.update();var t=e.min,n=e.max,r=this.satBounds,i=this.satAxes,a=this.alignedSatBounds;if(FT.min=t.x,FT.max=n.x,a[0].isSeparated(FT))return!1;if(FT.min=t.y,FT.max=n.y,a[1].isSeparated(FT))return!1;if(FT.min=t.z,FT.max=n.z,a[2].isSeparated(FT))return!1;for(var o=0;o<3;o++){var s=i[o],u=r[o];if(FT.setFromBox(s,e),u.isSeparated(FT))return!1}return!0}),qT.prototype.intersectsTriangle=(zT=new DT,HT=new Array(3),GT=new fT,jT=new fT,VT=new _s,function(e){this.needsUpdate&&this.update(),e.isExtendedTriangle?e.needsUpdate&&e.update():(zT.copy(e),zT.update(),e=zT);var t=this.satBounds,n=this.satAxes;HT[0]=e.a,HT[1]=e.b,HT[2]=e.c;for(var r=0;r<3;r++){var i=t[r],a=n[r];if(GT.setFromPoints(a,HT),i.isSeparated(GT))return!1}for(var o=e.satBounds,s=e.satAxes,u=this.points,l=0;l<3;l++){var c=o[l],h=s[l];if(GT.setFromPoints(h,u),c.isSeparated(GT))return!1}for(var f=0;f<3;f++)for(var d=n[f],p=0;p<4;p++){var m=s[p];if(VT.crossVectors(d,m),GT.setFromPoints(VT,HT),jT.setFromPoints(VT,u),GT.isSeparated(jT))return!1}return!0}),qT.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},qT.prototype.distanceToPoint=function(){var e=new _s;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),qT.prototype.distanceToBox=function(){var e=["x","y","z"],t=new Array(12).fill().map((function(){return new Cg})),n=new Array(12).fill().map((function(){return new Cg})),r=new _s,i=new _s;return function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(s||u)&&(a.getCenter(i),this.closestPointToPoint(i,r),a.closestPointToPoint(r,i),s&&s.copy(r),u&&u.copy(i)),0;for(var l=o*o,c=a.min,h=a.max,f=this.points,d=1/0,p=0;p<8;p++){var m=f[p];i.copy(m).clamp(c,h);var v=m.distanceToSquared(i);if(v<d&&(d=v,s&&s.copy(m),u&&u.copy(i),v<l))return Math.sqrt(v)}for(var g=0,y=0;y<3;y++)for(var b=0;b<=1;b++)for(var x=0;x<=1;x++){var w=(y+1)%3,_=(y+2)%3,E=1<<y|b<<w|x<<_,S=f[b<<w|x<<_],T=f[E];t[g].set(S,T);var M=e[y],k=e[w],A=e[_],I=n[g],L=I.start,R=I.end;L[M]=c[M],L[k]=b?c[k]:h[k],L[A]=x?c[A]:h[k],R[M]=h[M],R[k]=b?c[k]:h[k],R[A]=x?c[A]:h[k],g++}for(var C=0;C<=1;C++)for(var P=0;P<=1;P++)for(var O=0;O<=1;O++){i.x=C?h.x:c.x,i.y=P?h.y:c.y,i.z=O?h.z:c.z,this.closestPointToPoint(i,r);var D=i.distanceToSquared(r);if(D<d&&(d=D,s&&s.copy(r),u&&u.copy(i),D<l))return Math.sqrt(D)}for(var N=0;N<12;N++)for(var B=t[N],U=0;U<12;U++){var F=n[U];wT(B,F,r,i);var z=r.distanceToSquared(i);if(z<d&&(d=z,s&&s.copy(r),u&&u.copy(i),z<l))return Math.sqrt(z)}return Math.sqrt(d)}}();var KT=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._getNewPrimitive=t,this._primitives=[]}var t,n;return t=e,(n=[{key:"getPrimitive",value:function(){var e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}},{key:"releasePrimitive",value:function(e){this._primitives.push(e)}}])&&XT(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function JT(e){return JT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JT(e)}function ZT(e,t,n){return t=$T(t),function(e,t){if(t&&("object"===JT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,QT()?Reflect.construct(t,n||[],$T(e).constructor):t.apply(e,n))}function QT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QT=function(){return!!e})()}function $T(e){return $T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$T(e)}function eM(e,t){return eM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},eM(e,t)}var tM=new(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ZT(this,t,[function(){return new DT}])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eM(e,t)}(t,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(KT));function nM(e){return nM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nM(e)}function rM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aM(r.key),r)}}function iM(e,t,n){return t&&rM(e.prototype,t),n&&rM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function aM(e){var t=function(e,t){if("object"!=nM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=nM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nM(t)?t:String(t)}var oM,sM,uM=new(iM((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.float32Array=null,this.uint16Array=null,this.uint32Array=null;var n=[],r=null;this.setBuffer=function(e){r&&n.push(r),r=e,t.float32Array=new Float32Array(e),t.uint16Array=new Uint16Array(e),t.uint32Array=new Uint32Array(e)},this.clearBuffer=function(){r=null,t.float32Array=null,t.uint16Array=null,t.uint32Array=null,0!==n.length&&t.setBuffer(n.pop())}}))),lM=[],cM=new KT((function(){return new Ts}));function hM(e,t,n,r,i,a){oM=cM.getPrimitive(),sM=cM.getPrimitive(),lM.push(oM,sM),uM.setBuffer(e._roots[t]);var o=fM(0,e.geometry,n,r,i,a);uM.clearBuffer(),cM.releasePrimitive(oM),cM.releasePrimitive(sM),lM.pop(),lM.pop();var s=lM.length;return s>0&&(sM=lM[s-1],oM=lM[s-2]),o}function fM(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=uM.float32Array,u=uM.uint16Array,l=uM.uint32Array,c=2*e;if(ZS(c,u)){var h=QS(e,l),f=$S(c,u);return IS(e,s,oM),r(h,f,!1,o,a+e,oM)}var d,p,m,v,g=function(e){for(var t=uM.uint16Array,n=uM.uint32Array,r=2*e;!ZS(r,t);)r=2*(e=eT(e));return QS(e,n)},y=function(e){for(var t=uM.uint16Array,n=uM.uint32Array,r=2*e;!ZS(r,t);)r=2*(e=tT(e,n));return QS(e,n)+$S(r,t)},b=eT(e),x=tT(e,l),w=b,_=x;if(i&&(v=sM,IS(w,s,m=oM),IS(_,s,v),d=i(m),(p=i(v))<d)){w=x,_=b;var E=d;d=p,p=E,m=v}m||IS(w,s,m=oM);var S,T=n(m,ZS(2*w,u),d,o+1,a+w);if(T===gS){var M=g(w);S=r(M,y(w)-M,!0,o+1,a+w,m)}else S=T&&fM(w,t,n,r,i,a,o+1);if(S)return!0;IS(_,s,v=sM);var k,A=n(v,ZS(2*_,u),p,o+1,a+_);if(A===gS){var I=g(_);k=r(I,y(_)-I,!0,o+1,a+_,v)}else k=A&&fM(_,t,n,r,i,a,o+1);return!!k}var dM=new _s,pM=new _s,mM=new _s,vM=new _s,gM=new _s,yM=new Wo,bM=new Wo,xM=new Wo,wM=new _s,_M=new _s,EM=new _s,SM=new _s;function TM(e,t,n,r,i){var a=3*r,o=a+0,s=a+1,u=a+2,l=e.index;e.index&&(o=l.getX(o),s=l.getX(s),u=l.getX(u));var c=e.attributes,h=function(e,t,n,r,i,a,o,s,u){mM.fromBufferAttribute(t,a),vM.fromBufferAttribute(t,o),gM.fromBufferAttribute(t,s);var l=function(e,t,n,r,i,a){return null===(a===kr?e.intersectTriangle(r,n,t,!0,i):e.intersectTriangle(t,n,r,a!==Ar,i))?null:{distance:e.origin.distanceTo(i),point:i.clone()}}(e,mM,vM,gM,SM,u);if(l){r&&(yM.fromBufferAttribute(r,a),bM.fromBufferAttribute(r,o),xM.fromBufferAttribute(r,s),l.uv=Du.getInterpolation(SM,mM,vM,gM,yM,bM,xM,new Wo)),i&&(yM.fromBufferAttribute(i,a),bM.fromBufferAttribute(i,o),xM.fromBufferAttribute(i,s),l.uv1=Du.getInterpolation(SM,mM,vM,gM,yM,bM,xM,new Wo)),n&&(wM.fromBufferAttribute(n,a),_M.fromBufferAttribute(n,o),EM.fromBufferAttribute(n,s),l.normal=Du.getInterpolation(SM,mM,vM,gM,wM,_M,EM,new _s),l.normal.dot(e.direction)>0&&l.normal.multiplyScalar(-1));var c={a,b:o,c:s,normal:new _s,materialIndex:0};Du.getNormal(mM,vM,gM,c.normal),l.face=c,l.faceIndex=a}return l}(n,c.position,c.normal,c.uv,c.uv1,o,s,u,t);return h?(h.faceIndex=r,i&&i.push(h),h):null}function MM(e,t,n,r){var i=e.a,a=e.b,o=e.c,s=t,u=t+1,l=t+2;n&&(s=n.getX(s),u=n.getX(u),l=n.getX(l)),i.x=r.getX(s),i.y=r.getY(s),i.z=r.getZ(s),a.x=r.getX(u),a.y=r.getY(u),a.z=r.getZ(u),o.x=r.getX(l),o.y=r.getY(l),o.z=r.getZ(l)}function kM(e,t,n,r,i,a,o){for(var s=n.geometry,u=s.index,l=s.attributes.position,c=e,h=t+e;c<h;c++){var f;if(MM(o,3*(f=c),u,l),o.needsUpdate=!0,r(o,f,i,a))return!0}return!1}function AM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&Array.isArray(t)&&(t=new Set(t));for(var n,r,i,a,o=e.geometry,s=o.index?o.index.array:null,u=o.attributes.position,l=0,c=e._roots,h=0,f=c.length;h<f;h++)n=c[h],r=new Uint32Array(n),i=new Uint16Array(n),a=new Float32Array(n),d(0,l),l+=n.byteLength;function d(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=2*e;if(i[l+15]===wS){for(var c=r[e+6],h=1/0,f=1/0,p=1/0,m=-1/0,v=-1/0,g=-1/0,y=3*c,b=3*(c+i[l+14]);y<b;y++){var x=s[y],w=u.getX(x),_=u.getY(x),E=u.getZ(x);w<h&&(h=w),w>m&&(m=w),_<f&&(f=_),_>v&&(v=_),E<p&&(p=E),E>g&&(g=E)}return(a[e+0]!==h||a[e+1]!==f||a[e+2]!==p||a[e+3]!==m||a[e+4]!==v||a[e+5]!==g)&&(a[e+0]=h,a[e+1]=f,a[e+2]=p,a[e+3]=m,a[e+4]=v,a[e+5]=g,!0)}var S=e+8,T=r[e+6],M=S+n,k=T+n,A=o,I=!1,L=!1;t?A||(I=t.has(M),L=t.has(k),A=!I&&!L):(I=!0,L=!0);var R=A||L,C=!1;(A||I)&&(C=d(S,n,A));var P=!1;R&&(P=d(T,n,A));var O=C||P;if(O)for(var D=0;D<3;D++){var N=S+D,B=T+D,U=a[N],F=a[N+3],z=a[B],H=a[B+3];a[e+D]=U<z?U:z,a[e+D+3]=F>H?F:H}return O}}var IM=new Ts;function LM(e,t,n,r){return IS(e,t,IM),n.intersectBox(IM,r)}var RM=new _s;function CM(e,t,n,r,i){uM.setBuffer(e._roots[t]),PM(0,e,n,r,i),uM.clearBuffer()}function PM(e,t,n,r,i){var a=uM.float32Array,o=uM.uint16Array,s=uM.uint32Array,u=2*e;if(ZS(u,o))!function(e,t,n,r,i,a){for(var o=e.geometry,s=(e._indirectBuffer,r),u=r+i;s<u;s++)TM(o,t,n,s,a)}(t,n,r,QS(e,s),$S(u,o),i);else{var l=eT(e);LM(l,a,r,RM)&&PM(l,t,n,r,i);var c=tT(e,s);LM(c,a,r,RM)&&PM(c,t,n,r,i)}}var OM=new _s,DM=["x","y","z"];function NM(e,t,n,r){uM.setBuffer(e._roots[t]);var i=BM(0,e,n,r);return uM.clearBuffer(),i}function BM(e,t,n,r){var i=uM.float32Array,a=uM.uint16Array,o=uM.uint32Array,s=2*e;if(ZS(s,a))return function(e,t,n,r,i){for(var a=e.geometry,o=(e._indirectBuffer,1/0),s=null,u=r,l=r+i;u<l;u++){var c;(c=TM(a,t,n,u))&&c.distance<o&&(s=c,o=c.distance)}return s}(t,n,r,QS(e,o),$S(s,a));var u,l,c=nT(e,o),h=DM[c],f=r.direction[h]>=0;f?(u=eT(e),l=tT(e,o)):(u=tT(e,o),l=eT(e));var d=LM(u,i,r,OM)?BM(u,t,n,r):null;if(d){var p=d.point[h];if(f?p<=i[l+c]:p>=i[l+c+3])return d}var m=LM(l,i,r,OM)?BM(l,t,n,r):null;return d&&m?d.distance<=m.distance?d:m:d||m||null}var UM=new Ts,FM=new DT,zM=new DT,HM=new Qs,GM=new qT,jM=new qT;function VM(e,t,n,r){uM.setBuffer(e._roots[t]);var i=qM(0,e,n,r);return uM.clearBuffer(),i}function qM(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=uM.float32Array,o=uM.uint16Array,s=uM.uint32Array,u=2*e;if(null===i&&(n.boundingBox||n.computeBoundingBox(),GM.set(n.boundingBox.min,n.boundingBox.max,r),i=GM),!ZS(u,o)){var l=e+8,c=s[e+6];return IS(l,a,UM),!(!i.intersectsBox(UM)||!qM(l,t,n,r,i))||(IS(c,a,UM),!(!i.intersectsBox(UM)||!qM(c,t,n,r,i)))}var h=t.geometry,f=h.index,d=h.attributes.position,p=n.index,m=n.attributes.position,v=QS(e,s),g=$S(u,o);if(HM.copy(r).invert(),n.boundsTree){IS(e,a,jM),jM.matrix.copy(HM),jM.needsUpdate=!0;var y=n.boundsTree.shapecast({intersectsBounds:function(e){return jM.intersectsBox(e)},intersectsTriangle:function(e){e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(var t=3*v,n=3*(g+v);t<n;t+=3)if(MM(zM,t,f,d),zM.needsUpdate=!0,e.intersectsTriangle(zM))return!0;return!1}});return y}for(var b=3*v,x=3*(g+v);b<x;b+=3){MM(FM,b,f,d),FM.a.applyMatrix4(HM),FM.b.applyMatrix4(HM),FM.c.applyMatrix4(HM),FM.needsUpdate=!0;for(var w=0,_=p.count;w<_;w+=3)if(MM(zM,w,p,m),zM.needsUpdate=!0,FM.intersectsTriangle(zM))return!0}}var WM=new Qs,XM=new qT,YM=new qT,KM=new _s,JM=new _s,ZM=new _s,QM=new _s;function $M(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0;t.boundingBox||t.computeBoundingBox(),XM.set(t.boundingBox.min,t.boundingBox.max,n),XM.needsUpdate=!0;var s=e.geometry,u=s.attributes.position,l=s.index,c=t.attributes.position,h=t.index,f=tM.getPrimitive(),d=tM.getPrimitive(),p=KM,m=JM,v=null,g=null;i&&(v=ZM,g=QM);var y=1/0,b=null,x=null;return WM.copy(n).invert(),YM.matrix.copy(WM),e.shapecast({boundsTraverseOrder:function(e){return XM.distanceToBox(e)},intersectsBounds:function(e,t,n){return n<y&&n<o&&(t&&(YM.min.copy(e.min),YM.max.copy(e.max),YM.needsUpdate=!0),!0)},intersectsRange:function(e,r){if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:function(e){return YM.distanceToBox(e)},intersectsBounds:function(e,t,n){return n<y&&n<o},intersectsRange:function(t,i){for(var o=t,s=t+i;o<s;o++){MM(d,3*o,h,c),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(var w=e,_=e+r;w<_;w++){MM(f,3*w,l,u),f.needsUpdate=!0;var E=f.distanceToTriangle(d,p,v);if(E<y&&(m.copy(p),g&&g.copy(v),y=E,b=w,x=o),E<a)return!0}}}});for(var i=0,s=TS(t);i<s;i++){MM(d,3*i,h,c),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(var w=e,_=e+r;w<_;w++){MM(f,3*w,l,u),f.needsUpdate=!0;var E=f.distanceToTriangle(d,p,v);if(E<y&&(m.copy(p),g&&g.copy(v),y=E,b=w,x=i),E<a)return!0}}}}),tM.releasePrimitive(f),tM.releasePrimitive(d),y===1/0?null:(r.point?r.point.copy(m):r.point=m.clone(),r.distance=y,r.faceIndex=b,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(WM),m.applyMatrix4(WM),i.distance=m.sub(i.point).length(),i.faceIndex=x),r)}function ek(e,t,n,r,i,a,o){for(var s=n.geometry,u=s.index,l=s.attributes.position,c=e,h=t+e;c<h;c++){var f;if(MM(o,3*(f=n.resolveTriangleIndex(c)),u,l),o.needsUpdate=!0,r(o,f,i,a))return!0}return!1}function tk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&Array.isArray(t)&&(t=new Set(t));for(var n,r,i,a,o=e.geometry,s=o.index?o.index.array:null,u=o.attributes.position,l=0,c=e._roots,h=0,f=c.length;h<f;h++)n=c[h],r=new Uint32Array(n),i=new Uint16Array(n),a=new Float32Array(n),d(0,l),l+=n.byteLength;function d(n,o){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=2*n;if(i[c+15]===wS){for(var h=r[n+6],f=1/0,p=1/0,m=1/0,v=-1/0,g=-1/0,y=-1/0,b=h,x=h+i[c+14];b<x;b++)for(var w=3*e.resolveTriangleIndex(b),_=0;_<3;_++){var E=w+_;E=s?s[E]:E;var S=u.getX(E),T=u.getY(E),M=u.getZ(E);S<f&&(f=S),S>v&&(v=S),T<p&&(p=T),T>g&&(g=T),M<m&&(m=M),M>y&&(y=M)}return(a[n+0]!==f||a[n+1]!==p||a[n+2]!==m||a[n+3]!==v||a[n+4]!==g||a[n+5]!==y)&&(a[n+0]=f,a[n+1]=p,a[n+2]=m,a[n+3]=v,a[n+4]=g,a[n+5]=y,!0)}var k=n+8,A=r[n+6],I=k+o,L=A+o,R=l,C=!1,P=!1;t?R||(C=t.has(I),P=t.has(L),R=!C&&!P):(C=!0,P=!0);var O=R||P,D=!1;(R||C)&&(D=d(k,o,R));var N=!1;O&&(N=d(A,o,R));var B=D||N;if(B)for(var U=0;U<3;U++){var F=k+U,z=A+U,H=a[F],G=a[F+3],j=a[z],V=a[z+3];a[n+U]=H<j?H:j,a[n+U+3]=G>V?G:V}return B}}var nk=new _s;function rk(e,t,n,r,i){uM.setBuffer(e._roots[t]),ik(0,e,n,r,i),uM.clearBuffer()}function ik(e,t,n,r,i){var a=uM.float32Array,o=uM.uint16Array,s=uM.uint32Array,u=2*e;if(ZS(u,o))!function(e,t,n,r,i,a){for(var o=e.geometry,s=e._indirectBuffer,u=r,l=r+i;u<l;u++)TM(o,t,n,s?s[u]:u,a)}(t,n,r,QS(e,s),$S(u,o),i);else{var l=eT(e);LM(l,a,r,nk)&&ik(l,t,n,r,i);var c=tT(e,s);LM(c,a,r,nk)&&ik(c,t,n,r,i)}}var ak=new _s,ok=["x","y","z"];function sk(e,t,n,r){uM.setBuffer(e._roots[t]);var i=uk(0,e,n,r);return uM.clearBuffer(),i}function uk(e,t,n,r){var i=uM.float32Array,a=uM.uint16Array,o=uM.uint32Array,s=2*e;if(ZS(s,a))return function(e,t,n,r,i){for(var a=e.geometry,o=e._indirectBuffer,s=1/0,u=null,l=r,c=r+i;l<c;l++){var h;(h=TM(a,t,n,o?o[l]:l))&&h.distance<s&&(u=h,s=h.distance)}return u}(t,n,r,QS(e,o),$S(s,a));var u,l,c=nT(e,o),h=ok[c],f=r.direction[h]>=0;f?(u=eT(e),l=tT(e,o)):(u=tT(e,o),l=eT(e));var d=LM(u,i,r,ak)?uk(u,t,n,r):null;if(d){var p=d.point[h];if(f?p<=i[l+c]:p>=i[l+c+3])return d}var m=LM(l,i,r,ak)?uk(l,t,n,r):null;return d&&m?d.distance<=m.distance?d:m:d||m||null}var lk=new Ts,ck=new DT,hk=new DT,fk=new Qs,dk=new qT,pk=new qT;function mk(e,t,n,r){uM.setBuffer(e._roots[t]);var i=vk(0,e,n,r);return uM.clearBuffer(),i}function vk(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=uM.float32Array,o=uM.uint16Array,s=uM.uint32Array,u=2*e;if(null===i&&(n.boundingBox||n.computeBoundingBox(),dk.set(n.boundingBox.min,n.boundingBox.max,r),i=dk),!ZS(u,o)){var l=e+8,c=s[e+6];return IS(l,a,lk),!(!i.intersectsBox(lk)||!vk(l,t,n,r,i))||(IS(c,a,lk),!(!i.intersectsBox(lk)||!vk(c,t,n,r,i)))}var h=t.geometry,f=h.index,d=h.attributes.position,p=n.index,m=n.attributes.position,v=QS(e,s),g=$S(u,o);if(fk.copy(r).invert(),n.boundsTree){IS(e,a,pk),pk.matrix.copy(fk),pk.needsUpdate=!0;var y=n.boundsTree.shapecast({intersectsBounds:function(e){return pk.intersectsBox(e)},intersectsTriangle:function(e){e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(var n=v,i=g+v;n<i;n++)if(MM(hk,3*t.resolveTriangleIndex(n),f,d),hk.needsUpdate=!0,e.intersectsTriangle(hk))return!0;return!1}});return y}for(var b=v,x=g+v;b<x;b++){var w=t.resolveTriangleIndex(b);MM(ck,3*w,f,d),ck.a.applyMatrix4(fk),ck.b.applyMatrix4(fk),ck.c.applyMatrix4(fk),ck.needsUpdate=!0;for(var _=0,E=p.count;_<E;_+=3)if(MM(hk,_,p,m),hk.needsUpdate=!0,ck.intersectsTriangle(hk))return!0}}var gk=new Qs,yk=new qT,bk=new qT,xk=new _s,wk=new _s,_k=new _s,Ek=new _s;function Sk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0;t.boundingBox||t.computeBoundingBox(),yk.set(t.boundingBox.min,t.boundingBox.max,n),yk.needsUpdate=!0;var s=e.geometry,u=s.attributes.position,l=s.index,c=t.attributes.position,h=t.index,f=tM.getPrimitive(),d=tM.getPrimitive(),p=xk,m=wk,v=null,g=null;i&&(v=_k,g=Ek);var y=1/0,b=null,x=null;return gk.copy(n).invert(),bk.matrix.copy(gk),e.shapecast({boundsTraverseOrder:function(e){return yk.distanceToBox(e)},intersectsBounds:function(e,t,n){return n<y&&n<o&&(t&&(bk.min.copy(e.min),bk.max.copy(e.max),bk.needsUpdate=!0),!0)},intersectsRange:function(r,i){if(t.boundsTree){var s=t.boundsTree;return s.shapecast({boundsTraverseOrder:function(e){return bk.distanceToBox(e)},intersectsBounds:function(e,t,n){return n<y&&n<o},intersectsRange:function(t,o){for(var w=t,_=t+o;w<_;w++){var E=s.resolveTriangleIndex(w);MM(d,3*E,h,c),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(var S=r,T=r+i;S<T;S++){var M=e.resolveTriangleIndex(S);MM(f,3*M,l,u),f.needsUpdate=!0;var k=f.distanceToTriangle(d,p,v);if(k<y&&(m.copy(p),g&&g.copy(v),y=k,b=S,x=w),k<a)return!0}}}})}for(var w=0,_=TS(t);w<_;w++){MM(d,3*w,h,c),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(var E=r,S=r+i;E<S;E++){var T=e.resolveTriangleIndex(E);MM(f,3*T,l,u),f.needsUpdate=!0;var M=f.distanceToTriangle(d,p,v);if(M<y&&(m.copy(p),g&&g.copy(v),y=M,b=E,x=w),M<a)return!0}}}}),tM.releasePrimitive(f),tM.releasePrimitive(d),y===1/0?null:(r.point?r.point.copy(m):r.point=m.clone(),r.distance=y,r.faceIndex=b,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(gk),m.applyMatrix4(gk),i.distance=m.sub(i.point).length(),i.faceIndex=x),r)}var Tk=new uM.constructor,Mk=new uM.constructor,kk=new KT((function(){return new Ts})),Ak=new Ts,Ik=new Ts,Lk=new Ts,Rk=new Ts,Ck=!1;function Pk(e,t,n,r,i){var a,o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,f=arguments.length>10&&void 0!==arguments[10]&&arguments[10];f?(a=Mk,o=Tk):(a=Tk,o=Mk);var d=a.float32Array,p=a.uint32Array,m=a.uint16Array,v=o.float32Array,g=o.uint32Array,y=o.uint16Array,b=2*t,x=ZS(2*e,m),w=ZS(b,y),_=!1;if(w&&x)_=f?i(QS(t,g),$S(2*t,y),QS(e,p),$S(2*e,m),c,u+t,l,s+e):i(QS(e,p),$S(2*e,m),QS(t,g),$S(2*t,y),l,s+e,c,u+t);else if(w){var E=kk.getPrimitive();IS(t,v,E),E.applyMatrix4(n);var S=eT(e),T=tT(e,p);IS(S,d,Ak),IS(T,d,Ik);var M=E.intersectsBox(Ak),k=E.intersectsBox(Ik);_=M&&Pk(t,S,r,n,i,u,s,c,l+1,E,!f)||k&&Pk(t,T,r,n,i,u,s,c,l+1,E,!f),kk.releasePrimitive(E)}else{var A=eT(t),I=tT(t,g);IS(A,v,Lk),IS(I,v,Rk);var L=h.intersectsBox(Lk),R=h.intersectsBox(Rk);if(L&&R)_=Pk(e,A,n,r,i,s,u,l,c+1,h,f)||Pk(e,I,n,r,i,s,u,l,c+1,h,f);else if(L)if(x)_=Pk(e,A,n,r,i,s,u,l,c+1,h,f);else{var C=kk.getPrimitive();C.copy(Lk).applyMatrix4(n);var P=eT(e),O=tT(e,p);IS(P,d,Ak),IS(O,d,Ik);var D=C.intersectsBox(Ak),N=C.intersectsBox(Ik);_=D&&Pk(A,P,r,n,i,u,s,c,l+1,C,!f)||N&&Pk(A,O,r,n,i,u,s,c,l+1,C,!f),kk.releasePrimitive(C)}else if(R)if(x)_=Pk(e,I,n,r,i,s,u,l,c+1,h,f);else{var B=kk.getPrimitive();B.copy(Rk).applyMatrix4(n);var U=eT(e),F=tT(e,p);IS(U,d,Ak),IS(F,d,Ik);var z=B.intersectsBox(Ak),H=B.intersectsBox(Ik);_=z&&Pk(I,U,r,n,i,u,s,c,l+1,B,!f)||H&&Pk(I,F,r,n,i,u,s,c,l+1,B,!f),kk.releasePrimitive(B)}}return _}function Ok(e){return Ok="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ok(e)}function Dk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dk(Object(n),!0).forEach((function(t){Bk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bk(e,t,n){return(t=zk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uk(){return Uk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uk.apply(this,arguments)}function Fk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zk(r.key),r)}}function zk(e){var t=function(e,t){if("object"!=Ok(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ok(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ok(t)?t:String(t)}var Hk=new qT,Gk=new Ts,jk={strategy:pS,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0},Vk=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if((n=Uk(Nk(Nk({},jk),{},Bk({},ES,!1)),n)).useSharedArrayBuffer&&"undefined"==typeof SharedArrayBuffer)throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=t,this._roots=null,this._indirectBuffer=null,n[ES]||(sT(this,n),!t.boundingBox&&n.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new Ts)));var r=this._indirectBuffer;this.resolveTriangleIndex=n.indirect?function(e){return r[e]}:function(e){return e}}var t,n,r;return t=e,n=[{key:"indirect",get:function(){return!!this._indirectBuffer}},{key:"refit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(this.indirect?tk:AM)(this,e)}},{key:"traverse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._roots[t],r=new Uint32Array(n),i=new Uint16Array(n);!function t(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=2*a,u=i[s+15]===wS;if(u){var l=r[a+6],c=i[s+14];e(o,u,new Float32Array(n,4*a,6),l,c)}else{var h=a+xS/4,f=r[a+6],d=r[a+7];e(o,u,new Float32Array(n,4*a,6),d)||(t(h,o+1),t(f,o+1))}}(0)}},{key:"raycast",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mr,n=this._roots,r=this.geometry,i=[],a=t.isMaterial,o=Array.isArray(t),s=r.groups,u=a?t.side:t,l=this.indirect?rk:CM,c=0,h=n.length;c<h;c++){var f=o?t[s[c].materialIndex].side:u,d=i.length;if(l(this,c,f,e,i),o)for(var p=s[c].materialIndex,m=d,v=i.length;m<v;m++)i[m].face.materialIndex=p}return i}},{key:"raycastFirst",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mr,n=this._roots,r=this.geometry,i=t.isMaterial,a=Array.isArray(t),o=null,s=r.groups,u=i?t.side:t,l=this.indirect?sk:NM,c=0,h=n.length;c<h;c++){var f=l(this,c,a?t[s[c].materialIndex].side:u,e);null!=f&&(null==o||f.distance<o.distance)&&(o=f,a&&(f.face.materialIndex=s[c].materialIndex))}return o}},{key:"intersectsGeometry",value:function(e,t){for(var n=!1,r=this._roots,i=this.indirect?mk:VM,a=0,o=r.length;a<o&&!(n=i(this,a,e,t));a++);return n}},{key:"shapecast",value:function(e){var t=this,n=tM.getPrimitive(),r=this.indirect?ek:kM,i=e.boundsTraverseOrder,a=e.intersectsBounds,o=e.intersectsRange,s=e.intersectsTriangle;if(o&&s){var u=o;o=function(e,i,a,o,l){return!!u(e,i,a,o,l)||r(e,i,t,s,a,o,n)}}else o||(o=s?function(e,i,a,o){return r(e,i,t,s,a,o,n)}:function(e,t,n){return n});for(var l=!1,c=0,h=this._roots,f=0,d=h.length;f<d;f++){var p=h[f];if(l=hM(this,f,a,o,i,c))break;c+=p.byteLength}return tM.releasePrimitive(n),l}},{key:"bvhcast",value:function(e,t,n){var r=this,i=n.intersectsRanges,a=n.intersectsTriangles,o=tM.getPrimitive(),s=this.geometry.index,u=this.geometry.attributes.position,l=this.indirect?function(e){var t=r.resolveTriangleIndex(e);MM(o,3*t,s,u)}:function(e){MM(o,3*e,s,u)},c=tM.getPrimitive(),h=e.geometry.index,f=e.geometry.attributes.position,d=e.indirect?function(t){var n=e.resolveTriangleIndex(t);MM(c,3*n,h,f)}:function(e){MM(c,3*e,h,f)};if(a){var p=function(e,n,r,i,s,u,h,f){for(var p=r,m=r+i;p<m;p++){d(p),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(var v=e,g=e+n;v<g;v++)if(l(v),o.needsUpdate=!0,a(o,c,v,p,s,u,h,f))return!0}return!1};if(i){var m=i;i=function(e,t,n,r,i,a,o,s){return!!m(e,t,n,r,i,a,o,s)||p(e,t,n,r,i,a,o,s)}}else i=p}return function(e,t,n,r){if(Ck)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");Ck=!0;for(var i,a=e._roots,o=t._roots,s=0,u=0,l=(new Qs).copy(n).invert(),c=0,h=a.length;c<h;c++){Tk.setBuffer(a[c]),u=0;var f=kk.getPrimitive();IS(0,Tk.float32Array,f),f.applyMatrix4(l);for(var d=0,p=o.length;d<p&&(Mk.setBuffer(o[c]),i=Pk(0,0,n,l,r,s,u,0,0,f),Mk.clearBuffer(),u+=o[d].length,!i);d++);if(kk.releasePrimitive(f),Tk.clearBuffer(),s+=a[c].length,i)break}return Ck=!1,i}(this,e,t,i)}},{key:"intersectsBox",value:function(e,t){return Hk.set(e.min,e.max,t),Hk.needsUpdate=!0,this.shapecast({intersectsBounds:function(e){return Hk.intersectsBox(e)},intersectsTriangle:function(e){return Hk.intersectsTriangle(e)}})}},{key:"intersectsSphere",value:function(e){return this.shapecast({intersectsBounds:function(t){return e.intersectsBox(t)},intersectsTriangle:function(t){return t.intersectsSphere(e)}})}},{key:"closestPointToGeometry",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0;return(this.indirect?Sk:$M)(this,e,t,n,r,i,a)}},{key:"closestPointToPoint",value:function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=r*r,o=i*i,s=1/0,u=null;if(e.shapecast({boundsTraverseOrder:function(e){return dM.copy(t).clamp(e.min,e.max),dM.distanceToSquared(t)},intersectsBounds:function(e,t,n){return n<s&&n<o},intersectsTriangle:function(e,n){e.closestPointToPoint(t,dM);var r=t.distanceToSquared(dM);return r<s&&(pM.copy(dM),s=r,u=n),r<a}}),s===1/0)return null;var l=Math.sqrt(s);return n.point?n.point.copy(pM):n.point=pM.clone(),n.distance=l,n.faceIndex=u,n}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0)}},{key:"getBoundingBox",value:function(e){return e.makeEmpty(),this._roots.forEach((function(t){IS(0,new Float32Array(t),Gk),e.union(Gk)})),e}}],r=[{key:"serialize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Nk({cloneBuffers:!0},t);var n,r=e.geometry,i=e._roots,a=e._indirectBuffer,o=r.getIndex();return n=t.cloneBuffers?{roots:i.map((function(e){return e.slice()})),index:o.array.slice(),indirectBuffer:a?a.slice():null}:{roots:i,index:o.array,indirectBuffer:a},n}},{key:"deserialize",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r=Nk({setIndex:!0,indirect:Boolean(t.indirectBuffer)},r);var i=t.index,a=t.roots,o=t.indirectBuffer,s=new e(n,Nk(Nk({},r),{},Bk({},ES,!0)));if(s._roots=a,s._indirectBuffer=o||null,r.setIndex){var u=n.getIndex();if(null===u){var l=new Qu(t.index,1,!1);n.setIndex(l)}else u.array!==i&&(u.array.set(i),u.needsUpdate=!0)}return s}}],n&&Fk(t.prototype,n),r&&Fk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qk(e){return qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qk(e)}function Wk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xk(r.key),r)}}function Xk(e){var t=function(e,t){if("object"!=qk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=qk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qk(t)?t:String(t)}function Yk(e){return Yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yk(e)}function Kk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jk(Object(n),!0).forEach((function(t){Qk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qk(e,t,n){return(t=tA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $k(){return $k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$k.apply(this,arguments)}function eA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tA(r.key),r)}}function tA(e){var t=function(e,t){if("object"!=Yk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Yk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yk(t)?t:String(t)}function nA(e,t,n){return t=iA(t),function(e,t){if(t&&("object"===Yk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rA()?Reflect.construct(t,n||[],iA(e).constructor):t.apply(e,n))}function rA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rA=function(){return!!e})()}function iA(e){return iA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},iA(e)}function aA(e,t){return aA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},aA(e,t)}var oA,sA,uA=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=nA(this,t,[new Worker(new URL(n.p+n.u(480),n.b),{type:void 0})])).name="GenerateMeshBVHWorker",e}var r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aA(e,t)}(t,e),r=t,i=[{key:"runTask",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,i){if(t.getAttribute("position").isInterleavedBufferAttribute||t.index&&t.index.isInterleavedBufferAttribute)throw new Error("GenerateMeshBVHWorker: InterleavedBufferAttribute are not supported for the geometry attributes.");e.onerror=function(e){i(new Error("GenerateMeshBVHWorker: ".concat(e.message)))},e.onmessage=function(a){var o=a.data;if(o.error)i(new Error(o.error)),e.onmessage=null;else if(o.serialized){var s=o.serialized,u=o.position,l=Vk.deserialize(s,t,{setIndex:!1}),c=$k({setBoundingBox:!0},n);if(t.attributes.position.array=u,t.index)t.index.array=s.index;else{var h=new Qu(s.index,1,!1);t.setIndex(h)}c.setBoundingBox&&(t.boundingBox=l.getBoundingBox(new Ts)),r(l),e.onmessage=null}else n.onProgress&&n.onProgress(o.progress)};var a,o=t.index?t.index.array:null,s=t.attributes.position.array,u=[s];o&&u.push(o),e.postMessage({index:o,position:s,options:Zk(Zk({},n),{},{onProgress:null,includedProgressCallback:Boolean(n.onProgress),groups:(a=t.groups,function(e){if(Array.isArray(e))return Kk(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return Kk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kk(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})},u.map((function(e){return e.buffer})).filter((function(e){return"undefined"==typeof SharedArrayBuffer||!(e instanceof SharedArrayBuffer)})))}))}}],i&&eA(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="WorkerBase",this.running=!1,this.worker=t,this.worker.onerror=function(e){throw e.message?new Error("".concat(n.name,': Could not create Web Worker with error "').concat(e.message,'"')):new Error("".concat(n.name,": Could not create Web Worker."))}}var t,n;return t=e,n=[{key:"runTask",value:function(){}},{key:"generate",value:function(){var e=this;if(this.running)throw new Error("GenerateMeshBVHWorker: Already running job.");if(null===this.worker)throw new Error("GenerateMeshBVHWorker: Worker has been disposed.");this.running=!0;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=this.runTask.apply(this,[this.worker].concat(n));return i.finally((function(){e.running=!1})),i}},{key:"dispose",value:function(){this.worker.terminate(),this.worker=null}}],n&&Wk(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()),lA=0,cA=function e(t,n,r){if(lA)setTimeout((function(){e(t)}),500);else{var i=window.performance.now(),a=[];if(t.forEach((function(e){if(e.userData.groupMerged)a.push(e);else if(e.isInstancedMesh){if(e.instanceMatrix)for(var t=sz?e.instanceMatrix.count:Math.floor(e.instanceMatrix.count/2),n=0;n<t;n++){c=e.geometry.clone();var i=new Qs;if(e.getMatrixAt(n,i),r){var o=new _s,s=new ws,u=new _s;i.decompose(o,s,u),o.x+=r.x,o.y+=r.y,o.z+=r.z,i.compose(o,s,u)}try{c.applyMatrix4(i)}catch(e){console.log("commune-specific matrix error")}for(var l in c.attributes)"position"!==l&&c.deleteAttribute(l);(c=c.toNonIndexed()).index=null,a.push(c)}}else{e.updateMatrixWorld(!0);var c=e.geometry.clone();for(var h in c.applyMatrix4(e.matrixWorld),c.attributes)"position"!==h&&c.deleteAttribute(h);(c=c.toNonIndexed()).index=null,a.push(c)}})),n&&sA.hasOwnProperty("geometry")&&r){a.forEach((function(e){for(var t in e.attributes)"position"!==t&&e.deleteAttribute(t);e.index=null})),(s=Hb(a,!1)).boundsTree=new Vk(s,{lazyGeneration:!0});var o=new Ol(s,CF.whiteFull);o.position.x=r.x,o.position.y=r.y,o.position.z=r.z,(s=Hb([o.geometry,sA.geometry],!1)).boundsTree=new Vk(s,{lazyGeneration:!0}),sA=new Ol(s,CF.whiteFull),(oA=new Ol(s,CF.cyanFull)).name="collider",oA.material.wireframe=!1,oA.visible=!1}else{var s=Hb(a,!1);Oz(1),lA=1,(new uA).generate(s).then((function(e){s.boundsTree=e,sA=new Ol(s,CF.whiteFull),oA=new Ol(s,CF.cyanFull),lA=0,Oz(0);var t=window.performance.now()-i;console.log("Collider generated in ".concat(t.toFixed(3),"ms"))}))}}},hA=function e(){if(oA)if(lA)setTimeout(e,500);else{var t=[],n=[];if(cH.children.forEach((function(e){e.children.forEach((function(e){if(e.material===CF.whiteFull){e.updateMatrixWorld(!0);var t=e.geometry.clone();for(var r in t.applyMatrix4(e.matrixWorld),t.attributes)"position"!==r&&t.deleteAttribute(r);t.index&&(t=t.toNonIndexed()),t.userData.groupMerged=!0,n.push(t)}}))})),n.length>0){var r=Hb(n,!1);r.userData.groupMerged=!0,t.push(r)}t.push(sA.geometry),t.forEach((function(e){for(var t in e.attributes)"position"!==t&&e.deleteAttribute(t);e.index=null}));var i=Hb(t,!1);Oz(1),lA=1,(new uA).generate(i).then((function(e){i.boundsTree=e,(oA=new Ol(i,CF.whiteFull)).name="collider",oA.visible=!1,Oz(0),lA=0}))}},fA=Object.create(null);fA.open="0",fA.close="1",fA.ping="2",fA.pong="3",fA.message="4",fA.upgrade="5",fA.noop="6";var dA=Object.create(null);Object.keys(fA).forEach((function(e){dA[fA[e]]=e}));var pA,mA={type:"error",data:"parser error"},vA="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),gA="function"==typeof ArrayBuffer,yA=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},bA=function(e,t,n){var r=e.type,i=e.data;return vA&&i instanceof Blob?t?n(i):xA(i,n):gA&&(i instanceof ArrayBuffer||yA(i))?t?n(i):xA(new Blob([i]),n):n(fA[r]+(i||""))},xA=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function wA(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}for(var _A="undefined"==typeof Uint8Array?[]:new Uint8Array(256),EA=0;EA<64;EA++)_A["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(EA)]=EA;var SA,TA="function"==typeof ArrayBuffer,MA=function(e,t){if("string"!=typeof e)return{type:"message",data:AA(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:kA(e.substring(1),t)}:dA[n]?e.length>1?{type:dA[n],data:e.substring(1)}:{type:dA[n]}:mA},kA=function(e,t){if(TA){var n=function(e){var t,n,r,i,a,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),c=new Uint8Array(l);for(t=0;t<s;t+=4)n=_A[e.charCodeAt(t)],r=_A[e.charCodeAt(t+1)],i=_A[e.charCodeAt(t+2)],a=_A[e.charCodeAt(t+3)],c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|i>>2,c[u++]=(3&i)<<6|63&a;return l}(e);return AA(n,t)}return{base64:!0,data:e}},AA=function(e,t){return"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer},IA=String.fromCharCode(30);function LA(e){return e.reduce((function(e,t){return e+t.length}),0)}function RA(e,t){if(e[0].length===t)return e.shift();for(var n=new Uint8Array(t),r=0,i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function CA(e){if(e)return function(e){for(var t in CA.prototype)e[t]=CA.prototype[t];return e}(e)}CA.prototype.on=CA.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},CA.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},CA.prototype.off=CA.prototype.removeListener=CA.prototype.removeAllListeners=CA.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},CA.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},CA.prototype.emitReserved=CA.prototype.emit,CA.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},CA.prototype.hasListeners=function(e){return!!this.listeners(e).length};var PA="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function OA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var DA=PA.setTimeout,NA=PA.clearTimeout;function BA(e,t){t.useNativeTimers?(e.setTimeoutFn=DA.bind(PA),e.clearTimeoutFn=NA.bind(PA)):(e.setTimeoutFn=PA.setTimeout.bind(PA),e.clearTimeoutFn=PA.clearTimeout.bind(PA))}function UA(e){return UA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UA(e)}function FA(){return FA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=JA(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},FA.apply(this,arguments)}function zA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,GA(r.key),r)}}function HA(e,t,n){return t&&zA(e.prototype,t),n&&zA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function GA(e){var t=function(e,t){if("object"!=UA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=UA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==UA(t)?t:String(t)}function jA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VA(e,t,n){return t=JA(t),function(e,t){if(t&&("object"===UA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qA(e)}(e,YA()?Reflect.construct(t,n||[],JA(e).constructor):t.apply(e,n))}function qA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WA(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KA(e,t)}function XA(e){var t="function"==typeof Map?new Map:void 0;return XA=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(YA())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&KA(i,n.prototype),i}(e,arguments,JA(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),KA(n,e)},XA(e)}function YA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YA=function(){return!!e})()}function KA(e,t){return KA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},KA(e,t)}function JA(e){return JA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JA(e)}var ZA,QA=function(e){function t(e,n,r){var i;return jA(this,t),(i=VA(this,t,[e])).description=n,i.context=r,i.type="TransportError",i}return WA(t,e),HA(t)}(XA(Error)),$A=function(e){function t(e){var n;return jA(this,t),(n=VA(this,t)).writable=!1,BA(qA(n),e),n.opts=e,n.query=e.query,n.socket=e.socket,n}return WA(t,e),HA(t,[{key:"onError",value:function(e,n,r){return FA(JA(t.prototype),"emitReserved",this).call(this,"error",new QA(e,n,r)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,FA(JA(t.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=MA(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){FA(JA(t.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",FA(JA(t.prototype),"emitReserved",this).call(this,"close",e)}},{key:"pause",value:function(e){}},{key:"createUri",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}},{key:"_hostname",value:function(){var e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}},{key:"_port",value:function(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}},{key:"_query",value:function(e){var t=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}]),t}(CA),eI="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),tI=64,nI={},rI=0,iI=0;function aI(e){var t="";do{t=eI[e%tI]+t,e=Math.floor(e/tI)}while(e>0);return t}function oI(){var e=aI(+new Date);return e!==ZA?(rI=0,ZA=e):e+"."+aI(rI++)}for(;iI<tI;iI++)nI[eI[iI]]=iI;var sI=!1;try{sI="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}var uI=sI;function lI(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||uI))return new XMLHttpRequest}catch(e){}if(!t)try{return new(PA[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function cI(e){return cI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cI(e)}function hI(){return hI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hI.apply(this,arguments)}function fI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mI(r.key),r)}}function pI(e,t,n){return t&&dI(e.prototype,t),n&&dI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mI(e){var t=function(e,t){if("object"!=cI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=cI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==cI(t)?t:String(t)}function vI(e,t,n){return t=bI(t),function(e,t){if(t&&("object"===cI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gI(e)}(e,yI()?Reflect.construct(t,n||[],bI(e).constructor):t.apply(e,n))}function gI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yI=function(){return!!e})()}function bI(e){return bI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bI(e)}function xI(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wI(e,t)}function wI(e,t){return wI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wI(e,t)}function _I(){}var EI=null!=new lI({xdomain:!1}).responseType,SI=function(e){function t(e){var n;if(fI(this,t),(n=vI(this,t,[e])).polling=!1,"undefined"!=typeof location){var r="https:"===location.protocol,i=location.port;i||(i=r?"443":"80"),n.xd="undefined"!=typeof location&&e.hostname!==location.hostname||i!==e.port}var a=e&&e.forceBase64;return n.supportsBinary=EI&&!a,n.opts.withCredentials&&(n.cookieJar=void 0),n}return xI(t,e),pI(t,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(IA),r=[],i=0;i<n.length;i++){var a=MA(n[i],t);if(r.push(a),"error"===a.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,n){var r=e.length,i=new Array(r),a=0;e.forEach((function(e,n){bA(e,!1,(function(e){var o;i[n]=e,++a===r&&(o=i.join(IA),t.doWrite(o,(function(){t.writable=!0,t.emitReserved("drain")})))}))}))}(e)}},{key:"uri",value:function(){var e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=oI()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hI(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new TI(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e,t){n.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,n){e.onError("xhr poll error",t,n)})),this.pollXhr=t}}]),t}($A),TI=function(e){function t(e,n){var r;return fI(this,t),BA(gI(r=vI(this,t)),n),r.opts=n,r.method=n.method||"GET",r.uri=e,r.data=void 0!==n.data?n.data:null,r.create(),r}return xI(t,e),pI(t,[{key:"create",value:function(){var e,n=this,r=OA(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;var i=this.xhr=new lI(r);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(var a in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&i.setRequestHeader(a,this.opts.extraHeaders[a])}catch(e){}if("POST"===this.method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{i.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=function(){var e;3===i.readyState&&(null===(e=n.opts.cookieJar)||void 0===e||e.parseCookies(i)),4===i.readyState&&(200===i.status||1223===i.status?n.onLoad():n.setTimeoutFn((function(){n.onError("number"==typeof i.status?i.status:0)}),0))},i.send(this.data)}catch(e){return void this.setTimeoutFn((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=t.requestsCount++,t.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=_I,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete t.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),t}(CA);function MI(){for(var e in TI.requests)TI.requests.hasOwnProperty(e)&&TI.requests[e].abort()}TI.requestsCount=0,TI.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",MI):"function"==typeof addEventListener&&addEventListener("onpagehide"in PA?"pagehide":"unload",MI,!1));var kI="function"==typeof Promise&&"function"==typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},AI=PA.WebSocket||PA.MozWebSocket;function II(e){return II="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},II(e)}function LI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RI(r.key),r)}}function RI(e){var t=function(e,t){if("object"!=II(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=II(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==II(t)?t:String(t)}function CI(e,t,n){return t=OI(t),function(e,t){if(t&&("object"===II(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,PI()?Reflect.construct(t,n||[],OI(e).constructor):t.apply(e,n))}function PI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PI=function(){return!!e})()}function OI(e){return OI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},OI(e)}function DI(e,t){return DI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},DI(e,t)}n(1880).Sn;var NI="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),BI=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=CI(this,t,[e])).supportsBinary=!e.forceBase64,n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DI(e,t)}(t,e),n=t,r=[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=NI?{}:OA(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=NI?new AI(e,t,n):t?new AI(e,t):new AI(e)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],i=r===e.length-1;bA(n,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(e){}i&&kI((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=oI()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}},{key:"check",value:function(){return!!AI}}],r&&LI(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}($A);function UI(e){return UI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UI(e)}function FI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zI(r.key),r)}}function zI(e){var t=function(e,t){if("object"!=UI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=UI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==UI(t)?t:String(t)}function HI(e,t,n){return t=jI(t),function(e,t){if(t&&("object"===UI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,GI()?Reflect.construct(t,n||[],jI(e).constructor):t.apply(e,n))}function GI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GI=function(){return!!e})()}function jI(e){return jI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jI(e)}function VI(e,t){return VI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},VI(e,t)}var qI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),HI(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VI(e,t)}(t,e),n=t,r=[{key:"name",get:function(){return"webtransport"}},{key:"doOpen",value:function(){var e=this;"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((function(){e.onClose()})).catch((function(t){e.onError("webtransport error",t)})),this.transport.ready.then((function(){e.transport.createBidirectionalStream().then((function(t){var n=function(e,t){SA||(SA=new TextDecoder);var n=[],r=0,i=-1,a=!1;return new TransformStream({transform:function(o,s){for(n.push(o);;){if(0===r){if(LA(n)<1)break;var u=RA(n,1);a=128==(128&u[0]),i=127&u[0],r=i<126?3:126===i?1:2}else if(1===r){if(LA(n)<2)break;var l=RA(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(2===r){if(LA(n)<8)break;var c=RA(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),f=h.getUint32(0);if(f>Math.pow(2,21)-1){s.enqueue(mA);break}i=f*Math.pow(2,32)+h.getUint32(4),r=3}else{if(LA(n)<i)break;var d=RA(n,i);s.enqueue(MA(a?d:SA.decode(d),t)),r=0}if(0===i||i>e){s.enqueue(mA);break}}}})}(Number.MAX_SAFE_INTEGER,e.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=new TransformStream({transform:function(e,t){!function(e,t){vA&&e.data instanceof Blob?e.data.arrayBuffer().then(wA).then(t):gA&&(e.data instanceof ArrayBuffer||yA(e.data))?t(wA(e.data)):bA(e,!1,(function(e){pA||(pA=new TextEncoder),t(pA.encode(e))}))}(e,(function(n){var r,i=n.length;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);var a=new DataView(r.buffer);a.setUint8(0,126),a.setUint16(1,i)}else{r=new Uint8Array(9);var o=new DataView(r.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(i))}e.data&&"string"!=typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)}))}});i.readable.pipeTo(t.writable),e.writer=i.writable.getWriter(),function t(){r.read().then((function(n){var r=n.done,i=n.value;r||(e.onPacket(i),t())})).catch((function(e){}))}();var a={type:"open"};e.query.sid&&(a.data='{"sid":"'.concat(e.query.sid,'"}')),e.writer.write(a).then((function(){return e.onOpen()}))}))})))}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],i=r===e.length-1;t.writer.write(n).then((function(){i&&kI((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){var e;null===(e=this.transport)||void 0===e||e.close()}}],r&&FI(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}($A),WI={websocket:BI,webtransport:qI,polling:SI},XI=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,YI=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function KI(e){if(e.length>2e3)throw"URI too long";var t,n,r,i,a=e,o=e.indexOf("["),s=e.indexOf("]");-1!=o&&-1!=s&&(e=e.substring(0,o)+e.substring(o,s).replace(/:/g,";")+e.substring(s,e.length));for(var u=XI.exec(e||""),l={},c=14;c--;)l[YI[c]]=u[c]||"";return-1!=o&&-1!=s&&(l.source=a,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=(r=l.path,i=r.replace(/\/{2,9}/g,"/").split("/"),"/"!=r.slice(0,1)&&0!==r.length||i.splice(0,1),"/"==r.slice(-1)&&i.splice(i.length-1,1),i),l.queryKey=(t=l.query,n={},t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n),l}function JI(){return JI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JI.apply(this,arguments)}function ZI(e){return ZI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZI(e)}function QI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$I(r.key),r)}}function $I(e){var t=function(e,t){if("object"!=ZI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ZI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ZI(t)?t:String(t)}function eL(e,t,n){return t=nL(t),function(e,t){if(t&&("object"===ZI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rL(e)}(e,tL()?Reflect.construct(t,n||[],nL(e).constructor):t.apply(e,n))}function tL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tL=function(){return!!e})()}function nL(e){return nL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nL(e)}function rL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iL(e,t){return iL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iL(e,t)}var aL=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=eL(this,t)).binaryType="arraybuffer",n.writeBuffer=[],e&&"object"===ZI(e)&&(r=e,e=null),e?(e=KI(e),r.hostname=e.host,r.secure="https"===e.protocol||"wss"===e.protocol,r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=KI(r.host).host),BA(rL(n),r),n.secure=null!=r.secure?r.secure:"undefined"!=typeof location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=n.secure?"443":"80"),n.hostname=r.hostname||("undefined"!=typeof location?location.hostname:"localhost"),n.port=r.port||("undefined"!=typeof location&&location.port?location.port:n.secure?"443":"80"),n.transports=r.transports||["polling","websocket","webtransport"],n.writeBuffer=[],n.prevBufferLen=0,n.opts=JI({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),n.opts.path=n.opts.path.replace(/\/$/,"")+(n.opts.addTrailingSlash?"/":""),"string"==typeof n.opts.query&&(n.opts.query=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}(n.opts.query)),n.id=null,n.upgrades=null,n.pingInterval=null,n.pingTimeout=null,n.pingTimeoutTimer=null,"function"==typeof addEventListener&&(n.opts.closeOnBeforeunload&&(n.beforeunloadEventListener=function(){n.transport&&(n.transport.removeAllListeners(),n.transport.close())},addEventListener("beforeunload",n.beforeunloadEventListener,!1)),"localhost"!==n.hostname&&(n.offlineEventListener=function(){n.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",n.offlineEventListener,!1))),n.open(),n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iL(e,t)}(t,e),n=t,r=[{key:"createTransport",value:function(e){var t=JI({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=JI({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new WI[e](n)}},{key:"open",value:function(){var e,n=this;if(this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){n.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var n=this,r=this.createTransport(e),i=!1;t.priorWebsocketSuccess=!1;var a=function(){i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(n.upgrading=!0,n.emitReserved("upgrading",r),!r)return;t.priorWebsocketSuccess="websocket"===r.name,n.transport.pause((function(){i||"closed"!==n.readyState&&(h(),n.setTransport(r),r.send([{type:"upgrade"}]),n.emitReserved("upgrade",r),r=null,n.upgrading=!1,n.flush())}))}else{var a=new Error("probe error");a.transport=r.name,n.emitReserved("upgradeError",a)}})))};function o(){i||(i=!0,h(),r.close(),r=null)}var s=function(e){var t=new Error("probe error: "+e);t.transport=r.name,o(),n.emitReserved("upgradeError",t)};function u(){s("transport closed")}function l(){s("socket closed")}function c(e){r&&e.name!==r.name&&o()}var h=function(){r.removeListener("open",a),r.removeListener("error",s),r.removeListener("close",u),n.off("close",l),n.off("upgrading",c)};r.once("open",a),r.once("error",s),r.once("close",u),this.once("close",l),this.once("upgrading",c),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((function(){i||r.open()}),200):r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",t.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var e=0,n=this.upgrades.length;e<n;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(t+="string"==typeof(e=r)?function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){t.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}],r&&QI(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(CA);function oL(e){return oL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oL(e)}aL.protocol=4,aL.protocol;var sL="function"==typeof ArrayBuffer,uL=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},lL=Object.prototype.toString,cL="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===lL.call(Blob),hL="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===lL.call(File);function fL(e){return sL&&(e instanceof ArrayBuffer||uL(e))||cL&&e instanceof Blob||hL&&e instanceof File}function dL(e,t){if(!e||"object"!==oL(e))return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(dL(e[n]))return!0;return!1}if(fL(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return dL(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&dL(e[i]))return!0;return!1}function pL(e){return pL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pL(e)}function mL(e){var t=[],n=e.data,r=e;return r.data=vL(n,t),r.attachments=t.length,{packet:r,buffers:t}}function vL(e,t){if(!e)return e;if(fL(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=vL(e[i],t);return r}if("object"===pL(e)&&!(e instanceof Date)){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=vL(e[o],t));return a}return e}function gL(e,t){return e.data=yL(e.data,t),delete e.attachments,e}function yL(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=yL(e[n],t);else if("object"===pL(e))for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=yL(e[r],t));return e}function bL(e){return bL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bL(e)}function xL(e,t,n){return t=EL(t),function(e,t){if(t&&("object"===bL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wL()?Reflect.construct(t,n||[],EL(e).constructor):t.apply(e,n))}function wL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wL=function(){return!!e})()}function _L(){return _L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EL(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},_L.apply(this,arguments)}function EL(e){return EL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},EL(e)}function SL(e,t){return SL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},SL(e,t)}function TL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ML(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AL(r.key),r)}}function kL(e,t,n){return t&&ML(e.prototype,t),n&&ML(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function AL(e){var t=function(e,t){if("object"!=bL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=bL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bL(t)?t:String(t)}var IL,LL=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],RL=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(IL||(IL={}));var CL=function(){function e(t){TL(this,e),this.replacer=t}return kL(e,[{key:"encode",value:function(e){return e.type!==IL.EVENT&&e.type!==IL.ACK||!dL(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===IL.EVENT?IL.BINARY_EVENT:IL.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==IL.BINARY_EVENT&&e.type!==IL.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=mL(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}();function PL(e){return"[object Object]"===Object.prototype.toString.call(e)}var OL=function(e){function t(e){var n;return TL(this,t),(n=xL(this,t)).reviver=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SL(e,t)}(t,e),kL(t,[{key:"add",value:function(e){var n;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var r=(n=this.decodeString(e)).type===IL.BINARY_EVENT;r||n.type===IL.BINARY_ACK?(n.type=r?IL.EVENT:IL.ACK,this.reconstructor=new DL(n),0===n.attachments&&_L(EL(t.prototype),"emitReserved",this).call(this,"decoded",n)):_L(EL(t.prototype),"emitReserved",this).call(this,"decoded",n)}else{if(!fL(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,_L(EL(t.prototype),"emitReserved",this).call(this,"decoded",n))}}},{key:"decodeString",value:function(e){var n=0,r={type:Number(e.charAt(0))};if(void 0===IL[r.type])throw new Error("unknown packet type "+r.type);if(r.type===IL.BINARY_EVENT||r.type===IL.BINARY_ACK){for(var i=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var a=e.substring(i,n);if(a!=Number(a)||"-"!==e.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(a)}if("/"===e.charAt(n+1)){for(var o=n+1;++n&&","!==e.charAt(n)&&n!==e.length;);r.nsp=e.substring(o,n)}else r.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(var u=n+1;++n;){var l=e.charAt(n);if(null==l||Number(l)!=l){--n;break}if(n===e.length)break}r.id=Number(e.substring(u,n+1))}if(e.charAt(++n)){var c=this.tryParse(e.substr(n));if(!t.isPayloadValid(r.type,c))throw new Error("invalid payload");r.data=c}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case IL.CONNECT:return PL(t);case IL.DISCONNECT:return void 0===t;case IL.CONNECT_ERROR:return"string"==typeof t||PL(t);case IL.EVENT:case IL.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===LL.indexOf(t[0]));case IL.ACK:case IL.BINARY_ACK:return Array.isArray(t)}}}]),t}(CA),DL=function(){function e(t){TL(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return kL(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=gL(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function NL(e,t,n){return e.on(t,n),function(){e.off(t,n)}}function BL(e){return BL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BL(e)}function UL(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return FL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FL(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function FL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zL(){return zL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zL.apply(this,arguments)}function HL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,GL(r.key),r)}}function GL(e){var t=function(e,t){if("object"!=BL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=BL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==BL(t)?t:String(t)}function jL(e,t,n){return t=WL(t),function(e,t){if(t&&("object"===BL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,VL()?Reflect.construct(t,n||[],WL(e).constructor):t.apply(e,n))}function VL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VL=function(){return!!e})()}function qL(){return qL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WL(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},qL.apply(this,arguments)}function WL(e){return WL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},WL(e)}function XL(e,t){return XL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XL(e,t)}var YL=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),KL=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=jL(this,t)).connected=!1,i.recovered=!1,i.receiveBuffer=[],i.sendBuffer=[],i._queue=[],i._queueSeq=0,i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=n,r&&r.auth&&(i.auth=r.auth),i._opts=zL({},r),i.io._autoConnect&&i.open(),i}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XL(e,t)}(t,e),n=t,r=[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[NL(e,"open",this.onopen.bind(this)),NL(e,"packet",this.onpacket.bind(this)),NL(e,"error",this.onerror.bind(this)),NL(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(YL.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;var i={type:IL.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var a=this.ids++,o=n.pop();this._registerAckCallback(a,o),i.id=a}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n,r=this,i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==i){var a=this.io.setTimeoutFn((function(){delete r.acks[e];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===e&&r.sendBuffer.splice(n,1);t.call(r,new Error("operation has timed out"))}),i);this.acks[e]=function(){r.io.clearTimeoutFn(a);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,[null].concat(n))}}else this.acks[e]=t}},{key:"emitWithAck",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((function(n,i){r.push((function(e,t){return a?e?i(e):n(t):n(e)})),t.emit.apply(t,[e].concat(r))}))}},{key:"_addToQueue",value:function(e){var t,n=this;"function"==typeof e[e.length-1]&&(t=e.pop());var r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:zL({fromQueue:!0},this.flags)};e.push((function(e){if(r===n._queue[0]){if(null!==e)r.tryCount>n._opts.retries&&(n._queue.shift(),t&&t(e));else if(n._queue.shift(),t){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];t.apply(void 0,[null].concat(a))}return r.pending=!1,n._drainQueue()}})),this._queue.push(r),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:IL.CONNECT,data:this._pid?zL({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case IL.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case IL.EVENT:case IL.BINARY_EVENT:this.onevent(e);break;case IL.ACK:case IL.BINARY_ACK:this.onack(e);break;case IL.DISCONNECT:this.ondisconnect();break;case IL.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var n,r=UL(this._anyListeners.slice());try{for(r.s();!(n=r.n()).done;)n.value.apply(this,e)}catch(e){r.e(e)}finally{r.f()}}qL(WL(t.prototype),"emit",this).apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];t.packet({type:IL.ACK,id:e,data:i})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:IL.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=UL(this._anyOutgoingListeners.slice());try{for(n.s();!(t=n.n()).done;)t.value.apply(this,e.data)}catch(e){n.e(e)}finally{n.f()}}}}],r&&HL(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(CA);function JL(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function ZL(e){return ZL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZL(e)}function QL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$L(r.key),r)}}function $L(e){var t=function(e,t){if("object"!=ZL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ZL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ZL(t)?t:String(t)}function eR(e,t,n){return t=nR(t),function(e,t){if(t&&("object"===ZL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rR(e)}(e,tR()?Reflect.construct(t,n||[],nR(e).constructor):t.apply(e,n))}function tR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tR=function(){return!!e})()}function nR(e){return nR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nR(e)}function rR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iR(e,t){return iR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iR(e,t)}JL.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},JL.prototype.reset=function(){this.attempts=0},JL.prototype.setMin=function(e){this.ms=e},JL.prototype.setMax=function(e){this.max=e},JL.prototype.setJitter=function(e){this.jitter=e};var aR=function(e){function n(e,r){var i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=eR(this,n)).nsps={},i.subs=[],e&&"object"===ZL(e)&&(r=e,e=void 0),(r=r||{}).path=r.path||"/socket.io",i.opts=r,BA(rR(i),r),i.reconnection(!1!==r.reconnection),i.reconnectionAttempts(r.reconnectionAttempts||1/0),i.reconnectionDelay(r.reconnectionDelay||1e3),i.reconnectionDelayMax(r.reconnectionDelayMax||5e3),i.randomizationFactor(null!==(a=r.randomizationFactor)&&void 0!==a?a:.5),i.backoff=new JL({min:i.reconnectionDelay(),max:i.reconnectionDelayMax(),jitter:i.randomizationFactor()}),i.timeout(null==r.timeout?2e4:r.timeout),i._readyState="closed",i.uri=e;var o=r.parser||t;return i.encoder=new o.Encoder,i.decoder=new o.Decoder,i._autoConnect=!1!==r.autoConnect,i._autoConnect&&i.open(),i}var r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iR(e,t)}(n,e),r=n,i=[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new aL(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=NL(n,"open",(function(){r.onopen(),e&&e()})),a=function(n){t.cleanup(),t._readyState="closed",t.emitReserved("error",n),e?e(n):t.maybeReconnectOnOpen()},o=NL(n,"error",a);if(!1!==this._timeout){var s=this._timeout,u=this.setTimeoutFn((function(){i(),a(new Error("timeout")),n.close()}),s);this.opts.autoUnref&&u.unref(),this.subs.push((function(){t.clearTimeoutFn(u)}))}return this.subs.push(i),this.subs.push(o),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(NL(e,"ping",this.onping.bind(this)),NL(e,"data",this.ondata.bind(this)),NL(e,"error",this.onerror.bind(this)),NL(e,"close",this.onclose.bind(this)),NL(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}},{key:"ondecoded",value:function(e){var t=this;kI((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new KL(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){e.clearTimeoutFn(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}],i&&QL(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),n}(CA);function oR(){return oR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oR.apply(this,arguments)}function sR(e){return sR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sR(e)}var uR={};function lR(e,t){"object"===sR(e)&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=KI(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,a=r.id,o=r.path,s=uR[a]&&o in uR[a].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new aR(i,t):(uR[a]||(uR[a]=new aR(i,t)),n=uR[a]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}oR(lR,{Manager:aR,Socket:KL,io:lR,connect:lR});var cR,hR,fR={room:{blockchain:"tezos",token_id:"540571",contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE"},skybox:{blockchain:"tezos",token_id:"527345",contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE"},gallery:[{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"2"},position:{x:"-30.0000",y:"1.5000",z:"2.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"1.0000",y:"1.0000",z:"1.0000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"3"},position:{x:"-30.0000",y:"1.5000",z:"-1.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"1.0000",y:"1.0000",z:"1.0000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"1"},position:{x:"-32.0000",y:"8.5000",z:"0.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"3.8000",y:"3.8000",z:"3.8000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"4"},position:{x:"-30.0000",y:"1.5000",z:"-4.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"1.0000",y:"1.0000",z:"1.0000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"0"},position:{x:"-30.0000",y:"1.5000",z:"5.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"1.0000",y:"1.0000",z:"1.0000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"5"},position:{x:"-19.0000",y:"1.5000",z:"-27.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"1.4000",y:"1.4000",z:"1.4000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"6"},position:{x:"-15.0000",y:"1.5000",z:"-27.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"1.4000",y:"1.4000",z:"1.4000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"7"},position:{x:"-11.0000",y:"1.5000",z:"-27.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"1.4000",y:"1.4000",z:"1.4000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"10"},position:{x:"-7.0000",y:"1.5000",z:"-27.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"1.4000",y:"1.4000",z:"1.4000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1LjmAdYQCLBjwv4S2oFkEzyHVkomAf5MrW",token_id:"27435"},position:{x:"-42.0000",y:"8.5000",z:"38.0000"},rotation:{x:"-3.1416",y:"0.0000",z:"-3.1416"},scale:{x:"3.1000",y:"3.1000",z:"3.1000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"1043411"},position:{x:"38.0000",y:"15.5000",z:"0.0000"},rotation:{x:"0.0000",y:"-1.5708",z:"0.0000"},scale:{x:"2.6000",y:"2.6000",z:"2.6000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1CUPoajzwiYQN8gfueuktNbAQS5jJ4Jf7V",token_id:"6"},position:{x:"0.0000",y:"5.5000",z:"-85.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"6.4000",y:"6.4000",z:"6.4000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"926697"},position:{x:"-90.0025",y:"1.4774",z:"36.0496"},rotation:{x:"-2.7139",y:"1.5572",z:"2.7139"},scale:{x:"2.1000",y:"2.1000",z:"2.1000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1LjmAdYQCLBjwv4S2oFkEzyHVkomAf5MrW",token_id:"25128"},position:{x:"-71.0000",y:"15.5000",z:"-60.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"2.9000",y:"2.9000",z:"2.9000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"669579"},position:{x:"110.0000",y:"32.5000",z:"-9.0000"},rotation:{x:"0.0000",y:"-1.5708",z:"0.0000"},scale:{x:"1.5000",y:"1.5000",z:"1.5000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1C3dCG9XMnP7iT7tUDs55ebr43wfF3TV7k",token_id:"0"},position:{x:"116.0000",y:"7.5000",z:"-29.0000"},rotation:{x:"0.0000",y:"-1.5708",z:"0.0000"},scale:{x:"6.8000",y:"6.8000",z:"6.8000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1RncKS9P56FhSDradukH9SjMSobqE8zpLV",token_id:"1"},position:{x:"97.0000",y:"15.5000",z:"38.0000"},rotation:{x:"-3.1416",y:"0.0000",z:"-3.1416"},scale:{x:"3.9000",y:"3.9000",z:"3.9000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"541252"},position:{x:"-3.3699",y:"15.4139",z:"103.5790"},rotation:{x:"-3.0723",y:"1.1603",z:"3.0780"},scale:{x:"2.6000",y:"2.6000",z:"2.6000"}}],name:"ANAVER.SE TUTORIAL",collection:"tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9",startPoint:{position:{x:-13.304757667642704,y:29.235408631687264,z:2.47577463339384},direction:{x:-.9462424199874436,y:.019998666693336952,z:-.32283948944761254}}},dR=!1,pR=window.localStorage,mR=function(){dR=!0,setTimeout((function(){pR.setItem("finishedTutorial",!0)}),18e4,5)},vR={},gR=document.getElementById("connectInfo"),yR=function(e,t){gR.innerHTML="";var n;n=t?"<span style='color:green'></span>":"<span style='color:red'></span>",vR[e]=n;var r="";for(var i in vR)r+="".concat(i," - ").concat(vR[i],"<br>");gR.innerHTML=r},bR={},xR=[],wR=function(e){var t=[];return e.forEach((function(e){e.hasOwnProperty("fa_contract")&&(e.fa={contract:e.fa_contract},e.name=e.token.name,e.display_uri=e.token.display_uri),e.id=e.fa.contract+e.token_id,e.chain="tezos",e.contract=e.fa.contract;var n=generateThumbnail(e,"loadItem");t.push(n)})),t};function _R(e){return _R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_R(e)}function ER(){ER=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:M(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",v={};function g(){}function y(){}function b(){}var x={};l(x,o,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(R([])));_&&_!==n&&r.call(_,o)&&(x=_);var E=b.prototype=g.prototype=Object.create(x);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var u=h(e[i],e,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==_R(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function M(t,n,r){var i=f;return function(a,o){if(i===p)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=k(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?m:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(_R(t)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(T.prototype),l(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(E),l(E,u,"Generator"),l(E,o,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function SR(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function TR(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var MR=(0,Fb.gql)(cR||(cR=TR(["\n  query getProfiles($artists: [String!]!) {\n    holder(where: { address: { _in: $artists } }) {\n      alias\n      address\n      description\n      discord\n      dns\n      email\n      ethereum\n      facebook\n      flag\n      github\n      gitlab\n      inserted_at\n      instagram\n      last_metadata_update\n      logo\n      medium\n      reddit\n      slack\n      support\n      telegram\n      twitter\n      tzdomain\n      website\n    }\n  }\n"]))),kR={},AR=(0,Fb.gql)(hR||(hR=TR(['\n  {\n    token_tag(\n      where: {\n        tag: { name: { _ilike: "anaverse-sem" } }\n        token: {\n          holders: {\n            holder_address: { _eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9" }\n          }\n        }\n      }\n    ) {\n      token {\n        tags {\n          tag {\n            name\n          }\n        }\n      }\n    }\n  }\n']))),IR={};function LR(e,t){return RR.apply(this,arguments)}function RR(){var e;return e=ER().mark((function e(t,n){var r,i;return ER().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],t.forEach((function(e){kR.hasOwnProperty(e)||r.push(e)})),!(r.length>0)){e.next=6;break}return e.next=5,(0,Fb.request)("https://data.objkt.com/v3/graphql",MR,{artists:r}).then((function(e){for(var t in e&&(e.hasOwnProperty("holder")&&e.holder.forEach((function(e){return kR[e.address]=e})),n&&e.tzprofiles[0].alias&&mz(e.tzprofiles[0].alias)),IR)kR[t].seminarist=!0})).catch((function(e){}));case 5:i=e.sent;case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})),RR=function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){SR(a,r,i,o,s,"next",e)}function s(e){SR(a,r,i,o,s,"throw",e)}o(void 0)}))},RR.apply(this,arguments)}(0,Fb.request)("https://data.objkt.com/v3/graphql",AR).then((function(e){e.token_tag.forEach((function(e){e.token.tags.forEach((function(e){0===e.tag.name.indexOf("pres://")&&(IR[e.tag.name.replace("pres://","")]=1)}))}))}));var CR=function(e){return kR[e.address]=e},PR={},OR=function(e,t,n){e.source="BritishLibrary";var r=e.region.split(","),i=parseInt(r[2])/parseInt(r[3]),a=parseInt(1400*i);e.size="".concat(a,",").concat(1400);var o="https://api.bl.uk/image/iiif/".concat(e.ark,"/").concat(e.region,"/").concat(e.size,"/").concat(e.rotation,"/default.jpg");if(t)DR(e,o,t,n);else{var s=document.createElement("div");s.className="gentkProfiles";var u=new Image(200*i,200);u.src=o,u.style.padding="10px",u.style.cursor="pointer",PR[u.src]=u,n&&(desc="".concat(n.name," ").concat(n.artist," ")),desc+=e.vueID;var l=document.createElement("div");l.className="artThumbTitle",l.innerHTML='<div class="artistNames">\n                        <span style="color:black;background:transparent;padding:4px;">'.concat(desc,'</span>\n    <span><a href="http://access.bl.uk/item/viewer/').concat(e.documentSource,"#?cv=").concat(e.vueID,'" target="_blank">Open on British Library</a></span></div>'),s.append(u,l),document.getElementById("importedIIIFContent").append(s),u.addEventListener("click",(function(){kz(),DR(e,o,null,n)}))}},DR=function(e,t,n,r){if(r){r.IIIFdata=e,r.britishLibrary=!0;var i="http://access.bl.uk/item/viewer/".concat(e.documentSource,"#?cv=").concat(e.vueID);r.permalink=i;var a=e.ark+e.vue+Date.now();UB[a]=r,hF(t,{id:a},"IIIF",n)}else fetch("https://api.bl.uk/metadata/iiif/"+e.documentSource+"/manifest.json").then((function(e){return e.json()})).then((function(r){var i={description:"",artist:""};r.metadata.forEach((function(e){switch(e.label){case"Title":i.name=e.value,i.title=e.value;break;case"Date":i.year=e.value;case"Language":case"ShelfMark":i.description+="".concat(e.value," | ")}})),i.IIIFdata=e,i.britishLibrary=!0;var a="http://access.bl.uk/item/viewer/".concat(e.documentSource,"#?cv=").concat(e.vueID);i.permalink=a;var o=e.ark+e.vue+Date.now();UB[o]=i,hF(t,{id:o},"IIIF",n)}))};window.localStorage,new Map;var NR,BR,UR=n(5280);function FR(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var zR=document.createElement("div");zR.className="artistList";var HR,GR,jR={},VR=[],qR=function(){return(0,Fb.request)("https://data.objkt.com/v3/graphql",(0,Fb.gql)(NR||(NR=FR(['\n      {\n        token_tag(\n          where: {\n            tag: { name: { _ilike: "anaverse-sem" } }\n            token: {\n              holders: {\n                holder_address: { _eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9" }\n                quantity: { _gt: "0" }\n              }\n            }\n          }\n        ) {\n          token {\n            creators {\n              creator_address\n            }\n            description\n            fa_contract\n            name\n            token_id\n            artifact_uri\n            thumbnail_uri\n            tags {\n              tag {\n                name\n              }\n            }\n            holders {\n              holder_address\n            }\n            extra\n          }\n        }\n      }\n    '])))).then((function(e){return e.token_tag})).then((function(e){return e.forEach((function(e){var t=e.token;t.contract=t.fa_contract,t.tags.forEach((function(e){if(0===e.tag.name.indexOf("gallery://")){var n=e.tag.name.replace("gallery://","");t.gallery_contract=n.substring(0,n.indexOf("/")),t.gallery_token_id=n.substring(n.indexOf("/")+1)}0===e.tag.name.indexOf("lang://")&&(t.lang=" ("+e.tag.name.replace("lang://","")+")")})),t.extra.forEach((function(e){"video/mp4"===e.mime_type&&(t.size=Math.ceil(e.file_size/1e6)+" Mo")})),t.vidsrc="https://assets.objkt.media/file/assets-003/".concat(t.artifact_uri.replace("ipfs://",""),"/artifact");var n="";t.gallery_contract&&t.gallery_token_id&&qO.forEach((function(e){e.contract===t.gallery_contract&&e.id===t.gallery_token_id&&(n=e)})),VR.push(n),t.targetGallery=n,jR[t.contract+t.token_id]={vidsrc:t.vidsrc},t.chain="tezos";var r=ED(t,"loadSeminar");zR.appendChild(r)})),XR(),zR}))},WR=function(e,t,n){document.getElementById("videoGuide")&&document.getElementById("videoGuide").remove();var r=document.createElement("div");r.id="videoGuide",r.style="z-index:49;\n  position:absolute;\n    left:75%;\n    top:0px;\n  ",yz&&(r.style.left="calc( 75% - 70px )");var i=document.createElement("video");i.id="vidsem",i.controls=!0,t&&(i.poster=t);var a=document.createElement("source"),o=document.createElement("button");o.innerText="x",o.className="vidbuttons",o.style="width: 20px",o.addEventListener("click",(function(){i.remove(),a.src=null,r.remove(),h.innerHTML="",h.style.display="none"})),i.width=.25*window.innerWidth,i.addEventListener("leavepictureinpicture",(function(){return r.style.opacity=1}));var s=document.createElement("div");s.style="display: flex;justify-content: space-around;";var u=document.createElement("div");u.style.display="none";var l=document.createElement("button");l.innerText="Subtitles",l.className="vidbuttons",l.disabled=!0,l.addEventListener("click",(function(){"none"===u.style.display?u.style.display="block":u.style.display="none"}));var c=document.createElement("button");c.innerText="Float video",c.className="vidbuttons",c.addEventListener("click",(function(){return e=i,void(document.pictureInPictureElement?(document.exitPictureInPicture(),e.parentElement.style.opacity=1):document.pictureInPictureEnabled&&e.requestPictureInPicture().then((function(t){return e.parentElement.style.opacity=0})));var e})),c.disabled=!0,s.append(l,c,o),i.preload="none",i.setAttribute("crossorigin","anonymous"),i.addEventListener("loadeddata",(function(){i.readyState>=1&&(c.disabled=!1)})),a.src=e,a.type="video/mp4",i.append(a);var h=document.getElementById("subtitles");jR[n].hasOwnProperty("subtitles")&&(l.disabled=!1,jR[n].subtitles.forEach((function(e){var t=document.createElement("div");t.className="tracksSubsSelects",t.innerText=e.lang+" - "+e.author.substring(0,8)+"",u.append(t),t.setAttribute("data-state","inactive");var n=document.createElement("track"),r=e.lang+" - "+e.author;n.srclang=e.lang,n.src=e.src,n.kind="subtitles",n.label=r,n.id=r,i.append(n);var a=i.textTracks.getTrackById(r);t.addEventListener("click",(function(){t.style.color="black",a.mode="showing",t.setAttribute("data-state","active")})),a.addEventListener("cuechange",(function(e){a.mode="hidden",h.style.display="block";try{var t=a.activeCues[0].getCueAsHTML();h.innerText=t.textContent}catch(e){}}))}))),r.append(i,s,u),document.body.append(r)},XR=function(){return(0,Fb.request)("https://data.objkt.com/v3/graphql",(0,Fb.gql)(BR||(BR=FR(['\n      {\n        token_tag(\n          where: {\n            tag: { name: { _eq: "anaverse-sem-subtitle" } }\n            token: {\n              holders: {\n                holder_address: { _eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9" }\n                quantity: { _gt: "0" }\n              }\n            }\n          }\n        ) {\n          token {\n            creators {\n              creator_address\n            }\n            fa_contract\n            name\n            token_id\n            artifact_uri\n            thumbnail_uri\n            tags {\n              tag {\n                name\n              }\n            }\n            holders {\n              holder_address\n            }\n            extra\n            attributes {\n              attribute {\n                name\n                value\n              }\n            }\n          }\n        }\n      }\n    '])))).then((function(e){return e.token_tag})).then((function(e){e.forEach((function(e){e=e.token;var t,n,r="",i=e.creators[0].creator_address;e.attributes.forEach((function(e){switch(e.attribute.name){case"seminar":var i=e.attribute.value;t=i.substring(0,i.indexOf("/")),n=i.substring(i.indexOf("/")+1);break;case"lang":r=e.attribute.value}}));var a="https://assets.objkt.media/file/assets-003/".concat(e.artifact_uri.replace("ipfs://",""),"/artifact");if(jR.hasOwnProperty(t+n)){var o=jR[t+n];o.hasOwnProperty("subtitles")||(o.subtitles=[]),o.subtitles.push({lang:r,author:i,src:a})}}))}))};function YR(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var KR={},JR=function(e,t){var n=document.createElement("meta");n.setAttribute("property","og:image"),n.setAttribute("content",t);var r=document.createElement("meta");r.setAttribute("name","twitter:image"),r.setAttribute("content",t);var i=document.createElement("meta");i.setAttribute("property","og:title"),i.setAttribute("content",e);var a=document.createElement("meta");a.setAttribute("name","og:title"),a.setAttribute("content",e),document.head.append(n,r,i,a)},ZR=function(){var e="oo"+Array(49).fill(0).map((function(e){return"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"[58*Math.random()|0]})).join("");return console.log("Generating random hash"),console.log(e),e},QR=function(){JR("ANAVER.SE - generative stereoscopic experiments","https://anaver.se/anaverse-splash.png");var e={room:[],fp:[],sky:[]};for(var t in KR)KR[t].tag.hasOwnProperty("room")&&e.room.push(KR[t]);if(jn>=6&&jn<20)$F({skyboxUrl:"./initial_skybox.js",tag:{anaverse:!0,skybox:!0},type:"skybox"},0,ZR(),"",!0,!1);else for(var n in KR)21525===KR[n].id&&$F(KR[n],0,ZR(),"",!0,!1);e.room.length>0&&(r["Choix alatoire"].fin=performance.now(),e.room.forEach((function(e){8376===e.id&&$F(e,0,ZR(),"RANDOM CHAPEL")})))},$R=[{room:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"479112",blockchain:"tezos"},skybox:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"531100",blockchain:"tezos"},gallery:[{tokenType:"tezos",tezosMetaData:{contract:"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",token_id:"63922"},position:{x:"0.0000",y:"3.5000",z:"15.0000"},rotation:{x:"3.1400",y:"0.0000",z:"3.1400"},scale:{x:"2.7000",y:"2.7000",z:"2.7000"}}],startPoint:{position:{x:.11944217486811551,y:9.651916724789947,z:-.6357153710913611},direction:{x:-.001654686534684842,y:.11693555110770382,z:.9931381267978837}},name:"Single01",timeId:"2024-02-04T13:24:17.871Z"},{room:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"426153",blockchain:"tezos"},skybox:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"527356",blockchain:"tezos"},gallery:[{tokenType:"tezos",tezosMetaData:{contract:"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",token_id:"255433"},position:{x:"0.8809",y:"2.6584",z:"28.6037"},rotation:{x:"3.0484",y:"-0.0035",z:"3.1413"},scale:{x:"2.6100",y:"2.6100",z:"2.6100"}}],startPoint:{position:{x:.11944217486811551,y:9.651916724789947,z:-.6357153710913611},direction:{x:-.001654686534684842,y:.11693555110770382,z:.9931381267978837}},name:"Single02",timeId:"2024-02-04T13:44:13.303Z"},{room:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"1339956",name:"longkoitang",blockchain:"tezos"},skybox:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"1488105",name:"",blockchain:"tezos"},gallery:[{tokenType:"tezos",tezosMetaData:{contract:"KT1LjmAdYQCLBjwv4S2oFkEzyHVkomAf5MrW",token_id:"25620"},position:{x:"3.0000",y:"4.2300",z:"28.6100"},rotation:{x:"-3.1416",y:"0.0000",z:"-3.1416"},scale:{x:"3.0200",y:"3.0200",z:"3.0200"}}],startPoint:{position:{x:.11944217486811551,y:9.651916724789947,z:-.6357153710913611},direction:{x:-.001654686534684842,y:.11693555110770382,z:.9931381267978837}},name:"Single03",timeId:"2024-02-04T13:47:52.843Z"},{room:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"1188724",blockchain:"tezos"},skybox:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"534518",blockchain:"tezos"},gallery:[{tokenType:"tezos",tezosMetaData:{contract:"KT1DYnie4dm196oEtkNvahDvsBvQREQrDVAP",token_id:"20"},position:{x:"-1.0000",y:"5.2000",z:"-11.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"3.6800",y:"3.6800",z:"3.6800"}}],startPoint:{position:{x:-8399512677892189e-30,y:10.683992806515002,z:-6829806175397558e-30},direction:{x:.0035758241411601196,y:.17115317892211684,z:-.9852379422386074}},name:"Single04",timeId:"2024-02-04T14:14:47.302Z"},{room:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"541809",blockchain:"tezos"},skybox:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"1008270",blockchain:"tezos"},gallery:[{tokenType:"tezos",tezosMetaData:{contract:"KT1SwhrE6Nw5BpHb2PgxLKTAAiFD1DctKDYh",token_id:"0"},position:{x:"30.0000",y:"18.0800",z:"37.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"3.0000",y:"3.0000",z:"3.0000"}}],startPoint:{position:{x:30.39380019125482,y:23.857357799392283,z:51.280951858930045},direction:{x:.012387406352336927,y:.09505995115388405,z:-.9953944734880154}},name:"Single05",timeId:"2024-02-04T14:19:41.783Z"}],eC="",tC=[],nC=function(e,t,n,r){var i=document.createElement("div");i.className="serviceContainer";var a=document.createElement("div");a.innerText=e.name,a.className="serviceLoaderButton",a.addEventListener("click",(function(){t(),r||(tC.push(function(e){var t=document.createElement("div");t.className="serviceContainer";var n=document.createElement("div");n.innerText=e.name,n.className="serviceLoaderButton";var r=document.createElement("div");return r.className="serviceDesc",r.innerText="Terminate "+e.name,n.addEventListener("click",(function(){e.terminate(),kz();var n=[];tC.forEach((function(e){e!=t&&n.push(e)})),tC=[].concat(n)})),t.append(n),t.append(r),t}(e)),kz())}));var o=document.createElement("div");o.className="serviceDesc",o.innerText=e.desc,i.append(a),i.append(o),n.push(i)},rC={"Target wallet":eC};var iC=function(e){var t=document.createElement("div");return t.id="optionDiv",t.append(function(e,t){var n=document.createElement("div");n.style="display:flex;justify-content: space-between;";var r=document.createElement("input");r.type=t,r.value={"Target wallet":rC["Target wallet"]}[e],r.id=e,r.style="width:400px",r.addEventListener("change",(function(){rC[e]=r.value}));var i=document.createElement("div");return i.innerText=e,i.style="margin-right:5px;",n.appendChild(i),n.appendChild(r),n}("Target wallet","text")),t},aC=function e(t,n){if(oC.innerHTML="",t){var r=.05*window.innerWidth,i=r,a=r,o="multiply",s=Hn("svg").attr("width",i*t.length).attr("height",a).attr("viewBox","0 0 ".concat(i*t.length," ").concat(a)).attr("xmlns","http://www.w3.org/2000/svg").style("cursor","pointer");s.append("text").attr("font-family","sans-serif").attr("x",i*t.length*.5+.1*i).attr("y",.95*a).attr("fill","rgb(0,255,235)").attr("font-size",1.2*i).attr("font-weight","bolder").attr("text-anchor","middle").style("mix-blend-mode",o).text(t),s.append("text").attr("font-family","sans-serif").attr("x",i*t.length*.5+.05*i).attr("y",.95*a).attr("fill","rgb(255,0,0)").attr("font-size",1.2*i).attr("font-weight","bolder").attr("text-anchor","middle").style("mix-blend-mode",o).text(t),oC.style.left=window.innerWidth/2-i*t.length/2+"px",oC.style.top=window.innerHeight/2-r/2+"px",oC.appendChild(s.node())}n&&setTimeout((function(){e("")}),n)},oC=document.getElementById("info");function sC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||uC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uC(e,t){if(e){if("string"==typeof e)return lC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lC(e,t):void 0}}function lC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cC,hC={},fC=function(e,t,n){if(e)for(var r=0;r<n;r++){var i=t[r];if(!e.has(i.level)){var a=new Map;e.set(i.level,a)}var o=e.get(i.level);o.set(i.tokenId,i),e.set(i.level,o)}else{for(var s=new Map,u=0;u<n;u++){var l=t[u];if(!s.has(l.level)){var c=new Map;s.set(l.level,c)}var h=s.get(l.level);h.set(l.tokenId,l),s.set(l.level,h)}e=s}var f,d=(f=e,function(e){if(Array.isArray(e))return lC(e)}(f)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(f)||uC(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort((function(e,t){var n=sC(e,2),r=n[0],i=(n[1],sC(t,2)),a=i[0];return i[1],r-a}));return new Map(d)};"undefined"!=typeof OffscreenCanvas?cC=new Worker(new URL(n.p+n.u(640),n.b)):console.log("This browser does not support offscreen canvas.");var dC=function(e){aC("CLEARING BLOCKS",2e3),function(e){hC[e](),delete hC[e]}(e),pC[e].slider.clear(),pC[e].slider.remove(),pC[e]=null,delete pC[e]},pC={},mC=new Nl(1.5,.3,.75),vC=new Ip(mC),gC=new rc(1.5,.3);"undefined"!=typeof OffscreenCanvas&&(cC.onmessage=function(e){return yC(e.data)});var yC=function(e){if(pC[e.feedType]){var t=new Tf,n=new Ol(mC,CF.whiteFull),r=new Nd(vC,CF.blackLineLone);n.position.set(0,0,-.3755),r.position.set(0,0,-.3755);var i=new pd(e.img.data,1e3,200);i.colorSpace=$a,i.generateMipmaps=!0,i.flipY=!0,i.magFilter=Ii,i.minFilter=Pi,i.generateMipmaps=!0,i.needsUpdate=!0;var a=new Vu({map:i}),o=new Ol(gC,a);r.userData.isBlockPanel=1,t.userData.item=e,t.userData.focused=!1,t.add(o,n,r),t.userData.isBlockDisplay=!0;var s,u=pC[e.feedType].group;e.hasOwnProperty("level")?s="string"==typeof e.level?e.level:JSON.stringify(e.level):e.token.hasOwnProperty("level")&&(s="string"==typeof e.token.level?e.token.level:JSON.stringify(e.token.level)),u[s].add(t),aC(),t.position.y=50;var l=t.parent.children.length;dS.to(t.position,{duration:2,y:.35*l-2})}},bC=function(e){var t=e.children[0],n=e.children[1];dS.to(t.position,{duration:2,y:-20,ease:"power1.in"}),dS.to(n.position,{duration:2,y:-20,ease:"power1.in"}),setTimeout((function(){n.children.forEach((function(e){e.children.forEach((function(e){e.material.map&&e.material.dispose()}))})),e.remove(t),e.remove(n)}),2e3)},xC=function(e,t,n,r){pC.hasOwnProperty(t)||(Lz(),pC[t]={map:new Map,group:{},blocks:new Tf,slider:new Tf,added:!0,lowerblock:999999999999},pC[t].blocks.add(pC[t].slider),pC[t].blocks.userData={tokenType:"datavis",feedType:t,args:r},n?(pC[t].blocks.position.set(parseFloat(n.position.x),parseFloat(n.position.y),parseFloat(n.position.z)),pC[t].blocks.rotation.set(parseFloat(n.rotation.x),parseFloat(n.rotation.y),parseFloat(n.rotation.z)),pC[t].blocks.scale.set(parseFloat(n.scale.x),parseFloat(n.scale.y),parseFloat(n.scale.z)),cH.add(pC[t].blocks)):(hH.add(pC[t].blocks),pC[t].blocks.position.y=1,JB(pC[t].blocks)));var i=pC[t].map,a=pC[t].group,o=pC[t].slider,s=0,u=0,l=e.size<=24?0:e.size-24;switch(t){case"teztok-nft-livefeed":case"teztok-nft-lat-transact":case"teztok-sales-nft-livefeed":case"artblocks-nft-livefeed":case"gmstudio-nft-livefeed":case"bright-nft-livefeed":case"genart-nft-livefeed":case"verse-nft-livefeed":case"superrare-nft-livefeed":case"artblocks%3Agmstudio%3Abright%3Agenart%3Asuperrare%3Averse-nft-livefeed":u=!0}pC[t].added&&(nB(!0),pC[t].added=!1),e.forEach((function(e,n){if(s>=l)if(i.has(n)){var r=i.get(n);r.size!=e.size&&e.forEach((function(e,n){r.has(n)||(r.set(n,e),cC.postMessage({operation:e,feedType:t}))}))}else{n<pC[t].lowestBlock&&(pC[t].lowestBlock=n),i.set(n,e),function(e,t,n,r,i){var a=new Tf,o=i?JSON.stringify(10*Math.cos(t/13*Math.PI)):0;o=parseFloat(o);var s=i?10*Math.sin(t/13*Math.PI):-5;a.position.set(o,0,s),a.rotation.y=i?-t/13*Math.PI-Math.PI/2:0;var u=e;"number"==typeof e&&(u=JSON.stringify(u)),a.name=JSON.stringify(u),n[u]=a;var l=function(e){var t=e,n=document.createElement("canvas"),r=n.getContext("2d");n.width=100,n.height=100*t.length,r.fillStyle="white",r.fillRect(0,0,100,100*t.length),r.textAlign="center",r.font="bolder 90px monospace";for(var i=0;i<t.length;i++)r.fillStyle="black",i>3&&(r.fillStyle="red"),r.strokeRect(0,100*i,100,100),r.fillText(t[i],50,100*(i+1)-25);return n.toDataURL()}(u);dF(l).then((function(e){var n=new Tf;n.position.x=-1;var o=new Vu({map:e}),s=u.length/10,l=new Nl(.1,s,.1),c=new Ip(l),h=new rc(.1,s),f=new Ol(h,o),d=new Ol(l,CF.whiteFull);d.position.z=-.051;var p=new Nd(c,CF.blackLineLone);p.position.z=-.051,n.add(f,d,p);var m=i?10*Math.cos((t-.42)/13*Math.PI):-1.15,v=i?10*Math.sin((t-.42)/13*Math.PI):-5;n.position.set(m,0,v),n.rotation.y=i?-t/13*Math.PI-Math.PI/2:0,r.add(n),r.add(a)}))}(n,s,a,o,u);for(var c=(o.children.length-42)/2,h=0;h<c;h++)setTimeout((function(){bC(o)}),3e3*h);e.forEach((function(e,n){cC.postMessage({operation:e,feedType:t})}))}s++}))},wC={};["artblocks","gmstudio","bright","genart","verse","superrare","artblocks%3Agmstudio%3Abright%3Agenart%3Asuperrare%3Averse"].forEach((function(e){var t={interval:0,currentFeed:0};wC[e]=t}));var _C,EC,SC,TC,MC=function(e){kC(e),aC("CALLING ARTACLE",1500),wC[e].interval=setInterval((function(){kC(e)}),25e3)},kC=function(e){fetch("https://artacle.io/api/activity/transactionsV3?platform=".concat(e)).then((function(e){return e.json()})).then((function(t){var n=t.transactions;n.forEach((function(e){e.tokenId=e.tokenName+e.token,e.level=parseInt(e.ts/3e5),e.token={type:"ETH",name:e.tokenName,editions:1,platform:e.tags[0],artist_profile:{alias:e.collectionArtist},display_uri:e.imageUrl,txnHash:e.txnHash,tokenId:e.tokenName+e.token,url:"https://artacle.io/project/".concat(e.projectId,"/token/").concat(e.token),metadata:{id:e.token,projectId:e.projectId}},e.txnHash.length>0&&(e.permalink="https://etherscan.io/tx/"+e.txnHash),e.type="S"===e.opType?"SALE":"LISTING","S"===e.opType&&(e.previousSale={profit:{profit_in_crypto:e.valueETH-e.prevValueETH,profit_in_usd:e.valueUSD-e.prevValueUSD}}),e.price=e.valueUSD,e.seller_profile={alias:e.fromWallet,address:e.fromWallet},e.buyer_profile={alias:e.toWallet,address:e.toWallet}}));var r=wC[e].currentFeed;r=fC(r,n,200),xC(r,"".concat(e,"-nft-livefeed"))}))};function AC(e){return AC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AC(e)}function IC(){IC=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:M(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",v={};function g(){}function y(){}function b(){}var x={};l(x,o,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(R([])));_&&_!==n&&r.call(_,o)&&(x=_);var E=b.prototype=g.prototype=Object.create(x);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var u=h(e[i],e,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==AC(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function M(t,n,r){var i=f;return function(a,o){if(i===p)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=k(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?m:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(AC(t)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(T.prototype),l(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(E),l(E,u,"Generator"),l(E,o,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function LC(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function RC(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function CC(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){RC(a,r,i,o,s,"next",e)}function s(e){RC(a,r,i,o,s,"throw",e)}o(void 0)}))}}var PC=0,OC=function(e,t){FC(e,t),aC("CALLING TEZTOK");var n="sales"===e?"teztok-sales-nft-livefeed":"teztok-nft-livefeed",r=setInterval((function(){FC(e)}),12e3);!function(e,t){hC[e]=function(){return clearInterval(r)}}(n)},DC=new Map;function NC(e){return BC.apply(this,arguments)}function BC(){return BC=CC(IC().mark((function e(t){var n,r;return IC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t.forEach((function(e,t,r){e.forEach((function(e,t){"SALE"===e.implements&&1===e.token.editions&&(DC.get(e.id)||(DC.set(e.id,!0),n.push(e)))}))})),r=0;case 3:if(!(r<n.length)){e.next=9;break}return e.next=6,XC(n[r]);case 6:r++,e.next=3;break;case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)}))),BC.apply(this,arguments)}function UC(e){return e.forEach((function(e){e.token.mime=e.token.mime_type,e.tokenId=e.id,e.seller_address===iN||e.artist_address===iN||e.buyer_address===iN?e.userInvolved=!0:e.userInvolved=!1})),e}function FC(e,t){fetch("https://livefeed-proxy.teztok.com/feed").then((function(e){return e.json()})).then((function(n){var r=UC(n.events),i="teztok-nft-livefeed";if("sales"===e){var a=[];r.forEach((function(e){"SALE"===e.implements&&1===e.token.editions&&a.push(e)})),r=a,i="teztok-sales-nft-livefeed"}NC(PC=fC(PC,r,r.length)).then((function(n){"sales"===e&&n.forEach((function(e,t,n){e.previousSale||n.delete(t)})),xC(PC=n,i,t,0)}))}))}var zC,HC={latestGeneralTransactions:(0,Fb.gql)(_C||(_C=LC(['\n    query latestGeneralTransactions {\n      events(\n        limit: 500\n        order_by: { opid: desc }\n        where: {\n          token: { metadata_status: { _eq: "processed" } }\n          implements: { _eq: "SALE" }\n          price_in_usd: { _gte: "100000000" }\n        }\n      ) {\n        type\n        timestamp\n        seller_address\n        buyer_address\n        price\n\n        implements\n        level\n        price_in_usd\n        token_id\n        id\n        fa2_address\n        token {\n          fa2_address\n          token_id\n          editions\n          name\n          description\n          price\n          platform\n          last_sale_at\n          display_uri\n          artifact_uri\n          last_sales_price\n          artist_profile {\n            account\n            alias\n            twitter\n          }\n        }\n\n        seller_profile {\n          alias\n        }\n\n        buyer_profile {\n          account\n          alias\n        }\n      }\n    }\n  ']))),latestSales:(0,Fb.gql)(EC||(EC=LC(['\n    query GetLatestSales($id: String!) {\n      events(\n        where: { implements: { _eq: "SALE" }, seller_address: { _eq: $id } }\n        order_by: { opid: desc }\n        limit: 100\n      ) {\n        type\n        timestamp\n        seller_address\n        buyer_address\n        price\n\n        implements\n        level\n        price_in_usd\n        token_id\n        id\n        fa2_address\n        token {\n          fa2_address\n          token_id\n          editions\n          name\n          description\n          price\n          platform\n          last_sale_at\n          display_uri\n          artifact_uri\n          last_sales_price\n          artist_profile {\n            account\n            alias\n            twitter\n          }\n        }\n\n        seller_profile {\n          alias\n        }\n\n        buyer_profile {\n          account\n          alias\n        }\n      }\n    }\n  ']))),latestPurchases:(0,Fb.gql)(SC||(SC=LC(['\n    query GetLatestPurchases($id: String!) {\n      events(\n        where: { implements: { _eq: "SALE" }, buyer_address: { _eq: $id } }\n        order_by: { opid: desc }\n        limit: 100\n      ) {\n        type\n        timestamp\n        seller_address\n        implements\n        buyer_address\n        price\n        price_in_usd\n        level\n        token_id\n        id\n        fa2_address\n        token {\n          fa2_address\n          token_id\n          editions\n          name\n          description\n          price\n          platform\n          last_sale_at\n          display_uri\n          artifact_uri\n          last_sales_price\n          artist_profile {\n            account\n            alias\n            twitter\n          }\n        }\n\n        seller_profile {\n          alias\n        }\n\n        buyer_profile {\n          account\n          alias\n        }\n      }\n    }\n  ']))),previousSale:(0,Fb.gql)(TC||(TC=LC(['\n    query previousPrice($token_id: String!, $contract: String!) {\n      events(\n        limit: 2\n        where: {\n          fa2_address: { _eq: $contract }\n          token_id: { _eq: $token_id }\n          implements: { _eq: "SALE" }\n        }\n        order_by: { timestamp: desc }\n      ) {\n        type\n        token {\n          fa2_address\n          token_id\n        }\n        id\n        price\n        price_in_usd\n        timestamp\n      }\n    }\n  '])))},GC=function(){var e=!1;iN&&(e=iN);var t=document.getElementById("Target wallet").value;return t&&(e=t),e},jC=function(e,t){var n;(n=e||GC())?(aC("LATEST SALES",2500),(0,Fb.request)("https://api.teztok.com/v1/graphql",HC.latestSales,{id:n}).then((function(e){var r=UC(e.events),i=[];r.sort((function(e,t){return new Date(e.timestamp)-new Date(t.timestamp)})).forEach((function(e){1===e.token.editions&&(e.level="LAT-SALES",e.token.level="LAT-SALES",e.price=e.token.last_sales_price,i.push(e))}));var a=new Map;a.set("LAT-SALES",i),NC(a).then((function(e){var r=e.get("LAT-SALES").sort((function(e,t){return new Date(t.timestamp)-new Date(e.timestamp)}));a.set("LAT-SALES",r),xC(a,"teztok-nft-lat-sales",t,{targetWallet:n})}))}))):aC("NO TARGET FOR ANALYSIS",2500)},VC=function(e,t){var n;(n=e||GC())?(aC("LATEST PURCHASES",2500),(0,Fb.request)("https://api.teztok.com/v1/graphql",HC.latestPurchases,{id:n}).then((function(e){var r=e.events.sort((function(e,t){return new Date(e.timestamp)-new Date(t.timestamp)}));r.forEach((function(e){e.level="LAT-PURCHASES",e.token.level="LAT-PURCHASES",e.token.price=e.price}));var i=new Map;i.set("LAT-PURCHASES",r),NC(i).then((function(e){var r=e.get("LAT-PURCHASES").sort((function(e,t){return new Date(t.timestamp)-new Date(e.timestamp)}));i.set("LAT-PURCHASES",r),xC(i,"teztok-nft-lat-purchases",t,{targetWallet:n})}))}))):aC("NO TARGET FOR ANALYSIS",2500)},qC=function(e){return Math.floor(e/864e5)},WC=function(e){aC("LATEST LARGE TRANSACTIONS",2500),(0,Fb.request)("https://api.teztok.com/v1/graphql",HC.latestGeneralTransactions).then((function(t){var n=UC(t.events),r=[],i=qC(Date.now());n.forEach((function(e){"SALE"===e.implements&&1===e.token.editions&&(e.level=qC(new Date(e.timestamp))-i,e.level>=-20&&(e.level+=" days",r.push(e)))}));var a=fC(0,n=r,n.length);NC(a).then((function(t){xC(a=t,"teztok-nft-lat-transact",e,0)}))}))};function XC(e){return YC.apply(this,arguments)}function YC(){return(YC=CC(IC().mark((function e(t){return IC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Fb.request)("https://api.teztok.com/v1/graphql",HC.previousSale,{token_id:t.token_id,contract:t.fa2_address}).then((function(e){var n=e.events[0],r=e.events[1];if(r){var i={previousSale:{price:r.price,price_in_usd:r.price_in_usd},profit:{profit_in_crypto:n.price-r.price,profit_in_usd:n.price_in_usd-r.price_in_usd}};i&&r.price>0&&n.price>0&&(t.previousSale=i)}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,Fb.gql)(zC||(KC=["\n  query {\n    activityPage(filter: {}, first: 100) {\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n      nodes {\n        id\n        entryType\n        artwork {\n          title\n          artist {\n            name\n          }\n        }\n        amount\n      }\n    }\n  }\n"],JC||(JC=KC.slice(0)),zC=Object.freeze(Object.defineProperties(KC,{raw:{value:Object.freeze(JC)}}))));var KC,JC,ZC=[];nC({name:"TezTok",desc:"TezTok indexes and normalizes NFT related data on the Tezos Blockchain. The indexer aggregates and stores an event history for all tokens. Every time a new event occurs on a token, the indexer processes the event history and re-creates a token model along with listings, offers, tags, and holdings. TezTok is accountable for all the data presented, the anaver.se only loads such data and does not have its own data analysis service."},(function(){var e=[],t={livefeed:{name:"Live feed",desc:"The TezTok NFT live feed. The use of this NFT LiveFeed is at your own risk. It is your own responsibility to check if the drops displayed are legitimate. The data displayed is to the best of of the TezTok team knowledge. On examination, you will be redirected to the objkt.com website.",terminate:function(){return dC("teztok-nft-livefeed")}},salefeed:{name:"Live Sales",desc:"The TezTok NFT live feed, but only showing 1/1 secondary market sales.",terminate:function(){return dC("teztok-sales-nft-livefeed")}},latsales:{name:"Latest sales",desc:"The latest 1/1 NFT sales of the targeted wallet (latest 100 transactions).",terminate:function(){return dC("teztok-nft-lat-sales")}},latpurchases:{name:"Latest purchases",desc:"The wallet's latest NFT acquisitions (lastest 100 transactions).",terminate:function(){return dC("teztok-nft-lat-purchases")}},lattransact:{name:"Latest transactions",desc:"The 500 latest transactions above USD$100.",terminate:function(){return dC("teztok-nft-lat-transact")}}};nC(t.livefeed,OC,e),nC(t.lattransact,WC,e),nC(t.latsales,jC,e),nC(t.latpurchases,VC,e);var n=document.getElementById("galleryMainWindow");n.innerHTML="",n.append(iC()),e.forEach((function(e){return n.append(e)}))}),ZC,1),nC({name:"Artacle",desc:"Artacle provides transaction feeds for platforms such as Artblocks and gmStudio. It aims at providing AI-powered insights on generative art collections, including rarity scores, sales data and analytics."},(function(){var e=[],t={artaclelivefeed:{name:"Artacle 1/1",desc:"A cumulative 1/1 feed including generative art platforms and 1/1 platform SuperRare.",terminate:function(){return dC("artblocks%3Agmstudio%3Abright%3Agenart%3Asuperrare%3Averse-nft-livefeed")},start:function(){return MC("artblocks%3Agmstudio%3Abright%3Agenart%3Asuperrare%3Averse")}},superrarelivefeed:{name:"SUPERRARE",desc:"SUPERRARE is a community aiming to revolutionize the economics of human creativity.",terminate:function(){return dC("superrare-nft-livefeed")},start:function(){return MC("superrare")}},artblockslivefeed:{name:"Artblocks live",desc:"Live feed of Artblocks transactions.",terminate:function(){return dC("artblocks-nft-livefeed")},start:function(){return MC("artblocks")}},verselivefeed:{name:"Verse live",desc:"Live feed of Verse transactions.",terminate:function(){return dC("verse-nft-livefeed")},start:function(){return MC("verse")}},gmstudiolivefeed:{name:"GMstudio live",desc:"Live feed of GMstudio transactions.",terminate:function(){return dC("gmstudio-nft-livefeed")},start:function(){return MC("gmstudio")}},brightlivefeed:{name:"Bright Moments",desc:"Live feed of Bright Moments transactions.",terminate:function(){return dC("bright-nft-livefeed")},start:function(){return MC("bright")}},genartlivefeed:{name:"GENART live",desc:"GENART is a fully on-chain generative art platform that is operated as a DAO. ",terminate:function(){return dC("genart-nft-livefeed")},start:function(){return MC("genart")}}};for(var n in t)nC(t[n],t[n].start,e);var r=document.getElementById("galleryMainWindow");r.innerHTML="",r.append(iC()),e.forEach((function(e){return r.append(e)}))}),ZC,1);var QC=new Audio("/sound/jetpack/jetpack_start.mp3");QC.volume=1;var $C=new Audio("/sound/jetpack/jetpack_croisiere.mp3");$C.volume=1,$C.loop=!0;var eP=!0,tP=function(){"undefined"!=typeof OffscreenCanvas&&(QC.play(),eP=!0,setTimeout((function(){eP&&$C.play()}),2e3))},nP=function(){QC.pause(),$C.pause(),eP=!1},rP=new Audio("/sound/steps/steps.mp3");rP.volume=.1;for(var iP=function(e){"undefined"!=typeof OffscreenCanvas&&(e?rP.play():rP.pause())},aP=[],oP=1;oP<=4;oP++)aP.push(new Audio("/sound/ball/ball"+oP+".wav"));var sP,uP,lP,cP=function(e){var t=aP[Math.floor(Math.random()*aP.length)];t.volume=e>=1?1:e,t.play()},hP=new Audio("/sound/camera/cameraclick.mp3");function fP(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var dP,pP,mP,vP,gP=(0,Fb.gql)(lP||(lP=fP(["\n  query GetObjktsByHolderPaged(\n    $limit: Int!\n    $offset: Int!\n    $where: token_holder_bool_exp = {}\n    $order_by: [token_holder_order_by!] = {}\n  ) {\n    token_holder(\n      limit: $limit\n      offset: $offset\n      where: $where\n      order_by: $order_by\n    ) {\n      token {\n        ...TokenDefault\n        __typename\n\n        fa {\n          collection_type\n          contract\n          name\n        }\n      }\n      __typename\n      holder {\n        alias\n      }\n    }\n  }\n\n  fragment TokenDefault on token {\n    pk\n    token_id\n    artifact_uri\n    description\n    display_uri\n    thumbnail_uri\n    timestamp\n    mime\n    name\n    creators {\n      creator_address\n      holder {\n        alias\n        twitter\n        logo\n        tzdomain\n      }\n    }\n    attributes {\n      attribute {\n        id\n        name\n        type\n        value\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n"]))),yP={},bP={},xP={},wP=function e(t,n,r){return(0,Fb.request)("https://data.objkt.com/v3/graphql",gP,{where:{holder_address:{_eq:t},quantity:{_gt:0},token:{fa:{live:{_eq:!0}}}},order_by:{last_incremented_at:"desc"},limit:r||500,offset:n||0}).then((function(i){i.token_holder.forEach((function(e){if(e.token.id=e.token.fa.contract+e.token.token_id,e.token.hasOwnProperty("creators")&&e.token.creators[0]){var t=e.token.creators[0].creator_address;xP.hasOwnProperty(t)||(xP[t]={}),xP[t][e.token.id]=e.token,bP.hasOwnProperty(t)||(bP[t]=e.token.creators[0].alias),UB[e.token.id]=e.token}})),500===i.token_holder.length&&500===r?e(t,n+500,500):(EP(xP),yR("OBJKT tokens retrieval",1))})).catch((function(e){console.log("Failed to retrieve your OBJKT tokens"),console.log(e),yR("OBJKT tokens retrieval",0)}))},_P=function(e,t){return(0,Fb.request)("https://data.objkt.com/v3/graphql",function(e,t){return(0,Fb.gql)(uP||(uP=fP(['\n  query getTokensByContract {\n    token(\n      where: { fa_contract: { _eq: "','" }, token_id: {_eq: "','"} }\n    ) {\n     token_id\n     artifact_uri\n     description\n     display_uri\n     mime\n     thumbnail_uri\n     timestamp\n     name\n     creators {\n       creator_address\n       holder {\n        alias\n        address\n        twitter\n        logo\n        tzdomain\n      }\n     }\n     attributes {\n       attribute {\n         id\n         name\n         type\n         value\n         __typename\n       }\n       __typename\n     }\n     __typename\n          fa {\n           collection_type\n           contract\n           name\n           \n         }\n       \n     }\n }\n'])),e,t)}(e,t)).then((function(n){var r=e,i=n.token[0].token_id,a=n.token[0];a.contract=r,a.token_id=i,a.chain="tezos",a.artist=a.creators[0].holder.alias,a.link='<span>Check on <a href="https://objkt.com/tokens/'.concat(a.contract,"/").concat(a.token_id,'" target="_blank">objkt</a></span>'),a.id=e+"/"+t;var o=ED(a,"loadItem"),s=document.getElementById("importedContractContent");s?s.append(o):CN(a)}))},EP=function(e){for(var t in e)for(var n in e[t]){var r=e[t][n];r.chain="tezos",r.contract=r.fa.contract,r.creators.forEach((function(e){var t=e.holder;t.address=e.creator_address,CR(t)})),FB[t]=ED(r,"displayCollection")}},SP=function(e){var t={},n=0;e.forEach((function(e){if(n++,e.hasOwnProperty("objktMetaData")&&(e.tezosMetaData=e.objktMetaData),e.hasOwnProperty("contract")&&e.hasOwnProperty("token_id")&&(e.tezosMetaData={contract:e.contract,token_id:e.token_id}),n<500){var r=e.tezosMetaData.contract+e.tezosMetaData.token_id;t.hasOwnProperty(r)||(t[r]="{\n          token_id: { _eq: ".concat(JSON.stringify(e.tezosMetaData.token_id)," },\n          fa_contract: { _eq: ").concat(JSON.stringify(e.tezosMetaData.contract)," },\n        }"))}}));var r=[];for(var i in t)r.push(t[i]);var a="query{\n    token(where: {_or:[".concat(r,"]}) {\n      description\n      artifact_uri\n      content_rating\n      display_uri\n      metadata\n      mime\n      name\n      thumbnail_uri\n      timestamp\n      creators{\n        creator_address\n        holder {\n          alias\n          twitter\n          address\n        }\n      }\n      fa{\n        contract\n      }\n      token_id\n    }\n  }");(0,Fb.request)("https://data.objkt.com/v3/graphql",a).then((function(t){e.forEach((function(e){t.token.forEach((function(t){if(t.fa.contract===e.tezosMetaData.contract&&t.token_id===e.tezosMetaData.token_id)if(t.content_rating&&AB(),t.display_uri||t.artifact_uri){var n=t.display_uri?"https://assets.objkt.media/file/assets-003/"+t.display_uri.replace("ipfs://","")+"/display":"https://assets.objkt.media/file/assets-003/"+t.artifact_uri.replace("ipfs://","")+"/artifact",r={position:e.position,rotation:e.rotation,scale:e.scale};t.contract=t.fa.contract,t.chain="tezos",t.blockchain="tezos";var i=IB?"?ref=".concat(IB):"",a="https://objkt.com/tokens/".concat(t.fa.contract,"/").concat(t.token_id).concat(i);t.url=a;var o=t.fa.contract+JSON.stringify(t.token_id);t.artist="",t.creators.forEach((function(e){t.artist+=" ".concat(e.holder.alias)})),UB[o]=t;var s=!!e.hasOwnProperty("note")&&e.note;hF(n,{id:o},"tezos",r,s)}else console.log("%c [objkt.com] The token ["+t.name+"] was minted without a proper metadata capture.","font-weight:bold;")}))}))})).catch((function(e){console.log(e),aC("GALLERY ERROR",2e3)}))},TP=function(){nB(1),cH.clear(),MP.innerHTML="Final score <br>\n  Valid hits: ".concat(CP.valid,"<br>\n  Invalid hits: ").concat(CP.invalid,"<br>"),YP(),setTimeout((function(){MP.innerHTML="",MP.style.display="none"}),5e3)},MP=document.getElementById("targetInfo"),kP=function(){jP(OP[0],Math.floor(60+30*Math.random())),cP(1),OP[0].colliding=!0},AP={},IP=function(){nB(0),dP=parseInt(yH.position.x),pP=parseInt(yH.position.y),mP=parseInt(yH.position.z),CP={valid:0,invalid:0,turns:10},VR.forEach((function(e){if(kR.hasOwnProperty(e.curator)&&kR[e.curator].hasOwnProperty("alias")){var t=[];e.gallery.forEach((function(e){"tezos"!==e.tokenType&&"IIIF"!==e.tokenType||t.push(e)})),AP[kR[e.curator].alias]=t}})),MP.style.display="block",GP(),iO(1),document.addEventListener("click",kP),RP()},LP="";function RP(){LP=PP(Object.keys(AP)),MP.innerHTML="Current score <br>\n  Valid hits: ".concat(CP.valid,"<br>\n  Invalid hits: ").concat(CP.invalid,"<br>\n  Turns left: ").concat(CP.turns,'<br>\n  <br><br>\n  You are looking for the piece that is <strong>not</strong> by \n  <span style="background:red;font-weight:bolder;color:white;padding:2px;">').concat(LP,"</span>.");var e=LP;if(LP&&e){for(;LP===e;)e=PP(Object.keys(AP));(vP=PP(AP[e])).id=vP.tezosMetaData.contract+JSON.stringify(vP.tezosMetaData.token_id);var t=[PP(AP[LP]),PP(AP[LP]),vP];!function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}}(t);for(var n=0;n<3;n++){var r=t[n];r.position.x="".concat(dP+3*(n-1),".0000"),r.position.y="".concat(pP,".0000"),r.position.z="".concat(mP-5,".0000"),1===n&&(r.position.z="".concat(mP-7,".0000")),r.rotation.x="0.0000",r.rotation.y="".concat(1-n,".0000"),r.rotation.z="0.0000",r.scale.x="1.0000",r.scale.y="1.0000",r.scale.z="1.0000"}SP(t)}}var CP={valid:0,invalid:0,turns:10},PP=function(e){return e[Math.floor(Math.random()*e.length)]},OP=[],DP=new Eg,NP=new Wo,BP=new js,UP=new _s,FP=new _s,zP=(new _s(0,0,1),new Sm({transparent:!0,opacity:1})),HP=new cm(1,20,20);function GP(){new Gu(16711935),new Gu("blue");var e=new Ol(HP,zP);iH.add(e);var t=.5*(.2*Math.random()+.6);return e.scale.setScalar(t),e.collider=new js(e.position,t),e.velocity=new _s(0,0,0),e.mass=Math.pow(t,3)*Math.PI*4/3,e.position.copy(yH.position),e.colliding=!0,OP.push(e),e}var jP=function(e,t){NP.x=0,NP.y=0,DP.setFromCamera(NP,yH),e.position.copy(yH.position).addScaledVector(DP.ray.direction,3),e.velocity.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).addScaledVector(DP.ray.direction,t).multiplyScalar(.5)};function VP(e,t){for(var n=t.geometry.boundsTree,r=function(){var t=OP[i];if(t.colliding){var r=t.collider;t.velocity.y+=-10*e,r.center.addScaledVector(t.velocity,e),BP.copy(t.collider);var a=!1;if(n.shapecast({intersectsBounds:function(e){return e.intersectsSphere(BP)},intersectsTriangle:function(e){e.closestPointToPoint(BP.center,UP),UP.sub(BP.center);var t=UP.length();if(t<BP.radius){var n=t-BP.radius;UP.multiplyScalar(1/t),BP.center.addScaledVector(UP,n),a=!0}},traverseBoundsOrder:function(e){return e.distanceToPoint(BP.center)-BP.radius}}),a){UP.subVectors(BP.center,r.center).normalize(),t.velocity.reflect(UP);var o=t.velocity.dot(UP);t.velocity.addScaledVector(UP,.5*-o),t.velocity.multiplyScalar(Math.max(1-e,0)),r.center.copy(BP.center),FP.copy(BP.center).addScaledVector(UP,-BP.radius),o>1&&(cP(1/(yH.position.distanceTo(OP[0].position)/3)),cH.children.forEach((function(e){var t;OP[0].position.distanceTo(e.position)<1.5&&(nO(e.userData.id),(t=e.userData.id)===vP.id?(CP.valid++,cH.clear()):CP.invalid++,MP.innerHTML="Current score <br>\n    Valid hits: ".concat(CP.valid,"<br>\n    Invalid hits: ").concat(CP.invalid,"<br>\n    Turns left: ").concat(CP.turns,'<br>\n    <br><br>\n    You are looking for the piece that is <strong>not</strong> by \n    <span style="background:red;font-weight:bolder;color:white;padding:2px;">').concat(LP,"</span>."),CP.turns--,0===CP.turns?TP():t===vP.id&&RP())})))}}if(OP.length>1)for(var s=0,u=OP.length;s<u;s++){for(var l=OP[s],c=l.collider,h=s+1;h<u;h++){var f=OP[h],d=f.collider;UP.subVectors(c.center,d.center);var p=UP.length()-(c.radius+d.radius);if(p<0){UP.normalize();var m=l.velocity.dot(UP),v=f.velocity.dot(UP),g=Math.max(m,.2),y=Math.max(v,.2),b=g+y,x=g/b,w=y/b;c.center.addScaledVector(UP,-x*p),d.center.addScaledVector(UP,w*p);var _=new _s;_.addScaledVector(UP,-m).addScaledVector(UP,v);var E=_.length(),S=l.mass,T=f.mass,M=void 0,k=void 0,A=.5;_.dot(l.velocity)>_.dot(f.velocity)?(M=A*E*(S-T)/(S+T),k=A*E*2*S/(S+T),M-=E):(M=A*E*2*T/(S+T),k=A*E*(T-S)/(S+T),k-=E),_.normalize(),l.velocity.addScaledVector(_,M),f.velocity.addScaledVector(_,k),FP.copy(c.center).addScaledVector(UP,-c.radius)}}l.position.copy(c.center)}},i=0,a=OP.length;i<a;i++)r()}var qP,WP,XP,YP=function(){for(var e=0;e<OP.length;e++){var t=OP[e];OP.splice(e,1),e--,t.material.dispose(),t.geometry.dispose(),iH.remove(t)}},KP=function(){jP(OP[0],Math.floor(60+30*Math.random())),cP(1),OP[0].colliding=!0},JP=0,ZP=0,QP=function(){nB(0),ZP=1,YP(),aC("BLUDGEBALL STARTED"),setTimeout((function(){aC("")}),1500),GP(),qP=$P(),WP=qP[JP],tO(WP),document.addEventListener("click",KP),eO.style.display="block"},$P=function(){var e=[];return cH.children.forEach((function(t){t.userData.hasOwnProperty("id")&&e.push(t.userData.id)})),function(e){for(var t,n=e.length;0!=n;){t=Math.floor(Math.random()*n),n--;var r=[e[t],e[n]];e[n]=r[0],e[t]=r[1]}return e}(e)},eO=document.getElementById("targetInfo"),tO=function(e){if(e){var t=UB[e],n=["HIT","GOOD JOB","THAT'S RIGHT"];if(t){var r="";t.hasOwnProperty("creators")&&t.creators[0]&&kR.hasOwnProperty(t.creators[0].creator_address)&&kR[t.creators[0].creator_address].alias&&(r=" by "+kR[t.creators[0].creator_address].alias);var i=parseInt(JP+1)+"/"+qP.length+" ";aC(n[Math.floor(Math.random()*n.length)],2e3),eO.innerText=r?i+t.name+r:i+t.name}}else eO.innerText="Practice Mode"},nO=function(e){e===WP&&(++JP<qP.length&&(WP=qP[JP],tO(WP)),JP===qP.length&&(eO.innerText="",eO.style.display="none",aC("YOU WIN",2500),YP()))},rO=function(){eO.innerText="",eO.style.display="none",aC("BLUDGE - OVER",2e3),YP(),ZP=0,nB(1)},iO=function(e){return ZP=e},aO=[],oO={bludgeball:{name:"BludgeBall",desc:"Ever dreamed of throwing a ball? Get the unique opportunity to throw a ball at stuff. Click to throw, click again to have the ball come back to you!",terminate:rO},guessgame:{name:"Guess the intruder",desc:"Given a name and three pieces, guess which one is not from the said artist.",terminate:TP}};function sO(){var e=[];nC({name:"BludgeBall",desc:"Throw a ball around! Hit the frames suspended in your current location in a random order, or just practice if you're not in the mood.",terminate:rO},QP,e);var t=document.getElementById("galleryMainWindow");t.innerHTML="",e.forEach((function(e){return t.append(e)}))}function uO(){var e=[];nC({name:"Guess the Seminar artist",desc:"Given a name and three pieces, guess which one is not from the said artist.",terminate:TP},IP,e);var t=document.getElementById("galleryMainWindow");t.innerHTML="",e.forEach((function(e){return t.append(e)}))}function lO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cO(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function cO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}setTimeout((function(){nC(oO.bludgeball,sO,aO,1),nC(oO.guessgame,uO,aO,1)}),2e3);var hO=/^::tezos-storage-pointer(\[.*\]){0,1}\{.*\}$/,fO=/\{(.*)\}/,dO=/([a-zA-Z0-9\-\_]+)="([^"]*)"/g,pO=/([a-zA-Z0-9\-\_]+)=([^"\}\s]+)/g,mO=(0,Fb.gql)(XP||(XP=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query Articles(\n    $filters: ArticleFilter\n    $sort: ArticleSortInput\n    $skip: Int\n    $take: Int\n  ) {\n    articles(filters: $filters, sort: $sort, skip: $skip, take: $take) {\n      ...ArticleInfos\n      __typename\n    }\n  }\n\n  fragment ArticleInfos on Article {\n    id\n    createdAt\n    slug\n    title\n    flag\n    metadata\n    description\n    tags\n    thumbnailUri\n    thumbnailMedia {\n      ...MediaImage\n      __typename\n    }\n    metadataLocked\n    author {\n      ...UserBadgeInfos\n      __typename\n    }\n    __typename\n  }\n\n  fragment MediaImage on MediaImage {\n    cid\n    width\n    height\n    placeholder\n    mimeType\n    metadata\n    processed\n    __typename\n  }\n\n  fragment UserBadgeInfos on User {\n    id\n    type\n    name\n    avatarUri\n    avatarMedia {\n      ...MediaImage\n      __typename\n    }\n    flag\n    __typename\n  }\n"])));function vO(e,t,n){if(gO())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&yO(i,n.prototype),i}function gO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gO=function(){return!!e})()}function yO(e,t){return yO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yO(e,t)}function bO(e){return function(e){if(Array.isArray(e))return xO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.localStorage;var wO=window.localStorage;wO.getItem("favoriteNativeIterations")||wO.setItem("favoriteNativeIterations","{}");var _O,EO=function(e,t,n){var r=document.createElement("div");r.id="iterationMenu";var i=document.getElementById("tokens");e.hasOwnProperty("personal")?r.style.animation="personalIterationSlideLeft .15s linear forwards":r.style.animation="iterationSlideLeft .15s linear forwards";var a=document.createElement("div");a.id="iterationClose",a.innerText="close",a.addEventListener("click",(function(){return SO()}));var o=new Image;o.loading="lazy",o.className="thumbnail",o.setAttribute("data-src","/loading.gif"),o.setAttribute("draggable","false"),o.style.imageRendering="auto",o.setAttribute("data-src","/loading.gif"),o.onerror=function(e){return o.src="/notfound.png"},o.src=t,o.style="cursor:pointer;margin:unset";var s=document.createElement("div");if(s.style="    \n  width: 100%;\n  height: calc(100% - 40px);\n  margin-top: 35px;\n  overflow-y: auto;\n  display: inline-flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  align-items: center;",e.hasOwnProperty("name")){var u=document.createElement("div");u.innerText=e.name,u.style="\n    padding: 2%;\n    width: 90%;\n    margin-bottom: 10px;\n    background: red;\n    color: white;\n    text-align: center;\n    border-radius: 5px;\n    ",s.append(u)}s.append(o);var l=MO("Load in Anaverse");l.addEventListener("click",n),o.addEventListener("click",n),s.append(l);var c=MO("Add to favorites");if(JSON.parse(wO.getItem("favoriteNativeIterations")).hasOwnProperty(e.contract+e.token_id)&&(c.innerText="Remove from favorites"),c.addEventListener("click",(function(){var t=JSON.parse(wO.getItem("favoriteNativeIterations")),n=e.contract+e.token_id,r=document.getElementById("artNameBand"+n);t.hasOwnProperty(n)?(delete t[n],c.innerText="Add to favorites",r.style=""):(t[n]=!0,r.style="background:red;color:white;",c.innerText="Remove from favorites"),wO.setItem("favoriteNativeIterations",JSON.stringify(t))})),s.append(c),wN()&&"world"===e.gentk.type){var h=MO("Send to chat");h.addEventListener("click",(function(){AN(e,"location"),kz()})),s.append(h)}switch(e.chain){case"tezos":var f=document.createElement("div");f.style="\n          display:flex;\n          width: 90%;\n          margin-top:15px;\n          font-size: 10px;\n          border:1px solid red;\n          border-radius:5px;\n          padding:5px";var d=document.createElement("div"),p=document.createElement("div");p.style="margin-right: 10px;";var m=MO("Inspect on objkt.com");if(m.addEventListener("click",(function(){return window.open(e.url,"_blank")})),s.append(m),e.holder.logo){var v=document.createElement("img");v.className="profilePic",v.setAttribute("draggable","false"),v.loading="lazy",v.setAttribute("data-src","/loading.gif"),v.src=e.holder.logo,v.onerror=function(){return v.remove()},p.append(v),f.append(p)}d.innerHTML='<strong>Current holder information</strong><br>\n      <strong>Address:</strong> <a style="word-break: break-all;" href="https://objkt.com/users/'.concat(e.holder.address,'/owned" target="_blank">').concat(e.holder.address,"</a>"),e.holder.alias&&(d.innerHTML+="<br><strong>Alias:</strong> ".concat(e.holder.alias)),e.holder.twitter&&(d.innerHTML+='<br><strong>Twitter:</strong> <a href="'.concat(e.holder.twitter,'" target="_blank">@').concat(e.holder.twitter.replace("https://twitter.com/",""),"</a>")),f.append(d),s.append(f);var g=e.hasOwnProperty("token")?e.token.attributes:e.attributes;if(g.length>0){var y=document.createElement("div");y.style="\n          width: 90%;\n          padding:2%;\n          margin-top:15px;\n          font-size: 10px;\n          border:1px solid red;\n          word-break: break-all;\n          border-radius: 5px;",g.forEach((function(e){var t=document.createElement("div");t.innerHTML="<strong>".concat(e.attribute.name,"</strong><br> ").concat(e.attribute.value),y.append(t)})),s.append(y)}break;case"ethereum":var b=MO("Inspect on highlight.xyz");if(b.addEventListener("click",(function(){return window.open(e.url,"_blank")})),s.append(b),e.attributes.length>0){var x=document.createElement("div");x.style="\n          width: 90%;\n          padding:2%;\n          margin-top:15px;\n          font-size: 10px;\n          border:1px solid red;\n          word-break: break-all;\n          border-radius: 5px;",e.attributes.forEach((function(e){var t=document.createElement("div");t.innerHTML="<strong>".concat(e.name,"</strong><br> ").concat(e.value),x.append(t)})),s.append(x)}}(jn<=6||jn>=20)&&(r.style.backgroundColor="rgba(0,0,0,0.6)"),r.append(a,s),i.append(r),_O=e},SO=function(){var e=document.getElementById("iterationMenu");e&&(e.style.animation="iterationSlideRight .15s linear forwards",setTimeout((function(){e.innerHTML="",e.remove()}),200))},TO=function(e,t,n){document.getElementById("iterationMenu")?(SO(),e!=_O&&setTimeout((function(){EO(e,t,n)}),250)):EO(e,t,n)},MO=function(e){var t=document.createElement("div");return t.className="iterationPanelButton",t.innerText=e,t};function kO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var AO=window.localStorage,IO=0,LO=(document.getElementById("tokens"),document.createElement("div")),RO=document.createElement("div");LO.id="galleryLeftMenu",LO.style.borderRight="1px solid black",RO.id="galleryMainWindow",RO.style.overflow="hidden auto";var CO,PO={"Loaded collection":{},IIIF:{},"Loaded creations":{},"Local galleries":{},"Contract import":{},"Gallery builder":{},"Public galleries":{},Seminars:{},Multiuser:{},"Data visualisation":{},Construction:{},"Objkt Curated":{},"fx(text)":{},"Mini games":{}},OO=function(e){var t=JSON.parse(AO.getItem("localGalleries"));t&&t.length>0&&t.forEach((function(t){t.chain="tezos",e.appendChild(ED(t,"loadLocalGallery"))})),PO["Local galleries"].DOM.content=e},DO=function(e){e.innerHTML="",(jn>=20||jn<=6)&&(e.style.color="white");var t=document.createElement("div");zF.room.name&&(t.innerHTML='\n<div id="galleryCreator">\n<div id="galleryCreatorForm">\n \n  <div id="galleryMetaData">\n  <b>Save your current gallery</b><br>\n  <br>Room ID: '.concat(zF.room.name,"\n  <br>Skybox ID: ").concat(zF.skybox.name,"\n  <br>Number of pieces: ").concat(cH.children.length,"\n  </div>\n  \n</div>\n</div><br>"));var n=document.createElement("input"),r=document.createElement("div");cH.children.length>0&&Object.keys(zF.room).length>0&&Object.keys(zF.skybox).length>0?(r.id="saveGallery",r.innerText="Save Gallery",r.addEventListener("click",BB),n.type="text",n.placeholder="Enter a gallery name",n.required=!0,n.minlength=4,n.maxlength=40,n.id="galleryName",n.addEventListener("focusin",(function(){return Uz(1)})),n.addEventListener("focusout",(function(){return Uz(0)})),t.appendChild(n)):(r.id="saveGallery",r.innerHTML="<span>Choose an indexed room <br> and an indexed skybox to <br> get started.</span>"),t.appendChild(r);var i=document.createElement("div");i.style="padding: 5%; border: 1px dashed cyan;margin:2%;";var a=document.createElement("button");a.innerText="Use current position as starting point",a.addEventListener("click",MH);var o=document.createElement("div");o.id="currentStartingPointDiv",o.innerText="Current starting point:"+JSON.stringify(zF.startPoint),i.append(a,o);var s=document.createElement("div");cH.children.forEach((function(e){if(UB.hasOwnProperty(e.userData.id)){var t=document.createElement("div");t.style="margin:10px;border:1px dashed cyan;padding:5px;";var n=document.createElement("div");n.style="display:flex;justify-content:space-between;";var r=UB[e.userData.id],i=new Image;i.style="max-width:100px;max-height:100px",i.src=r.img,n.append(i);var a=document.createElement("div"),o=document.createElement("button");o.innerText="remove",o.style="height:30px;margin-left: 5px;",o.addEventListener("click",(function(){cH.children.forEach((function(t){e.userData.id===t.userData.id&&(cH.remove(t),hA(),n.remove())}))})),a.style="display:flex;align-items: center;";var u=["x","y","z"];if(["position","rotation","scale"].forEach((function(t){var n=document.createElement("div");n.style.marginLeft="15px";var r=document.createElement("div");r.innerText=t,n.append(r),u.forEach((function(r){var i=document.createElement("div"),a=document.createElement("div");a.innerText=r,a.style.padding="3px";var o=document.createElement("input");o.style.width="60px",o.type="number",o.value=e[t][r],o.step=.01,o.addEventListener("change",(function(){return e[t][r]=o.value})),i.style.display="flex",i.append(a,o),n.append(i)})),a.append(n)})),a.append(o),n.append(a),t.append(n),s.append(t),e.userData.hasOwnProperty("note")){var l=document.createElement("div"),c=document.createElement("textarea");c.style="width: calc(100% - 20px);margin: 5px;",c.value=e.userData.note,c.addEventListener("focusin",(function(){return Uz(1)})),c.addEventListener("focusout",(function(){return Uz(0)})),c.addEventListener("change",(function(){e.userData.note=c.value,r.note=c.value})),l.append(c),t.append(l)}}})),t.style="padding:5%;border:1px dashed cyan;",e.append(t,i,s);var u=document.createElement("div"),l=document.createElement("div");l.innerHTML="<b>Import a gallery.json file<br> from your local device.</b><br></br>";var c=document.createElement("input");c.style.border="1px dashed cyan",c.style.padding="10px",c.style.margin="10px",c.style.backgroundColor="white",c.type="file",c.addEventListener("change",(function(e){jO.postMessage({type:"local",path:e.target.files[0]}),kz(),aC("GALLERY LOADED",2e3)})),e.addEventListener("dragover",(function(e){return e.preventDefault()})),e.addEventListener("drop",(function(e){var t;e.preventDefault(),e.dataTransfer.items&&((t=e.dataTransfer.items,function(e){if(Array.isArray(e))return kO(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return kO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kO(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e,t){if("file"===e.kind){var n=e.getAsFile();jO.postMessage({type:"local",path:n})}})),kz(),aC("GALLERY LOADED",2e3))})),u.appendChild(l),u.appendChild(c),u.style="padding:5%;border:1px dashed cyan;margin-top:50px",e.appendChild(u),PO["Gallery builder"].DOM.content=e},NO="Loaded collection",BO=function(){(jn<=6||jn>=20)&&(LO.style.color="white"),tC.length>0&&(PO["Active services"]={});var t=function(e){PO[e].DOM={},PO[e].DOM.title=document.createElement("div"),PO[e].DOM.content=document.createElement("div");var t=document.createElement("div");t.innerText=e,t.id=e,t.className="gallerieMenuButton",t.addEventListener("click",(function(){SO(),NO=e;for(var n=document.getElementsByClassName("gallerieMenuButton"),r=0;r<n.length;r++)n[r].style.backgroundColor="transparent",n[r].style.color="black",(jn<=6||jn>=20)&&(n[r].style.color="white");t.style.backgroundColor="rgba(0,0,0,.8)",t.style.color="white";var i="";(jn<=6||jn>=20)&&(i='style="background-color:#313131;color:white;"'),RO.innerHTML="<div ".concat(i,' class="helperPanel">').concat(wz[e],"</div>"),RO.appendChild(PO[e].DOM.content)})),LO.appendChild(t)};for(var n in PO)t(n);var r=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div");o.className="artistList";var s=document.createElement("div");s.className="artistList",document.createElement("div").className="artistList";var u=document.createElement("div");u.id="galleryBuilder";var l=document.createElement("div"),c=document.createElement("div"),h=document.createElement("div");h.className="serviceList",document.createElement("div").className="artistList",document.createElement("div").className="artistList",PO.Seminars.DOM.content=zR;var f=document.createElement("div"),d=document.createElement("div"),p=document.createElement("div");p.style="padding:15px";var m=document.createElement("input");m.value="https://mux.anaver.se/",m.addEventListener("focusin",(function(){return Uz(1)})),m.addEventListener("focusout",(function(){return Uz(0)}));var v=document.createElement("input");v.placeholder="Your name",v.minlength=4,v.addEventListener("focusin",(function(){return Uz(1)})),v.addEventListener("focusout",(function(){return Uz(0)}));var g=document.createElement("input");g.value="ANAVERSE-MAIN",g.disabled=!0,g.addEventListener("focusin",(function(){return Uz(1)})),g.addEventListener("focusout",(function(){return Uz(0)}));var y=document.createElement("button");y.innerText="Open Chat",y.addEventListener("click",(function(){v.value.length>3&&(TN(m.value,v.value,g.value),kz())})),p.append(m,v,g,y),d.append(p),PO.Multiuser.DOM.content=d,f.style="display:flex;margin:10px;    flex-direction: column;align-items: flex-start;";var b=document.createElement("label");b.for="geomChoice",b.innerText="Choose a geometry";var x=document.createElement("input");x.id="geomChoice";var w=[],_=document.createElement("div");_.style="display:flex;margin:10px;    flex-direction: column;align-items: flex-start;",x.addEventListener("change",(function(){_.innerHTML="",w=[],S[x.value].forEach((function(e){var t=document.createElement("input");t.id=e;var n=document.createElement("label");n.for=e,n.innerText=e,t.type="number",t.placeholder=e,_.append(n,t),w.push(t)}));var t=document.createElement("button");t.innerText="Load element",t.addEventListener("click",(function(){var t,n,r=w.map((function(e){return parseFloat(e.value)}));t=[{geometry:{type:x.value,args:r}}],(n=new Tf).position.y+=.5,n.position.z-=4,t.forEach((function(t){var r=vO(e[t.geometry.type],bO(t.geometry.args)),i=new Ol(r,CF.ghost),a=new Ip(r),o=new Nd(a,CF.blackLineLone);t.tokenType="block",n.userData=t,n.userData.tokenType="block",n.add(i,o)})),JB(n),hH.add(n),kz()})),_.append(t)}));var E=document.createElement("datalist");E.id="geomList";var S={BoxGeometry:["width","height","depth"],PlaneGeometry:["width","height"],CapsuleGeometry:["radius","length","capSegments","radialSegments"],CircleGeometry:["radius","segments","thetaStart","thetaLength"],ConeGeometry:["radius","height","radialSegments","heightSegments","openEnded","thetaStart","thetaLength"],CylinderGeometry:["radiusTop","radiusBottom","height","radialSegments","heightSegments","openEnded","thetaStart","thetaLength"],DodecahedronGeometry:["radius","detail"],RingGeometry:["innerRadius","outerRadius","thetaSegments","phiSegments","thetaStart","thetaLength"],SphereGeometry:["radius","widthSegments","heightSegments","phiStart","phiLength","thetaStart","thetaLength"],TorusGeometry:["radius","tube","radialSegments","tubularSegments","arc"]};for(var T in S){var M=document.createElement("option");M.value=T,E.append(M)}f.append(b,x,E,_),x.setAttribute("list","geomList"),PO.Construction.DOM.content=f,PO.IIIF.DOM.content=sD();var k=document.createElement("ul");function A(e,t){var n=document.createElement("li");n.style="list-style-type:none;\n    padding:5px;    \n    margin-top: 15px;\n    display: flex;\n    flex-direction: column;\n    border: 1px solid gray;\n    background: rgba(50,50,50,0.1);\n    border-radius: 4px;";var r=document.createElement("input");r.type="text",r.placeholder=t,r.addEventListener("focusin",(function(){return Uz(1)})),r.addEventListener("focusout",(function(){return Uz(0)})),[].push(r),n.append(r);var i=document.createElement("button");i.innerText="Load ".concat(e," indexed asset"),i.addEventListener("click",(function(){return yN({native:!1,blockchain:e.toLowerCase(),id:r.value})})),n.append(i),k.append(n)}k.style="padding:10px;",A("Tezos","contract/id"),A("Solana","contract");var I=document.createElement("div");I.className="artistList",I.id="importedContractContent";var L=document.createElement("div"),R=JSON.parse(AO.getItem("importedContracts"));if(R){var C=function(e){var t=document.createElement("div");t.id=e,t.style="border:1px solid gray;padding:5px;margin:5px;background:white;display: flex;justify-content: space-between;";var n=R[e],r=document.createElement("div");r.innerText="".concat(n.name," - ").concat(n.type),r.style="font-size:12px;cursor:pointer;font-family: monospace;",r.addEventListener("click",(function(){r.innerText="Loading ".concat(n.name,""),yN(asset)}));var i=document.createElement("div");i.innerText="x",i.style="font-size:10px; padding:2px;cursor:pointer;font-family: monospace;border:1px solid black",i.addEventListener("click",(function(){t.remove(),delete R[e],AO.setItem("importedContracts",JSON.stringify(R))})),t.append(r,i),L.append(t)};for(var P in R)C(P)}if(i.append(k,L,I),PO["Contract import"].DOM.content=i,tC.length>0&&(tC.forEach((function(e){return r.appendChild(e)})),PO["Active services"].DOM.content=r),aO.forEach((function(e){return a.appendChild(e)})),PO["Mini games"].DOM.content=a,ZC.length>0&&(ZC.forEach((function(e){return h.appendChild(e)})),PO["Data visualisation"].DOM.content=h),xR.length>0){c.style="display:grid;position:relative;grid-template-columns: 50% 50%;width:200%";var O=document.createElement("div");O.id="list",O.className="artistList";var D=document.createElement("div");D.id="collection",(jn<=6||jn>=20)&&(D.style.color="white"),xR.forEach((function(e){return O.appendChild(e)})),c.append(O,D),PO["Loaded creations"].DOM.content=c}else document.getElementById("Loaded creations").style.display="none";OO(o),DO(u),zO.forEach((function(e){return s.append(e)})),PO["Public galleries"].DOM.content=s,l.style="display:grid;position:relative;grid-template-columns: 50% 50%;width:200%;height:100%";var N=document.createElement("div");N.id="list";var B=document.createElement("div");for(var U in B.id="collection",N.className="artistList",(jn<=6||jn>=20)&&(B.style.color="white"),FB)N.appendChild(FB[U]);l.append(N,B),PO["Loaded collection"].DOM.content=l;var F=document.createElement("div");F.className="artistList",F.style="display:flex;flex-direction: column;";var z=document.createElement("div");z.style.padding="20px";var H=document.createElement("input");H.placehoder="Objkt gallery search",H.className="gloaderTextInput",H.addEventListener("focusin",(function(){return Uz(1)})),H.addEventListener("focusout",(function(){return Uz(0)}));var G=document.createElement("div");G.className="artistList",G.id="objktCuratedDisplay",jD.forEach((function(e){return G.append(e)}));var j=document.createElement("button");j.innerText="Search",j.addEventListener("click",(function(){return XD(H.value)})),z.append(H,j),F.append(z,G),PO["Objkt Curated"].DOM.content=F;var V=document.createElement("div");V.className="artistList",V.style="display:flex;flex-direction: column;";var q=document.createElement("div"),W=document.createElement("input");W.placehoder="article search",W.className="gloaderTextInput",W.addEventListener("focusin",(function(){return Uz(1)})),W.addEventListener("focusout",(function(){return Uz(0)}));var X=document.createElement("div");X.style="display: flex;flex-direction: column;",X.id="fxtextDisplay";var Y=document.createElement("button");Y.innerText="Search",Y.addEventListener("click",(function(){return e=W.value,zb()("https://api.fxhash.xyz/graphql",mO,{skip:0,take:50,sort:{relevance:"DESC"},filters:{searchQuery_eq:e,flag_in:["CLEAN","NONE"]}}).then((function(e){var t=document.getElementById("fxtextDisplay");t.innerHTML="",t.style.marginTop="20px",e.articles.forEach((function(e){var n=document.createElement("div");n.style.cursor="pointer",n.innerHTML='<div style=" border-top: 1px solid black;display:flex; margin-left:10px;margin-right:10px;">\n      <div style="padding:4px";><img width=120 height=120 style="width=120px;height=120px;" src="https://media.fxhash.xyz/w_768/'.concat(e.thumbnailUri.replace("ipfs://",""),'"></div>\n        <div style="display:flex;flex-direction: column;margin: 10px;">\n            <div><h3>').concat(e.title,'</h3></div>\n            <div style="font-size:small">').concat(e.description,"</div>\n        </div>\n      </div>"),n.addEventListener("click",(function(){fetch("https://gateway.fxhash.xyz/ipfs/"+e.metadata.artifactUri.replace("ipfs://","")).then((function(e){var t=e.body.getReader();return new ReadableStream({start:function(e){return function n(){return t.read().then((function(t){var r=t.done,i=t.value;if(!r)return e.enqueue(i),n();e.close()}))}()}})})).then((function(e){return new Response(e)})).then((function(e){return e.blob()})).then((function(e){return e.text()})).then((function(e){var t=function(e){for(var t=[],n=(e=e.toString()).split("\n"),r=0;r<n.length;r++){var i=n[r];if(hO.test(i)){var a,o=i.match(fO)[1],s={},u=Array.from(o.matchAll(dO)),l=lO(u=u.concat(Array.from(o.matchAll(pO))));try{for(l.s();!(a=l.n()).done;){var c=a.value;s[c[1]]=c[2]}}catch(e){l.e(e)}finally{l.f()}t.push(s)}}return t}(e),n=[];if(t.forEach((function(e){e.path.indexOf("token_metadata::")>-1&&(e.id=e.path.replace("token_metadata::",""),n.push(e))})),n.length>0){var r=document.getElementById("galleryMainWindow"),i="Contract import",a="";(jn<=6||jn>=20)&&(a='style="background-color:#313131;color:white;"'),r.innerHTML="<div ".concat(a,' class="helperPanel">').concat(wz[i],"</div>"),r.appendChild(PO[i].DOM.content);for(var o=function(e){setTimeout((function(){n[e]}),50*e)},s=0;s<n.length;s++)o(s)}}))})),t.append(n)}))}));var e})),q.append(W,Y),V.append(q,X),PO["fx(text)"].DOM.content=V,IO=1},UO=function(){var e=document.getElementById("tokens");e.innerHTML="",e.style="overflow:hidden hidden;display:grid;justify-content: left;grid-template-columns: 200px 2fr;width:100%",e.append(LO,RO),pz&&(LO.style.left="-300px",LO.style.animation="0.2s linear 0s 1 normal forwards running loaderSlideRight",RO.style.top="100%",RO.style.animation="0.2s linear 0s 1 normal forwards running loaderSlideTop"),IO||BO(),function(){var e=document.createElement("div");e.id="galleryBuilder",DO(e);var t=document.createElement("div");t.className="artistList",OO(t);var n=document.createElement("div");n.style="display:grid;position:relative;grid-template-columns: 50% 50%;width:200%;height:100%";var r=document.createElement("div");r.id="list",r.className="artistList";var i=document.createElement("div");for(var a in i.id="collection",(jn<=6||jn>=20)&&(i.style.color="white"),FB)r.append(FB[a]);n.append(r,i),PO["Loaded collection"].DOM.content=n,setTimeout((function(){document.getElementById("forceLoadCollection")&&document.getElementById("forceLoadCollection").addEventListener("click",(function(){wP(iN||"tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9",500,500),kz(),aC("LOADING COLLECTION",2e3)}))}),500)}();var t="";(jn<=6||jn>=20)&&(t='style="background-color:#313131;color:white;"'),RO.innerHTML="<div ".concat(t,' class="helperPanel">').concat(wz[NO],"</div>"),RO.appendChild(PO[NO].DOM.content)},FO={KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi55:!0,KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi56:!0,KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi57:!0,KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi58:!0,KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi59:!0,KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi60:!0},zO=[],HO=window.location.search,GO=new URLSearchParams(HO),jO=new Worker(new URL(n.p+n.u(136),n.b)),VO=function(){var e=[];return qO.forEach((function(t){FO.hasOwnProperty(t.contract+t.id)&&e.push(t)})),e[parseInt(Math.random()*e.length)]},qO=[],WO=window.localStorage;function XO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function YO(){return YO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YO.apply(this,arguments)}jO.onmessage=function(e){switch(e.data.type){case"remote":!function(e){var t=0,n=e.data;n.chain="tezos",n.token_id=n.id,qO.push(n);var r=ED(n,"loadGallery");zO.push(r),GO.get("gallery")&&GO.get("galc")===n.contract&&GO.get("galid")===n.id&&(t=n),t&&(LB(t),mz())}(e);break;case"local":!function(e){var t=JSON.parse(WO.getItem("localGalleries"));t?(t.push(e.data),WO.setItem("localGalleries",JSON.stringify(t))):WO.setItem("localGalleries",JSON.stringify([e.data])),kz(),kz()}(e);break;case"gallicarama":tD(e.data)}r["Galleries Natives"].fin=window.performance.now()};var KO={name:"GallicaPix",chain:"IIIF",url:"https://gallicapix.bnf.fr/",display_uri:"https://gallica.bnf.fr/iiif/ark:/12148/bpt6k6439443x/f302/1175.7333333333333,514.3833333333333,1867.9463333333335,1837.0833333333335/200,200/0/native"},JO={name:"Gallica by URL",url:"https://gallica.bnf.fr",chain:"IIIF",display_uri:"https://gallica.bnf.fr/iiif/ark:/12148/btv1b53164599c/f1/4574.62311557789,2773.2381909547735,2927.7587939698496,2992.820100502513/200,200/0/native"},ZO={name:"Gallicarama",url:"https://gallicarama.bnf.fr/",chain:"IIIF",display_uri:"https://gallica.bnf.fr/iiif/ark:/12148/btv1b532006577/f41/94.70299999999997,79.87,2069.774,1859.83/200,200/0/native"},QO=function(e,t,n){e.source="Gallica";var r=!1;n&&(r=YO({},n));var i=e.region.split(","),a=parseInt(i[2])/parseInt(i[3]);parseInt(1400*a),e.size=",".concat(1400);var o="https://gallica.bnf.fr/iiif/".concat(e.ark,"/").concat(e.vue,"/").concat(e.region,"/").concat(e.size,"/").concat(e.rotation,"/").concat(e.quality);if(t)eD(e,o,t,r);else{var s="";if(r){var u=r.name.length>20?r.name.substring(0,20)+"":r.name,l=r.artist.length>20?r.artist.substring(0,20)+"":r.artist;s="".concat(u," ").concat(l," ")}s+=e.vue;var c=parseInt(200*a),h="".concat(c,",").concat(200),f={IIIFdata:e,link:o,item:r,desc:s,display_uri:"https://gallica.bnf.fr/iiif/".concat(e.ark,"/").concat(e.vue,"/").concat(e.region,"/").concat(h,"/").concat(e.rotation,"/").concat(e.quality),chain:"IIIF"};document.getElementById("importedIIIFContent").append(ED(f,"loadIIIFAsset"))}},$O=0,eD=function(e,t,n,r){$O++;var i=e.ark+e.vue+"|"+$O;if(r){r.gallica=!0;var a="https://gallica.bnf.fr/".concat(e.ark,"/").concat(e.vue,".item");r.permalink=a,r.IIIFdata=e,UB[i]=r,hF(t,{id:i},"IIIF",n)}else fetch("https://gallica.bnf.fr/iiif/".concat(e.ark,"/manifest.json")).then((function(e){return e.json()})).then((function(r){var a={description:"",artist:""};r.metadata.forEach((function(e){switch(e.label){case"Title":a.name=e.value,a.title=e.value;break;case"Date":a.year=e.value;case"Language":case"ShelfMark":"string"==typeof e.value?a.description+="".concat(e.value," | "):a.description+="".concat(e.value[0]["@value"]," | ")}})),a.gallica=!0;var o="https://gallica.bnf.fr/".concat(e.ark,"/").concat(e.vue,".item");a.permalink=o,a.IIIFdata=e,UB[i]=a,hF(t,{id:i},"IIIF",n)}))},tD=function(e){var t=document.getElementById("gallicaRamaImports");e.chain="IIIF",t.append(ED(e,"gallicaramaProject"))},nD=[],rD=function(e){if("string"==typeof e)return e;var t="";return e.forEach((function(e){return t+=e["@value"]+" | "})),t.substring(0,t.length-3)},iD=function(e,t,n){return fetch(e+"/manifest.json").then((function(e){return e.json()})).then((function(e){var r,i={description:"",artist:"",name:""};e.metadata.forEach((function(e){switch(e.label){case"Creator":i.artist=rD(e.value);break;case"Title":i.name=rD(e.value),i.title=i.name;break;case"Date":i.year=rD(e.value);case"Language":case"ShelfMark":i.description+="".concat(rD(e.value)," | ")}}));var a,o,s,u=600,l=parseInt(t.vue),c=JSON.stringify(t.id);if(l){var h=e.sequences[0].canvases[l],f=h.images[0].resource["@id"];if(o={width:h.width,height:h.height},h.width<h.height){var d=h.width/h.height;r=Math.floor(u*d)}else r=600,d=h.height/h.width,u=Math.floor(r*d);t.id=f.replace("https://api.bl.uk/image/iiif/","").replace("/full/max/0/default.jpg",""),s="".concat(t.root,"/").concat(t.id,"/").concat(t.res,"/").concat(r,",").concat(u,"/0/").concat(t.quality,".jpg")}else e.sequences[0].canvases.forEach((function(e){if(e["@id"].substring(e["@id"].lastIndexOf("/")+1)===t.vue){if(o={width:e.width,height:e.height},e.width<e.height){var n=e.width/e.height;r=Math.floor(u*n)}else r=600,n=e.height/e.width,u=Math.floor(r*n);s="".concat(t.root,"/").concat(t.id,"/").concat(t.vue,"/").concat(t.res,"/").concat(r,",").concat(u,"/0/").concat(t.quality,".jpg")}}));if(o){var p=document.createElement("canvas");p.width=r+40,p.height=u+40,p.style="border: 1px solid black;border-radius: 5px;";var m=p.getContext("2d");m.fillStyle="#FFCCCB",m.fillRect(0,0,r+40,u+40);var v=new Image;v.src=s,v.addEventListener("load",(function(){m.drawImage(v,20,20),function(e,t,n){var r={x:.3*e,y:.4*t,w:.4*e,h:.4*t,width:e,height:t};a=r;var i=function(r,i,a,o){m.fillStyle="#FFCCCB",m.fillRect(0,0,e+40,t+40),m.drawImage(n,20,20),m.fillStyle="rgba(0,0,0,.4)",m.fillRect(20,20,e,i),m.fillRect(20,20+i+o,e,t-(i+o)),m.fillRect(20,20+i,r,o),m.fillRect(20+r+a,20+i,e-(r+a),o),m.lineWidth=2,m.setLineDash([]),m.strokeStyle="black",m.strokeRect(20+r,20+i,a,o),m.setLineDash([15,15]),m.strokeStyle="white",m.strokeRect(20+r,20+i,a,o),m.fillStyle="white",m.fillRect(r+13,i+13,14,14),m.fillRect(r+a+13,i+13,14,14),m.fillRect(r+a+13,i+o+13,14,14),m.fillRect(r+13,i+o+13,14,14)};i(r.x,r.y,r.w,r.h);var o=!1,s=function(e){if(e.preventDefault(),e.hasOwnProperty("touches")&&(e=e.touches[0]),e.offsetX>=r.x+13&&e.offsetX<=r.x+35){if(e.offsetY>=r.y+13&&e.offsetY<=r.y+35){if(m.canvas.style.cursor="nwse-resize",o){var t=Math.floor(e.offsetX-r.x),n=Math.floor(e.offsetY-r.y);r.x=e.offsetX-20,r.y=e.offsetY-20,r.w+=20-t,r.h+=20-n,i(r.x,r.y,r.w,r.h)}}else if(e.offsetY>=r.y+r.h+13&&e.offsetY<=r.y+r.h+13+14&&(m.canvas.style.cursor="nesw-resize",o)){var s=Math.floor(e.offsetX-r.x),u=Math.floor(e.offsetY-r.h-r.y);r.x=e.offsetX-20,r.w+=20-s,r.h+=u-20,i(r.x,r.y,r.w,r.h)}}else if(e.offsetX>=r.x+r.w+13&&e.offsetX<=r.x+r.w+13+14){if(e.offsetY>=r.y+13&&e.offsetY<=r.y+13+14){if(m.canvas.style.cursor="nesw-resize",o){var l=Math.floor(e.offsetX-r.w-r.x),c=Math.floor(e.offsetY-r.y);r.y=e.offsetY-20,r.w+=l-20,r.h+=20-c,i(r.x,r.y,r.w,r.h)}}else if(e.offsetY>=r.y+r.h+13&&e.offsetY<=r.y+r.h+13+14){if(o){var h=Math.floor(e.offsetX-r.w-r.x),f=Math.floor(e.offsetY-r.h-r.y);r.w+=h-20,r.h+=f-20,i(r.x,r.y,r.w,r.h)}m.canvas.style.cursor="nwse-resize"}}else e.offsetY>=r.y&&e.offsetY<=r.y+r.h&&e.offsetX>=r.x&&e.offsetX<=r.x+r.w?(m.canvas.style.cursor="move",o&&(r.x=e.offsetX-r.w/2-20,r.y=e.offsetY-r.h/2-20,i(r.x,r.y,r.w,r.h))):m.canvas.style.cursor="crosshair";a=r};m.canvas.addEventListener("mousemove",s),m.canvas.addEventListener("touchmove",s),m.canvas.addEventListener("mousedown",(function(){return o=!0})),m.canvas.addEventListener("mouseup",(function(){return o=!1})),m.canvas.addEventListener("touchstart",(function(){return o=!0})),m.canvas.addEventListener("touchend",(function(){return o=!1}))}(r,u,v)}));var g=document.createElement("button");g.innerText="Load selection",g.style="margin-bottom:5px",g.addEventListener("click",(function(e){var r=o.height/a.height,s={ark:t.id,vue:t.vue,region:"".concat(a.x*r,",").concat(a.y*r,",").concat(a.w*r,",").concat(a.h*r),rotation:"0",quality:t.quality,documentSource:JSON.parse(c)};switch(n){case"gallica":QO(s,null,i);break;case"britlib":s.vueID=l,OR(s,null,i)}document.getElementById("collection").parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideRight",document.getElementById("collection").innerHTML=""})),document.getElementById("IIIFresizeContainer").innerHTML="",document.getElementById("IIIFresizeContainer").append(g,p)}else console.log("Could not retrieve IIIF data.")}))},aD=function(e){switch(!0){case-1!=e.indexOf("gallica"):var t=(i=e.replace("https://gallica.bnf.fr/","")).substring(0,i.lastIndexOf("/")),n=i.substring(i.lastIndexOf("/")+1,i.indexOf("."));iD("https://gallica.bnf.fr/iiif/"+(r={id:t,vue:n,res:"full",root:"https://gallica.bnf.fr/iiif",quality:"native"}).id,r,"gallica");break;case-1!=e.indexOf("bl.uk/"):var r,i=e.replace("https://access.bl.uk/item/viewer/",""),a=e.substring(e.indexOf("#?")+1),o=new URLSearchParams(a);t=i.substring(0,i.indexOf("#?")),n=o.get("cv"),iD("https://api.bl.uk/metadata/iiif/"+(r={id:t,vue:n,res:"full",root:"https://api.bl.uk/image/iiif",quality:"default"}).id,r,"britlib")}},oD=function(){var e=document.createElement("div");if(e.style="display:flex;padding:10px;flex-direction:column",nD.length>0){var t=document.createElement("li");t.style="list-style: none;\n  border: 1px dashed cyan;  \n  margin: 15px;\n  background: white;\n  font-size: 12px;\n  padding: 10px;",t.innerText="These links have been imported. Click on a link to charge its target asset.",nD.forEach((function(e){var n=document.createElement("ul");n.innerText=e,n.style="cursor: pointer",n.addEventListener("click",(function(){return aD(e)})),t.append(n)})),e.append(t)}var n=document.createElement("div");n.id="IIIFresizeContainer";var r=document.createElement("div");r.style="padding:10px;border:1px solid cyan;margin:15px;background-color:white;font-family: sans-serif;\n  font-weight: 100;",r.innerHTML='To load a page from a document in the anaverse, simply \n  paste its URL in the text field below. You can try this <a href="https://gallica.bnf.fr/ark:/12148/btv1b52504111z/f73.item.zoom" target="_blank">\n   Gallica</a> document on porcelain making or that <a href="https://access.bl.uk/item/viewer/ark:/81055/vdc_100098770628.0x000001#?c=0&m=0&s=0&cv=18&xywh=0%2C-106%2C6684%2C4855"\n    target="_blank" >British Library</a> Japanese design manual. [Note: due to a cyber attack, the British Library online services have been shut down for an unknown duration]<br><br>Design tip: do not select an area outside the document (light red), it will \n    cause your selection to fail.';var i=document.createElement("input");return i.style="width:400px;margin:10px;",i.placeholder="Paste link here",i.addEventListener("focusin",(function(){return Uz(1)})),i.addEventListener("focusout",(function(){return Uz(0)})),i.addEventListener("change",(function(){return aD(i.value)})),e.append(r),e.append(i,n),e},sD=function(){var e=document.createElement("div");e.id="IIIFDiv",e.style="display:grid;position:relative;grid-template-columns: 50% 50%;width:200%;height:100%";var t=document.createElement("div");t.id="importedIIIFContent",t.style="display: flex;margin:10px;flex-wrap:wrap";var n=document.createElement("div");n.id="list";var r=document.createElement("div");r.id="collection",(jn<=6||jn>=20)&&(r.style.color="white");var i=document.createElement("div");return i.className="artistList",i.append(ED(JO,"loadGallica"),ED(KO,"loadGallicaPix"),ED(ZO,"loadGallicaRama")),n.append(i,t),e.append(n,r),e},uD=window.localStorage;uD.getItem("favoriteGalleries")||uD.setItem("favoriteGalleries","{}");var lD,cD=function(e,t,n){var r=document.createElement("div");r.id="iterationMenu";var i=document.getElementById("tokens");r.style.animation="iterationSlideLeft .15s linear forwards";var a=document.createElement("div");a.id="iterationClose",a.innerText="close",a.addEventListener("click",(function(){return SO()}));var o=MO("Enter gallery");o.addEventListener("click",n);var s=document.createElement("div");if(s.style="    \n    width: 100%;\n    height: calc(100% - 40px);\n    margin-top: 35px;\n    overflow-y: auto;\n    display: inline-flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    align-items: center;",e.hasOwnProperty("name")){var u=document.createElement("div");u.innerText=e.name,u.style="\n      padding: 2%;\n      width: 90%;\n      margin-bottom: 10px;\n      background: red;\n      color: white;\n      text-align: center;\n      border-radius: 5px;\n      ",s.append(u)}if(t){var l=new Image;l.loading="lazy",l.className="thumbnail",l.setAttribute("data-src","/loading.gif"),l.setAttribute("draggable","false"),l.style.imageRendering="auto",l.setAttribute("data-src","/loading.gif"),l.onerror=function(e){return l.src="/notfound.png"},l.src=t,l.style="cursor:pointer;margin:unset",l.addEventListener("click",n),s.append(l)}s.append(o);var c=MO("Add to favorites");JSON.parse(uD.getItem("favoriteGalleries")).hasOwnProperty(e.contract+e.token_id)&&(c.innerText="Remove from favorites"),c.addEventListener("click",(function(){var t=JSON.parse(uD.getItem("favoriteGalleries")),n=e.contract+e.token_id,r=document.getElementById("artNameBand"+n);t.hasOwnProperty(n)?(delete t[n],c.innerText="Add to favorites",r.style=""):(t[n]=!0,r.style="background:red;color:white;",c.innerText="Remove from favorites"),uD.setItem("favoriteGalleries",JSON.stringify(t))})),s.append(c);var h="https://anaver.se/?gallery=1&galc=".concat(e.contract,"&galid=").concat(e.id);e.sem&&(h=e.hasOwnProperty("targetGallery")?"https://anaver.se/?videoguide=1&gallery=1&vgc=".concat(e.contract,"&vgid=").concat(e.token_id,"&galc=").concat(e.gallery_contract,"&galid=").concat(e.gallery_token_id):"https://anaver.se/?videoguide=1&vgc=".concat(e.contract,"&vgid=").concat(e.token_id));var f=MO("Copy access link");f.addEventListener("click",(function(){f.innerText="Copied!",navigator.clipboard.writeText(h),setTimeout((function(){f.innerText="Copy access link"}),1300)}));var d=MO("Display QR code");d.addEventListener("click",(function(){return e=h,UR.toDataURL(e).then((function(e){var t=new Image(200);t.src=e;var n=document.createElement("div");n.style="display:flex;\n        z-index:200;\n        background:rgba(20,20,20,0.9);\n        position:absolute;\n        width:100%;\n        height:100%;\n        align-items: center;\n        justify-content: center;\n        cursor:pointer;",n.append(t),document.body.append(n),n.addEventListener("click",(function(){return n.remove()}))})).catch((function(e){console.error(e)}));var e})),s.append(f,d);var p=document.createElement("div");if(p.className="iterationBox","tezos"===e.chain){var m=MO("Inspect on objkt.com");m.addEventListener("click",(function(){return window.open(e.url,"_blank")})),s.append(m);var v=document.createElement("div");if(v.className="iterationBox",v.style="display:flex;flex-direction: column;",e.hasOwnProperty("item")){for(var g=0;g<e.item.creators.length;g++){g>0&&v.append(document.createElement("hr"));var y=e.item.creators[g];v.append(fD(y.holder))}s.append(v),p.innerText=e.item.description}else p.innerText=e.description;if(s.append(p),e.sem){var b,x=document.createElement("div");x.className="iterationBox";var w=[];e.tags.forEach((function(e){0===e.tag.name.indexOf("pres://")&&(b=e.tag.name.replace("pres://","")),0===e.tag.name.indexOf("pan://")&&w.push(e.tag.name.replace("pan://",""))})),yP.hasOwnProperty(b)?x.append(fD(kR[b])):LR([b].concat(w)).then((function(){var e=fD(kR[b]);e.style.border="2px solid red",e.style.borderRadius="4px",x.append(e),w.forEach((function(e){x.append(document.createElement("hr")),x.append(fD(kR[e]))}))})),s.append(x)}if(e.hasOwnProperty("curation")){var _=MO("Generate Gallery");_.addEventListener("click",(function(){kz();var t=VO();qD(e.gallery_id,t)}));var E=MO("Load assets in contract import");E.addEventListener("click",(function(){SO(),WD(e.gallery_id)})),f.remove(),d.remove(),c.remove(),o.remove(),p.remove(),p.innerHTML="\n        ".concat(e.tokens.length," pieces in this curation.\n        <br><hr>\n\n        ").concat(e.description,"\n        ");var S=document.createElement("div");S.className="iterationBox",S.style="display:flex;flex-direction: column;";for(var T=0;T<e.curators.length;T++){T>0&&S.append(document.createElement("hr"));var M=e.curators[T].curator;S.append(fD(M))}s.append(_,E,S,p)}if(e.hasOwnProperty("localGallery")){p.remove(),d.remove(),f.remove(),c.remove(),m.remove();var k=MO("Download JSON file");k.addEventListener("click",(function(){return NB(e)}));var A=MO("Delete Gallery");A.addEventListener("click",(function(){OB(e,document.getElementById(e.timeId)),SO()}));var I={};e.gallery.forEach((function(e){I.hasOwnProperty(e.tokenType)||(I[e.tokenType]=0),I[e.tokenType]++}));var L="";for(var R in I)L+="".concat(R,": ").concat(I[R],"<br>");p.innerHTML="\n        <strong>Room</strong><br>\n        blockchain: ".concat(e.room.blockchain,"<br>\n        contract: ").concat(e.room.contract,"<br>\n        token_id: ").concat(e.room.token_id,"\n        <hr>\n        <strong>Skybox</strong><br>\n        blockchain: ").concat(e.skybox.blockchain,"<br>\n        contract: ").concat(e.skybox.contract,"<br>\n        token_id: ").concat(e.skybox.token_id,"<br>\n        <hr>\n        <strong>Gallery content</strong><br>\n        ").concat(L,"\n        "),s.append(k,A,p)}}(jn<=6||jn>=20)&&(r.style.backgroundColor="rgba(0,0,0,0.6)",r.style.color="white"),r.append(a,s),i.append(r),lD=e},hD=function(e,t,n){document.getElementById("iterationMenu")?(SO(),e!=lD&&setTimeout((function(){cD(e,t,n)}),250)):cD(e,t,n)};function fD(e){var t=document.createElement("div");t.style="display:flex;padding:2px;";var n=document.createElement("div"),r=document.createElement("div");r.style="margin-right: 10px;";var i=document.createElement("img");return i.className="profilePic",i.setAttribute("draggable","false"),i.src=e.logo?e.logo:"/loading.gif",i.loading="lazy",i.setAttribute("data-src","/loading.gif"),i.onerror=function(){return i.remove()},r.append(i),t.append(r),e.alias&&(n.innerHTML+="<strong>Alias:</strong> ".concat(e.alias,"<br>")),n.innerHTML+='\n    <strong>Address:</strong> <a style="word-break: break-all;" href="https://objkt.com/users/'.concat(e.address,'/owned" target="_blank">').concat(e.address,"</a>"),e.twitter&&(n.innerHTML+='<br><strong>Twitter:</strong> <a href="'.concat(e.twitter,'" target="_blank">@').concat(e.twitter.replace("https://twitter.com/",""),"</a>")),t.append(n),t}var dD=window.localStorage;dD.getItem("favoritePaintings")||dD.setItem("favoritePaintings","{}");var pD,mD=function(e,t,n){var r=document.createElement("div");r.id="iterationMenu";var i=document.getElementById("tokens");r.style.animation="iterationSlideLeft .15s linear forwards";var a=document.createElement("div");a.id="iterationClose",a.innerText="close",a.addEventListener("click",(function(){return SO()}));var o=new Image;o.loading="lazy",o.className="thumbnail",o.setAttribute("data-src","/loading.gif"),o.style.imageRendering="auto",o.setAttribute("data-src","/loading.gif"),o.setAttribute("draggable","false"),o.onerror=function(e){return o.src="/notfound.png"},o.src=t,o.style="cursor:pointer;margin:unset";var s=MO("Load in Anaverse");s.addEventListener("click",n),o.addEventListener("click",n);var u=document.createElement("div");if(u.style="    \n  width: 100%;\n  height: calc(100% - 40px);\n  margin-top: 35px;\n  overflow-y: auto;\n  display: inline-flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  align-items: center;",e.hasOwnProperty("name")){var l=document.createElement("div");l.innerText=e.name,l.style="\n    padding: 2%;\n    width: 90%;\n    margin-bottom: 10px;\n    background: red;\n    color: white;\n    text-align: center;\n    border-radius: 5px;\n    ",u.append(l)}u.append(o,s);var c=MO("Add to favorites");JSON.parse(dD.getItem("favoritePaintings")).hasOwnProperty(e.contract+e.token_id)&&(c.innerText="Remove from favorites"),c.addEventListener("click",(function(){var t=JSON.parse(dD.getItem("favoritePaintings")),n=e.contract+e.token_id,r=document.getElementById("artNameBand"+n);t.hasOwnProperty(n)?(delete t[n],c.innerText="Add to favorites",r.style=""):(t[n]=!0,r.style="background:red;color:white;",c.innerText="Remove from favorites"),dD.setItem("favoritePaintings",JSON.stringify(t))})),u.append(c);var h=MO("Generate direct link"),f="https://anaver.se/?gallery=1&loadsingle=1&singlecontract=".concat(e.contract,"&singletokenid=").concat(e.token_id),d='<iframe src="'.concat(f,'" style="border:0px;width:800px;height:600px" />'),p=document.createElement("div");h.addEventListener("click",(function(){p.className="iterationBox",p.style="user-select:text;word-break:break-all;",p.innerText="Link: ".concat(f," \n\n\nIframe code: ").concat(d,"\n")})),u.append(h),u.append(p);var m=document.createElement("div");switch(m.className="iterationBox",e.chain){case"IIIF":if("Gallica"===e.IIIFdata.source){var v=MO("Inspect on Gallica");if(v.addEventListener("click",(function(){return window.open("https://gallica.bnf.fr/".concat(e.IIIFdata.ark,"/").concat(e.IIIFdata.vue,".item"),"_blank")})),u.append(v),m.innerText=e.item.name+" "+e.item.description,wN()){var g=MO("Send to chat");g.addEventListener("click",(function(){AN(e,"IIIF"),kz()})),u.append(g)}u.append(m)}break;case"tezos":var y=MO("Inspect on objkt.com");y.addEventListener("click",(function(){return window.open(e.url,"_blank")})),u.append(y);var b=document.createElement("div");b.className="iterationBox",b.style="display:flex;flex-direction: column;";for(var x=0;x<e.creators.length;x++){x>0&&b.append(document.createElement("hr"));var w=e.creators[x];b.append(gD(w.holder))}if(m.innerText=e.description,wN()){var _=MO("Send to chat");_.addEventListener("click",(function(){AN(e,"painting"),kz()})),u.append(_)}u.append(b),u.append(m);break;case"solana":var E=MO("Inspect on Solana FM");if(E.addEventListener("click",(function(){return window.open(e.url,"_blank")})),wN()){var S=MO("Send to chat");S.addEventListener("click",(function(){AN(e,"painting"),kz()})),u.append(S)}u.append(E)}(jn<=6||jn>=20)&&(r.style.backgroundColor="rgba(0,0,0,0.6)",r.style.color="white"),r.append(a,u),i.append(r),pD=e},vD=function(e,t,n){document.getElementById("iterationMenu")?(SO(),e!=pD&&setTimeout((function(){mD(e,t,n)}),250)):mD(e,t,n)};function gD(e){var t=document.createElement("div");t.style="display:flex";var n=document.createElement("div"),r=document.createElement("div");r.style="margin-right: 10px;";var i=document.createElement("img");return i.className="profilePic",i.setAttribute("draggable","false"),i.src=e.logo?e.logo:"/loading.gif",i.loading="lazy",i.setAttribute("data-src","/loading.gif"),i.onerror=function(){return i.remove()},r.append(i),t.append(r),e.alias&&(n.innerHTML+="<strong>Alias:</strong> ".concat(e.alias,"<br>")),n.innerHTML+='\n    <strong>Address:</strong> <a style="word-break: break-all;" href="https://objkt.com/users/'.concat(e.address,'/owned" target="_blank">').concat(e.address,"</a>"),e.twitter&&(n.innerHTML+='<br><strong>Twitter:</strong> <a href="'.concat(e.twitter,'" target="_blank">@').concat(e.twitter.replace("https://twitter.com/",""),"</a>")),t.append(n),t}var yD,bD,xD,wD,_D=window.localStorage,ED=function e(t,n){var r=document.createElement("div");r.className="gentkProfiles";var i=new Image;i.loading="lazy",i.className="thumbnail",i.setAttribute("data-src","/loading.gif"),i.style.imageRendering="auto",i.setAttribute("data-src","/loading.gif"),i.setAttribute("draggable","false"),i.onerror=function(e){return i.src="/notfound.png"},i.style.cursor="pointer",r.append(i);var a=t.contract+t.token_id;switch(UB[a]=t,UB[a].contract=t.contract,UB[a].token_id=t.token_id,t.chain){case"IIIF":switch(i.src=t.display_uri,n){case"gallicaramaProject":r.append(ND(t)),i.addEventListener("click",(function(){!function(e){for(var t=YO({},VO()),n=[],r=0;r<t.gallery.length;r++){var i=t.gallery[r];if("objkt"===i.tokenType||"tezos"===i.tokenType){if(r<e.length){var a=e[r].url.replace("https://openapi.bnf.fr/iiif/image/v3/","").replace("/full/max/0/default.webp",""),o=a.substring(0,a.lastIndexOf("/")),s=a.substring(a.lastIndexOf("/")+1);i.tokenType="IIIF",e[r].hasOwnProperty("note")&&e[r].note.length>0&&(i.note=e[r].note),i.IIIFdata={ark:o,vue:s,region:"full",rotation:"0",quality:"native",documentSource:o,source:"Gallica",size:"full"},n.push(i)}}else"block"===i.tokenType&&n.push(i)}t.gallery=n,LB(t)}(t.slides),kz()}));break;case"loadIIIFAsset":r.append(OD(t)),r.addEventListener("click",(function(){vD(t,i.src,(function(){aC("FETCHING ITEM DATA"),eD(t.IIIFdata,t.link,null,t.item),kz()}))}));break;case"loadGallica":r.append(DD(t)),r.addEventListener("click",(function(e){var t=document.getElementById("IIIFDiv");UD(t);var n=document.getElementById("collection");n.append(oD()),n.prepend(BD())}));break;case"loadGallicaPix":r.append(DD(t)),r.addEventListener("click",(function(e){var t=document.getElementById("IIIFDiv");UD(t);var n=document.getElementById("collection");n.append(function(){var e=document.createElement("div"),t=document.createElement("select");t.innerText="Zoologie",t.value="zoologie",t.innerHTML='\n   <option value="zoologie">Zoologie</option>\n   <option value="1418">14-18</option>\n   <option value="1418pub">Publicits 14-28</option>\n   <option value="miroir">Le Miroir de sports</option>\n  <option value="PP">Papiers peints et textiles</option>\n   <option value="vogue">Vogue (Paris)</option>\n  ',t.style="margin:10px;";var n=document.createElement("input");n.type="text",n.value="girafe",n.innerText="girafe",n.style="margin:10px;",n.addEventListener("focusin",(function(){return Uz(1)})),n.addEventListener("focusout",(function(){return Uz(0)}));var r=.6*window.innerWidth;e.style="display:flex;width:".concat(r,"px;flex-direction: column;\n      align-items: flex-start;\n      justify-content: space-between;padding:5%;margin:5px;\n  ");var i=document.createElement("div");i.style="padding:10px;border:1px solid cyan;margin:15px;background-color:white;font-family: sans-serif;\n  font-weight: 100;",i.innerHTML='GallicaPix is a machine-learning powered image detector for Gallica. \n  Choose a document corpus and enter a search term to get started. Once the result is loaded, click on\n  the image to open that page in a new tab on the Gallica website. If you are satisfied with your find, you\n  can then load that image by pasting the page\'s address in the "Gallica by URL" tab. ';var a=document.createElement("button");a.innerText="Load results",a.style="margin:10px;";var o=document.createElement("iframe");return o.style="border:1px solid cyan;width:".concat(r,"px;height:").concat(r-50,"px;display:none;"),a.addEventListener("click",(function(){var e,r;o.style.display="block",o.src=(e=t.value,r=n.value,"https://gallicapix.bnf.fr/rest?run=findIllustrations-app.xq&start=1&corpus=".concat(e,"&sourceTarget=&keyword=").concat(r))})),e.append(i,t,n,a,o),e}()),n.prepend(BD())}));break;case"loadGallicaRama":r.append(DD(t)),r.addEventListener("click",(function(e){var t=document.getElementById("IIIFDiv");UD(t);var n=document.getElementById("collection");n.append(function(){var e=document.createElement("div"),t=document.createElement("div");t.style="display:flex;padding:10px;border:1px solid cyan;margin:15px;flex-direction: column;background-color:white;font-family: sans-serif;\n  font-weight: 100;",t.innerHTML='Drop Gallicarama JSON files in this box or select a file to import it. \n    <br><br>\n    Once imported, the Gallicarama project can be loaded in two ways:<br><br>\n    - Click on the thumbnail to load a randomly generated 3D gallery populated with your Gallicarama\'s project slides.<br><br>\n    - Click on the "Load Assets" button to preload each pieces in the "Gallica by URL" tab. This will enable\n      you to crop and resize each slide.';var n=document.createElement("input");n.type="file",n.style="margin:10px;padding:10px;border:1px dashed black;",n.addEventListener("change",(function(e){jO.postMessage({type:"local",path:e.target.files[0]})})),t.addEventListener("dragover",(function(e){return e.preventDefault()})),t.addEventListener("drop",(function(e){var t;e.preventDefault(),e.dataTransfer.items&&(t=e.dataTransfer.items,function(e){if(Array.isArray(e))return XO(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return XO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XO(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e,t){if("file"===e.kind){var n=e.getAsFile();jO.postMessage({type:"local",path:n})}}))})),t.append(n);var r=document.createElement("div");return r.id="gallicaRamaImports",r.className="artistList",e.append(t,r),e}()),n.prepend(BD())}))}break;case"tezos":switch(t.hasOwnProperty("token_id")&&t.hasOwnProperty("contract")&&(t.hasOwnProperty("url")||(t.url="https://objkt.com/tokens/".concat(t.contract,"/").concat(t.token_id)),i.src="https://assets.objkt.media/file/assets-003/".concat(t.contract,"/").concat(t.token_id,"/thumb288")),n){case"displayArtistCollection":r.append(ID(t)),i.addEventListener("click",(function(){var e=wR(bR[t.category]);t.DOMelements={gallery:e},document.getElementById("list").parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideLeft",mN(t)}));break;case"loadCuration":i.src=t.logo,t.curation=!0,r.addEventListener("click",(function(){hD(t,i.src,(function(){return null}))})),r.append(SD(t));break;case"loadSeminar":r.append(MD(t,!0)),i.addEventListener("click",(function(){t.sem=!0,hD(t,i.src,(function(){window.confirm("This will load a ".concat(t.size," video. Do you want to proceed?"))&&(kz(),LB(t.targetGallery),WR(t.vidsrc,t.url,t.contract+t.token_id))}))}));break;case"loadLocalGallery":i.remove(),r.id=t.timeId,r.style="\n          border: 2px solid red;\n          border-radius: 5px;\n          height: 60px;\n          margin-top: 10px;\n          margin-bottom: 10px;\n          cursor:pointer;\n          background-color: #ffffff;\n          background: repeating-linear-gradient( 45deg, #ff0000, #ff0000 4px, #ffffff 4px, #ffffff 10px );\n          ",t.localGallery=!0,r.addEventListener("click",(function(){hD(t,null,(function(){kz(),LB(t)}))})),r.append(TD(t));break;case"loadGallery":r.append(MD(t)),i.addEventListener("click",(function(){hD(t,i.src,(function(){kz(),LB(t)}))}));break;case"loadItem":r.style.cursor="pointer",r.addEventListener("click",(function(){vD(t,i.src,(function(){aC("FETCHING ITEM DATA"),LD(t,a)}))})),CD(t,r);break;case"displayCollection":PD(t,t.creators[0].creator_address,r),i.addEventListener("click",(function(){var n=[];for(var r in xP[t.creators[0].creator_address])n.push(e(xP[t.creators[0].creator_address][r],"loadItem"));t.DOMelements={gallery:n},document.getElementById("list").parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideLeft",mN(t)}));break;case"listIterations":var o="https://assets.objkt.media/file/assets-003/".concat(t.logo.replace("ipfs://",""),"/thumb288");t.imgURI=o,i.src=o,t.tag.hasOwnProperty("commune")?i.addEventListener("click",(function(){return QF(t)})):i.addEventListener("click",(function(){return $D(t)})),r.append(kD(t));break;case"loadIteration":r.id=t.DOMid,r.append(AD(t)),r.style.cursor="pointer",r.addEventListener("click",(function(){TO(t,i.src,(function(){!t.hasOwnProperty("gentk")&&t.hasOwnProperty("slug")&&(t.gentk=KR[t.slug]),$F(t.gentk,t.id,t.hash,t.name),kz()}))}))}break;case"solana":i.src=t.display_uri,"loadItem"===n&&(r.addEventListener("click",(function(){vD(t,i.src,(function(){aC("FETCHING ITEM DATA"),hF(t.display_uri,{id:t.id},t.chain),kz()}))})),CD(t,r));break;case"ethereum":switch(n){case"listIterations":var s=t.imgUrl;t.imgURI=s,i.src=s,t.tag.hasOwnProperty("commune")?i.addEventListener("click",(function(){return QF(t)})):i.addEventListener("click",(function(){return $D(t)})),r.append(kD(t));break;case"loadIteration":s=t.imgUrl,t.imgURI=s,i.src=s,r.append(AD(t)),i.addEventListener("click",(function(){TO(t,i.src,(function(){$F(t.gentk,t.id,t.hash,t.name),kz()}))}))}}return r},SD=function(e){var t=document.createElement("div");t.className="artThumbTitle";var n=document.createElement("div");n.className="artistNames",n.style.minWidth="120px";var r=e.curators[0].curator;if(r.logo)try{var i=document.createElement("img");i.className="profilePic",i.setAttribute("draggable","false"),i.loading="lazy",i.setAttribute("data-src","/loading.gif"),i.src=e.curators[0].curator.logo,r.twitter&&(i.style.cursor="pointer",i.addEventListener("click",(function(){return window.open(e.curators[0].curator.twitter,"_blank")}))),i.onerror=function(){return i.remove()},t.appendChild(i)}catch(e){console.log(e)}var a=document.createElement("div");return a.innerHTML="<strong>"+e.name+"</strong>",r.alias&&(a.innerHTML+="<br>by "+e.curators[0].curator.alias),n.append(a),t.append(n),t},TD=function(e){var t=document.createElement("div");return t.style="background:white;padding:4px;border: 2px solid red;",t.innerText=e.name,t},MD=function(e,t){var n=document.createElement("div");n.className="artThumbTitle";var r=document.createElement("div");r.className="artistNames";var i=document.createElement("div");if(i.innerText=e.name,r.append(i),"https://anaver.se/?gallery=1&galc=".concat(e.contract,"&galid=").concat(e.id),t&&(e.lang&&(i.innerText="".concat(e.lang," ").concat(e.name)),e.hasOwnProperty("targetGallery")?"https://anaver.se/?videoguide=1&gallery=1&vgc=".concat(e.contract,"&vgid=").concat(e.token_id,"&galc=").concat(e.gallery_contract,"&galid=").concat(e.gallery_token_id):"https://anaver.se/?videoguide=1&vgc=".concat(e.contract,"&vgid=").concat(e.token_id)),!t){var a=kR[e.curator];if(a.alias){var o=document.createElement("div");o.innerText=a.alias,r.append(o)}if(a&&a.logo)try{var s=document.createElement("img");s.setAttribute("draggable","false"),s.className="profilePic",s.loading="lazy",s.setAttribute("data-src","/loading.gif"),s.src=a.logo,a.twitter&&(s.style.cursor="pointer",s.addEventListener("click",(function(){return window.open(a.twitter,"_blank")}))),s.onerror=function(){return s.remove()},n.appendChild(s)}catch(e){console.log("failed getting image")}}return r.style.minWidth="130px",n.append(r),n},kD=function(e){var t=document.createElement("div");t.className="thumbTitle";var n=document.createElement("A");return n.href=e.link,n.target="_blank",n.innerText=e.name.replace("anaverse -",""),n.style="font-style: italic;font-weight: 100;",t.appendChild(n),t},AD=function(e){var t=document.createElement("div");t.id="artNameBand"+e.contract+e.token_id,t.className="artThumbTitle",JSON.parse(_D.getItem("favoriteNativeIterations")).hasOwnProperty(e.contract+e.token_id)&&(t.style="background:red;color:white;");var n=document.createElement("div");if(n.className="artistNames",e.hasOwnProperty("token")){var r=kR[e.token.holders[0].holder.address];if(r.logo)try{var i=document.createElement("img");i.className="profilePic",i.setAttribute("draggable","false"),i.loading="lazy",i.setAttribute("data-src","/loading.gif"),i.src=r.logo,r.twitter&&(i.style.cursor="pointer",i.addEventListener("click",(function(){return window.open(r.twitter,"_blank")}))),i.onerror=function(){return i.remove()},t.appendChild(i)}catch(e){console.log("failed getting image")}}return n.innerHTML=e.name,t.append(n),t},ID=function(e){var t=document.createElement("div");t.className="artThumbTitle";var n=document.createElement("div");if(n.className="artistNames",n.innerText=e.fa.name,e.fa.logo)try{var r=document.createElement("img");r.className="profilePic",r.setAttribute("draggable","false"),r.loading="lazy",r.setAttribute("data-src","/loading.gif"),r.src="https://assets.objkt.media/file/assets-003/".concat(e.fa.logo.replace("ipfs://",""),"/thumb288"),r.onerror=function(){return r.remove()},t.appendChild(r)}catch(e){console.log("failed getting image")}return t.appendChild(n),t},LD=function(e,t){kz();var n=RD(e);hF(n,{id:t},e.chain)},RD=function(e){var t=0;return e.hasOwnProperty("display_uri")&&e.display_uri&&0===e.display_uri.indexOf("ipfs://")&&(t="https://assets.objkt.media/file/assets-003/"+e.display_uri.replace("ipfs://","")+"/display"),e.fa={contract:e.contract},t||(t="https://assets.objkt.media/file/assets-003/"+e.contract+"/"+e.token_id+"/thumb400"),t},CD=function(e,t){var n=document.createElement("div");n.id="artNameBand"+e.contract+e.token_id,n.className="artThumbTitle",JSON.parse(_D.getItem("favoritePaintings")).hasOwnProperty(e.contract+e.token_id)&&(n.style="background:red;color:white;");var r=document.createElement("div");r.className="artistNames";var i=e.name;r.style.minWidth="120px",r.innerHTML='<span style="font-weight:bold;">'.concat(i,"</span>"),n.append(r),t.append(n)},PD=function(e,t,n){return LR([t]).then((function(){var r=kR[t],i=document.createElement("div");i.className="artThumbTitle";var a=r.twitter?"@".concat(r.twitter):"",o=document.createElement("div");o.className="artistNames";var s=r.alias?r.alias:"";e.artist=s,s=s.length<50?s:s.substring(0,50)+"";var u=!1;IR.hasOwnProperty(t)&&(u=!0);var l=u?"white":"black",c=u?"red":"transparent";if(o.innerHTML='<span style="color:'.concat(l,";background:").concat(c,';padding:4px;">').concat(s,'</span>\n        <span><a href="').concat(r.twitter,'" target="_blank">').concat(a.replace("https://twitter.com/",""),"</a></span>"),r.logo)try{i.appendChild(function(e){if(e){var t=new Image;return t.setAttribute("draggable","false"),t.className="profilePic",t.loading="lazy",t.setAttribute("data-src","/loading.gif"),t.src=e,t.onerror=function(){return t.remove()},t}}(r.logo))}catch(e){console.log("failed getting image")}i.append(o),n.append(i)}))},OD=function(e){var t=document.createElement("div");t.className="artThumbTitle";var n=document.createElement("div");return n.className="artistNames",n.innerHTML="".concat(e.desc,'<br><a href="https://gallica.bnf.fr/').concat(e.IIIFdata.ark,"/").concat(e.IIIFdata.vue,'.item" target="_blank">Open on Gallica</a>'),t.append(n),t},DD=function(e){var t=document.createElement("div");t.className="artThumbTitle";var n=document.createElement("div");return n.className="artistNames",n.innerHTML='<a href="'.concat(e.url,'" target="blank">').concat(e.name,"</a>"),t.append(n),t},ND=function(e){var t=document.createElement("div");t.className="artThumbTitle",t.style="display: flex;\n  flex-direction: column;\n  min-width:100px;";var n=document.createElement("div");n.className="artistNames",n.innerHTML="<strong>".concat(e.meta.title,"</strong><br>").concat(e.meta.author);var r=document.createElement("button");return r.innerText="Load assets",r.className="thumbToolAction",r.addEventListener("click",(function(){e.slides.forEach((function(e){var t=e.url.replace("https://openapi.bnf.fr/iiif/image/v3/ark:/","https://gallica.bnf.fr/ark:/").replace("/full/max/0/default.webp","");!function(e){nD.push(e)}(t+=".item")}));var t=document.getElementById("collection");t.parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideRight",setTimeout((function(){return t.innerHTML=""}),350),setTimeout((function(){t.append(oD()),t.prepend(BD()),UD(document.getElementById("IIIFDiv"))}),500)})),t.append(n,r),t},BD=function(){var e=document.createElement("div");return e.innerHTML=" Back",e.style="border-radius: 5px;\n    cursor: pointer;\n    padding: 4px;\n    margin: 5px;\n    width: 65px;",e.addEventListener("click",(function(){console.log("coucou"),collection.parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideRight",setTimeout((function(){return collection.innerHTML=""}),250)})),e},UD=function(e){e.style.top="0%",e.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideLeft"};function FD(){return FD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FD.apply(this,arguments)}function zD(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var HD,GD,jD=[],VD=function(e){return(0,Fb.gql)(xD||(xD=zD(['\n  query getObjktCuratedGallery {\n    gallery(\n      where: { gallery_id: { _eq: "','" } }\n    ) {\n      gallery_id\n      slug\n      description\n      curators {\n        curator {\n          address\n          alias\n          logo\n          twitter\n        }\n      }\n      tokens {\n        token {\n          token_id\n          artifact_uri\n          description\n          display_uri\n          mime\n          thumbnail_uri\n          timestamp\n          name\n          fa_contract\n          creators {\n            creator_address\n            holder {\n             alias\n             twitter\n             logo\n             tzdomain\n           }\n          }\n        }\n      }\n    }\n  }\n'])),e)},qD=function(e,t){return(0,Fb.request)("https://data.objkt.com/v3/graphql",VD(e)).then((function(e){for(var n=e.gallery[0].tokens,r=FD({},t),i=[],a=0;a<r.gallery.length;a++){var o=r.gallery[a];"objkt"===o.tokenType||"tezos"===o.tokenType?a<n.length&&(o.objktMetaData={contract:n[a].token.fa_contract,token_id:n[a].token.token_id},i.push(o)):"block"===o.tokenType&&i.push(o)}r.gallery=i,LB(r)}))},WD=function(e){return(0,Fb.request)("https://data.objkt.com/v3/graphql",VD(e)).then((function(e){var t=e.gallery[0].tokens,n=document.getElementById("galleryMainWindow"),r="Contract import",i="";(jn<=6||jn>=20)&&(i='style="background-color:#313131;color:white;"'),n.innerHTML="<div ".concat(i,' class="helperPanel">').concat(wz[r],"</div>"),n.appendChild(PO[r].DOM.content);for(var a=t.length<=20?t.length:20,o=function(e){setTimeout((function(){var n=t[e].token;n.contract=n.fa_contract,n.chain="tezos",n.artist=n.creators[0].holder.alias;var r=ED(n,"loadItem");document.getElementById("importedContractContent").append(r)}),300*e)},s=0;s<a;s++)o(s)}))},XD=function(e){return(0,Fb.request)("https://data.objkt.com/v3/graphql",(0,Fb.gql)(wD||(wD=zD(['\n      query getObjktCuration($name: String) {\n        gallery(\n          where: {\n            registry: { name: { _eq: "objkt" } }\n            items: { _gt: 0 }\n            name: { _iregex: $name }\n          }\n          order_by: { updated_at: desc }\n          limit: 10\n        ) {\n          gallery_id\n          name\n          description\n          slug\n          logo\n          items\n          tokens {\n            token {\n              content_rating\n            }\n          }\n          curators {\n            curator {\n              address\n              alias\n              logo\n              twitter\n            }\n          }\n        }\n      }\n    ']))),{name:e}).then((function(e){return YD(e)}))},YD=function(e,t){t||(document.getElementById("objktCuratedDisplay").innerHTML=""),e.gallery.forEach((function(e){e.url="https://objkt.com/curations/objkt/"+e.slug,e.chain="tezos";var n=ED(e,"loadCuration");t?jD.push(n):document.getElementById("objktCuratedDisplay").append(n)}))},KD=function(e){if(e){var t=new URL(e);return new URLSearchParams(t.search).get("fxhash")}},JD=function(){for(var e,t=document.getElementsByClassName("galleryFilterCheckbox"),n=[],r=document.getElementsByClassName("gentkCell"),i=0;i<t.length;i++)t[i].checked&&n.push(t[i].dataset.key);if(n.length>0){e=t[0].dataset.slug;for(var a=0;a<r.length;a++)r[a].style.display="none"}else for(var o=0;o<r.length;o++)r[o].style.display="inline-block";if(0===n.length)for(var s=document.getElementById("iterationList").children,u=0;u<s.length;u++)s[u].style.display="block";if(e&&KR[e]&&n.length>0){var l=[];n.forEach((function(t){KR[e].collection.forEach((function(e){document.getElementById(e.DOMid).style.display="none",e.token.attributes.forEach((function(n){var r=n.attribute;("string"==typeof r.value?r.value:JSON.stringify(r.value))===t&&l.push(e.DOMid)}))}))})),l.forEach((function(e){return document.getElementById(e).style.display="block"}))}},ZD=function(){var e;(function(){var e,t=function(){var t=KR[n];t.slug=n,t.tag={},t.tags.forEach((function(e){switch(t.tag[e]=!0,e){case"firstPerson":case"world":case"skybox":t.type=e}})),t.title=t.name.replace("anaverse - ","");var r=ED(t,"listIterations"),i=document.createElement("div");i.className="gentkDesc",i.innerText=t.description,e=[],t.filters={},t.DOMelements={profile:r,description:i,gallery:e}};for(var n in KR)t();!function(){var e=[];for(var t in KR)KR[t].slug=t,e.push(KR[t]),delete KR[t];!function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}}(e),KR={},e.forEach((function(e){KR[e.slug]=e}))}()})(),iN&&(getPersonalTokens(iN),e=iN,(0,Fb.request)("https://data.objkt.com/v3/graphql",(0,Fb.gql)(bD||(bD=zD(['\n    query getObjktCuration {\n      gallery(\n        where: {registry: {name: {_eq: "objkt"}}, items: {_gt: 5}, name: {}, curators: {curator_address: {_eq: "','"}}}\n        order_by: {updated_at: desc}\n        limit: 10\n      ) {\n        gallery_id\n        name\n        logo\n        description\n        slug\n        items\n        curators {\n          curator {\n            address\n            alias\n            logo\n            twitter\n          }\n        }\n      }\n    }\n    \n    '])),e)).then((function(e){return YD(e,!0)}))),window.location.search?function(){mz();var e=window.location.search,t=new URLSearchParams(e);if(t.has("videoguide")&&t.has("vgc")&&t.has("vgid")&&setTimeout((function(){WR(jR[t.get("vgc")+t.get("vgid")].vidsrc,!1,t.get("vgc")+t.get("vgid"))}),2500),t.has("tutorial"))LB(fR),setTimeout((function(){cz()}),400);else{if(t.has("wallet")){var n=t.get("wallet");dN(n),tN(n),eC=n}t.has("ethwallet")}var r=!t.get("gallery")&&!t.has("autogalgen");if(t.has("loadroom")){r=!1;var i=t.get("loadroom").split("/"),a={room:{blockchain:i[0],contract:i[1],token_id:i[2],name:""},gallery:[]};LB(a)}t.has("loadsingle")&&function(e,t){var n=$R[parseInt(Math.random()*$R.length)];n.gallery[0].tezosMetaData={contract:e,token_id:t},LB(n)}(t.get("singlecontract"),t.get("singletokenid")),r&&QR()}():(r["Choix alatoire"].dbut=performance.now(),QR())};function QD(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var $D=function(e){Mz(),e.iterationsLoaded?mN(e):yN({native:!0,nativeRequestType:"iterationList",blockchain:e.chain,gentk:e})},eN=[],tN=function(e){return wP(e).then((function(){"tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9"!=e&&zb()("https://data.objkt.com/v3/graphql",(0,Fb.gql)(GD||(GD=QD(['query getUserAnaverse {\n      token(\n        where: {royalties: {receiver_address: {_eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9"}}, \n        tags: {tag: {name: {_eq: "anaverse"}}}, holders: {holder_address: {_eq: "','"}}}\n        limit: 30\n        order_by: {level: desc_nulls_last}\n        ) {\n          artifact_uri\n          name\n          ophash\n          fa_contract\n          token_id\n          holders(limit: 1, order_by: {last_incremented_at: desc_nulls_last}) {\n            holder {\n              address\n              alias\n              logo\n              twitter\n            }\n          }\n          attributes {\n            attribute {\n              name\n              value\n            }\n          }\n          display_uri\n          thumbnail_uri\n          tags {\n            tag {\n              name\n            }\n          }\n        }\n      }\n      '])),e)).then((function(e){var t=[];e.token.forEach((function(e){var n=0;e.hasOwnProperty("tags")&&e.tags.forEach((function(t){"room"===t.tag.name&&(e.type="room",n=1),"world"===t.tag.name&&(n=1),"skybox"===t.tag.name&&(e.type="skybox",n=1),"firstPerson"===t.tag.name&&(e.type="firstPerson",n=1)})),e.hasOwnProperty("tags")&&e.tags.forEach((function(r){"anaverse"===r.tag.name&&n&&t.push(e)}))})),function(e){e.forEach((function(e){e.contract=e.fa_contract,e.chain="tezos",e.hash=KD(e.artifact_uri.replace("ipfs://","https://")),e.personal=!0,e.slug=e.name.slice(0,e.name.lastIndexOf("#")-1),e.holder=e.holders[0].holder;var t="";e.hasOwnProperty("attributes")&&Array.isArray(e.attributes)&&e.attributes.forEach((function(e){"name"===e.attribute.name.toLowerCase()&&(t+=e.attribute.value)})),t.length<1&&(t=e.name);var n=e.holder.alias?e.holder.alias+"'s ":"";t=n+t.toLowerCase(),e.name=t,e.completeName=t,eN.push(ED(e,"loadIteration"))}))}(t)})).catch((function(e){yR("personal native anaver.se tokens retrieval",0),console.log("Error : the request to retrieve your native anaver.se tokens failed")}))}))},nN=document.getElementById("walletSync"),rN=document.getElementById("walletDetail"),iN="",aN=window.localStorage;aN.getItem("walldir")||aN.setItem("walldir",'{"eth":{},"tez":{}}'),aN.getItem("beacon:sdk-secret-seed")&&(aN.removeItem("beacon:sdk-secret-seed"),aN.removeItem("beacon:sdk_version"),aN.removeItem("beacon:active-account"),aN.removeItem("beacon:accounts"),aN.removeItem("beacon:postmessage-peers-dapp")),rN.style.display="none";var oN=function(){var e=document.getElementById("walletDetail");"none"===e.style.display?(e.style.display="flex",e.style.zIndex=9999):(e.style.display="none",e.style.zIndex=-50)};document.getElementById("signin").addEventListener("click",oN);var sN=document.getElementById("tzTarget");document.getElementById("tzLoadWallet").addEventListener("click",(function(){iN=sN.value.substring(sN.value.indexOf("tz")),dN(iN),zB(),tN(iN),oN();var e=new URL(document.location.href);e.searchParams.set("wallet",iN),window.history.replaceState({},"",e.href)}));var uN,lN,cN,hN,fN,dN=function(e){LR([e]).then((function(){var t,n,i,a=kR[e];a?(a.prevLoad="{}",nN.innerHTML='<div id="alias">'.concat(a.alias,'</div><div class="profilePic" style="background-image: url(\'').concat(a.logo,"');\" ></div>"),t=e,n=a.alias,(i=JSON.parse(aN.getItem("walldir"))).tez[t]={name:n,address:t,type:"tez"},aN.setItem("walldir",JSON.stringify(i)),mz(a.alias)):nN.innerHTML="<div style='font-size:12px'>CONNECTION ERROR</div>",r.Identit.fin=window.performance.now()}))},pN=window.localStorage,mN=function(e){e.iterationsLoaded=!0;var t=document.getElementById("collection");t.innerHTML="",document.getElementById("loadingCollection")&&document.getElementById("loadingCollection").remove();var n=document.createElement("div");if(n.innerHTML=" Back",n.style="border-radius: 5px;\n    cursor: pointer;\n    padding: 4px;\n    margin: 5px;\n    width: 65px;",n.addEventListener("click",(function(){SO(),t.parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideRight",setTimeout((function(){return t.innerHTML=""}),250)})),t.prepend(n),e.DOMelements.hasOwnProperty("profile")){var r=document.createElement("div");r.style.display="flex",r.appendChild(e.DOMelements.profile.cloneNode(1)),r.appendChild(e.DOMelements.description),t.appendChild(r)}var i=document.createElement("DIV");i.id="filter",i.innerText="FILTER TOKENS";var a,o=document.createElement("div");o.id="iterationList",o.style="display: flex;\n  margin: 20px;\n  padding: 0px;\n  flex-direction: row;\n  flex-wrap: wrap;",iN&&(a=JSON.parse(pN.getItem(iN)))&&(prevLoad=JSON.parse(a.prevLoad));for(var s=e.DOMelements.gallery.length,u=0;u<s;u++)o.appendChild(e.DOMelements.gallery[u]);var l=document.createElement("div");if(e.DOMelements.hasOwnProperty("filters"))l.style="display: grid;grid-template-columns: 20% 80%;",e.DOMelements.filters.forEach((function(e){i.appendChild(e)})),l.appendChild(i);else{var c=document.createElement("div");l.appendChild(c)}l.appendChild(o),t.append(l)};function vN(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var gN,yN=function(e){if(e.native)switch(e.nativeRequestType){case"generatorList":Promise.all([(0,Fb.request)("https://data.objkt.com/v3/graphql",(0,Fb.gql)(HR||(HR=YR(['\n      query getCrossChain {\n        token(\n          where: {\n            tags: {\n              tag: { name: { _eq: "anaverse" } }\n              token: { tags: { tag: { name: { _eq: "crosschain" } } } }\n            }\n            supply: { _gt: "0" }\n          }\n        ) {\n          attributes {\n            attribute {\n              name\n              value\n            }\n          }\n          token_id\n          fa_contract\n          accessibility\n          artifact_uri\n          average\n          content_rating\n          decimals\n          description\n          display_uri\n          extra\n          flag\n          highest_offer\n          is_boolean_amount\n          last_listed\n          last_metadata_update\n          level\n          lowest_ask\n          metadata\n          mime\n          name\n          ophash\n          supply\n          symbol\n          thumbnail_uri\n          timestamp\n          tzip16_key\n          tags {\n            tag {\n              name\n            }\n          }\n        }\n      }\n    '])))).then((function(e){e.token.forEach((function(e){e.iterationsLoaded=!1,e.id=e.fa_contract+e.token_id,e.tags.forEach((function(t){var n=t.tag.name;e.tags.push(n),"anaverse"===n&&(KR[e.name]=e),"skybox"===n&&(KR[e.name].type="skybox")}));var t=e.artifact_uri.slice(7),n="https://assets.objkt.media/file/assets-003/".concat(t,"/artifact/").replace("//artifact","/artifact");e.imgUrl="https://assets.objkt.media/file/assets-003/".concat(e.fa_contract,"/").concat(e.token_id,"/thumb288"),e.figuresUrl=n+"figures.js",e.skyboxUrl=n+"skybox.js",e.attributes.forEach((function(t){switch(t.attribute.name){case"target_chain":e.chain=t.attribute.value;break;case"author_wallet":e.crosschain_author_wallet=t.attribute.value,e.link="https://highlight.xyz/user/@".concat(t.attribute.value)}}))}))})),(0,Fb.request)("https://data.objkt.com/v3/graphql",(0,Fb.gql)(GR||(GR=YR(['\n      query getAnaverse {\n        gallery(\n          where: {\n            curators: {\n              curator_address: { _eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9" }\n            }\n          }\n          order_by: { inserted_at: desc }\n        ) {\n          logo\n          name\n          gallery_id\n          description\n          tokens(limit: 1, order_by: { id: asc }) {\n            id\n            token {\n              tags {\n                tag {\n                  name\n                }\n              }\n              fa_contract\n              artifact_uri\n              display_uri\n              thumbnail_uri\n              token_id\n            }\n          }\n        }\n      }\n    '])))).then((function(e){e.gallery.forEach((function(e){if(e.iterationsLoaded=!1,e.id=parseInt(e.gallery_id),e.tags=[],e.tokens.length>0){e.contract=e.tokens[0].token.fa_contract,e.tokens[0].token.tags.forEach((function(t){var n=t.tag.name;e.tags.push(n),"anaverse"===n&&(KR[e.name]=e),"skybox"===n&&(KR[e.name].type="skybox")})),e.link="https://objkt.com/explore/tokens/1?gallery=fxhash:"+e.gallery_id,e.chain="tezos";var t=e.tokens[0].token.artifact_uri.slice(7,e.tokens[0].token.artifact_uri.indexOf("?fxhash=")),n="https://assets.objkt.media/file/assets-003/".concat(t,"/artifact/").replace("//artifact","/artifact");e.figuresUrl=n+"figures.js",e.skyboxUrl=n+"skybox.js"}}))})).catch((function(e){console.log(e),yR("anaver.se native tokens retrieval",0)}))]).then((function(){yR("anaver.se native tokens retrieval",1),ZD()}));break;case"iterationList":switch(e.blockchain){case"tezos":!function(e){zb()("https://data.objkt.com/v3/graphql",(0,Fb.gql)(HD||(HD=QD(["\n      query getAllIterations($galleryId: String) {\n        gallery(where: { gallery_id: { _eq: $galleryId } }) {\n          tokens(order_by: { id: desc }) {\n            fa_contract\n            token_id\n            token {\n              name\n              artifact_uri\n              ophash\n              holders(\n                limit: 1\n                order_by: { last_incremented_at: desc_nulls_last }\n              ) {\n                holder {\n                  address\n                  alias\n                  twitter\n                  logo\n                }\n              }\n              attributes {\n                attribute {\n                  name\n                  value\n                }\n              }\n            }\n          }\n        }\n      }\n    "]))),{galleryId:JSON.stringify(e.id)}).then((function(t){e.collection=t.gallery[0].tokens,e.collection.forEach((function(t){CR(t.token.holders[0].holder),function(e,t){var n=KD(t.token.artifact_uri),r=t.token_id;t.gentk=e,t.hash=n,t.id=r,t.contract=t.fa_contract,t.chain=e.chain,t.DOMid=t.chain+"/"+t.contract+"/"+t.token_id;var i="";t.token.holders[0].holder.alias&&(i=t.token.holders[0].holder.alias+"'S "),t.holder=t.token.holders[0].holder,t.token.hasOwnProperty("attributes")&&Array.isArray(t.token.attributes)&&t.token.attributes.forEach((function(e){"name"===e.attribute.name.toLowerCase()&&(i+=e.attribute.value)})),i=i.toLowerCase(),t.name=i,t.completeName=i,t.link="<div style='font-size:10px'>Open on <a target='_blank' href=\"https://objkt.com/tokens/".concat(t.contract,"/").concat(t.token_id,'">objkt</a></div>'),e.DOMelements.gallery.push(ED(t,"loadIteration")),t.token.holders[0].holder.alias&&t.token.attributes.push({attribute:{name:"Owner",value:t.token.holders[0].holder.alias}}),function(e,t){e.hasOwnProperty("filters")||(e.filters={}),t&&t.length>0&&t.forEach((function(t){var n=t.attribute;e.filters.hasOwnProperty(n.name)?e.filters[n.name].hasOwnProperty(n.value)?e.filters[n.name][n.value]++:e.filters[n.name][n.value]=1:e.filters[n.name]={}}))}(e,t.token.attributes)}(e,t)})),function(e){var t,n=[],r=function(){(t=document.createElement("div")).innerHTML="<hr>"+i+" ("+Object.keys(e.filters[i]).length+")",t.style.cursor="pointer";var r=document.createElement("ul");for(var a in r.style.display="none",r.style.listStyle="none",e.filters[i]){var o=document.createElement("li"),s=document.createElement("input");s.type="checkbox",s.className="galleryFilterCheckbox",s.dataset.slug=e.slug,s.dataset.key=a;var u=e.filters[i][a];s.name=a+" ("+u+")";var l=document.createElement("label");l.innerText=a+" ("+u+")",l.for=a+" ("+u+")",s.addEventListener("change",JD),o.appendChild(s),o.appendChild(l),r.appendChild(o)}t.addEventListener("click",(function(){"none"===r.style.display?r.style.display="block":r.style.display="none"})),n.push(t,r)};for(var i in e.filters)r();e.DOMelements.filters=n}(e),mN(e)}))}(e.gentk);break;case"ethereum":a=e.gentk,zb()("https://api.highlight.xyz:8080/",(0,Fb.gql)(uN||(uN=vN(["\n      query GetPublicCollectionByWalletAddress($walletAddress: String!) {\n        getPublicCollectionsByWallet(walletAddress: $walletAddress) {\n          collections {\n            id\n            name\n            type\n            collectionType\n            symbol\n            chainId\n            contractId\n            status\n            baseUri\n            contractUri\n            description\n            address\n            seriesTokens(first: 500) {\n              edges {\n                id\n                tokenId\n                name\n                ownerAddress\n\n                attributes {\n                  name\n                  value\n                  __typename\n                }\n                imageUrl\n                animationUrl\n                minted\n                __typename\n              }\n              pageInfo {\n                endCursor\n                totalCount\n                __typename\n              }\n              __typename\n            }\n            seriesDetails {\n              coverImage\n              logoUrl\n              __typename\n            }\n            generativeDetails {\n              logoUrl\n              __typename\n            }\n            seriesImages {\n              urls\n              coverImageUrl\n              __typename\n            }\n            editions {\n              name\n              description\n              image\n              size\n              onChainImage\n              animation\n              __typename\n            }\n            mintVectors {\n              id\n              stats {\n                total\n                __typename\n              }\n              __typename\n            }\n            __typename\n          }\n          __typename\n        }\n      }\n    "]))),{walletAddress:a.crosschain_author_wallet}).then((function(e){e.getPublicCollectionsByWallet.collections.forEach((function(e){zb()("https://api.highlight.xyz:8080/",(0,Fb.gql)(lN||(lN=vN(["\n          query GetCollectionAddress($collectionId: String!) {\n            getPublicCollection(collectionId: $collectionId) {\n              address\n            }\n          }\n        "]))),{collectionId:e.id}).then((function(t){a.contract=t.getPublicCollection.address,a.collectionId=e.id})).then((function(){var t=!1;e.seriesTokens.edges[0].attributes.forEach((function(n){n.value===a.artifact_uri&&(t=e)})),t&&(t.seriesTokens.edges.forEach((function(e){!function(e,t){t.imgUrl=t.imageUrl,t.chain="ethereum",t.gentk=e,t.token_id=t.tokenId,t.contract=e.contract,t.url="https://highlight.xyz/mint/".concat(e.collectionId,"/tokens/").concat(t.token_id),t.link="<div style='font-size:10px'>Open on <a href=\"".concat(t.url,'" target="_blank">Highlight</a></div>');var n=new URL(t.animationUrl),r=n.searchParams.get("ms"),i=n.searchParams.get("h"),a=t.tokenId;r>1&&(i+=a),t.hash=i;var o=ED(t,"loadIteration");e.iterationsLoaded=1,e.DOMelements.gallery.push(o)}(a,e)})),mN(a))}))}))}))}break;case"specificToken":switch(e.blockchain){case"tezos":RB(e.gallery,e.contract,e.token_id);break;case"ethereum":n=e.gallery,r=e.contract,i=e.token_id,zb()("https://api.highlight.xyz:8080/",(0,Fb.gql)(hN||(hN=vN(["\n      query GetCollectionByOnChainId($onChainId: String!) {\n        getCollectionByOnChainId(onChainId: $onChainId) {\n          id\n          name\n          __typename\n        }\n      }\n    "]))),{onChainId:"1:".concat(r)}).then((function(e){return e.getCollectionByOnChainId.id})).then((function(e){return zb()("https://api.highlight.xyz:8080/",(0,Fb.gql)(fN||(fN=vN(["\n          query TokenDetails($collectionId: String!, $tokenId: String!) {\n            getPublicCollection(collectionId: $collectionId) {\n              seriesToken(tokenId: $tokenId) {\n                id\n                tokenId\n                name\n                description\n                imageUrl\n                animationUrl\n                minted\n                ownerAddress\n                attributes {\n                  name\n                  value\n                  __typename\n                }\n                __typename\n              }\n              __typename\n            }\n          }\n        "]))),{collectionId:e,tokenId:"string"==typeof i?i:JSON.stringify(i)})})).then((function(e){return e.getPublicCollection.seriesToken})).then((function(e){var t=new URL(e.animationUrl),a=t.searchParams.get("ms"),o=t.searchParams.get("h"),s=e.tokenId;a>1&&(o+=s),e.hash=o;var u=function(t){"ethereum"===KR[t].chain&&(qF("gallery",[]),e.attributes.forEach((function(a){if(a.value===KR[t].artifact_uri){var s=KR[t];s.contract=r,$F(s,"string"==typeof i?i:JSON.stringify(i),o,e.name,0,n)}})))};for(var l in KR)u(l);return e})).then((function(e){return n.skybox?CB(n):$F({skyboxUrl:"./initial_skybox.js",tag:{anaverse:!0,skybox:!0},type:"skybox"},0,ZR(),"",!0,!1),setTimeout((function(){n.hasOwnProperty("startPoint")?(qF("startPoint",n.startPoint),EH()):(qF("startPoint",0),VF())}),3e3),e})).then((function(e){return(t=e.ownerAddress,zb()("https://api.highlight.xyz:8080/",(0,Fb.gql)(cN||(cN=vN(["\n      query PublicUserProfile($slug: String!) {\n        getPublicAccountSettings(slug: $slug) {\n          id\n          displayAvatar\n          displayName\n          walletAddresses\n          verified\n          __typename\n        }\n      }\n    "]))),{slug:t}).then((function(e){return e.getPublicAccountSettings}))).then((function(t){e.owner=t,e.name=e.owner.displayName.length>0?e.owner.displayName.toUpperCase()+"'S "+e.name:e.name,ZF("room",e.name)})).catch((function(e){console.log("Could not find information on the room owner")}));var t}))}break;case"sendToChat":switch(e.blockchain){case"tezos":case"ethereum":RN(e)}}else switch(e.blockchain){case"tezos":e.hasOwnProperty("assetList")?SP(e.assetList):function(e){var t,n=e.substring(0,e.indexOf("/")),r=e.substring(e.indexOf("/")+1);if(0===n.indexOf("KT1"))return _P(n,r);(0,Fb.request)("https://data.objkt.com/v3/graphql",(t=n,(0,Fb.gql)(sP||(sP=fP(["query getContract($_eq: String = ",") {\n  fa(where: {path: {_eq: $_eq}}) {\n    contract\n  }\n}"])),t))).then((function(e){return e.fa[0].contract})).then((function(e){return _P(e,r)}))}(e.id);break;case"solana":e.hasOwnProperty("solanaMetaData")?function(e){fetch("https://api.solana.fm/v0/magiceden/tokens/".concat(e.solanaMetaData.contract,"?network=mainnet")).then((function(e){return e.json()})).then((function(t){console.log(e),console.log(t);var n={position:e.position,rotation:e.rotation,scale:e.scale},r=e.solanaMetaData.contract,i=t.result.image;e.chain="solana",e.type="solana",UB[r]=t.result,UB[r].contract=r,hF(i,{id:r},"solana",n)}))}(e):(t=e.id,fetch("https://api.solana.fm/v0/magiceden/tokens/".concat(t,"?network=mainnet")).then((function(e){return e.json()})).then((function(e){var n=e.result;n.id=t,n.contract=t,n.display_uri=n.image,n.link='<span>Check on <a href="https://solana.fm/address/'.concat(n.contract,'" target="_blank">solana.fm</a></span>'),n.chain="solana",n.url="https://solana.fm/address/".concat(n.contract),UB[n.contract]=n;var r=document.getElementById("importedContractContent");r&&r.append(ED(n,"loadItem"))})))}var t,n,r,i,a},bN=window.localStorage,xN={},wN=function(){return!!gN&&gN.connected},_N=document.getElementById("messageR"),EN=document.getElementById("messageC"),SN=document.getElementById("sendMessage"),TN=function(e,t,n){console.log("Starting multi-user connection"),gN&&(gN.disconnect(),gN=null),xN={server:e,name:t,room:n},bN.setItem("previousChatSetting",JSON.stringify(xN)),gN=lR(e),SN.style.display="block",document.getElementById("messageDiv").style.display="block",SN.addEventListener("focusin",(function(){return Uz(1)})),SN.addEventListener("focusout",(function(){return Uz(0)})),SN.addEventListener("change",MN),gN.on(n,(function(e){return IN(e)}))},MN=function(){gN.emit(xN.room,"".concat(xN.name,": ").concat(SN.value).toUpperCase()),SN.innerText="",SN.value=""},kN=function(e,t,n){var r=document.createElement("div");return r.style="padding:3px;margin-top:2px;border-radius:2px;".concat(t),r.innerText=e,n&&r.addEventListener("click",n),r},AN=function(e,t){var n={type:t,contract:e.contract,token_id:e.token_id,chain:e.chain,emitter:xN.name,name:e.name};switch(e.chain){case"IIIF":n.IIIFdata=e.IIIFdata,n.link=e.link,n.item=e.item;break;case"solana":n.solanaMetaData={contract:e.id}}gN.emit(xN.room,JSON.stringify(n))},IN=function(e){if("{"===e[0]){var t=JSON.parse(e),n=t.contract;t.hasOwnProperty("token_id")&&(n+="/"+t.token_id);var r={blockchain:t.chain,id:n},i="".concat(t.emitter," has sent a ").concat(t.type,".").toUpperCase();switch(EN.append(kN(i,"")),_N.append(kN(i,"background-color: rgba(255, 255, 255, 0.9);width: fit-content;")),t.type){case"IIIF":LN(t);break;case"painting":r.native=!1,r.solanaMetaData=t.solanaMetaData,yN(r);break;case"location":r.native=!0,r.gallery=[],r.nativeRequestType="sendToChat",r.name=t.name,r.contract=t.contract,r.token_id=t.token_id,yN(r)}}else e=e.toUpperCase(),EN.append(kN(e,"")),_N.append(kN(e,"background-color: rgba(255, 255, 255, 0.9);width: fit-content;"));document.getElementById("messageDiv").scrollTo({top:999999,left:0,behavior:"smooth"})},LN=function(e){var t="[ - ".concat(e.item.name," ").concat(e.item.artist,"]").toUpperCase();EN.append(kN(t,"cursor:pointer;",(function(){aC("FETCHING ITEM DATA"),eD(e.IIIFdata,e.link,null,e.item)}))),_N.append(kN(t,"background-color: rgba(255, 255, 255, 0.9);width: fit-content;cursor:pointer;"))},RN=function(e){e.id;var t="[ - ".concat(e.name,"]").toUpperCase();e.nativeRequestType="specificToken",e.gallery=[],EN.append(kN(t,"cursor:pointer;",(function(){return yN(e)}))),_N.append(kN(t,"background-color: rgba(255, 255, 255, 0.9);width: fit-content;cursor:pointer;"))},CN=function(e){var t=e.id,n="[ - ".concat(e.name," - ").concat(e.artist,"]").toUpperCase();EN.append(kN(n,"cursor:pointer;",(function(){aC("FETCHING ITEM DATA"),UB[t]=e,UB[t].contract=e.contract,UB[t].token_id=e.token_id;var n=RD(e);hF(n,{id:t},e.chain),setTimeout((function(){return bH.lock()}),500)}))),_N.append(kN(n,"background-color: rgba(255, 255, 255, 0.9);width: fit-content;cursor:pointer;"))},PN=document.getElementById("itemMetaData"),ON=document.getElementById("assetLoader");function DN(e,t){return e?e.length>t?e.substring(0,t)+"":e:""}ON.addEventListener("click",(function(){ON.innerHTML="",ON.style.display="none"}));var NN=document.getElementById("itemMetaNote"),BN=document.getElementById("artwork-detailedMetaData"),UN=document.getElementById("artwork-title"),FN=document.getElementById("artwork-artist"),zN=document.getElementById("artwork-description"),HN=document.getElementById("artwork-mime-type"),GN=document.getElementById("artwork-openExternal"),jN=document.getElementById("messageDiv"),VN=document.getElementById("sendMessage"),qN='<svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 96 960 960" width="20"><path fill="white" d="M180 936q-24 0-42-18t-18-42V276q0-24 18-42t42-18h279v60H180v600h600V597h60v279q0 24-18 42t-42 18H180Zm202-219-42-43 398-398H519v-60h321v321h-60V319L382 717Z"/></svg>',WN=function(){var e=document.createElement("div");return e.className="focusToolButton",e.innerHTML="Load asset &nbsp;&nbsp; ".concat('<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path fill="white" d="M184.615-200Q157-200 138.5-218.5 120-237 120-264.615v-430.77Q120-723 138.5-741.5 157-760 184.615-760h164.616v40H184.615q-9.23 0-16.923 7.692Q160-704.615 160-695.385v430.77q0 9.23 7.692 16.923Q175.385-240 184.615-240h590.77q9.23 0 16.923-7.692Q800-255.385 800-264.615v-430.77q0-9.23-7.692-16.923Q784.615-720 775.385-720H610.769v-40h164.616Q803-760 821.5-741.5 840-723 840-695.385v430.77Q840-237 821.5-218.5 803-200 775.385-200h-590.77ZM480-364 307.692-536.308 336-564.616l124 124V-760h40v319.384l124-124 28.308 28.308L480-364Z"/></svg>'),e};var XN,YN=document.getElementById("personalNotes"),KN=function(e,t){YN.style.display="flex",YN.innerHTML="";var n=document.createElement("div"),r=document.createElement("div");r.style="color:white;font-family:sans-serif;font-weight:bolder;font-size:12px;padding: 2px;",r.innerText="Notes";var i=document.createElement("textarea");i.className="focusTextNote",i.value=e.hasOwnProperty("note")?e.note:"",i.addEventListener("focusin",(function(){return Uz(1)})),i.addEventListener("focusout",(function(){return Uz(0)})),i.addEventListener("change",(function(){e.note=i.value,t.parent.userData.note=i.value})),n.append(r,i),YN.append(n)},JN=function(){BN.style.display="none",YN.innerHTML="",YN.style.display="none",jN.style.display="block",VN.style.display="block"},ZN=document.getElementById("cont"),QN=new Wo,$N=new Eg,eB=!1,tB=0;$N.params={Mesh:{},Line:{threshold:.1},LOD:{},Points:{threshold:.1},Sprite:{}};var nB=function(e){return eB=e},rB=0,iB=!1,aB=new Nl(20,20,.1),oB=document.getElementById("roomLegendG"),sB=document.getElementById("roomLegendR"),uB=document.getElementById("info"),lB=document.getElementById("mobile-control"),cB=function(){nB(0),rB||((rB=new Ol(aB,CF.blackOpacityFocus)).position.z=-2.7,rB.position.y=20.5,CF.blackOpacityFocus.opacity=0,hH.add(rB)),iB?(dS.to(CF.blackOpacityFocus,{duration:.3,opacity:0}),dS.to(rB.position,{duration:.4,y:20.5}),dS.to(CF.torcheMaterial,{duration:.3,opacity:.8}),iB=0,setTimeout((function(){rB=0,hH.clear(),oB.style.display="block",sB.style.display="block",uB.style.display="block",yz&&(lB.style.display="block"),nB(1)}),550),setTimeout((function(){cH.attach(dB),dS.to(dB.position,{duration:.5,x:fB.position.x,y:fB.position.y,z:fB.position.z,ease:"power1.in"}),dS.to(dB.rotation,{duration:.5,x:fB.rotation.x,y:fB.rotation.y,z:fB.rotation.z,ease:"power1.in"}),dS.to(dB.scale,{duration:.5,x:fB.scale.x,y:fB.scale.y,z:fB.scale.z,ease:"power1.in"}),fB=0}),280)):(dS.to(rB.position,{duration:.5,delay:.55,y:.5}),dS.to(CF.blackOpacityFocus,{duration:.5,delay:.55,opacity:.8}),dS.to(CF.torcheMaterial,{duration:.5,delay:.55,opacity:0}),oB.style.display="none",sB.style.display="none",uB.style.display="none",Rz&&Lz(),yz&&(lB.style.display="none"),iB=1)},hB=function(){if(eB){$N.setFromCamera(QN,yH,0,12);var e=$N.intersectObjects(cH.children);if(e)if(e.length>1){if((XN=e[0]).object.hasOwnProperty("userData")&&XN.distance<12)if(XN.object.userData.isWorldItem)UB.hasOwnProperty(XN.object.userData.objktID)&&!iB&&function(e){if(PN.style.display="block",!iB)if(Cz){for(var t in PN.style.top="50%",UB)UB[t].focused=!1;e.focused=!0,PN.innerHTML=e.tooltipMetadata,PN.innerHTML+="<span style='font-size:8px;font-family:monospace;min-width:90px;'>Click to focus | Push V to hide metadata</span>",e.hasOwnProperty("note")&&e.note&&e.note.length&&(NN.style.display="block",NN.innerText=e.note)}else PN.style.width="auto",PN.style.top="90%",NN.style.display="none",PN.innerHTML="<span style='font-size:10px;font-family:monospace;min-width:90px;'>Push V to toggle metadata</span>"}(UB[XN.object.userData.objktID]);else if(XN.object.userData.isBlockPanel){var t=XN.object.parent;tB&&(tB.material===CF.redFull||tB.material===CF.cyanFull&&tB.parent!=t)&&(tB.material=CF.whiteFull,tB.scale.x-=.04,t.children.forEach((function(e){e.isMesh&&e.material===CF.whiteFull&&(e.material=CF.redFull,e.scale.x+=.04,tB=e)}))),tB||t.children.forEach((function(e){(e.isMesh&&e.material===CF.whiteFull||e.material===CF.cyanFull)&&(e.material=CF.redFull,e.scale.x+=.04,tB=e)}))}}else document.getElementById("itemMetaData").style.display="none",document.getElementById("itemMetaNote").style.display="none",XN=null,tB&&tB.material===CF.redFull&&(tB.material=CF.whiteFull,tB.scale.x-=.04,tB=null)}};ZN.addEventListener("wheel",(function(e){if(XN){var t=XN.object.parent;if(t.userData.hasOwnProperty("isBlockDisplay")){var n=e.deltaY/700;dS.to(t.parent.position,{duration:.4,y:t.parent.position.y+n})}}})),ZN.addEventListener("touchstart",(function(){return hB()}));var fB=0,dB=0,pB=2e3;ZN.addEventListener("click",(function(){var e=!1,t=performance.now();if(t-pB>700)if(pB=t,fB)bH.lock(),JN(),cB();else if(XN&&eB)if(XN.object.parent.userData.hasOwnProperty("isBlockDisplay")){var n=XN.object.parent;if(!n.userData.focused)if(dS.to(n.position,{duration:2,z:n.position.z+.3}),n.userData.focused=!0,n.userData.item.hasOwnProperty("token")){var r=n.userData.item.token;if("ETH"===r.type){var i=r.display_uri;r.fa={contract:"BA"};var a={id:r.tokenId,objkt:{asset_contract:{address:r.txnHash},token_id:r.tokenId}};UB[a.id]=r,hF(i,a,"ethereum")}else{var o="https://assets.objkt.media/file/assets-003/"+r.display_uri.replace("ipfs://","")+"/display";r.fa={contract:r.fa2_address};var s={id:r.fa2_address+r.token_id};r.url="https://objkt.com/tokens/"+r.fa2_address+"/"+r.token_id,UB[s.id]=r,hF(o,s,"tezos")}}else{var u=n.userData.item,l=u.display_uri;u.fa=0;var c={id:u.permalink};u.url=u.permalink,UB[c.id]=u,hF(l,c)}}else if(eB){var h=XN.object;h.hasOwnProperty("userData")&&XN.distance<12&&!Hz&&h.userData.isWorldItem&&UB.hasOwnProperty(h.userData.objktID)&&(document.getElementById("itemMetaData").style.display="none",document.getElementById("itemMetaNote").style.display="none",bH.unlock(),dB=h.parent,(fB={position:{},rotation:{},scale:{}}).position=new _s(dB.position.x,dB.position.y,dB.position.z),fB.rotation=new _s(dB.rotation.x,dB.rotation.y,dB.rotation.z),fB.scale=new _s(dB.scale.x,dB.scale.y,dB.scale.z),hH.attach(dB),cB(),dS.to(dB.position,{duration:.5,x:0,y:0,z:-2.5,ease:"power1.in"}),dS.to(dB.rotation,{duration:.5,x:0,y:0,z:0,ease:"power1.in"}),dS.to(dB.scale,{duration:.5,x:1,y:1,z:1,ease:"power1.in"}),setTimeout((function(){!function(e,t){BN.style.display="flex",pz&&(BN.style.left="-300px",BN.style.animation="0.4s linear 0.1s 1 normal forwards running loaderSlideRight"),UN.innerText=e.name?e.name:"",FN.innerText=e.artist?e.artist:"",zN.innerText="",e.hasOwnProperty("description")&&e.description&&(zN.innerText=e.description),e.hasOwnProperty("mime")&&(HN.innerText="[MIME type -  ".concat(e.mime,"]")),PN.style.display="none",function(e,t){if(e.hasOwnProperty("type")){GN.innerHTML="";var n=document.createElement("div");n.className="focusToolButton";var r=0;switch(e.type){case"tezos":case"objkt":if(r="Objkt",e.mime&&e.mime.indexOf("html")<0&&e.mime.indexOf("application")<0){var i=WN();GN.append(i),i.addEventListener("click",(function(){return function(e){var t=e.artifact_uri?"https://assets.objkt.media/file/assets-003/"+e.artifact_uri.replace("ipfs://","")+"/artifact":"https://assets.objkt.media/file/assets-003/"+e.display_uri.replace("ipfs://","")+"/artifact";if(0===e.mime.indexOf("image")){var n=new Image;n.src=t,n.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",ON.append(n),ON.style.display="flex"}else if(0===e.mime.indexOf("video")){var r=document.createElement("video"),i=document.createElement("source");i.src=t,r.append(i),r.autoplay=!0,r.loop=!0,r.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",ON.append(r),ON.style.display="flex"}}(e)}))}if(wN()){var a=((l=document.createElement("div")).className="focusToolButton",l.innerHTML="Send to chat",l);GN.append(a),a.addEventListener("click",(function(){AN(e,"painting"),bH.lock(),JN(),cB()}))}break;case"artacle":case"ethereum":r="Artacle";break;case"solana":if("image"===e.properties.category||"video"===e.properties.category){var o=WN();GN.append(o),o.addEventListener("click",(function(){return function(e){var t=e.properties.files[0].uri;if("image"===e.properties.category){var n=new Image;n.src=t,n.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",ON.append(n),ON.style.display="flex"}else if("video"===e.properties.category){var r=document.createElement("video"),i=document.createElement("source");i.src=t,r.append(i),r.autoplay=!0,r.loop=!0,r.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",ON.append(r),ON.style.display="flex"}}(e)}))}r="Solana FM";break;default:r="web2"}if(r){if(n.innerHTML="Inspect on ".concat(r," &nbsp;&nbsp; ").concat(qN),e.hasOwnProperty("gallica")){n.innerHTML="Ouvrir dans Gallica &nbsp;&nbsp; ".concat(qN);var s=WN();GN.append(s),s.addEventListener("click",(function(){return function(e){var t="https://gallica.bnf.fr/iiif/".concat(e.IIIFdata.ark,"/").concat(e.IIIFdata.vue,"/").concat(e.IIIFdata.region,"/").concat(e.IIIFdata.size,"/").concat(e.IIIFdata.rotation,"/").concat(e.IIIFdata.quality),n=new Image;n.src=t,n.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",ON.append(n),ON.style.display="flex"}(e)}))}if(e.hasOwnProperty("britishLibrary")){n.innerHTML="Access on the British Library &nbsp;&nbsp; ".concat(qN);var u=WN();GN.append(u),u.addEventListener("click",(function(){return function(e){var t="https://api.bl.uk/image/iiif/".concat(e.IIIFdata.ark,"/").concat(e.IIIFdata.region,"/").concat(e.IIIFdata.size,"/").concat(e.IIIFdata.rotation,"/").concat(e.IIIFdata.quality,".jpg"),n=new Image;n.src=t,n.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",ON.append(n),ON.style.display="flex"}(e)}))}n.addEventListener("click",(function(){return function(e){e&&(bH.unlock(),e.hasOwnProperty("permalink")?window.open(e.permalink,"_blank"):e.hasOwnProperty("url")&&window.open(e.url,"_blank"))}(e)})),GN.append(n)}}var l,c,h=((c=document.createElement("div")).className="focusToolButton",c.innerHTML="Add note &nbsp;&nbsp; ".concat('<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path fill="white" d="M180.001-400v-59.999h280V-400h-280Zm0-160v-59.999h440V-560h-440Zm0-160v-59.999h440V-720h-440Zm344.615 539.999v-105.692l217.153-216.153q7.462-7.461 16.111-10.5 8.65-3.038 17.299-3.038 9.436 0 18.252 3.538 8.816 3.539 16.029 10.615l37 37.385q6.462 7.461 10 16.153 3.539 8.693 3.539 17.385 0 8.692-3.231 17.692t-10.308 16.461L630.307-180.001H524.616Zm287.691-250.307-37-37.385 37 37.385Zm-240 202.615h38l129.847-130.462-18.385-19-18.615-18.769-130.847 130.231v38Zm149.462-149.462-18.615-18.769 37 37.769-18.385-19Z"/></svg>'),c);KN(e,t),e.hasOwnProperty("note")?e.note&&(YN.style.display="flex"):(YN.style.display="none",h.addEventListener("click",(function(){return YN.style.display="flex"}))),GN.append(h)}(e,t),jN.style.display="none",VN.style.display="none"}(UB[h.userData.objktID],h)}),550),e=!0)}e||bH.lock()}));var mB=new Audio,vB=function(){return mB.volume=.1};vB();var gB=document.getElementById("audio-radio"),yB=document.getElementById("radio-name"),bB=document.getElementById("track-name"),xB=document.getElementById("radio-play"),wB=!1;xB.addEventListener("click",(function(){vB(),wB?(mB.pause(),wB=!1,xB.innerHTML='<img  style="width:15px;height:15px" src="icons/play.svg">'):(mB.play(),wB=!0,xB.innerHTML='<img  style="width:15px;height:15px" src="icons/stop.svg">')}));var _B=!1;function EB(e){return function(e){if(Array.isArray(e))return SB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return SB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SB(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var TB=0,MB=window.localStorage,kB=document.getElementById("matureNotice");document.getElementById("hideNotice").addEventListener("click",(function(){bH.lock(),kB.style.display="none"}));var AB=function(){bH.unlock(),kB.style.display="block"},IB=null,LB=function(e){nB(!0),IB=e.curator,yN({native:!0,nativeRequestType:"specificToken",blockchain:e.room.blockchain,contract:e.room.contract,token_id:e.room.token_id,gallery:e})},RB=function(e,t,n){return(0,Fb.request)("https://data.objkt.com/v3/graphql",' query checkRoom {\n      token(where: {token_id: {_eq: "'.concat(n,'"},fa_contract: {_eq: "').concat(t,'"},creators: {creator_address: {_eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9"}}}) {\n        artifact_uri\n        attributes {\n          attribute {\n            name\n            value\n          }\n        }\n    average\n    decimals\n    description\n    display_uri\n    fa{contract}\n    token_id\n    extra\n    flag\n    highest_offer\n    is_boolean_amount\n    last_listed\n    last_metadata_update\n    level\n    lowest_ask\n    metadata\n    mime\n    name\n    ophash\n    rights\n    tags {\n      tag {\n        name\n      }\n    }\n    supply\n    symbol\n    thumbnail_uri\n    timestamp\n    tzip16_key\n    creators {\n      creator_address\n    }\n    holders {\n      holder {\n        address\n        alias\n      }\n    }\n      }\n    }')).then((function(t){GB(),TB=0,e.hasOwnProperty("startPoint")?qF("startPoint",e.startPoint):(qF("startPoint",0),VF()),qF("gallery",[]),e.hasOwnProperty("DOMthumb")&&JR(JSON.parse(e.name)+" | ANAVER.SE",e.DOMthumb.src.replace("/thumbnail","/display")),e.hasOwnProperty("gallery")&&e.gallery.forEach((function(e){"block"!=e.tokenType&&"sculpture"!=e.tokenType&&TB++})),nB(!0);var r=t.token[0];cH.clear();var i="";r.holders[0].holder.alias&&(i=r.holders[0].holder.alias.toUpperCase()+"'S "),r.hasOwnProperty("attributes")&&r.attributes.forEach((function(e){"name"===e.attribute.name.toLowerCase()&&(i+=e.attribute.value)}));var a=new URL(r.artifact_uri.replace("ipfs://","https://")),o=new URLSearchParams(a.search).get("fxhash");r.type="world",r.tag={room:!0};var s=r.artifact_uri.slice(7,53);r.figuresUrl="https://assets.objkt.media/file/assets-003/".concat(s,"/artifact/figures.js"),r.contract=r.fa.contract,r.chain="tezos",r.tags.forEach((function(e){return r.tag[e.tag.name]=!0})),r.tag.hasOwnProperty("commune")?QF(r,e.gallery):$F(r,n,o,i,0,e),yR("Gallery room retrieval",1),e.hasOwnProperty("audioguide")&&function(e,t){mB.pause(),clearInterval(undefined),mB.src=e,yB.innerText=t,bB.innerText="Gallery audioguide",_B=!0,gB.style.display="flex",setTimeout((function(){wB=!0,xB.innerHTML='<img  style="width:15px;height:15px" src="icons/stop.svg">',mB.play().catch((function(e){wB=!1,xB.innerHTML='<img  style="width:15px;height:15px" src="icons/play.svg">'}))}),1500)}("https://assets.objkt.media/file/assets-003/"+e.artifact.replace("ipfs://","")+"/artifact/"+e.audioguide.mainTrack,e.name),e.hasOwnProperty("collection")&&e.collection&&(e.collection,LR([e.collection]).then((function(){kR[e.collection].alias})).catch((function(e){console.log(e)})))})).then((function(t){e.skybox?CB(e):$F({skyboxUrl:"./initial_skybox.js",tag:{anaverse:!0,skybox:!0},type:"skybox"},0,ZR(),"",!0,!1)})).catch((function(e){console.log(e),yR("Gallery room retrieval",0)}))},CB=function(e){if(parseInt(e.skybox)){var t=parseInt(e.skybox)+0;e.skybox={token_id:t},PB(e,"")}else if("tezos"===e.skybox.blockchain){var n=',fa_contract: {_eq: "'.concat(e.skybox.contract,'"}');qF("skybox",{contract:e.skybox.contract,token_id:e.skybox.token_id,name:e.skybox.name,blockchain:"tezos"}),PB(e,n)}},PB=function(e,t){return(0,Fb.request)("https://data.objkt.com/v3/graphql",' query checkRoom {\n      token(where: {token_id: {_eq: "'.concat(e.skybox.token_id,'"}').concat(t,',creators: {creator_address: {_eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9"}}}) {\n        artifact_uri\n    average\n    decimals\n    description\n    display_uri\n    extra\n    flag\n    highest_offer\n    is_boolean_amount\n    last_listed\n    last_metadata_update\n    level\n    lowest_ask\n    metadata\n    mime\n    name\n    ophash\n    rights\n    supply\n    symbol\n    thumbnail_uri\n    token_id\n    timestamp\n    tzip16_key\n    creators {\n      creator_address\n    }\n    holders {\n      holder {\n        address\n        alias\n      }\n    }\n    fa_contract\n      }\n    }')).then((function(e){var t=e.token[0];if(t){Oz(1);var n=1.75*window.innerHeight,r=new URL(t.artifact_uri.replace("ipfs://","https://")),i=new URLSearchParams(r.search).get("fxhash"),a=t.artifact_uri.slice(7,53),o="https://assets.objkt.media/file/assets-003/".concat(a,"/artifact/skybox.js");iH.fog&&(iH.fog.near=99999,iH.fog.far=99999),cF.postMessage({side:n,skyurl:o,hash:i})}yR("Gallery skybox retrieval",1)})).catch((function(e){console.log(e),yR("Gallery skybox retrieval",0)}))},OB=function(e,t){var n=JSON.parse(MB.getItem("localGalleries")),r=[];window.confirm("Do you really want to destroy this local gallery?")&&(n.forEach((function(n){n.hasOwnProperty("timeId")?n.timeId!=e.timeId?r.push(n):t&&t.remove():r.push(n)})),MB.setItem("localGalleries",JSON.stringify(r)))},DB=function(e){e.forEach((function(e){(0,Fb.request)("https://api.fxhash.xyz/graphql","query {\n        objkt(id: ".concat(e.fxMetaData.objktid,") {\n          metadata\n         \n          owner {\n            id\n            name\n          }\n          issuer {\n            author {\n              id\n              name\n            }\n          }\n        }\n      }")).then((function(t){var n=t.objkt;n.type="world",n.tag={world:!0,item:!0};var r=new URL(n.metadata.artifactUri.replace("ipfs://","https://")),i=new URLSearchParams(r.search).get("fxhash"),a=n.metadata.artifactUri.slice(7,53);n.figuresUrl="https://assets.objkt.media/file/assets-003/".concat(a,"/artifact/figures.js").replace("//art","/art");var o={position:e.position,rotation:e.rotation,scale:e.scale};$F(n,e.fxMetaData.objktid,i,n.metadata.name,o)}))}))},NB=function(e){var t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=document.createElement("a");return n.href=URL.createObjectURL(t),n.download="gallery",n.innerText="Export gallery",n},BB=function(){if(zF.name=document.getElementById("galleryName").value,zF.name.length>0){zF.timeId=new Date;var e={};for(var t in cH.children.forEach((function(t){var n={};if(t.userData.hasOwnProperty("tokenType")){switch(n.tokenType=t.userData.tokenType,t.userData.hasOwnProperty("note")&&(n.note=t.userData.note),n.tokenType){case"block":n.block=t.userData;break;case"datavis":n.datavis=t.userData;break;case"sculpture":n.fxMetaData=t.userData.fxMetaData;break;case"IIIF":n.IIIFdata=t.userData.IIIFdata;break;case"solana":n.solanaMetaData=t.userData.solanaMetaData;break;case"ethereum":n.ethereumMetaData=t.userData.ethereumMetaData;case"tezos":n.tezosMetaData=t.userData.tezosMetaData}!function(t,n){var r="",i=["x","y","z"];["position","rotation","scale"].forEach((function(e){t[e]={},i.forEach((function(i){t[e][i]=Nn(".4f")(n[e][i]),r+=JSON.stringify(t[e][i])}))})),e[r]=t}(n,t)}})),zF.gallery=[],e)zF.gallery.push(e[t]);galleryCreator.style.display="none",galleryCreator.style.zIndex=-5,document.getElementById("galleryMetaData").innerHTML="",document.addEventListener("keydown",Gz);var n=JSON.parse(MB.getItem("localGalleries"));n?(n.push(zF),MB.setItem("localGalleries",JSON.stringify(n))):MB.setItem("localGalleries",JSON.stringify([zF])),Uz(0),kz(),aC("GALLERY SAVED LOCALLY",1500)}},UB={},FB={},zB=function(){return FB={}},HB=0,GB=function(){return HB=0},jB=2.5,VB=new rc(jB,jB),qB=new Nl(2.6,2.6,.05),WB=new Nl(2.65,.05,.15),XB=new Nl(.05,2.65,.15),YB=function(e){return Number(e)?Number(e):Number("-"+e.substring(1))},KB=function(e,t,n,r,i){HB++,UB[t.id].img=e,i&&(UB[t.id].note=i),aC("LOADING PIECE "+HB+(TB>0?"/"+TB:""),1500);var a=new Tf;dF(e).then((function(e){e.magFilter=Ii,e.minFilter=Ci,e.colorSpace=$a,e.anisotropy=vH;var o,s,u,l,c,h,f=new Vu({map:e});if(e.image.height===e.image.width)o=new Ol(VB,f),(s=new Ol(qB,CF.ghost)).position.set(0,0,-.05),(l=new Ol(WB,CF.ghost)).position.set(0,1.3,0),(u=new Ol(WB,CF.ghost)).position.set(0,-1.3,0),(c=new Ol(XB,CF.ghost)).position.set(-1.3,0,0),(h=new Ol(XB,CF.ghost)).position.set(1.3,0,0);else if(e.image.height>e.image.width){var d=jB*(e.image.width/e.image.height);o=new Ol(new rc(d,jB),f),(s=new Ol(new Nl(d+.1,2.6,.05),CF.ghost)).position.set(0,0,-.05),(l=new Ol(new Nl(d+.15,.05,.15),CF.ghost)).position.set(0,1.3,0),(u=new Ol(new Nl(d+.15,.05,.15),CF.ghost)).position.set(0,-1.3,0),(c=new Ol(XB,CF.ghost)).position.set(-(d/2+.05),0,0),(h=new Ol(XB,CF.ghost)).position.set(d/2+.05,0,0)}else{var p=jB*(e.image.height/e.image.width);o=new Ol(new rc(jB,p),f),(s=new Ol(new Nl(2.6,p+.1,.05),CF.hatchingMaterial)).position.set(0,0,-.05),(l=new Ol(WB,CF.ghost)).position.set(0,p/2+.05,0),(u=new Ol(WB,CF.ghost)).position.set(0,-(p/2+.05),0),(c=new Ol(new Nl(.05,p+.15,.15),CF.ghost)).position.set(-1.3,0,0),(h=new Ol(new Nl(.05,p+.15,.15),CF.ghost)).position.set(1.3,0,0)}switch(o.position.set(0,0,0),a.add(s,l,u,c,h,o),a.position.z=-4,o.userData.isWorldItem=!0,t&&(o.userData.objktID=t.id),a.position.y+=.5,t&&(a.userData.tokenType=n,a.userData.id=t.id),i&&(a.userData.note=i,o.userData.note=i),n){case"ethereum":case"openSea":a.userData.ethereumMetaData={contract:UB[t.id].contract,token_id:UB[t.id].token_id},a.userData.type="ethereum";break;case"tezos":case"objkt":a.userData.tezosMetaData={contract:UB[t.id].fa.contract,token_id:UB[t.id].token_id},a.userData.type="tezos";break;case"solana":a.userData.solanaMetaData={contract:UB[t.id].contract}}UB[t.id].hasOwnProperty("IIIFdata")&&(a.userData.IIIFdata=UB[t.id].IIIFdata),function(e,t){switch(e.type=t,t){case"tezos":case"objkt":!function(e){var t=e.collection?e.collection:"";e.hasOwnProperty("artist_profile")&&e.artist_profile&&(e.artist=e.artist_profile.alias)," null"!==e.artist&&null!==e.artist&&void 0!==e.artist||(e.artist=" unknown artist"),e.tooltipMetadata="<strong>".concat(e.name,"</strong> - ").concat(e.artist,"<br>\n").concat(t,"<br><br><em>").concat(DN(e.description,250),'</em><br>\n<br>\n<span style="font-size:9px;font-family:monospace;font-style: italic;">[media type:  ').concat(e.mime,"]</span>\n<br><br>")}(e);break;case"ethereum":case"openSeaMetaData":case"openSea":!function(e){e.hasOwnProperty("name")?e.tooltipMetadata="<strong>".concat(e.name,"</strong><br><br>"):e.tooltipMetadata="No information provider available.<br><br>"}(e);break;case"solana":!function(e){e.url="https://solana.fm/address/".concat(e.contract),e.tooltipMetadata="<strong>".concat(e.name,"</strong><br><br>")}(e);break;case"web2":buildWeb2Metadata(e);break;case"IIIF":!function(e){e.tooltipMetadata="<strong>".concat(e.name,"</strong><br> ").concat(e.artist,"<br>\n  <br><em>").concat(DN(e.description,250),'</em><br>\n  <br>\n  <span style="font-size:9px;font-family:monospace;font-style: italic;">[').concat(e.year,"]</span>\n  <br><br>")}(e)}}(UB[t.id],n),r?(a.children.forEach((function(e){"Mesh"===e.type&&("PlaneGeometry"===e.geometry.type?(e.material.opacity=1,e.material.transparent=!1):e.material=CF.whiteFull)})),a.position.set(YB(r.position.x),YB(r.position.y),YB(r.position.z)),a.rotation.set(YB(r.rotation.x),YB(r.rotation.y),YB(r.rotation.z)),a.scale.set(YB(r.scale.x),YB(r.scale.y),YB(r.scale.z)),cH.attach(a),hA()):(setTimeout((function(){return JB(a)}),800),a.position.y=4,hH.add(a),dS.to(a.position,{duration:.5,y:.5,ease:"power1.in"})),setTimeout((function(){aC()}),2e3)}))},JB=function(e){var t=document.getElementById("worldItemTooltip");nB(0),yz&&(document.getElementById("hang-button").style.display="flex"),[{name:"scale",extent:[.01,10],start:1,step:"0.01",threetype:"scale",axis:"all"},{name:"X position",extent:[-5,5],start:0,step:"0.01",threetype:"position",axis:"x"},{name:"Y position",extent:[-5,5],start:0,step:"0.01",threetype:"position",axis:"y"},{name:"Z position",extent:[-10,-1],start:0,step:"0.01",threetype:"position",axis:"z"},{name:"X rotation",extent:[-Math.PI,Math.PI],start:0,step:"0.01",threetype:"rotation",axis:"x"},{name:"Y rotation",extent:[-Math.PI,Math.PI],start:0,step:"0.01",threetype:"rotation",axis:"y"},{name:"Z rotation",extent:[-Math.PI,Math.PI],start:0,step:"0.01",threetype:"rotation",axis:"z"}].forEach((function(n){var r=document.createElement("div");r.className="worldTooltipDivs";var i=document.createElement("input"),a=document.createElement("input"),o=document.createElement("span");o.draggable=!1,i.style.pointerEvents="all",i.type="range",i.value=n.start,i.step=n.step,i.min=n.extent[0],i.max=n.extent[1],a.step=n.step,a.type="number",a.style="width:50px;pointer-events: all;margin: auto;",i.value=n.start,a.value=i.value,o.addEventListener("click",(function(){i.value=n.start,"all"===n.axis?e[n.threetype].set(n.start,n.start,n.start):e[n.threetype][n.axis]=n.start})),a.addEventListener("input",(function(){i.value=a.value,"all"===n.axis?e[n.threetype].set(i.value,i.value,i.value):e[n.threetype][n.axis]=i.value})),i.addEventListener("input",(function(){a.value=i.value,"all"===n.axis?e[n.threetype].set(i.value,i.value,i.value):e[n.threetype][n.axis]=i.value})),o.innerText=n.name,o.className="worldTooltipLabel",r.appendChild(i),r.appendChild(a),r.appendChild(o),t.appendChild(r),r.addEventListener("dragstart",(function(e){return e.preventDefault()}))}));var n=document.createElement("div");n.innerText=Rz?"Grid snapping is toggled":"Grid snapping is untoggled",n.className="worldTooltipLabel",n.style="width: 200px;margin: auto;",n.addEventListener("click",(function(){Lz(),n.innerText=Rz?"Grid snapping is toggled":"Grid snapping is untoggled",n.style.color=Rz?"white":"black",n.style.backgroundColor=Rz?"black":"white"})),t.appendChild(document.createElement("br")),t.appendChild(n);var r=document.createElement("div");r.innerText="Delete frame",r.className="worldTooltipLabel",r.style="width: 200px;margin: auto;color:red;margin-top:4px;",r.addEventListener("click",(function(){hH.clear(),zz()})),t.appendChild(r),t.appendChild(document.createElement("br"));var i=document.createElement("div"),a="H";yz&&(a="<svg xmlns='http://www.w3.org/2000/svg' height='14' viewBox='0 -960 960 960' width='14'> <path d='M160-80q-33 0-56.5-23.5T80-160v-480q0-33 23.5-56.5T160-720h160l160-160 160 160h160q33 0 56.5 23.5T880-640v480q0 33-23.5 56.5T800-80H160Zm0-80h640v-480H160v480Zm80-80h480L570-440 450-280l-90-120-120 160Zm460-200q25 0 42.5-17.5T760-500q0-25-17.5-42.5T700-560q-25 0-42.5 17.5T640-500q0 25 17.5 42.5T700-440ZM404-720h152l-76-76-76 76ZM160-160v-480 480Z' /> </svg>",t.style.backgroundColor="rgba(255,255,255,0.5)",t.style.border="2px solid black"),i.innerHTML="Use <b>".concat(a,"</b> to hang this item where it is."),t.appendChild(i),t.style.display="block",t.style.animation="worldToolTipSlideIn 0.1s linear forwards"};function ZB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||nU(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QB(){return QB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QB.apply(this,arguments)}function $B(e){return $B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$B(e)}function eU(){return eU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cU(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},eU.apply(this,arguments)}function tU(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=nU(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function nU(e,t){if(e){if("string"==typeof e)return rU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rU(e,t):void 0}}function rU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sU(r.key),r)}}function oU(e,t,n){return t&&aU(e.prototype,t),n&&aU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sU(e){var t=function(e,t){if("object"!=$B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=$B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$B(t)?t:String(t)}function uU(e,t,n){return t=cU(t),function(e,t){if(t&&("object"===$B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,lU()?Reflect.construct(t,n||[],cU(e).constructor):t.apply(e,n))}function lU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lU=function(){return!!e})()}function cU(e){return cU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cU(e)}function hU(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fU(e,t)}function fU(e,t){return fU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fU(e,t)}var dU=function(e){function t(e){var n;return iU(this,t),(n=uU(this,t,[e])).dracoLoader=null,n.ktx2Loader=null,n.meshoptDecoder=null,n.pluginCallbacks=[],n.register((function(e){return new bU(e)})),n.register((function(e){return new MU(e)})),n.register((function(e){return new kU(e)})),n.register((function(e){return new AU(e)})),n.register((function(e){return new wU(e)})),n.register((function(e){return new _U(e)})),n.register((function(e){return new EU(e)})),n.register((function(e){return new SU(e)})),n.register((function(e){return new yU(e)})),n.register((function(e){return new TU(e)})),n.register((function(e){return new xU(e)})),n.register((function(e){return new vU(e)})),n.register((function(e){return new IU(e)})),n.register((function(e){return new LU(e)})),n}return hU(t,e),oU(t,[{key:"load",value:function(e,t,n,r){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Iv.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},s=new nv(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{a.parse(n,i,(function(n){t(n),a.manager.itemEnd(e)}),o)}catch(e){o(e)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var i,a={},o={},s=new TextDecoder;if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(s.decode(new Uint8Array(e,0,4))===RU){try{a[mU.KHR_BINARY_GLTF]=new CU(e)}catch(e){return void(r&&r(e))}i=JSON.parse(a[mU.KHR_BINARY_GLTF].content)}else i=JSON.parse(s.decode(e));else i=e;if(void 0===i.asset||i.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var u=new eF(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var c=this.pluginCallbacks[l](u);o[c.name]=c,a[c.name]=!0}if(i.extensionsUsed)for(var h=0;h<i.extensionsUsed.length;++h){var f=i.extensionsUsed[h],d=i.extensionsRequired||[];switch(f){case mU.KHR_MATERIALS_UNLIT:a[f]=new gU;break;case mU.KHR_DRACO_MESH_COMPRESSION:a[f]=new PU(i,this.dracoLoader);break;case mU.KHR_TEXTURE_TRANSFORM:a[f]=new OU;break;case mU.KHR_MESH_QUANTIZATION:a[f]=new DU;break;default:d.indexOf(f)>=0&&void 0===o[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(a),u.setPlugins(o),u.parse(n,r)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}]),t}($m);function pU(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var mU={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},vU=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return oU(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,a=t.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],s=new Gu(16777215);void 0!==o.color&&s.fromArray(o.color);var u=void 0!==o.range?o.range:0;switch(o.type){case"directional":(i=new Ev(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new wv(s)).distance=u;break;case"spot":(i=new vv(s)).distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,KU(i,o),void 0!==o.intensity&&(i.intensity=o.intensity),i.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r}},{key:"getDependency",value:function(e,t){if("light"===e)return this._loadLight(t)}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}]),e}(),gU=function(){function e(){iU(this,e),this.name=mU.KHR_MATERIALS_UNLIT}return oU(e,[{key:"getMaterialType",value:function(){return Vu}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new Gu(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,$a))}return Promise.all(r)}}]),e}(),yU=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.KHR_MATERIALS_EMISSIVE_STRENGTH}return oU(e,[{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}]),e}(),bU=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.KHR_MATERIALS_CLEARCOAT}return oU(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?wm:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Wo(o,o)}return Promise.all(i)}}]),e}(),xU=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.KHR_MATERIALS_IRIDESCENCE}return oU(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?wm:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}]),e}(),wU=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.KHR_MATERIALS_SHEEN}return oU(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?wm:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[];t.sheenColor=new Gu(0,0,0),t.sheenRoughness=0,t.sheen=1;var a=r.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,$a)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}]),e}(),_U=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.KHR_MATERIALS_TRANSMISSION}return oU(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?wm:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}]),e}(),EU=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.KHR_MATERIALS_VOLUME}return oU(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?wm:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;var o=a.attenuationColor||[1,1,1];return t.attenuationColor=new Gu(o[0],o[1],o[2]),Promise.all(i)}}]),e}(),SU=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.KHR_MATERIALS_IOR}return oU(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?wm:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),TU=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.KHR_MATERIALS_SPECULAR}return oU(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?wm:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var o=a.specularColorFactor||[1,1,1];return t.specularColor=new Gu(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,$a)),Promise.all(i)}}]),e}(),MU=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.KHR_TEXTURE_BASISU}return oU(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,a)}}]),e}(),kU=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.EXT_TEXTURE_WEBP,this.isSupported=null}return oU(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var u=n.options.manager.getHandler(o.uri);null!==u&&(s=u)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),AU=function(){function e(t){iU(this,e),this.parser=t,this.name=mU.EXT_TEXTURE_AVIF,this.isSupported=null}return oU(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var u=n.options.manager.getHandler(o.uri);null!==u&&(s=u)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),IU=function(){function e(t){iU(this,e),this.name=mU.EXT_MESHOPT_COMPRESSION,this.parser=t}return oU(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,o=r.byteStride,s=new Uint8Array(e,t,n);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(i,o,s,r.mode,r.filter).then((function(e){return e.buffer})):a.ready.then((function(){var e=new ArrayBuffer(i*o);return a.decodeGltfBuffer(new Uint8Array(e),i,o,s,r.mode,r.filter),e}))}))}return null}}]),e}(),LU=function(){function e(t){iU(this,e),this.name=mU.EXT_MESH_GPU_INSTANCING,this.parser=t}return oU(e,[{key:"createNodeMesh",value:function(e){var t=this,n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||void 0===r.mesh)return null;var i,a=tU(n.meshes[r.mesh].primitives);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.mode!==FU.TRIANGLES&&o.mode!==FU.TRIANGLE_STRIP&&o.mode!==FU.TRIANGLE_FAN&&void 0!==o.mode)return null}}catch(e){a.e(e)}finally{a.f()}var s=r.extensions[this.name].attributes,u=[],l={},c=function(e){u.push(t.parser.getDependency("accessor",s[e]).then((function(t){return l[e]=t,l[e]})))};for(var h in s)c(h);return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then((function(e){var n,r=e.pop(),i=r.isGroup?r.children:[r],a=e[0].count,o=[],s=tU(i);try{for(s.s();!(n=s.n()).done;){for(var u=n.value,c=new Qs,h=new _s,f=new ws,d=new _s(1,1,1),p=new Md(u.geometry,u.material,a),m=0;m<a;m++)l.TRANSLATION&&h.fromBufferAttribute(l.TRANSLATION,m),l.ROTATION&&f.fromBufferAttribute(l.ROTATION,m),l.SCALE&&d.fromBufferAttribute(l.SCALE,m),p.setMatrixAt(m,c.compose(h,f,d));for(var v in l)"TRANSLATION"!==v&&"ROTATION"!==v&&"SCALE"!==v&&u.geometry.setAttribute(v,l[v]);Eu.prototype.copy.call(p,u),t.parser.assignFinalMaterial(p),o.push(p)}}catch(e){s.e(e)}finally{s.f()}return r.isGroup?(r.clear(),r.add.apply(r,o),r):o[0]})))}}]),e}(),RU="glTF",CU=oU((function e(t){iU(this,e),this.name=mU.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==RU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=this.header.length-12,a=new DataView(t,12),o=0;o<i;){var s=a.getUint32(o,!0);o+=4;var u=a.getUint32(o,!0);if(o+=4,1313821514===u){var l=new Uint8Array(t,12+o,s);this.content=r.decode(l)}else if(5130562===u){var c=12+o;this.body=t.slice(c,c+s)}o+=s}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),PU=function(){function e(t,n){if(iU(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=mU.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return oU(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},u={};for(var l in a){var c=VU[l]||l.toLowerCase();o[c]=a[l]}for(var h in e.attributes){var f=VU[h]||h.toLowerCase();if(void 0!==a[h]){var d=n.accessors[e.attributes[h]],p=zU[d.componentType];u[f]=p.name,s[f]=!0===d.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),o,u)}))}))}}]),e}(),OU=function(){function e(){iU(this,e),this.name=mU.KHR_TEXTURE_TRANSFORM}return oU(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}]),e}(),DU=oU((function e(){iU(this,e),this.name=mU.KHR_MESH_QUANTIZATION})),NU=function(e){function t(e,n,r,i){return iU(this,t),uU(this,t,[e,n,r,i])}return hU(t,e),oU(t,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,a=0;a!==r;a++)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,u=3*o,l=r-t,c=(n-t)/l,h=c*c,f=h*c,d=e*u,p=d-u,m=-2*f+3*h,v=f-h,g=1-m,y=v-h+c,b=0;b!==o;b++){var x=a[p+b+o],w=a[p+b+s]*l,_=a[d+b+o],E=a[d+b]*l;i[b]=g*x+y*w+m*_+v*E}return i}}]),t}(Dm),BU=new ws,UU=function(e){function t(){return iU(this,t),uU(this,t,arguments)}return hU(t,e),oU(t,[{key:"interpolate_",value:function(e,n,r,i){var a=eU(cU(t.prototype),"interpolate_",this).call(this,e,n,r,i);return BU.fromArray(a).normalize().toArray(a),a}}]),t}(NU),FU={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},zU={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},HU={9728:Si,9729:Ii,9984:Ti,9985:Li,9986:ki,9987:Ci},GU={33071:_i,33648:Ei,10497:wi},jU={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},VU={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},qU={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},WU={CUBICSPLINE:void 0,LINEAR:Na,STEP:Da};function XU(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new xm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Mr})),e.DefaultMaterial}function YU(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function KU(e,t){void 0!==t.extras&&("object"===$B(t.extras)?QB(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function JU(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ZU(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function QU(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var $U=new Qs,eF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};iU(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new pU,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var r=!1,i=!1,a=-1;"undefined"!=typeof navigator&&(r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=(i=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||r||i&&a<98?this.textureLoader=new uv(this.options.manager):this.textureLoader=new Nv(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new nv(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return oU(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};YU(i,a,r),KU(a,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var a=t[r].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var u=0,l=e.length;u<l;u++){var c=e[u];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var i=n.clone();return function e(t,n){var i=r.associations.get(t);null!=i&&r.associations.set(n,i);var a,o=tU(t.children.entries());try{for(o.s();!(a=o.n()).done;){var s=ZB(a.value,2),u=s[0];e(s[1],n.children[u])}}catch(e){o.e(e)}finally{o.f()}}(n,i),i.name+="_instance_"+e.uses[t]++,i}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(!(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}))))throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[mU.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,i){n.load(Iv.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){var i=jU[r.type],a=zU[r.componentType],o=!0===r.normalized,s=new a(r.count*i);return Promise.resolve(new Qu(s,i,o))}var u=[];return void 0!==r.bufferView?u.push(this.getDependency("bufferView",r.bufferView)):u.push(null),void 0!==r.sparse&&(u.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),u.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(u).then((function(e){var i,a,o=e[0],s=jU[r.type],u=zU[r.componentType],l=u.BYTES_PER_ELEMENT,c=l*s,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;if(f&&f!==c){var p=Math.floor(h/f),m="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,v=t.cache.get(m);v||(i=new u(o,p*f,r.count*f/l),v=new Uf(i,f/l),t.cache.add(m,v)),a=new zf(v,s,h%f/l,d)}else i=null===o?new u(r.count*s):new u(o,h,r.count*s),a=new Qu(i,s,d);if(void 0!==r.sparse){var g=jU.SCALAR,y=zU[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,w=new y(e[1],b,r.sparse.count*g),_=new u(e[2],x,r.sparse.count*s);null!==o&&(a=new Qu(a.array.slice(),a.itemSize,a.normalized));for(var E=0,S=w.length;E<S;E++){var T=w[E];if(a.setX(T,_[E*s]),s>=2&&a.setY(T,_[E*s+1]),s>=3&&a.setZ(T,_[E*s+2]),s>=4&&a.setW(T,_[E*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r],a=this.textureLoader;if(i.uri){var o=n.manager.getHandler(i.uri);null!==o&&(a=o)}return this.loadTextureImage(e,r,a)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,i=this.json,a=i.textures[e],o=i.images[t],s=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];var u=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=a.name||o.name||"",""===t.name&&"string"==typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);var n=(i.samplers||{})[a.sampler]||{};return t.magFilter=HU[n.magFilter]||Ii,t.minFilter=HU[n.minFilter]||Ci,t.wrapS=GU[n.wrapS]||wi,t.wrapT=GU[n.wrapT]||wi,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=u,u}},{key:"loadImageSource",value:function(e,t){var n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var i=n.images[e],a=self.URL||self.webkitURL,o=i.uri||"",s=!1;if(void 0!==i.bufferView)o=this.getDependency("bufferView",i.bufferView).then((function(e){s=!0;var t=new Blob([e],{type:i.mimeType});return o=a.createObjectURL(t)}));else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var u=Promise.resolve(o).then((function(e){return new Promise((function(n,i){var a=n;!0===t.isImageBitmapLoader&&(a=function(e){var t=new ds(e);t.needsUpdate=!0,n(t)}),t.load(Iv.resolveURL(e,r.path),a,void 0,i)}))})).then((function(e){var t;return!0===s&&a.revokeObjectURL(o),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=u,u}},{key:"assignTexture",value:function(e,t,n,r){var i=this;return this.getDependency("texture",n.index).then((function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),i.extensions[mU.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[mU.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=i.associations.get(a);a=i.extensions[mU.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),i.associations.set(a,s)}}return void 0!==r&&(a.colorSpace=r),e[t]=a,a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new Ud,Bu.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var u="LineBasicMaterial:"+n.uuid,l=this.cache.get(u);l||(l=new kd,Bu.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(u,l)),n=l}if(r||i||a){var c="ClonedMaterial:"+n.uuid+":";r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),a&&(c+="flat-shading:");var h=this.cache.get(c);h||(h=n.clone(),i&&(h.vertexColors=!0),a&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}e.material=n}},{key:"getMaterialType",value:function(){return xm}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,i=this.extensions,a=r.materials[e],o={},s=[];if((a.extensions||{})[mU.KHR_MATERIALS_UNLIT]){var u=i[mU.KHR_MATERIALS_UNLIT];t=u.getMaterialType(),s.push(u.extendParams(o,a,n))}else{var l=a.pbrMetallicRoughness||{};if(o.color=new Gu(1,1,1),o.opacity=1,Array.isArray(l.baseColorFactor)){var c=l.baseColorFactor;o.color.fromArray(c),o.opacity=c[3]}void 0!==l.baseColorTexture&&s.push(n.assignTexture(o,"map",l.baseColorTexture,$a)),o.metalness=void 0!==l.metallicFactor?l.metallicFactor:1,o.roughness=void 0!==l.roughnessFactor?l.roughnessFactor:1,void 0!==l.metallicRoughnessTexture&&(s.push(n.assignTexture(o,"metalnessMap",l.metallicRoughnessTexture)),s.push(n.assignTexture(o,"roughnessMap",l.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===a.doubleSided&&(o.side=Ar);var h=a.alphaMode||"OPAQUE";if("BLEND"===h?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,"MASK"===h&&(o.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==Vu&&(s.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new Wo(1,1),void 0!==a.normalTexture.scale)){var f=a.normalTexture.scale;o.normalScale.set(f,f)}return void 0!==a.occlusionTexture&&t!==Vu&&(s.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(o.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==Vu&&(o.emissive=(new Gu).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==Vu&&s.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture,$a)),Promise.all(s).then((function(){var r=new t(o);return a.name&&(r.name=a.name),KU(r,a),n.associations.set(r,{materials:e}),a.extensions&&YU(i,r,a),r}))}},{key:"createUniqueName",value:function(e){for(var t=dg.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[mU.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return tF(n,e,t)}))}for(var a,o,s=[],u=0,l=e.length;u<l;u++){var c=e[u],h=(void 0,(o=(a=c).extensions&&a.extensions[mU.KHR_DRACO_MESH_COMPRESSION])?"draco:"+o.bufferView+":"+o.indices+":"+ZU(o.attributes):a.indices+":"+ZU(a.attributes)+":"+a.mode),f=r[h];if(f)s.push(f.promise);else{var d;d=c.extensions&&c.extensions[mU.KHR_DRACO_MESH_COMPRESSION]?i(c):tF(new vl,c,t),r[h]={primitive:c,promise:d},s.push(d)}}return Promise.all(s)}},{key:"loadMesh",value:function(e){for(var t=this,n=this.json,r=this.extensions,i=n.meshes[e],a=i.primitives,o=[],s=0,u=a.length;s<u;s++){var l=void 0===a[s].material?XU(this.cache):this.getDependency("material",a[s].material);o.push(l)}return o.push(t.loadGeometries(a)),Promise.all(o).then((function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],u=[],l=0,c=s.length;l<c;l++){var h=s[l],f=a[l],d=void 0,p=o[l];if(f.mode===FU.TRIANGLES||f.mode===FU.TRIANGLE_STRIP||f.mode===FU.TRIANGLE_FAN||void 0===f.mode)!0===(d=!0===i.isSkinnedMesh?new fd(h,p):new Ol(h,p)).isSkinnedMesh&&d.normalizeSkinWeights(),f.mode===FU.TRIANGLE_STRIP?d.geometry=jb(d.geometry,Va):f.mode===FU.TRIANGLE_FAN&&(d.geometry=jb(d.geometry,qa));else if(f.mode===FU.LINES)d=new Nd(h,p);else if(f.mode===FU.LINE_STRIP)d=new Pd(h,p);else if(f.mode===FU.LINE_LOOP)d=new Bd(h,p);else{if(f.mode!==FU.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);d=new jd(h,p)}Object.keys(d.geometry.morphAttributes).length>0&&JU(d,i),d.name=t.createUniqueName(i.name||"mesh_"+e),KU(d,i),f.extensions&&YU(r,d,f),t.assignFinalMaterial(d),u.push(d)}for(var m=0,v=u.length;m<v;m++)t.associations.set(u[m],{meshes:e,primitives:m});if(1===u.length)return u[0];var g=new Tf;t.associations.set(g,{meshes:e});for(var y=0,b=u.length;y<b;y++)g.add(u[y]);return g}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new jl(qo.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new pc(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),KU(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){for(var t=this.json.skins[e],n=[],r=0,i=t.joints.length;r<i;r++)n.push(this._loadNodeShallow(t.joints[r]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){for(var n=e.pop(),r=e,i=[],a=[],o=0,s=r.length;o<s;o++){var u=r[o];if(u){i.push(u);var l=new Qs;null!==n&&l.fromArray(n.array,16*o),a.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new gd(i,a)}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=t.name?t.name:"animation_"+e,r=[],i=[],a=[],o=[],s=[],u=0,l=t.channels.length;u<l;u++){var c=t.channels[u],h=t.samplers[c.sampler],f=c.target,d=f.node,p=void 0!==t.parameters?t.parameters[h.input]:h.input,m=void 0!==t.parameters?t.parameters[h.output]:h.output;void 0!==f.node&&(r.push(this.getDependency("node",d)),i.push(this.getDependency("accessor",p)),a.push(this.getDependency("accessor",m)),o.push(h),s.push(f))}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(o),Promise.all(s)]).then((function(e){for(var t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=[],u=function(){var e,n=t[l],u=r[l],c=i[l],h=a[l],f=o[l];if(void 0===n)return 1;switch(n.updateMatrix(),qU[f.path]){case qU.weights:e=Gm;break;case qU.rotation:e=Vm;break;default:e=Wm}var d=n.name?n.name:n.uuid,p=void 0!==h.interpolation?WU[h.interpolation]:Na,m=[];qU[f.path]===qU.weights?n.traverse((function(e){e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(d);var v=c.array;if(c.normalized){for(var g=QU(v.constructor),y=new Float32Array(v.length),b=0,x=v.length;b<x;b++)y[b]=v[b]*g;v=y}for(var w=0,_=m.length;w<_;w++){var E=new e(m[w]+"."+qU[f.path],u.array,v,p);"CUBICSPLINE"===h.interpolation&&(E.createInterpolant=function(e){return new(this instanceof Vm?UU:NU)(this.times,this.values,this.getValueSize()/3,e)},E.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),s.push(E)}},l=0,c=t.length;l<c;l++)u();return new Xm(n,void 0,s)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){for(var t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],a=n.children||[],o=0,s=a.length;o<s;o++)i.push(t.getDependency("node",a[o]));var u=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),u]).then((function(e){var t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,$U)}));for(var i=0,a=n.length;i<a;i++)t.add(n[i]);return t}))}},{key:"_loadNodeShallow",value:function(e){var t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];var i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"",o=[],s=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&o.push(s),void 0!==i.camera&&o.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){o.push(e)})),this.nodeCache[e]=Promise.all(o).then((function(t){var o;if((o=!0===i.isBone?new dd:t.length>1?new Tf:1===t.length?t[0]:new Eu)!==t[0])for(var s=0,u=t.length;s<u;s++)o.add(t[s]);if(i.name&&(o.userData.name=i.name,o.name=a),KU(o,i),i.extensions&&YU(n,o,i),void 0!==i.matrix){var l=new Qs;l.fromArray(i.matrix),o.applyMatrix4(l)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o})),this.nodeCache[e]}},{key:"loadScene",value:function(e){var t=this.extensions,n=this.json.scenes[e],r=this,i=new Tf;n.name&&(i.name=r.createUniqueName(n.name)),KU(i,n),n.extensions&&YU(t,i,n);for(var a=n.nodes||[],o=[],s=0,u=a.length;s<u;s++)o.push(r.getDependency("node",a[s]));return Promise.all(o).then((function(e){for(var t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=function(e){var t,n=new Map,i=tU(r.associations);try{for(i.s();!(t=i.n()).done;){var a=ZB(t.value,2),o=a[0],s=a[1];(o instanceof Bu||o instanceof ds)&&n.set(o,s)}}catch(e){i.e(e)}finally{i.f()}return e.traverse((function(e){var t=r.associations.get(e);null!=t&&n.set(e,t)})),n}(i),i}))}}]),e}();function tF(e,t,n){var r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=VU[o]||o.toLowerCase();s in e.attributes||i.push(a(r[o],s))}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(u)}return KU(e,t),function(e,t,n){var r=t.attributes,i=new Ts;if(void 0!==r.POSITION){var a=n.json.accessors[r.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(i.set(new _s(o[0],o[1],o[2]),new _s(s[0],s[1],s[2])),a.normalized){var u=QU(zU[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}var l=t.targets;if(void 0!==l){for(var c=new _s,h=new _s,f=0,d=l.length;f<d;f++){var p=l[f];if(void 0!==p.POSITION){var m=n.json.accessors[p.POSITION],v=m.min,g=m.max;if(void 0!==v&&void 0!==g){if(h.setX(Math.max(Math.abs(v[0]),Math.abs(g[0]))),h.setY(Math.max(Math.abs(v[1]),Math.abs(g[1]))),h.setZ(Math.max(Math.abs(v[2]),Math.abs(g[2]))),m.normalized){var y=QU(zU[m.componentType]);h.multiplyScalar(y)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}e.boundingBox=i;var b=new js;i.getCenter(b.center),b.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=b}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,a=!1,o=0,s=t.length;o<s;o++){var u=t[o];if(void 0!==u.POSITION&&(r=!0),void 0!==u.NORMAL&&(i=!0),void 0!==u.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);for(var l=[],c=[],h=[],f=0,d=t.length;f<d;f++){var p=t[f];if(r){var m=void 0!==p.POSITION?n.getDependency("accessor",p.POSITION):e.attributes.position;l.push(m)}if(i){var v=void 0!==p.NORMAL?n.getDependency("accessor",p.NORMAL):e.attributes.normal;c.push(v)}if(a){var g=void 0!==p.COLOR_0?n.getDependency("accessor",p.COLOR_0):e.attributes.color;h.push(g)}}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(h)]).then((function(t){var n=t[0],o=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function nF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}new dU;var rF=new Worker(new URL(n.p+n.u(784),n.b));rF.onmessage=function(e){var t;e.data[1].hasOwnProperty("id")&&KB.apply(void 0,function(e){if(Array.isArray(e))return nF(e)}(t=e.data)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return nF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nF(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())};var iF,aF,oF,sF,uF,lF,cF,hF=function(e,t,n,r,i){UB[t.id].hasOwnProperty("mime")&&UB[t.id].mime&&UB[t.id].mime.substring(0,UB[t.id].mime.indexOf("/")),r&&!i&&r.hasOwnProperty("note")&&(i=r.note),rF.postMessage({img:e,id:t,type:n,location:r,currentRoom:zF.room,note:i})},fF=new uv,dF=function(e){return new Promise((function(t){return fF.load(e,t)}))},pF="rgb(255,0,0)",mF="rgb(0,255,235)",vF=new Vu({color:"white",opacity:.85,transparent:!0}),gF=new kd({color:"black",onBeforeCompile:function(e){e.vertexShader="\n    attribute vec3 instT;\n    attribute vec4 instR;\n    attribute vec3 instS;\n    \n    // http://barradeau.com/blog/?p=1109\n    vec3 trs( inout vec3 position, vec3 T, vec4 R, vec3 S ) {\n        position *= S;\n        position += 2.0 * cross( R.xyz, cross( R.xyz, position ) + R.w * position );\n        position += T;\n        return position;\n    }\n    ".concat(e.vertexShader,"\n").replace("#include <begin_vertex>","#include <begin_vertex>\n      transformed = trs(transformed, instT, instR, instS);\n")}}),yF=new kd({color:mF}),bF=new kd({color:"red"}),xF=new kd({color:"black"}),wF=new kd({color:mF,onBeforeCompile:function(e){e.vertexShader="\n    attribute vec3 instT;\n    attribute vec4 instR;\n    attribute vec3 instS;\n    \n    // http://barradeau.com/blog/?p=1109\n    vec3 trs( inout vec3 position, vec3 T, vec4 R, vec3 S ) {\n        position *= S;\n        position += 2.0 * cross( R.xyz, cross( R.xyz, position ) + R.w * position );\n        position += T;\n        return position;\n    }\n    ".concat(e.vertexShader,"\n").replace("#include <begin_vertex>","#include <begin_vertex>\n      transformed = trs(transformed, instT, instR, instS);\n").replace("uniform float linewidth;","attribute float linewidth;")}}),_F=new kd({color:pF,onBeforeCompile:function(e){e.vertexShader="\n    attribute vec3 instT;\n    attribute vec4 instR;\n    attribute vec3 instS;\n    \n    // http://barradeau.com/blog/?p=1109\n    vec3 trs( inout vec3 position, vec3 T, vec4 R, vec3 S ) {\n        position *= S;\n        position += 2.0 * cross( R.xyz, cross( R.xyz, position ) + R.w * position );\n        position += T;\n        return position;\n    }\n    ".concat(e.vertexShader,"\n").replace("#include <begin_vertex>","#include <begin_vertex>\n      transformed = trs(transformed, instT, instR, instS);\n")}}),EF=new Vu({color:pF,side:Ar}),SF=new Vu({color:mF,side:Ar}),TF=new Vu({color:"white",side:Ar}),MF=new Vu({color:"black",side:Ar}),kF=new Gu("rgb(0, 0, 0)"),AF=new Gu("rgb(255, 255, 255)"),IF=new Gu(pF),LF=new Gu(mF),RF=new Vu({color:"black",side:Ar,transparent:!0,opacity:0}),CF={torcheMaterial:new Vu({color:"black",side:Ar,transparent:!0,opacity:0}),blackOpacityFocus:RF,ghost:vF,whiteFull:TF,blackFull:MF,redFull:EF,redLineLone:bF,redLine:_F,cyanFull:SF,cyanLine:wF,red:pF,cyan:mF,blackLine:gF,hatchingMaterial:0,blackColor:kF,whiteColor:AF,blackLineLone:xF,cyanLineLone:yF,redColor:IF,cyanColor:LF},PF=0,OF=0,DF=function(e){var t=e.pos,n=e.rot,r=e.scale,i=e.mesh,a=e.i,o=e.fig,s=e.lines,u=e.count;i.hasOwnProperty("isBox")&&(sF.pos.push(t.x,t.y,t.z),sz||(u=OF,uF.pos.push(t.x-.35,t.y-.05,t.z+.35)),r?(r.x=r.x*i.parameters[0],r.y=r.y*i.parameters[1],r.z=r.z*i.parameters[2]):((r=new _s(1,1,1)).x=i.parameters[0],r.y=i.parameters[1],r.z=i.parameters[2]),sF.scale.push(r.x,r.y,r.z),sz||uF.scale.push(r.x,r.y,r.z),(i=iF).isBox=!0,a=PF-1,PF++);var l=new _s(t.x,t.y,t.z),c=new uu(0,0,0,"XYZ"),h=new ws,f=new _s(1,1,1);r&&(f=new _s(r.x,r.y,r.z)),n&&c.set(n.x,n.y,n.z);var d,p=new Qs;if(h.setFromEuler(c),p.compose(l,h,f),o.hatch||o.full)i.setMatrixAt(a,p),o.hatch&&(i.setColorAt(a,CF.whiteColor),sz||(l.x-=.35,l.y-=.05,l.z+=.35,(d=new Qs).compose(l,h,f),i.setMatrixAt(Math.floor(u/2+a),d),i.setColorAt(Math.floor(u/2+a),CF.whiteColor))),o.full&&(sz?i.setColorAt(a,CF.blackColor):(i.setColorAt(a,CF.redColor),l.x-=.35,l.y-=.05,l.z+=.35,(d=new Qs).compose(l,h,f),i.setMatrixAt(u/2+a,d),i.setColorAt(u/2+a,CF.cyanColor)));else if(o.lines){var m=new Qs,v=new _s(0,0,0);m.compose(l,h,v),i.setMatrixAt(a,m)}i.hasOwnProperty("isBox")||(s.userData.Params.pos.push(t.x,t.y,t.z),s.userData.Params.rot.push(h.x,h.y,h.z,h.w),s.userData.Params.scale.push(f.x,f.y,f.z),sz||(s.userData.ParamsCyan.pos.push(t.x-.35,t.y-.05,t.z+.35),s.userData.ParamsCyan.rot.push(h.x,h.y,h.z,h.w),s.userData.ParamsCyan.scale.push(f.x,f.y,f.z))),i.hasOwnProperty("isBox")&&(sF.rot.push(h.x,h.y,h.z,h.w),sz||uF.rot.push(h.x,h.y,h.z,h.w))},NF=function(e,t){for(var n in Kb={},e.forEach((function(e){"PlaneGeometry"!=e.geometry.type&&Jb(e.geometry)})),OF=0,Kb)Kb[n].forEach((function(e){if("BoxGeometry"===e.geometry.type)e.count++,sz||(e.count=Math.floor(2*e.count)),OF+=e.count,e.instanceNum=0,e.instancedMesh={isBox:!0,parameters:e.args};else if(e.count>1){e.count++,sz||(e.count=Math.floor(2*e.count+2)),e.instancedMesh=new Md(e.geometry,CF.whiteFull,e.count),e.instancedMesh.geometry.center(),e.instancedMesh.instanceMatrix.needsUpdate=!0,t.push(e.instancedMesh),e.instanceNum=0;var n=new Ip(e.instancedMesh.geometry);n.setAttribute("linewidth",new yd(new Float32Array([5]),1));var r=(new Lv).copy(n);r.center(),r.instanceCount=1/0;var i=sz?CF.blackLine:CF.redLine;if(i.needsUpdate=!0,e.instanceEdges=new Nd(r,i),e.instanceEdges.frustumCulled=!1,e.instanceEdges.userData.Params={pos:[],rot:[],scale:[]},!sz){var a=new Ip(e.instancedMesh.geometry),o=(new Lv).copy(a);o.center(),o.instanceCount=1/0,e.instanceEdgesCyan=new Nd(o,CF.cyanLine),CF.cyanLine.needsUpdate=!0,e.instanceEdges.frustumCulled=!1,e.instanceEdges.userData.ParamsCyan={pos:[],rot:[],scale:[]}}}else e.instanceNum=-1}));if(OF>0){(iF=new Md(new Nl(1,1,1),CF.whiteFull,OF)).instanceMatrix.needsUpdate=!0;var r=new Ip(iF.geometry),i=(new Lv).copy(r);i.center(),i.instanceCount=1/0;var a,o=sz?CF.blackLine:CF.redLine;(aF=new Nd(i,o)).frustumCulled=!1,sF={pos:[],rot:[],scale:[]},sz||((a=(new Lv).copy(r)).center(),a.instanceCount=1/0,(oF=new Nd(a,CF.cyanLine)).frustumCulled=!1,uF={pos:[],rot:[],scale:[]}),PF=1}for(var s in e.forEach((function(e){var n=Jb(e.geometry);if(e.hasOwnProperty("parentGroup")&&(n.instanceNum=-1),e.hasOwnProperty("position")&&(e.pos=e.position),e.hasOwnProperty("rotation")&&(e.rot=e.position),e.attributes){var r=new vl;r.setAttribute("position",new Qu(e.attributes.positions,3)),n.geometry=r,n.edges=new Ip(r),n.instanceNum=-1}n.instanceNum>-1||"BoxGeometry"===n.geometry.type&&!e.hasOwnProperty("parentGroup")?e.hatch||e.full?(DF({pos:e.pos,rot:e.rot,scale:e.scale,mesh:n.instancedMesh,i:n.instanceNum,fig:e,lines:n.instanceEdges,count:n.count}),n.instanceNum++):DF({pos:e.pos,rot:e.rot,scale:e.scale,mesh:n.instancedMesh,i:n.instanceNum,fig:e,lines:n.instanceEdges,count:n.count}):function(e,t,n){var r;(e.hatch||e.full||e.lines)&&(n&&(r=function(e,t,n,r){var i=[],a=!!t&&CF.whiteFull;if(sz){if(a=n?CF.blackFull:a,n||t){var o=new Ol(e.geometry,a);o.userData.color="black",i.push(o)}r&&((r=new Nd(e.edges,CF.blackLineLone)).userData.color="black",i.push(r))}else{if(n||t){a=n?CF.redFull:a;var s=new Ol(e.geometry,a);s.userData.color="red",a=n?CF.cyanFull:a;var u=new Ol(e.geometry,a);u.userData.color="cyan",i.push(s,u)}if(r){var l=new Nd(e.edges,CF.redLineLone);l.userData.color="red";var c=new Nd(e.edges,CF.cyanLineLone);c.userData.color="cyan",i.push(l,c)}}return i}(n,e.hatch,e.full,e.lines)),r.forEach((function(n){e.hasOwnProperty("uncentered")&&e.uncentered||n.geometry.center(),n.position.set(e.pos.x,e.pos.y,e.pos.z),"cyan"===n.userData.color&&(n.position.x-=.35,n.position.y-=.05,n.position.z+=.35),e.hasOwnProperty("rot")&&n.rotation.set(e.rot.x,e.rot.y,e.rot.z),e.hasOwnProperty("scale")&&n.scale.set(e.scale.x+.01,e.scale.y+.01,e.scale.z+.01),e.hasOwnProperty("parentGroup")?BF[e.parentGroup].add(n):t.push(n)})))}(e,t,n)})),iF&&i&&(i.setAttribute("instT",new yd(new Float32Array(sF.pos),3)),i.setAttribute("instR",new yd(new Float32Array(sF.rot),4)),i.setAttribute("instS",new yd(new Float32Array(sF.scale),3)),t.push(iF,aF),sz||(a.setAttribute("instT",new yd(new Float32Array(uF.pos),3)),a.setAttribute("instR",new yd(new Float32Array(uF.rot),4)),a.setAttribute("instS",new yd(new Float32Array(uF.scale),3)),t.push(oF)),iF.instanceColor&&(iF.instanceColor.needsUpdate=!0)),Kb)Kb[s].forEach((function(e){e.hasOwnProperty("instanceMesh")&&(e.instanceMesh.instanceColor.needsUpdate=!0),e.hasOwnProperty("instanceEdges")&&(e.instanceEdges.geometry.setAttribute("instT",new yd(new Float32Array(e.instanceEdges.userData.Params.pos),3)),e.instanceEdges.geometry.setAttribute("instR",new yd(new Float32Array(e.instanceEdges.userData.Params.rot),4)),e.instanceEdges.geometry.setAttribute("instS",new yd(new Float32Array(e.instanceEdges.userData.Params.scale),3)),t.push(e.instanceEdges),sz||(e.instanceEdgesCyan.geometry.setAttribute("instT",new yd(new Float32Array(e.instanceEdges.userData.ParamsCyan.pos),3)),e.instanceEdgesCyan.geometry.setAttribute("instR",new yd(new Float32Array(e.instanceEdges.userData.ParamsCyan.rot),4)),e.instanceEdgesCyan.geometry.setAttribute("instS",new yd(new Float32Array(e.instanceEdges.userData.ParamsCyan.scale),3)),t.push(e.instanceEdgesCyan)))}))},BF={},UF=function(t,n,r,i,a){var o=!1,s=[],u=[];for(var l in function(e){if(BF={},e)for(var t in e){var n=e[t];BF[t]=new Tf,n.hasOwnProperty("pos")&&BF[t].position.set(n.pos.x,n.pos.y,n.pos.z),n.hasOwnProperty("rot")&&BF[t].rotation.set(n.rot.x,n.rot.y,n.rot.z)}}(i),NF(n,s),BF){var c=BF[l];(new Ts).setFromObject(c).getCenter(c.position).multiplyScalar(-1),s.push(c)}var h=new Tf;if(h.userData.color="red",a.hasOwnProperty("commune")&&(o=!0,h.position.set(a.deltaLocation.x,a.deltaLocation.y,a.deltaLocation.z)),"roomGroup"===t.name){if(function(){for(var e=0;e<s.length;e++)if("roomGroup"===t.name){if(s[e].isGroup||s[e].isLineSegments){if(s[e].isGroup){var n=[];s[e].updateWorldMatrix(!1,!0),s[e].children.forEach((function(e){if(e.material===CF.whiteFull){e.updateMatrixWorld(!0);var t=e.geometry.clone();for(var r in t.applyMatrix4(e.matrixWorld),t.attributes)"position"!==r&&t.deleteAttribute(r);(t=t.toNonIndexed()).index=null,n.push(t)}}));var r=Hb(n,!1);r.userData.groupMerged=!0,u.push(r)}}else s[e].userData.groupMerged=!1,u.push(s[e]);h.add(s[e])}}(),o){var f={bbox:(new Ts).setFromObject(h),name:a.name};FF.push(f)}_H(),cA(u,o,a.deltaLocation)}else s.forEach((function(e){return h.add(e)}));var d=!1;if(h.userData.fxMetaData={genid:a.genid,hash:a.hash,objktid:a.objktid},"movingGroup"===t.name)if(a.loc){t=cH;var p=a.loc;h.position.set(YB(p.position.x),YB(p.position.y),YB(p.position.z)),h.rotation.set(YB(p.rotation.x),YB(p.rotation.y),YB(p.rotation.z)),h.scale.set(YB(p.scale.x),YB(p.scale.y),YB(p.scale.z)),d=!0,cH.attach(h),hA()}else h.userData.tokenType="sculpture",h.position.z-=4,JB(h);d||(h.children.forEach((function(e){e.isLineSegments||(e.castShadow=!0,e.receiveShadow=!0)})),t.add(h)),setTimeout((function(){aC()}),400),console.log("%cLoading new anaver.se native content.","font-weight:bolder;text-decoration:underline"),a.gallery&&(console.log("%cBuilding gallery.","font-weight:bolder;text-decoration:underline"),a.gallery.hasOwnProperty("gallery")&&function(t){var n={objkt:[],tezos:[],openSea:[],ethereum:[],solana:[],block:[],sculpture:[],IIIF:[],datavis:[]};if(t.forEach((function(e){return n[e.tokenType].push(e)})),n.tezos=[].concat(EB(n.tezos),EB(n.objkt)),n.ethereum=[].concat(EB(n.ethereum),EB(n.openSea)),n.tezos.length>0){var r={native:!1,blockchain:"tezos",assetList:n.tezos};yN(r)}if(n.solana.length>0)for(var i=function(e){setTimeout((function(){var t=n.solana[e];t.native=!1,t.blockchain=t.tokenType,yN(t)}),500*e)},a=0;a<n.solana.length;a++)i(a);n.block.length>0&&(n.block.forEach((function(t){var n=new Tf;n.userData=t.block,n.userData.tokenType="block";var r=vO(e[t.block.geometry.type],bO(t.block.geometry.args)),i=new Ol(r,CF.whiteFull),a=new Ip(r),o=new Nd(a,CF.blackLineLone);n.add(i,o),n.position.set(YB(t.position.x),YB(t.position.y),YB(t.position.z)),n.rotation.set(YB(t.rotation.x),YB(t.rotation.y),YB(t.rotation.z)),n.scale.set(YB(t.scale.x),YB(t.scale.y),YB(t.scale.z)),cH.attach(n)})),hA()),n.sculpture.length>0&&DB(n.sculpture),n.IIIF.length>0&&n.IIIF.forEach((function(e){switch(e.IIIFdata.source){case"Gallica":QO(e.IIIFdata,e);break;case"BritishLibrary":OR(e.IIIFdata,e)}})),n.datavis.length>0&&n.datavis.forEach((function(e){switch(e.datavis.feedType){case"teztok-nft-livefeed":OC(0,e);break;case"teztok-nft-lat-sales":jC(e.datavis.args.targetWallet,e);break;case"teztok-nft-lat-purchases":VC(e.datavis.args.targetWallet,e);break;case"teztok-nft-lat-transact":WC(e)}}))}(a.gallery.gallery))},FF=[],zF={room:{},skybox:{},gallery:[]},HF={},GF=0,jF=0,VF=function(){return jF=0},qF=function(e,t){return zF[e]=t},WF=new Worker(new URL(n.p+n.u(560),n.b));"undefined"!=typeof OffscreenCanvas?cF=new Worker(new URL(n.p+n.u(96),n.b)):setTimeout((function(){console.log("This browser does not support offscreen canvas."),gz()}),250);var XF=!0,YF=["PAINTING THE SKIES","CALLING THE UNIVERSE","SHUFFLING THE COSMOS","GENERATING INFINITY"],KF=["CHANGING LOCATION","GOING SOMEWHERE ELSE","PLANNING ESCAPE","BEAM ME UP SCOTTY","VERSING ANA","GENERATING VERTICES","INSTANCIATING MESHES","UNFRIENDING GPU"],JF=function(e){return e[Math.floor(Math.random()*e.length)]},ZF=function(e,t){var n=t.toUpperCase();"firstPerson"===e?(document.getElementById("firstPersonLegendR").innerText=n,document.getElementById("firstPersonLegendG").innerText=n):"room"===e&&(document.getElementById("roomLegendR").innerText=n,document.getElementById("roomLegendG").innerText=n)},QF=function(e,t){setInterval((function(){FF.forEach((function(e){e.bbox.containsPoint(yH.position)&&ZF("room",e.name)}))}),2e3);var n=[];e.hasOwnProperty("gallery_id")||(e.name=e.name.substring(0,e.name.lastIndexOf("#")-1),e.gallery_id=KR[e.name].gallery_id),(0,Fb.request)("https://data.objkt.com/v3/graphql",(0,Fb.gql)(lF||(lF=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n      query getAllIterations($galleryId: String) {\n        gallery(where: { gallery_id: { _eq: $galleryId } }) {\n          tokens(order_by: { id: asc }) {\n            fa_contract\n            token_id\n            token {\n              name\n              artifact_uri\n              ophash\n              holders(\n                limit: 1\n                order_by: { last_incremented_at: desc_nulls_last }\n              ) {\n                holder {\n                  alias\n                }\n              }\n              attributes {\n                attribute {\n                  name\n                  value\n                }\n              }\n            }\n          }\n        }\n      }\n    "]))),{galleryId:e.gallery_id}).then((function(r){for(var i=function(){var e=r.gallery[0].tokens[a],t=e.token.artifact_uri,i=t.replace("ipfs://","").substring(t.indexOf("/?fxhash")+2,t.indexOf("/?fxhash")+53),o="";e.token.holders[0].holder.alias&&(o=e.token.holders[0].holder.alias+"'S "),e.token.attributes.forEach((function(e){"name"!==e.attribute.name&&"Name"!==e.attribute.name||(o+=e.attribute.value)})),o=o.toUpperCase(),n.push({hash:i,name:o})},a=0;a<r.gallery[0].tokens.length;a++)i();zF.room={contract:r.gallery[0].tokens[0].fa_contract,token_id:r.gallery[0].tokens[0].token_id,name:e.name,blockchain:e.chain},WF.postMessage({figuresUrl:e.figuresUrl,hash:n,type:"world",tag:{room:!0},name:"Commune",gallery:t})})),kz()},$F=function(e,t,n,i,a,o){switch(0===r["Tlchargement premier espace"].dbut&&(r["Tlchargement premier espace"].dbut=performance.now()),e.type){case"skybox":e.hasOwnProperty("tag")&&(zF.skybox={contract:e.contract,token_id:t,name:i,blockchain:e.chain});var s=1.75*window.innerHeight,u=e.skyboxUrl;aC(JF(YF)),"undefined"!=typeof OffscreenCanvas&&cF.postMessage({side:s,skyurl:u,hash:n});break;default:var l;if(e.hasOwnProperty("tag")){l=e.tag,e.tag.room&&(zF.room={contract:e.contract,token_id:t,name:i,blockchain:e.chain},zF.gallery=[]),l.room&&aC(JF(KF)),WF.postMessage({figuresUrl:e.figuresUrl,hash:n,type:e.type,tag:l,name:i,loc:a,genid:e.id,objktid:t,gallery:o});break}}};"undefined"!=typeof OffscreenCanvas&&(cF.onmessage=function(e){6==++GF?(HF[e.data.pos]=e.data.imagedata,TH(HF,e.data.side),HF={},GF=0):HF[e.data.pos]=e.data.imagedata});WF.onmessage=function(e){return function(e){switch(e.type){case"purge":sH.clear(),cH.clear(),lH.clear(),function(){Oz(1);var e=[new Ol(new rc(0,0))];e[0].position.y=-20,cA(e)}(),clearInterval(void 0);break;case"firstPerson":if(sH.clear(),UF(sH,e.figures,0,e.groups,e),sH.scale.set(.1,.1,.1),e.features.hasOwnProperty("fpLoc")){var t=e.features.fpLoc;sH.rotation.set(t.rot.x,t.rot.y,t.rot.z),sH.position.set(t.pos.x,t.pos.y,t.pos.z)}else sH.position.set(.1,-.11,-.1),sH.rotation.y=-Math.PI/2;"string"==typeof e.name&&ZF(e.type,e.name);break;case"world":e.tag.room?(bH&&(bH.moveSpeed=100),cH.clear(),e.hasOwnProperty("commune")||lH.clear(),XF&&(XF=!1,r["Tlchargement premier espace"].fin=performance.now(),r["Cration Monde"].dbut=performance.now()),e.hasOwnProperty("startPoint")?jF=e.startPoint:zF.hasOwnProperty("startPoint")?zF.startPoint&&(jF=zF.startPoint):jF=0,jF?(yH.position.x=jF.position.x,yH.position.y=jF.position.y,yH.position.z=jF.position.z,yH.lookAt(jF.position.x+jF.direction.x,jF.position.y+jF.direction.y,jF.position.z+jF.direction.z)):(yH.position.x=0,yH.position.y=100,yH.position.z=0,jF=0),e.features,"string"==typeof e.name&&ZF("room",e.name),e.hasOwnProperty("commune")||lH.clear(),UF(lH,e.figures,0,e.groups,e),sz||(lH.children[0].position.z=.1)):e.tag.item&&UF(hH,e.figures,0,e.groups,e)}}(e.data)};var ez=document.getElementById("titleG"),tz=document.getElementById("titleR"),nz=document.getElementById("landingTitle"),rz=document.getElementById("hider"),iz=(document.getElementById("titleG"),document.getElementById("titleG"),document.getElementById("enter")),az=document.getElementById("enterG"),oz=document.getElementById("enterR"),sz=(document.getElementById("tips"),!0),uz=(document.getElementById("perfMode"),window.localStorage),lz=1;document.getElementById("tutorial").addEventListener("click",(function(){lz&&(LB(fR),setTimeout((function(){cz()}),400),lz=0)})),document.getElementById("tutohelp").addEventListener("click",(function(){lz&&(LB(fR),setTimeout((function(){cz()}),400),lz=0)}));var cz=function(){az.innerText="ENTER TUTORIAL",oz.innerText="ENTER TUTORIAL",iz.addEventListener("click",mR),gz()};uz.getItem("mode")?(uz.getItem("mode"),sz=!0):uz.setItem("mode","monochrome");var hz=function(){_B&&(mB.play(),wB=!0,xB.innerHTML='<img  style="width:15px;height:15px" src="icons/stop.svg">'),setTimeout((function(){pz&&mH(!0)}),500),document.getElementById("walletDetail").style.display="none";var e=window.location.search,t=new URLSearchParams(e);0!==iN.length||t.has("wallet")||t.has("ethwallet")||(console.log("No wallets found. Loading anaglyphic's collection as a backup."),tN("tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9")),(0,Fb.request)("https://data.objkt.com/v3/graphql",(0,Fb.gql)(yD||(yD=zD(['\n      query getObjktCuration {\n        gallery(\n          where: {\n            registry: { name: { _eq: "objkt" } }\n            items: { _gt: 4 }\n            name: {}\n            curators: { curator_address: {} }\n          }\n          order_by: { updated_at: desc }\n          limit: 20\n        ) {\n          gallery_id\n          name\n          logo\n          items\n          description\n          slug\n          curators {\n            curator {\n              address\n              alias\n              logo\n              twitter\n            }\n          }\n          tokens {\n            token {\n              content_rating\n            }\n          }\n        }\n      }\n    '])))).then((function(e){var t={gallery:[]};e.gallery.forEach((function(e){try{e.tokens.some((function(e){return"mature"===e.token.content_rating}))||t.gallery.push(e)}catch(e){console.log("Unable to load objkt curation due to unavailable content rating.")}})),YD(t,!0)})),bH.lock(),dH(),rz.style.animation="hide .8s linear forwards",setTimeout((function(){rz.style.display="none"}),1e3)};iz.addEventListener("click",hz);var fz=!1,dz=1;document.body.addEventListener("touchstart",(function(){document.getElementById("keyhelper").style.display="none",dz=4,document.getElementById("fullscreen-button").addEventListener("touchstart",(function(){document.body.requestFullscreen&&document.body.requestFullscreen()}))}));var pz=!0;iz.addEventListener("touchstart",(function(){pz=!1,fz||(fz=!0,mH(!1),xz(),setTimeout((function(){hz()}),2e3))}));var mz=function(e,t){document.getElementById("walletSync").style.animation="reveal .8s linear forwards",e&&(t?(ez.innerHTML=e+"<br>x<br>ANAVER.SE",tz.innerHTML=e+"<br>x<br>ANAVER.SE",document.title=e+" x ANAVER.SE"):(ez.innerHTML=e.toUpperCase()+"'S<br>ANAVER.SE",tz.innerHTML=e.toUpperCase()+"'S<br>ANAVER.SE",document.title=e.toUpperCase()+"'S ANAVER.SE")),document.getElementById("barcode").style.animation="reveal .8s linear forwards",nz.style.animation="reveal .8s linear forwards"},vz=!1,gz=function(){vz||(document.getElementById("barcode").addEventListener("click",EH),document.getElementById("barcode").style.cursor="pointer",vz=!0,iz.style.animation="reveal .5s linear forwards",iz.style.pointerEvents="all",zn("#barrouge").transition().duration(500).attr("transform","translate(-2,0)"),zn("#barcyan").transition().duration(500).attr("transform","translate(2,0)"),ez.style.animation="shift .5s linear forwards",tz.style.animation="unshift .5s linear forwards",document.getElementById("enterR").style.animation="unshift .5s linear forwards",document.getElementById("enterG").style.animation="shift .5s linear forwards",r["Cration Monde"].fin=performance.now(),r["Total ANAVER.SE"].fin=performance.now(),setTimeout((function(){horlogesLog()}),2500))},yz=!1,bz=1,xz=function(){bz=!1,mH(!1),nz.style.display="flex",iz.style.display="flex",yz=!0,document.getElementById("mobile-control").style.display="block";var e=!1;document.getElementById("help-trigger-button").addEventListener("touchstart",(function(){e?(document.getElementById("mobile-help-panel").style.display="none",document.getElementById("hang-button-desc").style.display="none"):(document.getElementById("mobile-help-panel").style.display="block","flex"===document.getElementById("hang-button").style.display&&(document.getElementById("hang-button-desc").style.display="block")),e=!e})),document.getElementById("mobile-control").style.display="block";try{void 0!==screen.orientation.type&&"landscape-primary"===screen.orientation.type&&screen.orientation.lock("landscape-primary")}catch(e){console.log("Are you using safari for iOS ?"),gz()}},wz={IIIF:"The IIIF consortium lets you import high quality public domain assets from the world's largest National Libraries, Museum and \n  Universities. This tab helps you load documents hosted by the Bibliothque Nationale de France through its <strong>Gallica</strong> service\n  and by the British Library through its <strong>Available Online</strong> program. Click on a service's image to access it. Clicking a link \n  (in red) will open the service's web page.",highlights:'In this page, you can select and <b>load generative structures, \n      skies and items</b>. Because the anaverse is "generative", each element \n      you see in this table is a "generator", i.e. an algorithm creating multiple versions\n      of the same type of worlds. Clicking on a generator will reveal a \n      list of the different versions, or "iterations", available for the loading.',"Loaded collection":'This tab displays the <b>personal collection</b> of the identity you signed in as. If you didn\'t specify an identity,\n                        Anaglyphic\'s personal collection is loaded instead.\n                        To hang a painting, click first on an artist thumbnail, and then select the \n                        piece you want to hang. <a href="https://observablehq.com/@anaglyph-ic/anaverse-seminar-list"\n                        target="blank"><span style="cursor:pointer;color:white;background:red;padding:2px;">Seminar artists</span></a> are marked in red and white.\n                        This only loads the 500 most recent pieces of the wallet. <a style="cursor:pointer" id="forceLoadCollection">Click here</a> to load the entire collection.',"Loaded creations":"This tab displays the <b>personal creations</b> of the identity you signed in as. \n                        If you are not signed in, Ana's personal creations will be loaded instead.\n                        To hang a painting, click first on a collection thumbnail, and then select the \n                        piece you want to hang.","Local galleries":'This tab displays the <b>local galleries you created</b>. These galleries are only accessible\n                        on your current machine, and only as long as you do not purge your local website storage.\n                        To share a gallery with the world, you will need to learn how to <a href="https://observablehq.com/collection/@anaglyph-ic/starting-with-the-anaver-se"\n                        target="blank">export a local gallery</a>.',"Gallery builder":"Use these inputs to either save locally your current gallery or import a compatible gallery.json file.","Public galleries":"This tab displays <b>publicly accessible blockchain-indexed galleries</b>. These galleries are \n                        accessible by all users at all times. They are handcrafted by curators.","Data visualisation":"This tab displays <b>data visualisation procedures</b> available in the anaverse. The data presented \n                          in this tab is public and made to fit in a 3D environment for exploration.","fx(text)":"This tab enables you to search for an fx(text) article and load its tezos-indexed content. The content will be made available for you to hang in the current space.","Objkt Curated":"This tab lets you search for <a href='https://objkt.com/'>objkt.com</a> user curations. If a profile is synced in,\n   this tab will start with the profiles' most recent curations. If not, the most recent curations of all users will be displayed. Use the \n   search field to look for a curation (the search engine looks for the name of the gallery). Clicking on a <strong>curation thumbnail</strong> will load it in a gallery template.\n   Click on <strong>Load assets</strong> instead to load each piece in the Contract import tab and build your own 3D gallery. Only curated galleries with\n   more than five items are displayed.","Mini games":"Mini games for the anaverse.","Your Views inventory":'This panel shows all the pieces privately contained in your "Views vault". These elements are visible to you only. The images and metadata are called from the secure Views servers.',"Active services":"This tab shows all active services in your current anaverse session and lets you terminate them.","Contract import":"This form lets you import artworks by pasting a contract address.",Gallica:"Gallica is the Bibliothque nationale de France's digital library. Established in October 1997, it has more than 6 million digitized materials, including photographs, cartoons, drawings, prints, posters, maps, and more. All library materials are freely available. Use the IIIF format to import a Gallica resource. Simply paste a link from the Gallica integration system to populate the relevant fields.","Screen record":"Use this panel to record your screen while navigating the anaverse.",Seminars:' This tab lets you load <a href="https://observablehq.com/@anaglyph-ic/anaverse-seminar-series"\n    target="blank">Anaverse seminar series</a> videos within your current anaverse context. It also lets you load other compatible videos, for you which you need to provide a valid URL. Please bear in mind that these videos need to be fully preloaded before being played, and that they can be very heavy.',Construction:'This tab lets you add <a href="https://threejs.org/docs/index.html?q=geometry" target="_blank">Three JS elements</a> into the world.',Multiuser:"This tab lets you open the anaverse text chat."},_z=!1,Ez=document.getElementById("mobile-jetpack"),Sz=document.getElementById("header"),Tz=document.getElementById("tokens"),Mz=function(){var e=document.getElementById("collection");Tz.style.top="0%",Tz.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideLeft";var t=document.createElement("div");t.innerText="LOADING COLLECTION ...",t.id="loadingCollection",e.appendChild(t)},kz=function(e){var t=document.getElementById("anavTooltip");t.style.animation="0.2s linear 0s 1 normal forwards running reveal",_z?(window.innerWidth>window.innerHeight&&bH.lock(),pz&&(Sz.style.animation="0.2s linear 0s 1 normal forwards running loaderHeaderSlideUp",Tz.style.top="0px",Tz.style.animation="0.2s linear 0s 1 normal forwards running tokensSlideDown",t.style.animation="0.2s linear 0s 1 normal forwards running hide",setTimeout((function(){Tz.innerHTML="",t.style.zIndex=0,t.style.display="none",_z=!1}),200)),yz&&(Ez.style.display="flex",Tz.innerHTML="",t.style.zIndex=0,t.style.display="none",_z=!1)):(pz&&(Sz.style.animation="0.2s linear 0s 1 normal forwards running loaderHeaderSlideDown"),window.innerWidth>window.innerHeight&&bH.unlock(),e?function(){var e=document.getElementById("tokens");e.style.width="200%",e.style.height="100%";var t=document.createElement("div");t.id="list",e.append(t);var n=document.createElement("div");n.id="collection",e.append(t,n),pz&&(e.style.position="relative",e.style.top="100%",e.style.animation="0.2s linear 0s 1 normal forwards running loaderSlideTop");var r=document.createElement("div"),i=document.createElement("ul");if(i.style.listStyle="none",e.style.gridTemplateColumns="",e.style.overflow="hidden hidden",e.style.display="grid",eN.length>0){i.className="tokensDiv";var a=document.createElement("div");a.innerText="Personal tokens",a.className="tokenCatTitle",a.style.cursor="pointer",i.style.width="90%",i.style.borderRight="2px solid red",a.addEventListener("click",(function(){"wrap"===i.style.flexWrap?(i.style.display="inline-flex",i.style.height="220px",i.style.alignItems="flex-start",i.style.flexWrap="nowrap"):(i.style.flexWrap="wrap",i.style.height="",i.style.alignItems="")})),r.appendChild(a),i.style.height="220px",i.style.alignItems="flex-start",i.style.flexWrap="nowrap",eN.forEach((function(e){i.append(e)}))}var o=[];for(var s in KR)o.push(KR[s]);var u=o[parseInt(Math.random()*o.length)].description;u.length>500&&(u=u.substring(0,500)+"...");var l="";(jn<=6||jn>=20)&&(l='style="background-color:#313131;color:white;"',e.style.color="white");var c=document.createElement("div");c.id="highlight",c.innerHTML="<div ".concat(l," id='highlightDesc' class='helperPanel'>\n    ").concat(wz.highlights,"\n        </div>\n        ");var h=document.createElement("div");h.innerHTML="<div class='tokenCatTitle'>First Person - Handeld Items</div>";var f=document.createElement("div");f.className="tokensDiv";var d=document.createElement("div");d.innerHTML="<div class='tokenCatTitle'>Rooms & spaces</div>";var p=document.createElement("div");p.className="tokensDiv";var m=document.createElement("div");m.innerHTML="<div class='tokenCatTitle'>Skies and environments</div>";var v=document.createElement("div");v.className="tokensDiv";var g=document.createElement("div");g.innerHTML="<div class='tokenCatTitle'>Sculptures</div>";var y=document.createElement("div");for(var b in y.className="tokensDiv",KR){var x=KR[b];"firstPerson"===x.type?f.appendChild(x.DOMelements.profile):"world"===x.type&&x.tag.room||"world"===x.type&&x.tag.commune?p.appendChild(x.DOMelements.profile):"skybox"===x.type?dR?9574===x.id&&v.appendChild(x.DOMelements.profile):v.appendChild(x.DOMelements.profile):"world"===x.type&&x.tag.item&&y.appendChild(x.DOMelements.profile)}(dR?[v]:[c,r,i,d,p,m,v,g,y,h,f]).forEach((function(e){return t.appendChild(e)}))}():UO(),t.style.display="grid",t.style.zIndex=48,_z=!0,yz&&(Ez.style.display="none"))},Az=document.getElementById("assetLoader"),Iz=0,Lz=function(){return Rz=!Rz},Rz=!1,Cz=!0,Pz=!1,Oz=function(e){return Pz=e},Dz=0,Nz=window.localStorage;Fn({minus:"-"});var Bz=document.getElementById("audio-radio"),Uz=function(e){return Iz=e};function Fz(){if(hH.children.length>0){var e=hH.children[0];e.children.forEach((function(e){("Mesh"===e.type||e.isLineSegments)&&("PlaneGeometry"===e.geometry.type?(e.material.opacity=1,e.material.transparent=!1):e.isLineSegments||(e.material=CF.whiteFull))})),cH.attach(e),hA(),hH.clear(),nB(!0),Hz=0,zz(),Rz&&Lz()}}function zz(){var e=document.getElementById("worldItemTooltip");e.style.animation="worldToolTipSlideOut 0.1s linear forwards",setTimeout((function(){e.innerHTML="",e.style.display="none"}),300),nB(1),yz&&(document.getElementById("hang-button").style.display="none")}var Hz=0,Gz=function(e){if(!Iz)switch(e.code){case"ShiftLeft":Pz?Pz=!1:Dz||(Pz=!0,setTimeout((function(){Pz=!1}),7e3),Dz=!0,setTimeout((function(){Dz=!1}),2e4));break;case"KeyT":var t=document.getElementById("messageDiv"),n=document.getElementById("sendMessage");if(!wN())if(Nz.getItem("previousChatSetting")){var r=JSON.parse(Nz.getItem("previousChatSetting"));TN(r.server,r.name,r.room)}else{var i={server:"https://mux.anaver.se",name:"USER_"+JSON.stringify(Date.now()).substring(8),room:"ANAVERSE-MAIN"};Nz.setItem("previousChatSetting",JSON.stringify(i)),TN(i.server,i.name,i.room)}"none"===t.style.display?(t.style.display="block",n.style.display="block"):(t.style.display="none",n.style.display="none");break;case"KeyB":var a=document.getElementById("keyhelper");"none"===a.style.display?(a.style.display="flex",a.style.animation="keyhelpappear .3s linear forwards"):(setTimeout((function(){return a.style.display="none"}),300),a.style.animation="keyhelpdisappear .3s linear forwards");break;case"KeyL":kz(!0);break;case"KeyE":default:break;case"KeyP":!function(){var e=function(e){var t=new Image;return t.src=e.domElement.toDataURL(),hP.play(),t}(aH);e.style="display:block;\n    margin:auto;\n    pointer-events:none;\n    max-width:60%;\n    max-height:60%;\n    border-radius: 5px;\n    box-shadow: 0px 0px 20px black;\n    cursor:auto;\n    ",Az.append(e),Az.style.display="flex",bH.unlock();var t=document.createElement("div");t.innerHTML='<a href="'.concat(e.src,'" style="color:white" download="anaverse-screenshot">Download HD</a>'),t.id="saveScreenshotDiv",Az.append(t)}();break;case"KeyC":var o=document.getElementById("viseur");"block"===o.style.display?o.style.display="none":o.style.display="block";break;case"KeyK":document.body.requestFullscreen();break;case"KeyG":0===hH.children.length&&kz();break;case"KeyN":if("none"===document.getElementById("worldItemTooltip").style.display){if(XN){Hz=1;var s=XN.object.parent;hH.attach(s),JB(XN.object.parent),bH.unlock(),nB(0)}}else zz();break;case"KeyH":Fz();break;case"KeyY":"flex"===Bz.style.display?Bz.style.display="none":Bz.style.display="flex";break;case"KeyV":Cz=!Cz}};function jz(e){return jz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jz(e)}function Vz(e,t,n){return t=Wz(t),function(e,t){if(t&&("object"===jz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xz(e)}(e,qz()?Reflect.construct(t,n||[],Wz(e).constructor):t.apply(e,n))}function qz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qz=function(){return!!e})()}function Wz(e){return Wz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wz(e)}function Xz(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yz(e,t){return Yz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yz(e,t)}var Kz,Jz,Zz=new uu(0,0,0,"YXZ"),Qz=new _s,$z={type:"change"},eH={type:"lock"},tH={type:"unlock"},nH=Math.PI/2;function rH(e){return e>-3*nH/2&&e<-nH/2?-nH:e>-nH/2&&e<nH/2?0:e>nH/2&&e<1.5*nH?nH:e>1.5*nH||e<-3*nH/2?2*nH:void 0}var iH,aH,oH=function(e){function t(e,n){var r,i;function a(){Kz.domElement.ownerDocument.pointerLockElement===Kz.domElement?(Kz.dispatchEvent(eH),Kz.isLocked=!0):(Kz.dispatchEvent(tH),Kz.isLocked=!1)}function o(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Vz(this,t),void 0===n&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),n=document.body),r.domElement=n,r.isLocked=!1,r.minPolarAngle=0,r.maxPolarAngle=Math.PI,Kz=Xz(r),Jz=function(t){if(!1!==Kz.isLocked){var n=t.movementX||t.mozMovementX||t.webkitMovementX||0,r=t.movementY||t.mozMovementY||t.webkitMovementY||0;if(Zz.setFromQuaternion(e.quaternion),Zz.y-=.002*n,Zz.x-=.002*r,Zz.x=Math.max(nH-Kz.maxPolarAngle,Math.min(nH-Kz.minPolarAngle,Zz.x)),e.quaternion.setFromEuler(Zz),Rz){var i=new uu(rH(Zz._x),rH(Zz._y),rH(Zz._z),"YXZ");hH.quaternion.setFromEuler(i)}else hH.quaternion.setFromEuler(Zz);fH.quaternion.setFromEuler(Zz),Kz.dispatchEvent($z)}},r.connect=function(){Kz.domElement.ownerDocument.addEventListener("mousemove",Jz),Kz.domElement.ownerDocument.addEventListener("pointerlockchange",a),Kz.domElement.ownerDocument.addEventListener("pointerlockerror",o)},r.disconnect=function(){Kz.domElement.ownerDocument.removeEventListener("mousemove",Jz),Kz.domElement.ownerDocument.removeEventListener("pointerlockchange",a),Kz.domElement.ownerDocument.removeEventListener("pointerlockerror",o)},r.dispose=function(){this.disconnect()},r.getObject=function(){return e},r.getDirection=(i=new _s(0,0,-1),function(t){return t.copy(i).applyQuaternion(e.quaternion)}),r.moveForward=function(t){Qz.setFromMatrixColumn(e.matrix,0),Qz.crossVectors(e.up,Qz),e.position.addScaledVector(Qz,t)},r.moveRight=function(t){Qz.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(Qz,t)},r.lock=function(){r.domElement.requestPointerLock&&(r.domElement.requestPointerLock(),setTimeout((function(){nB(!0)}),500))},r.unlock=function(){return Kz.domElement.ownerDocument.exitPointerLock()},r.connect(),document.addEventListener("pointerlockchange",(function(e){document.pointerLockElement?setTimeout((function(){return nB(1)}),1e3):nB(0)}),!1),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yz(e,t)}(t,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(Ro),sH=new Tf;sH.name="fpGroup";var uH=new Tf;uH.name="worldGroup";var lH=new Tf;lH.name="roomGroup";var cH=new Tf;cH.name="itemGroup";var hH=new Tf;hH.name="movingGroup";var fH=new Tf;fH.name="torcheGroup";var dH,pH=!1,mH=function(e){return pH=e},vH=1;uH.add(lH,cH,hH,fH);var gH,yH,bH,xH=new _s,wH=0,_H=function(){return wH=!1},EH=function(){xH.y=0,jF?(yH.position.x=jF.position.x,yH.position.y=jF.position.y,yH.position.z=jF.position.z,yH.lookAt(jF.position.x+jF.direction.x,jF.position.y+jF.direction.y,jF.position.z+jF.direction.z)):yH.position.set(0,4,0)},SH=new ov,TH=function(e,t){var n=[];for(var r in Oz(1),e){var i=document.createElement("canvas");i.width=t,i.height=t,i.getContext("2d").putImageData(e[r],0,0),n.push(i.toDataURL())}var a=SH.load(n);a.needsUpdate=!0,a.colorSpace=$a,a.mapping=gi,iH.background=a,setTimeout((function(){aC(),Oz(0)}),1200),gz()},MH=function(){var e=new Eg,t=new Wo;t.x=0,t.y=0,e.setFromCamera(t,yH),qF("startPoint",{position:{x:yH.position.x,y:yH.position.y,z:yH.position.z},direction:{x:e.ray.direction.x,y:e.ray.direction.y,z:e.ray.direction.z}}),document.getElementById("currentStartingPointDiv")&&(document.getElementById("currentStartingPointDiv").innerText="Current starting point:"+JSON.stringify(zF.startPoint))};const kH=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((function(e){return e.charCodeAt(0)}))),AH=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map((function(e){return e.charCodeAt(0)})));var IH,LH,RH,CH,PH,OH,DH=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),NH=null!==(IH=String.fromCodePoint)&&void 0!==IH?IH:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+String.fromCharCode(e)};function BH(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=DH.get(e))&&void 0!==t?t:e}function UH(e){return UH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UH(e)}function FH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zH(r.key),r)}}function zH(e){var t=function(e,t){if("object"!=UH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=UH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==UH(t)?t:String(t)}function HH(e){return e>=LH.ZERO&&e<=LH.NINE}!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(LH||(LH={})),function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(RH||(RH={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(CH||(CH={})),(OH=PH||(PH={}))[OH.Legacy=0]="Legacy",OH[OH.Strict=1]="Strict",OH[OH.Attribute=2]="Attribute";var GH,jH,VH,qH=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=CH.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=PH.Strict}var t,n;return t=e,n=[{key:"startEntity",value:function(e){this.decodeMode=e,this.state=CH.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}},{key:"write",value:function(e,t){switch(this.state){case CH.EntityStart:return e.charCodeAt(t)===LH.NUM?(this.state=CH.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=CH.NamedEntity,this.stateNamedEntity(e,t));case CH.NumericStart:return this.stateNumericStart(e,t);case CH.NumericDecimal:return this.stateNumericDecimal(e,t);case CH.NumericHex:return this.stateNumericHex(e,t);case CH.NamedEntity:return this.stateNamedEntity(e,t)}}},{key:"stateNumericStart",value:function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===LH.LOWER_X?(this.state=CH.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=CH.NumericDecimal,this.stateNumericDecimal(e,t))}},{key:"addToNumericResult",value:function(e,t,n,r){if(t!==n){var i=n-t;this.result=this.result*Math.pow(r,i)+parseInt(e.substr(t,i),r),this.consumed+=i}}},{key:"stateNumericHex",value:function(e,t){for(var n,r=t;t<e.length;){var i=e.charCodeAt(t);if(!(HH(i)||(n=i,n>=LH.UPPER_A&&n<=LH.UPPER_F||n>=LH.LOWER_A&&n<=LH.LOWER_F)))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(i,3);t+=1}return this.addToNumericResult(e,r,t,16),-1}},{key:"stateNumericDecimal",value:function(e,t){for(var n=t;t<e.length;){var r=e.charCodeAt(t);if(!HH(r))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}},{key:"emitNumericEntity",value:function(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===LH.SEMI)this.consumed+=1;else if(this.decodeMode===PH.Strict)return 0;return this.emitCodePoint(BH(this.result),this.consumed),this.errors&&(e!==LH.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}},{key:"stateNamedEntity",value:function(e,t){for(var n=this.decodeTree,r=n[this.treeIndex],i=(r&RH.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var a=e.charCodeAt(t);if(this.treeIndex=XH(n,r,this.treeIndex+Math.max(1,i),a),this.treeIndex<0)return 0===this.result||this.decodeMode===PH.Attribute&&(0===i||((o=a)===LH.EQUALS||function(e){return e>=LH.UPPER_A&&e<=LH.UPPER_Z||e>=LH.LOWER_A&&e<=LH.LOWER_Z||HH(e)}(o)))?0:this.emitNotTerminatedNamedEntity();if(0!=(i=((r=n[this.treeIndex])&RH.VALUE_LENGTH)>>14)){if(a===LH.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==PH.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}var o;return-1}},{key:"emitNotTerminatedNamedEntity",value:function(){var e,t=this.result,n=(this.decodeTree[t]&RH.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,n,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}},{key:"emitNamedEntityData",value:function(e,t,n){var r=this.decodeTree;return this.emitCodePoint(1===t?r[e]&~RH.VALUE_LENGTH:r[e+1],n),3===t&&this.emitCodePoint(r[e+2],n),n}},{key:"end",value:function(){var e;switch(this.state){case CH.NamedEntity:return 0===this.result||this.decodeMode===PH.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case CH.NumericDecimal:return this.emitNumericEntity(0,2);case CH.NumericHex:return this.emitNumericEntity(0,3);case CH.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case CH.EntityStart:return 0}}}],n&&FH(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function WH(e){var t="",n=new qH(e,(function(e){return t+=NH(e)}));return function(e,r){for(var i=0,a=0;(a=e.indexOf("&",a))>=0;){t+=e.slice(i,a),n.startEntity(r);var o=n.write(e,a+1);if(o<0){i=a+n.end();break}i=a+o,a=0===o?i+1:i}var s=t+e.slice(i);return t="",s}}function XH(e,t,n,r){var i=(t&RH.BRANCH_LENGTH)>>7,a=t&RH.JUMP_TABLE;if(0===i)return 0!==a&&r===a?n:-1;if(a){var o=r-a;return o<0||o>=i?-1:e[n+o]-1}for(var s=n,u=s+i-1;s<=u;){var l=s+u>>>1,c=e[l];if(c<r)s=l+1;else{if(!(c>r))return e[l+i];u=l-1}}return-1}function YH(e){return YH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YH(e)}function KH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JH(r.key),r)}}function JH(e){var t=function(e,t){if("object"!=YH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=YH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==YH(t)?t:String(t)}function ZH(e){return e===GH.Space||e===GH.NewLine||e===GH.Tab||e===GH.FormFeed||e===GH.CarriageReturn}function QH(e){return e===GH.Slash||e===GH.Gt||ZH(e)}function $H(e){return e>=GH.Zero&&e<=GH.Nine}WH(kH),WH(AH),function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"}(GH||(GH={})),function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"}(jH||(jH={})),function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"}(VH||(VH={}));var eG={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},tG=function(){function e(t,n){var r=t.xmlMode,i=void 0!==r&&r,a=t.decodeEntities,o=void 0===a||a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cbs=n,this.state=jH.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=jH.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=i,this.decodeEntities=o,this.entityTrie=i?AH:kH}var t,n;return t=e,n=[{key:"reset",value:function(){this.state=jH.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=jH.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}},{key:"write",value:function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}},{key:"end",value:function(){this.running&&this.finish()}},{key:"pause",value:function(){this.running=!1}},{key:"resume",value:function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}},{key:"getIndex",value:function(){return this.index}},{key:"getSectionStart",value:function(){return this.sectionStart}},{key:"stateText",value:function(e){e===GH.Lt||!this.decodeEntities&&this.fastForwardTo(GH.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=jH.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===GH.Amp&&(this.state=jH.BeforeEntity)}},{key:"stateSpecialStartSequence",value:function(e){var t=this.sequenceIndex===this.currentSequence.length;if(t?QH(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=jH.InTagName,this.stateInTagName(e)}},{key:"stateInSpecialTag",value:function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===GH.Gt||ZH(e)){var t=this.index-this.currentSequence.length;if(this.sectionStart<t){var n=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=n}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===eG.TitleEnd?this.decodeEntities&&e===GH.Amp&&(this.state=jH.BeforeEntity):this.fastForwardTo(GH.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===GH.Lt)}},{key:"stateCDATASequence",value:function(e){e===eG.Cdata[this.sequenceIndex]?++this.sequenceIndex===eG.Cdata.length&&(this.state=jH.InCommentLike,this.currentSequence=eG.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=jH.InDeclaration,this.stateInDeclaration(e))}},{key:"fastForwardTo",value:function(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}},{key:"stateInCommentLike",value:function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===eG.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=jH.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}},{key:"isTagStartChar",value:function(e){return this.xmlMode?!QH(e):function(e){return e>=GH.LowerA&&e<=GH.LowerZ||e>=GH.UpperA&&e<=GH.UpperZ}(e)}},{key:"startSpecial",value:function(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=jH.SpecialStartSequence}},{key:"stateBeforeTagName",value:function(e){if(e===GH.ExclamationMark)this.state=jH.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===GH.Questionmark)this.state=jH.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var t=32|e;this.sectionStart=this.index,this.xmlMode||t!==eG.TitleEnd[2]?this.state=this.xmlMode||t!==eG.ScriptEnd[2]?jH.InTagName:jH.BeforeSpecialS:this.startSpecial(eG.TitleEnd,3)}else e===GH.Slash?this.state=jH.BeforeClosingTagName:(this.state=jH.Text,this.stateText(e))}},{key:"stateInTagName",value:function(e){QH(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=jH.BeforeAttributeName,this.stateBeforeAttributeName(e))}},{key:"stateBeforeClosingTagName",value:function(e){ZH(e)||(e===GH.Gt?this.state=jH.Text:(this.state=this.isTagStartChar(e)?jH.InClosingTagName:jH.InSpecialComment,this.sectionStart=this.index))}},{key:"stateInClosingTagName",value:function(e){(e===GH.Gt||ZH(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=jH.AfterClosingTagName,this.stateAfterClosingTagName(e))}},{key:"stateAfterClosingTagName",value:function(e){(e===GH.Gt||this.fastForwardTo(GH.Gt))&&(this.state=jH.Text,this.baseState=jH.Text,this.sectionStart=this.index+1)}},{key:"stateBeforeAttributeName",value:function(e){e===GH.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=jH.InSpecialTag,this.sequenceIndex=0):this.state=jH.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===GH.Slash?this.state=jH.InSelfClosingTag:ZH(e)||(this.state=jH.InAttributeName,this.sectionStart=this.index)}},{key:"stateInSelfClosingTag",value:function(e){e===GH.Gt?(this.cbs.onselfclosingtag(this.index),this.state=jH.Text,this.baseState=jH.Text,this.sectionStart=this.index+1,this.isSpecial=!1):ZH(e)||(this.state=jH.BeforeAttributeName,this.stateBeforeAttributeName(e))}},{key:"stateInAttributeName",value:function(e){(e===GH.Eq||QH(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=jH.AfterAttributeName,this.stateAfterAttributeName(e))}},{key:"stateAfterAttributeName",value:function(e){e===GH.Eq?this.state=jH.BeforeAttributeValue:e===GH.Slash||e===GH.Gt?(this.cbs.onattribend(VH.NoValue,this.index),this.state=jH.BeforeAttributeName,this.stateBeforeAttributeName(e)):ZH(e)||(this.cbs.onattribend(VH.NoValue,this.index),this.state=jH.InAttributeName,this.sectionStart=this.index)}},{key:"stateBeforeAttributeValue",value:function(e){e===GH.DoubleQuote?(this.state=jH.InAttributeValueDq,this.sectionStart=this.index+1):e===GH.SingleQuote?(this.state=jH.InAttributeValueSq,this.sectionStart=this.index+1):ZH(e)||(this.sectionStart=this.index,this.state=jH.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}},{key:"handleInAttributeValue",value:function(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===GH.DoubleQuote?VH.Double:VH.Single,this.index),this.state=jH.BeforeAttributeName):this.decodeEntities&&e===GH.Amp&&(this.baseState=this.state,this.state=jH.BeforeEntity)}},{key:"stateInAttributeValueDoubleQuotes",value:function(e){this.handleInAttributeValue(e,GH.DoubleQuote)}},{key:"stateInAttributeValueSingleQuotes",value:function(e){this.handleInAttributeValue(e,GH.SingleQuote)}},{key:"stateInAttributeValueNoQuotes",value:function(e){ZH(e)||e===GH.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(VH.Unquoted,this.index),this.state=jH.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===GH.Amp&&(this.baseState=this.state,this.state=jH.BeforeEntity)}},{key:"stateBeforeDeclaration",value:function(e){e===GH.OpeningSquareBracket?(this.state=jH.CDATASequence,this.sequenceIndex=0):this.state=e===GH.Dash?jH.BeforeComment:jH.InDeclaration}},{key:"stateInDeclaration",value:function(e){(e===GH.Gt||this.fastForwardTo(GH.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=jH.Text,this.sectionStart=this.index+1)}},{key:"stateInProcessingInstruction",value:function(e){(e===GH.Gt||this.fastForwardTo(GH.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=jH.Text,this.sectionStart=this.index+1)}},{key:"stateBeforeComment",value:function(e){e===GH.Dash?(this.state=jH.InCommentLike,this.currentSequence=eG.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=jH.InDeclaration}},{key:"stateInSpecialComment",value:function(e){(e===GH.Gt||this.fastForwardTo(GH.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=jH.Text,this.sectionStart=this.index+1)}},{key:"stateBeforeSpecialS",value:function(e){var t=32|e;t===eG.ScriptEnd[3]?this.startSpecial(eG.ScriptEnd,4):t===eG.StyleEnd[3]?this.startSpecial(eG.StyleEnd,4):(this.state=jH.InTagName,this.stateInTagName(e))}},{key:"stateBeforeEntity",value:function(e){this.entityExcess=1,this.entityResult=0,e===GH.Number?this.state=jH.BeforeNumericEntity:e===GH.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=jH.InNamedEntity,this.stateInNamedEntity(e))}},{key:"stateInNamedEntity",value:function(e){if(this.entityExcess+=1,this.trieIndex=XH(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];var t=this.trieCurrent&RH.VALUE_LENGTH;if(t){var n=(t>>14)-1;if(this.allowLegacyEntity()||e===GH.Semi){var r=this.index-this.entityExcess+1;r>this.sectionStart&&this.emitPartial(this.sectionStart,r),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,0===n&&this.emitNamedEntity()}else this.trieIndex+=n}}},{key:"emitNamedEntity",value:function(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&RH.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~RH.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},{key:"stateBeforeNumericEntity",value:function(e){(32|e)===GH.LowerX?(this.entityExcess++,this.state=jH.InHexEntity):(this.state=jH.InNumericEntity,this.stateInNumericEntity(e))}},{key:"emitNumericEntity",value:function(e){var t=this.index-this.entityExcess-1;t+2+Number(this.state===jH.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint(BH(this.entityResult))),this.state=this.baseState}},{key:"stateInNumericEntity",value:function(e){e===GH.Semi?this.emitNumericEntity(!0):$H(e)?(this.entityResult=10*this.entityResult+(e-GH.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}},{key:"stateInHexEntity",value:function(e){e===GH.Semi?this.emitNumericEntity(!0):$H(e)?(this.entityResult=16*this.entityResult+(e-GH.Zero),this.entityExcess++):function(e){return e>=GH.UpperA&&e<=GH.UpperF||e>=GH.LowerA&&e<=GH.LowerF}(e)?(this.entityResult=16*this.entityResult+((32|e)-GH.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}},{key:"allowLegacyEntity",value:function(){return!this.xmlMode&&(this.baseState===jH.Text||this.baseState===jH.InSpecialTag)}},{key:"cleanup",value:function(){this.running&&this.sectionStart!==this.index&&(this.state===jH.Text||this.state===jH.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==jH.InAttributeValueDq&&this.state!==jH.InAttributeValueSq&&this.state!==jH.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}},{key:"shouldContinue",value:function(){return this.index<this.buffer.length+this.offset&&this.running}},{key:"parse",value:function(){for(;this.shouldContinue();){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case jH.Text:this.stateText(e);break;case jH.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case jH.InSpecialTag:this.stateInSpecialTag(e);break;case jH.CDATASequence:this.stateCDATASequence(e);break;case jH.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case jH.InAttributeName:this.stateInAttributeName(e);break;case jH.InCommentLike:this.stateInCommentLike(e);break;case jH.InSpecialComment:this.stateInSpecialComment(e);break;case jH.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case jH.InTagName:this.stateInTagName(e);break;case jH.InClosingTagName:this.stateInClosingTagName(e);break;case jH.BeforeTagName:this.stateBeforeTagName(e);break;case jH.AfterAttributeName:this.stateAfterAttributeName(e);break;case jH.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case jH.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case jH.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case jH.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case jH.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case jH.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case jH.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case jH.InDeclaration:this.stateInDeclaration(e);break;case jH.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case jH.BeforeComment:this.stateBeforeComment(e);break;case jH.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case jH.InNamedEntity:this.stateInNamedEntity(e);break;case jH.BeforeEntity:this.stateBeforeEntity(e);break;case jH.InHexEntity:this.stateInHexEntity(e);break;case jH.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()}},{key:"finish",value:function(){this.state===jH.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}},{key:"handleTrailingData",value:function(){var e=this.buffer.length+this.offset;this.state===jH.InCommentLike?this.currentSequence===eG.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===jH.InNumericEntity&&this.allowLegacyEntity()||this.state===jH.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===jH.InTagName||this.state===jH.BeforeAttributeName||this.state===jH.BeforeAttributeValue||this.state===jH.AfterAttributeName||this.state===jH.InAttributeName||this.state===jH.InAttributeValueSq||this.state===jH.InAttributeValueDq||this.state===jH.InAttributeValueNq||this.state===jH.InClosingTagName||this.cbs.ontext(this.sectionStart,e)}},{key:"emitPartial",value:function(e,t){this.baseState!==jH.Text&&this.baseState!==jH.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)}},{key:"emitCodePoint",value:function(e){this.baseState!==jH.Text&&this.baseState!==jH.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)}}],n&&KH(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nG(e){return nG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nG(e)}function rG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iG(r.key),r)}}function iG(e){var t=function(e,t){if("object"!=nG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=nG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nG(t)?t:String(t)}var aG,oG,sG=new Set(["input","option","optgroup","select","button","datalist","textarea"]),uG=new Set(["p"]),lG=new Set(["thead","tbody"]),cG=new Set(["dd","dt"]),hG=new Set(["rt","rp"]),fG=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",uG],["h1",uG],["h2",uG],["h3",uG],["h4",uG],["h5",uG],["h6",uG],["select",sG],["input",sG],["output",sG],["button",sG],["datalist",sG],["textarea",sG],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",cG],["dt",cG],["address",uG],["article",uG],["aside",uG],["blockquote",uG],["details",uG],["div",uG],["dl",uG],["fieldset",uG],["figcaption",uG],["figure",uG],["footer",uG],["form",uG],["header",uG],["hr",uG],["main",uG],["nav",uG],["ol",uG],["pre",uG],["section",uG],["table",uG],["ul",uG],["rt",hG],["rp",hG],["tbody",lG],["tfoot",lG]]),dG=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),pG=new Set(["math","svg"]),mG=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),vG=/\s|\//,gG=function(){function e(t){var n,r,i,a,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=s,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=t?t:{},this.lowerCaseTagNames=null!==(n=s.lowerCaseTags)&&void 0!==n?n:!s.xmlMode,this.lowerCaseAttributeNames=null!==(r=s.lowerCaseAttributeNames)&&void 0!==r?r:!s.xmlMode,this.tokenizer=new(null!==(i=s.Tokenizer)&&void 0!==i?i:tG)(this.options,this),null===(o=(a=this.cbs).onparserinit)||void 0===o||o.call(a,this)}var t,n;return t=e,n=[{key:"ontext",value:function(e,t){var n,r,i=this.getSlice(e,t);this.endIndex=t-1,null===(r=(n=this.cbs).ontext)||void 0===r||r.call(n,i),this.startIndex=t}},{key:"ontextentity",value:function(e){var t,n,r=this.tokenizer.getSectionStart();this.endIndex=r-1,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,NH(e)),this.startIndex=r}},{key:"isVoidElement",value:function(e){return!this.options.xmlMode&&dG.has(e)}},{key:"onopentagname",value:function(e,t){this.endIndex=t;var n=this.getSlice(e,t);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)}},{key:"emitOpenTag",value:function(e){var t,n,r,i;this.openTagStart=this.startIndex,this.tagname=e;var a=!this.options.xmlMode&&fG.get(e);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){var o=this.stack.pop();null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,o,!0)}this.isVoidElement(e)||(this.stack.push(e),pG.has(e)?this.foreignContext.push(!0):mG.has(e)&&this.foreignContext.push(!1)),null===(i=(r=this.cbs).onopentagname)||void 0===i||i.call(r,e),this.cbs.onopentag&&(this.attribs={})}},{key:"endOpenTag",value:function(e){var t,n;this.startIndex=this.openTagStart,this.attribs&&(null===(n=(t=this.cbs).onopentag)||void 0===n||n.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}},{key:"onopentagend",value:function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}},{key:"onclosetag",value:function(e,t){var n,r,i,a,o,s;this.endIndex=t;var u=this.getSlice(e,t);if(this.lowerCaseTagNames&&(u=u.toLowerCase()),(pG.has(u)||mG.has(u))&&this.foreignContext.pop(),this.isVoidElement(u))this.options.xmlMode||"br"!==u||(null===(r=(n=this.cbs).onopentagname)||void 0===r||r.call(n,"br"),null===(a=(i=this.cbs).onopentag)||void 0===a||a.call(i,"br",{},!0),null===(s=(o=this.cbs).onclosetag)||void 0===s||s.call(o,"br",!1));else{var l=this.stack.lastIndexOf(u);if(-1!==l)if(this.cbs.onclosetag)for(var c=this.stack.length-l;c--;)this.cbs.onclosetag(this.stack.pop(),0!==c);else this.stack.length=l;else this.options.xmlMode||"p"!==u||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1}},{key:"onselfclosingtag",value:function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}},{key:"closeCurrentTag",value:function(e){var t,n,r=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===r&&(null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,r,!e),this.stack.pop())}},{key:"onattribname",value:function(e,t){this.startIndex=e;var n=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n}},{key:"onattribdata",value:function(e,t){this.attribvalue+=this.getSlice(e,t)}},{key:"onattribentity",value:function(e){this.attribvalue+=NH(e)}},{key:"onattribend",value:function(e,t){var n,r;this.endIndex=t,null===(r=(n=this.cbs).onattribute)||void 0===r||r.call(n,this.attribname,this.attribvalue,e===VH.Double?'"':e===VH.Single?"'":e===VH.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}},{key:"getInstructionName",value:function(e){var t=e.search(vG),n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n}},{key:"ondeclaration",value:function(e,t){this.endIndex=t;var n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var r=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(r),"!".concat(n))}this.startIndex=t+1}},{key:"onprocessinginstruction",value:function(e,t){this.endIndex=t;var n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var r=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(r),"?".concat(n))}this.startIndex=t+1}},{key:"oncomment",value:function(e,t,n){var r,i,a,o;this.endIndex=t,null===(i=(r=this.cbs).oncomment)||void 0===i||i.call(r,this.getSlice(e,t-n)),null===(o=(a=this.cbs).oncommentend)||void 0===o||o.call(a),this.startIndex=t+1}},{key:"oncdata",value:function(e,t,n){var r,i,a,o,s,u,l,c,h,f;this.endIndex=t;var d=this.getSlice(e,t-n);this.options.xmlMode||this.options.recognizeCDATA?(null===(i=(r=this.cbs).oncdatastart)||void 0===i||i.call(r),null===(o=(a=this.cbs).ontext)||void 0===o||o.call(a,d),null===(u=(s=this.cbs).oncdataend)||void 0===u||u.call(s)):(null===(c=(l=this.cbs).oncomment)||void 0===c||c.call(l,"[CDATA[".concat(d,"]]")),null===(f=(h=this.cbs).oncommentend)||void 0===f||f.call(h)),this.startIndex=t+1}},{key:"onend",value:function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)}},{key:"reset",value:function(){var e,t,n,r;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(r=(n=this.cbs).onparserinit)||void 0===r||r.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}},{key:"parseComplete",value:function(e){this.reset(),this.end(e)}},{key:"getSlice",value:function(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,t-this.bufferOffset);return n}},{key:"shiftBuffer",value:function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}},{key:"write",value:function(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))}},{key:"end",value:function(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())}},{key:"pause",value:function(){this.tokenizer.pause()}},{key:"resume",value:function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}},{key:"parseChunk",value:function(e){this.write(e)}},{key:"done",value:function(e){this.end(e)}}],n&&rG(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yG(e){return yG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yG(e)}function bG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bG(Object(n),!0).forEach((function(t){wG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wG(e,t,n){return(t=LG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _G(e,t,n){return t=SG(t),function(e,t){if(t&&("object"===yG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,EG()?Reflect.construct(t,n||[],SG(e).constructor):t.apply(e,n))}function EG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(EG=function(){return!!e})()}function SG(e){return SG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},SG(e)}function TG(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MG(e,t)}function MG(e,t){return MG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},MG(e,t)}function kG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LG(r.key),r)}}function IG(e,t,n){return t&&AG(e.prototype,t),n&&AG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function LG(e){var t=function(e,t){if("object"!=yG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=yG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yG(t)?t:String(t)}(oG=aG||(aG={})).Root="root",oG.Text="text",oG.Directive="directive",oG.Comment="comment",oG.Script="script",oG.Style="style",oG.Tag="tag",oG.CDATA="cdata",oG.Doctype="doctype",aG.Root,aG.Text,aG.Directive,aG.Comment,aG.Script,aG.Style,aG.Tag,aG.CDATA,aG.Doctype;var RG=function(){function e(){kG(this,e),this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return IG(e,[{key:"parentNode",get:function(){return this.parent},set:function(e){this.parent=e}},{key:"previousSibling",get:function(){return this.prev},set:function(e){this.prev=e}},{key:"nextSibling",get:function(){return this.next},set:function(e){this.next=e}},{key:"cloneNode",value:function(){return VG(this,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}}]),e}(),CG=function(e){function t(e){var n;return kG(this,t),(n=_G(this,t)).data=e,n}return TG(t,e),IG(t,[{key:"nodeValue",get:function(){return this.data},set:function(e){this.data=e}}]),t}(RG),PG=function(e){function t(){var e;return kG(this,t),(e=_G(this,t,arguments)).type=aG.Text,e}return TG(t,e),IG(t,[{key:"nodeType",get:function(){return 3}}]),t}(CG),OG=function(e){function t(){var e;return kG(this,t),(e=_G(this,t,arguments)).type=aG.Comment,e}return TG(t,e),IG(t,[{key:"nodeType",get:function(){return 8}}]),t}(CG),DG=function(e){function t(e,n){var r;return kG(this,t),(r=_G(this,t,[n])).name=e,r.type=aG.Directive,r}return TG(t,e),IG(t,[{key:"nodeType",get:function(){return 1}}]),t}(CG),NG=function(e){function t(e){var n;return kG(this,t),(n=_G(this,t)).children=e,n}return TG(t,e),IG(t,[{key:"firstChild",get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}},{key:"lastChild",get:function(){return this.children.length>0?this.children[this.children.length-1]:null}},{key:"childNodes",get:function(){return this.children},set:function(e){this.children=e}}]),t}(RG),BG=function(e){function t(){var e;return kG(this,t),(e=_G(this,t,arguments)).type=aG.CDATA,e}return TG(t,e),IG(t,[{key:"nodeType",get:function(){return 4}}]),t}(NG),UG=function(e){function t(){var e;return kG(this,t),(e=_G(this,t,arguments)).type=aG.Root,e}return TG(t,e),IG(t,[{key:"nodeType",get:function(){return 9}}]),t}(NG),FG=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"script"===e?aG.Script:"style"===e?aG.Style:aG.Tag;return kG(this,t),(r=_G(this,t,[i])).name=e,r.attribs=n,r.type=a,r}return TG(t,e),IG(t,[{key:"nodeType",get:function(){return 1}},{key:"tagName",get:function(){return this.name},set:function(e){this.name=e}},{key:"attributes",get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}}))}}]),t}(NG);function zG(e){return(t=e).type===aG.Tag||t.type===aG.Script||t.type===aG.Style;var t}function HG(e){return e.type===aG.Text}function GG(e){return e.type===aG.Comment}function jG(e){return Object.prototype.hasOwnProperty.call(e,"children")}function VG(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(HG(e))t=new PG(e.data);else if(GG(e))t=new OG(e.data);else if(zG(e)){var r=n?qG(e.children):[],i=new FG(e.name,xG({},e.attribs),r);r.forEach((function(e){return e.parent=i})),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=xG({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=xG({},e["x-attribsPrefix"])),t=i}else if(function(e){return e.type===aG.CDATA}(e)){var a=n?qG(e.children):[],o=new BG(a);a.forEach((function(e){return e.parent=o})),t=o}else if(function(e){return e.type===aG.Root}(e)){var s=n?qG(e.children):[],u=new UG(s);s.forEach((function(e){return e.parent=u})),e["x-mode"]&&(u["x-mode"]=e["x-mode"]),t=u}else{if(!function(e){return e.type===aG.Directive}(e))throw new Error("Not implemented yet: ".concat(e.type));var l=new DG(e.name,e.data);null!=e["x-name"]&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),t=l}return t.startIndex=e.startIndex,t.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(t.sourceCodeLocation=e.sourceCodeLocation),t}function qG(e){for(var t=e.map((function(e){return VG(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}function WG(e){return WG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WG(e)}function XG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YG(r.key),r)}}function YG(e){var t=function(e,t){if("object"!=WG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=WG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==WG(t)?t:String(t)}var KG={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},JG=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=[],this.root=new UG(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof n&&(r=n,n=KG),"object"===WG(t)&&(n=t,t=void 0),this.callback=null!=t?t:null,this.options=null!=n?n:KG,this.elementCB=null!=r?r:null}var t,n;return t=e,n=[{key:"onparserinit",value:function(e){this.parser=e}},{key:"onreset",value:function(){this.dom=[],this.root=new UG(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}},{key:"onend",value:function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}},{key:"onerror",value:function(e){this.handleCallback(e)}},{key:"onclosetag",value:function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}},{key:"onopentag",value:function(e,t){var n=this.options.xmlMode?aG.Tag:void 0,r=new FG(e,t,void 0,n);this.addNode(r),this.tagStack.push(r)}},{key:"ontext",value:function(e){var t=this.lastNode;if(t&&t.type===aG.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new PG(e);this.addNode(n),this.lastNode=n}}},{key:"oncomment",value:function(e){if(this.lastNode&&this.lastNode.type===aG.Comment)this.lastNode.data+=e;else{var t=new OG(e);this.addNode(t),this.lastNode=t}}},{key:"oncommentend",value:function(){this.lastNode=null}},{key:"oncdatastart",value:function(){var e=new PG(""),t=new BG([e]);this.addNode(t),e.parent=t,this.lastNode=e}},{key:"oncdataend",value:function(){this.lastNode=null}},{key:"onprocessinginstruction",value:function(e,t){var n=new DG(e,t);this.addNode(n)}},{key:"handleCallback",value:function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e}},{key:"addNode",value:function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null}}],n&&XG(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ZG(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}new Map(ZG([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(ZG([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(ZG([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(ZG([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var QG,$G,ej=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function tj(e,t){return function(n){for(var r,i=0,a="";r=e.exec(n);)i!==r.index&&(a+=n.substring(i,r.index)),a+=t.get(r[0].charCodeAt(0)),i=r.index+1;return a+n.substring(i)}}function nj(e){return Array.isArray(e)?e.map(nj).join(""):jG(e)&&!GG(e)?nj(e.children):HG(e)?e.data:""}function rj(e,t){if(e){if("string"==typeof e)return ij(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ij(e,t):void 0}}function ij(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aj(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return Array.isArray(t)||(t=[t]),oj(e,t,n,r)}function oj(e,t,n,r){var i,a,o=[],s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rj(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(t);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(e(u)&&(o.push(u),--r<=0))break;if(n&&jG(u)&&u.children.length>0){var l=oj(e,u.children,n,r);if(o.push.apply(o,function(e){if(Array.isArray(e))return ij(e)}(a=l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||rj(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),(r-=l.length)<=0)break}}}catch(e){s.e(e)}finally{s.f()}return o}String.prototype.codePointAt,tj(/[&<>'"]/g,ej),tj(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),tj(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),function(e){e[e.XML=0]="XML",e[e.HTML=1]="HTML"}(QG||(QG={})),function(e){e[e.UTF8=0]="UTF8",e[e.ASCII=1]="ASCII",e[e.Extensive=2]="Extensive",e[e.Attribute=3]="Attribute",e[e.Text=4]="Text"}($G||($G={})),new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((function(e){return[e.toLowerCase(),e]}))),new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((function(e){return[e.toLowerCase(),e]}))),new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]),new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),new Set(["svg","math"]);var sj,uj={tag_name:function(e){return"function"==typeof e?function(t){return zG(t)&&e(t.name)}:"*"===e?zG:function(t){return zG(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return HG(t)&&e(t.data)}:function(t){return HG(t)&&t.data===e}}};function lj(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return aj(uj.tag_name(e),t,n,r)}function cj(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return hj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hj(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function hj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(sj||(sj={}));var fj=["url","type","lang"],dj=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function pj(e){return lj("media:content",e).map((function(e){var t,n=e.attribs,r={medium:n.medium,isDefault:!!n.isDefault},i=cj(fj);try{for(i.s();!(t=i.n()).done;){var a=t.value;n[a]&&(r[a]=n[a])}}catch(e){i.e(e)}finally{i.f()}var o,s=cj(dj);try{for(s.s();!(o=s.n()).done;){var u=o.value;n[u]&&(r[u]=parseInt(n[u],10))}}catch(e){s.e(e)}finally{s.f()}return n.expression&&(r.expression=n.expression),r}))}function mj(e,t){return lj(e,t,!0,1)[0]}function vj(e,t){return nj(lj(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],1)).trim()}function gj(e,t,n,r){var i=vj(n,r,arguments.length>4&&void 0!==arguments[4]&&arguments[4]);i&&(e[t]=i)}function yj(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}var bj={xmlMode:!0};window.getRSSFeed=function(e,t){return fetch(e).then((function(e){e.text().then((function(e){var n=function(e){return t=function(e,t){var n=new JG(void 0,t);return new gG(n,t).end(e),n.root}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:bj).children,(n=mj(yj,t))?"feed"===n.name?function(e){var t,n=e.children,r={type:"atom",items:lj("entry",n).map((function(e){var t,n=e.children,r={media:pj(n)};gj(r,"id","id",n),gj(r,"title","title",n);var i=null===(t=mj("link",n))||void 0===t?void 0:t.attribs.href;i&&(r.link=i);var a=vj("summary",n)||vj("content",n);a&&(r.description=a);var o=vj("updated",n);return o&&(r.pubDate=new Date(o)),r}))};gj(r,"id","id",n),gj(r,"title","title",n);var i=null===(t=mj("link",n))||void 0===t?void 0:t.attribs.href;i&&(r.link=i),gj(r,"description","subtitle",n);var a=vj("updated",n);return a&&(r.updated=new Date(a)),gj(r,"author","email",n,!0),r}(n):function(e){var t,n,r=null!==(n=null===(t=mj("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],i={type:e.name.substr(0,3),id:"",items:lj("item",e.children).map((function(e){var t=e.children,n={media:pj(t)};gj(n,"id","guid",t),gj(n,"title","title",t),gj(n,"link","link",t),gj(n,"description","description",t);var r=vj("pubDate",t);return r&&(n.pubDate=new Date(r)),n}))};gj(i,"title","title",r),gj(i,"link","link",r),gj(i,"description","description",r);var a=vj("lastBuildDate",r);return a&&(i.updated=new Date(a)),gj(i,"author","managingEditor",r,!0),i}(n):null;var t,n}(e);console.log(n);var r=function(e,t){"franceinfo"===t&&e.map((function(e){return{title:e.title,description:e.description,datetime:e.pubDate,href:e.link,img:e.enclosure}}))}(n.items,t);console.log(r)}))}))};r["Total ANAVER.SE"].dbut=window.performance.now(),console.info("\n _______ _______ _______ _______ _______ _______     _______ _______ \n|  _  | |   | | |  _  | |  |  | |   __|_| __  | |   |   __|_|   __|_|\n|     | | | | | |     | |  |  | |   __|_|    -|-|_ _|__   | |   __|_|\n|__|__|_|_|___|_|__|__|_|____/_/|_____|_|__|__|_|_|_|_____|_|_____|_|\n                                                  \nWelcome to the anaver.se\nIf you want to learn more -> twitter.com/anaglyph_ic"),function(){r["Code Barre"].dbut=window.performance.now();var e=document.getElementById("cont");document.getElementById("barcode")&&document.getElementById("barcode").remove();var t=Hn("svg").attr("width",200).attr("height",40).attr("id","barcode");t.style("left","10px"),t.style("top","0px"),t.style("position","absolute");for(var n=t.append("g").attr("id","barrouge"),i=t.append("g").attr("id","barcyan"),a=0;a<30;a++)i.append("rect").style("mix-blend-mode",Wn).attr("x",5*a).attr("y",.01*window.innerHeight).attr("width",qn[a]).attr("height",40).attr("fill","rgb(0,255,235)"),n.append("rect").style("mix-blend-mode",Wn).attr("x",5*a).attr("y",.01*window.innerHeight).attr("width",qn[a]).attr("height",40).attr("fill","rgb(255,0,0)");e.append(t.node()),r["Code Barre"].fin=window.performance.now()}(),function(){if(jn<=6||jn>=20){document.getElementById("hider").style.backgroundColor="#313131",document.getElementById("titleG").style.mixBlendMode="screen",document.getElementById("titleR").style.mixBlendMode="screen",document.getElementById("enterR").style.mixBlendMode="screen",document.getElementById("enterG").style.mixBlendMode="screen",document.getElementById("links").style.color="white",document.getElementById("connectInfo").style.color="white",document.getElementById("perfMode").style.color="white",document.getElementById("anavTooltip").style.backgroundColor="rgba(25, 25, 25, 0.6)",document.getElementById("header").style.backgroundColor="rgba(25, 25, 25, 0.6)",document.getElementById("header").style.color="white";for(var e=document.getElementsByClassName("hiderlinks"),t=0;t<e.length;t++)e[t].style.color="white"}}(),function(){var e=JSON.parse(aN.getItem("walldir")),t=document.getElementById("tezosWalletsDirectory");for(var n in e.tez){var r=document.createElement("option");r.value=e.tez[n].name+" - "+n,t.append(r)}}(),function(){var e=window.innerHeight,t=window.innerWidth,n=document.getElementById("cont"),r=new qv,i=t/e,a=new _s;document.addEventListener("keydown",Gz),document.getElementById("loader-button").addEventListener("click",(function(){kz(!0)})),document.getElementById("gallery-button").addEventListener("click",(function(){0===hH.children.length&&(UO(),kz())})),document.getElementById("hang-button").addEventListener("click",Fz);var o=new Bf;(gH=new jl(60,i,1e-4,1e4)).position.set(0,0,.1);var s=new Cf({antialias:0,alpha:!0});s.setClearColor(0,0),s.setSize(t,e),s.setPixelRatio(1),o.background=null,sH.position.set(.1,-.11,-.1),sH.rotation.y=-Math.PI/2,o.add(sH),aH=new Cf({antialias:0,preserveDrawingBuffer:!0}),vH=aH.capabilities.getMaxAnisotropy(),aH.outputColorSpace=$a,aH.setSize(t,e),aH.setPixelRatio(1),(yH=new jl(60,i,.1,1e4)).position.set(0,1,2),iH=new Bf;var u=new Sv(4210752,30);iH.add(u),uH.name="World",iH.add(uH),n.appendChild(aH.domElement),aH.domElement.style.position="absolute",aH.domElement.style.top="0px",aH.domElement.style.left="0px",aH.domElement.style.width=t+"px",aH.domElement.style.height=e+"px";var l="rgb(".concat(Math.floor(150*Math.random()),",").concat(Math.floor(120*Math.random()),",").concat(Math.floor(150*Math.random()),")"),c=new Gu(l);iH.background=c,n.appendChild(s.domElement),s.domElement.style.position="absolute",s.domElement.style.top="0px",s.domElement.style.left="0px",s.domElement.style.pointerEvents="none",bH=new oH(yH,aH.domElement);var h=!1,f=!1,d=!1,p=!1;iH.add(bH.getObject());var m,v,g,y=!1,b=document.getElementById("mobile-jetpack");b.addEventListener("touchstart",(function(e){e.preventDefault(),y?m&&(clearInterval(m),nP(),b.style.background="radial-gradient( rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.5) 100% )"):(w(e),m=setInterval((function(){tP(),xH.y+=2}),40),b.style.background="radial-gradient( rgba(255, 25, 25, 0.7) 0%, rgba(255, 25, 25, 0.5) 100% )"),y=!y})),b.addEventListener("touchend",(function(e){m&&(clearInterval(m),nP(),b.style.background="radial-gradient( rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.5) 100% )",y=!1)}));var x=new uu(0,0,0,"YXZ"),w=function(e){for(var t=0;t<e.touches.length;t++){var n=e.touches[t];n.clientX<window.innerWidth/2&&(g=n)}pH=!1};aH.domElement.addEventListener("touchstart",w),aH.domElement.addEventListener("touchmove",(function(e){for(var t=0;t<e.touches.length;t++){var n=e.touches[t];if(n.clientY>.3*window.innerHeight)if(n.clientX>window.innerWidth/2){e.preventDefault(),v&&(e.movementX=15*(n.pageX-v.pageX),e.movementY=3*(n.pageY-v.pageY));var r=e.movementX||e.mozMovementX||e.webkitMovementX||0,i=e.movementY||e.mozMovementY||e.webkitMovementY||0;x.setFromQuaternion(yH.quaternion),x.y-=.002*r,x.x-=.002*i,yH.quaternion.setFromEuler(x),hH.quaternion.setFromEuler(x),fH.quaternion.setFromEuler(x),v=n}else e.preventDefault(),g&&(e.movementX=n.pageX-g.pageX,e.movementY=n.pageY-g.pageY),_&&(h=!1,d=!1,p=!1,f=!1,window.innerHeight,Math.abs(e.movementX)<Math.abs(e.movementY)?e.movementY>0?(h=!1,d=!1,p=!1,f=!0):(h=!0,d=!1,p=!1,f=!1):Math.abs(e.movementX)>Math.abs(e.movementY)&&(e.movementX>0?(h=!1,d=!1,p=!0,f=!1):(h=!1,d=!0,p=!1,f=!1)),g=n,_=!1)}})),aH.domElement.addEventListener("touchend",(function(){g=!1}));var _=!0;aH.domElement.addEventListener("touchend",(function(e){h=!1,f=!1,d=!1,p=!1,v=!1,_=!0})),document.addEventListener("keydown",(function(e){if(!Iz)switch(e.code){case"ArrowUp":case"KeyW":h=!0;break;case"ArrowLeft":case"KeyA":d=!0;break;case"ArrowDown":case"KeyS":f=!0;break;case"ArrowRight":case"KeyD":p=!0;break;case"Space":xH.y<.5&&bH.getObject().position.y>-20?xH.y+=30:(xH.y+=2,tP());break;case"KeyR":EH()}})),document.addEventListener("keyup",(function(e){switch(e.code){case"ArrowUp":case"KeyW":h=!1;break;case"ArrowLeft":case"KeyA":d=!1;break;case"ArrowDown":case"KeyS":f=!1;break;case"ArrowRight":case"KeyD":p=!1;break;case"Space":nP()}})),bH.moveSpeed=0;var E=new _s,S=new _s,T=new Ts,M=new Qs,k=new Cg,A=new Cg(new _s,new _s(0,-1,0)),I=!1;dH=function(){if(hB(),sz)I||(lH.children.forEach((function(e){"green"===e.userData.color&&(e.clear(),lH.remove(e))})),aH.renderLists.dispose(),I=!0);else{var n=yH.getWorldDirection(new _s),i=n.z>0?-1:1,u=n.x>0?1:-1;lH.children.forEach((function(e){"green"===e.userData.color&&(e.position.x=Math.abs(.2*n.x)*i,e.position.z=Math.abs(.2*n.z)*u)}))}if(bz&&pH){if(!wH){(wH=new bb(aH)).addPass(new mb(iH,yH));var l=new Ub(iH,yH,t,e),c=(new Ts).setFromObject(iH),m=Math.abs(c.max.x)+Math.abs(c.max.y)+Math.abs(c.max.z)+Math.abs(c.min.x)+Math.abs(c.min.y)+Math.abs(c.min.z);(jn<=6||jn>=20)&&(iH.fog=new Nf("rgba(25,25,40,0.7)",0,m/4)),l.configuration.aoRadius=m/500,l.configuration.distanceFalloff=m/60,l.configuration.intensity=2,l.configuration.aoSamples=3,l.configuration.denoiseRadius=0,l.configuration.denoiseSamples=1,wH.addPass(l),wH.render()}wH.render()}else aH.render(iH,yH);function v(e){if(Pz||(bH.getObject().position.y<8&&xH.y<0&&bH.getObject().position.y>3?xH.y=-30/dz:xH.y-=50*e/dz),xH.x-=10*xH.x*e*1,xH.z-=10*xH.z*e*1,a.z=Number(h)-Number(f),a.x=Number(p)-Number(d),a.normalize(),bH.getObject().updateMatrixWorld(),(h||f)&&(xH.z-=a.z*bH.moveSpeed*e*1.2),(d||p)&&(xH.x-=a.x*bH.moveSpeed*e*1.2),bH.moveRight(-xH.x*e),bH.moveForward(-xH.z*e),bH.getObject().position.y+=xH.y*e,oA){T.makeEmpty(),M.copy(oA.matrixWorld).invert(),k.copy(A),k.start.applyMatrix4(bH.getObject().matrixWorld).applyMatrix4(M),k.end.applyMatrix4(bH.getObject().matrixWorld).applyMatrix4(M),T.expandByPoint(k.start),T.expandByPoint(k.end),T.min.addScalar(-1),T.max.addScalar(1);var t=!1;oA.geometry.boundsTree.shapecast({intersectsBounds:function(e){return e.intersectsBox(T)},intersectsTriangle:function(e){var n=E,r=S,i=e.closestPointToSegment(k,n,r);if(i<1){t=!0;var a=1-i,o=r.sub(n).normalize();k.start.addScaledVector(o,a),k.end.addScaledVector(o,a)}}});var n=E;n.copy(k.start).applyMatrix4(oA.matrixWorld);var r=S;r.subVectors(n,bH.getObject().position);var i=Math.max(0,r.length()-.1);r.normalize().multiplyScalar(i),t?(bH.getObject().position.add(r),iP(!!(f||h||d||p)),r.y<1&&r.y>0&&(xH.y=.01)):iP(!1)}bH.getObject().position.y<-25&&EH()}s.render(o,gH),requestAnimationFrame(dH);for(var g=Math.min(r.getDelta(),.5),y=0;y<2;y++)if(v(g/2),oA&&ZP)for(var b=0;b<3;b++)VP(g/5,oA);Rz?hH.position.set(Math.floor(bH.getObject().position.x),Math.floor(bH.getObject().position.y),Math.floor(bH.getObject().position.z)):hH.position.set(bH.getObject().position.x,bH.getObject().position.y,bH.getObject().position.z),fH.position.set(bH.getObject().position.x,bH.getObject().position.y,bH.getObject().position.z)},window.addEventListener("resize",(function(){e=window.innerHeight,t=window.innerWidth,yH.aspect=t/e,yH.updateProjectionMatrix(),aH.setSize(t,e),aH.setPixelRatio(1),wH&&pH&&wH.setSize(t,e),gH.aspect=t/e,gH.updateProjectionMatrix(),s.setSize(t,e),s.setPixelRatio(1),document.getElementById("vidsem")&&(document.getElementById("vidsem").width=.25*window.innerWidth)}))}(),yN({native:!0,nativeRequestType:"generatorList"}),mz(),(0,Fb.request)("https://data.objkt.com/v3/graphql",(0,Fb.gql)(CO||(CO=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n      query {\n        token(\n          where: {\n            tags: { tag: { name: { _eq: "anaverse-gallery" } } }\n            supply: { _gt: "0" }\n          }\n          limit: 500\n        ) {\n          name\n          description\n          creators {\n            creator_address\n            holder {\n              address\n              alias\n              logo\n              twitter\n              tzdomain\n            }\n          }\n          fa_contract\n          token_id\n          artifact_uri\n          thumbnail_uri\n          holders {\n            holder_address\n          }\n        }\n      }\n    '])))).then((function(e){var t=[],n=[];e.token.forEach((function(e){var r="https://assets.objkt.media/file/assets-003/"+e.artifact_uri.replace("ipfs://","")+"/artifact",i=!0;e.holders.forEach((function(e){"tz1burnburnburnburnburnburnburjAYjjX"===e.holder_address&&(i=!1)})),i&&(n.push(e.creators[0].creator_address),t.push({galurl:r,contract:e.fa_contract,id:e.token_id,curator:e.creators[0].creator_address,thumbnail:e.thumbnail_uri,artifact:e.artifact_uri,item:e}))})),LR(n).then((function(){return jO.postMessage({type:"remote",galleryURLs:t})})),setTimeout(qR,2500)})),window.testBox=function(e,t){t||(t=ZR());var n=1.75*window.innerHeight;return cF.postMessage({side:n,skyurl:e,hash:t}),console.info("Loading test skybox")},window.testRoom=function(e,t,n){t||(t=ZR()),n||(n="Test Room"),WF.postMessage({figuresUrl:e,hash:t,type:"world",tag:{room:!0},name:n})},window.testFirstPerson=function(e,t,n){t||(t=ZR()),WF.postMessage({figuresUrl:e,hash:t,type:"firstPerson",tag:{firstPerson:!0},name:n})},window.testItem=function(e,t,n){t||(t=ZR()),WF.postMessage({figuresUrl:e,hash:t,type:"world",tag:{item:!0},name:n})},window.testPeinture=function(e){return SP([e])},window.testCommune=function(e,t,n,r){if(r||(r=10),!t){t=[];for(var i=0;i<r;i++)t.push(ZR())}n||(n="Test commune"),WF.postMessage({figuresUrl:e,hash:t,type:"world",tag:{room:!0},name:n})}})()})();
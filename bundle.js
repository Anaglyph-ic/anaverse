/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={332:function(e,t){var n="undefined"!=typeof self?self:this,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,i="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,a="ArrayBuffer"in e;if(a)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&r&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n,i=p(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,n=f(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=c(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[c(e)]},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},d.prototype.set=function(e,t){this.map[c(e)]=u(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},i&&(d.prototype[Symbol.iterator]=d.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function x(e,t){var n,i,r=(t=t||{}).body;if(e instanceof x){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(i=(n=t.method||this.method||"GET").toUpperCase(),v.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}})),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},y.call(x.prototype),y.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];w.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function M(e,n){return new Promise((function(i,s){var a=new x(e,n);if(a.signal&&a.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function l(){o.abort()}o.onload=function(){var e,t,n={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}})),t)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var r="response"in o?o.response:o.responseText;i(new w(r,n))},o.onerror=function(){s(new TypeError("Network request failed"))},o.ontimeout=function(){s(new TypeError("Network request failed"))},o.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},o.open(a.method,a.url,!0),"include"===a.credentials?o.withCredentials=!0:"omit"===a.credentials&&(o.withCredentials=!1),"responseType"in o&&r&&(o.responseType="blob"),a.headers.forEach((function(e,t){o.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",l),o.onreadystatechange=function(){4===o.readyState&&a.signal.removeEventListener("abort",l)}),o.send(void 0===a._bodyInit?null:a._bodyInit)}))}M.polyfill=!0,e.fetch||(e.fetch=M,e.Headers=d,e.Request=x,e.Response=w),t.Headers=d,t.Request=x,t.Response=w,t.fetch=M,Object.defineProperty(t,"__esModule",{value:!0})}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var r=i;(t=r.fetch).default=r.fetch,t.fetch=r.fetch,t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response,e.exports=t},1928:e=>{"use strict";var t={single_source_shortest_paths:function(e,n,i){var r={},s={};s[n]=0;var a,o,l,c,u,h,d,p=t.PriorityQueue.make();for(p.push(n,0);!p.empty();)for(l in o=(a=p.pop()).value,c=a.cost,u=e[o]||{})u.hasOwnProperty(l)&&(h=c+u[l],d=s[l],(void 0===s[l]||d>h)&&(s[l]=h,p.push(l,h),r[l]=o));if(void 0!==i&&void 0===s[i]){var f=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(f)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],i=t;i;)n.push(i),e[i],i=e[i];return n.reverse(),n},find_path:function(e,n,i){var r=t.single_source_shortest_paths(e,n,i);return t.extract_shortest_path_from_predecessor_list(r,i)},PriorityQueue:{make:function(e){var n,i=t.PriorityQueue,r={};for(n in e=e||{},i)i.hasOwnProperty(n)&&(r[n]=i[n]);return r.queue=[],r.sorter=e.sorter||i.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},1156:e=>{"use strict";e.exports=function(e){for(var t=[],n=e.length,i=0;i<n;i++){var r=e.charCodeAt(i);if(r>=55296&&r<=56319&&n>i+1){var s=e.charCodeAt(i+1);s>=56320&&s<=57343&&(r=1024*(r-55296)+s-56320+65536,i+=1)}r<128?t.push(r):r<2048?(t.push(r>>6|192),t.push(63&r|128)):r<55296||r>=57344&&r<65536?(t.push(r>>12|224),t.push(r>>6&63|128),t.push(63&r|128)):r>=65536&&r<=1114111?(t.push(r>>18|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},2656:e=>{"use strict";e.exports=function(e){var t=e.uri,n=e.name,i=e.type;this.uri=t,this.name=n,this.type=i}},316:(e,t,n)=>{"use strict";var i=n(1148);e.exports=function e(t,n,r){var s;void 0===n&&(n=""),void 0===r&&(r=i);var a=new Map;function o(e,t){var n=a.get(t);n?n.push.apply(n,e):a.set(t,e)}if(r(t))s=null,o([n],t);else{var l=n?n+".":"";if("undefined"!=typeof FileList&&t instanceof FileList)s=Array.prototype.map.call(t,(function(e,t){return o([""+l+t],e),null}));else if(Array.isArray(t))s=t.map((function(t,n){var i=e(t,""+l+n,r);return i.files.forEach(o),i.clone}));else if(t&&t.constructor===Object)for(var c in s={},t){var u=e(t[c],""+l+c,r);u.files.forEach(o),s[c]=u.clone}else s=t}return{clone:s,files:a}}},6128:(e,t,n)=>{"use strict";t.ReactNativeFile=n(2656),t.extractFiles=n(316),t.isExtractableFile=n(1148)},1148:(e,t,n)=>{"use strict";var i=n(2656);e.exports=function(e){return"undefined"!=typeof File&&e instanceof File||"undefined"!=typeof Blob&&e instanceof Blob||e instanceof i}},3956:e=>{e.exports="object"==typeof self?self.FormData:window.FormData},2976:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(6128),s=i(n(3956)),a=function(e){return r.isExtractableFile(e)||null!==e&&"object"==typeof e&&"function"==typeof e.pipe};t.default=function(e,t,n){var i=r.extractFiles({query:e,variables:t,operationName:n},"",a),o=i.clone,l=i.files;if(0===l.size){if(!Array.isArray(e))return JSON.stringify(o);if(void 0!==t&&!Array.isArray(t))throw new Error("Cannot create request body with given variable type, array expected");var c=e.reduce((function(e,n,i){return e.push({query:n,variables:t?t[i]:void 0}),e}),[]);return JSON.stringify(c)}var u=new("undefined"==typeof FormData?s.default:FormData);u.append("operations",JSON.stringify(o));var h={},d=0;return l.forEach((function(e){h[++d]=e})),u.append("map",JSON.stringify(h)),d=0,l.forEach((function(e,t){u.append(""+ ++d,t)})),u}},3896:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,i,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},c=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.gql=t.batchRequests=t.request=t.rawRequest=t.GraphQLClient=t.ClientError=void 0;var h=a(n(332)),d=h,p=n(4352),f=u(n(2976)),m=n(4832);Object.defineProperty(t,"ClientError",{enumerable:!0,get:function(){return m.ClientError}});var g=function(e){var t={};return e&&("undefined"!=typeof Headers&&e instanceof Headers||e instanceof d.Headers?t=function(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}(e):Array.isArray(e)?e.forEach((function(e){var n=e[0],i=e[1];t[n]=i})):t=e),t},y=function(e){return e.replace(/([\s,]|#[^\n\r]+)+/g," ").trim()},v=function(e){var t=e.url,n=e.query,r=e.variables,s=e.operationName,a=e.headers,c=e.fetch,u=e.fetchOptions;return o(void 0,void 0,void 0,(function(){var e;return l(this,(function(o){switch(o.label){case 0:return e=f.default(n,r,s),[4,c(t,i({method:"POST",headers:i(i({},"string"==typeof e?{"Content-Type":"application/json"}:{}),a),body:e},u))];case 1:return[2,o.sent()]}}))}))},x=function(e){var t=e.url,n=e.query,r=e.variables,s=e.operationName,a=e.headers,c=e.fetch,u=e.fetchOptions;return o(void 0,void 0,void 0,(function(){var e;return l(this,(function(o){switch(o.label){case 0:return e=function(e){var t=e.query,n=e.variables,i=e.operationName;if(!Array.isArray(t)){var r=["query="+encodeURIComponent(y(t))];return n&&r.push("variables="+encodeURIComponent(JSON.stringify(n))),i&&r.push("operationName="+encodeURIComponent(i)),r.join("&")}if(void 0!==n&&!Array.isArray(n))throw new Error("Cannot create query with given variable type, array expected");var s=t.reduce((function(e,t,i){return e.push({query:y(t),variables:n?JSON.stringify(n[i]):void 0}),e}),[]);return"query="+encodeURIComponent(JSON.stringify(s))}({query:n,variables:r,operationName:s}),[4,c(t+"?"+e,i({method:"GET",headers:a},u))];case 1:return[2,o.sent()]}}))}))},b=function(){function e(e,t){this.url=e,this.options=t||{}}return e.prototype.rawRequest=function(e,t,n){var r=this.options,s=r.headers,a=r.fetch,o=void 0===a?h.default:a,l=r.method,u=void 0===l?"POST":l,d=c(r,["headers","fetch","method"]);return w({url:this.url,query:e,variables:t,headers:i(i({},g(s)),g(n)),operationName:void 0,fetch:o,method:u,fetchOptions:d})},e.prototype.request=function(e,t,n){return o(this,void 0,void 0,(function(){var r,s,a,o,u,d,p,f,m,y,v;return l(this,(function(l){switch(l.label){case 0:return r=this.options,s=r.headers,a=r.fetch,o=void 0===a?h.default:a,u=r.method,d=void 0===u?"POST":u,p=c(r,["headers","fetch","method"]),f=this.url,m=E(e),y=m.query,v=m.operationName,[4,w({url:f,query:y,variables:t,headers:i(i({},g(s)),g(n)),operationName:v,fetch:o,method:d,fetchOptions:p})];case 1:return[2,l.sent().data]}}))}))},e.prototype.batchRequests=function(e,t){return o(this,void 0,void 0,(function(){var n,r,s,a,o,u,d,p,f,m;return l(this,(function(l){switch(l.label){case 0:return n=this.options,r=n.headers,s=n.fetch,a=void 0===s?h.default:s,o=n.method,u=void 0===o?"POST":o,d=c(n,["headers","fetch","method"]),p=this.url,f=e.map((function(e){return E(e.document).query})),m=e.map((function(e){return e.variables})),[4,w({url:p,query:f,variables:m,headers:i(i({},g(r)),g(t)),operationName:void 0,fetch:a,method:u,fetchOptions:d})];case 1:return[2,l.sent().data]}}))}))},e.prototype.setHeaders=function(e){return this.options.headers=e,this},e.prototype.setHeader=function(e,t){var n,i=this.options.headers;return i?i[e]=t:this.options.headers=((n={})[e]=t,n),this},e.prototype.setEndpoint=function(e){return this.url=e,this},e}();function w(e){var t=e.url,n=e.query,r=e.variables,s=e.headers,a=e.operationName,c=e.fetch,u=e.method,h=void 0===u?"POST":u,d=e.fetchOptions;return o(this,void 0,void 0,(function(){var e,o,u,p,f,g,y,b;return l(this,(function(l){switch(l.label){case 0:return e="POST"===h.toUpperCase()?v:x,o=Array.isArray(n),[4,e({url:t,query:n,variables:r,operationName:a,headers:s,fetch:c,fetchOptions:d})];case 1:return[4,M(u=l.sent())];case 2:if(p=l.sent(),f=o&&Array.isArray(p)?!p.some((function(e){return!e.data})):!!p.data,u.ok&&!p.errors&&f)return g=u.headers,y=u.status,[2,i(i({},o?{data:p}:p),{headers:g,status:y})];throw b="string"==typeof p?{error:p}:p,new m.ClientError(i(i({},b),{status:u.status,headers:u.headers}),{query:n,variables:r})}}))}))}function _(e,t,n,i){return o(this,void 0,void 0,(function(){return l(this,(function(r){return[2,new b(e).request(t,n,i)]}))}))}function M(e){var t=e.headers.get("Content-Type");return t&&t.startsWith("application/json")?e.json():e.text()}function E(e){var t;if("string"==typeof e)return{query:e};var n=void 0,i=e.definitions.filter((function(e){return"OperationDefinition"===e.kind}));return 1===i.length&&(n=null===(t=i[0].name)||void 0===t?void 0:t.value),{query:p.print(e),operationName:n}}t.GraphQLClient=b,t.rawRequest=function(e,t,n,i){return o(this,void 0,void 0,(function(){return l(this,(function(r){return[2,new b(e).rawRequest(t,n,i)]}))}))},t.request=_,t.batchRequests=function(e,t,n){return o(this,void 0,void 0,(function(){return l(this,(function(i){return[2,new b(e).batchRequests(t,n)]}))}))},t.default=_,t.gql=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.reduce((function(e,n,i){return""+e+n+(i in t?t[i]:"")}),"")}},4832:function(e,t){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ClientError=void 0;var r=function(e){function t(n,i){var r=this,s=t.extractMessage(n)+": "+JSON.stringify({response:n,request:i});return r=e.call(this,s)||this,Object.setPrototypeOf(r,t.prototype),r.response=n,r.request=i,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,t),r}return i(t,e),t.extractMessage=function(e){try{return e.errors[0].message}catch(t){return"GraphQL Error (Code: "+e.status+")"}},t}(Error);t.ClientError=r},4128:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.devAssert=function(e,t){if(!Boolean(e))throw new Error(t)}},3932:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inspect=function(e){return r(e,[])};const n=10,i=2;function r(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,t){if(null===e)return"null";if(t.includes(e))return"[Circular]";const s=[...t,e];if(function(e){return"function"==typeof e.toJSON}(e)){const t=e.toJSON();if(t!==e)return"string"==typeof t?t:r(t,s)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>i)return"[Array]";const s=Math.min(n,e.length),a=e.length-s,o=[];for(let n=0;n<s;++n)o.push(r(e[n],t));return 1===a?o.push("... 1 more item"):a>1&&o.push(`... ${a} more items`),"["+o.join(", ")+"]"}(e,s);return function(e,t){const n=Object.entries(e);if(0===n.length)return"{}";if(t.length>i)return"["+function(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){const t=e.constructor.name;if("string"==typeof t&&""!==t)return t}return t}(e)+"]";const s=n.map((([e,n])=>e+": "+r(n,t)));return"{ "+s.join(", ")+" }"}(e,s)}(e,t);default:return String(e)}}},5120:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Token=t.QueryDocumentKeys=t.OperationTypeNode=t.Location=void 0,t.isNode=function(e){const t=null==e?void 0:e.kind;return"string"==typeof t&&s.has(t)};class n{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}t.Location=n;class i{constructor(e,t,n,i,r,s){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=r,this.value=s,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}t.Token=i;const r={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};t.QueryDocumentKeys=r;const s=new Set(Object.keys(r));let a;t.OperationTypeNode=a,function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"}(a||(t.OperationTypeNode=a={}))},3311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dedentBlockStringLines=function(e){var t;let n=Number.MAX_SAFE_INTEGER,i=null,s=-1;for(let t=0;t<e.length;++t){var a;const o=e[t],l=r(o);l!==o.length&&(i=null!==(a=i)&&void 0!==a?a:t,s=t,0!==t&&l<n&&(n=l))}return e.map(((e,t)=>0===t?e:e.slice(n))).slice(null!==(t=i)&&void 0!==t?t:0,s+1)},t.isPrintableAsBlockString=function(e){if(""===e)return!0;let t=!0,n=!1,i=!0,r=!1;for(let s=0;s<e.length;++s)switch(e.codePointAt(s)){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 11:case 12:case 14:case 15:case 13:return!1;case 10:if(t&&!r)return!1;r=!0,t=!0,n=!1;break;case 9:case 32:n||(n=t);break;default:i&&(i=n),t=!1}return!t&&(!i||!r)},t.printBlockString=function(e,t){const n=e.replace(/"""/g,'\\"""'),r=n.split(/\r\n|[\n\r]/g),s=1===r.length,a=r.length>1&&r.slice(1).every((e=>0===e.length||(0,i.isWhiteSpace)(e.charCodeAt(0)))),o=n.endsWith('\\"""'),l=e.endsWith('"')&&!o,c=e.endsWith("\\"),u=l||c,h=!(null!=t&&t.minimize)&&(!s||e.length>70||u||a||o);let d="";const p=s&&(0,i.isWhiteSpace)(e.charCodeAt(0));return(h&&!p||a)&&(d+="\n"),d+=n,(h||u)&&(d+="\n"),'"""'+d+'"""'};var i=n(2416);function r(e){let t=0;for(;t<e.length&&(0,i.isWhiteSpace)(e.charCodeAt(t));)++t;return t}},2416:(e,t)=>{"use strict";function n(e){return e>=48&&e<=57}function i(e){return e>=97&&e<=122||e>=65&&e<=90}Object.defineProperty(t,"__esModule",{value:!0}),t.isDigit=n,t.isLetter=i,t.isNameContinue=function(e){return i(e)||n(e)||95===e},t.isNameStart=function(e){return i(e)||95===e},t.isWhiteSpace=function(e){return 9===e||32===e}},3252:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.Kind=void 0,t.Kind=n,function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"}(n||(t.Kind=n={}))},3e3:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printString=function(e){return`"${e.replace(n,i)}"`};const n=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function i(e){return r[e.charCodeAt(0)]}const r=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"]},4352:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.print=function(e){return(0,i.visit)(e,a)};var i=n(8040),r=n(3311),s=n(3e3);const a={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>o(e.definitions,"\n\n")},OperationDefinition:{leave(e){const t=c("(",o(e.variableDefinitions,", "),")"),n=o([e.operation,o([e.name,t]),o(e.directives," ")]," ");return("query"===n?"":n+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:n,directives:i})=>e+": "+t+c(" = ",n)+c(" ",o(i," "))},SelectionSet:{leave:({selections:e})=>l(e)},Field:{leave({alias:e,name:t,arguments:n,directives:i,selectionSet:r}){const s=c("",e,": ")+t;let a=s+c("(",o(n,", "),")");return a.length>80&&(a=s+c("(\n",u(o(n,"\n")),"\n)")),o([a,o(i," "),r]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+c(" ",o(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:n})=>o(["...",c("on ",e),o(t," "),n]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:n,directives:i,selectionSet:r})=>`fragment ${e}${c("(",o(n,", "),")")} on ${t} ${c("",o(i," ")," ")}`+r},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?(0,r.printBlockString)(e):(0,s.printString)(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+o(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+o(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+c("(",o(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:n})=>c("",e,"\n")+o(["schema",o(t," "),l(n)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:n})=>c("",e,"\n")+o(["scalar",t,o(n," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:i,fields:r})=>c("",e,"\n")+o(["type",t,c("implements ",o(n," & ")),o(i," "),l(r)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:n,type:i,directives:r})=>c("",e,"\n")+t+(h(n)?c("(\n",u(o(n,"\n")),"\n)"):c("(",o(n,", "),")"))+": "+i+c(" ",o(r," "))},InputValueDefinition:{leave:({description:e,name:t,type:n,defaultValue:i,directives:r})=>c("",e,"\n")+o([t+": "+n,c("= ",i),o(r," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:i,fields:r})=>c("",e,"\n")+o(["interface",t,c("implements ",o(n," & ")),o(i," "),l(r)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:n,types:i})=>c("",e,"\n")+o(["union",t,o(n," "),c("= ",o(i," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:n,values:i})=>c("",e,"\n")+o(["enum",t,o(n," "),l(i)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:n})=>c("",e,"\n")+o([t,o(n," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:n,fields:i})=>c("",e,"\n")+o(["input",t,o(n," "),l(i)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:n,repeatable:i,locations:r})=>c("",e,"\n")+"directive @"+t+(h(n)?c("(\n",u(o(n,"\n")),"\n)"):c("(",o(n,", "),")"))+(i?" repeatable":"")+" on "+o(r," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>o(["extend schema",o(e," "),l(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>o(["extend scalar",e,o(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:i})=>o(["extend type",e,c("implements ",o(t," & ")),o(n," "),l(i)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:i})=>o(["extend interface",e,c("implements ",o(t," & ")),o(n," "),l(i)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:n})=>o(["extend union",e,o(t," "),c("= ",o(n," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:n})=>o(["extend enum",e,o(t," "),l(n)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:n})=>o(["extend input",e,o(t," "),l(n)]," ")}};function o(e,t=""){var n;return null!==(n=null==e?void 0:e.filter((e=>e)).join(t))&&void 0!==n?n:""}function l(e){return c("{\n",u(o(e,"\n")),"\n}")}function c(e,t,n=""){return null!=t&&""!==t?e+t+n:""}function u(e){return c("  ",e.replace(/\n/g,"\n  "))}function h(e){var t;return null!==(t=null==e?void 0:e.some((e=>e.includes("\n"))))&&void 0!==t&&t}},8040:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BREAK=void 0,t.getEnterLeaveForKind=l,t.getVisitFn=function(e,t,n){const{enter:i,leave:r}=l(e,t);return n?r:i},t.visit=function(e,t,n=s.QueryDocumentKeys){const c=new Map;for(const e of Object.values(a.Kind))c.set(e,l(t,e));let u,h,d,p,f=Array.isArray(e),m=[e],g=-1,y=[];const v=[],x=[];let b=e;do{g++;const e=g===m.length,a=e&&0!==y.length;if(e){if(d=0===x.length?void 0:v[v.length-1],h=p,p=x.pop(),a)if(f){h=h.slice();let e=0;for(const[t,n]of y){const i=t-e;null===n?(h.splice(i,1),e++):h[i]=n}}else{h=Object.defineProperties({},Object.getOwnPropertyDescriptors(h));for(const[e,t]of y)h[e]=t}g=u.index,m=u.keys,y=u.edits,f=u.inArray,u=u.prev}else{if(d=p?f?g:m[g]:void 0,h=p?p[d]:b,null==h)continue;p&&v.push(d)}let l;if(!Array.isArray(h)){var w,_;(0,s.isNode)(h)||(0,r.devAssert)(!1,`Invalid AST Node: ${(0,i.inspect)(h)}.`);const n=e?null===(w=c.get(h.kind))||void 0===w?void 0:w.leave:null===(_=c.get(h.kind))||void 0===_?void 0:_.enter;if(l=null==n?void 0:n.call(t,h,d,p,v,x),l===o)break;if(!1===l){if(!e){v.pop();continue}}else if(void 0!==l&&(y.push([d,l]),!e)){if(!(0,s.isNode)(l)){v.pop();continue}h=l}}var M;void 0===l&&a&&y.push([d,h]),e?v.pop():(u={inArray:f,index:g,keys:m,edits:y,prev:u},f=Array.isArray(h),m=f?h:null!==(M=n[h.kind])&&void 0!==M?M:[],g=-1,y=[],p&&x.push(p),p=h)}while(void 0!==u);return 0!==y.length&&(b=y[y.length-1][1]),b},t.visitInParallel=function(e){const t=new Array(e.length).fill(null),n=Object.create(null);for(const i of Object.values(a.Kind)){let r=!1;const s=new Array(e.length).fill(void 0),a=new Array(e.length).fill(void 0);for(let t=0;t<e.length;++t){const{enter:n,leave:o}=l(e[t],i);r||(r=null!=n||null!=o),s[t]=n,a[t]=o}if(!r)continue;const c={enter(...n){const i=n[0];for(let a=0;a<e.length;a++)if(null===t[a]){var r;const l=null===(r=s[a])||void 0===r?void 0:r.apply(e[a],n);if(!1===l)t[a]=i;else if(l===o)t[a]=o;else if(void 0!==l)return l}},leave(...n){const i=n[0];for(let s=0;s<e.length;s++)if(null===t[s]){var r;const i=null===(r=a[s])||void 0===r?void 0:r.apply(e[s],n);if(i===o)t[s]=o;else if(void 0!==i&&!1!==i)return i}else t[s]===i&&(t[s]=null)}};n[i]=c}return n};var i=n(3932),r=n(4128),s=n(5120),a=n(3252);const o=Object.freeze({});function l(e,t){const n=e[t];return"object"==typeof n?n:"function"==typeof n?{enter:n,leave:void 0}:{enter:e.enter,leave:e.leave}}t.BREAK=o},916:(e,t,n)=>{const i=n(3764),r=n(688),s=n(7071),a=n(6756);function o(e,t,n,s,a){const o=[].slice.call(arguments,1),l=o.length,c="function"==typeof o[l-1];if(!c&&!i())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=s=void 0):2!==l||t.getContext||(s=n,n=t,t=void 0),new Promise((function(i,a){try{const a=r.create(n,s);i(e(a,t,s))}catch(e){a(e)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(a=n,n=t,t=s=void 0):3===l&&(t.getContext&&void 0===a?(a=s,s=void 0):(a=s,s=n,n=t,t=void 0));try{const i=r.create(n,s);a(null,e(i,t,s))}catch(e){a(e)}}t.create=r.create,t.toCanvas=o.bind(null,s.render),t.toDataURL=o.bind(null,s.renderToDataURL),t.toString=o.bind(null,(function(e,t,n){return a.render(e,n)}))},3764:e=>{e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},8120:(e,t,n)=>{const i=n(9436).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,n=i(e),r=145===n?26:2*Math.ceil((n-13)/(2*t-2)),s=[n-7];for(let e=1;e<t-1;e++)s[e]=s[e-1]-r;return s.push(6),s.reverse()},t.getPositions=function(e){const n=[],i=t.getRowColCoords(e),r=i.length;for(let e=0;e<r;e++)for(let t=0;t<r;t++)0===e&&0===t||0===e&&t===r-1||e===r-1&&0===t||n.push([i[e],i[t]]);return n}},8512:(e,t,n)=>{const i=n(1768),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(e){this.mode=i.ALPHANUMERIC,this.data=e}s.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*r.indexOf(this.data[t]);n+=r.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(r.indexOf(this.data[t]),6)},e.exports=s},3880:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},7075:e=>{function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,n,i){const r=e*this.size+t;this.data[r]=n,i&&(this.reservedBit[r]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},2032:(e,t,n)=>{const i=n(1156),r=n(1768);function s(e){this.mode=r.BYTE,"string"==typeof e&&(e=i(e)),this.data=new Uint8Array(e)}s.getBitsLength=function(e){return 8*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=s},6496:(e,t,n)=>{const i=n(3616),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case i.L:return r[4*(e-1)+0];case i.M:return r[4*(e-1)+1];case i.Q:return r[4*(e-1)+2];case i.H:return r[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case i.L:return s[4*(e-1)+0];case i.M:return s[4*(e-1)+1];case i.Q:return s[4*(e-1)+2];case i.H:return s[4*(e-1)+3];default:return}}},3616:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return n}}},6027:(e,t,n)=>{const i=n(9436).getSymbolSize;t.getPositions=function(e){const t=i(e);return[[0,0],[t-7,0],[0,t-7]]}},936:(e,t,n)=>{const i=n(9436),r=i.getBCHDigit(1335);t.getEncodedBits=function(e,t){const n=e.bit<<3|t;let s=n<<10;for(;i.getBCHDigit(s)-r>=0;)s^=1335<<i.getBCHDigit(s)-r;return 21522^(n<<10|s)}},5076:(e,t)=>{const n=new Uint8Array(512),i=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,i[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)n[e]=n[e-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return i[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[i[e]+i[t]]}},1744:(e,t,n)=>{const i=n(1768),r=n(9436);function s(e){this.mode=i.KANJI,this.data=e}s.getBitsLength=function(e){return 13*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=r.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=s},3408:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function n(e,n,i){switch(e){case t.Patterns.PATTERN000:return(n+i)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return i%3==0;case t.Patterns.PATTERN011:return(n+i)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(i/3))%2==0;case t.Patterns.PATTERN101:return n*i%2+n*i%3==0;case t.Patterns.PATTERN110:return(n*i%2+n*i%3)%2==0;case t.Patterns.PATTERN111:return(n*i%3+(n+i)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let n=0,i=0,r=0,s=null,a=null;for(let o=0;o<t;o++){i=r=0,s=a=null;for(let l=0;l<t;l++){let t=e.get(o,l);t===s?i++:(i>=5&&(n+=i-5+3),s=t,i=1),t=e.get(l,o),t===a?r++:(r>=5&&(n+=r-5+3),a=t,r=1)}i>=5&&(n+=i-5+3),r>=5&&(n+=r-5+3)}return n},t.getPenaltyN2=function(e){const t=e.size;let n=0;for(let i=0;i<t-1;i++)for(let r=0;r<t-1;r++){const t=e.get(i,r)+e.get(i,r+1)+e.get(i+1,r)+e.get(i+1,r+1);4!==t&&0!==t||n++}return 3*n},t.getPenaltyN3=function(e){const t=e.size;let n=0,i=0,r=0;for(let s=0;s<t;s++){i=r=0;for(let a=0;a<t;a++)i=i<<1&2047|e.get(s,a),a>=10&&(1488===i||93===i)&&n++,r=r<<1&2047|e.get(a,s),a>=10&&(1488===r||93===r)&&n++}return 40*n},t.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let i=0;i<n;i++)t+=e.data[i];return 10*Math.abs(Math.ceil(100*t/n/5)-10)},t.applyMask=function(e,t){const i=t.size;for(let r=0;r<i;r++)for(let s=0;s<i;s++)t.isReserved(s,r)||t.xor(s,r,n(e,s,r))},t.getBestMask=function(e,n){const i=Object.keys(t.Patterns).length;let r=0,s=1/0;for(let a=0;a<i;a++){n(a),t.applyMask(a,e);const i=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(a,e),i<s&&(s=i,r=a)}return r}},1768:(e,t,n)=>{const i=n(3273),r=n(1664);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!i.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return r.testNumeric(e)?t.NUMERIC:r.testAlphanumeric(e)?t.ALPHANUMERIC:r.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return n}}},1512:(e,t,n)=>{const i=n(1768);function r(e){this.mode=i.NUMERIC,this.data=e.toString()}r.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t,n,i;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),i=parseInt(n,10),e.put(i,10);const r=this.data.length-t;r>0&&(n=this.data.substr(t),i=parseInt(n,10),e.put(i,3*r+1))},e.exports=r},2308:(e,t,n)=>{const i=n(5076);t.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let s=0;s<t.length;s++)n[r+s]^=i.mul(e[r],t[s]);return n},t.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const e=n[0];for(let r=0;r<t.length;r++)n[r]^=i.mul(t[r],e);let r=0;for(;r<n.length&&0===n[r];)r++;n=n.slice(r)}return n},t.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let r=0;r<e;r++)n=t.mul(n,new Uint8Array([1,i.exp(r)]));return n}},688:(e,t,n)=>{const i=n(9436),r=n(3616),s=n(3880),a=n(7075),o=n(8120),l=n(6027),c=n(3408),u=n(6496),h=n(4988),d=n(4024),p=n(936),f=n(1768),m=n(48);function g(e,t,n){const i=e.size,r=p.getEncodedBits(t,n);let s,a;for(s=0;s<15;s++)a=1==(r>>s&1),s<6?e.set(s,8,a,!0):s<8?e.set(s+1,8,a,!0):e.set(i-15+s,8,a,!0),s<8?e.set(8,i-s-1,a,!0):s<9?e.set(8,15-s-1+1,a,!0):e.set(8,15-s-1,a,!0);e.set(i-8,8,1,!0)}function y(e,t,n,r){let p;if(Array.isArray(e))p=m.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let i=t;if(!i){const t=m.rawSplit(e);i=d.getBestVersionForData(t,n)}p=m.fromString(e,i||40)}}const y=d.getBestVersionForData(p,n);if(!y)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<y)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+y+".\n")}else t=y;const v=function(e,t,n){const r=new s;n.forEach((function(t){r.put(t.mode.bit,4),r.put(t.getLength(),f.getCharCountIndicator(t.mode,e)),t.write(r)}));const a=8*(i.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const o=(a-r.getLengthInBits())/8;for(let e=0;e<o;e++)r.put(e%2?17:236,8);return function(e,t,n){const r=i.getSymbolTotalCodewords(t),s=r-u.getTotalCodewordsCount(t,n),a=u.getBlocksCount(t,n),o=a-r%a,l=Math.floor(r/a),c=Math.floor(s/a),d=c+1,p=l-c,f=new h(p);let m=0;const g=new Array(a),y=new Array(a);let v=0;const x=new Uint8Array(e.buffer);for(let e=0;e<a;e++){const t=e<o?c:d;g[e]=x.slice(m,m+t),y[e]=f.encode(g[e]),m+=t,v=Math.max(v,t)}const b=new Uint8Array(r);let w,_,M=0;for(w=0;w<v;w++)for(_=0;_<a;_++)w<g[_].length&&(b[M++]=g[_][w]);for(w=0;w<p;w++)for(_=0;_<a;_++)b[M++]=y[_][w];return b}(r,e,t)}(t,n,p),x=i.getSymbolSize(t),b=new a(x);return function(e,t){const n=e.size,i=l.getPositions(t);for(let t=0;t<i.length;t++){const r=i[t][0],s=i[t][1];for(let t=-1;t<=7;t++)if(!(r+t<=-1||n<=r+t))for(let i=-1;i<=7;i++)s+i<=-1||n<=s+i||(t>=0&&t<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===t||6===t)||t>=2&&t<=4&&i>=2&&i<=4?e.set(r+t,s+i,!0,!0):e.set(r+t,s+i,!1,!0))}}(b,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2==0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(b),function(e,t){const n=o.getPositions(t);for(let t=0;t<n.length;t++){const i=n[t][0],r=n[t][1];for(let t=-2;t<=2;t++)for(let n=-2;n<=2;n++)-2===t||2===t||-2===n||2===n||0===t&&0===n?e.set(i+t,r+n,!0,!0):e.set(i+t,r+n,!1,!0)}}(b,t),g(b,n,0),t>=7&&function(e,t){const n=e.size,i=d.getEncodedBits(t);let r,s,a;for(let t=0;t<18;t++)r=Math.floor(t/3),s=t%3+n-8-3,a=1==(i>>t&1),e.set(r,s,a,!0),e.set(s,r,a,!0)}(b,t),function(e,t){const n=e.size;let i=-1,r=n-1,s=7,a=0;for(let o=n-1;o>0;o-=2)for(6===o&&o--;;){for(let n=0;n<2;n++)if(!e.isReserved(r,o-n)){let i=!1;a<t.length&&(i=1==(t[a]>>>s&1)),e.set(r,o-n,i),s--,-1===s&&(a++,s=7)}if(r+=i,r<0||n<=r){r-=i,i=-i;break}}}(b,v),isNaN(r)&&(r=c.getBestMask(b,g.bind(null,b,n))),c.applyMask(r,b),g(b,n,r),{modules:b,version:t,errorCorrectionLevel:n,maskPattern:r,segments:p}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let n,s,a=r.M;return void 0!==t&&(a=r.from(t.errorCorrectionLevel,r.M),n=d.from(t.version),s=c.from(t.maskPattern),t.toSJISFunc&&i.setToSJISFunction(t.toSJISFunc)),y(e,n,a,s)}},4988:(e,t,n)=>{const i=n(2308);function r(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(e){this.degree=e,this.genPoly=i.generateECPolynomial(this.degree)},r.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=i.mod(t,this.genPoly),r=this.degree-n.length;if(r>0){const e=new Uint8Array(this.degree);return e.set(n,r),e}return n},e.exports=r},1664:(e,t)=>{const n="[0-9]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+")(?:.|[\r\n]))+";t.KANJI=new RegExp(i,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(r,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const s=new RegExp("^"+i+"$"),a=new RegExp("^"+n+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return s.test(e)},t.testNumeric=function(e){return a.test(e)},t.testAlphanumeric=function(e){return o.test(e)}},48:(e,t,n)=>{const i=n(1768),r=n(1512),s=n(8512),a=n(2032),o=n(1744),l=n(1664),c=n(9436),u=n(1928);function h(e){return unescape(encodeURIComponent(e)).length}function d(e,t,n){const i=[];let r;for(;null!==(r=e.exec(n));)i.push({data:r[0],index:r.index,mode:t,length:r[0].length});return i}function p(e){const t=d(l.NUMERIC,i.NUMERIC,e),n=d(l.ALPHANUMERIC,i.ALPHANUMERIC,e);let r,s;return c.isKanjiModeEnabled()?(r=d(l.BYTE,i.BYTE,e),s=d(l.KANJI,i.KANJI,e)):(r=d(l.BYTE_KANJI,i.BYTE,e),s=[]),t.concat(n,r,s).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function f(e,t){switch(t){case i.NUMERIC:return r.getBitsLength(e);case i.ALPHANUMERIC:return s.getBitsLength(e);case i.KANJI:return o.getBitsLength(e);case i.BYTE:return a.getBitsLength(e)}}function m(e,t){let n;const l=i.getBestModeForData(e);if(n=i.from(t,l),n!==i.BYTE&&n.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+i.toString(n)+".\n Suggested mode is: "+i.toString(l));switch(n!==i.KANJI||c.isKanjiModeEnabled()||(n=i.BYTE),n){case i.NUMERIC:return new r(e);case i.ALPHANUMERIC:return new s(e);case i.KANJI:return new o(e);case i.BYTE:return new a(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e}),[])},t.fromString=function(e,n){const r=function(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];switch(r.mode){case i.NUMERIC:t.push([r,{data:r.data,mode:i.ALPHANUMERIC,length:r.length},{data:r.data,mode:i.BYTE,length:r.length}]);break;case i.ALPHANUMERIC:t.push([r,{data:r.data,mode:i.BYTE,length:r.length}]);break;case i.KANJI:t.push([r,{data:r.data,mode:i.BYTE,length:h(r.data)}]);break;case i.BYTE:t.push([{data:r.data,mode:i.BYTE,length:h(r.data)}])}}return t}(p(e,c.isKanjiModeEnabled())),s=function(e,t){const n={},r={start:{}};let s=["start"];for(let a=0;a<e.length;a++){const o=e[a],l=[];for(let e=0;e<o.length;e++){const c=o[e],u=""+a+e;l.push(u),n[u]={node:c,lastCount:0},r[u]={};for(let e=0;e<s.length;e++){const a=s[e];n[a]&&n[a].node.mode===c.mode?(r[a][u]=f(n[a].lastCount+c.length,c.mode)-f(n[a].lastCount,c.mode),n[a].lastCount+=c.length):(n[a]&&(n[a].lastCount=c.length),r[a][u]=f(c.length,c.mode)+4+i.getCharCountIndicator(c.mode,t))}}s=l}for(let e=0;e<s.length;e++)r[s[e]].end=0;return{map:r,table:n}}(r,n),a=u.find_path(s.map,"start","end"),o=[];for(let e=1;e<a.length-1;e++)o.push(s.table[a[e]].node);return t.fromArray(o.reduce((function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[]))},t.rawSplit=function(e){return t.fromArray(p(e,c.isKanjiModeEnabled()))}},9436:(e,t)=>{let n;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return i[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},3273:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},4024:(e,t,n)=>{const i=n(9436),r=n(6496),s=n(3616),a=n(1768),o=n(3273),l=i.getBCHDigit(7973);function c(e,t){return a.getCharCountIndicator(e,t)+4}function u(e,t){let n=0;return e.forEach((function(e){const i=c(e.mode,t);n+=i+e.getBitsLength()})),n}t.from=function(e,t){return o.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!o.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=a.BYTE);const s=8*(i.getSymbolTotalCodewords(e)-r.getTotalCodewordsCount(e,t));if(n===a.MIXED)return s;const l=s-c(n,e);switch(n){case a.NUMERIC:return Math.floor(l/10*3);case a.ALPHANUMERIC:return Math.floor(l/11*2);case a.KANJI:return Math.floor(l/13);case a.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){let i;const r=s.from(n,s.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let i=1;i<=40;i++)if(u(e,i)<=t.getCapacity(i,n,a.MIXED))return i}(e,r);if(0===e.length)return 1;i=e[0]}else i=e;return function(e,n,i){for(let r=1;r<=40;r++)if(n<=t.getCapacity(r,i,e))return r}(i.mode,i.getLength(),r)},t.getEncodedBits=function(e){if(!o.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;i.getBCHDigit(t)-l>=0;)t^=7973<<i.getBCHDigit(t)-l;return e<<12|t}},7071:(e,t,n)=>{const i=n(8648);t.render=function(e,t,n){let r=n,s=t;void 0!==r||t&&t.getContext||(r=t,t=void 0),t||(s=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),r=i.getOptions(r);const a=i.getImageWidth(e.modules.size,r),o=s.getContext("2d"),l=o.createImageData(a,a);return i.qrToImageData(l.data,e,r),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(o,s,a),o.putImageData(l,0,0),s},t.renderToDataURL=function(e,n,i){let r=i;void 0!==r||n&&n.getContext||(r=n,n=void 0),r||(r={});const s=t.render(e,n,r),a=r.type||"image/png",o=r.rendererOpts||{};return s.toDataURL(a,o.quality)}},6756:(e,t,n)=>{const i=n(8648);function r(e,t){const n=e.a/255,i=t+'="'+e.hex+'"';return n<1?i+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function s(e,t,n){let i=e+t;return void 0!==n&&(i+=" "+n),i}t.render=function(e,t,n){const a=i.getOptions(t),o=e.modules.size,l=e.modules.data,c=o+2*a.margin,u=a.color.light.a?"<path "+r(a.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",h="<path "+r(a.color.dark,"stroke")+' d="'+function(e,t,n){let i="",r=0,a=!1,o=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),u=Math.floor(l/t);c||a||(a=!0),e[l]?(o++,l>0&&c>0&&e[l-1]||(i+=a?s("M",c+n,.5+u+n):s("m",r,0),r=0,a=!1),c+1<t&&e[l+1]||(i+=s("h",o),o=0)):r++}return i}(l,o,a.margin)+'"/>',d='viewBox="0 0 '+c+" "+c+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+d+' shape-rendering="crispEdges">'+u+h+"</svg>\n";return"function"==typeof n&&n(null,p),p}},8648:(e,t)=>{function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,i=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:i,scale:i?4:r,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){const i=t.getScale(e,n);return Math.floor((e+2*n.margin)*i)},t.qrToImageData=function(e,n,i){const r=n.modules.size,s=n.modules.data,a=t.getScale(r,i),o=Math.floor((r+2*i.margin)*a),l=i.margin*a,c=[i.color.light,i.color.dark];for(let t=0;t<o;t++)for(let n=0;n<o;n++){let u=4*(t*o+n),h=i.color.light;t>=l&&n>=l&&t<o-l&&n<o-l&&(h=c[s[Math.floor((t-l)/a)*r+Math.floor((n-l)/a)]?1:0]),e[u++]=h.r,e[u++]=h.g,e[u++]=h.b,e[u]=h.a}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.u=e=>e+".bundle.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&!e;)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>Ui,AddEquation:()=>ai,AddOperation:()=>Pi,AdditiveAnimationBlendMode:()=>ds,AdditiveBlending:()=>ni,AlphaFormat:()=>mr,AlwaysDepth:()=>Mi,AlwaysStencilFunc:()=>Gs,AmbientLight:()=>Ym,AmbientLightProbe:()=>hg,AnimationAction:()=>Fg,AnimationClip:()=>vm,AnimationLoader:()=>Am,AnimationMixer:()=>Gg,AnimationObjectGroup:()=>Bg,AnimationUtils:()=>sm,ArcCurve:()=>_p,ArrayCamera:()=>Xh,ArrowHelper:()=>Py,Audio:()=>Mg,AudioAnalyser:()=>Ig,AudioContext:()=>lg,AudioListener:()=>_g,AudioLoader:()=>cg,AxesHelper:()=>ky,BackSide:()=>Zn,BasicDepthPacking:()=>vs,BasicShadowMap:()=>jn,Bone:()=>Ud,BooleanKeyframeTrack:()=>hm,Box2:()=>$g,Box3:()=>Ya,Box3Helper:()=>Ay,BoxBufferGeometry:()=>Ny,BoxGeometry:()=>ac,BoxHelper:()=>Ty,BufferAttribute:()=>_l,BufferGeometry:()=>zl,BufferGeometryLoader:()=>tg,ByteType:()=>sr,Cache:()=>bm,Camera:()=>dc,CameraHelper:()=>My,CanvasTexture:()=>xp,CapsuleBufferGeometry:()=>Oy,CapsuleGeometry:()=>Vp,CatmullRomCurve3:()=>Cp,CineonToneMapping:()=>Oi,CircleBufferGeometry:()=>Uy,CircleGeometry:()=>qp,ClampToEdgeWrapping:()=>ji,Clock:()=>gg,Color:()=>dl,ColorKeyframeTrack:()=>dm,ColorManagement:()=>La,CompressedArrayTexture:()=>vp,CompressedTexture:()=>yp,CompressedTextureLoader:()=>Cm,ConeBufferGeometry:()=>By,ConeGeometry:()=>jp,CubeCamera:()=>mc,CubeReflectionMapping:()=>zi,CubeRefractionMapping:()=>Gi,CubeTexture:()=>gc,CubeTextureLoader:()=>Lm,CubeUVReflectionMapping:()=>qi,CubicBezierCurve:()=>Pp,CubicBezierCurve3:()=>kp,CubicInterpolant:()=>om,CullFaceBack:()=>Vn,CullFaceFront:()=>qn,CullFaceFrontBack:()=>Wn,CullFaceNone:()=>Hn,Curve:()=>bp,CurvePath:()=>zp,CustomBlending:()=>si,CustomToneMapping:()=>Bi,CylinderBufferGeometry:()=>Fy,CylinderGeometry:()=>Wp,Cylindrical:()=>Zg,Data3DTexture:()=>Ga,DataArrayTexture:()=>Fa,DataTexture:()=>Bd,DataTextureLoader:()=>Rm,DataUtils:()=>xl,DecrementStencilOp:()=>Ls,DecrementWrapStencilOp:()=>Ps,DefaultLoadingManager:()=>_m,DepthFormat:()=>xr,DepthStencilFormat:()=>br,DepthTexture:()=>Zh,DirectionalLight:()=>Xm,DirectionalLightHelper:()=>by,DiscreteInterpolant:()=>cm,DisplayP3ColorSpace:()=>Ss,DodecahedronBufferGeometry:()=>zy,DodecahedronGeometry:()=>Yp,DoubleSide:()=>Qn,DstAlphaFactor:()=>yi,DstColorFactor:()=>xi,DynamicCopyUsage:()=>Js,DynamicDrawUsage:()=>Vs,DynamicReadUsage:()=>js,EdgesGeometry:()=>$p,EllipseCurve:()=>wp,EqualDepth:()=>Ti,EqualStencilFunc:()=>Os,EquirectangularReflectionMapping:()=>Hi,EquirectangularRefractionMapping:()=>Vi,Euler:()=>Po,EventDispatcher:()=>ea,ExtrudeBufferGeometry:()=>Gy,ExtrudeGeometry:()=>If,FileLoader:()=>Tm,Float16BufferAttribute:()=>Ll,Float32BufferAttribute:()=>Rl,Float64BufferAttribute:()=>Pl,FloatType:()=>ur,Fog:()=>sd,FogExp2:()=>rd,FramebufferTexture:()=>gp,FrontSide:()=>Kn,Frustum:()=>Ec,GLBufferAttribute:()=>jg,GLSL1:()=>Zs,GLSL3:()=>Qs,GreaterDepth:()=>Ci,GreaterEqualDepth:()=>Ai,GreaterEqualStencilFunc:()=>zs,GreaterStencilFunc:()=>Bs,GridHelper:()=>my,Group:()=>Yh,HalfFloatType:()=>hr,HemisphereLight:()=>Dm,HemisphereLightHelper:()=>fy,HemisphereLightProbe:()=>ug,IcosahedronBufferGeometry:()=>Hy,IcosahedronGeometry:()=>Rf,ImageBitmapLoader:()=>ag,ImageLoader:()=>Im,ImageUtils:()=>Pa,IncrementStencilOp:()=>Is,IncrementWrapStencilOp:()=>Rs,InstancedBufferAttribute:()=>Hd,InstancedBufferGeometry:()=>eg,InstancedInterleavedBuffer:()=>Wg,InstancedMesh:()=>Kd,Int16BufferAttribute:()=>Tl,Int32BufferAttribute:()=>Cl,Int8BufferAttribute:()=>Ml,IntType:()=>lr,InterleavedBuffer:()=>od,InterleavedBufferAttribute:()=>cd,Interpolant:()=>am,InterpolateDiscrete:()=>ss,InterpolateLinear:()=>as,InterpolateSmooth:()=>os,InvertStencilOp:()=>ks,KeepStencilOp:()=>As,KeyframeTrack:()=>um,LOD:()=>Cd,LatheBufferGeometry:()=>Vy,LatheGeometry:()=>Hp,Layers:()=>ko,LessDepth:()=>Ei,LessEqualDepth:()=>Si,LessEqualStencilFunc:()=>Us,LessStencilFunc:()=>Ns,Light:()=>km,LightProbe:()=>Zm,Line:()=>ip,Line3:()=>ny,LineBasicMaterial:()=>Zd,LineCurve:()=>Dp,LineCurve3:()=>Np,LineDashedMaterial:()=>Qf,LineLoop:()=>op,LineSegments:()=>ap,LinearEncoding:()=>gs,LinearFilter:()=>$i,LinearInterpolant:()=>lm,LinearMipMapLinearFilter:()=>ir,LinearMipMapNearestFilter:()=>tr,LinearMipmapLinearFilter:()=>nr,LinearMipmapNearestFilter:()=>er,LinearSRGBColorSpace:()=>Es,LinearToneMapping:()=>Di,Loader:()=>Mm,LoaderUtils:()=>$m,LoadingManager:()=>wm,LoopOnce:()=>ns,LoopPingPong:()=>rs,LoopRepeat:()=>is,LuminanceAlphaFormat:()=>vr,LuminanceFormat:()=>yr,MOUSE:()=>zn,Material:()=>ol,MaterialLoader:()=>Qm,MathUtils:()=>fa,Matrix3:()=>ga,Matrix4:()=>_o,MaxEquation:()=>ui,Mesh:()=>rc,MeshBasicMaterial:()=>fl,MeshDepthMaterial:()=>Gh,MeshDistanceMaterial:()=>Hh,MeshLambertMaterial:()=>Kf,MeshMatcapMaterial:()=>Zf,MeshNormalMaterial:()=>Jf,MeshPhongMaterial:()=>Xf,MeshPhysicalMaterial:()=>jf,MeshStandardMaterial:()=>Wf,MeshToonMaterial:()=>Yf,MinEquation:()=>ci,MirroredRepeatWrapping:()=>Xi,MixOperation:()=>Ri,MultiplyBlending:()=>ri,MultiplyOperation:()=>Li,NearestFilter:()=>Yi,NearestMipMapLinearFilter:()=>Qi,NearestMipMapNearestFilter:()=>Ki,NearestMipmapLinearFilter:()=>Zi,NearestMipmapNearestFilter:()=>Ji,NeverDepth:()=>_i,NeverStencilFunc:()=>Ds,NoBlending:()=>ei,NoColorSpace:()=>_s,NoToneMapping:()=>ki,NormalAnimationBlendMode:()=>hs,NormalBlending:()=>ti,NotEqualDepth:()=>Ii,NotEqualStencilFunc:()=>Fs,NumberKeyframeTrack:()=>pm,Object3D:()=>Xo,ObjectLoader:()=>ng,ObjectSpaceNormalMap:()=>ws,OctahedronBufferGeometry:()=>qy,OctahedronGeometry:()=>Pf,OneFactor:()=>di,OneMinusDstAlphaFactor:()=>vi,OneMinusDstColorFactor:()=>bi,OneMinusSrcAlphaFactor:()=>gi,OneMinusSrcColorFactor:()=>fi,OrthographicCamera:()=>Bc,PCFShadowMap:()=>Xn,PCFSoftShadowMap:()=>Yn,PMREMGenerator:()=>jc,Path:()=>Gp,PerspectiveCamera:()=>pc,Plane:()=>wc,PlaneBufferGeometry:()=>Wy,PlaneGeometry:()=>Ac,PlaneHelper:()=>Cy,PointLight:()=>Wm,PointLightHelper:()=>uy,Points:()=>pp,PointsMaterial:()=>lp,PolarGridHelper:()=>gy,PolyhedronBufferGeometry:()=>jy,PolyhedronGeometry:()=>Xp,PositionalAudio:()=>Cg,PropertyBinding:()=>Ug,PropertyMixer:()=>Lg,QuadraticBezierCurve:()=>Op,QuadraticBezierCurve3:()=>Up,Quaternion:()=>qa,QuaternionKeyframeTrack:()=>mm,QuaternionLinearInterpolant:()=>fm,RED_GREEN_RGTC2_Format:()=>es,RED_RGTC1_Format:()=>Qr,REVISION:()=>Fn,RGBADepthPacking:()=>xs,RGBAFormat:()=>gr,RGBAIntegerFormat:()=>Sr,RGBA_ASTC_10x10_Format:()=>Yr,RGBA_ASTC_10x5_Format:()=>Wr,RGBA_ASTC_10x6_Format:()=>jr,RGBA_ASTC_10x8_Format:()=>Xr,RGBA_ASTC_12x10_Format:()=>Jr,RGBA_ASTC_12x12_Format:()=>Kr,RGBA_ASTC_4x4_Format:()=>Ur,RGBA_ASTC_5x4_Format:()=>Br,RGBA_ASTC_5x5_Format:()=>Fr,RGBA_ASTC_6x5_Format:()=>zr,RGBA_ASTC_6x6_Format:()=>Gr,RGBA_ASTC_8x5_Format:()=>Hr,RGBA_ASTC_8x6_Format:()=>Vr,RGBA_ASTC_8x8_Format:()=>qr,RGBA_BPTC_Format:()=>Zr,RGBA_ETC2_EAC_Format:()=>Or,RGBA_PVRTC_2BPPV1_Format:()=>kr,RGBA_PVRTC_4BPPV1_Format:()=>Pr,RGBA_S3TC_DXT1_Format:()=>Ar,RGBA_S3TC_DXT3_Format:()=>Cr,RGBA_S3TC_DXT5_Format:()=>Ir,RGB_ETC1_Format:()=>Dr,RGB_ETC2_Format:()=>Nr,RGB_PVRTC_2BPPV1_Format:()=>Rr,RGB_PVRTC_4BPPV1_Format:()=>Lr,RGB_S3TC_DXT1_Format:()=>Tr,RGFormat:()=>Mr,RGIntegerFormat:()=>Er,RawShaderMaterial:()=>qf,Ray:()=>wo,Raycaster:()=>Xg,RectAreaLight:()=>Jm,RedFormat:()=>wr,RedIntegerFormat:()=>_r,ReinhardToneMapping:()=>Ni,RepeatWrapping:()=>Wi,ReplaceStencilOp:()=>Cs,ReverseSubtractEquation:()=>li,RingBufferGeometry:()=>Xy,RingGeometry:()=>kf,SIGNED_RED_GREEN_RGTC2_Format:()=>ts,SIGNED_RED_RGTC1_Format:()=>$r,SRGBColorSpace:()=>Ms,Scene:()=>ad,ShaderChunk:()=>Cc,ShaderLib:()=>Lc,ShaderMaterial:()=>hc,ShadowMaterial:()=>Vf,Shape:()=>ef,ShapeBufferGeometry:()=>Yy,ShapeGeometry:()=>Df,ShapePath:()=>Dy,ShapeUtils:()=>Tf,ShortType:()=>ar,Skeleton:()=>Gd,SkeletonHelper:()=>ly,SkinnedMesh:()=>Od,Source:()=>ka,Sphere:()=>po,SphereBufferGeometry:()=>Jy,SphereGeometry:()=>Nf,Spherical:()=>Kg,SphericalHarmonics3:()=>Km,SplineCurve:()=>Bp,SpotLight:()=>zm,SpotLightHelper:()=>ry,Sprite:()=>Ed,SpriteMaterial:()=>ud,SrcAlphaFactor:()=>mi,SrcAlphaSaturateFactor:()=>wi,SrcColorFactor:()=>pi,StaticCopyUsage:()=>Ys,StaticDrawUsage:()=>Hs,StaticReadUsage:()=>Ws,StereoCamera:()=>mg,StreamCopyUsage:()=>Ks,StreamDrawUsage:()=>qs,StreamReadUsage:()=>Xs,StringKeyframeTrack:()=>gm,SubtractEquation:()=>oi,SubtractiveBlending:()=>ii,TOUCH:()=>Gn,TangentSpaceNormalMap:()=>bs,TetrahedronBufferGeometry:()=>Ky,TetrahedronGeometry:()=>Of,Texture:()=>Oa,TextureLoader:()=>Pm,TorusBufferGeometry:()=>Zy,TorusGeometry:()=>Uf,TorusKnotBufferGeometry:()=>Qy,TorusKnotGeometry:()=>Bf,Triangle:()=>sl,TriangleFanDrawMode:()=>ms,TriangleStripDrawMode:()=>fs,TrianglesDrawMode:()=>ps,TubeBufferGeometry:()=>$y,TubeGeometry:()=>Ff,TwoPassDoubleSide:()=>$n,UVMapping:()=>Fi,Uint16BufferAttribute:()=>Al,Uint32BufferAttribute:()=>Il,Uint8BufferAttribute:()=>El,Uint8ClampedBufferAttribute:()=>Sl,Uniform:()=>Hg,UniformsGroup:()=>qg,UniformsLib:()=>Ic,UniformsUtils:()=>uc,UnsignedByteType:()=>rr,UnsignedInt248Type:()=>fr,UnsignedIntType:()=>cr,UnsignedShort4444Type:()=>dr,UnsignedShort5551Type:()=>pr,UnsignedShortType:()=>or,VSMShadowMap:()=>Jn,Vector2:()=>ma,Vector3:()=>Wa,Vector4:()=>Ua,VectorKeyframeTrack:()=>ym,VideoTexture:()=>mp,WebGL1Renderer:()=>id,WebGL3DRenderTarget:()=>Ha,WebGLArrayRenderTarget:()=>za,WebGLCubeRenderTarget:()=>yc,WebGLMultipleRenderTargets:()=>Va,WebGLRenderTarget:()=>Ba,WebGLRenderer:()=>nd,WebGLUtils:()=>jh,WireframeGeometry:()=>zf,WrapAroundEnding:()=>us,ZeroCurvatureEnding:()=>ls,ZeroFactor:()=>hi,ZeroSlopeEnding:()=>cs,ZeroStencilOp:()=>Ts,_SRGBAFormat:()=>$s,sRGBEncoding:()=>ys});const t={"Total ANAVER.SE":{dbut:0,fin:0,dure:"NA"},"Code Barre":{dbut:0,fin:0,dure:"NA"},Identit:{dbut:0,fin:0,dure:"NA"},"Liste des Jetons Natifs":{dbut:0,fin:0,dure:"NA"},"Choix alatoire":{dbut:0,fin:0,dure:"NA"},"Tlchargement premier espace":{dbut:0,fin:0,dure:"NA"},"Cration Monde":{dbut:0,fin:0,dure:"NA"},"Galleries Natives":{dbut:0,fin:0,dure:"NA"}};function i(){}function r(e){return null==e?i:function(){return this.querySelector(e)}}function s(){return[]}function a(e){return null==e?s:function(){return this.querySelectorAll(e)}}function o(e){return function(){return this.matches(e)}}function l(e){return function(t){return t.matches(e)}}window.horlogesLog=()=>{console.log("%cTableau de bord des horloges","font-weight:bold;text-decoration:underline;"),console.log("Toutes les dures sont en millisecondes.");for(const e in t)t[e].fin>0?t[e].dure=t[e].fin-t[e].dbut:t[e].dure="NA";console.table(t)};var c=Array.prototype.find;function u(){return this.firstElementChild}var h=Array.prototype.filter;function d(){return Array.from(this.children)}function p(e){return new Array(e.length)}function f(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function m(e,t,n,i,r,s){for(var a,o=0,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],i[o]=a):n[o]=new f(e,s[o]);for(;o<l;++o)(a=t[o])&&(r[o]=a)}function g(e,t,n,i,r,s,a){var o,l,c,u=new Map,h=t.length,d=s.length,p=new Array(h);for(o=0;o<h;++o)(l=t[o])&&(p[o]=c=a.call(l,l.__data__,o,t)+"",u.has(c)?r[o]=l:u.set(c,l));for(o=0;o<d;++o)c=a.call(e,s[o],o,s)+"",(l=u.get(c))?(i[o]=l,l.__data__=s[o],u.delete(c)):n[o]=new f(e,s[o]);for(o=0;o<h;++o)(l=t[o])&&u.get(p[o])===l&&(r[o]=l)}function y(e){return e.__data__}function v(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function x(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}f.prototype={constructor:f,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var b="http://www.w3.org/1999/xhtml";const w={svg:"http://www.w3.org/2000/svg",xhtml:b,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),w.hasOwnProperty(t)?{space:w[t],local:e}:e}function M(e){return function(){this.removeAttribute(e)}}function E(e){return function(){this.removeAttributeNS(e.space,e.local)}}function S(e,t){return function(){this.setAttribute(e,t)}}function T(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function A(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function C(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function I(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function L(e){return function(){this.style.removeProperty(e)}}function R(e,t,n){return function(){this.style.setProperty(e,t,n)}}function P(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function k(e,t){return e.style.getPropertyValue(t)||I(e).getComputedStyle(e,null).getPropertyValue(t)}function D(e){return function(){delete this[e]}}function N(e,t){return function(){this[e]=t}}function O(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function U(e){return e.trim().split(/^|\s+/)}function B(e){return e.classList||new F(e)}function F(e){this._node=e,this._names=U(e.getAttribute("class")||"")}function z(e,t){for(var n=B(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function G(e,t){for(var n=B(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function H(e){return function(){z(this,e)}}function V(e){return function(){G(this,e)}}function q(e,t){return function(){(t.apply(this,arguments)?z:G)(this,e)}}function W(){this.textContent=""}function j(e){return function(){this.textContent=e}}function X(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Y(){this.innerHTML=""}function J(e){return function(){this.innerHTML=e}}function K(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Z(){this.nextSibling&&this.parentNode.appendChild(this)}function Q(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===b&&t.documentElement.namespaceURI===b?t.createElement(e):t.createElementNS(n,e)}}function ee(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function te(e){var t=_(e);return(t.local?ee:$)(t)}function ne(){return null}function ie(){var e=this.parentNode;e&&e.removeChild(this)}function re(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function se(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ae(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,s=t.length;i<s;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function oe(e,t,n){return function(){var i,r=this.__on,s=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),void(i.value=t);this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function le(e,t,n){var i=I(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function ce(e,t){return function(){return le(this,e,t)}}function ue(e,t){return function(){return le(this,e,t.apply(this,arguments))}}F.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var he=[null];function de(e,t){this._groups=e,this._parents=t}function pe(){return new de([[document.documentElement]],he)}de.prototype=pe.prototype={constructor:de,select:function(e){"function"!=typeof e&&(e=r(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var a,o,l=t[s],c=l.length,u=i[s]=new Array(c),h=0;h<c;++h)(a=l[h])&&(o=e.call(a,a.__data__,h,l))&&("__data__"in a&&(o.__data__=a.__data__),u[h]=o);return new de(i,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}(e):a(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o,l=t[s],c=l.length,u=0;u<c;++u)(o=l[u])&&(i.push(e.call(o,o.__data__,u,l)),r.push(o));return new de(i,r)},selectChild:function(e){return this.select(null==e?u:function(e){return function(){return c.call(this.children,e)}}("function"==typeof e?e:l(e)))},selectChildren:function(e){return this.selectAll(null==e?d:function(e){return function(){return h.call(this.children,e)}}("function"==typeof e?e:l(e)))},filter:function(e){"function"!=typeof e&&(e=o(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s,a=t[r],l=a.length,c=i[r]=[],u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&c.push(s);return new de(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,y);var n=t?g:m,i=this._parents,r=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var s=r.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],h=r[c],d=h.length,p=v(e.call(u,u&&u.__data__,c,i)),f=p.length,x=o[c]=new Array(f),b=a[c]=new Array(f);n(u,h,x,b,l[c]=new Array(d),p,t);for(var w,_,M=0,E=0;M<f;++M)if(w=x[M]){for(M>=E&&(E=M+1);!(_=b[E])&&++E<f;);w._next=_||null}}return(a=new de(a,i))._enter=o,a._exit=l,a},enter:function(){return new de(this._enter||this._groups.map(p),this._parents)},exit:function(){return new de(this._exit||this._groups.map(p),this._parents)},join:function(e,t,n){var i=this.enter(),r=this,s=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,a=Math.min(r,s),o=new Array(r),l=0;l<a;++l)for(var c,u=n[l],h=i[l],d=u.length,p=o[l]=new Array(d),f=0;f<d;++f)(c=u[f]||h[f])&&(p[f]=c);for(;l<r;++l)o[l]=n[l];return new de(o,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],s=r.length-1,a=r[s];--s>=0;)(i=r[s])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=x);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a,o=n[s],l=o.length,c=r[s]=new Array(l),u=0;u<l;++u)(a=o[u])&&(c[u]=a);c.sort(t)}return new de(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,s=t[n],a=0,o=s.length;a<o;++a)(r=s[a])&&e.call(r,r.__data__,a,s);return this},attr:function(e,t){var n=_(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?E:M:"function"==typeof t?n.local?C:A:n.local?T:S)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?L:"function"==typeof t?P:R)(e,t,null==n?"":n)):k(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?D:"function"==typeof t?O:N)(e,t)):this.node()[e]},classed:function(e,t){var n=U(e+"");if(arguments.length<2){for(var i=B(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?q:t?H:V)(n,t))},text:function(e){return arguments.length?this.each(null==e?W:("function"==typeof e?X:j)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Y:("function"==typeof e?K:J)(e)):this.node().innerHTML},raise:function(){return this.each(Z)},lower:function(){return this.each(Q)},append:function(e){var t="function"==typeof e?e:te(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:te(e),i=null==t?ne:"function"==typeof t?t:r(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(ie)},clone:function(e){return this.select(e?se:re)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,r,s=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=s.length;if(!(arguments.length<2)){for(o=t?oe:ae,i=0;i<a;++i)this.each(o(s[i],t,n));return this}var o=this.node().__on;if(o)for(var l,c=0,u=o.length;c<u;++c)for(i=0,l=o[c];i<a;++i)if((r=s[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?ue:ce)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,r=e[t],s=0,a=r.length;s<a;++s)(i=r[s])&&(yield i)}};const fe=pe;var me={value:()=>{}};function ge(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new ye(i)}function ye(e){this._=e}function ve(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function xe(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=me,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}ye.prototype=ge.prototype={constructor:ye,on:function(e,t){var n,i,r=this._,s=(i=r,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!i.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,o=s.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=s[a]).type)r[n]=xe(r[n],e.name,t);else if(null==t)for(n in r)r[n]=xe(r[n],e.name,null);return this}for(;++a<o;)if((n=(e=s[a]).type)&&(n=ve(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ye(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),s=0;s<n;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=0,n=(i=this._[e]).length;s<n;++s)i[s].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};const be=ge;var we,_e,Me=0,Ee=0,Se=0,Te=1e3,Ae=0,Ce=0,Ie=0,Le="object"==typeof performance&&performance.now?performance:Date,Re="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Pe(){return Ce||(Re(ke),Ce=Le.now()+Ie)}function ke(){Ce=0}function De(){this._call=this._time=this._next=null}function Ne(e,t,n){var i=new De;return i.restart(e,t,n),i}function Oe(){Ce=(Ae=Le.now())+Ie,Me=Ee=0;try{!function(){Pe(),++Me;for(var e,t=we;t;)(e=Ce-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Me}()}finally{Me=0,function(){for(var e,t,n=we,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:we=t);_e=e,Be(i)}(),Ce=0}}function Ue(){var e=Le.now(),t=e-Ae;t>Te&&(Ie-=t,Ae=e)}function Be(e){Me||(Ee&&(Ee=clearTimeout(Ee)),e-Ce>24?(e<1/0&&(Ee=setTimeout(Oe,e-Le.now()-Ie)),Se&&(Se=clearInterval(Se))):(Se||(Ae=Le.now(),Se=setInterval(Ue,Te)),Me=1,Re(Oe)))}function Fe(e,t,n){var i=new De;return t=null==t?0:+t,i.restart((n=>{i.stop(),e(n+t)}),t,n),i}De.prototype=Ne.prototype={constructor:De,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Pe():+n)+(null==t?0:+t),this._next||_e===this||(_e?_e._next=this:we=this,_e=this),this._call=e,this._time=n,Be()},stop:function(){this._call&&(this._call=null,this._time=1/0,Be())}};var ze=be("start","end","cancel","interrupt"),Ge=[],He=0,Ve=3;function qe(e,t,n,i,r,s){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var i,r=e.__transition;function s(l){var c,u,h,d;if(1!==n.state)return o();for(c in r)if((d=r[c]).name===n.name){if(d.state===Ve)return Fe(s);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(Fe((function(){n.state===Ve&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=Ve,i=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=d);i.length=u+1}}function a(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(o),n.state=5,1),s=-1,a=i.length;++s<a;)i[s].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),o())}function o(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=Ne((function(e){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}),0,n.time)}(e,n,{name:t,index:i,group:r,on:ze,tween:Ge,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:He})}function We(e,t){var n=Xe(e,t);if(n.state>He)throw new Error("too late; already scheduled");return n}function je(e,t){var n=Xe(e,t);if(n.state>Ve)throw new Error("too late; already running");return n}function Xe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ye(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Je,Ke=180/Math.PI,Ze={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qe(e,t,n,i,r,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Ke,skewX:Math.atan(l)*Ke,scaleX:a,scaleY:o}}function $e(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(s,a){var o=[],l=[];return s=e(s),a=e(a),function(e,i,r,s,a,o){if(e!==r||i!==s){var l=a.push("translate(",null,t,null,n);o.push({i:l-4,x:Ye(e,r)},{i:l-2,x:Ye(i,s)})}else(r||s)&&a.push("translate("+r+t+s+n)}(s.translateX,s.translateY,a.translateX,a.translateY,o,l),function(e,t,n,s){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),s.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Ye(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}(s.rotate,a.rotate,o,l),function(e,t,n,s){e!==t?s.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Ye(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}(s.skewX,a.skewX,o,l),function(e,t,n,i,s,a){if(e!==n||t!==i){var o=s.push(r(s)+"scale(",null,",",null,")");a.push({i:o-4,x:Ye(e,n)},{i:o-2,x:Ye(t,i)})}else 1===n&&1===i||s.push(r(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,a.scaleX,a.scaleY,o,l),s=a=null,function(e){for(var t,n=-1,i=l.length;++n<i;)o[(t=l[n]).i]=t.x(e);return o.join("")}}}var et=$e((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ze:Qe(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),tt=$e((function(e){return null==e?Ze:(Je||(Je=document.createElementNS("http://www.w3.org/2000/svg","g")),Je.setAttribute("transform",e),(e=Je.transform.baseVal.consolidate())?Qe((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Ze)}),", ",")",")");function nt(e,t){var n,i;return function(){var r=je(this,e),s=r.tween;if(s!==n)for(var a=0,o=(i=n=s).length;a<o;++a)if(i[a].name===t){(i=i.slice()).splice(a,1);break}r.tween=i}}function it(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var s=je(this,e),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=o;break}l===c&&r.push(o)}s.tween=r}}function rt(e,t,n){var i=e._id;return e.each((function(){var e=je(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Xe(e,i).value[t]}}function st(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function at(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function ot(){}var lt=.7,ct=1/lt,ut="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pt=/^#([0-9a-f]{3,8})$/,ft=new RegExp(`^rgb\\(${ut},${ut},${ut}\\)$`),mt=new RegExp(`^rgb\\(${dt},${dt},${dt}\\)$`),gt=new RegExp(`^rgba\\(${ut},${ut},${ut},${ht}\\)$`),yt=new RegExp(`^rgba\\(${dt},${dt},${dt},${ht}\\)$`),vt=new RegExp(`^hsl\\(${ht},${dt},${dt}\\)$`),xt=new RegExp(`^hsla\\(${ht},${dt},${dt},${ht}\\)$`),bt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function wt(){return this.rgb().formatHex()}function _t(){return this.rgb().formatRgb()}function Mt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Et(t):3===n?new At(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?St(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?St(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ft.exec(e))?new At(t[1],t[2],t[3],1):(t=mt.exec(e))?new At(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=gt.exec(e))?St(t[1],t[2],t[3],t[4]):(t=yt.exec(e))?St(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=vt.exec(e))?kt(t[1],t[2]/100,t[3]/100,1):(t=xt.exec(e))?kt(t[1],t[2]/100,t[3]/100,t[4]):bt.hasOwnProperty(e)?Et(bt[e]):"transparent"===e?new At(NaN,NaN,NaN,0):null}function Et(e){return new At(e>>16&255,e>>8&255,255&e,1)}function St(e,t,n,i){return i<=0&&(e=t=n=NaN),new At(e,t,n,i)}function Tt(e,t,n,i){return 1===arguments.length?((r=e)instanceof ot||(r=Mt(r)),r?new At((r=r.rgb()).r,r.g,r.b,r.opacity):new At):new At(e,t,n,null==i?1:i);var r}function At(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function Ct(){return`#${Pt(this.r)}${Pt(this.g)}${Pt(this.b)}`}function It(){const e=Lt(this.opacity);return`${1===e?"rgb(":"rgba("}${Rt(this.r)}, ${Rt(this.g)}, ${Rt(this.b)}${1===e?")":`, ${e})`}`}function Lt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pt(e){return((e=Rt(e))<16?"0":"")+e.toString(16)}function kt(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Nt(e,t,n,i)}function Dt(e){if(e instanceof Nt)return new Nt(e.h,e.s,e.l,e.opacity);if(e instanceof ot||(e=Mt(e)),!e)return new Nt;if(e instanceof Nt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,l=(s+r)/2;return o?(a=t===s?(n-i)/o+6*(n<i):n===s?(i-t)/o+2:(t-n)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new Nt(a,o,l,e.opacity)}function Nt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Ot(e){return(e=(e||0)%360)<0?e+360:e}function Ut(e){return Math.max(0,Math.min(1,e||0))}function Bt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Ft(e,t,n,i,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*i+a*r)/6}st(ot,Mt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wt,formatHex:wt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Dt(this).formatHsl()},formatRgb:_t,toString:_t}),st(At,Tt,at(ot,{brighter(e){return e=null==e?ct:Math.pow(ct,e),new At(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?lt:Math.pow(lt,e),new At(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new At(Rt(this.r),Rt(this.g),Rt(this.b),Lt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ct,formatHex:Ct,formatHex8:function(){return`#${Pt(this.r)}${Pt(this.g)}${Pt(this.b)}${Pt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:It,toString:It})),st(Nt,(function(e,t,n,i){return 1===arguments.length?Dt(e):new Nt(e,t,n,null==i?1:i)}),at(ot,{brighter(e){return e=null==e?ct:Math.pow(ct,e),new Nt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?lt:Math.pow(lt,e),new Nt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new At(Bt(e>=240?e-240:e+120,r,i),Bt(e,r,i),Bt(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Nt(Ot(this.h),Ut(this.s),Ut(this.l),Lt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lt(this.opacity);return`${1===e?"hsl(":"hsla("}${Ot(this.h)}, ${100*Ut(this.s)}%, ${100*Ut(this.l)}%${1===e?")":`, ${e})`}`}}));const zt=e=>()=>e;function Gt(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):zt(isNaN(e)?t:e)}const Ht=function e(t){var n=function(e){return 1==(e=+e)?Gt:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):zt(isNaN(t)?n:t)}}(t);function i(e,t){var i=n((e=Tt(e)).r,(t=Tt(t)).r),r=n(e.g,t.g),s=n(e.b,t.b),a=Gt(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=s(t),e.opacity=a(t),e+""}}return i.gamma=e,i}(1);function Vt(e){return function(t){var n,i,r=t.length,s=new Array(r),a=new Array(r),o=new Array(r);for(n=0;n<r;++n)i=Tt(t[n]),s[n]=i.r||0,a[n]=i.g||0,o[n]=i.b||0;return s=e(s),a=e(a),o=e(o),i.opacity=1,function(e){return i.r=s(e),i.g=a(e),i.b=o(e),i+""}}}Vt((function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],a=i>0?e[i-1]:2*r-s,o=i<t-1?e[i+2]:2*s-r;return Ft((n-i/t)*t,a,r,s,o)}})),Vt((function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],s=e[i%t],a=e[(i+1)%t],o=e[(i+2)%t];return Ft((n-i/t)*t,r,s,a,o)}}));var qt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wt=new RegExp(qt.source,"g");function jt(e,t){var n,i,r,s=qt.lastIndex=Wt.lastIndex=0,a=-1,o=[],l=[];for(e+="",t+="";(n=qt.exec(e))&&(i=Wt.exec(t));)(r=i.index)>s&&(r=t.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:Ye(n,i)})),s=Wt.lastIndex;return s<t.length&&(r=t.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)o[(n=l[i]).i]=n.x(e);return o.join("")})}function Xt(e,t){var n;return("number"==typeof t?Ye:t instanceof Mt?Ht:(n=Mt(t))?(t=n,Ht):jt)(e,t)}function Yt(e){return function(){this.removeAttribute(e)}}function Jt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Kt(e,t,n){var i,r,s=n+"";return function(){var a=this.getAttribute(e);return a===s?null:a===i?r:r=t(i=a,n)}}function Zt(e,t,n){var i,r,s=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===s?null:a===i?r:r=t(i=a,n)}}function Qt(e,t,n){var i,r,s;return function(){var a,o,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(o=l+"")?null:a===i&&o===r?s:(r=o,s=t(i=a,l));this.removeAttribute(e)}}function $t(e,t,n){var i,r,s;return function(){var a,o,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(o=l+"")?null:a===i&&o===r?s:(r=o,s=t(i=a,l));this.removeAttributeNS(e.space,e.local)}}function en(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function tn(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function nn(e,t){return function(){We(this,e).delay=+t.apply(this,arguments)}}function rn(e,t){return t=+t,function(){We(this,e).delay=t}}function sn(e,t){return function(){je(this,e).duration=+t.apply(this,arguments)}}function an(e,t){return t=+t,function(){je(this,e).duration=t}}var on=fe.prototype.constructor;function ln(e){return function(){this.style.removeProperty(e)}}var cn=0;function un(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function hn(){return++cn}var dn=fe.prototype;un.prototype=function(e){return fe().transition(e)}.prototype={constructor:un,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=r(e));for(var i=this._groups,s=i.length,a=new Array(s),o=0;o<s;++o)for(var l,c,u=i[o],h=u.length,d=a[o]=new Array(h),p=0;p<h;++p)(l=u[p])&&(c=e.call(l,l.__data__,p,u))&&("__data__"in l&&(c.__data__=l.__data__),d[p]=c,qe(d[p],t,n,p,d,Xe(l,n)));return new un(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=a(e));for(var i=this._groups,r=i.length,s=[],o=[],l=0;l<r;++l)for(var c,u=i[l],h=u.length,d=0;d<h;++d)if(c=u[d]){for(var p,f=e.call(c,c.__data__,d,u),m=Xe(c,n),g=0,y=f.length;g<y;++g)(p=f[g])&&qe(p,t,n,g,f,m);s.push(f),o.push(c)}return new un(s,o,t,n)},selectChild:dn.selectChild,selectChildren:dn.selectChildren,filter:function(e){"function"!=typeof e&&(e=o(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s,a=t[r],l=a.length,c=i[r]=[],u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&c.push(s);return new un(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var l,c=t[o],u=n[o],h=c.length,d=a[o]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;o<i;++o)a[o]=t[o];return new un(a,this._parents,this._name,this._id)},selection:function(){return new on(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=hn(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a,o=i[s],l=o.length,c=0;c<l;++c)if(a=o[c]){var u=Xe(a,t);qe(a,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new un(i,this._parents,e,n)},call:dn.call,nodes:dn.nodes,node:dn.node,size:dn.size,empty:dn.empty,each:dn.each,on:function(e,t){var n=this._id;return arguments.length<2?Xe(this.node(),n).on.on(e):this.each(function(e,t,n){var i,r,s=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?We:je;return function(){var a=s(this,e),o=a.on;o!==i&&(r=(i=o).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=_(e),i="transform"===n?tt:Xt;return this.attrTween(e,"function"==typeof t?(n.local?$t:Qt)(n,i,rt(this,"attr."+e,t)):null==t?(n.local?Jt:Yt)(n):(n.local?Zt:Kt)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=_(e);return this.tween(n,(i.local?en:tn)(i,t))},style:function(e,t,n){var i="transform"==(e+="")?et:Xt;return null==t?this.styleTween(e,function(e,t){var n,i,r;return function(){var s=k(this,e),a=(this.style.removeProperty(e),k(this,e));return s===a?null:s===n&&a===i?r:r=t(n=s,i=a)}}(e,i)).on("end.style."+e,ln(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,r,s;return function(){var a=k(this,e),o=n(this),l=o+"";return null==o&&(this.style.removeProperty(e),l=o=k(this,e)),a===l?null:a===i&&l===r?s:(r=l,s=t(i=a,o))}}(e,i,rt(this,"style."+e,t))).each(function(e,t){var n,i,r,s,a="style."+t,o="end."+a;return function(){var l=je(this,e),c=l.on,u=null==l.value[a]?s||(s=ln(t)):void 0;c===n&&r===u||(i=(n=c).copy()).on(o,r=u),l.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,r,s=n+"";return function(){var a=k(this,e);return a===s?null:a===i?r:r=t(i=a,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,function(e,t,n){var i,r;function s(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&function(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}(e,s,n)),i}return s._value=t,s}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(rt(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){return function(t){this.textContent=e.call(this,t)}}(i)),t}return i._value=e,i}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=Xe(this.node(),n).tween,s=0,a=r.length;s<a;++s)if((i=r[s]).name===e)return i.value;return null}return this.each((null==t?nt:it)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?nn:rn)(t,e)):Xe(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?sn:an)(t,e)):Xe(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){je(this,e).ease=t}}(t,e)):Xe(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;je(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,i=n._id,r=n.size();return new Promise((function(s,a){var o={value:a},l={value:function(){0==--r&&s()}};n.each((function(){var n=je(this,i),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),n.on=t})),0===r&&s()}))},[Symbol.iterator]:dn[Symbol.iterator]};var pn={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function fn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}fe.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,i,r,s=e.__transition,a=!0;if(s){for(r in t=null==t?null:t+"",s)(n=s[r]).name===t?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete s[r]):a=!1;a&&delete e.__transition}}(this,e)}))},fe.prototype.transition=function(e){var t,n;e instanceof un?(t=e._id,e=e._name):(t=hn(),(n=pn).time=Pe(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a,o=i[s],l=o.length,c=0;c<l;++c)(a=o[c])&&qe(a,e,t,c,o,n||fn(a,t));return new un(i,this._parents,e,t)};const{abs:mn,max:gn,min:yn}=Math;function vn(e){return{type:e}}function xn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}["w","e"].map(vn),["n","s"].map(vn),["n","w","e","s","nw","ne","sw","se"].map(vn);var bn,wn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _n(e){if(!(t=wn.exec(e)))throw new Error("invalid format: "+e);var t;return new Mn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Mn(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function En(e,t){var n=xn(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}_n.prototype=Mn.prototype,Mn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Sn={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>En(100*e,t),r:En,s:function(e,t){var n=xn(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(bn=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+xn(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Tn(e){return e}var An,Cn,In=Array.prototype.map,Ln=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Rn(e){return An=function(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?Tn:(t=In.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,s=[],a=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(e.substring(r-=o,r+o)),!((l+=o+1)>i));)o=t[a=(a+1)%t.length];return s.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Tn:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(In.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=_n(e)).fill,n=e.align,h=e.sign,d=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):Sn[v]||(void 0===g&&(g=12),y=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var x="$"===d?r:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===d?s:/[%p]/.test(v)?l:"",w=Sn[v],_=/[defgprs%]/.test(v);function M(e){var r,s,l,d=x,M=b;if("c"===v)M=w(e)+M,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==h&&(E=!1),d=(E?"("===h?h:c:"-"===h||"("===h?"":h)+d,M=("s"===v?Ln[8+bn/3]:"")+M+(E&&"("===h?")":""),_)for(r=-1,s=e.length;++r<s;)if(48>(l=e.charCodeAt(r))||l>57){M=(46===l?a+e.slice(r+1):e.slice(r))+M,e=e.slice(0,r);break}}m&&!p&&(e=i(e,1/0));var S=d.length+e.length+M.length,T=S<f?new Array(f-S+1).join(t):"";switch(m&&p&&(e=i(T+e,T.length?f-M.length:1/0),T=""),n){case"<":e=d+e+M+T;break;case"=":e=d+T+e+M;break;case"^":e=T.slice(0,S=T.length>>1)+d+e+M+T.slice(S);break;default:e=T+d+e+M}return o(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return e+""},M}return{format:h,formatPrefix:function(e,t){var n=h(((e=_n(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(function(e){return(e=xn(Math.abs(e)))?e[1]:NaN}(t)/3))),r=Math.pow(10,-i),s=Ln[8+i/3];return function(e){return n(r*e)+s}}}}(e),Cn=An.format,An.formatPrefix,An}function Pn(e){return"string"==typeof e?new de([[document.querySelector(e)]],[document.documentElement]):new de([[e]],he)}function kn(e){return Pn(te(e).call(document.documentElement))}function Dn(e,t,n){this.k=e,this.x=t,this.y=n}Rn({thousands:",",grouping:[3],currency:["$",""]}),Dn.prototype={constructor:Dn,scale:function(e){return 1===e?this:new Dn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Dn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Dn(1,0,0),Dn.prototype;var Nn=(new Date).getHours();const On=new URLSearchParams(window.location.search);On.has("nightMode")&&(Nn="night"===On.get("nightMode")?23:8);const Un=[],Bn=Nn<=6||Nn>=20?"screen":"multiply";for(let e=0;e<25;e++)Un.push(parseInt(4*Math.random()));const Fn="152",zn={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Gn={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Hn=0,Vn=1,qn=2,Wn=3,jn=0,Xn=1,Yn=2,Jn=3,Kn=0,Zn=1,Qn=2,$n=2,ei=0,ti=1,ni=2,ii=3,ri=4,si=5,ai=100,oi=101,li=102,ci=103,ui=104,hi=200,di=201,pi=202,fi=203,mi=204,gi=205,yi=206,vi=207,xi=208,bi=209,wi=210,_i=0,Mi=1,Ei=2,Si=3,Ti=4,Ai=5,Ci=6,Ii=7,Li=0,Ri=1,Pi=2,ki=0,Di=1,Ni=2,Oi=3,Ui=4,Bi=5,Fi=300,zi=301,Gi=302,Hi=303,Vi=304,qi=306,Wi=1e3,ji=1001,Xi=1002,Yi=1003,Ji=1004,Ki=1004,Zi=1005,Qi=1005,$i=1006,er=1007,tr=1007,nr=1008,ir=1008,rr=1009,sr=1010,ar=1011,or=1012,lr=1013,cr=1014,ur=1015,hr=1016,dr=1017,pr=1018,fr=1020,mr=1021,gr=1023,yr=1024,vr=1025,xr=1026,br=1027,wr=1028,_r=1029,Mr=1030,Er=1031,Sr=1033,Tr=33776,Ar=33777,Cr=33778,Ir=33779,Lr=35840,Rr=35841,Pr=35842,kr=35843,Dr=36196,Nr=37492,Or=37496,Ur=37808,Br=37809,Fr=37810,zr=37811,Gr=37812,Hr=37813,Vr=37814,qr=37815,Wr=37816,jr=37817,Xr=37818,Yr=37819,Jr=37820,Kr=37821,Zr=36492,Qr=36283,$r=36284,es=36285,ts=36286,ns=2200,is=2201,rs=2202,ss=2300,as=2301,os=2302,ls=2400,cs=2401,us=2402,hs=2500,ds=2501,ps=0,fs=1,ms=2,gs=3e3,ys=3001,vs=3200,xs=3201,bs=0,ws=1,_s="",Ms="srgb",Es="srgb-linear",Ss="display-p3",Ts=0,As=7680,Cs=7681,Is=7682,Ls=7683,Rs=34055,Ps=34056,ks=5386,Ds=512,Ns=513,Os=514,Us=515,Bs=516,Fs=517,zs=518,Gs=519,Hs=35044,Vs=35048,qs=35040,Ws=35045,js=35049,Xs=35041,Ys=35046,Js=35050,Ks=35042,Zs="100",Qs="300 es",$s=1035;class ea{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const ta=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let na=1234567;const ia=Math.PI/180,ra=180/Math.PI;function sa(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ta[255&e]+ta[e>>8&255]+ta[e>>16&255]+ta[e>>24&255]+"-"+ta[255&t]+ta[t>>8&255]+"-"+ta[t>>16&15|64]+ta[t>>24&255]+"-"+ta[63&n|128]+ta[n>>8&255]+"-"+ta[n>>16&255]+ta[n>>24&255]+ta[255&i]+ta[i>>8&255]+ta[i>>16&255]+ta[i>>24&255]).toLowerCase()}function aa(e,t,n){return Math.max(t,Math.min(n,e))}function oa(e,t){return(e%t+t)%t}function la(e,t,n){return(1-n)*e+n*t}function ca(e){return 0==(e&e-1)&&0!==e}function ua(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function ha(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function da(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function pa(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const fa={DEG2RAD:ia,RAD2DEG:ra,generateUUID:sa,clamp:aa,euclideanModulo:oa,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:la,damp:function(e,t,n,i){return la(e,t,1-Math.exp(-n*i))},pingpong:function(e,t=1){return t-Math.abs(oa(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(na=e);let t=na+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*ia},radToDeg:function(e){return e*ra},isPowerOfTwo:ca,ceilPowerOfTwo:ua,floorPowerOfTwo:ha,setQuaternionFromProperEuler:function(e,t,n,i,r){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((t+i)/2),u=a((t+i)/2),h=s((t-i)/2),d=a((t-i)/2),p=s((i-t)/2),f=a((i-t)/2);switch(r){case"XYX":e.set(o*u,l*h,l*d,o*c);break;case"YZY":e.set(l*d,o*u,l*h,o*c);break;case"ZXZ":e.set(l*h,l*d,o*u,o*c);break;case"XZX":e.set(o*u,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*u,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:pa,denormalize:da};class ma{constructor(e=0,t=0){ma.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(aa(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*n-s*i+e.x,this.y=r*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ga{constructor(){ga.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,r,s,a,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],y=i[1],v=i[4],x=i[7],b=i[2],w=i[5],_=i[8];return r[0]=s*f+a*y+o*b,r[3]=s*m+a*v+o*w,r[6]=s*g+a*x+o*_,r[1]=l*f+c*y+u*b,r[4]=l*m+c*v+u*w,r[7]=l*g+c*x+u*_,r[2]=h*f+d*y+p*b,r[5]=h*m+d*v+p*w,r[8]=h*g+d*x+p*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-n*r*c+n*a*o+i*r*l-i*s*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=c*s-a*l,h=a*o-c*r,d=l*r-s*o,p=t*u+n*h+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(a*n-i*s)*f,e[3]=h*f,e[4]=(c*t-i*o)*f,e[5]=(i*r-a*t)*f,e[6]=d*f,e[7]=(n*o-l*t)*f,e[8]=(s*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(ya.makeScale(e,t)),this}rotate(e){return this.premultiply(ya.makeRotation(-e)),this}translate(e,t){return this.premultiply(ya.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const ya=new ga;function va(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const xa={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ba(e,t){return new xa[e](t)}function wa(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}const _a={};function Ma(e){e in _a||(_a[e]=!0,console.warn(e))}function Ea(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Sa(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const Ta=(new ga).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Aa=(new ga).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Ca={[Es]:e=>e,[Ms]:e=>e.convertSRGBToLinear(),[Ss]:function(e){return e.convertSRGBToLinear().applyMatrix3(Aa)}},Ia={[Es]:e=>e,[Ms]:e=>e.convertLinearToSRGB(),[Ss]:function(e){return e.applyMatrix3(Ta).convertLinearToSRGB()}},La={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return Es},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=Ca[t],r=Ia[n];if(void 0===i||void 0===r)throw new Error(`Unsupported color space conversion, "${t}" to "${n}".`);return r(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};let Ra;class Pa{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ra&&(Ra=wa("canvas")),Ra.width=e.width,Ra.height=e.height;const n=Ra.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ra}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=wa("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*Ea(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Ea(t[e]/255)):t[e]=Ea(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ka{constructor(e=null){this.isSource=!0,this.uuid=sa(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Da(i[t].image)):e.push(Da(i[t]))}else e=Da(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function Da(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Pa.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Na=0;class Oa extends ea{constructor(e=Oa.DEFAULT_IMAGE,t=Oa.DEFAULT_MAPPING,n=ji,i=ji,r=$i,s=nr,a=gr,o=rr,l=Oa.DEFAULT_ANISOTROPY,c=_s){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Na++}),this.uuid=sa(),this.name="",this.source=new ka(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new ma(0,0),this.repeat=new ma(1,1),this.center=new ma(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ga,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof c?this.colorSpace=c:(Ma("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===ys?Ms:_s),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Fi)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Wi:e.x=e.x-Math.floor(e.x);break;case ji:e.x=e.x<0?0:1;break;case Xi:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Wi:e.y=e.y-Math.floor(e.y);break;case ji:e.y=e.y<0?0:1;break;case Xi:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Ma("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Ms?ys:gs}set encoding(e){Ma("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ys?Ms:_s}}Oa.DEFAULT_IMAGE=null,Oa.DEFAULT_MAPPING=Fi,Oa.DEFAULT_ANISOTROPY=1;class Ua{constructor(e=0,t=0,n=0,i=1){Ua.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const s=.01,a=.1,o=e.elements,l=o[0],c=o[4],u=o[8],h=o[1],d=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-h)<s&&Math.abs(u-f)<s&&Math.abs(p-m)<s){if(Math.abs(c+h)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(d+1)/2,y=(g+1)/2,v=(c+h)/4,x=(u+f)/4,b=(p+m)/4;return e>o&&e>y?e<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=v/n,r=x/n):o>y?o<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=v/i,r=b/i):y<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(y),n=x/r,i=b/r),this.set(n,i,r,t),this}let y=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(y)<.001&&(y=1),this.x=(m-p)/y,this.y=(u-f)/y,this.z=(h-c)/y,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ba extends ea{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ua(0,0,e,t),this.scissorTest=!1,this.viewport=new Ua(0,0,e,t);const i={width:e,height:t,depth:1};void 0!==n.encoding&&(Ma("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===ys?Ms:_s),this.texture=new Oa(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:$i,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ka(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Fa extends Oa{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Yi,this.minFilter=Yi,this.wrapR=ji,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class za extends Ba{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Fa(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Ga extends Oa{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Yi,this.minFilter=Yi,this.wrapR=ji,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ha extends Ba{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Ga(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Va extends Ba{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const r=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=r.clone(),this.texture[e].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class qa{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,s,a){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[s+0],d=r[s+1],p=r[s+2],f=r[s+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||o!==h||l!==d||c!==p){let e=1-a;const t=o*h+l*d+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,t*n);e=Math.sin(e*s)/r,a=Math.sin(a*s)/r}const r=a*n;if(o=o*e+h*r,l=l*e+d*r,c=c*e+p*r,u=u*e+f*r,e===1-a){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,s){const a=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[s],h=r[s+1],d=r[s+2],p=r[s+3];return e[t]=a*p+c*u+o*d-l*h,e[t+1]=o*p+c*h+l*u-a*d,e[t+2]=l*p+c*d+a*h-o*u,e[t+3]=c*p-a*u-o*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,r=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=o(n/2),d=o(i/2),p=o(r/2);switch(s){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(s-i)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-o)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(r+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(r-l)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(s-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(aa(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+s*a+i*l-r*o,this._y=i*c+s*o+r*a-n*l,this._z=r*c+s*l+n*o-i*a,this._w=s*c-n*a-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,s=this._w;let a=s*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=s*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Wa{constructor(e=0,t=0,n=0){Wa.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Xa.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Xa.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*i-a*n,c=o*n+a*t-r*i,u=o*i+r*n-s*t,h=-r*t-s*n-a*i;return this.x=l*o+h*-r+c*-a-u*-s,this.y=c*o+h*-s+u*-r-l*-a,this.z=u*o+h*-a+l*-s-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ja.copy(this).projectOnVector(e),this.sub(ja)}reflect(e){return this.sub(ja.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(aa(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ja=new Wa,Xa=new qa;class Ya{constructor(e=new Wa(1/0,1/0,1/0),t=new Wa(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Ka.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Ka.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ka.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),Za.copy(e.boundingBox),Za.applyMatrix4(e.matrixWorld),this.union(Za);else{const n=e.geometry;if(void 0!==n)if(t&&void 0!==n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,i=t.count;n<i;n++)Ka.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(Ka)}else null===n.boundingBox&&n.computeBoundingBox(),Za.copy(n.boundingBox),Za.applyMatrix4(e.matrixWorld),this.union(Za)}const n=e.children;for(let e=0,i=n.length;e<i;e++)this.expandByObject(n[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ka),Ka.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ro),so.subVectors(this.max,ro),Qa.subVectors(e.a,ro),$a.subVectors(e.b,ro),eo.subVectors(e.c,ro),to.subVectors($a,Qa),no.subVectors(eo,$a),io.subVectors(Qa,eo);let t=[0,-to.z,to.y,0,-no.z,no.y,0,-io.z,io.y,to.z,0,-to.x,no.z,0,-no.x,io.z,0,-io.x,-to.y,to.x,0,-no.y,no.x,0,-io.y,io.x,0];return!!lo(t,Qa,$a,eo,so)&&(t=[1,0,0,0,1,0,0,0,1],!!lo(t,Qa,$a,eo,so)&&(ao.crossVectors(to,no),t=[ao.x,ao.y,ao.z],lo(t,Qa,$a,eo,so)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ka).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Ka).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Ja[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ja[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ja[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ja[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ja[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ja[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ja[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ja[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ja)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ja=[new Wa,new Wa,new Wa,new Wa,new Wa,new Wa,new Wa,new Wa],Ka=new Wa,Za=new Ya,Qa=new Wa,$a=new Wa,eo=new Wa,to=new Wa,no=new Wa,io=new Wa,ro=new Wa,so=new Wa,ao=new Wa,oo=new Wa;function lo(e,t,n,i,r){for(let s=0,a=e.length-3;s<=a;s+=3){oo.fromArray(e,s);const a=r.x*Math.abs(oo.x)+r.y*Math.abs(oo.y)+r.z*Math.abs(oo.z),o=t.dot(oo),l=n.dot(oo),c=i.dot(oo);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const co=new Ya,uo=new Wa,ho=new Wa;class po{constructor(e=new Wa,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):co.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;uo.subVectors(e,this.center);const t=uo.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(uo,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(ho.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(uo.copy(e.center).add(ho)),this.expandByPoint(uo.copy(e.center).sub(ho))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const fo=new Wa,mo=new Wa,go=new Wa,yo=new Wa,vo=new Wa,xo=new Wa,bo=new Wa;class wo{constructor(e=new Wa,t=new Wa(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,fo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=fo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(fo.copy(this.origin).addScaledVector(this.direction,t),fo.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){mo.copy(e).add(t).multiplyScalar(.5),go.copy(t).sub(e).normalize(),yo.copy(this.origin).sub(mo);const r=.5*e.distanceTo(t),s=-this.direction.dot(go),a=yo.dot(this.direction),o=-yo.dot(go),l=yo.lengthSq(),c=Math.abs(1-s*s);let u,h,d,p;if(c>0)if(u=s*o-a,h=s*a-o,p=r*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+s*h+2*a)+h*(s*u+h+2*o)+l}else h=r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;else h=-r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;else h<=-p?(u=Math.max(0,-(-s*r+a)),h=u>0?-r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l):h<=p?(u=0,h=Math.min(Math.max(-r,-o),r),d=h*(h+2*o)+l):(u=Math.max(0,-(s*r+a)),h=u>0?r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l);else h=s>0?-r:r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(mo).addScaledVector(go,h),d}intersectSphere(e,t){fo.subVectors(e.center,this.origin);const n=fo.dot(this.direction),i=fo.dot(fo)-n*n,r=e.radius*e.radius;if(i>r)return null;const s=Math.sqrt(r-i),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,s=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,s=(e.min.y-h.y)*c),n>s||r>i?null:((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),u>=0?(a=(e.min.z-h.z)*u,o=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,o=(e.min.z-h.z)*u),n>o||a>i?null:((a>n||n!=n)&&(n=a),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,fo)}intersectTriangle(e,t,n,i,r){vo.subVectors(t,e),xo.subVectors(n,e),bo.crossVectors(vo,xo);let s,a=this.direction.dot(bo);if(a>0){if(i)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}yo.subVectors(this.origin,e);const o=s*this.direction.dot(xo.crossVectors(yo,xo));if(o<0)return null;const l=s*this.direction.dot(vo.cross(yo));if(l<0)return null;if(o+l>a)return null;const c=-s*yo.dot(bo);return c<0?null:this.at(c/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class _o{constructor(){_o.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,r,s,a,o,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new _o).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Mo.setFromMatrixColumn(e,0).length(),r=1/Mo.setFromMatrixColumn(e,1).length(),s=1/Mo.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=s*c,n=s*u,i=a*c,r=a*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-a*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=s*o}else if("YXZ"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e+r*a,t[4]=i*a-n,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-a,t[2]=n*a-i,t[6]=r+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e-r*a,t[4]=-s*u,t[8]=i+n*a,t[1]=n+i*a,t[5]=s*c,t[9]=r-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*c,n=s*u,i=a*c,r=a*u;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=s*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=a*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(So,e,To)}lookAt(e,t,n){const i=this.elements;return Io.subVectors(e,t),0===Io.lengthSq()&&(Io.z=1),Io.normalize(),Ao.crossVectors(n,Io),0===Ao.lengthSq()&&(1===Math.abs(n.z)?Io.x+=1e-4:Io.z+=1e-4,Io.normalize(),Ao.crossVectors(n,Io)),Ao.normalize(),Co.crossVectors(Io,Ao),i[0]=Ao.x,i[4]=Co.x,i[8]=Io.x,i[1]=Ao.y,i[5]=Co.y,i[9]=Io.y,i[2]=Ao.z,i[6]=Co.z,i[10]=Io.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],y=n[3],v=n[7],x=n[11],b=n[15],w=i[0],_=i[4],M=i[8],E=i[12],S=i[1],T=i[5],A=i[9],C=i[13],I=i[2],L=i[6],R=i[10],P=i[14],k=i[3],D=i[7],N=i[11],O=i[15];return r[0]=s*w+a*S+o*I+l*k,r[4]=s*_+a*T+o*L+l*D,r[8]=s*M+a*A+o*R+l*N,r[12]=s*E+a*C+o*P+l*O,r[1]=c*w+u*S+h*I+d*k,r[5]=c*_+u*T+h*L+d*D,r[9]=c*M+u*A+h*R+d*N,r[13]=c*E+u*C+h*P+d*O,r[2]=p*w+f*S+m*I+g*k,r[6]=p*_+f*T+m*L+g*D,r[10]=p*M+f*A+m*R+g*N,r[14]=p*E+f*C+m*P+g*O,r[3]=y*w+v*S+x*I+b*k,r[7]=y*_+v*T+x*L+b*D,r[11]=y*M+v*A+x*R+b*N,r[15]=y*E+v*C+x*P+b*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*o*u-i*l*u-r*a*h+n*l*h+i*a*d-n*o*d)+e[7]*(+t*o*d-t*l*h+r*s*h-i*s*d+i*l*c-r*o*c)+e[11]*(+t*l*u-t*a*d-r*s*u+n*s*d+r*a*c-n*l*c)+e[15]*(-i*a*c-t*o*u+t*a*h+i*s*u-n*s*h+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],y=u*m*l-f*h*l+f*o*d-a*m*d-u*o*g+a*h*g,v=p*h*l-c*m*l-p*o*d+s*m*d+c*o*g-s*h*g,x=c*f*l-p*u*l+p*a*d-s*f*d-c*a*g+s*u*g,b=p*u*o-c*f*o-p*a*h+s*f*h+c*a*m-s*u*m,w=t*y+n*v+i*x+r*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/w;return e[0]=y*_,e[1]=(f*h*r-u*m*r-f*i*d+n*m*d+u*i*g-n*h*g)*_,e[2]=(a*m*r-f*o*r+f*i*l-n*m*l-a*i*g+n*o*g)*_,e[3]=(u*o*r-a*h*r-u*i*l+n*h*l+a*i*d-n*o*d)*_,e[4]=v*_,e[5]=(c*m*r-p*h*r+p*i*d-t*m*d-c*i*g+t*h*g)*_,e[6]=(p*o*r-s*m*r-p*i*l+t*m*l+s*i*g-t*o*g)*_,e[7]=(s*h*r-c*o*r+c*i*l-t*h*l-s*i*d+t*o*d)*_,e[8]=x*_,e[9]=(p*u*r-c*f*r-p*n*d+t*f*d+c*n*g-t*u*g)*_,e[10]=(s*f*r-p*a*r+p*n*l-t*f*l-s*n*g+t*a*g)*_,e[11]=(c*a*r-s*u*r-c*n*l+t*u*l+s*n*d-t*a*d)*_,e[12]=b*_,e[13]=(c*f*i-p*u*i+p*n*h-t*f*h-c*n*m+t*u*m)*_,e[14]=(p*a*i-s*f*i-p*n*o+t*f*o+s*n*m-t*a*m)*_,e[15]=(s*u*i-c*a*i+c*n*o-t*u*o-s*n*h+t*a*h)*_,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,a=e.y,o=e.z,l=r*s,c=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+n,c*o-i*s,0,l*o-i*a,c*o+i*s,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,s){return this.set(1,n,r,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,s=t._y,a=t._z,o=t._w,l=r+r,c=s+s,u=a+a,h=r*l,d=r*c,p=r*u,f=s*c,m=s*u,g=a*u,y=o*l,v=o*c,x=o*u,b=n.x,w=n.y,_=n.z;return i[0]=(1-(f+g))*b,i[1]=(d+x)*b,i[2]=(p-v)*b,i[3]=0,i[4]=(d-x)*w,i[5]=(1-(h+g))*w,i[6]=(m+y)*w,i[7]=0,i[8]=(p+v)*_,i[9]=(m-y)*_,i[10]=(1-(h+f))*_,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Mo.set(i[0],i[1],i[2]).length();const s=Mo.set(i[4],i[5],i[6]).length(),a=Mo.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Eo.copy(this);const o=1/r,l=1/s,c=1/a;return Eo.elements[0]*=o,Eo.elements[1]*=o,Eo.elements[2]*=o,Eo.elements[4]*=l,Eo.elements[5]*=l,Eo.elements[6]*=l,Eo.elements[8]*=c,Eo.elements[9]*=c,Eo.elements[10]*=c,t.setFromRotationMatrix(Eo),n.x=r,n.y=s,n.z=a,this}makePerspective(e,t,n,i,r,s){const a=this.elements,o=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),h=-(s+r)/(s-r),d=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,r,s){const a=this.elements,o=1/(t-e),l=1/(n-i),c=1/(s-r),u=(t+e)*o,h=(n+i)*l,d=(s+r)*c;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Mo=new Wa,Eo=new _o,So=new Wa(0,0,0),To=new Wa(1,1,1),Ao=new Wa,Co=new Wa,Io=new Wa,Lo=new _o,Ro=new qa;class Po{constructor(e=0,t=0,n=0,i=Po.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],s=i[4],a=i[8],o=i[1],l=i[5],c=i[9],u=i[2],h=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(aa(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-aa(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(aa(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-aa(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(aa(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-aa(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Lo.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Lo,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ro.setFromEuler(this),this.setFromQuaternion(Ro,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Po.DEFAULT_ORDER="XYZ";class ko{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Do=0;const No=new Wa,Oo=new qa,Uo=new _o,Bo=new Wa,Fo=new Wa,zo=new Wa,Go=new qa,Ho=new Wa(1,0,0),Vo=new Wa(0,1,0),qo=new Wa(0,0,1),Wo={type:"added"},jo={type:"removed"};class Xo extends ea{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Do++}),this.uuid=sa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xo.DEFAULT_UP.clone();const e=new Wa,t=new Po,n=new qa,i=new Wa(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new _o},normalMatrix:{value:new ga}}),this.matrix=new _o,this.matrixWorld=new _o,this.matrixAutoUpdate=Xo.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Xo.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ko,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Oo.setFromAxisAngle(e,t),this.quaternion.multiply(Oo),this}rotateOnWorldAxis(e,t){return Oo.setFromAxisAngle(e,t),this.quaternion.premultiply(Oo),this}rotateX(e){return this.rotateOnAxis(Ho,e)}rotateY(e){return this.rotateOnAxis(Vo,e)}rotateZ(e){return this.rotateOnAxis(qo,e)}translateOnAxis(e,t){return No.copy(e).applyQuaternion(this.quaternion),this.position.add(No.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ho,e)}translateY(e){return this.translateOnAxis(Vo,e)}translateZ(e){return this.translateOnAxis(qo,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Uo.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Bo.copy(e):Bo.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Fo.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Uo.lookAt(Fo,Bo,this.up):Uo.lookAt(Bo,Fo,this.up),this.quaternion.setFromRotationMatrix(Uo),i&&(Uo.extractRotation(i.matrixWorld),Oo.setFromRotationMatrix(Uo),this.quaternion.premultiply(Oo.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Wo)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(jo)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(jo)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Uo.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Uo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Uo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(e,t);r.length>0&&(n=n.concat(r))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fo,e,zo),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fo,Go,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=s(e.geometries),i=s(e.materials),r=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),c=s(e.animations),u=s(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function s(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}Xo.DEFAULT_UP=new Wa(0,1,0),Xo.DEFAULT_MATRIX_AUTO_UPDATE=!0,Xo.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Yo=new Wa,Jo=new Wa,Ko=new Wa,Zo=new Wa,Qo=new Wa,$o=new Wa,el=new Wa,tl=new Wa,nl=new Wa,il=new Wa;let rl=!1;class sl{constructor(e=new Wa,t=new Wa,n=new Wa){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Yo.subVectors(e,t),i.cross(Yo);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Yo.subVectors(i,t),Jo.subVectors(n,t),Ko.subVectors(e,t);const s=Yo.dot(Yo),a=Yo.dot(Jo),o=Yo.dot(Ko),l=Jo.dot(Jo),c=Jo.dot(Ko),u=s*l-a*a;if(0===u)return r.set(-2,-1,-1);const h=1/u,d=(l*o-a*c)*h,p=(s*c-a*o)*h;return r.set(1-d-p,p,d)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Zo),Zo.x>=0&&Zo.y>=0&&Zo.x+Zo.y<=1}static getUV(e,t,n,i,r,s,a,o){return!1===rl&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),rl=!0),this.getInterpolation(e,t,n,i,r,s,a,o)}static getInterpolation(e,t,n,i,r,s,a,o){return this.getBarycoord(e,t,n,i,Zo),o.setScalar(0),o.addScaledVector(r,Zo.x),o.addScaledVector(s,Zo.y),o.addScaledVector(a,Zo.z),o}static isFrontFacing(e,t,n,i){return Yo.subVectors(n,t),Jo.subVectors(e,t),Yo.cross(Jo).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Yo.subVectors(this.c,this.b),Jo.subVectors(this.a,this.b),.5*Yo.cross(Jo).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return sl.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return!1===rl&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),rl=!0),sl.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}getInterpolation(e,t,n,i,r){return sl.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return sl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let s,a;Qo.subVectors(i,n),$o.subVectors(r,n),tl.subVectors(e,n);const o=Qo.dot(tl),l=$o.dot(tl);if(o<=0&&l<=0)return t.copy(n);nl.subVectors(e,i);const c=Qo.dot(nl),u=$o.dot(nl);if(c>=0&&u<=c)return t.copy(i);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return s=o/(o-c),t.copy(n).addScaledVector(Qo,s);il.subVectors(e,r);const d=Qo.dot(il),p=$o.dot(il);if(p>=0&&d<=p)return t.copy(r);const f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector($o,a);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return el.subVectors(r,i),a=(u-c)/(u-c+(d-p)),t.copy(i).addScaledVector(el,a);const g=1/(m+f+h);return s=f*g,a=h*g,t.copy(n).addScaledVector(Qo,s).addScaledVector($o,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let al=0;class ol extends ea{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:al++}),this.uuid=sa(),this.name="",this.type="Material",this.blending=ti,this.side=Kn,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=mi,this.blendDst=gi,this.blendEquation=ai,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Si,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Gs,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=As,this.stencilZFail=As,this.stencilZPass=As,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ti&&(n.blending=this.blending),this.side!==Kn&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const ll={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cl={h:0,s:0,l:0},ul={h:0,s:0,l:0};function hl(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class dl{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ms){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,La.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=La.workingColorSpace){return this.r=e,this.g=t,this.b=n,La.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=La.workingColorSpace){if(e=oa(e,1),t=aa(t,0,1),n=aa(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=hl(r,i,e+1/3),this.g=hl(r,i,e),this.b=hl(r,i,e-1/3)}return La.toWorkingColorSpace(this,i),this}setStyle(e,t=Ms){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=i[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===r)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ms){const n=ll[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ea(e.r),this.g=Ea(e.g),this.b=Ea(e.b),this}copyLinearToSRGB(e){return this.r=Sa(e.r),this.g=Sa(e.g),this.b=Sa(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ms){return La.fromWorkingColorSpace(pl.copy(this),e),65536*Math.round(aa(255*pl.r,0,255))+256*Math.round(aa(255*pl.g,0,255))+Math.round(aa(255*pl.b,0,255))}getHexString(e=Ms){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=La.workingColorSpace){La.fromWorkingColorSpace(pl.copy(this),t);const n=pl.r,i=pl.g,r=pl.b,s=Math.max(n,i,r),a=Math.min(n,i,r);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const e=s-a;switch(l=c<=.5?e/(s+a):e/(2-s-a),s){case n:o=(i-r)/e+(i<r?6:0);break;case i:o=(r-n)/e+2;break;case r:o=(n-i)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=La.workingColorSpace){return La.fromWorkingColorSpace(pl.copy(this),t),e.r=pl.r,e.g=pl.g,e.b=pl.b,e}getStyle(e=Ms){La.fromWorkingColorSpace(pl.copy(this),e);const t=pl.r,n=pl.g,i=pl.b;return e!==Ms?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(e,t,n){return this.getHSL(cl),cl.h+=e,cl.s+=t,cl.l+=n,this.setHSL(cl.h,cl.s,cl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(cl),e.getHSL(ul);const n=la(cl.h,ul.h,t),i=la(cl.s,ul.s,t),r=la(cl.l,ul.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const pl=new dl;dl.NAMES=ll;class fl extends ol{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new dl(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Li,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ml=gl();function gl(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(i[e]=0,i[256|e]=32768,r[e]=24,r[256|e]=24):t<-14?(i[e]=1024>>-t-14,i[256|e]=1024>>-t-14|32768,r[e]=-t-1,r[256|e]=-t-1):t<=15?(i[e]=t+15<<10,i[256|e]=t+15<<10|32768,r[e]=13,r[256|e]=13):t<128?(i[e]=31744,i[256|e]=64512,r[e]=24,r[256|e]=24):(i[e]=31744,i[256|e]=64512,r[e]=13,r[256|e]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;0==(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,s[e]=t|n}for(let e=1024;e<2048;++e)s[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)a[e]=e<<23;a[31]=1199570944,a[32]=2147483648;for(let e=33;e<63;++e)a[e]=2147483648+(e-32<<23);a[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(o[e]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function yl(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=aa(e,-65504,65504),ml.floatView[0]=e;const t=ml.uint32View[0],n=t>>23&511;return ml.baseTable[n]+((8388607&t)>>ml.shiftTable[n])}function vl(e){const t=e>>10;return ml.uint32View[0]=ml.mantissaTable[ml.offsetTable[t]+(1023&e)]+ml.exponentTable[t],ml.floatView[0]}const xl={toHalfFloat:yl,fromHalfFloat:vl},bl=new Wa,wl=new ma;class _l{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Hs,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)wl.fromBufferAttribute(this,t),wl.applyMatrix3(e),this.setXY(t,wl.x,wl.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)bl.fromBufferAttribute(this,t),bl.applyMatrix3(e),this.setXYZ(t,bl.x,bl.y,bl.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)bl.fromBufferAttribute(this,t),bl.applyMatrix4(e),this.setXYZ(t,bl.x,bl.y,bl.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)bl.fromBufferAttribute(this,t),bl.applyNormalMatrix(e),this.setXYZ(t,bl.x,bl.y,bl.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)bl.fromBufferAttribute(this,t),bl.transformDirection(e),this.setXYZ(t,bl.x,bl.y,bl.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=da(t,this.array)),t}setX(e,t){return this.normalized&&(t=pa(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=da(t,this.array)),t}setY(e,t){return this.normalized&&(t=pa(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=da(t,this.array)),t}setZ(e,t){return this.normalized&&(t=pa(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=da(t,this.array)),t}setW(e,t){return this.normalized&&(t=pa(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=pa(t,this.array),n=pa(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=pa(t,this.array),n=pa(n,this.array),i=pa(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=pa(t,this.array),n=pa(n,this.array),i=pa(i,this.array),r=pa(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Hs&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Ml extends _l{constructor(e,t,n){super(new Int8Array(e),t,n)}}class El extends _l{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Sl extends _l{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Tl extends _l{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Al extends _l{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Cl extends _l{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Il extends _l{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Ll extends _l{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=vl(this.array[e*this.itemSize]);return this.normalized&&(t=da(t,this.array)),t}setX(e,t){return this.normalized&&(t=pa(t,this.array)),this.array[e*this.itemSize]=yl(t),this}getY(e){let t=vl(this.array[e*this.itemSize+1]);return this.normalized&&(t=da(t,this.array)),t}setY(e,t){return this.normalized&&(t=pa(t,this.array)),this.array[e*this.itemSize+1]=yl(t),this}getZ(e){let t=vl(this.array[e*this.itemSize+2]);return this.normalized&&(t=da(t,this.array)),t}setZ(e,t){return this.normalized&&(t=pa(t,this.array)),this.array[e*this.itemSize+2]=yl(t),this}getW(e){let t=vl(this.array[e*this.itemSize+3]);return this.normalized&&(t=da(t,this.array)),t}setW(e,t){return this.normalized&&(t=pa(t,this.array)),this.array[e*this.itemSize+3]=yl(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=pa(t,this.array),n=pa(n,this.array)),this.array[e+0]=yl(t),this.array[e+1]=yl(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=pa(t,this.array),n=pa(n,this.array),i=pa(i,this.array)),this.array[e+0]=yl(t),this.array[e+1]=yl(n),this.array[e+2]=yl(i),this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=pa(t,this.array),n=pa(n,this.array),i=pa(i,this.array),r=pa(r,this.array)),this.array[e+0]=yl(t),this.array[e+1]=yl(n),this.array[e+2]=yl(i),this.array[e+3]=yl(r),this}}class Rl extends _l{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Pl extends _l{constructor(e,t,n){super(new Float64Array(e),t,n)}}let kl=0;const Dl=new _o,Nl=new Xo,Ol=new Wa,Ul=new Ya,Bl=new Ya,Fl=new Wa;class zl extends ea{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:kl++}),this.uuid=sa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(va(e)?Il:Al)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new ga).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Dl.makeRotationFromQuaternion(e),this.applyMatrix4(Dl),this}rotateX(e){return Dl.makeRotationX(e),this.applyMatrix4(Dl),this}rotateY(e){return Dl.makeRotationY(e),this.applyMatrix4(Dl),this}rotateZ(e){return Dl.makeRotationZ(e),this.applyMatrix4(Dl),this}translate(e,t,n){return Dl.makeTranslation(e,t,n),this.applyMatrix4(Dl),this}scale(e,t,n){return Dl.makeScale(e,t,n),this.applyMatrix4(Dl),this}lookAt(e){return Nl.lookAt(e),Nl.updateMatrix(),this.applyMatrix4(Nl.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ol).negate(),this.translate(Ol.x,Ol.y,Ol.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Rl(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ya);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Wa(-1/0,-1/0,-1/0),new Wa(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Ul.setFromBufferAttribute(n),this.morphTargetsRelative?(Fl.addVectors(this.boundingBox.min,Ul.min),this.boundingBox.expandByPoint(Fl),Fl.addVectors(this.boundingBox.max,Ul.max),this.boundingBox.expandByPoint(Fl)):(this.boundingBox.expandByPoint(Ul.min),this.boundingBox.expandByPoint(Ul.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new po);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Wa,1/0);if(e){const n=this.boundingSphere.center;if(Ul.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Bl.setFromBufferAttribute(n),this.morphTargetsRelative?(Fl.addVectors(Ul.min,Bl.min),Ul.expandByPoint(Fl),Fl.addVectors(Ul.max,Bl.max),Ul.expandByPoint(Fl)):(Ul.expandByPoint(Bl.min),Ul.expandByPoint(Bl.max))}Ul.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Fl.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Fl));if(t)for(let r=0,s=t.length;r<s;r++){const s=t[r],a=this.morphTargetsRelative;for(let t=0,r=s.count;t<r;t++)Fl.fromBufferAttribute(s,t),a&&(Ol.fromBufferAttribute(e,t),Fl.add(Ol)),i=Math.max(i,n.distanceToSquared(Fl))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,r=t.normal.array,s=t.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new _l(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<a;e++)l[e]=new Wa,c[e]=new Wa;const u=new Wa,h=new Wa,d=new Wa,p=new ma,f=new ma,m=new ma,g=new Wa,y=new Wa;function v(e,t,n){u.fromArray(i,3*e),h.fromArray(i,3*t),d.fromArray(i,3*n),p.fromArray(s,2*e),f.fromArray(s,2*t),m.fromArray(s,2*n),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(r),y.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(y),c[t].add(y),c[n].add(y))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let e=0,t=x.length;e<t;++e){const t=x[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)v(n[e+0],n[e+1],n[e+2])}const b=new Wa,w=new Wa,_=new Wa,M=new Wa;function E(e){_.fromArray(r,3*e),M.copy(_);const t=l[e];b.copy(t),b.sub(_.multiplyScalar(_.dot(t))).normalize(),w.crossVectors(M,t);const n=w.dot(c[e])<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=n}for(let e=0,t=x.length;e<t;++e){const t=x[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)E(n[e+0]),E(n[e+1]),E(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new _l(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Wa,r=new Wa,s=new Wa,a=new Wa,o=new Wa,l=new Wa,c=new Wa,u=new Wa;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,d),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),o.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Fl.fromBufferAttribute(e,t),Fl.normalize(),e.setXYZ(t,Fl.x,Fl.y,Fl.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,s=new n.constructor(t.length*i);let a=0,o=0;for(let r=0,l=t.length;r<l;r++){a=e.isInterleavedBufferAttribute?t[r]*e.data.stride+e.offset:t[r]*i;for(let e=0;e<i;e++)s[o++]=n[a++]}return new _l(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new zl,n=this.index.array,i=this.attributes;for(const r in i){const s=e(i[r],n);t.setAttribute(r,s)}const r=this.morphAttributes;for(const i in r){const s=[],a=r[i];for(let t=0,i=a.length;t<i;t++){const i=e(a[t],n);s.push(i)}t.morphAttributes[i]=s}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let e=0,n=s.length;e<n;e++){const n=s[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const i=n[t];e.data.attributes[t]=i.toJSON(e.data)}const i={};let r=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],s=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];s.push(i.toJSON(e.data))}s.length>0&&(i[t]=s,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const e in i){const n=i[e];this.setAttribute(e,n.clone(t))}const r=e.morphAttributes;for(const e in r){const n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let e=0,t=s.length;e<t;e++){const t=s[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Gl=new _o,Hl=new wo,Vl=new po,ql=new Wa,Wl=new Wa,jl=new Wa,Xl=new Wa,Yl=new Wa,Jl=new Wa,Kl=new ma,Zl=new ma,Ql=new ma,$l=new Wa,ec=new Wa,tc=new Wa,nc=new Wa,ic=new Wa;class rc extends Xo{constructor(e=new zl,t=new fl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(r&&a){Jl.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=a[n],o=r[n];0!==i&&(Yl.fromBufferAttribute(o,e),s?Jl.addScaledVector(Yl,i):Jl.addScaledVector(Yl.sub(t),i))}t.add(Jl)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),Vl.copy(n.boundingSphere),Vl.applyMatrix4(r),Hl.copy(e.ray).recast(e.near),!1===Vl.containsPoint(Hl.origin)){if(null===Hl.intersectSphere(Vl,ql))return;if(Hl.origin.distanceToSquared(ql)>(e.far-e.near)**2)return}Gl.copy(r).invert(),Hl.copy(e.ray).applyMatrix4(Gl),null!==n.boundingBox&&!1===Hl.intersectsBox(n.boundingBox)||this._computeIntersections(e,t)}}_computeIntersections(e,t){let n;const i=this.geometry,r=this.material,s=i.index,a=i.attributes.position,o=i.attributes.uv,l=i.attributes.uv1,c=i.attributes.normal,u=i.groups,h=i.drawRange;if(null!==s)if(Array.isArray(r))for(let i=0,a=u.length;i<a;i++){const a=u[i],d=r[a.materialIndex];for(let i=Math.max(a.start,h.start),r=Math.min(s.count,Math.min(a.start+a.count,h.start+h.count));i<r;i+=3){const r=s.getX(i),u=s.getX(i+1),h=s.getX(i+2);n=sc(this,d,e,Hl,o,l,c,r,u,h),n&&(n.faceIndex=Math.floor(i/3),n.face.materialIndex=a.materialIndex,t.push(n))}}else for(let i=Math.max(0,h.start),a=Math.min(s.count,h.start+h.count);i<a;i+=3){const a=s.getX(i),u=s.getX(i+1),h=s.getX(i+2);n=sc(this,r,e,Hl,o,l,c,a,u,h),n&&(n.faceIndex=Math.floor(i/3),t.push(n))}else if(void 0!==a)if(Array.isArray(r))for(let i=0,s=u.length;i<s;i++){const s=u[i],d=r[s.materialIndex];for(let i=Math.max(s.start,h.start),r=Math.min(a.count,Math.min(s.start+s.count,h.start+h.count));i<r;i+=3)n=sc(this,d,e,Hl,o,l,c,i,i+1,i+2),n&&(n.faceIndex=Math.floor(i/3),n.face.materialIndex=s.materialIndex,t.push(n))}else for(let i=Math.max(0,h.start),s=Math.min(a.count,h.start+h.count);i<s;i+=3)n=sc(this,r,e,Hl,o,l,c,i,i+1,i+2),n&&(n.faceIndex=Math.floor(i/3),t.push(n))}}function sc(e,t,n,i,r,s,a,o,l,c){e.getVertexPosition(o,Wl),e.getVertexPosition(l,jl),e.getVertexPosition(c,Xl);const u=function(e,t,n,i,r,s,a,o){let l;if(l=t.side===Zn?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,t.side===Kn,o),null===l)return null;ic.copy(o),ic.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(ic);return c<n.near||c>n.far?null:{distance:c,point:ic.clone(),object:e}}(e,t,n,i,Wl,jl,Xl,nc);if(u){r&&(Kl.fromBufferAttribute(r,o),Zl.fromBufferAttribute(r,l),Ql.fromBufferAttribute(r,c),u.uv=sl.getInterpolation(nc,Wl,jl,Xl,Kl,Zl,Ql,new ma)),s&&(Kl.fromBufferAttribute(s,o),Zl.fromBufferAttribute(s,l),Ql.fromBufferAttribute(s,c),u.uv1=sl.getInterpolation(nc,Wl,jl,Xl,Kl,Zl,Ql,new ma),u.uv2=u.uv1),a&&($l.fromBufferAttribute(a,o),ec.fromBufferAttribute(a,l),tc.fromBufferAttribute(a,c),u.normal=sl.getInterpolation(nc,Wl,jl,Xl,$l,ec,tc,new Wa),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const e={a:o,b:l,c,normal:new Wa,materialIndex:0};sl.getNormal(Wl,jl,Xl,e.normal),u.face=e}return u}class ac extends zl{constructor(e=1,t=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const a=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const o=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,n,i,r,s,p,f,m,g,y){const v=s/m,x=p/g,b=s/2,w=p/2,_=f/2,M=m+1,E=g+1;let S=0,T=0;const A=new Wa;for(let s=0;s<E;s++){const a=s*x-w;for(let o=0;o<M;o++){const h=o*v-b;A[e]=h*i,A[t]=a*r,A[n]=_,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(o/m),u.push(1-s/g),S+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+M*e,i=h+t+M*(e+1),r=h+(t+1)+M*(e+1),s=h+(t+1)+M*e;o.push(n,i,s),o.push(i,r,s),T+=6}a.addGroup(d,T,y),d+=T,h+=S}p("z","y","x",-1,-1,n,t,e,s,r,0),p("z","y","x",1,-1,n,t,-e,s,r,1),p("x","z","y",1,1,e,n,t,i,s,2),p("x","z","y",1,-1,e,n,-t,i,s,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new Rl(l,3)),this.setAttribute("normal",new Rl(c,3)),this.setAttribute("uv",new Rl(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ac(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function oc(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function lc(e){const t={};for(let n=0;n<e.length;n++){const i=oc(e[n]);for(const e in i)t[e]=i[e]}return t}function cc(e){return null===e.getRenderTarget()?e.outputColorSpace:Es}const uc={clone:oc,merge:lc};class hc extends ol{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=oc(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class dc extends Xo{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new _o,this.projectionMatrix=new _o,this.projectionMatrixInverse=new _o}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class pc extends dc{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ra*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ia*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ra*Math.atan(Math.tan(.5*ia*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ia*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/e,t-=s.offsetY*n/a,i*=s.width/e,n*=s.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const fc=-90;class mc extends Xo{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const i=new pc(fc,1,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const r=new pc(fc,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);const s=new pc(fc,1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);const a=new pc(fc,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const o=new pc(fc,1,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);const l=new pc(fc,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,s,a,o,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=ki,e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,o),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class gc extends Oa{constructor(e,t,n,i,r,s,a,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:zi,n,i,r,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class yc extends Ba{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];void 0!==t.encoding&&(Ma("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===ys?Ms:_s),this.texture=new gc(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:$i}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new ac(5,5,5),a=new hc({name:"CubemapFromEquirect",uniforms:oc(n),vertexShader:i,fragmentShader:r,side:Zn,blending:ei});a.uniforms.tEquirect.value=t;const o=new rc(s,a),l=t.minFilter;return t.minFilter===nr&&(t.minFilter=$i),new mc(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,i);e.setRenderTarget(r)}}const vc=new Wa,xc=new Wa,bc=new ga;class wc{constructor(e=new Wa(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=vc.subVectors(n,t).cross(xc.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(vc),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||bc.getNormalMatrix(e),i=this.coplanarPoint(vc).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const _c=new po,Mc=new Wa;class Ec{constructor(e=new wc,t=new wc,n=new wc,i=new wc,r=new wc,s=new wc){this.planes=[e,t,n,i,r,s]}set(e,t,n,i,r,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],s=n[2],a=n[3],o=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return t[0].setComponents(a-i,u-o,f-h,v-m).normalize(),t[1].setComponents(a+i,u+o,f+h,v+m).normalize(),t[2].setComponents(a+r,u+l,f+d,v+g).normalize(),t[3].setComponents(a-r,u-l,f-d,v-g).normalize(),t[4].setComponents(a-s,u-c,f-p,v-y).normalize(),t[5].setComponents(a+s,u+c,f+p,v+y).normalize(),this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),_c.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),_c.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_c)}intersectsSprite(e){return _c.center.set(0,0,0),_c.radius=.7071067811865476,_c.applyMatrix4(e.matrixWorld),this.intersectsSphere(_c)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Mc.x=i.normal.x>0?e.max.x:e.min.x,Mc.y=i.normal.y>0?e.max.y:e.min.y,Mc.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Mc)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Sc(){let e=null,t=!1,n=null,i=null;function r(t,s){n(t,s),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Tc(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=i.get(t);void 0===s?i.set(t,function(t,i){const r=t.array,s=t.usage,a=e.createBuffer();let o;if(e.bindBuffer(i,a),e.bufferData(i,r,s),t.onUploadCallback(),r instanceof Float32Array)o=e.FLOAT;else if(r instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=e.HALF_FLOAT}else o=e.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=e.SHORT;else if(r instanceof Uint32Array)o=e.UNSIGNED_INT;else if(r instanceof Int32Array)o=e.INT;else if(r instanceof Int8Array)o=e.BYTE;else if(r instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=e.UNSIGNED_BYTE}return{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,r)):s.version<t.version&&(function(t,i,r){const s=i.array,a=i.updateRange;e.bindBuffer(r,t),-1===a.count?e.bufferSubData(r,0,s):(n?e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1),i.onUploadCallback()}(s.buffer,t,r),s.version=t.version)}}}class Ac extends zl{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,s=t/2,a=Math.floor(n),o=Math.floor(i),l=a+1,c=o+1,u=e/a,h=t/o,d=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*h-s;for(let n=0;n<l;n++){const i=n*u-r;p.push(i,-t,0),f.push(0,0,1),m.push(n/a),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<a;t++){const n=t+l*e,i=t+l*(e+1),r=t+1+l*(e+1),s=t+1+l*e;d.push(n,i,s),d.push(i,r,s)}this.setIndex(d),this.setAttribute("position",new Rl(p,3)),this.setAttribute("normal",new Rl(f,3)),this.setAttribute("uv",new Rl(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ac(e.width,e.height,e.widthSegments,e.heightSegments)}}const Cc={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ic={common:{diffuse:{value:new dl(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ga},alphaMap:{value:null},alphaMapTransform:{value:new ga},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ga}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ga}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ga}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ga},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ga},normalScale:{value:new ma(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ga},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ga}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ga}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ga}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new dl(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new dl(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ga}},sprite:{diffuse:{value:new dl(16777215)},opacity:{value:1},center:{value:new ma(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ga},alphaMap:{value:null},alphaTest:{value:0}}},Lc={basic:{uniforms:lc([Ic.common,Ic.specularmap,Ic.envmap,Ic.aomap,Ic.lightmap,Ic.fog]),vertexShader:Cc.meshbasic_vert,fragmentShader:Cc.meshbasic_frag},lambert:{uniforms:lc([Ic.common,Ic.specularmap,Ic.envmap,Ic.aomap,Ic.lightmap,Ic.emissivemap,Ic.bumpmap,Ic.normalmap,Ic.displacementmap,Ic.fog,Ic.lights,{emissive:{value:new dl(0)}}]),vertexShader:Cc.meshlambert_vert,fragmentShader:Cc.meshlambert_frag},phong:{uniforms:lc([Ic.common,Ic.specularmap,Ic.envmap,Ic.aomap,Ic.lightmap,Ic.emissivemap,Ic.bumpmap,Ic.normalmap,Ic.displacementmap,Ic.fog,Ic.lights,{emissive:{value:new dl(0)},specular:{value:new dl(1118481)},shininess:{value:30}}]),vertexShader:Cc.meshphong_vert,fragmentShader:Cc.meshphong_frag},standard:{uniforms:lc([Ic.common,Ic.envmap,Ic.aomap,Ic.lightmap,Ic.emissivemap,Ic.bumpmap,Ic.normalmap,Ic.displacementmap,Ic.roughnessmap,Ic.metalnessmap,Ic.fog,Ic.lights,{emissive:{value:new dl(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cc.meshphysical_vert,fragmentShader:Cc.meshphysical_frag},toon:{uniforms:lc([Ic.common,Ic.aomap,Ic.lightmap,Ic.emissivemap,Ic.bumpmap,Ic.normalmap,Ic.displacementmap,Ic.gradientmap,Ic.fog,Ic.lights,{emissive:{value:new dl(0)}}]),vertexShader:Cc.meshtoon_vert,fragmentShader:Cc.meshtoon_frag},matcap:{uniforms:lc([Ic.common,Ic.bumpmap,Ic.normalmap,Ic.displacementmap,Ic.fog,{matcap:{value:null}}]),vertexShader:Cc.meshmatcap_vert,fragmentShader:Cc.meshmatcap_frag},points:{uniforms:lc([Ic.points,Ic.fog]),vertexShader:Cc.points_vert,fragmentShader:Cc.points_frag},dashed:{uniforms:lc([Ic.common,Ic.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cc.linedashed_vert,fragmentShader:Cc.linedashed_frag},depth:{uniforms:lc([Ic.common,Ic.displacementmap]),vertexShader:Cc.depth_vert,fragmentShader:Cc.depth_frag},normal:{uniforms:lc([Ic.common,Ic.bumpmap,Ic.normalmap,Ic.displacementmap,{opacity:{value:1}}]),vertexShader:Cc.meshnormal_vert,fragmentShader:Cc.meshnormal_frag},sprite:{uniforms:lc([Ic.sprite,Ic.fog]),vertexShader:Cc.sprite_vert,fragmentShader:Cc.sprite_frag},background:{uniforms:{uvTransform:{value:new ga},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cc.background_vert,fragmentShader:Cc.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Cc.backgroundCube_vert,fragmentShader:Cc.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cc.cube_vert,fragmentShader:Cc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cc.equirect_vert,fragmentShader:Cc.equirect_frag},distanceRGBA:{uniforms:lc([Ic.common,Ic.displacementmap,{referencePosition:{value:new Wa},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cc.distanceRGBA_vert,fragmentShader:Cc.distanceRGBA_frag},shadow:{uniforms:lc([Ic.lights,Ic.fog,{color:{value:new dl(0)},opacity:{value:1}}]),vertexShader:Cc.shadow_vert,fragmentShader:Cc.shadow_frag}};Lc.physical={uniforms:lc([Lc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ga},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ga},clearcoatNormalScale:{value:new ma(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ga},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ga},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ga},sheen:{value:0},sheenColor:{value:new dl(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ga},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ga},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ga},transmissionSamplerSize:{value:new ma},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ga},attenuationDistance:{value:0},attenuationColor:{value:new dl(0)},specularColor:{value:new dl(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ga},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ga}}]),vertexShader:Cc.meshphysical_vert,fragmentShader:Cc.meshphysical_frag};const Rc={r:0,b:0,g:0};function Pc(e,t,n,i,r,s,a){const o=new dl(0);let l,c,u=!0===s?0:1,h=null,d=0,p=null;function f(t,n){t.getRGB(Rc,cc(e)),i.buffers.color.setClear(Rc.r,Rc.g,Rc.b,n,a)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),u=t,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(o,u)},render:function(s,m){let g=!1,y=!0===m.isScene?m.background:null;switch(y&&y.isTexture&&(y=(m.backgroundBlurriness>0?n:t).get(y)),null===y?f(o,u):y&&y.isColor&&(f(y,1),g=!0),e.xr.getEnvironmentBlendMode()){case"opaque":g=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,a),g=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,a),g=!0}(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),y&&(y.isCubeTexture||y.mapping===qi)?(void 0===c&&(c=new rc(new ac(1,1,1),new hc({name:"BackgroundCubeMaterial",uniforms:oc(Lc.backgroundCube.uniforms),vertexShader:Lc.backgroundCube.vertexShader,fragmentShader:Lc.backgroundCube.fragmentShader,side:Zn,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=y.colorSpace!==Ms,h===y&&d===y.version&&p===e.toneMapping||(c.material.needsUpdate=!0,h=y,d=y.version,p=e.toneMapping),c.layers.enableAll(),s.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(void 0===l&&(l=new rc(new Ac(2,2),new hc({name:"BackgroundMaterial",uniforms:oc(Lc.background.uniforms),vertexShader:Lc.background.vertexShader,fragmentShader:Lc.background.fragmentShader,side:Kn,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=y,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=y.colorSpace!==Ms,!0===y.matrixAutoUpdate&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),h===y&&d===y.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=y,d=y.version,p=e.toneMapping),l.layers.enableAll(),s.unshift(l,l.geometry,l.material,0,0,null))}}}function kc(e,t,n,i){const r=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||null!==s,o={},l=p(null);let c=l,u=!1;function h(t){return i.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function d(t){return i.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],i=[];for(let e=0;e<r;e++)t[e]=0,n[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,r){const s=c.newAttributes,a=c.enabledAttributes,o=c.attributeDivisors;s[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),o[n]!==r&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r)}function y(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function v(t,n,r,s,a,o){!0!==i.isWebGL2||r!==e.INT&&r!==e.UNSIGNED_INT?e.vertexAttribPointer(t,n,r,s,a,o):e.vertexAttribIPointer(t,n,r,a,o)}function x(){b(),u=!0,c!==l&&(c=l,h(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,x,b){let w=!1;if(a){const t=function(t,n,r){const a=!0===r.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];return void 0===u&&(u=p(i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),c[a]=u),u}(x,d,l);c!==t&&(c=t,h(c.object)),w=function(e,t,n,i){const r=c.attributes,s=t.attributes;let a=0;const o=n.getAttributes();for(const t in o)if(o[t].location>=0){const n=r[t];let i=s[t];if(void 0===i&&("instanceMatrix"===t&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(i=e.instanceColor)),void 0===n)return!0;if(n.attribute!==i)return!0;if(i&&n.data!==i.data)return!0;a++}return c.attributesNum!==a||c.index!==i}(r,x,d,b),w&&function(e,t,n,i){const r={},s=t.attributes;let a=0;const o=n.getAttributes();for(const t in o)if(o[t].location>=0){let n=s[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const i={};i.attribute=n,n&&n.data&&(i.data=n.data),r[t]=i,a++}c.attributes=r,c.attributesNum=a,c.index=i}(r,x,d,b)}else{const e=!0===l.wireframe;c.geometry===x.id&&c.program===d.id&&c.wireframe===e||(c.geometry=x.id,c.program=d.id,c.wireframe=e,w=!0)}null!==b&&n.update(b,e.ELEMENT_ARRAY_BUFFER),(w||u)&&(u=!1,function(r,s,a,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,c=a.getAttributes(),u=s.defaultAttributeValues;for(const t in c){const i=c[t];if(i.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const t=s.normalized,a=s.itemSize,l=n.get(s);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,l=n.stride,d=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)g(i.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<i.locationSize;e++)m(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)v(i.location+e,a/i.locationSize,u,t,l*h,(d+a/i.locationSize*e)*h)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)g(i.location+e,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<i.locationSize;e++)m(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)v(i.location+e,a/i.locationSize,u,t,a*h,a/i.locationSize*e*h)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i.location,n);break;case 3:e.vertexAttrib3fv(i.location,n);break;case 4:e.vertexAttrib4fv(i.location,n);break;default:e.vertexAttrib1fv(i.location,n)}}}}y()}(r,l,d,x),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(b).buffer))},reset:x,resetDefaultState:b,dispose:function(){x();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)d(i[e].object),delete i[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:y}}function Dc(e,t,n,i){const r=i.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,i){e.drawArrays(s,t,i),n.update(i,s,1)},this.renderInstances=function(i,a,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,i,a,o),n.update(a,s,o)}}function Nc(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const o=r(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=s||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),y=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=h>0,x=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:x,floatVertexTextures:v&&x,maxSamples:s?e.getParameter(e.MAX_SAMPLES):0}}function Oc(e){const t=this;let n=null,i=0,r=!1,s=!1;const a=new wc,o=new ga,l={value:null,needsUpdate:!1};function c(e,n,i,r){const s=null!==e?e.length:0;let c=null;if(0!==s){if(c=l.value,!0!==r||null===c){const t=i+4*s,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=i;t!==s;++t,n+=4)a.copy(e[t]).applyMatrix4(r,o),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,o,u){const h=a.clippingPlanes,d=a.clipIntersection,p=a.clipShadows,f=e.get(a);if(!r||null===h||0===h.length||s&&!p)s?c(null):(l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0);else{const e=s?0:i,t=4*e;let r=f.clippingState||null;l.value=r,r=c(h,o,t,u);for(let e=0;e!==t;++e)r[e]=n[e];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Uc(e){let t=new WeakMap;function n(e,t){return t===Hi?e.mapping=zi:t===Vi&&(e.mapping=Gi),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping;if(s===Hi||s===Vi){if(t.has(r))return n(t.get(r).texture,r.mapping);{const s=r.image;if(s&&s.height>0){const a=new yc(s.height/2);return a.fromEquirectangularTexture(e,r),t.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}class Bc extends dc{constructor(e=-1,t=1,n=1,i=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,s=n+e,a=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,s=r+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Fc=[.125,.215,.35,.446,.526,.582],zc=new Bc,Gc=new dl;let Hc=null;const Vc=(1+Math.sqrt(5))/2,qc=1/Vc,Wc=[new Wa(1,1,1),new Wa(-1,1,1),new Wa(1,1,-1),new Wa(-1,1,-1),new Wa(0,Vc,qc),new Wa(0,Vc,-qc),new Wa(qc,0,Vc),new Wa(-qc,0,Vc),new Wa(Vc,qc,0),new Wa(-Vc,qc,0)];class jc{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){Hc=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Kc(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Jc(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Hc),e.scissorTest=!1,Yc(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===zi||e.mapping===Gi?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Hc=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:$i,minFilter:$i,generateMipmaps:!1,type:hr,format:gr,colorSpace:Es,depthBuffer:!1},i=Xc(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Xc(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const s=e-4+1+Fc.length;for(let a=0;a<s;a++){const s=Math.pow(2,r);n.push(s);let o=1/s;a>e-4?o=Fc[a-e+4-1]:0===a&&(o=0),i.push(o);const l=1/(s-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,f=3,m=2,g=1,y=new Float32Array(f*p*d),v=new Float32Array(m*p*d),x=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];y.set(i,f*p*e),v.set(h,m*p*e);const r=[e,e,e,e,e,e];x.set(r,g*p*e)}const b=new zl;b.setAttribute("position",new _l(y,f)),b.setAttribute("uv",new _l(v,m)),b.setAttribute("faceIndex",new _l(x,g)),t.push(b),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(20),r=new Wa(0,1,0);return new hc({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:ei,depthTest:!1,depthWrite:!1})}(i,e,t)}return i}_compileMaterial(e){const t=new rc(this._lodPlanes[0],e);this._renderer.compile(t,zc)}_sceneToCubeUV(e,t,n,i){const r=new pc(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(Gc),o.toneMapping=ki,o.autoClear=!1;const u=new fl({name:"PMREM.Background",side:Zn,depthWrite:!1,depthTest:!1}),h=new rc(new ac,u);let d=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,d=!0):(u.color.copy(Gc),d=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(r.up.set(0,s[t],0),r.lookAt(a[t],0,0)):1===n?(r.up.set(0,0,s[t]),r.lookAt(0,a[t],0)):(r.up.set(0,s[t],0),r.lookAt(0,0,a[t]));const l=this._cubeSize;Yc(i,n*l,t>2?l:0,l,l),o.setRenderTarget(i),d&&o.render(h,r),o.render(e,r)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===zi||e.mapping===Gi;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=Kc()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Jc());const r=i?this._cubemapMaterial:this._equirectMaterial,s=new rc(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const a=this._cubeSize;Yc(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,zc)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),i=Wc[(t-1)%Wc.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,i,"latitudinal",r),this._halfBlur(s,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new rc(this._lodPlanes[i],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/p,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===s,a&&(u.poleAxis.value=a);const{_lodMax:y}=this;u.dTheta.value=d,u.mipInt.value=y-n;const v=this._sizeLods[i];Yc(t,3*v*(i>y-4?i-y+4:0),4*(this._cubeSize-v),3*v,2*v),o.setRenderTarget(t),o.render(c,zc)}}function Xc(e,t,n){const i=new Ba(e,t,n);return i.texture.mapping=qi,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Yc(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function Jc(){return new hc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:ei,depthTest:!1,depthWrite:!1})}function Kc(){return new hc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:ei,depthTest:!1,depthWrite:!1})}function Zc(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,a=s===Hi||s===Vi,o=s===zi||s===Gi;if(a||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=t.get(r);return null===n&&(n=new jc(e)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),t.set(r,i),i.texture}if(t.has(r))return t.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||o&&s&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(s)){null===n&&(n=new jc(e));const s=a?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,s),r.addEventListener("dispose",i),s.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Qc(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function $c(e,t,n,i){const r={},s=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",a),delete r[o.id];const l=s.get(o);l&&(t.remove(l),s.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],i=e.index,r=e.attributes.position;let a=0;if(null!==i){const e=i.array;a=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],s=e[t+2];n.push(i,r,r,s,s,i)}}else{const e=r.array;a=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}const o=new(va(n)?Il:Al)(n,1);o.version=a;const l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",a),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const n in i)t.update(i[n],e.ARRAY_BUFFER);const r=n.morphAttributes;for(const n in r){const i=r[n];for(let n=0,r=i.length;n<r;n++)t.update(i[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return s.get(e)}}}function eu(e,t,n,i){const r=i.isWebGL2;let s,a,o;this.setMode=function(e){s=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(s,i,a,t*o),n.update(i,s,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,h;if(r)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](s,l,a,i*o,c),n.update(l,s,c)}}function tu(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function nu(e,t){return e[0]-t[0]}function iu(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ru(e,t,n){const i={},r=new Float32Array(8),s=new WeakMap,a=new Ua,o=[];for(let e=0;e<8;e++)o[e]=[e,0];return{update:function(l,c,u){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==d?d.length:0;let f=s.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const y=void 0!==c.morphAttributes.position,v=void 0!==c.morphAttributes.normal,x=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],_=c.morphAttributes.color||[];let M=0;!0===y&&(M=1),!0===v&&(M=2),!0===x&&(M=3);let E=c.attributes.position.count*M,S=1;E>t.maxTextureSize&&(S=Math.ceil(E/t.maxTextureSize),E=t.maxTextureSize);const T=new Float32Array(E*S*4*p),A=new Fa(T,E,S,p);A.type=ur,A.needsUpdate=!0;const C=4*M;for(let L=0;L<p;L++){const R=b[L],P=w[L],k=_[L],D=E*S*4*L;for(let N=0;N<R.count;N++){const O=N*C;!0===y&&(a.fromBufferAttribute(R,N),T[D+O+0]=a.x,T[D+O+1]=a.y,T[D+O+2]=a.z,T[D+O+3]=0),!0===v&&(a.fromBufferAttribute(P,N),T[D+O+4]=a.x,T[D+O+5]=a.y,T[D+O+6]=a.z,T[D+O+7]=0),!0===x&&(a.fromBufferAttribute(k,N),T[D+O+8]=a.x,T[D+O+9]=a.y,T[D+O+10]=a.z,T[D+O+11]=4===k.itemSize?a.w:1)}}function I(){A.dispose(),s.delete(c),c.removeEventListener("dispose",I)}f={count:p,texture:A,size:new ma(E,S)},s.set(c,f),c.addEventListener("dispose",I)}let m=0;for(let U=0;U<h.length;U++)m+=h[U];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",g),u.getUniforms().setValue(e,"morphTargetInfluences",h),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const B=void 0===h?0:h.length;let F=i[c.id];if(void 0===F||F.length!==B){F=[];for(let q=0;q<B;q++)F[q]=[q,0];i[c.id]=F}for(let W=0;W<B;W++){const j=F[W];j[0]=W,j[1]=h[W]}F.sort(iu);for(let X=0;X<8;X++)X<B&&F[X][1]?(o[X][0]=F[X][0],o[X][1]=F[X][1]):(o[X][0]=Number.MAX_SAFE_INTEGER,o[X][1]=0);o.sort(nu);const z=c.morphAttributes.position,G=c.morphAttributes.normal;let H=0;for(let Y=0;Y<8;Y++){const J=o[Y],K=J[0],Z=J[1];K!==Number.MAX_SAFE_INTEGER&&Z?(z&&c.getAttribute("morphTarget"+Y)!==z[K]&&c.setAttribute("morphTarget"+Y,z[K]),G&&c.getAttribute("morphNormal"+Y)!==G[K]&&c.setAttribute("morphNormal"+Y,G[K]),r[Y]=Z,H+=Z):(z&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),G&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),r[Y]=0)}const V=c.morphTargetsRelative?1:1-H;u.getUniforms().setValue(e,"morphTargetBaseInfluence",V),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function su(e,t,n,i){let r=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const o=i.render.frame,l=a.geometry,c=t.get(a,l);return r.get(c)!==o&&(t.update(c),r.set(c,o)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",s)&&a.addEventListener("dispose",s),n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER)),c},dispose:function(){r=new WeakMap}}}const au=new Oa,ou=new Fa,lu=new Ga,cu=new gc,uu=[],hu=[],du=new Float32Array(16),pu=new Float32Array(9),fu=new Float32Array(4);function mu(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let s=uu[r];if(void 0===s&&(s=new Float32Array(r),uu[r]=s),0!==t){i.toArray(s,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(s,r)}return s}function gu(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function yu(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function vu(e,t){let n=hu[t];void 0===n&&(n=new Int32Array(t),hu[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function xu(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function bu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(gu(n,t))return;e.uniform2fv(this.addr,t),yu(n,t)}}function wu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(gu(n,t))return;e.uniform3fv(this.addr,t),yu(n,t)}}function _u(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(gu(n,t))return;e.uniform4fv(this.addr,t),yu(n,t)}}function Mu(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(gu(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),yu(n,t)}else{if(gu(n,i))return;fu.set(i),e.uniformMatrix2fv(this.addr,!1,fu),yu(n,i)}}function Eu(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(gu(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),yu(n,t)}else{if(gu(n,i))return;pu.set(i),e.uniformMatrix3fv(this.addr,!1,pu),yu(n,i)}}function Su(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(gu(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),yu(n,t)}else{if(gu(n,i))return;du.set(i),e.uniformMatrix4fv(this.addr,!1,du),yu(n,i)}}function Tu(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Au(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(gu(n,t))return;e.uniform2iv(this.addr,t),yu(n,t)}}function Cu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(gu(n,t))return;e.uniform3iv(this.addr,t),yu(n,t)}}function Iu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(gu(n,t))return;e.uniform4iv(this.addr,t),yu(n,t)}}function Lu(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ru(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(gu(n,t))return;e.uniform2uiv(this.addr,t),yu(n,t)}}function Pu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(gu(n,t))return;e.uniform3uiv(this.addr,t),yu(n,t)}}function ku(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(gu(n,t))return;e.uniform4uiv(this.addr,t),yu(n,t)}}function Du(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||au,r)}function Nu(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||lu,r)}function Ou(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||cu,r)}function Uu(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||ou,r)}function Bu(e,t){e.uniform1fv(this.addr,t)}function Fu(e,t){const n=mu(t,this.size,2);e.uniform2fv(this.addr,n)}function zu(e,t){const n=mu(t,this.size,3);e.uniform3fv(this.addr,n)}function Gu(e,t){const n=mu(t,this.size,4);e.uniform4fv(this.addr,n)}function Hu(e,t){const n=mu(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Vu(e,t){const n=mu(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function qu(e,t){const n=mu(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Wu(e,t){e.uniform1iv(this.addr,t)}function ju(e,t){e.uniform2iv(this.addr,t)}function Xu(e,t){e.uniform3iv(this.addr,t)}function Yu(e,t){e.uniform4iv(this.addr,t)}function Ju(e,t){e.uniform1uiv(this.addr,t)}function Ku(e,t){e.uniform2uiv(this.addr,t)}function Zu(e,t){e.uniform3uiv(this.addr,t)}function Qu(e,t){e.uniform4uiv(this.addr,t)}function $u(e,t,n){const i=this.cache,r=t.length,s=vu(n,r);gu(i,s)||(e.uniform1iv(this.addr,s),yu(i,s));for(let e=0;e!==r;++e)n.setTexture2D(t[e]||au,s[e])}function eh(e,t,n){const i=this.cache,r=t.length,s=vu(n,r);gu(i,s)||(e.uniform1iv(this.addr,s),yu(i,s));for(let e=0;e!==r;++e)n.setTexture3D(t[e]||lu,s[e])}function th(e,t,n){const i=this.cache,r=t.length,s=vu(n,r);gu(i,s)||(e.uniform1iv(this.addr,s),yu(i,s));for(let e=0;e!==r;++e)n.setTextureCube(t[e]||cu,s[e])}function nh(e,t,n){const i=this.cache,r=t.length,s=vu(n,r);gu(i,s)||(e.uniform1iv(this.addr,s),yu(i,s));for(let e=0;e!==r;++e)n.setTexture2DArray(t[e]||ou,s[e])}class ih{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return xu;case 35664:return bu;case 35665:return wu;case 35666:return _u;case 35674:return Mu;case 35675:return Eu;case 35676:return Su;case 5124:case 35670:return Tu;case 35667:case 35671:return Au;case 35668:case 35672:return Cu;case 35669:case 35673:return Iu;case 5125:return Lu;case 36294:return Ru;case 36295:return Pu;case 36296:return ku;case 35678:case 36198:case 36298:case 36306:case 35682:return Du;case 35679:case 36299:case 36307:return Nu;case 35680:case 36300:case 36308:case 36293:return Ou;case 36289:case 36303:case 36311:case 36292:return Uu}}(t.type)}}class rh{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Bu;case 35664:return Fu;case 35665:return zu;case 35666:return Gu;case 35674:return Hu;case 35675:return Vu;case 35676:return qu;case 5124:case 35670:return Wu;case 35667:case 35671:return ju;case 35668:case 35672:return Xu;case 35669:case 35673:return Yu;case 5125:return Ju;case 36294:return Ku;case 36295:return Zu;case 36296:return Qu;case 35678:case 36198:case 36298:case 36306:case 35682:return $u;case 35679:case 36299:case 36307:return eh;case 35680:case 36300:case 36308:case 36293:return th;case 36289:case 36303:case 36311:case 36292:return nh}}(t.type)}}class sh{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(e,t[s.id],n)}}}const ah=/(\w+)(\])?(\[|\.)?/g;function oh(e,t){e.seq.push(t),e.map[t.id]=t}function lh(e,t,n){const i=e.name,r=i.length;for(ah.lastIndex=0;;){const s=ah.exec(i),a=ah.lastIndex;let o=s[1];const l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===r){oh(n,void 0===c?new ih(o,e,t):new rh(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new sh(o),oh(n,e)),n=e}}}class ch{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);lh(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,s=t.length;r!==s;++r){const s=t[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function uh(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let hh=0;function dh(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const i=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let e=r;e<s;e++){const r=e+1;i.push(`${r===t?">":" "} ${r}: ${n[e]}`)}return i.join("\n")}(e.getShaderSource(t),i)}return r}function ph(e,t){const n=function(e){switch(e){case Es:return["Linear","( value )"];case Ms:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function fh(e,t){let n;switch(t){case Di:n="Linear";break;case Ni:n="Reinhard";break;case Oi:n="OptimizedCineon";break;case Ui:n="ACESFilmic";break;case Bi:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function mh(e){return""!==e}function gh(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function yh(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const vh=/^[ \t]*#include +<([\w\d./]+)>/gm;function xh(e){return e.replace(vh,bh)}function bh(e,t){const n=Cc[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return xh(n)}const wh=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _h(e){return e.replace(wh,Mh)}function Mh(e,t,n,i){let r="";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function Eh(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Sh(e,t,n,i){const r=e.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Xn?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Yn?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Jn&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case zi:case Gi:t="ENVMAP_TYPE_CUBE";break;case qi:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===Gi&&(t="ENVMAP_MODE_REFRACTION"),t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Li:t="ENVMAP_BLENDING_MULTIPLY";break;case Ri:t="ENVMAP_BLENDING_MIX";break;case Pi:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(mh).join("\n")}(n),f=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),m=r.createProgram();let g,y,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(mh).join("\n"),g.length>0&&(g+="\n"),y=[p,f].filter(mh).join("\n"),y.length>0&&(y+="\n")):(g=[Eh(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(mh).join("\n"),y=[p,Eh(n),"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ki?"#define TONE_MAPPING":"",n.toneMapping!==ki?Cc.tonemapping_pars_fragment:"",n.toneMapping!==ki?fh("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Cc.encodings_pars_fragment,ph("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(mh).join("\n")),a=xh(a),a=gh(a,n),a=yh(a,n),o=xh(o),o=gh(o,n),o=yh(o,n),a=_h(a),o=_h(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#define varying in",n.glslVersion===Qs?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Qs?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const x=v+g+a,b=v+y+o,w=uh(r,r.VERTEX_SHADER,x),_=uh(r,r.FRAGMENT_SHADER,b);if(r.attachShader(m,w),r.attachShader(m,_),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),e.debug.checkShaderErrors){const t=r.getProgramInfoLog(m).trim(),n=r.getShaderInfoLog(w).trim(),i=r.getShaderInfoLog(_).trim();let s=!0,a=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(s=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(r,m,w,_);else{const e=dh(r,w,"vertex"),n=dh(r,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==n&&""!==i||(a=!1);a&&(this.diagnostics={runnable:s,programLog:t,vertexShader:{log:n,prefix:g},fragmentShader:{log:i,prefix:y}})}let M,E;return r.deleteShader(w),r.deleteShader(_),this.getUniforms=function(){return void 0===M&&(M=new ch(r,m)),M},this.getAttributes=function(){return void 0===E&&(E=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),s=i.name;let a=1;i.type===e.FLOAT_MAT2&&(a=2),i.type===e.FLOAT_MAT3&&(a=3),i.type===e.FLOAT_MAT4&&(a=4),n[s]={type:i.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}(r,m)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=hh++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=_,this}let Th=0;class Ah{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Ch(e),t.set(e,n)),n}}class Ch{constructor(e){this.id=Th++,this.code=e,this.usedTimes=0}}function Ih(e,t,n,i,r,s,a){const o=new ko,l=new Ah,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return 1===e?"uv1":2===e?"uv2":3===e?"uv3":"uv"}return{getParameters:function(s,o,c,g,y){const v=g.fog,x=y.geometry,b=s.isMeshStandardMaterial?g.environment:null,w=(s.isMeshStandardMaterial?n:t).get(s.envMap||b),_=w&&w.mapping===qi?w.image.height:null,M=f[s.type];null!==s.precision&&(p=r.getMaxPrecision(s.precision),p!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",p,"instead."));const E=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,S=void 0!==E?E.length:0;let T,A,C,I,L=0;if(void 0!==x.morphAttributes.position&&(L=1),void 0!==x.morphAttributes.normal&&(L=2),void 0!==x.morphAttributes.color&&(L=3),M){const e=Lc[M];T=e.vertexShader,A=e.fragmentShader}else T=s.vertexShader,A=s.fragmentShader,l.update(s),C=l.getVertexShaderID(s),I=l.getFragmentShaderID(s);const R=e.getRenderTarget(),P=!0===y.isInstancedMesh,k=!!s.map,D=!!s.matcap,N=!!w,O=!!s.aoMap,U=!!s.lightMap,B=!!s.bumpMap,F=!!s.normalMap,z=!!s.displacementMap,G=!!s.emissiveMap,H=!!s.metalnessMap,V=!!s.roughnessMap,q=s.clearcoat>0,W=s.iridescence>0,j=s.sheen>0,X=s.transmission>0,Y=q&&!!s.clearcoatMap,J=q&&!!s.clearcoatNormalMap,K=q&&!!s.clearcoatRoughnessMap,Z=W&&!!s.iridescenceMap,Q=W&&!!s.iridescenceThicknessMap,$=j&&!!s.sheenColorMap,ee=j&&!!s.sheenRoughnessMap,te=!!s.specularMap,ne=!!s.specularColorMap,ie=!!s.specularIntensityMap,re=X&&!!s.transmissionMap,se=X&&!!s.thicknessMap,ae=!!s.gradientMap,oe=!!s.alphaMap,le=s.alphaTest>0,ce=!!s.extensions,ue=!!x.attributes.uv1,he=!!x.attributes.uv2,de=!!x.attributes.uv3;return{isWebGL2:u,shaderID:M,shaderName:s.type,vertexShader:T,fragmentShader:A,defines:s.defines,customVertexShaderID:C,customFragmentShaderID:I,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,instancing:P,instancingColor:P&&null!==y.instanceColor,supportsVertexTextures:d,outputColorSpace:null===R?e.outputColorSpace:!0===R.isXRRenderTarget?R.texture.colorSpace:Es,map:k,matcap:D,envMap:N,envMapMode:N&&w.mapping,envMapCubeUVHeight:_,aoMap:O,lightMap:U,bumpMap:B,normalMap:F,displacementMap:d&&z,emissiveMap:G,normalMapObjectSpace:F&&s.normalMapType===ws,normalMapTangentSpace:F&&s.normalMapType===bs,metalnessMap:H,roughnessMap:V,clearcoat:q,clearcoatMap:Y,clearcoatNormalMap:J,clearcoatRoughnessMap:K,iridescence:W,iridescenceMap:Z,iridescenceThicknessMap:Q,sheen:j,sheenColorMap:$,sheenRoughnessMap:ee,specularMap:te,specularColorMap:ne,specularIntensityMap:ie,transmission:X,transmissionMap:re,thicknessMap:se,gradientMap:ae,opaque:!1===s.transparent&&s.blending===ti,alphaMap:oe,alphaTest:le,combine:s.combine,mapUv:k&&m(s.map.channel),aoMapUv:O&&m(s.aoMap.channel),lightMapUv:U&&m(s.lightMap.channel),bumpMapUv:B&&m(s.bumpMap.channel),normalMapUv:F&&m(s.normalMap.channel),displacementMapUv:z&&m(s.displacementMap.channel),emissiveMapUv:G&&m(s.emissiveMap.channel),metalnessMapUv:H&&m(s.metalnessMap.channel),roughnessMapUv:V&&m(s.roughnessMap.channel),clearcoatMapUv:Y&&m(s.clearcoatMap.channel),clearcoatNormalMapUv:J&&m(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:K&&m(s.clearcoatRoughnessMap.channel),iridescenceMapUv:Z&&m(s.iridescenceMap.channel),iridescenceThicknessMapUv:Q&&m(s.iridescenceThicknessMap.channel),sheenColorMapUv:$&&m(s.sheenColorMap.channel),sheenRoughnessMapUv:ee&&m(s.sheenRoughnessMap.channel),specularMapUv:te&&m(s.specularMap.channel),specularColorMapUv:ne&&m(s.specularColorMap.channel),specularIntensityMapUv:ie&&m(s.specularIntensityMap.channel),transmissionMapUv:re&&m(s.transmissionMap.channel),thicknessMapUv:se&&m(s.thicknessMap.channel),alphaMapUv:oe&&m(s.alphaMap.channel),vertexTangents:F&&!!x.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUv1s:ue,vertexUv2s:he,vertexUv3s:de,pointsUvs:!0===y.isPoints&&!!x.attributes.uv&&(k||oe),fog:!!v,useFog:!0===s.fog,fogExp2:v&&v.isFogExp2,flatShading:!0===s.flatShading,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:S,morphTextureStride:L,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:ki,useLegacyLights:e.useLegacyLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===Qn,flipSided:s.side===Zn,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:ce&&!0===s.extensions.derivatives,extensionFragDepth:ce&&!0===s.extensions.fragDepth,extensionDrawBuffers:ce&&!0===s.extensions.drawBuffers,extensionShaderTextureLOD:ce&&!0===s.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0),t.supportsVertexTextures&&o.enable(1),t.instancing&&o.enable(2),t.instancingColor&&o.enable(3),t.matcap&&o.enable(4),t.envMap&&o.enable(5),t.normalMapObjectSpace&&o.enable(6),t.normalMapTangentSpace&&o.enable(7),t.clearcoat&&o.enable(8),t.iridescence&&o.enable(9),t.alphaTest&&o.enable(10),t.vertexColors&&o.enable(11),t.vertexAlphas&&o.enable(12),t.vertexUv1s&&o.enable(13),t.vertexUv2s&&o.enable(14),t.vertexUv3s&&o.enable(15),t.vertexTangents&&o.enable(16),e.push(o.mask),o.disableAll(),t.fog&&o.enable(0),t.useFog&&o.enable(1),t.flatShading&&o.enable(2),t.logarithmicDepthBuffer&&o.enable(3),t.skinning&&o.enable(4),t.morphTargets&&o.enable(5),t.morphNormals&&o.enable(6),t.morphColors&&o.enable(7),t.premultipliedAlpha&&o.enable(8),t.shadowMapEnabled&&o.enable(9),t.useLegacyLights&&o.enable(10),t.doubleSided&&o.enable(11),t.flipSided&&o.enable(12),t.useDepthPacking&&o.enable(13),t.dithering&&o.enable(14),t.transmission&&o.enable(15),t.sheen&&o.enable(16),t.opaque&&o.enable(17),t.pointsUvs&&o.enable(18),e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Lc[t];n=uc.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new Sh(e,n,t,s),c.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Lh(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Rh(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ph(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function kh(){const e=[];let t=0;const n=[],i=[],r=[];function s(n,i,r,s,a,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)},unshift:function(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Rh),i.length>1&&i.sort(t||Ph),r.length>1&&r.sort(t||Ph)}}}function Dh(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new kh,e.set(t,[r])):n>=i.length?(r=new kh,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function Nh(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Wa,color:new dl};break;case"SpotLight":n={position:new Wa,direction:new Wa,color:new dl,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Wa,color:new dl,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Wa,skyColor:new dl,groundColor:new dl};break;case"RectAreaLight":n={color:new dl,position:new Wa,halfWidth:new Wa,halfHeight:new Wa}}return e[t.id]=n,n}}}let Oh=0;function Uh(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Bh(e,t){const n=new Nh,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ma};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ma,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)r.probe.push(new Wa);const s=new Wa,a=new _o,o=new _o;return{setup:function(s,a){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,h=0,d=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0;s.sort(Uh);const b=!0===a?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],a=t.color,w=t.intensity,_=t.distance,M=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=a.r*w*b,l+=a.g*w*b,c+=a.b*w*b;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],w);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=M,r.directionalShadowMatrix[u]=t.shadow.matrix,m++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(w*b),e.distance=_,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[d]=e;const s=t.shadow;if(t.map&&(r.spotLightMap[v]=t.map,v++,s.updateMatrices(t),t.castShadow&&x++),r.spotLightMatrix[d]=s.matrix,t.castShadow){const e=i.get(t);e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,r.spotShadow[d]=e,r.spotShadowMap[d]=M,y++}d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[h]=n,r.pointShadowMap[h]=M,r.pointShadowMatrix[h]=t.shadow.matrix,g++}r.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w*b),e.groundColor.copy(t.groundColor).multiplyScalar(w*b),r.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Ic.LTC_FLOAT_1,r.rectAreaLTC2=Ic.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Ic.LTC_HALF_1,r.rectAreaLTC2=Ic.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const w=r.hash;w.directionalLength===u&&w.pointLength===h&&w.spotLength===d&&w.rectAreaLength===p&&w.hemiLength===f&&w.numDirectionalShadows===m&&w.numPointShadows===g&&w.numSpotShadows===y&&w.numSpotMaps===v||(r.directional.length=u,r.spot.length=d,r.rectArea.length=p,r.point.length=h,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=y,r.spotShadowMap.length=y,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=y+v-x,r.spotLightMap.length=v,r.numSpotLightShadowsWithMaps=x,w.directionalLength=u,w.pointLength=h,w.spotLength=d,w.rectAreaLength=p,w.hemiLength=f,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=y,w.numSpotMaps=v,r.version=Oh++)},setupView:function(e,t){let n=0,i=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),n++}else if(d.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),o.identity(),a.copy(d.matrixWorld),a.premultiply(h),o.extractRotation(a),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(d.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),i++}else if(d.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),u++}}},state:r}}function Fh(e,t){const n=new Bh(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function zh(e,t){let n=new WeakMap;return{get:function(i,r=0){const s=n.get(i);let a;return void 0===s?(a=new Fh(e,t),n.set(i,[a])):r>=s.length?(a=new Fh(e,t),s.push(a)):a=s[r],a},dispose:function(){n=new WeakMap}}}class Gh extends ol{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=vs,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Hh extends ol{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Vh(e,t,n){let i=new Ec;const r=new ma,s=new ma,a=new Ua,o=new Gh({depthPacking:xs}),l=new Hh,c={},u=n.maxTextureSize,h={[Kn]:Zn,[Zn]:Kn,[Qn]:Qn},d=new hc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ma},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new zl;f.setAttribute("position",new _l(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new rc(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Xn;let y=this.type;function v(n,i){const s=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Ba(r.x,r.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,s,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,s,p,m,null)}function x(t,n,i,r){let s=null;const a=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)s=a;else if(s=!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=s.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=s.clone(),i[t]=r),s=r}return s.visible=n.visible,s.wireframe=n.wireframe,s.side=r===Jn?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===i.isPointLight&&!0===s.isMeshDistanceMaterial&&(e.properties.get(s).light=i),s}function b(n,r,s,a,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===Jn)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=r[c.materialIndex];if(u&&u.visible){const t=x(n,u,a,o);e.renderBufferDirect(s,null,i,t,n,c)}}}else if(r.visible){const t=x(n,r,a,o);e.renderBufferDirect(s,null,i,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],r,s,a,o)}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(ei),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=y!==Jn&&this.type===Jn,f=y===Jn&&this.type!==Jn;for(let l=0,c=t.length;l<c;l++){const c=t[l],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;r.copy(h.mapSize);const m=h.getFrameExtents();if(r.multiply(m),s.copy(h.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/m.x),r.x=s.x*m.x,h.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/m.y),r.y=s.y*m.y,h.mapSize.y=s.y)),null===h.map||!0===p||!0===f){const e=this.type!==Jn?{minFilter:Yi,magFilter:Yi}:{};null!==h.map&&h.map.dispose(),h.map=new Ba(r.x,r.y,e),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const g=h.getViewportCount();for(let e=0;e<g;e++){const t=h.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),d.viewport(a),h.updateMatrices(c,e),i=h.getFrustum(),b(n,o,h.camera,c,this.type)}!0!==h.isPointLightShadow&&this.type===Jn&&v(h,o),h.needsUpdate=!1}y=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function qh(e,t,n){const i=n.isWebGL2,r=new function(){let t=!1;const n=new Ua;let i=null;const r=new Ua(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,s,a,o){!0===o&&(t*=a,i*=a,s*=a),n.set(t,i,s,a),!1===r.equals(n)&&(e.clearColor(t,i,s,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(t){t?z(e.DEPTH_TEST):G(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case _i:e.depthFunc(e.NEVER);break;case Mi:e.depthFunc(e.ALWAYS);break;case Ei:e.depthFunc(e.LESS);break;case Si:e.depthFunc(e.LEQUAL);break;case Ti:e.depthFunc(e.EQUAL);break;case Ai:e.depthFunc(e.GEQUAL);break;case Ci:e.depthFunc(e.GREATER);break;case Ii:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},a=new function(){let t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?z(e.STENCIL_TEST):G(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&s===a||(e.stencilFunc(t,n,a),i=t,r=n,s=a)},setOp:function(t,n,i){a===t&&o===n&&l===i||(e.stencilOp(t,n,i),a=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null}}},o=new WeakMap,l=new WeakMap;let c={},u={},h=new WeakMap,d=[],p=null,f=!1,m=null,g=null,y=null,v=null,x=null,b=null,w=null,_=!1,M=null,E=null,S=null,T=null,A=null;const C=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let I=!1,L=0;const R=e.getParameter(e.VERSION);-1!==R.indexOf("WebGL")?(L=parseFloat(/^WebGL (\d)/.exec(R)[1]),I=L>=1):-1!==R.indexOf("OpenGL ES")&&(L=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),I=L>=2);let P=null,k={};const D=e.getParameter(e.SCISSOR_BOX),N=e.getParameter(e.VIEWPORT),O=(new Ua).fromArray(D),U=(new Ua).fromArray(N);function B(t,n,r,s){const a=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)!i||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage3D(n,0,e.RGBA,1,1,s,0,e.RGBA,e.UNSIGNED_BYTE,a);return o}const F={};function z(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function G(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}F[e.TEXTURE_2D]=B(e.TEXTURE_2D,e.TEXTURE_2D,1),F[e.TEXTURE_CUBE_MAP]=B(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(F[e.TEXTURE_2D_ARRAY]=B(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),F[e.TEXTURE_3D]=B(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),z(e.DEPTH_TEST),s.setFunc(Si),W(!1),j(Vn),z(e.CULL_FACE),q(ei);const H={[ai]:e.FUNC_ADD,[oi]:e.FUNC_SUBTRACT,[li]:e.FUNC_REVERSE_SUBTRACT};if(i)H[ci]=e.MIN,H[ui]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(H[ci]=e.MIN_EXT,H[ui]=e.MAX_EXT)}const V={[hi]:e.ZERO,[di]:e.ONE,[pi]:e.SRC_COLOR,[mi]:e.SRC_ALPHA,[wi]:e.SRC_ALPHA_SATURATE,[xi]:e.DST_COLOR,[yi]:e.DST_ALPHA,[fi]:e.ONE_MINUS_SRC_COLOR,[gi]:e.ONE_MINUS_SRC_ALPHA,[bi]:e.ONE_MINUS_DST_COLOR,[vi]:e.ONE_MINUS_DST_ALPHA};function q(t,n,i,r,s,a,o,l){if(t!==ei){if(!1===f&&(z(e.BLEND),f=!0),t===si)s=s||n,a=a||i,o=o||r,n===g&&s===x||(e.blendEquationSeparate(H[n],H[s]),g=n,x=s),i===y&&r===v&&a===b&&o===w||(e.blendFuncSeparate(V[i],V[r],V[a],V[o]),y=i,v=r,b=a,w=o),m=t,_=!1;else if(t!==m||l!==_){if(g===ai&&x===ai||(e.blendEquation(e.FUNC_ADD),g=ai,x=ai),l)switch(t){case ti:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case ni:e.blendFunc(e.ONE,e.ONE);break;case ii:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case ri:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case ti:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case ni:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case ii:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case ri:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,v=null,b=null,w=null,m=t,_=l}}else!0===f&&(G(e.BLEND),f=!1)}function W(t){M!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),M=t)}function j(t){t!==Hn?(z(e.CULL_FACE),t!==E&&(t===Vn?e.cullFace(e.BACK):t===qn?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):G(e.CULL_FACE),E=t}function X(t,n,i){t?(z(e.POLYGON_OFFSET_FILL),T===n&&A===i||(e.polygonOffset(n,i),T=n,A=i)):G(e.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:s,stencil:a},enable:z,disable:G,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(i,r){let s=d,a=!1;if(i)if(s=h.get(r),void 0===s&&(s=[],h.set(r,s)),i.isWebGLMultipleRenderTargets){const t=i.texture;if(s.length!==t.length||s[0]!==e.COLOR_ATTACHMENT0){for(let n=0,i=t.length;n<i;n++)s[n]=e.COLOR_ATTACHMENT0+n;s.length=t.length,a=!0}}else s[0]!==e.COLOR_ATTACHMENT0&&(s[0]=e.COLOR_ATTACHMENT0,a=!0);else s[0]!==e.BACK&&(s[0]=e.BACK,a=!0);a&&(n.isWebGL2?e.drawBuffers(s):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:q,setMaterial:function(t,n){t.side===Qn?G(e.CULL_FACE):z(e.CULL_FACE);let i=t.side===Zn;n&&(i=!i),W(i),t.blending===ti&&!1===t.transparent?q(ei):q(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),r.setMask(t.colorWrite);const o=t.stencilWrite;a.setTest(o),o&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),X(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?z(e.SAMPLE_ALPHA_TO_COVERAGE):G(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:W,setCullFace:j,setLineWidth:function(t){t!==S&&(I&&e.lineWidth(t),S=t)},setPolygonOffset:X,setScissorTest:function(t){t?z(e.SCISSOR_TEST):G(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+C-1),P!==t&&(e.activeTexture(t),P=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===P?e.TEXTURE0+C-1:P);let r=k[i];void 0===r&&(r={type:void 0,texture:void 0},k[i]=r),r.type===t&&r.texture===n||(P!==i&&(e.activeTexture(i),P=i),e.bindTexture(t,n||F[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=k[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let i=l.get(n);void 0===i&&(i=new WeakMap,l.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=l.get(n).get(t);o.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),o.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===U.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),U.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},P=null,k={},u={},h=new WeakMap,d=[],p=null,f=!1,m=null,g=null,y=null,v=null,x=null,b=null,w=null,_=!1,M=null,E=null,S=null,T=null,A=null,O.set(0,0,e.canvas.width,e.canvas.height),U.set(0,0,e.canvas.width,e.canvas.height),r.reset(),s.reset(),a.reset()}}}function Wh(e,t,n,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let y=!1;try{y="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function v(e,t){return y?new OffscreenCanvas(e,t):wa("canvas")}function x(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?ha:Math.floor,s=i(r*e.width),a=i(r*e.height);void 0===m&&(m=v(s,a));const o=n?v(s,a):m;return o.width=s,o.height=a,o.getContext("2d").drawImage(e,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+a+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return ca(e.width)&&ca(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==Yi&&e.minFilter!==$i}function _(t){e.generateMipmap(t)}function M(n,i,r,s,a=!1){if(!1===o)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;return i===e.RED&&(r===e.FLOAT&&(l=e.R32F),r===e.HALF_FLOAT&&(l=e.R16F),r===e.UNSIGNED_BYTE&&(l=e.R8)),i===e.RG&&(r===e.FLOAT&&(l=e.RG32F),r===e.HALF_FLOAT&&(l=e.RG16F),r===e.UNSIGNED_BYTE&&(l=e.RG8)),i===e.RGBA&&(r===e.FLOAT&&(l=e.RGBA32F),r===e.HALF_FLOAT&&(l=e.RGBA16F),r===e.UNSIGNED_BYTE&&(l=s===Ms&&!1===a?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)),l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function E(e,t,n){return!0===w(e,n)||e.isFramebufferTexture&&e.minFilter!==Yi&&e.minFilter!==$i?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function S(t){return t===Yi||t===Ji||t===Zi?e.NEAREST:e.LINEAR}function T(e){const t=e.target;t.removeEventListener("dispose",T),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=g.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&C(e),0===Object.keys(r).length&&g.delete(n)}i.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function A(t){const n=t.target;n.removeEventListener("dispose",A),function(t){const n=t.texture,r=i.get(t),s=i.get(n);if(void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);r.__webglTexture&&(e.deleteTexture(r.__webglTexture),a.memory.textures--),i.remove(n[t])}i.remove(n),i.remove(t)}(n)}function C(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete g.get(r)[n.__cacheKey],a.memory.textures--}let I=0;function L(t,r){const s=i.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&s.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void N(s,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,s.__webglTexture,e.TEXTURE0+r)}const R={[Wi]:e.REPEAT,[ji]:e.CLAMP_TO_EDGE,[Xi]:e.MIRRORED_REPEAT},P={[Yi]:e.NEAREST,[Ji]:e.NEAREST_MIPMAP_NEAREST,[Zi]:e.NEAREST_MIPMAP_LINEAR,[$i]:e.LINEAR,[er]:e.LINEAR_MIPMAP_NEAREST,[nr]:e.LINEAR_MIPMAP_LINEAR};function k(n,s,a){if(a?(e.texParameteri(n,e.TEXTURE_WRAP_S,R[s.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,R[s.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,R[s.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,P[s.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,P[s.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),s.wrapS===ji&&s.wrapT===ji||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,S(s.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,S(s.minFilter)),s.minFilter!==Yi&&s.minFilter!==$i&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(s.magFilter===Yi)return;if(s.minFilter!==Zi&&s.minFilter!==nr)return;if(s.type===ur&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&s.type===hr&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function D(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",T));const r=n.source;let s=g.get(r);void 0===s&&(s={},g.set(r,s));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===s[o]&&(s[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,i=!0),s[o].usedTimes++;const r=s[t.__cacheKey];void 0!==r&&(s[t.__cacheKey].usedTimes--,0===r.usedTimes&&C(n)),t.__cacheKey=o,t.__webglTexture=s[o].texture}return i}function N(t,r,a){let l=e.TEXTURE_2D;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),r.isData3DTexture&&(l=e.TEXTURE_3D);const c=D(t,r),h=r.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+a);const d=i.get(h);if(h.version!==d.__version||!0===c){n.activeTexture(e.TEXTURE0+a),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=function(e){return!o&&(e.wrapS!==ji||e.wrapT!==ji||e.minFilter!==Yi&&e.minFilter!==$i)}(r)&&!1===b(r.image);let i=x(r.image,t,!1,u);i=G(r,i);const p=b(i)||o,f=s.convert(r.format,r.colorSpace);let m,g=s.convert(r.type),y=M(r.internalFormat,f,g,r.colorSpace);k(l,r,p);const v=r.mipmaps,S=o&&!0!==r.isVideoTexture,T=void 0===d.__version||!0===c,A=E(r,i,p);if(r.isDepthTexture)y=e.DEPTH_COMPONENT,o?y=r.type===ur?e.DEPTH_COMPONENT32F:r.type===cr?e.DEPTH_COMPONENT24:r.type===fr?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:r.type===ur&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===xr&&y===e.DEPTH_COMPONENT&&r.type!==or&&r.type!==cr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=cr,g=s.convert(r.type)),r.format===br&&y===e.DEPTH_COMPONENT&&(y=e.DEPTH_STENCIL,r.type!==fr&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=fr,g=s.convert(r.type))),T&&(S?n.texStorage2D(e.TEXTURE_2D,1,y,i.width,i.height):n.texImage2D(e.TEXTURE_2D,0,y,i.width,i.height,0,f,g,null));else if(r.isDataTexture)if(v.length>0&&p){S&&T&&n.texStorage2D(e.TEXTURE_2D,A,y,v[0].width,v[0].height);for(let t=0,i=v.length;t<i;t++)m=v[t],S?n.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,f,g,m.data):n.texImage2D(e.TEXTURE_2D,t,y,m.width,m.height,0,f,g,m.data);r.generateMipmaps=!1}else S?(T&&n.texStorage2D(e.TEXTURE_2D,A,y,i.width,i.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,i.width,i.height,f,g,i.data)):n.texImage2D(e.TEXTURE_2D,0,y,i.width,i.height,0,f,g,i.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){S&&T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,y,v[0].width,v[0].height,i.depth);for(let t=0,s=v.length;t<s;t++)m=v[t],r.format!==gr?null!==f?S?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,i.depth,f,m.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,y,m.width,m.height,i.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,i.depth,f,g,m.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,y,m.width,m.height,i.depth,0,f,g,m.data)}else{S&&T&&n.texStorage2D(e.TEXTURE_2D,A,y,v[0].width,v[0].height);for(let t=0,i=v.length;t<i;t++)m=v[t],r.format!==gr?null!==f?S?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,f,m.data):n.compressedTexImage2D(e.TEXTURE_2D,t,y,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?n.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,f,g,m.data):n.texImage2D(e.TEXTURE_2D,t,y,m.width,m.height,0,f,g,m.data)}else if(r.isDataArrayTexture)S?(T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,y,i.width,i.height,i.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,i.width,i.height,i.depth,f,g,i.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,y,i.width,i.height,i.depth,0,f,g,i.data);else if(r.isData3DTexture)S?(T&&n.texStorage3D(e.TEXTURE_3D,A,y,i.width,i.height,i.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,i.width,i.height,i.depth,f,g,i.data)):n.texImage3D(e.TEXTURE_3D,0,y,i.width,i.height,i.depth,0,f,g,i.data);else if(r.isFramebufferTexture){if(T)if(S)n.texStorage2D(e.TEXTURE_2D,A,y,i.width,i.height);else{let t=i.width,r=i.height;for(let i=0;i<A;i++)n.texImage2D(e.TEXTURE_2D,i,y,t,r,0,f,g,null),t>>=1,r>>=1}}else if(v.length>0&&p){S&&T&&n.texStorage2D(e.TEXTURE_2D,A,y,v[0].width,v[0].height);for(let t=0,i=v.length;t<i;t++)m=v[t],S?n.texSubImage2D(e.TEXTURE_2D,t,0,0,f,g,m):n.texImage2D(e.TEXTURE_2D,t,y,f,g,m);r.generateMipmaps=!1}else S?(T&&n.texStorage2D(e.TEXTURE_2D,A,y,i.width,i.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,f,g,i)):n.texImage2D(e.TEXTURE_2D,0,y,f,g,i);w(r,p)&&_(l),d.__version=h.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function O(t,r,a,o,l){const c=s.convert(a.format,a.colorSpace),u=s.convert(a.type),h=M(a.internalFormat,c,u,a.colorSpace);i.get(r).__hasExternalTextures||(l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,0,h,r.width,r.height,r.depth,0,c,u,null):n.texImage2D(l,0,h,r.width,r.height,0,c,u,null)),n.bindFramebuffer(e.FRAMEBUFFER,t),z(r)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,l,i.get(a).__webglTexture,0,F(r)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,l,i.get(a).__webglTexture,0),n.bindFramebuffer(e.FRAMEBUFFER,null)}function U(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let r=e.DEPTH_COMPONENT16;if(i||z(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===ur?r=e.DEPTH_COMPONENT32F:t.type===cr&&(r=e.DEPTH_COMPONENT24));const i=F(n);z(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,r,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,i,r,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,r,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const r=F(n);i&&!1===z(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):z(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<t.length;r++){const a=t[r],o=s.convert(a.format,a.colorSpace),l=s.convert(a.type),c=M(a.internalFormat,o,l,a.colorSpace),u=F(n);i&&!1===z(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,n.width,n.height):z(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function B(t){const r=i.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),L(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,a=F(r);if(r.depthTexture.format===xr)z(r)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(r.depthTexture.format!==br)throw new Error("Unknown depthTexture format");z(r)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}(r.__webglFramebuffer,t)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),U(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),U(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function F(e){return Math.min(h,e.samples)}function z(e){const n=i.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function G(e,n){const i=e.colorSpace,r=e.format,s=e.type;return!0===e.isCompressedTexture||e.format===$s||i!==Es&&i!==_s&&(i===Ms?!1===o?!0===t.has("EXT_sRGB")&&r===gr?(e.format=$s,e.minFilter=$i,e.generateMipmaps=!1):n=Pa.sRGBToLinear(n):r===gr&&s===rr||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}this.allocateTextureUnit=function(){const e=I;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),I+=1,e},this.resetTextureUnits=function(){I=0},this.setTexture2D=L,this.setTexture2DArray=function(t,r){const s=i.get(t);t.version>0&&s.__version!==t.version?N(s,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,s.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const s=i.get(t);t.version>0&&s.__version!==t.version?N(s,t,r):n.bindTexture(e.TEXTURE_3D,s.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?function(t,r,a){if(6!==r.image.length)return;const l=D(t,r),u=r.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+a);const h=i.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(e.TEXTURE0+a),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)d[e]=t||i?i?r.image[e].image:r.image[e]:x(r.image[e],!1,!0,c),d[e]=G(r,d[e]);const p=d[0],f=b(p)||o,m=s.convert(r.format,r.colorSpace),g=s.convert(r.type),y=M(r.internalFormat,m,g,r.colorSpace),v=o&&!0!==r.isVideoTexture,S=void 0===h.__version||!0===l;let T,A=E(r,p,f);if(k(e.TEXTURE_CUBE_MAP,r,f),t){v&&S&&n.texStorage2D(e.TEXTURE_CUBE_MAP,A,y,p.width,p.height);for(let t=0;t<6;t++){T=d[t].mipmaps;for(let i=0;i<T.length;i++){const s=T[i];r.format!==gr?null!==m?v?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,s.width,s.height,m,s.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,y,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,s.width,s.height,m,g,s.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,y,s.width,s.height,0,m,g,s.data)}}}else{T=r.mipmaps,v&&S&&(T.length>0&&A++,n.texStorage2D(e.TEXTURE_CUBE_MAP,A,y,d[0].width,d[0].height));for(let t=0;t<6;t++)if(i){v?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,d[t].width,d[t].height,m,g,d[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,y,d[t].width,d[t].height,0,m,g,d[t].data);for(let i=0;i<T.length;i++){const r=T[i].image[t].image;v?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,m,g,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,y,r.width,r.height,0,m,g,r.data)}}else{v?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m,g,d[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,y,m,g,d[t]);for(let i=0;i<T.length;i++){const r=T[i];v?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,m,g,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,y,m,g,r.image[t])}}}w(r,f)&&_(e.TEXTURE_CUBE_MAP),h.__version=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(a,t,r):n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture,e.TEXTURE0+r)},this.rebindTextures=function(t,n,r){const s=i.get(t);void 0!==n&&O(s.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),void 0!==r&&B(t)},this.setupRenderTarget=function(t){const l=t.texture,c=i.get(t),u=i.get(l);t.addEventListener("dispose",A),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=b(t)||o;if(h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),d)if(r.drawBuffers){const n=t.texture;for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===z(t)){const i=d?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const a=s.convert(r.format,r.colorSpace),o=s.convert(r.type),l=M(r.internalFormat,a,o,r.colorSpace,!0===t.isXRRenderTarget),u=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),U(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(h){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),k(e.TEXTURE_CUBE_MAP,l,p);for(let n=0;n<6;n++)O(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n);w(l,p)&&_(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){const r=t.texture;for(let s=0,a=r.length;s<a;s++){const a=r[s],o=i.get(a);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),k(e.TEXTURE_2D,a,p),O(c.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+s,e.TEXTURE_2D),w(a,p)&&_(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,u.__webglTexture),k(i,l,p),O(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,i),w(l,p)&&_(i),n.unbindTexture()}t.depthBuffer&&B(t)},this.updateRenderTargetMipmap=function(t){const r=b(t)||o,s=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let a=0,o=s.length;a<o;a++){const o=s[a];if(w(o,r)){const r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=i.get(o).__webglTexture;n.bindTexture(r,s),_(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===z(t)){const r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],s=t.width,a=t.height;let o=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=i.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===d&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),h){const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,s,a,0,0,s,a,o,e.NEAREST),p&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const s=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,s,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=O,this.useMultisampledRTT=z}function jh(e,t,n){const i=n.isWebGL2;return{convert:function(n,r=_s){let s;if(n===rr)return e.UNSIGNED_BYTE;if(n===dr)return e.UNSIGNED_SHORT_4_4_4_4;if(n===pr)return e.UNSIGNED_SHORT_5_5_5_1;if(n===sr)return e.BYTE;if(n===ar)return e.SHORT;if(n===or)return e.UNSIGNED_SHORT;if(n===lr)return e.INT;if(n===cr)return e.UNSIGNED_INT;if(n===ur)return e.FLOAT;if(n===hr)return i?e.HALF_FLOAT:(s=t.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(n===mr)return e.ALPHA;if(n===gr)return e.RGBA;if(n===yr)return e.LUMINANCE;if(n===vr)return e.LUMINANCE_ALPHA;if(n===xr)return e.DEPTH_COMPONENT;if(n===br)return e.DEPTH_STENCIL;if(n===$s)return s=t.get("EXT_sRGB"),null!==s?s.SRGB_ALPHA_EXT:null;if(n===wr)return e.RED;if(n===_r)return e.RED_INTEGER;if(n===Mr)return e.RG;if(n===Er)return e.RG_INTEGER;if(n===Sr)return e.RGBA_INTEGER;if(n===Tr||n===Ar||n===Cr||n===Ir)if(r===Ms){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===Tr)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ar)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Cr)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ir)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===Tr)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ar)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Cr)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ir)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Lr||n===Rr||n===Pr||n===kr){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===Lr)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Rr)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Pr)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===kr)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Dr)return s=t.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Nr||n===Or){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===Nr)return r===Ms?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Or)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===Ur||n===Br||n===Fr||n===zr||n===Gr||n===Hr||n===Vr||n===qr||n===Wr||n===jr||n===Xr||n===Yr||n===Jr||n===Kr){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===Ur)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Br)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Fr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===zr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Gr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Hr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Vr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===qr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Wr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===jr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Xr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Yr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Jr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Kr)return r===Ms?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Zr){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(n===Zr)return r===Ms?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===Qr||n===$r||n===es||n===ts){if(s=t.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===Zr)return s.COMPRESSED_RED_RGTC1_EXT;if(n===$r)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===es)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===ts)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===fr?i?e.UNSIGNED_INT_24_8:(s=t.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class Xh extends pc{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Yh extends Xo{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Jh={type:"move"};class Kh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Yh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Yh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Wa,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Wa),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Yh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Wa,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Wa),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n),r=this._getHandJoint(l,i);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Jh)))}return null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Yh;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Zh extends Oa{constructor(e,t,n,i,r,s,a,o,l,c){if((c=void 0!==c?c:xr)!==xr&&c!==br)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===xr&&(n=cr),void 0===n&&c===br&&(n=fr),super(null,i,r,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Yi,this.minFilter=void 0!==o?o:Yi,this.flipY=!1,this.generateMipmaps=!1}}class Qh extends ea{constructor(e,t){super();const n=this;let i=null,r=1,s=null,a="local-floor",o=1,l=null,c=null,u=null,h=null,d=null,p=null;const f=t.getContextAttributes();let m=null,g=null;const y=[],v=[],x=new Set,b=new Map,w=new pc;w.layers.enable(1),w.viewport=new Ua;const _=new pc;_.layers.enable(2),_.viewport=new Ua;const M=[w,_],E=new Xh;E.layers.enable(1),E.layers.enable(2);let S=null,T=null;function A(e){const t=v.indexOf(e.inputSource);if(-1===t)return;const n=y[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function C(){i.removeEventListener("select",A),i.removeEventListener("selectstart",A),i.removeEventListener("selectend",A),i.removeEventListener("squeeze",A),i.removeEventListener("squeezestart",A),i.removeEventListener("squeezeend",A),i.removeEventListener("end",C),i.removeEventListener("inputsourceschange",I);for(let e=0;e<y.length;e++){const t=v[e];null!==t&&(v[e]=null,y[e].disconnect(t))}S=null,T=null,e.setRenderTarget(m),d=null,h=null,u=null,i=null,g=null,D.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function I(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=v.indexOf(n);i>=0&&(v[i]=null,y[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=v.indexOf(n);if(-1===i){for(let e=0;e<y.length;e++){if(e>=v.length){v.push(n),i=e;break}if(null===v[e]){v[e]=n,i=e;break}}if(-1===i)break}const r=y[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=y[e];return void 0===t&&(t=new Kh,y[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=y[e];return void 0===t&&(t=new Kh,y[e]=t),t.getGripSpace()},this.getHand=function(e){let t=y[e];return void 0===t&&(t=new Kh,y[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",A),i.addEventListener("selectstart",A),i.addEventListener("selectend",A),i.addEventListener("squeeze",A),i.addEventListener("squeezestart",A),i.addEventListener("squeezeend",A),i.addEventListener("end",C),i.addEventListener("inputsourceschange",I),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:d}),g=new Ba(d.framebufferWidth,d.framebufferHeight,{format:gr,type:rr,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,s=null,a=null;f.depth&&(a=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?br:xr,s=f.stencil?fr:cr);const o={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:r};u=new XRWebGLBinding(i,t),h=u.createProjectionLayer(o),i.updateRenderState({layers:[h]}),g=new Ba(h.textureWidth,h.textureHeight,{format:gr,type:rr,depthTexture:new Zh(h.textureWidth,h.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await i.requestReferenceSpace(a),D.setContext(i),D.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const L=new Wa,R=new Wa;function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;E.near=_.near=w.near=e.near,E.far=_.far=w.far=e.far,S===E.near&&T===E.far||(i.updateRenderState({depthNear:E.near,depthFar:E.far}),S=E.near,T=E.far);const t=e.parent,n=E.cameras;P(E,t);for(let e=0;e<n.length;e++)P(n[e],t);2===n.length?function(e,t,n){L.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const i=L.distanceTo(R),r=t.projectionMatrix.elements,s=n.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(s[8]+1)/s[0],d=a*u,p=a*h,f=i/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+f,y=o+f,v=d-m,x=p+(i-m),b=l*o/y*g,w=c*o/y*g;e.projectionMatrix.makePerspective(v,x,b,w,g,y),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(E,w,_):E.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*ra*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,E,t)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==h||null!==d)return o},this.setFoveation=function(e){o=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.getPlanes=function(){return x};let k=null;const D=new Sc;D.setAnimationLoop((function(t,i){if(c=i.getViewerPose(l||s),p=i,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let s=null;if(null!==d)s=d.getViewport(r);else{const t=u.getViewSubImage(h,r);s=t.viewport,0===i&&(e.setRenderTargetTextures(g,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let a=M[i];void 0===a&&(a=new pc,a.layers.enable(i),a.viewport=new Ua,M[i]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(s.x,s.y,s.width,s.height),0===i&&(E.matrix.copy(a.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===n&&E.cameras.push(a)}}for(let e=0;e<y.length;e++){const t=v[e],n=y[e];null!==t&&void 0!==n&&n.update(t,i,l||s)}if(k&&k(t,i),i.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:i.detectedPlanes});let e=null;for(const t of x)i.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(const t of e)x.delete(t),b.delete(t),n.dispatchEvent({type:"planeremoved",data:t});for(const e of i.detectedPlanes)if(x.has(e)){const t=b.get(e);e.lastChangedTime>t&&(b.set(e,e.lastChangedTime),n.dispatchEvent({type:"planechanged",data:e}))}else x.add(e),b.set(e,i.lastChangedTime),n.dispatchEvent({type:"planeadded",data:e})}p=null})),this.setAnimationLoop=function(e){k=e},this.dispose=function(){}}}function $h(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,r.side===Zn&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),r.side===Zn&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const s=t.get(r).envMap;if(s&&(i.envMap.value=s,i.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const t=!0===e.useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*t,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,cc(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,s,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,i){e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform)),e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform));t.get(i).envMap&&(e.envMapIntensity.value=i.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===Zn&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,o)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,s,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function ed(e,t,n,i){let r={},s={},a=[];const o=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n){const i=e.value;if(void 0===n[t]){if("number"==typeof i)n[t]=i;else{const e=Array.isArray(i)?i:[i],r=[];for(let t=0;t<e.length;t++)r.push(e[t].clone());n[t]=r}return!0}if("number"==typeof i){if(n[t]!==i)return n[t]=i,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],r=Array.isArray(i)?i:[i];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(r[t]))return n.copy(r[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete s[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,h){let d=r[n.id];void 0===d&&(function(e){const t=e.uniforms;let n=0;let i=0;for(let e=0,r=t.length;e<r;e++){const r=t[e],s={boundary:0,storage:0},a=Array.isArray(r.value)?r.value:[r.value];for(let e=0,t=a.length;e<t;e++){const t=c(a[e]);s.boundary+=t.boundary,s.storage+=t.storage}r.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,e>0&&(i=n%16,0!==i&&16-i-s.boundary<0&&(n+=16-i,r.__offset=n)),n+=s.storage}i=n%16,i>0&&(n+=16-i),e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,s=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,s),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=d,n.addEventListener("dispose",u));const p=h.program;i.updateUBOMapping(n,p);const f=t.render.frame;s[n.id]!==f&&(function(t){const n=r[t.id],i=t.uniforms,s=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=i.length;t<n;t++){const n=i[t];if(!0===l(n,t,s)){const t=n.__offset,i=Array.isArray(n.value)?n.value:[n.value];let r=0;for(let s=0;s<i.length;s++){const a=i[s],o=c(a);"number"==typeof a?(n.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+r,n.__data)):a.isMatrix3?(n.__data[0]=a.elements[0],n.__data[1]=a.elements[1],n.__data[2]=a.elements[2],n.__data[3]=a.elements[0],n.__data[4]=a.elements[3],n.__data[5]=a.elements[4],n.__data[6]=a.elements[5],n.__data[7]=a.elements[0],n.__data[8]=a.elements[6],n.__data[9]=a.elements[7],n.__data[10]=a.elements[8],n.__data[11]=a.elements[0]):(a.toArray(n.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,n.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),s[n.id]=f)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);a=[],r={},s={}}}}function td(){const e=wa("canvas");return e.style.display="block",e}class nd{constructor(e={}){const{canvas:t=td(),context:n=null,depth:i=!0,stencil:r=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1}=e;let h;this.isWebGLRenderer=!0,h=null!==n?n.getContextAttributes().alpha:s;let d=null,p=null;const f=[],m=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Ms,this.useLegacyLights=!0,this.toneMapping=ki,this.toneMappingExposure=1;const g=this;let y=!1,v=0,x=0,b=null,w=-1,_=null;const M=new Ua,E=new Ua;let S=null,T=t.width,A=t.height,C=1,I=null,L=null;const R=new Ua(0,0,T,A),P=new Ua(0,0,T,A);let k=!1;const D=new Ec;let N=!1,O=!1,U=null;const B=new _o,F=new Wa,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===b?C:1}let H,V,q,W,j,X,Y,J,K,Z,Q,$,ee,te,ne,ie,re,se,ae,oe,le,ce,ue,he,de=n;function pe(e,n){for(let i=0;i<e.length;i++){const r=e[i],s=t.getContext(r,n);if(null!==s)return s}return null}try{const e={alpha:!0,depth:i,stencil:r,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Fn}`),t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ye,!1),t.addEventListener("webglcontextcreationerror",ve,!1),null===de){const t=["webgl2","webgl","experimental-webgl"];if(!0===g.isWebGL1Renderer&&t.shift(),de=pe(t,e),null===de)throw pe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function fe(){H=new Qc(de),V=new Nc(de,H,e),H.init(V),ce=new jh(de,H,V),q=new qh(de,H,V),W=new tu(de),j=new Lh,X=new Wh(de,H,q,j,V,ce,W),Y=new Uc(g),J=new Zc(g),K=new Tc(de,V),ue=new kc(de,H,K,V),Z=new $c(de,K,W,ue),Q=new su(de,Z,K,W),ae=new ru(de,V,X),ie=new Oc(j),$=new Ih(g,Y,J,H,V,ue,ie),ee=new $h(g,j),te=new Dh,ne=new zh(H,V),se=new Pc(g,Y,J,q,Q,h,o),re=new Vh(g,Q,V),he=new ed(de,W,V,q),oe=new Dc(de,H,W,V),le=new eu(de,H,W,V),W.programs=$.programs,g.capabilities=V,g.extensions=H,g.properties=j,g.renderLists=te,g.shadowMap=re,g.state=q,g.info=W}fe();const me=new Qh(g,de);function ge(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const e=W.autoReset,t=re.enabled,n=re.autoUpdate,i=re.needsUpdate,r=re.type;fe(),W.autoReset=e,re.enabled=t,re.autoUpdate=n,re.needsUpdate=i,re.type=r}function ve(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function xe(e){const t=e.target;t.removeEventListener("dispose",xe),function(e){(function(e){const t=j.get(e).programs;void 0!==t&&(t.forEach((function(e){$.releaseProgram(e)})),e.isShaderMaterial&&$.releaseShaderCache(e))})(e),j.remove(e)}(t)}this.xr=me,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){const e=H.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=H.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(T,A,!1))},this.getSize=function(e){return e.set(T,A)},this.setSize=function(e,n,i=!0){me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,A=n,t.width=Math.floor(e*C),t.height=Math.floor(n*C),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(T*C,A*C).floor()},this.setDrawingBufferSize=function(e,n,i){T=e,A=n,C=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(M)},this.getViewport=function(e){return e.copy(R)},this.setViewport=function(e,t,n,i){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,i),q.viewport(M.copy(R).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,i){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,i),q.scissor(E.copy(P).multiplyScalar(C).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(e){q.setScissorTest(k=e)},this.setOpaqueSort=function(e){I=e},this.setTransparentSort=function(e){L=e},this.getClearColor=function(e){return e.copy(se.getClearColor())},this.setClearColor=function(){se.setClearColor.apply(se,arguments)},this.getClearAlpha=function(){return se.getClearAlpha()},this.setClearAlpha=function(){se.setClearAlpha.apply(se,arguments)},this.clear=function(e=!0,t=!0,n=!0){let i=0;e&&(i|=de.COLOR_BUFFER_BIT),t&&(i|=de.DEPTH_BUFFER_BIT),n&&(i|=de.STENCIL_BUFFER_BIT),de.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ye,!1),t.removeEventListener("webglcontextcreationerror",ve,!1),te.dispose(),ne.dispose(),j.dispose(),Y.dispose(),J.dispose(),Q.dispose(),ue.dispose(),he.dispose(),$.dispose(),me.dispose(),me.removeEventListener("sessionstart",we),me.removeEventListener("sessionend",_e),U&&(U.dispose(),U=null),Me.stop()},this.renderBufferDirect=function(e,t,n,i,r,s){null===t&&(t=z);const a=r.isMesh&&r.matrixWorld.determinant()<0,o=function(e,t,n,i,r){!0!==t.isScene&&(t=z),X.resetTextureUnits();const s=t.fog,a=i.isMeshStandardMaterial?t.environment:null,o=null===b?g.outputColorSpace:!0===b.isXRRenderTarget?b.texture.colorSpace:Es,l=(i.isMeshStandardMaterial?J:Y).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!i.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,m=i.toneMapped?g.toneMapping:ki,y=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==y?y.length:0,x=j.get(i),M=p.state.lights;if(!0===N&&(!0===O||e!==_)){const t=e===_&&i.id===w;ie.setState(i,e,t)}let E=!1;i.version===x.__version?x.needsLights&&x.lightsStateVersion!==M.state.version||x.outputColorSpace!==o||r.isInstancedMesh&&!1===x.instancing?E=!0:r.isInstancedMesh||!0!==x.instancing?r.isSkinnedMesh&&!1===x.skinning?E=!0:r.isSkinnedMesh||!0!==x.skinning?x.envMap!==l||!0===i.fog&&x.fog!==s?E=!0:void 0===x.numClippingPlanes||x.numClippingPlanes===ie.numPlanes&&x.numIntersection===ie.numIntersection?(x.vertexAlphas!==c||x.vertexTangents!==u||x.morphTargets!==h||x.morphNormals!==d||x.morphColors!==f||x.toneMapping!==m||!0===V.isWebGL2&&x.morphTargetsCount!==v)&&(E=!0):E=!0:E=!0:E=!0:(E=!0,x.__version=i.version);let S=x.currentProgram;!0===E&&(S=Ce(i,t,r));let T=!1,I=!1,L=!1;const R=S.getUniforms(),P=x.uniforms;if(q.useProgram(S.program)&&(T=!0,I=!0,L=!0),i.id!==w&&(w=i.id,I=!0),T||_!==e){if(R.setValue(de,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&R.setValue(de,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,I=!0,L=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const t=R.map.cameraPosition;void 0!==t&&t.setValue(de,F.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&R.setValue(de,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&R.setValue(de,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){R.setOptional(de,r,"bindMatrix"),R.setOptional(de,r,"bindMatrixInverse");const e=r.skeleton;e&&(V.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),R.setValue(de,"boneTexture",e.boneTexture,X),R.setValue(de,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const k=n.morphAttributes;var D,B;if((void 0!==k.position||void 0!==k.normal||void 0!==k.color&&!0===V.isWebGL2)&&ae.update(r,n,S),(I||x.receiveShadow!==r.receiveShadow)&&(x.receiveShadow=r.receiveShadow,R.setValue(de,"receiveShadow",r.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(P.envMap.value=l,P.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),I&&(R.setValue(de,"toneMappingExposure",g.toneMappingExposure),x.needsLights&&(B=L,(D=P).ambientLightColor.needsUpdate=B,D.lightProbe.needsUpdate=B,D.directionalLights.needsUpdate=B,D.directionalLightShadows.needsUpdate=B,D.pointLights.needsUpdate=B,D.pointLightShadows.needsUpdate=B,D.spotLights.needsUpdate=B,D.spotLightShadows.needsUpdate=B,D.rectAreaLights.needsUpdate=B,D.hemisphereLights.needsUpdate=B),s&&!0===i.fog&&ee.refreshFogUniforms(P,s),ee.refreshMaterialUniforms(P,i,C,A,U),ch.upload(de,x.uniformsList,P,X)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(ch.upload(de,x.uniformsList,P,X),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&R.setValue(de,"center",r.center),R.setValue(de,"modelViewMatrix",r.modelViewMatrix),R.setValue(de,"normalMatrix",r.normalMatrix),R.setValue(de,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(V.isWebGL2){const n=e[t];he.update(n,S),he.bind(n,S)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return S}(e,t,n,i,r);q.setMaterial(i,a);let l=n.index,c=1;!0===i.wireframe&&(l=Z.getWireframeAttribute(n),c=2);const u=n.drawRange,h=n.attributes.position;let d=u.start*c,f=(u.start+u.count)*c;null!==s&&(d=Math.max(d,s.start*c),f=Math.min(f,(s.start+s.count)*c)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):null!=h&&(d=Math.max(d,0),f=Math.min(f,h.count));const m=f-d;if(m<0||m===1/0)return;let y;ue.setup(r,i,o,n,l);let v=oe;if(null!==l&&(y=K.get(l),v=le,v.setIndex(y)),r.isMesh)!0===i.wireframe?(q.setLineWidth(i.wireframeLinewidth*G()),v.setMode(de.LINES)):v.setMode(de.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),q.setLineWidth(e*G()),r.isLineSegments?v.setMode(de.LINES):r.isLineLoop?v.setMode(de.LINE_LOOP):v.setMode(de.LINE_STRIP)}else r.isPoints?v.setMode(de.POINTS):r.isSprite&&v.setMode(de.TRIANGLES);if(r.isInstancedMesh)v.renderInstances(d,m,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(d,m,t)}else v.render(d,m)},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===Qn&&!1===e.forceSinglePass?(e.side=Zn,e.needsUpdate=!0,Ce(e,t,n),e.side=Kn,e.needsUpdate=!0,Ce(e,t,n),e.side=Qn):Ce(e,t,n)}p=ne.get(e),p.init(),m.push(p),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(p.pushLight(e),e.castShadow&&p.pushShadow(e))})),p.setupLights(g.useLegacyLights),e.traverse((function(t){const i=t.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++)n(i[r],e,t);else n(i,e,t)})),m.pop(),p=null};let be=null;function we(){Me.stop()}function _e(){Me.start()}const Me=new Sc;function Ee(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)p.pushLight(e),e.castShadow&&p.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||D.intersectsSprite(e)){i&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);const t=Q.update(e),r=e.material;r.visible&&d.push(e,t,r,n,F.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||D.intersectsObject(e))){e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame);const t=Q.update(e),r=e.material;if(i&&(null===t.boundingSphere&&t.computeBoundingSphere(),F.copy(t.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(B)),Array.isArray(r)){const i=t.groups;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=r[a.materialIndex];o&&o.visible&&d.push(e,t,o,n,F.z,a)}}else r.visible&&d.push(e,t,r,n,F.z,null)}const r=e.children;for(let e=0,s=r.length;e<s;e++)Ee(r[e],t,n,i)}function Se(e,t,n,i){const r=e.opaque,s=e.transmissive,o=e.transparent;p.setupLightsView(n),!0===N&&ie.setGlobalState(g.clippingPlanes,n),s.length>0&&function(e,t,n,i){if(null===U){const e=V.isWebGL2;U=new Ba(1024,1024,{generateMipmaps:!0,type:H.has("EXT_color_buffer_half_float")?hr:rr,minFilter:nr,samples:e&&!0===a?4:0})}const r=g.getRenderTarget();g.setRenderTarget(U),g.clear();const s=g.toneMapping;g.toneMapping=ki,Te(e,n,i),X.updateMultisampleRenderTarget(U),X.updateRenderTargetMipmap(U);let o=!1;for(let e=0,r=t.length;e<r;e++){const r=t[e],s=r.object,a=r.geometry,l=r.material,c=r.group;if(l.side===Qn&&s.layers.test(i.layers)){const e=l.side;l.side=Zn,l.needsUpdate=!0,Ae(s,n,i,a,l,c),l.side=e,l.needsUpdate=!0,o=!0}}!0===o&&(X.updateMultisampleRenderTarget(U),X.updateRenderTargetMipmap(U)),g.setRenderTarget(r),g.toneMapping=s}(r,s,t,n),i&&q.viewport(M.copy(i)),r.length>0&&Te(r,t,n),s.length>0&&Te(s,t,n),o.length>0&&Te(o,t,n),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1)}function Te(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,s=e.length;r<s;r++){const s=e[r],a=s.object,o=s.geometry,l=null===i?s.material:i,c=s.group;a.layers.test(n.layers)&&Ae(a,t,n,o,l,c)}}function Ae(e,t,n,i,r,s){e.onBeforeRender(g,t,n,i,r,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(g,t,n,i,e,s),!0===r.transparent&&r.side===Qn&&!1===r.forceSinglePass?(r.side=Zn,r.needsUpdate=!0,g.renderBufferDirect(n,t,i,r,e,s),r.side=Kn,r.needsUpdate=!0,g.renderBufferDirect(n,t,i,r,e,s),r.side=Qn):g.renderBufferDirect(n,t,i,r,e,s),e.onAfterRender(g,t,n,i,r,s)}function Ce(e,t,n){!0!==t.isScene&&(t=z);const i=j.get(e),r=p.state.lights,s=p.state.shadowsArray,a=r.state.version,o=$.getParameters(e,r.state,s,t,n),l=$.getProgramCacheKey(o);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?J:Y).get(e.envMap||i.environment),void 0===c&&(e.addEventListener("dispose",xe),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return Ie(e,o),u}else o.uniforms=$.getUniforms(e),e.onBuild(n,o,g),e.onBeforeCompile(o,g),u=$.acquireProgram(o,l),c.set(l,u),i.uniforms=o.uniforms;const h=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ie.uniform),Ie(e,o),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=u.getUniforms(),f=ch.seqWithValue(d.seq,h);return i.currentProgram=u,i.uniformsList=f,u}function Ie(e,t){const n=j.get(e);n.outputColorSpace=t.outputColorSpace,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Me.setAnimationLoop((function(e){be&&be(e)})),"undefined"!=typeof self&&Me.setContext(self),this.setAnimationLoop=function(e){be=e,me.setAnimationLoop(e),null===e?Me.stop():Me.start()},me.addEventListener("sessionstart",we),me.addEventListener("sessionend",_e),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(g,e,t,b),p=ne.get(e,m.length),p.init(),m.push(p),B.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),D.setFromProjectionMatrix(B),O=this.localClippingEnabled,N=ie.init(this.clippingPlanes,O),d=te.get(e,f.length),d.init(),f.push(d),Ee(e,t,0,g.sortObjects),d.finish(),!0===g.sortObjects&&d.sort(I,L),!0===N&&ie.beginShadows();const n=p.state.shadowsArray;if(re.render(n,e,t),!0===N&&ie.endShadows(),!0===this.info.autoReset&&this.info.reset(),se.render(d,e),p.setupLights(g.useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Se(d,e,i,i.viewport)}}else Se(d,e,t);null!==b&&(X.updateMultisampleRenderTarget(b),X.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(g,e,t),ue.resetDefaultState(),w=-1,_=null,m.pop(),p=m.length>0?m[m.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){j.get(e.texture).__webglTexture=t,j.get(e.depthTexture).__webglTexture=n;const i=j.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===H.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=j.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){b=e,v=t,x=n;let i=!0,r=null,s=!1,a=!1;if(e){const n=j.get(e);void 0!==n.__useDefaultFramebuffer?(q.bindFramebuffer(de.FRAMEBUFFER,null),i=!1):void 0===n.__webglFramebuffer?X.setupRenderTarget(e):n.__hasExternalTextures&&X.rebindTextures(e,j.get(e.texture).__webglTexture,j.get(e.depthTexture).__webglTexture);const o=e.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(a=!0);const l=j.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=l[t],s=!0):r=V.isWebGL2&&e.samples>0&&!1===X.useMultisampledRTT(e)?j.get(e).__webglMultisampledFramebuffer:l,M.copy(e.viewport),E.copy(e.scissor),S=e.scissorTest}else M.copy(R).multiplyScalar(C).floor(),E.copy(P).multiplyScalar(C).floor(),S=k;if(q.bindFramebuffer(de.FRAMEBUFFER,r)&&V.drawBuffers&&i&&q.drawBuffers(e,r),q.viewport(M),q.scissor(E),q.setScissorTest(S),s){const i=j.get(e.texture);de.framebufferTexture2D(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,de.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(a){const i=j.get(e.texture),r=t||0;de.framebufferTextureLayer(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}w=-1},this.readRenderTargetPixels=function(e,t,n,i,r,s,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=j.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){q.bindFramebuffer(de.FRAMEBUFFER,o);try{const a=e.texture,o=a.format,l=a.type;if(o!==gr&&ce.convert(o)!==de.getParameter(de.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===hr&&(H.has("EXT_color_buffer_half_float")||V.isWebGL2&&H.has("EXT_color_buffer_float"));if(!(l===rr||ce.convert(l)===de.getParameter(de.IMPLEMENTATION_COLOR_READ_TYPE)||l===ur&&(V.isWebGL2||H.has("OES_texture_float")||H.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&de.readPixels(t,n,i,r,ce.convert(o),ce.convert(l),s)}finally{const e=null!==b?j.get(b).__webglFramebuffer:null;q.bindFramebuffer(de.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),s=Math.floor(t.image.height*i);X.setTexture2D(t,0),de.copyTexSubImage2D(de.TEXTURE_2D,n,0,0,e.x,e.y,r,s),q.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i=0){const r=t.image.width,s=t.image.height,a=ce.convert(n.format),o=ce.convert(n.type);X.setTexture2D(n,0),de.pixelStorei(de.UNPACK_FLIP_Y_WEBGL,n.flipY),de.pixelStorei(de.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),de.pixelStorei(de.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?de.texSubImage2D(de.TEXTURE_2D,i,e.x,e.y,r,s,a,o,t.image.data):t.isCompressedTexture?de.compressedTexSubImage2D(de.TEXTURE_2D,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):de.texSubImage2D(de.TEXTURE_2D,i,e.x,e.y,a,o,t.image),0===i&&n.generateMipmaps&&de.generateMipmap(de.TEXTURE_2D),q.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i,r=0){if(g.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=ce.convert(i.format),c=ce.convert(i.type);let u;if(i.isData3DTexture)X.setTexture3D(i,0),u=de.TEXTURE_3D;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(i,0),u=de.TEXTURE_2D_ARRAY}de.pixelStorei(de.UNPACK_FLIP_Y_WEBGL,i.flipY),de.pixelStorei(de.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),de.pixelStorei(de.UNPACK_ALIGNMENT,i.unpackAlignment);const h=de.getParameter(de.UNPACK_ROW_LENGTH),d=de.getParameter(de.UNPACK_IMAGE_HEIGHT),p=de.getParameter(de.UNPACK_SKIP_PIXELS),f=de.getParameter(de.UNPACK_SKIP_ROWS),m=de.getParameter(de.UNPACK_SKIP_IMAGES),y=n.isCompressedTexture?n.mipmaps[0]:n.image;de.pixelStorei(de.UNPACK_ROW_LENGTH,y.width),de.pixelStorei(de.UNPACK_IMAGE_HEIGHT,y.height),de.pixelStorei(de.UNPACK_SKIP_PIXELS,e.min.x),de.pixelStorei(de.UNPACK_SKIP_ROWS,e.min.y),de.pixelStorei(de.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?de.texSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,c,y.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,y.data)):de.texSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,c,y),de.pixelStorei(de.UNPACK_ROW_LENGTH,h),de.pixelStorei(de.UNPACK_IMAGE_HEIGHT,d),de.pixelStorei(de.UNPACK_SKIP_PIXELS,p),de.pixelStorei(de.UNPACK_SKIP_ROWS,f),de.pixelStorei(de.UNPACK_SKIP_IMAGES,m),0===r&&i.generateMipmaps&&de.generateMipmap(u),q.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?X.setTextureCube(e,0):e.isData3DTexture?X.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?X.setTexture2DArray(e,0):X.setTexture2D(e,0),q.unbindTexture()},this.resetState=function(){v=0,x=0,b=null,q.reset(),ue.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Ms?ys:gs}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ys?Ms:Es}}class id extends nd{}id.prototype.isWebGL1Renderer=!0;class rd{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new dl(e),this.density=t}clone(){return new rd(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class sd{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new dl(e),this.near=t,this.far=n}clone(){return new sd(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class ad extends Xo{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class od{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Hs,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=sa()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sa()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sa()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ld=new Wa;class cd{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ld.fromBufferAttribute(this,t),ld.applyMatrix4(e),this.setXYZ(t,ld.x,ld.y,ld.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ld.fromBufferAttribute(this,t),ld.applyNormalMatrix(e),this.setXYZ(t,ld.x,ld.y,ld.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ld.fromBufferAttribute(this,t),ld.transformDirection(e),this.setXYZ(t,ld.x,ld.y,ld.z);return this}setX(e,t){return this.normalized&&(t=pa(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=pa(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=pa(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=pa(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=da(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=da(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=da(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=da(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=pa(t,this.array),n=pa(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=pa(t,this.array),n=pa(n,this.array),i=pa(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=pa(t,this.array),n=pa(n,this.array),i=pa(i,this.array),r=pa(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new _l(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new cd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ud extends ol{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new dl(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let hd;const dd=new Wa,pd=new Wa,fd=new Wa,md=new ma,gd=new ma,yd=new _o,vd=new Wa,xd=new Wa,bd=new Wa,wd=new ma,_d=new ma,Md=new ma;class Ed extends Xo{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===hd){hd=new zl;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new od(e,5);hd.setIndex([0,1,2,0,2,3]),hd.setAttribute("position",new cd(t,3,0,!1)),hd.setAttribute("uv",new cd(t,2,3,!1))}this.geometry=hd,this.material=void 0!==e?e:new ud,this.center=new ma(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),pd.setFromMatrixScale(this.matrixWorld),yd.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),fd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&pd.multiplyScalar(-fd.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;Sd(vd.set(-.5,-.5,0),fd,s,pd,i,r),Sd(xd.set(.5,-.5,0),fd,s,pd,i,r),Sd(bd.set(.5,.5,0),fd,s,pd,i,r),wd.set(0,0),_d.set(1,0),Md.set(1,1);let a=e.ray.intersectTriangle(vd,xd,bd,!1,dd);if(null===a&&(Sd(xd.set(-.5,.5,0),fd,s,pd,i,r),_d.set(0,1),a=e.ray.intersectTriangle(vd,bd,xd,!1,dd),null===a))return;const o=e.ray.origin.distanceTo(dd);o<e.near||o>e.far||t.push({distance:o,point:dd.clone(),uv:sl.getInterpolation(dd,vd,xd,bd,wd,_d,Md,new ma),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Sd(e,t,n,i,r,s){md.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(gd.x=s*md.x-r*md.y,gd.y=r*md.x+s*md.y):gd.copy(md),e.copy(t),e.x+=gd.x,e.y+=gd.y,e.applyMatrix4(yd)}const Td=new Wa,Ad=new Wa;class Cd extends Xo{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Td.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Td);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Td.setFromMatrixPosition(e.matrixWorld),Ad.setFromMatrixPosition(this.matrixWorld);const n=Td.distanceTo(Ad)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r;i++){let e=t[i].distance;if(t[i].object.visible&&(e-=e*t[i].hysteresis),!(n>=e))break;t[i-1].object.visible=!1,t[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,i=n.length;e<i;e++){const i=n[e];t.object.levels.push({object:i.object.uuid,distance:i.distance,hysteresis:i.hysteresis})}return t}}const Id=new Wa,Ld=new Ua,Rd=new Ua,Pd=new Wa,kd=new _o,Dd=new Wa,Nd=new po;class Od extends rc{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new _o,this.bindMatrixInverse=new _o,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Ya),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)Dd.fromBufferAttribute(t,e),this.applyBoneTransform(e,Dd),this.boundingBox.expandByPoint(Dd)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new po),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)Dd.fromBufferAttribute(t,e),this.applyBoneTransform(e,Dd),this.boundingSphere.expandByPoint(Dd)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}raycast(e,t){null===this.boundingSphere&&this.computeBoundingSphere(),Nd.copy(this.boundingSphere),Nd.applyMatrix4(this.matrixWorld),!1!==e.ray.intersectsSphere(Nd)&&this._computeIntersections(e,t)}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ua,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;Ld.fromBufferAttribute(i.attributes.skinIndex,e),Rd.fromBufferAttribute(i.attributes.skinWeight,e),Id.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const i=Rd.getComponent(e);if(0!==i){const r=Ld.getComponent(e);kd.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(Pd.copy(Id).applyMatrix4(kd),i)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Ud extends Xo{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Bd extends Oa{constructor(e=null,t=1,n=1,i,r,s,a,o,l=Yi,c=Yi,u,h){super(null,s,a,o,l,c,i,r,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Fd=new _o,zd=new _o;class Gd{constructor(e=[],t=[]){this.uuid=sa(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new _o)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new _o;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=e.length;i<r;i++){const r=e[i]?e[i].matrixWorld:zd;Fd.multiplyMatrices(r,t[i]),Fd.toArray(n,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new Gd(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=ua(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Bd(t,e,e,gr,ur);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new Ud),this.bones.push(r),this.boneInverses.push((new _o).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const s=n[i];e.boneInverses.push(s.toArray())}return e}}class Hd extends _l{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Vd=new _o,qd=new _o,Wd=[],jd=new Ya,Xd=new _o,Yd=new rc,Jd=new po;class Kd extends rc{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Hd(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<n;e++)this.setMatrixAt(e,Xd)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Ya),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Vd),jd.copy(e.boundingBox).applyMatrix4(Vd),this.boundingBox.union(jd)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new po),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Vd),Jd.copy(e.boundingSphere).applyMatrix4(Vd),this.boundingSphere.union(Jd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Yd.geometry=this.geometry,Yd.material=this.material,void 0!==Yd.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Jd.copy(this.boundingSphere),Jd.applyMatrix4(n),!1!==e.ray.intersectsSphere(Jd)))for(let r=0;r<i;r++){this.getMatrixAt(r,Vd),qd.multiplyMatrices(n,Vd),Yd.matrixWorld=qd,Yd.raycast(e,Wd);for(let e=0,n=Wd.length;e<n;e++){const n=Wd[e];n.instanceId=r,n.object=this,t.push(n)}Wd.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Hd(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Zd extends ol{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new dl(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Qd=new Wa,$d=new Wa,ep=new _o,tp=new wo,np=new po;class ip extends Xo{constructor(e=new zl,t=new Zd){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)Qd.fromBufferAttribute(t,e-1),$d.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Qd.distanceTo($d);e.setAttribute("lineDistance",new Rl(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),np.copy(n.boundingSphere),np.applyMatrix4(i),np.radius+=r,!1===e.ray.intersectsSphere(np))return;ep.copy(i).invert(),tp.copy(e.ray).applyMatrix4(ep);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new Wa,c=new Wa,u=new Wa,h=new Wa,d=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p)for(let n=Math.max(0,s.start),i=Math.min(p.count,s.start+s.count)-1;n<i;n+=d){const i=p.getX(n),r=p.getX(n+1);if(l.fromBufferAttribute(f,i),c.fromBufferAttribute(f,r),tp.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const s=e.ray.origin.distanceTo(h);s<e.near||s>e.far||t.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,s.start),i=Math.min(f.count,s.start+s.count)-1;n<i;n+=d){if(l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1),tp.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(h);i<e.near||i>e.far||t.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const rp=new Wa,sp=new Wa;class ap extends ip{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)rp.fromBufferAttribute(t,e),sp.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+rp.distanceTo(sp);e.setAttribute("lineDistance",new Rl(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class op extends ip{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class lp extends ol{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new dl(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const cp=new _o,up=new wo,hp=new po,dp=new Wa;class pp extends Xo{constructor(e=new zl,t=new lp){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),hp.copy(n.boundingSphere),hp.applyMatrix4(i),hp.radius+=r,!1===e.ray.intersectsSphere(hp))return;cp.copy(i).invert(),up.copy(e.ray).applyMatrix4(cp);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=n.index,c=n.attributes.position;if(null!==l)for(let n=Math.max(0,s.start),r=Math.min(l.count,s.start+s.count);n<r;n++){const r=l.getX(n);dp.fromBufferAttribute(c,r),fp(dp,r,o,i,e,t,this)}else for(let n=Math.max(0,s.start),r=Math.min(c.count,s.start+s.count);n<r;n++)dp.fromBufferAttribute(c,n),fp(dp,n,o,i,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function fp(e,t,n,i,r,s,a){const o=up.distanceSqToPoint(e);if(o<n){const n=new Wa;up.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:a})}}class mp extends Oa{constructor(e,t,n,i,r,s,a,o,l){super(e,t,n,i,r,s,a,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==s?s:$i,this.magFilter=void 0!==r?r:$i,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class gp extends Oa{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=Yi,this.minFilter=Yi,this.generateMipmaps=!1,this.needsUpdate=!0}}class yp extends Oa{constructor(e,t,n,i,r,s,a,o,l,c,u,h){super(null,s,a,o,l,c,i,r,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class vp extends yp{constructor(e,t,n,i,r,s){super(e,t,n,r,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ji}}class xp extends Oa{constructor(e,t,n,i,r,s,a,o,l){super(e,t,n,i,r,s,a,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class bp{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let s;s=t||e*n[r-1];let a,o=0,l=r-1;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),a=n[i]-s,a<0)o=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===s)return i/(r-1);const c=n[i];return(i+(s-c)/(n[i+1]-c))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),a=this.getPoint(r),o=t||(s.isVector2?new ma:new Wa);return o.copy(a).sub(s).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Wa,i=[],r=[],s=[],a=new Wa,o=new _o;for(let t=0;t<=e;t++){const n=t/e;i[t]=this.getTangentAt(n,new Wa)}r[0]=new Wa,s[0]=new Wa;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),s[0].crossVectors(i[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),s[t]=s[t-1].clone(),a.crossVectors(i[t-1],i[t]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(aa(i[t-1].dot(i[t]),-1,1));r[t].applyMatrix4(o.makeRotationAxis(a,e))}s[t].crossVectors(i[t],r[t])}if(!0===t){let t=Math.acos(aa(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(a.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],t*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class wp extends bp{constructor(e=0,t=0,n=1,i=1,r=0,s=2*Math.PI,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){const n=t||new ma,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);const a=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class _p extends wp{constructor(e,t,n,i,r,s){super(e,t,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}}function Mp(){let e=0,t=0,n=0,i=0;function r(r,s,a,o){e=r,t=a,n=-3*r+3*s-2*a-o,i=2*r-2*s+a+o}return{initCatmullRom:function(e,t,n,i,s){r(t,n,s*(n-e),s*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,s,a,o){let l=(t-e)/s-(n-e)/(s+a)+(n-t)/a,c=(n-t)/a-(i-t)/(a+o)+(i-n)/o;l*=a,c*=a,r(t,n,l,c)},calc:function(r){const s=r*r;return e+t*r+n*s+i*(s*r)}}}const Ep=new Wa,Sp=new Mp,Tp=new Mp,Ap=new Mp;class Cp extends bp{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new Wa){const n=t,i=this.points,r=i.length,s=(r-(this.closed?0:1))*e;let a,o,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?a=i[(l-1)%r]:(Ep.subVectors(i[0],i[1]).add(i[0]),a=Ep);const u=i[l%r],h=i[(l+1)%r];if(this.closed||l+2<r?o=i[(l+2)%r]:(Ep.subVectors(i[r-1],i[r-2]).add(i[r-1]),o=Ep),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),i=Math.pow(h.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),Sp.initNonuniformCatmullRom(a.x,u.x,h.x,o.x,t,n,i),Tp.initNonuniformCatmullRom(a.y,u.y,h.y,o.y,t,n,i),Ap.initNonuniformCatmullRom(a.z,u.z,h.z,o.z,t,n,i)}else"catmullrom"===this.curveType&&(Sp.initCatmullRom(a.x,u.x,h.x,o.x,this.tension),Tp.initCatmullRom(a.y,u.y,h.y,o.y,this.tension),Ap.initCatmullRom(a.z,u.z,h.z,o.z,this.tension));return n.set(Sp.calc(c),Tp.calc(c),Ap.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Wa).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Ip(e,t,n,i,r){const s=.5*(i-t),a=.5*(r-n),o=e*e;return(2*n-2*i+s+a)*(e*o)+(-3*n+3*i-2*s-a)*o+s*e+n}function Lp(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Rp(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}class Pp extends bp{constructor(e=new ma,t=new ma,n=new ma,i=new ma){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new ma){const n=t,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return n.set(Rp(e,i.x,r.x,s.x,a.x),Rp(e,i.y,r.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class kp extends bp{constructor(e=new Wa,t=new Wa,n=new Wa,i=new Wa){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Wa){const n=t,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return n.set(Rp(e,i.x,r.x,s.x,a.x),Rp(e,i.y,r.y,s.y,a.y),Rp(e,i.z,r.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Dp extends bp{constructor(e=new ma,t=new ma){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ma){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ma){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Np extends bp{constructor(e=new Wa,t=new Wa){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Wa){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Wa){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Op extends bp{constructor(e=new ma,t=new ma,n=new ma){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ma){const n=t,i=this.v0,r=this.v1,s=this.v2;return n.set(Lp(e,i.x,r.x,s.x),Lp(e,i.y,r.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Up extends bp{constructor(e=new Wa,t=new Wa,n=new Wa){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Wa){const n=t,i=this.v0,r=this.v1,s=this.v2;return n.set(Lp(e,i.x,r.x,s.x),Lp(e,i.y,r.y,s.y),Lp(e,i.z,r.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Bp extends bp{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ma){const n=t,i=this.points,r=(i.length-1)*e,s=Math.floor(r),a=r-s,o=i[0===s?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],u=i[s>i.length-3?i.length-1:s+2];return n.set(Ip(a,o.x,l.x,c.x,u.x),Ip(a,o.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new ma).fromArray(n))}return this}}var Fp=Object.freeze({__proto__:null,ArcCurve:_p,CatmullRomCurve3:Cp,CubicBezierCurve:Pp,CubicBezierCurve3:kp,EllipseCurve:wp,LineCurve:Dp,LineCurve3:Np,QuadraticBezierCurve:Op,QuadraticBezierCurve3:Up,SplineCurve:Bp});class zp extends bp{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Dp(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,s=this.curves[r],a=s.getLength(),o=0===a?0:1-e/a;return s.getPointAt(o,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],a=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let e=0;e<o.length;e++){const i=o[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Fp[n.type]).fromJSON(n))}return this}}class Gp extends zp{constructor(e){super(),this.type="Path",this.currentPoint=new ma,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Dp(this.currentPoint.clone(),new ma(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new Op(this.currentPoint.clone(),new ma(e,t),new ma(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,s){const a=new Pp(this.currentPoint.clone(),new ma(e,t),new ma(n,i),new ma(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Bp(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,n,i,r,s),this}absarc(e,t,n,i,r,s){return this.absellipse(e,t,n,n,i,r,s),this}ellipse(e,t,n,i,r,s,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,s,a,o),this}absellipse(e,t,n,i,r,s,a,o){const l=new wp(e,t,n,i,r,s,a,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Hp extends zl{constructor(e=[new ma(0,-.5),new ma(.5,0),new ma(0,.5)],t=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=aa(i,0,2*Math.PI);const r=[],s=[],a=[],o=[],l=[],c=1/t,u=new Wa,h=new ma,d=new Wa,p=new Wa,f=new Wa;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),o.push(d.x,d.y,d.z),f.copy(p)}for(let r=0;r<=t;r++){const d=n+r*c*i,p=Math.sin(d),f=Math.cos(d);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*p,u.y=e[n].y,u.z=e[n].x*f,s.push(u.x,u.y,u.z),h.x=r/t,h.y=n/(e.length-1),a.push(h.x,h.y);const i=o[3*n+0]*p,c=o[3*n+1],d=o[3*n+0]*f;l.push(i,c,d)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const i=t+n*e.length,s=i,a=i+e.length,o=i+e.length+1,l=i+1;r.push(s,a,l),r.push(o,l,a)}this.setIndex(r),this.setAttribute("position",new Rl(s,3)),this.setAttribute("uv",new Rl(a,2)),this.setAttribute("normal",new Rl(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hp(e.points,e.segments,e.phiStart,e.phiLength)}}class Vp extends Hp{constructor(e=1,t=1,n=4,i=8){const r=new Gp;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Vp(e.radius,e.length,e.capSegments,e.radialSegments)}}class qp extends zl{constructor(e=1,t=32,n=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],s=[],a=[],o=[],l=new Wa,c=new ma;s.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let r=0,u=3;r<=t;r++,u+=3){const h=n+r/t*i;l.x=e*Math.cos(h),l.y=e*Math.sin(h),s.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(s[u]/e+1)/2,c.y=(s[u+1]/e+1)/2,o.push(c.x,c.y)}for(let e=1;e<=t;e++)r.push(e,e+1,0);this.setIndex(r),this.setAttribute("position",new Rl(s,3)),this.setAttribute("normal",new Rl(a,3)),this.setAttribute("uv",new Rl(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qp(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Wp extends zl{constructor(e=1,t=1,n=1,i=32,r=1,s=!1,a=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function y(n){const r=p,s=new ma,f=new Wa;let y=0;const v=!0===n?e:t,x=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,m*x,0),h.push(0,x,0),d.push(.5,.5),p++;const b=p;for(let e=0;e<=i;e++){const t=e/i*o+a,n=Math.cos(t),r=Math.sin(t);f.x=v*r,f.y=m*x,f.z=v*n,u.push(f.x,f.y,f.z),h.push(0,x,0),s.x=.5*n+.5,s.y=.5*r*x+.5,d.push(s.x,s.y),p++}for(let e=0;e<i;e++){const t=r+e,i=b+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),y+=3}l.addGroup(g,y,!0===n?1:2),g+=y}!function(){const s=new Wa,y=new Wa;let v=0;const x=(t-e)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,v=g*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*o+a,l=Math.sin(r),f=Math.cos(r);y.x=v*l,y.y=-g*n+m,y.z=v*f,u.push(y.x,y.y,y.z),s.set(l,x,f).normalize(),h.push(s.x,s.y,s.z),d.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<i;e++)for(let t=0;t<r;t++){const n=f[t][e],i=f[t+1][e],r=f[t+1][e+1],s=f[t][e+1];c.push(n,i,s),c.push(i,r,s),v+=6}l.addGroup(g,v,0),g+=v}(),!1===s&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Rl(u,3)),this.setAttribute("normal",new Rl(h,3)),this.setAttribute("uv",new Rl(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jp extends Wp{constructor(e=1,t=1,n=32,i=1,r=!1,s=0,a=2*Math.PI){super(0,e,t,n,i,r,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:a}}static fromJSON(e){return new jp(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Xp extends zl{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],s=[];function a(e,t,n,i){const r=i+1,s=[];for(let i=0;i<=r;i++){s[i]=[];const a=e.clone().lerp(n,i/r),o=t.clone().lerp(n,i/r),l=r-i;for(let e=0;e<=l;e++)s[i][e]=0===e&&i===r?a:a.clone().lerp(o,e/l)}for(let e=0;e<r;e++)for(let t=0;t<2*(r-e)-1;t++){const n=Math.floor(t/2);t%2==0?(o(s[e][n+1]),o(s[e+1][n]),o(s[e][n])):(o(s[e][n+1]),o(s[e+1][n+1]),o(s[e+1][n]))}}function o(e){r.push(e.x,e.y,e.z)}function l(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new Wa,i=new Wa,r=new Wa;for(let s=0;s<t.length;s+=3)l(t[s+0],n),l(t[s+1],i),l(t[s+2],r),a(n,i,r,e)}(i),function(e){const t=new Wa;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new Wa;for(let n=0;n<r.length;n+=3){e.x=r[n+0],e.y=r[n+1],e.z=r[n+2];const i=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);s.push(i,1-a)}var t;(function(){const e=new Wa,t=new Wa,n=new Wa,i=new Wa,a=new ma,o=new ma,l=new ma;for(let h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(s[d+0],s[d+1]),o.set(s[d+2],s[d+3]),l.set(s[d+4],s[d+5]),i.copy(e).add(t).add(n).divideScalar(3);const p=u(i);c(a,d+0,e,p),c(o,d+2,t,p),c(l,d+4,n,p)}})(),function(){for(let e=0;e<s.length;e+=6){const t=s[e+0],n=s[e+2],i=s[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),i<.2&&(s[e+4]+=1))}}()}(),this.setAttribute("position",new Rl(r,3)),this.setAttribute("normal",new Rl(r.slice(),3)),this.setAttribute("uv",new Rl(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xp(e.vertices,e.indices,e.radius,e.details)}}class Yp extends Xp{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Yp(e.radius,e.detail)}}const Jp=new Wa,Kp=new Wa,Zp=new Wa,Qp=new sl;class $p extends zl{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,i=Math.pow(10,n),r=Math.cos(ia*t),s=e.getIndex(),a=e.getAttribute("position"),o=s?s.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<o;e+=3){s?(l[0]=s.getX(e),l[1]=s.getX(e+1),l[2]=s.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=Qp;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),o.fromBufferAttribute(a,l[2]),Qp.getNormal(Zp),u[0]=`${Math.round(t.x*i)},${Math.round(t.y*i)},${Math.round(t.z*i)}`,u[1]=`${Math.round(n.x*i)},${Math.round(n.y*i)},${Math.round(n.z*i)}`,u[2]=`${Math.round(o.x*i)},${Math.round(o.y*i)},${Math.round(o.z*i)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],i=u[t],s=Qp[c[e]],a=Qp[c[t]],o=`${n}_${i}`,p=`${i}_${n}`;p in h&&h[p]?(Zp.dot(h[p].normal)<=r&&(d.push(s.x,s.y,s.z),d.push(a.x,a.y,a.z)),h[p]=null):o in h||(h[o]={index0:l[e],index1:l[t],normal:Zp.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];Jp.fromBufferAttribute(a,t),Kp.fromBufferAttribute(a,n),d.push(Jp.x,Jp.y,Jp.z),d.push(Kp.x,Kp.y,Kp.z)}this.setAttribute("position",new Rl(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ef extends Gp{constructor(e){super(e),this.uuid=sa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Gp).fromJSON(n))}return this}}function tf(e,t,n,i,r){let s,a;if(r===function(e,t,n,i){let r=0;for(let s=t,a=n-i;s<n;s+=i)r+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return r}(e,t,n,i)>0)for(s=t;s<n;s+=i)a=Mf(s,e[s],e[s+1],a);else for(s=n-i;s>=t;s-=i)a=Mf(s,e[s],e[s+1],a);return a&&yf(a,a.next)&&(Ef(a),a=a.next),a}function nf(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!yf(i,i.next)&&0!==gf(i.prev,i,i.next))i=i.next;else{if(Ef(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function rf(e,t,n,i,r,s,a){if(!e)return;!a&&s&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=df(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,s,a,o,l,c=1;do{for(n=e,e=null,s=null,a=0;n;){for(a++,i=n,o=0,t=0;t<c&&(o++,i=i.nextZ,i);t++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(a>1)}(r)}(e,i,r,s);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,s?af(e,i,r,s):sf(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Ef(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?rf(e=of(nf(e),t,n),t,n,i,r,s,2):2===a&&lf(e,t,n,i,r,s):rf(nf(e),t,n,i,r,s,1);break}}function sf(e){const t=e.prev,n=e,i=e.next;if(gf(t,n,i)>=0)return!1;const r=t.x,s=n.x,a=i.x,o=t.y,l=n.y,c=i.y,u=r<s?r<a?r:a:s<a?s:a,h=o<l?o<c?o:c:l<c?l:c,d=r>s?r>a?r:a:s>a?s:a,p=o>l?o>c?o:c:l>c?l:c;let f=i.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&ff(r,o,s,l,a,c,f.x,f.y)&&gf(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function af(e,t,n,i){const r=e.prev,s=e,a=e.next;if(gf(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,h=s.y,d=a.y,p=o<l?o<c?o:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=o>l?o>c?o:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,y=df(p,f,t,n,i),v=df(m,g,t,n,i);let x=e.prevZ,b=e.nextZ;for(;x&&x.z>=y&&b&&b.z<=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==a&&ff(o,u,l,h,c,d,x.x,x.y)&&gf(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==a&&ff(o,u,l,h,c,d,b.x,b.y)&&gf(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==a&&ff(o,u,l,h,c,d,x.x,x.y)&&gf(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==a&&ff(o,u,l,h,c,d,b.x,b.y)&&gf(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function of(e,t,n){let i=e;do{const r=i.prev,s=i.next.next;!yf(r,s)&&vf(r,i,i.next,s)&&wf(r,s)&&wf(s,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(s.i/n|0),Ef(i),Ef(i.next),i=e=s),i=i.next}while(i!==e);return nf(i)}function lf(e,t,n,i,r,s){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&mf(a,e)){let o=_f(a,e);return a=nf(a,a.next),o=nf(o,o.next),rf(a,t,n,i,r,s,0),void rf(o,t,n,i,r,s,0)}e=e.next}a=a.next}while(a!==e)}function cf(e,t){return e.x-t.x}function uf(e,t){const n=function(e,t){let n,i=t,r=-1/0;const s=e.x,a=e.y;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){const e=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=s&&e>r&&(r=e,n=i.x<i.next.x?i:i.next,e===s))return n}i=i.next}while(i!==t);if(!n)return null;const o=n,l=n.x,c=n.y;let u,h=1/0;i=n;do{s>=i.x&&i.x>=l&&s!==i.x&&ff(a<c?s:r,a,l,c,a<c?r:s,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(s-i.x),wf(i,e)&&(u<h||u===h&&(i.x>n.x||i.x===n.x&&hf(n,i)))&&(n=i,h=u)),i=i.next}while(i!==o);return n}(e,t);if(!n)return t;const i=_f(n,e);return nf(i,i.next),nf(n,n.next)}function hf(e,t){return gf(e.prev,e,t.prev)<0&&gf(t.next,e,e.next)<0}function df(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function pf(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function ff(e,t,n,i,r,s,a,o){return(r-a)*(t-o)>=(e-a)*(s-o)&&(e-a)*(i-o)>=(n-a)*(t-o)&&(n-a)*(s-o)>=(r-a)*(i-o)}function mf(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&vf(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(wf(e,t)&&wf(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(gf(e.prev,e,t.prev)||gf(e,t.prev,t))||yf(e,t)&&gf(e.prev,e,e.next)>0&&gf(t.prev,t,t.next)>0)}function gf(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function yf(e,t){return e.x===t.x&&e.y===t.y}function vf(e,t,n,i){const r=bf(gf(e,t,n)),s=bf(gf(e,t,i)),a=bf(gf(n,i,e)),o=bf(gf(n,i,t));return r!==s&&a!==o||!(0!==r||!xf(e,n,t))||!(0!==s||!xf(e,i,t))||!(0!==a||!xf(n,e,i))||!(0!==o||!xf(n,t,i))}function xf(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function bf(e){return e>0?1:e<0?-1:0}function wf(e,t){return gf(e.prev,e,e.next)<0?gf(e,t,e.next)>=0&&gf(e,e.prev,t)>=0:gf(e,t,e.prev)<0||gf(e,e.next,t)<0}function _f(e,t){const n=new Sf(e.i,e.x,e.y),i=new Sf(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function Mf(e,t,n,i){const r=new Sf(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ef(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Sf(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Tf{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return Tf.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];Af(e),Cf(n,e);let s=e.length;t.forEach(Af);for(let e=0;e<t.length;e++)i.push(s),s+=t[e].length,Cf(n,t[e]);const a=function(e,t,n=2){const i=t&&t.length,r=i?t[0]*n:e.length;let s=tf(e,0,r,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,h,d,p;if(i&&(s=function(e,t,n,i){const r=[];let s,a,o,l,c;for(s=0,a=t.length;s<a;s++)o=t[s]*i,l=s<a-1?t[s+1]*i:e.length,c=tf(e,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(pf(c));for(r.sort(cf),s=0;s<r.length;s++)n=uf(r[s],n);return n}(e,t,s,n)),e.length>80*n){o=c=e[0],l=u=e[1];for(let t=n;t<r;t+=n)h=e[t],d=e[t+1],h<o&&(o=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-o,u-l),p=0!==p?32767/p:0}return rf(s,a,n,o,l,p,0),a}(n,i);for(let e=0;e<a.length;e+=3)r.push(a.slice(e,e+3));return r}}function Af(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Cf(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class If extends zl{constructor(e=new ef([new ma(.5,.5),new ma(-.5,.5),new ma(-.5,-.5),new ma(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let t=0,n=e.length;t<n;t++)s(e[t]);function s(e){const s=[],a=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Lf;let g,y,v,x,b,w=!1;f&&(g=f.getSpacedPoints(o),w=!0,c=!1,y=f.computeFrenetFrames(o,!1),v=new Wa,x=new Wa,b=new Wa),c||(p=0,u=0,h=0,d=0);const _=e.extractPoints(a);let M=_.shape;const E=_.holes;if(!Tf.isClockWise(M)){M=M.reverse();for(let e=0,t=E.length;e<t;e++){const t=E[e];Tf.isClockWise(t)&&(E[e]=t.reverse())}}const S=Tf.triangulateShape(M,E),T=M;for(let e=0,t=E.length;e<t;e++){const t=E[e];M=M.concat(t)}function A(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const C=M.length,I=S.length;function L(e,t,n){let i,r,s;const a=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+o*o,h=a*c-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-o/h,f=t.y+a/h,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(a*c-o*l);i=p+a*m-e.x,r=f+o*m-e.y;const g=i*i+r*r;if(g<=2)return new ma(i,r);s=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(i=-o,r=a,s=Math.sqrt(u)):(i=a,r=o,s=Math.sqrt(u/2))}return new ma(i/s,r/s)}const R=[];for(let e=0,t=T.length,n=t-1,i=e+1;e<t;e++,n++,i++)n===t&&(n=0),i===t&&(i=0),R[e]=L(T[e],T[n],T[i]);const P=[];let k,D=R.concat();for(let e=0,t=E.length;e<t;e++){const t=E[e];k=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),k[e]=L(t[e],t[i],t[r]);P.push(k),D=D.concat(k)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=T.length;e<t;e++){const t=A(T[e],R[e],i);U(t.x,t.y,-n)}for(let e=0,t=E.length;e<t;e++){const t=E[e];k=P[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],k[e],i);U(r.x,r.y,-n)}}}const N=h+d;for(let e=0;e<C;e++){const t=c?A(M[e],D[e],N):M[e];w?(x.copy(y.normals[0]).multiplyScalar(t.x),v.copy(y.binormals[0]).multiplyScalar(t.y),b.copy(g[0]).add(x).add(v),U(b.x,b.y,b.z)):U(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<C;t++){const n=c?A(M[t],D[t],N):M[t];w?(x.copy(y.normals[e]).multiplyScalar(n.x),v.copy(y.binormals[e]).multiplyScalar(n.y),b.copy(g[e]).add(x).add(v),U(b.x,b.y,b.z)):U(n.x,n.y,l/o*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=T.length;e<t;e++){const t=A(T[e],R[e],i);U(t.x,t.y,l+n)}for(let e=0,t=E.length;e<t;e++){const t=E[e];k=P[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],k[e],i);w?U(r.x,r.y+g[o-1].y,g[o-1].x+n):U(r.x,r.y,l+n)}}}function O(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=C*e,s=C*(e+1);F(t+i+n,t+r+n,t+r+s,t+i+s)}}}function U(e,t,n){s.push(e),s.push(t),s.push(n)}function B(e,t,r){z(e),z(t),z(r);const s=i.length/3,a=m.generateTopUV(n,i,s-3,s-2,s-1);G(a[0]),G(a[1]),G(a[2])}function F(e,t,r,s){z(e),z(t),z(s),z(t),z(r),z(s);const a=i.length/3,o=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);G(o[0]),G(o[1]),G(o[3]),G(o[1]),G(o[2]),G(o[3])}function z(e){i.push(s[3*e+0]),i.push(s[3*e+1]),i.push(s[3*e+2])}function G(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(c){let e=0,t=C*e;for(let e=0;e<I;e++){const n=S[e];B(n[2]+t,n[1]+t,n[0]+t)}e=o+2*p,t=C*e;for(let e=0;e<I;e++){const n=S[e];B(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<I;e++){const t=S[e];B(t[2],t[1],t[0])}for(let e=0;e<I;e++){const t=S[e];B(t[0]+C*o,t[1]+C*o,t[2]+C*o)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;O(T,t),t+=T.length;for(let e=0,n=E.length;e<n;e++){const n=E[e];O(n,t),t+=n.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new Rl(i,3)),this.setAttribute("uv",new Rl(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){const i=e[t];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new Fp[i.type]).fromJSON(i)),new If(n,e.options)}}const Lf={generateTopUV:function(e,t,n,i,r){const s=t[3*n],a=t[3*n+1],o=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new ma(s,a),new ma(o,l),new ma(c,u)]},generateSideWallUV:function(e,t,n,i,r,s){const a=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*s],g=t[3*s+1],y=t[3*s+2];return Math.abs(o-u)<Math.abs(a-c)?[new ma(a,1-l),new ma(c,1-h),new ma(d,1-f),new ma(m,1-y)]:[new ma(o,1-l),new ma(u,1-h),new ma(p,1-f),new ma(g,1-y)]}};class Rf extends Xp{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rf(e.radius,e.detail)}}class Pf extends Xp{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pf(e.radius,e.detail)}}class kf extends zl{constructor(e=.5,t=1,n=32,i=1,r=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},n=Math.max(3,n);const a=[],o=[],l=[],c=[];let u=e;const h=(t-e)/(i=Math.max(1,i)),d=new Wa,p=new ma;for(let e=0;e<=i;e++){for(let e=0;e<=n;e++){const i=r+e/n*s;d.x=u*Math.cos(i),d.y=u*Math.sin(i),o.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,c.push(p.x,p.y)}u+=h}for(let e=0;e<i;e++){const t=e*(n+1);for(let e=0;e<n;e++){const i=e+t,r=i,s=i+n+1,o=i+n+2,l=i+1;a.push(r,s,l),a.push(s,o,l)}}this.setIndex(a),this.setAttribute("position",new Rl(o,3)),this.setAttribute("normal",new Rl(l,3)),this.setAttribute("uv",new Rl(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kf(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Df extends zl{constructor(e=new ef([new ma(0,.5),new ma(-.5,-.5),new ma(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],s=[];let a=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(a,o,t),a+=o,o=0;function l(e){const a=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Tf.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===Tf.isClockWise(t)&&(u[e]=t.reverse())}const h=Tf.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];i.push(t.x,t.y,0),r.push(0,0,1),s.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],i=t[0]+a,r=t[1]+a,s=t[2]+a;n.push(i,r,s),o+=3}}this.setIndex(n),this.setAttribute("position",new Rl(i,3)),this.setAttribute("normal",new Rl(r,3)),this.setAttribute("uv",new Rl(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new Df(n,e.curveSegments)}}class Nf extends zl{constructor(e=1,t=32,n=16,i=0,r=2*Math.PI,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(s+a,Math.PI);let l=0;const c=[],u=new Wa,h=new Wa,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){const g=[],y=d/n;let v=0;0===d&&0===s?v=.5/t:d===n&&o===Math.PI&&(v=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(i+o*r)*Math.sin(s+y*a),u.y=e*Math.cos(s+y*a),u.z=e*Math.sin(i+o*r)*Math.sin(s+y*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(o+v,1-y),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let i=0;i<t;i++){const t=c[e][i+1],r=c[e][i],a=c[e+1][i],l=c[e+1][i+1];(0!==e||s>0)&&d.push(t,r,l),(e!==n-1||o<Math.PI)&&d.push(r,a,l)}this.setIndex(d),this.setAttribute("position",new Rl(p,3)),this.setAttribute("normal",new Rl(f,3)),this.setAttribute("uv",new Rl(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Of extends Xp{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Of(e.radius,e.detail)}}class Uf extends zl{constructor(e=1,t=.4,n=12,i=48,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const s=[],a=[],o=[],l=[],c=new Wa,u=new Wa,h=new Wa;for(let s=0;s<=n;s++)for(let d=0;d<=i;d++){const p=d/i*r,f=s/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),a.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),h.subVectors(u,c).normalize(),o.push(h.x,h.y,h.z),l.push(d/i),l.push(s/n)}for(let e=1;e<=n;e++)for(let t=1;t<=i;t++){const n=(i+1)*e+t-1,r=(i+1)*(e-1)+t-1,a=(i+1)*(e-1)+t,o=(i+1)*e+t;s.push(n,r,o),s.push(r,a,o)}this.setIndex(s),this.setAttribute("position",new Rl(a,3)),this.setAttribute("normal",new Rl(o,3)),this.setAttribute("uv",new Rl(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uf(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Bf extends zl{constructor(e=1,t=.4,n=64,i=8,r=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);const a=[],o=[],l=[],c=[],u=new Wa,h=new Wa,d=new Wa,p=new Wa,f=new Wa,m=new Wa,g=new Wa;for(let a=0;a<=n;++a){const v=a/n*r*Math.PI*2;y(v,r,s,e,d),y(v+.01,r,s,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,s=-t*Math.cos(r),p=t*Math.sin(r);u.x=d.x+(s*g.x+p*f.x),u.y=d.y+(s*g.y+p*f.y),u.z=d.z+(s*g.z+p*f.z),o.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(a/n),c.push(e/i)}}for(let e=1;e<=n;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),s=(i+1)*e+t,o=(i+1)*(e-1)+t;a.push(n,r,o),a.push(r,s,o)}function y(e,t,n,i,r){const s=Math.cos(e),a=Math.sin(e),o=n/t*e,l=Math.cos(o);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(o)*.5}this.setIndex(a),this.setAttribute("position",new Rl(o,3)),this.setAttribute("normal",new Rl(l,3)),this.setAttribute("uv",new Rl(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bf(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Ff extends zl{constructor(e=new Up(new Wa(-1,-1,0),new Wa(-1,1,0),new Wa(1,1,0)),t=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const s=e.computeFrenetFrames(t,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new Wa,o=new Wa,l=new ma;let c=new Wa;const u=[],h=[],d=[],p=[];function f(r){c=e.getPointAt(r/t,c);const l=s.normals[r],d=s.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),s=-Math.cos(t);o.x=s*l.x+r*d.x,o.y=s*l.y+r*d.y,o.z=s*l.z+r*d.z,o.normalize(),h.push(o.x,o.y,o.z),a.x=c.x+n*o.x,a.y=c.y+n*o.y,a.z=c.z+n*o.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),s=(i+1)*e+t,a=(i+1)*(e-1)+t;p.push(n,r,a),p.push(r,s,a)}}()}(),this.setIndex(p),this.setAttribute("position",new Rl(u,3)),this.setAttribute("normal",new Rl(h,3)),this.setAttribute("uv",new Rl(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Ff((new Fp[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class zf extends zl{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new Wa,r=new Wa;if(null!==e.index){const s=e.attributes.position,a=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let o=0;o<3;o++){const l=a.getX(e+o),c=a.getX(e+(o+1)%3);i.fromBufferAttribute(s,l),r.fromBufferAttribute(s,c),!0===Gf(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const s=e.attributes.position;for(let e=0,a=s.count/3;e<a;e++)for(let a=0;a<3;a++){const o=3*e+a,l=3*e+(a+1)%3;i.fromBufferAttribute(s,o),r.fromBufferAttribute(s,l),!0===Gf(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Rl(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Gf(e,t,n){const i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var Hf=Object.freeze({__proto__:null,BoxGeometry:ac,CapsuleGeometry:Vp,CircleGeometry:qp,ConeGeometry:jp,CylinderGeometry:Wp,DodecahedronGeometry:Yp,EdgesGeometry:$p,ExtrudeGeometry:If,IcosahedronGeometry:Rf,LatheGeometry:Hp,OctahedronGeometry:Pf,PlaneGeometry:Ac,PolyhedronGeometry:Xp,RingGeometry:kf,ShapeGeometry:Df,SphereGeometry:Nf,TetrahedronGeometry:Of,TorusGeometry:Uf,TorusKnotGeometry:Bf,TubeGeometry:Ff,WireframeGeometry:zf});class Vf extends ol{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new dl(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class qf extends hc{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Wf extends ol{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new dl(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dl(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bs,this.normalScale=new ma(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jf extends Wf{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ma(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return aa(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new dl(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new dl(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new dl(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Xf extends ol{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new dl(16777215),this.specular=new dl(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dl(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bs,this.normalScale=new ma(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Li,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Yf extends ol{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new dl(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dl(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bs,this.normalScale=new ma(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Jf extends ol{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bs,this.normalScale=new ma(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Kf extends ol{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new dl(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dl(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bs,this.normalScale=new ma(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Li,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Zf extends ol{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new dl(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bs,this.normalScale=new ma(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Qf extends Zd{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function $f(e,t,n){return tm(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function em(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function tm(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function nm(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n}function im(e,t,n){const i=e.length,r=new e.constructor(i);for(let s=0,a=0;a!==i;++s){const i=n[s]*t;for(let n=0;n!==t;++n)r[a++]=e[i+n]}return r}function rm(e,t,n,i){let r=1,s=e[0];for(;void 0!==s&&void 0===s[i];)s=e[r++];if(void 0===s)return;let a=s[i];if(void 0!==a)if(Array.isArray(a))do{a=s[i],void 0!==a&&(t.push(s.time),n.push.apply(n,a)),s=e[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[i],void 0!==a&&(t.push(s.time),a.toArray(n,n.length)),s=e[r++]}while(void 0!==s);else do{a=s[i],void 0!==a&&(t.push(s.time),n.push(a)),s=e[r++]}while(void 0!==s)}const sm={arraySlice:$f,convertArray:em,isTypedArray:tm,getKeyframeOrder:nm,sortedArray:im,flattenJSON:rm,subclip:function(e,t,n,i,r=30){const s=e.clone();s.name=t;const a=[];for(let e=0;e<s.tracks.length;++e){const t=s.tracks[e],o=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const s=t.times[e]*r;if(!(s<n||s>=i)){l.push(t.times[e]);for(let n=0;n<o;++n)c.push(t.values[e*o+n])}}0!==l.length&&(t.times=em(l,t.times.constructor),t.values=em(c,t.values.constructor),a.push(t))}s.tracks=a;let o=1/0;for(let e=0;e<s.tracks.length;++e)o>s.tracks[e].times[0]&&(o=s.tracks[e].times[0]);for(let e=0;e<s.tracks.length;++e)s.tracks[e].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(e,t=0,n=e,i=30){i<=0&&(i=30);const r=n.tracks.length,s=t/i;for(let t=0;t<r;++t){const i=n.tracks[t],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const a=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===r}));if(void 0===a)continue;let o=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=i.times.length-1;let d;if(s<=i.times[0]){const e=o,t=l-o;d=$f(i.values,e,t)}else if(s>=i.times[h]){const e=h*l+o,t=e+l-o;d=$f(i.values,e,t)}else{const e=i.createInterpolant(),t=o,n=l-o;e.evaluate(s),d=$f(e.resultBuffer,t,n)}"quaternion"===r&&(new qa).fromArray(d).normalize().conjugate().toArray(d);const p=a.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===r)qa.multiplyQuaternionsFlat(a.values,t,d,0,a.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)a.values[t+n]-=d[n]}}}return e.blendMode=ds,e}};class am{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let s;n:{i:if(!(e<i)){for(let s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(r=i,i=t[++n],e<i)break t}s=t.length;break n}if(e>=r)break e;{const a=t[1];e<a&&(n=2,r=a);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(i=r,r=t[--n-1],e>=r)break t}s=n,n=0}}for(;n<s;){const i=n+s>>>1;e<t[i]?s=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class om extends am{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ls,endingEnd:ls}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,s=e+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case cs:r=e,a=2*t-n;break;case us:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case cs:s=e,o=2*n-t;break;case us:s=1,o=n+i[1]-i[0];break;default:s=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,y=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,v=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let e=0;e!==a;++e)r[e]=g*s[c+e]+y*s[l+e]+v*s[o+e]+x*s[u+e];return r}}class lm extends am{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(n-t)/(i-t),u=1-c;for(let e=0;e!==a;++e)r[e]=s[l+e]*u+s[o+e]*c;return r}}class cm extends am{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class um{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=em(t,this.TimeBufferType),this.values=em(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:em(e.times,Array),values:em(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new cm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new lm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new om(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ss:t=this.InterpolantFactoryMethodDiscrete;break;case as:t=this.InterpolantFactoryMethodLinear;break;case os:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ss;case this.InterpolantFactoryMethodLinear:return as;case this.InterpolantFactoryMethodSmooth:return os}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const e=this.getValueSize();this.times=$f(n,r,s),this.values=$f(this.values,r*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let t=0;t!==r;t++){const i=n[t];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==s&&s>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,i,s),e=!1;break}s=i}if(void 0!==i&&tm(i))for(let t=0,n=i.length;t!==n;++t){const n=i[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=$f(this.times),t=$f(this.values),n=this.getValueSize(),i=this.getInterpolation()===os,r=e.length-1;let s=1;for(let a=1;a<r;++a){let r=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(i)r=!0;else{const e=a*n,i=e-n,s=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[i+a]||n!==t[s+a]){r=!0;break}}}if(r){if(a!==s){e[s]=e[a];const i=a*n,r=s*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++s}}if(r>0){e[s]=e[r];for(let e=r*n,i=s*n,a=0;a!==n;++a)t[i+a]=t[e+a];++s}return s!==e.length?(this.times=$f(e,0,s),this.values=$f(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=$f(this.times,0),t=$f(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}um.prototype.TimeBufferType=Float32Array,um.prototype.ValueBufferType=Float32Array,um.prototype.DefaultInterpolation=as;class hm extends um{}hm.prototype.ValueTypeName="bool",hm.prototype.ValueBufferType=Array,hm.prototype.DefaultInterpolation=ss,hm.prototype.InterpolantFactoryMethodLinear=void 0,hm.prototype.InterpolantFactoryMethodSmooth=void 0;class dm extends um{}dm.prototype.ValueTypeName="color";class pm extends um{}pm.prototype.ValueTypeName="number";class fm extends am{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(i-t);let l=e*a;for(let e=l+a;l!==e;l+=4)qa.slerpFlat(r,0,s,l-a,s,l,o);return r}}class mm extends um{InterpolantFactoryMethodLinear(e){return new fm(this.times,this.values,this.getValueSize(),e)}}mm.prototype.ValueTypeName="quaternion",mm.prototype.DefaultInterpolation=as,mm.prototype.InterpolantFactoryMethodSmooth=void 0;class gm extends um{}gm.prototype.ValueTypeName="string",gm.prototype.ValueBufferType=Array,gm.prototype.DefaultInterpolation=ss,gm.prototype.InterpolantFactoryMethodLinear=void 0,gm.prototype.InterpolantFactoryMethodSmooth=void 0;class ym extends um{}ym.prototype.ValueTypeName="vector";class vm{constructor(e,t=-1,n,i=hs){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=sa(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let e=0,r=n.length;e!==r;++e)t.push(xm(n[e]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,i=n.length;e!==i;++e)t.push(um.toJSON(n[e]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,s=[];for(let e=0;e<r;e++){let a=[],o=[];a.push((e+r-1)%r,e,(e+1)%r),o.push(0,1,0);const l=nm(a);a=im(a,1,l),o=im(o,1,l),i||0!==a[0]||(a.push(r),o.push(o[0])),s.push(new pm(".morphTargetInfluences["+t[e].name+"]",a,o).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],s=n.name.match(r);if(s&&s.length>1){const e=s[1];let t=i[e];t||(i[e]=t=[]),t.push(n)}}const s=[];for(const e in i)s.push(this.CreateFromMorphTargetSequence(e,i[e],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const s=[],a=[];rm(n,s,a,i),0!==s.length&&r.push(new e(t,s,a))}},i=[],r=e.name||"default",s=e.fps||30,a=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const r=l[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let n=0;n<r[t].morphTargets.length;n++)e[r[t].morphTargets[n]]=-1;for(const n in e){const e=[],s=[];for(let i=0;i!==r[t].morphTargets.length;++i){const i=r[t];e.push(i.time),s.push(i.morphTarget===n?1:0)}i.push(new pm(".morphTargetInfluence["+n+"]",e,s))}o=e.length*s}else{const s=".bones["+t[e].name+"]";n(ym,s+".position",r,"pos",i),n(mm,s+".quaternion",r,"rot",i),n(ym,s+".scale",r,"scl",i)}}return 0===i.length?null:new this(r,o,i,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function xm(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return pm;case"vector":case"vector2":case"vector3":case"vector4":return ym;case"color":return dm;case"quaternion":return mm;case"bool":case"boolean":return hm;case"string":return gm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];rm(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const bm={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class wm{constructor(e,t,n){const i=this;let r,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===s&&void 0!==i.onStart&&i.onStart(e,a,o),s=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const _m=new wm;class Mm{constructor(e){this.manager=void 0!==e?e:_m,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Em={};class Sm extends Error{constructor(e,t){super(e),this.response=t}}class Tm extends Mm{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=bm.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout((()=>{t&&t(r),this.manager.itemEnd(e)}),0),r;if(void 0!==Em[e])return void Em[e].push({onLoad:t,onProgress:n,onError:i});Em[e]=[],Em[e].push({onLoad:t,onProgress:n,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=Em[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),s=r?parseInt(r):0,a=0!==s;let o=0;const l=new ReadableStream({start(e){!function t(){i.read().then((({done:i,value:r})=>{if(i)e.close();else{o+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(r),t()}}))}()}});return new Response(l)}throw new Sm(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then((e=>i.decode(e)))}}})).then((t=>{bm.add(e,t);const n=Em[e];delete Em[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}})).catch((t=>{const n=Em[e];if(void 0===n)throw this.manager.itemError(e),t;delete Em[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Am extends Mm{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new Tm(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=vm.parse(e[n]);t.push(i)}return t}}class Cm extends Mm{constructor(e){super(e)}load(e,t,n,i){const r=this,s=[],a=new yp,o=new Tm(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function c(c){o.load(e[c],(function(e){const n=r.parse(e,!0);s[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=$i),a.image=s,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,i)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else o.load(e,(function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){s[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)s[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),s[t].format=n.format,s[t].width=n.width,s[t].height=n.height}a.image=s}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=$i),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,i);return a}}class Im extends Mm{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=bm.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;const a=wa("img");function o(){c(),bm.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class Lm extends Mm{constructor(e){super(e)}load(e,t,n,i){const r=new gc,s=new Im(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(n){s.load(e[n],(function(e){r.images[n]=e,a++,6===a&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(let t=0;t<e.length;++t)o(t);return r}}class Rm extends Mm{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new Bd,a=new Tm(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(e,(function(e){const n=r.parse(e);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:ji,s.wrapT=void 0!==n.wrapT?n.wrapT:ji,s.magFilter=void 0!==n.magFilter?n.magFilter:$i,s.minFilter=void 0!==n.minFilter?n.minFilter:$i,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?s.colorSpace=n.colorSpace:void 0!==n.encoding&&(s.encoding=n.encoding),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=nr),1===n.mipmapCount&&(s.minFilter=$i),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,t&&t(s,n))}),n,i),s}}class Pm extends Mm{constructor(e){super(e)}load(e,t,n,i){const r=new Oa,s=new Im(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}class km extends Xo{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new dl(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Dm extends km{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Xo.DEFAULT_UP),this.updateMatrix(),this.groundColor=new dl(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Nm=new _o,Om=new Wa,Um=new Wa;class Bm{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ma(512,512),this.map=null,this.mapPass=null,this.matrix=new _o,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ec,this._frameExtents=new ma(1,1),this._viewportCount=1,this._viewports=[new Ua(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Om.setFromMatrixPosition(e.matrixWorld),t.position.copy(Om),Um.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Um),t.updateMatrixWorld(),Nm.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Nm),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Nm)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Fm extends Bm{constructor(){super(new pc(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*ra*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class zm extends km{constructor(e,t,n=0,i=Math.PI/3,r=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Xo.DEFAULT_UP),this.updateMatrix(),this.target=new Xo,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new Fm}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Gm=new _o,Hm=new Wa,Vm=new Wa;class qm extends Bm{constructor(){super(new pc(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ma(4,2),this._viewportCount=6,this._viewports=[new Ua(2,1,1,1),new Ua(0,1,1,1),new Ua(3,1,1,1),new Ua(1,1,1,1),new Ua(3,0,1,1),new Ua(1,0,1,1)],this._cubeDirections=[new Wa(1,0,0),new Wa(-1,0,0),new Wa(0,0,1),new Wa(0,0,-1),new Wa(0,1,0),new Wa(0,-1,0)],this._cubeUps=[new Wa(0,1,0),new Wa(0,1,0),new Wa(0,1,0),new Wa(0,1,0),new Wa(0,0,1),new Wa(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Hm.setFromMatrixPosition(e.matrixWorld),n.position.copy(Hm),Vm.copy(n.position),Vm.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Vm),n.updateMatrixWorld(),i.makeTranslation(-Hm.x,-Hm.y,-Hm.z),Gm.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gm)}}class Wm extends km{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new qm}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class jm extends Bm{constructor(){super(new Bc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Xm extends km{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Xo.DEFAULT_UP),this.updateMatrix(),this.target=new Xo,this.shadow=new jm}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Ym extends km{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Jm extends km{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Km{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Wa)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*r),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],n*i*1.092548),t.addScaledVector(s[5],i*r*1.092548),t.addScaledVector(s[6],.315392*(3*r*r-1)),t.addScaledVector(s[7],n*r*1.092548),t.addScaledVector(s[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*i),t.addScaledVector(s[2],1.023328*r),t.addScaledVector(s[3],1.023328*n),t.addScaledVector(s[4],.858086*n*i),t.addScaledVector(s[5],.858086*i*r),t.addScaledVector(s[6],.743125*r*r-.247708),t.addScaledVector(s[7],.858086*n*r),t.addScaledVector(s[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class Zm extends km{constructor(e=new Km,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Qm extends Mm{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,s=new Tm(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=Qm.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new dl).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const r=e.uniforms[t];switch(i.uniforms[t]={},r.type){case"t":i.uniforms[t].value=n(r.value);break;case"c":i.uniforms[t].value=(new dl).setHex(r.value);break;case"v2":i.uniforms[t].value=(new ma).fromArray(r.value);break;case"v3":i.uniforms[t].value=(new Wa).fromArray(r.value);break;case"v4":i.uniforms[t].value=(new Ua).fromArray(r.value);break;case"m3":i.uniforms[t].value=(new ga).fromArray(r.value);break;case"m4":i.uniforms[t].value=(new _o).fromArray(r.value);break;default:i.uniforms[t].value=r.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(const t in e.extensions)i.extensions[t]=e.extensions[t];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new ma).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new ma).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:Vf,SpriteMaterial:ud,RawShaderMaterial:qf,ShaderMaterial:hc,PointsMaterial:lp,MeshPhysicalMaterial:jf,MeshStandardMaterial:Wf,MeshPhongMaterial:Xf,MeshToonMaterial:Yf,MeshNormalMaterial:Jf,MeshLambertMaterial:Kf,MeshDepthMaterial:Gh,MeshDistanceMaterial:Hh,MeshBasicMaterial:fl,MeshMatcapMaterial:Zf,LineDashedMaterial:Qf,LineBasicMaterial:Zd,Material:ol}[e]}}class $m{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class eg extends zl{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class tg extends Mm{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new Tm(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)}parse(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],s=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers[t],r=new Uint32Array(i).buffer;return n[t]=r,r}(e,r.buffer),a=ba(r.type,s),o=new od(a,r.stride);return o.uuid=r.uuid,t[i]=o,o}const r=e.isInstancedBufferGeometry?new eg:new zl,s=e.data.index;if(void 0!==s){const e=ba(s.type,s.array);r.setIndex(new _l(e,1))}const a=e.data.attributes;for(const t in a){const n=a[t];let s;if(n.isInterleavedBufferAttribute){const t=i(e.data,n.data);s=new cd(t,n.itemSize,n.offset,n.normalized)}else{const e=ba(n.type,n.array);s=new(n.isInstancedBufferAttribute?Hd:_l)(e,n.itemSize,n.normalized)}void 0!==n.name&&(s.name=n.name),void 0!==n.usage&&s.setUsage(n.usage),void 0!==n.updateRange&&(s.updateRange.offset=n.updateRange.offset,s.updateRange.count=n.updateRange.count),r.setAttribute(t,s)}const o=e.data.morphAttributes;if(o)for(const t in o){const n=o[t],s=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];let a;if(r.isInterleavedBufferAttribute){const t=i(e.data,r.data);a=new cd(t,r.itemSize,r.offset,r.normalized)}else{const e=ba(r.type,r.array);a=new _l(e,r.itemSize,r.normalized)}void 0!==r.name&&(a.name=r.name),s.push(a)}r.morphAttributes[t]=s}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];r.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Wa;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new po(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class ng extends Mm{constructor(e){super(e)}load(e,t,n,i){const r=this,s=""===this.path?$m.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new Tm(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let s=null;try{s=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(s,t)}),n,i)}async loadAsync(e,t){const n=""===this.path?$m.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const i=new Tm(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(e,t),s=JSON.parse(r),a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(s)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in s)if(s[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,s),o=this.parseObject(e.object,i,a,s,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new ef).fromJSON(e[n]);t[i.uuid]=i}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse((function(e){e.isBone&&(i[e.uuid]=e)})),void 0!==e)for(let t=0,r=e.length;t<r;t++){const r=(new Gd).fromJSON(e[t],i);n[r.uuid]=r}return n}parseGeometries(e,t){const n={};if(void 0!==e){const i=new tg;for(let r=0,s=e.length;r<s;r++){let s;const a=e[r];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(a);break;default:a.type in Hf?s=Hf[a.type].fromJSON(a,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${a.type}"`)}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.userData&&(s.userData=a.userData),n[a.uuid]=s}}return n}parseMaterials(e,t){const n={},i={};if(void 0!==e){const r=new Qm;r.setTextures(t);for(let t=0,s=e.length;t<s;t++){const s=e[t];void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const i=e[n],r=vm.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function s(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),r.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:ba(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new wm(t);r=new Im(n),r.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],r=n.url;if(Array.isArray(r)){const e=[];for(let t=0,n=r.length;t<n;t++){const n=s(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Bd(n.data,n.width,n.height)))}i[n.uuid]=new ka(e)}else{const e=s(n.url);i[n.uuid]=new ka(e)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(e){if("string"==typeof e){const n=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await i.loadAsync(r)}return e.data?{data:ba(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){i=new Im(this.manager),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],s=i.url;if(Array.isArray(s)){const e=[];for(let t=0,n=s.length;t<n;t++){const n=s[t],i=await r(n);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new Bd(i.data,i.width,i.height)))}n[i.uuid]=new ka(e)}else{const e=await r(i.url);n[i.uuid]=new ka(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,s=e.length;r<s;r++){const s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const a=t[s.image],o=a.data;let l;Array.isArray(o)?(l=new gc,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new Bd:new Oa,o&&(l.needsUpdate=!0)),l.source=a,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=n(s.mapping,ig)),void 0!==s.channel&&(l.channel=s.channel),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=n(s.wrap[0],rg),l.wrapT=n(s.wrap[1],rg)),void 0!==s.format&&(l.format=s.format),void 0!==s.internalFormat&&(l.internalFormat=s.internalFormat),void 0!==s.type&&(l.type=s.type),void 0!==s.colorSpace&&(l.colorSpace=s.colorSpace),void 0!==s.encoding&&(l.encoding=s.encoding),void 0!==s.minFilter&&(l.minFilter=n(s.minFilter,sg)),void 0!==s.magFilter&&(l.magFilter=n(s.magFilter,sg)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.generateMipmaps&&(l.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),void 0!==s.userData&&(l.userData=s.userData),i[s.uuid]=l}return i}parseObject(e,t,n,i,r){let s,a,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":s=new ad,void 0!==e.background&&(Number.isInteger(e.background)?s.background=new dl(e.background):s.background=u(e.background)),void 0!==e.environment&&(s.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new sd(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new rd(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(s.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new pc(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Bc(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new Ym(e.color,e.intensity);break;case"DirectionalLight":s=new Xm(e.color,e.intensity);break;case"PointLight":s=new Wm(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Jm(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new zm(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Dm(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=(new Zm).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),o=c(e.material),s=new Od(a,o),void 0!==e.bindMode&&(s.bindMode=e.bindMode),void 0!==e.bindMatrix&&s.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(s.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),o=c(e.material),s=new rc(a,o);break;case"InstancedMesh":a=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,i=e.instanceColor;s=new Kd(a,o,t),s.instanceMatrix=new Hd(new Float32Array(n.array),16),void 0!==i&&(s.instanceColor=new Hd(new Float32Array(i.array),i.itemSize));break;case"LOD":s=new Cd;break;case"Line":s=new ip(l(e.geometry),c(e.material));break;case"LineLoop":s=new op(l(e.geometry),c(e.material));break;case"LineSegments":s=new ap(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new pp(l(e.geometry),c(e.material));break;case"Sprite":s=new Ed(c(e.material));break;case"Group":s=new Yh;break;case"Bone":s=new Ud;break;default:s=new Xo}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(s.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.up&&s.up.fromArray(e.up),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(s.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.frustumCulled&&(s.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(s.renderOrder=e.renderOrder),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.layers&&(s.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)s.add(this.parseObject(a[e],t,n,i,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];s.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(s.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],i=s.getObjectByProperty("uuid",n.object);void 0!==i&&s.addLevel(i,n.distance,n.hysteresis)}}return s}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}const ig={UVMapping:Fi,CubeReflectionMapping:zi,CubeRefractionMapping:Gi,EquirectangularReflectionMapping:Hi,EquirectangularRefractionMapping:Vi,CubeUVReflectionMapping:qi},rg={RepeatWrapping:Wi,ClampToEdgeWrapping:ji,MirroredRepeatWrapping:Xi},sg={NearestFilter:Yi,NearestMipmapNearestFilter:Ji,NearestMipmapLinearFilter:Zi,LinearFilter:$i,LinearMipmapNearestFilter:er,LinearMipmapLinearFilter:nr};class ag extends Mm{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=bm.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){bm.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}let og;class lg{static getContext(){return void 0===og&&(og=new(window.AudioContext||window.webkitAudioContext)),og}static setContext(e){og=e}}class cg extends Mm{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new Tm(this.manager);function a(t){i?i(t):console.error(t),r.manager.itemError(e)}s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(e){try{const n=e.slice(0);lg.getContext().decodeAudioData(n,(function(e){t(e)}),a)}catch(e){a(e)}}),n,i)}}class ug extends Zm{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const i=(new dl).set(e),r=(new dl).set(t),s=new Wa(i.r,i.g,i.b),a=new Wa(r.r,r.g,r.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(o),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(l)}}class hg extends Zm{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=(new dl).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const dg=new _o,pg=new _o,fg=new _o;class mg{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new pc,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new pc,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,fg.copy(e.projectionMatrix);const n=t.eyeSep/2,i=n*t.near/t.focus,r=t.near*Math.tan(ia*t.fov*.5)/t.zoom;let s,a;pg.elements[12]=-n,dg.elements[12]=n,s=-r*t.aspect+i,a=r*t.aspect+i,fg.elements[0]=2*t.near/(a-s),fg.elements[8]=(a+s)/(a-s),this.cameraL.projectionMatrix.copy(fg),s=-r*t.aspect-i,a=r*t.aspect-i,fg.elements[0]=2*t.near/(a-s),fg.elements[8]=(a+s)/(a-s),this.cameraR.projectionMatrix.copy(fg)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(pg),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(dg)}}class gg{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=yg(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=yg();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function yg(){return("undefined"==typeof performance?Date:performance).now()}const vg=new Wa,xg=new qa,bg=new Wa,wg=new Wa;class _g extends Xo{constructor(){super(),this.type="AudioListener",this.context=lg.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new gg}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vg,xg,bg),wg.set(0,0,-1).applyQuaternion(xg),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(vg.x,e),t.positionY.linearRampToValueAtTime(vg.y,e),t.positionZ.linearRampToValueAtTime(vg.z,e),t.forwardX.linearRampToValueAtTime(wg.x,e),t.forwardY.linearRampToValueAtTime(wg.y,e),t.forwardZ.linearRampToValueAtTime(wg.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(vg.x,vg.y,vg.z),t.setOrientation(wg.x,wg.y,wg.z,n.x,n.y,n.z)}}class Mg extends Xo{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Eg=new Wa,Sg=new qa,Tg=new Wa,Ag=new Wa;class Cg extends Mg{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Eg,Sg,Tg),Ag.set(0,0,1).applyQuaternion(Sg);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Eg.x,e),t.positionY.linearRampToValueAtTime(Eg.y,e),t.positionZ.linearRampToValueAtTime(Eg.z,e),t.orientationX.linearRampToValueAtTime(Ag.x,e),t.orientationY.linearRampToValueAtTime(Ag.y,e),t.orientationZ.linearRampToValueAtTime(Ag.z,e)}else t.setPosition(Eg.x,Eg.y,Eg.z),t.setOrientation(Ag.x,Ag.y,Ag.z)}}class Ig{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Lg{constructor(e,t,n){let i,r,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==i;++e)n[r+e]=n[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(n[e]!==n[e+t]){a.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let e=n,r=i;e!==r;++e)t[e]=t[i+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)e[t+i]=e[n+i]}_slerp(e,t,n,i){qa.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const s=this._workIndex*r;qa.multiplyQuaternionsFlat(e,s,e,t,e,n),qa.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,n,i,r){const s=1-i;for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]*s+e[n+a]*i}}_lerpAdditive(e,t,n,i,r){for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]+e[n+s]*i}}}const Rg="\\[\\]\\.:\\/",Pg=new RegExp("["+Rg+"]","g"),kg="[^"+Rg+"]",Dg="[^"+Rg.replace("\\.","")+"]",Ng=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",kg)+/(WCOD+)?/.source.replace("WCOD",Dg)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",kg)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",kg)+"$"),Og=["material","materials","bones","map"];class Ug{constructor(e,t,n){this.path=t,this.parsedPath=n||Ug.parseTrackName(t),this.node=Ug.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Ug.Composite(e,t,n):new Ug(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Pg,"")}static parseTrackName(e){const t=Ng.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==Og.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const s=n(r.children);if(s)return s}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=Ug.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const s=e[i];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ug.Composite=class{constructor(e,t,n){const i=n||Ug.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Ug.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ug.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ug.prototype.GetterByBindingType=[Ug.prototype._getValue_direct,Ug.prototype._getValue_array,Ug.prototype._getValue_arrayElement,Ug.prototype._getValue_toArray],Ug.prototype.SetterByBindingTypeAndVersioning=[[Ug.prototype._setValue_direct,Ug.prototype._setValue_direct_setNeedsUpdate,Ug.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ug.prototype._setValue_array,Ug.prototype._setValue_array_setNeedsUpdate,Ug.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ug.prototype._setValue_arrayElement,Ug.prototype._setValue_arrayElement_setNeedsUpdate,Ug.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ug.prototype._setValue_fromArray,Ug.prototype._setValue_fromArray_setNeedsUpdate,Ug.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Bg{constructor(){this.isAnimationObjectGroup=!0,this.uuid=sa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,s=r.length;let a,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=o++,t[h]=d,e.push(u);for(let e=0,t=s;e!==t;++e)r[e].push(new Ug(u,n[e],i[e]))}else if(d<l){a=e[d];const o=--l,c=e[o];t[c.uuid]=d,e[d]=c,t[h]=o,e[o]=u;for(let e=0,t=s;e!==t;++e){const t=r[e],s=t[o];let a=t[d];t[d]=s,void 0===a&&(a=new Ug(u,n[e],i[e])),t[o]=a}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s],o=a.uuid,l=t[o];if(void 0!==l&&l>=r){const s=r++,c=e[s];t[c.uuid]=l,e[l]=c,t[o]=s,e[s]=a;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[s],r=t[l];t[l]=i,t[s]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,s=e.length;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<r){const a=--r,o=e[a],c=--s,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[c];t[l]=i,t[a]=r,t.pop()}}else{const r=--s,a=e[r];r>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const s=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,s.push(e),a.push(t),r.push(u);for(let n=c,i=o.length;n!==i;++n){const i=o[n];u[n]=new Ug(i,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a];t[e[a]]=n,s[n]=o,s.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}class Fg{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,s=r.length,a=new Array(s),o={endingStart:ls,endingEnd:ls};for(let e=0;e!==s;++e){const t=r[e].createInterpolant(null);a[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=is,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,s=n/i;e.warp(1,r,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=r,o[1]=r+n,l[0]=e/s,l[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;i<0||0===n?t=0:(this._startTime=null,t=n*i)}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===ds)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulateAdditive(a);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulate(i,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const s=n===rs;if(0===e)return-1===r?i:s&&1==(1&r)?t-i:i;if(n===ns){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(s&&1==(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=cs,i.endingEnd=cs):(i.endingStart=e?this.zeroSlopeAtStart?cs:ls:us,i.endingEnd=t?this.zeroSlopeAtEnd?cs:ls:us)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=r,o[0]=t,a[1]=r+e,o[1]=n,this}}const zg=new Float32Array(1);class Gg extends ea{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,s=e._propertyBindings,a=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let e=0;e!==r;++e){const r=i[e],l=r.name;let u=c[l];if(void 0!==u)++u.referenceCount,s[e]=u;else{if(u=s[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,l));continue}const i=t&&t._propertyBindings[e].binding.parsedPath;u=new Lg(Ug.create(n,l,i),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,o,l),s[e]=u}a[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let s=r[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,s=this._actionsByClip,a=s[r],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete s[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[t];void 0===s&&(s={},i[t]=s),s[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,a=s[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[r],0===Object.keys(a).length&&delete s[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new lm(new Float32Array(2),new Float32Array(2),1,zg),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let s="string"==typeof e?vm.findByName(i,e):e;const a=null!==s?s.uuid:e,o=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:hs),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new Fg(this,s,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"==typeof e?vm.findByName(n,e):e,s=r?r.uuid:e,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),s=this._accuIndex^=1;for(let a=0;a!==n;++a)t[a]._update(i,e,r,s);const a=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)a[e].apply(s);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,s=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,s._cacheIndex=r,t[r]=s,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const i=n[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const e in i){const t=i[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Hg{constructor(e){this.value=e}clone(){return new Hg(void 0===this.value.clone?this.value:this.value.clone())}}let Vg=0;class qg extends ea{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Vg++}),this.name="",this.usage=Hs,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let e=0,n=t.length;e<n;e++)this.uniforms.push(t[e].clone());return this}clone(){return(new this.constructor).copy(this)}}class Wg extends od{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class jg{constructor(e,t,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Xg{constructor(e,t,n=0,i=1/0){this.ray=new wo(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new ko,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Jg(e,this,n,t),n.sort(Yg),n}intersectObjects(e,t=!0,n=[]){for(let i=0,r=e.length;i<r;i++)Jg(e[i],this,n,t);return n.sort(Yg),n}}function Yg(e,t){return e.distance-t.distance}function Jg(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)Jg(i[e],t,n,!0)}}class Kg{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(aa(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Zg{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const Qg=new ma;class $g{constructor(e=new ma(1/0,1/0),t=new ma(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Qg.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Qg).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ey=new Wa,ty=new Wa;class ny{constructor(e=new Wa,t=new Wa){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ey.subVectors(e,this.start),ty.subVectors(this.end,this.start);const n=ty.dot(ty);let i=ty.dot(ey)/n;return t&&(i=aa(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const iy=new Wa;class ry extends Xo{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new zl,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const r=e/n*Math.PI*2,s=t/n*Math.PI*2;i.push(Math.cos(r),Math.sin(r),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new Rl(i,3));const r=new Zd({fog:!1,toneMapped:!1});this.cone=new ap(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),iy.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(iy),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const sy=new Wa,ay=new _o,oy=new _o;class ly extends ap{constructor(e){const t=cy(e),n=new zl,i=[],r=[],s=new dl(0,0,1),a=new dl(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new Rl(i,3)),n.setAttribute("color",new Rl(r,3)),super(n,new Zd({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");oy.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(ay.multiplyMatrices(oy,r.matrixWorld),sy.setFromMatrixPosition(ay),i.setXYZ(n,sy.x,sy.y,sy.z),ay.multiplyMatrices(oy,r.parent.matrixWorld),sy.setFromMatrixPosition(ay),i.setXYZ(n+1,sy.x,sy.y,sy.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function cy(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,cy(e.children[n]));return t}class uy extends rc{constructor(e,t,n){super(new Nf(t,4,2),new fl({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const hy=new Wa,dy=new dl,py=new dl;class fy extends Xo{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Pf(t);i.rotateY(.5*Math.PI),this.material=new fl({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.setAttribute("color",new _l(s,3)),this.add(new rc(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");dy.copy(this.light.color),py.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?dy:py;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(hy.setFromMatrixPosition(this.light.matrixWorld).negate())}}class my extends ap{constructor(e=10,t=10,n=4473924,i=8947848){n=new dl(n),i=new dl(i);const r=t/2,s=e/t,a=e/2,o=[],l=[];for(let e=0,c=0,u=-a;e<=t;e++,u+=s){o.push(-a,0,u,a,0,u),o.push(u,0,-a,u,0,a);const t=e===r?n:i;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new zl;c.setAttribute("position",new Rl(o,3)),c.setAttribute("color",new Rl(l,3)),super(c,new Zd({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class gy extends ap{constructor(e=10,t=16,n=8,i=64,r=4473924,s=8947848){r=new dl(r),s=new dl(s);const a=[],o=[];if(t>1)for(let n=0;n<t;n++){const i=n/t*(2*Math.PI),l=Math.sin(i)*e,c=Math.cos(i)*e;a.push(0,0,0),a.push(l,0,c);const u=1&n?r:s;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let t=0;t<n;t++){const l=1&t?r:s,c=e-e/n*t;for(let e=0;e<i;e++){let t=e/i*(2*Math.PI),n=Math.sin(t)*c,r=Math.cos(t)*c;a.push(n,0,r),o.push(l.r,l.g,l.b),t=(e+1)/i*(2*Math.PI),n=Math.sin(t)*c,r=Math.cos(t)*c,a.push(n,0,r),o.push(l.r,l.g,l.b)}}const l=new zl;l.setAttribute("position",new Rl(a,3)),l.setAttribute("color",new Rl(o,3)),super(l,new Zd({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const yy=new Wa,vy=new Wa,xy=new Wa;class by extends Xo{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new zl;i.setAttribute("position",new Rl([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new Zd({fog:!1,toneMapped:!1});this.lightPlane=new ip(i,r),this.add(this.lightPlane),i=new zl,i.setAttribute("position",new Rl([0,0,0,0,0,1],3)),this.targetLine=new ip(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),yy.setFromMatrixPosition(this.light.matrixWorld),vy.setFromMatrixPosition(this.light.target.matrixWorld),xy.subVectors(vy,yy),this.lightPlane.lookAt(vy),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(vy),this.targetLine.scale.z=xy.length()}}const wy=new Wa,_y=new dc;class My extends ap{constructor(e){const t=new zl,n=new Zd({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={};function a(e,t){o(e),o(t)}function o(e){i.push(0,0,0),r.push(0,0,0),void 0===s[e]&&(s[e]=[]),s[e].push(i.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new Rl(i,3)),t.setAttribute("color",new Rl(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const l=new dl(16755200),c=new dl(16711680),u=new dl(43775),h=new dl(16777215),d=new dl(3355443);this.setColors(l,c,u,h,d)}setColors(e,t,n,i,r){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,r.r,r.g,r.b),s.setXYZ(41,r.r,r.g,r.b),s.setXYZ(42,r.r,r.g,r.b),s.setXYZ(43,r.r,r.g,r.b),s.setXYZ(44,r.r,r.g,r.b),s.setXYZ(45,r.r,r.g,r.b),s.setXYZ(46,r.r,r.g,r.b),s.setXYZ(47,r.r,r.g,r.b),s.setXYZ(48,r.r,r.g,r.b),s.setXYZ(49,r.r,r.g,r.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;_y.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ey("c",t,e,_y,0,0,-1),Ey("t",t,e,_y,0,0,1),Ey("n1",t,e,_y,-1,-1,-1),Ey("n2",t,e,_y,1,-1,-1),Ey("n3",t,e,_y,-1,1,-1),Ey("n4",t,e,_y,1,1,-1),Ey("f1",t,e,_y,-1,-1,1),Ey("f2",t,e,_y,1,-1,1),Ey("f3",t,e,_y,-1,1,1),Ey("f4",t,e,_y,1,1,1),Ey("u1",t,e,_y,.7,1.1,-1),Ey("u2",t,e,_y,-.7,1.1,-1),Ey("u3",t,e,_y,0,2,-1),Ey("cf1",t,e,_y,-1,0,1),Ey("cf2",t,e,_y,1,0,1),Ey("cf3",t,e,_y,0,-1,1),Ey("cf4",t,e,_y,0,1,1),Ey("cn1",t,e,_y,-1,0,-1),Ey("cn2",t,e,_y,1,0,-1),Ey("cn3",t,e,_y,0,-1,-1),Ey("cn4",t,e,_y,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ey(e,t,n,i,r,s,a){wy.set(r,s,a).unproject(i);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],wy.x,wy.y,wy.z)}}const Sy=new Ya;class Ty extends ap{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new zl;r.setIndex(new _l(n,1)),r.setAttribute("position",new _l(i,3)),super(r,new Zd({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Sy.setFromObject(this.object),Sy.isEmpty())return;const t=Sy.min,n=Sy.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ay extends ap{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new zl;i.setIndex(new _l(n,1)),i.setAttribute("position",new Rl([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new Zd({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Cy extends ip{constructor(e,t=1,n=16776960){const i=n,r=new zl;r.setAttribute("position",new Rl([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new Zd({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const s=new zl;s.setAttribute("position",new Rl([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),s.computeBoundingSphere(),this.add(new rc(s,new fl({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Iy=new Wa;let Ly,Ry;class Py extends Xo{constructor(e=new Wa(0,0,1),t=new Wa(0,0,0),n=1,i=16776960,r=.2*n,s=.2*r){super(),this.type="ArrowHelper",void 0===Ly&&(Ly=new zl,Ly.setAttribute("position",new Rl([0,0,0,0,1,0],3)),Ry=new Wp(0,.5,1,5,1),Ry.translate(0,-.5,0)),this.position.copy(t),this.line=new ip(Ly,new Zd({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new rc(Ry,new fl({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Iy.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Iy,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ky extends ap{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new zl;n.setAttribute("position",new Rl(t,3)),n.setAttribute("color",new Rl([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new Zd({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const i=new dl,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Dy{constructor(){this.type="ShapePath",this.color=new dl,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Gp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,s){return this.currentPath.bezierCurveTo(e,t,n,i,r,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let i=!1;for(let r=n-1,s=0;s<n;r=s++){let n=t[r],a=t[s],o=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[s],o=-o,a=t[r],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return i}const n=Tf.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,s,a;const o=[];if(1===i.length)return s=i[0],a=new ef,a.curves=s.curves,o.push(a),o;let l=!n(i[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,p=[],f=0;u[f]=void 0,p[f]=[];for(let t=0,a=i.length;t<a;t++)s=i[t],h=s.getPoints(),r=n(h),r=e?!r:r,r?(!l&&u[f]&&f++,u[f]={s:new ef,p:h},u[f].s.curves=s.curves,l&&f++,p[f]=[]):p[f].push({h:s,p:h[0]});if(!u[0])return function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new ef;r.curves=i.curves,t.push(r)}return t}(i);if(u.length>1){let e=!1,n=0;for(let e=0,t=u.length;e<t;e++)c[e]=[];for(let i=0,r=u.length;i<r;i++){const r=p[i];for(let s=0;s<r.length;s++){const a=r[s];let o=!0;for(let r=0;r<u.length;r++)t(a.p,u[r].p)&&(i!==r&&n++,o?(o=!1,c[r].push(a)):e=!0);o&&c[i].push(a)}}n>0&&!1===e&&(p=c)}for(let e=0,t=u.length;e<t;e++){a=u[e].s,o.push(a),d=p[e];for(let e=0,t=d.length;e<t;e++)a.holes.push(d[e].h)}return o}}class Ny extends ac{constructor(e,t,n,i,r,s){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,i,r,s)}}class Oy extends Vp{constructor(e,t,n,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,i)}}class Uy extends qp{constructor(e,t,n,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,i)}}class By extends jp{constructor(e,t,n,i,r,s,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,i,r,s,a)}}class Fy extends Wp{constructor(e,t,n,i,r,s,a,o){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,i,r,s,a,o)}}class zy extends Yp{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class Gy extends If{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class Hy extends Rf{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class Vy extends Hp{constructor(e,t,n,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,i)}}class qy extends Pf{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class Wy extends Ac{constructor(e,t,n,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,i)}}class jy extends Xp{constructor(e,t,n,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,i)}}class Xy extends kf{constructor(e,t,n,i,r,s){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,i,r,s)}}class Yy extends Df{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class Jy extends Nf{constructor(e,t,n,i,r,s,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,i,r,s,a)}}class Ky extends Of{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class Zy extends Uf{constructor(e,t,n,i,r){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,i,r)}}class Qy extends Bf{constructor(e,t,n,i,r,s){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,i,r,s)}}class $y extends Ff{constructor(e,t,n,i,r){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,i,r)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Fn}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Fn);const ev=new Bc(-1,1,1,-1,0,1),tv=new zl;tv.setAttribute("position",new Rl([-1,3,0,-1,-1,0,3,-1,0],3)),tv.setAttribute("uv",new Rl([0,2,0,0,2,0],2));class nv{constructor(e){this._mesh=new rc(tv,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,ev)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}var iv="srgb",rv="srgb-linear",sv=Number(Fn.replace(/\D+/g,""))>=152,av=new Map([[gs,rv],[ys,iv]]),ov=new Map([[rv,gs],[iv,ys]]);function lv(e){return null===e?null:sv?e.outputColorSpace:av.get(e.outputEncoding)}function cv(e,t){null!==e&&(sv?e.colorSpace=t:e.encoding=ov.get(t))}new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10]);var uv=class extends hc{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Hg(null),opacity:new Hg(1)},blending:ei,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:"varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},hv=new dc,dv=null,pv=class{constructor(e="Pass",t=new ad,n=hv){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;null!==t&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new rc(function(){if(null===dv){const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(dv=new zl).setAttribute?(dv.setAttribute("position",new _l(e,3)),dv.setAttribute("uv",new _l(t,2))):(dv.addAttribute("position",new _l(e,3)),dv.addAttribute("uv",new _l(t,2)))}return dv}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new ad),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=vs){}render(e,t,n,i,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Ba||t instanceof ol||t instanceof Oa||t instanceof pv)&&this[e].dispose()}}},fv=class extends pv{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new uv,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new Ba(1,1,{minFilter:$i,magFilter:$i,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,i,r){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==rr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":lv(e)===iv&&cv(this.renderTarget.texture,iv))}},mv=class extends pv{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,i,r){const s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},gv=new dl,yv=class extends pv{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,i,r){const s=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),l=null!==s,c=a>=0;l?(e.getClearColor(gv),e.setClearColor(s,c?a:o)):c&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(gv,o):c&&e.setClearAlpha(o)}},vv=!1,xv=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Qn:t=this.materialsFlatShadedDoubleSide;break;case Zn:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case Qn:t=this.materialsDoubleSide;break;case Zn:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof hc))return e.clone();const t=e.uniforms,n=new Map;for(const e in t){const i=t[e].value;i.isRenderTargetTexture&&(t[e].value=null,n.set(e,i))}const i=e.clone();for(const e of n)t[e[0]].value=e[1],i.uniforms[e[0]].value=e[1];return i}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const n of t)n.uniforms=Object.assign({},e.uniforms),n.side=Kn;t[2].skinning=!0,this.materialsBackSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.side=Zn,n})),this.materialsDoubleSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.side=Qn,n})),this.materialsFlatShaded=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n})),this.materialsFlatShadedBackSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=Zn,n})),this.materialsFlatShadedDoubleSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=Qn,n}))}}render(e,t,n){const i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,vv){const i=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(const e of i)e[0].material=e[1];this.meshCount!==i.size&&i.clear()}else{const i=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=i}e.shadowMap.enabled=i}disposeMaterials(){if(null!==this.material){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return vv}static set workaroundEnabled(e){vv=e}},bv=class extends pv{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new yv,this.overrideMaterialManager=null===n?null:new xv(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new xv(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,i,r){const s=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,c=s.background,u=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;null!==o&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,s,a):e.render(s,a),a.layers.mask=l,s.background=c,e.shadowMap.autoUpdate=u}};new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]);var wv=class extends pv{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new yv(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,i,r){const s=e.getContext(),a=e.state.buffers,o=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,h=1-u;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,u,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(n),e.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},_v=.001,Mv=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){"undefined"!=typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*_v}get fixedDelta(){return this._fixedDelta*_v}set fixedDelta(e){this._fixedDelta=1e3*e}get elapsed(){return this._elapsed*_v}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Ev=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:i=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,n,r,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new fv,this.depthTexture=null,this.passes=[],this.timer=new Mv,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){const t=e.getSize(new ma),n=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===rr&&lv(e)===iv&&(cv(this.inputBuffer.texture,iv),cv(this.outputBuffer.texture,iv),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const t of this.passes)t.initialize(e,n,i)}}replaceRenderer(e,t=!0){const n=this.renderer,i=n.domElement.parentNode;return this.setRenderer(e),t&&null!==i&&(i.removeChild(n.domElement),i.appendChild(e.domElement)),n}createDepthTexture(){const e=this.depthTexture=new Zh;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=br,e.type=fr):e.type=cr,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,i){const r=this.renderer,s=null===r?new ma:r.getDrawingBufferSize(new ma),a={minFilter:$i,magFilter:$i,stencilBuffer:t,depthBuffer:e,type:n},o=new Ba(s.width,s.height,a);return i>0&&(o.ignoreDepthForMultisampleCopy=!1,o.samples=i),n===rr&&lv(r)===iv&&cv(o.texture,iv),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const n=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new ma),s=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(r.width,r.height),e.initialize(i,s,a),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const t=this.createDepthTexture();for(e of n)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,n=t.indexOf(e);if(-1!==n&&t.splice(n,1).length>0){if(null!==this.depthTexture){const n=(e,t)=>e||t.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,n=this.copyPass;let i,r,s,a=this.inputBuffer,o=this.outputBuffer,l=!1;void 0===e&&(this.timer.update(),e=this.timer.delta);for(const c of this.passes)c.enabled&&(c.render(t,a,o,e,l),c.needsSwap&&(l&&(n.renderToScreen=c.renderToScreen,i=t.getContext(),r=t.state.buffers.stencil,r.setFunc(i.NOTEQUAL,1,4294967295),n.render(t,a,o,e,l),r.setFunc(i.EQUAL,1,4294967295)),s=a,a=o,o=s),c instanceof wv?l=!0:c instanceof mv&&(l=!1))}setSize(e,t,n){const i=this.renderer,r=i.getSize(new ma);void 0!==e&&void 0!==t||(e=r.width,t=r.height),r.width===e&&r.height===t||i.setSize(e,t,n);const s=i.getDrawingBufferSize(new ma);this.inputBuffer.setSize(s.width,s.height),this.outputBuffer.setSize(s.width,s.height);for(const e of this.passes)e.setSize(s.width,s.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}};function Sv(e,t,n){return e+(t-e)*n}function Tv(e,t,n,i){const r=Sv(e,t,.75),s=Sv(n,i,.75);return Sv(r,s,.875)}Set,new Wa,new _o,new dl,new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),Tv(0,0,0,0),new Float32Array([0,0,0,0]),Tv(0,0,0,1),new Float32Array([0,0,0,1]),Tv(0,0,1,0),new Float32Array([0,0,1,0]),Tv(0,0,1,1),new Float32Array([0,0,1,1]),Tv(0,1,0,0),new Float32Array([0,1,0,0]),Tv(0,1,0,1),new Float32Array([0,1,0,1]),Tv(0,1,1,0),new Float32Array([0,1,1,0]),Tv(0,1,1,1),new Float32Array([0,1,1,1]),Tv(1,0,0,0),new Float32Array([1,0,0,0]),Tv(1,0,0,1),new Float32Array([1,0,0,1]),Tv(1,0,1,0),new Float32Array([1,0,1,0]),Tv(1,0,1,1),new Float32Array([1,0,1,1]),Tv(1,1,0,0),new Float32Array([1,1,0,0]),Tv(1,1,0,1),new Float32Array([1,1,0,1]),Tv(1,1,1,0),new Float32Array([1,1,1,0]),Tv(1,1,1,1),new Float32Array([1,1,1,1]),Math.PI,new Wa,new Wa;const Av={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},projMat:{value:new _o},viewMat:{value:new _o},projViewMat:{value:new _o},projectionMatrixInv:{value:new _o},viewMatrixInv:{value:new _o},cameraPos:{value:new Wa},resolution:{value:new ma},time:{value:0},samples:{value:[]},samplesR:{value:[]},bluenoise:{value:null},distanceFalloff:{value:1},radius:{value:5},near:{value:.1},far:{value:1e3},logDepth:{value:!1},ortho:{value:!1}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\n    #define SAMPLES 16\n    #define FSAMPLES 16.0\nuniform sampler2D sceneDiffuse;\nuniform highp sampler2D sceneDepth;\nuniform mat4 projectionMatrixInv;\nuniform mat4 viewMatrixInv;\nuniform mat4 projMat;\nuniform mat4 viewMat;\nuniform mat4 projViewMat;\nuniform vec3 cameraPos;\nuniform vec2 resolution;\nuniform float time;\nuniform vec3[SAMPLES] samples;\nuniform float[SAMPLES] samplesR;\nuniform float radius;\nuniform float distanceFalloff;\nuniform float near;\nuniform float far;\nuniform bool logDepth;\nuniform bool ortho;\nuniform sampler2D bluenoise;\n    varying vec2 vUv;\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        return (zFar * zNear) / (zFar - d * (zFar - zNear));\n    }\n    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n      return nearZ + (farZ - nearZ) * d;\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      return ortho ? linearize_depth_ortho(\n        linDepth,\n        nearZ,\n        farZ\n      ) :linearize_depth(linDepth, nearZ, farZ);\n    }\n\n    vec3 getWorldPosLog(vec3 posS) {\n      vec2 uv = posS.xy;\n      float z = posS.z;\n      float nearZ =near;\n      float farZ = far;\n      float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n      vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n      return wpos.xyz / wpos.w;\n    }\n    vec3 getWorldPos(float depth, vec2 coord) {\n      #ifdef LOGDEPTH\n        return getWorldPosLog(vec3(coord, depth));\n      #endif\n      float z = depth * 2.0 - 1.0;\n      vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n      vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n      // Perspective division\n     vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n     worldSpacePosition.xyz /= worldSpacePosition.w;\n      return worldSpacePosition.xyz;\n  }\n\n  vec3 computeNormal(vec3 worldPos, vec2 vUv) {\n    ivec2 p = ivec2(vUv * resolution);\n    float c0 = texelFetch(sceneDepth, p, 0).x;\n    float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;\n    float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;\n    float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;\n    float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;\n    float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;\n    float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;\n    float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;\n    float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;\n\n    float dl = abs((2.0 * l1 - l2) - c0);\n    float dr = abs((2.0 * r1 - r2) - c0);\n    float db = abs((2.0 * b1 - b2) - c0);\n    float dt = abs((2.0 * t1 - t2) - c0);\n\n    vec3 ce = getWorldPos(c0, vUv).xyz;\n\n    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz\n                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;\n    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz\n                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;\n\n    return normalize(cross(dpdx, dpdy));\n}\n\nvoid main() {\n      vec4 diffuse = texture2D(sceneDiffuse, vUv);\n      float depth = texture2D(sceneDepth, vUv).x;\n      if (depth == 1.0) {\n        gl_FragColor = vec4(vec3(1.0), 1.0);\n        return;\n      }\n      vec3 worldPos = getWorldPos(depth, vUv);\n      float bias = (near / 0.1) * fwidth(distance(worldPos, cameraPos)) / radius;\n      vec3 normal = computeNormal(worldPos, vUv);\n      vec4 noise = texture2D(bluenoise, vUv * (resolution / vec2(128.0)));\n      vec3 randomVec = normalize(noise.rgb * 2.0 - 1.0);\n      vec3 tangent = normalize(randomVec - normal * dot(randomVec, normal));\n      vec3 bitangent = cross(normal, tangent);\n      mat3 tbn = mat3(tangent, bitangent, normal);\n      float occluded = 0.0;\n      float totalWeight = 0.0;\n      for(float i = 0.0; i < FSAMPLES; i++) {\n        vec3 sampleDirection = \n        tbn * \n        samples[int(i)];\n        ;\n        float moveAmt = samplesR[int(mod(i + noise.a * FSAMPLES, FSAMPLES))];\n        vec3 samplePos = worldPos + radius * moveAmt * sampleDirection;\n        vec4 offset = projViewMat * vec4(samplePos, 1.0);\n        offset.xyz /= offset.w;\n        offset.xyz = offset.xyz * 0.5 + 0.5;\n        float sampleDepth = textureLod(sceneDepth, offset.xy, 0.0).x;\n        /*float distSample = logDepth ? linearize_depth_log(sampleDepth, near, far) \n         (ortho ?  linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far));*/\n        #ifdef LOGDEPTH\n        float distSample = linearize_depth_log(sampleDepth, near, far);\n        #else\n        float distSample = ortho ? linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far);\n        #endif\n        float distWorld = ortho ? linearize_depth_ortho(offset.z, near, far) : linearize_depth(offset.z, near, far);\n        float rangeCheck = smoothstep(0.0, 1.0, distanceFalloff / (abs(distSample - distWorld)));\n        vec2 diff = gl_FragCoord.xy - ( offset.xy * resolution);\n        float weight = dot(sampleDirection, normal);\n          occluded += rangeCheck * weight * \n            (distSample + bias\n               < distWorld ? 1.0 : 0.0) * (\n          (dot(\n            diff,\n            diff\n             \n            ) < 1.0 || (sampleDepth == depth) ? 0.0 : 1.0)\n          );\n          totalWeight += weight;\n      }\n      float occ = clamp(1.0 - occluded / totalWeight, 0.0, 1.0);\n      gl_FragColor = vec4(0.5 + 0.5 * normal, occ);\n}"},Cv={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new _o},viewMat:{value:new _o},projectionMatrixInv:{value:new _o},viewMatrixInv:{value:new _o},cameraPos:{value:new Wa},resolution:{value:new ma},color:{value:new Wa(0,0,0)},blueNoise:{value:null},time:{value:0},intensity:{value:10},renderMode:{value:0},gammaCorrection:{value:!1}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\t\tuniform sampler2D sceneDiffuse;\n    uniform sampler2D sceneDepth;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D blueNoise;\n    uniform vec2 resolution;\n    uniform vec3 color;\n    uniform float intensity;\n    uniform float renderMode;\n    uniform bool gammaCorrection;\n    varying vec2 vUv;\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        highp float z_n = 2.0 * d - 1.0;\n        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));\n    }\n    #include <common>\n    #include <dithering_pars_fragment>\n    void main() {\n        vec4 texel = texture2D(tDiffuse, vUv);//vec3(0.0);\n        vec4 sceneTexel = texture2D(sceneDiffuse, vUv);\n        float finalAo = pow(texel.a, intensity);\n        if (renderMode == 0.0) {\n            gl_FragColor = vec4( mix(sceneTexel.rgb, color, 1.0 - finalAo), sceneTexel.a);\n        } else if (renderMode == 1.0) {\n            gl_FragColor = vec4( mix(vec3(1.0), color, 1.0 - finalAo), sceneTexel.a);\n        } else if (renderMode == 2.0) {\n            gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n        } else if (renderMode == 3.0) {\n            if (vUv.x < 0.5) {\n                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {\n                gl_FragColor = vec4(1.0);\n            } else {\n                gl_FragColor = vec4( mix(sceneTexel.rgb, color, 1.0 - finalAo), sceneTexel.a);\n            }\n        } else if (renderMode == 4.0) {\n            if (vUv.x < 0.5) {\n                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {\n                gl_FragColor = vec4(1.0);\n            } else {\n                gl_FragColor = vec4( mix(vec3(1.0), color, 1.0 - finalAo), sceneTexel.a);\n            }\n        }\n        #include <dithering_fragment>\n        if (gammaCorrection) {\n            gl_FragColor = LinearTosRGB(gl_FragColor);\n        }\n    }\n    "},Iv={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new _o},viewMat:{value:new _o},projectionMatrixInv:{value:new _o},viewMatrixInv:{value:new _o},cameraPos:{value:new Wa},resolution:{value:new ma},time:{value:0},r:{value:5},blueNoise:{value:null},radius:{value:12},index:{value:0},poissonDisk:{value:[]},distanceFalloff:{value:1},near:{value:.1},far:{value:1e3},logDepth:{value:!1}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\t\tuniform sampler2D sceneDiffuse;\n    uniform highp sampler2D sceneDepth;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D blueNoise;\n    uniform mat4 projectionMatrixInv;\n    uniform mat4 viewMatrixInv;\n    uniform vec2 resolution;\n    uniform float r;\n    uniform float radius;\n    uniform float index;\n     uniform float near;\n     uniform float far;\n     uniform float distanceFalloff;\n     uniform bool logDepth;\n    varying vec2 vUv;\n\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        highp float z_n = 2.0 * d - 1.0;\n        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n     float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n     float a = farZ / (farZ - nearZ);\n     float b = farZ * nearZ / (nearZ - farZ);\n     float linDepth = a + b / depth;\n     return linearize_depth(linDepth, nearZ, farZ);\n   }\n   highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n     return nearZ + (farZ - nearZ) * d;\n   }\n   vec3 getWorldPosLog(vec3 posS) {\n     vec2 uv = posS.xy;\n     float z = posS.z;\n     float nearZ =near;\n     float farZ = far;\n     float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n     float a = farZ / (farZ - nearZ);\n     float b = farZ * nearZ / (nearZ - farZ);\n     float linDepth = a + b / depth;\n     vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n     vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n     return wpos.xyz / wpos.w;\n   }\n    vec3 getWorldPos(float depth, vec2 coord) {\n     #ifdef LOGDEPTH\n          return getWorldPosLog(vec3(coord, depth));\n     #endif\n        \n        float z = depth * 2.0 - 1.0;\n        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n        // Perspective division\n       vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n       worldSpacePosition.xyz /= worldSpacePosition.w;\n        return worldSpacePosition.xyz;\n    }\n    #include <common>\n    #define NUM_SAMPLES 16\n  //  #define NUM_RINGS 11\n    uniform vec2 poissonDisk[NUM_SAMPLES];\n\t\t\t\t/*void initPoissonSamples( ) {\n\t\t\t\t\tfloat ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\n\t\t\t\t\tfloat INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\n\n\t\t\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\t\t\t\t\t//float angle = texture2D(blueNoise, vUv * (resolution / vec2(1024.0))).x * PI2;\n                    float angle;\n                    if (index == 0.0) {\n                         angle = texture2D(blueNoise, vUv * (resolution / vec2(1024.0))).x * PI2;\n                    } else if (index == 1.0) {\n                         angle = texture2D(blueNoise, vUv * (resolution / vec2(1024.0))).y * PI2;\n                    } else if (index == 2.0) {\n                         angle = texture2D(blueNoise, vUv * (resolution / vec2(1024.0))).z * PI2;\n                    } else {\n                         angle = texture2D(blueNoise, vUv * (resolution / vec2(1024.0))).w * PI2;\n                    }\n\t\t\t\t\tfloat radius = INV_NUM_SAMPLES;\n\t\t\t\t\tfloat radiusStep = radius;\n\n\t\t\t\t\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\n\t\t\t\t\t\tpoissonDisk[i] = vec2( cos( angle ), sin( angle ) ) * pow( radius, 0.75 );\n\t\t\t\t\t\tradius += radiusStep;\n\t\t\t\t\t\tangle += ANGLE_STEP;\n\t\t\t\t\t}\n\t\t\t\t}*/\n    void main() {\n        const float pi = 3.14159;\n        //vec3 texel = texture2D(tDiffuse, vUv).rgb;\n       // initPoissonSamples();\n        vec2 texelSize = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n        vec2 uv = vUv;\n        vec4 data = texture2D(tDiffuse, vUv);\n        float occlusion = data.a;\n        float baseOcc = data.a;\n        vec3 normal = data.rgb * 2.0 - 1.0;\n        float count = 1.0;\n        float d = texture2D(sceneDepth, vUv).x;\n        vec3 worldPos = getWorldPos(d, vUv);\n        float size = radius;\n        float angle;\n        if (index == 0.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).x * PI2;\n        } else if (index == 1.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).y * PI2;\n        } else if (index == 2.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).z * PI2;\n        } else {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).w * PI2;\n        }\n\n        mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n        \n        for(int i = 0; i < NUM_SAMPLES; i++) {\n            vec2 offset = (rotationMatrix * poissonDisk[i]) * texelSize * size;\n            vec4 dataSample = texture2D(tDiffuse, uv + offset);\n            float occSample = dataSample.a;\n            vec3 normalSample = dataSample.rgb * 2.0 - 1.0;\n            float dSample = texture2D(sceneDepth, uv + offset).x;\n            vec3 worldPosSample = getWorldPos(dSample, uv + offset);\n            float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));\n            float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloff)) * max(dot(normal, normalSample), 0.0) * (1.0 - abs(occSample - baseOcc));\n            occlusion += occSample * rangeCheck;\n            count += rangeCheck;\n        }\n        occlusion /= count;\n        gl_FragColor = vec4(0.5 + 0.5 * normal, occlusion);\n    }\n    "};var Lv="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";const Rv=Uint8Array.from(atob(Lv),(e=>e.charCodeAt(0)));function Pv(e,t,n){if(t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE)){const i=t.getQueryParameter(e,t.QUERY_RESULT)/1e6;n.lastTime=i}else setTimeout((()=>{Pv(e,t,n)}),1)}class kv extends pv{constructor(e,t,n=512,i=512){super(),this.width=n,this.height=i,this.clear=!0,this.camera=t,this.scene=e,this.autosetGamma=!0,this.configuration=new Proxy({aoSamples:16,aoRadius:5,denoiseSamples:8,denoiseRadius:12,distanceFalloff:1,intensity:5,denoiseIterations:2,renderMode:0,color:new dl(0,0,0),gammaCorrection:!0,logarithmicDepthBuffer:!1},{set:(e,t,n)=>{const i=e[t];return e[t]=n,"aoSamples"===t&&i!==n&&this.configureAOPass(this.configuration.logarithmicDepthBuffer),"denoiseSamples"===t&&i!==n&&this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),"gammaCorrection"===t&&(this.autosetGamma=!1),!0}}),this.samples=[],this.samplesR=[],this.samplesDenoise=[],this.configureSampleDependentPasses(),this.effectCompisterQuad=new nv(new hc(Cv)),this.copyQuad=new nv(new hc({uniforms:{tDiffuse:{value:null}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n            ",fragmentShader:"\n            uniform sampler2D tDiffuse;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = texture2D(tDiffuse, vUv);\n            }\n            "})),this.writeTargetInternal=new Ba(this.width,this.height,{minFilter:$i,magFilter:$i,depthBuffer:!1}),this.readTargetInternal=new Ba(this.width,this.height,{minFilter:$i,magFilter:$i,depthBuffer:!1}),this.bluenoise=new Bd(Rv,128,128),this.bluenoise.colorSpace=_s,this.bluenoise.wrapS=Wi,this.bluenoise.wrapT=Wi,this.bluenoise.minFilter=Yi,this.bluenoise.magFilter=Yi,this.bluenoise.needsUpdate=!0,this.lastTime=0,this.needsDepthTexture=!0,this._r=new ma,this._c=new dl}configureSampleDependentPasses(){this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)}configureAOPass(e=!1){this.samples=this.generateHemisphereSamples(this.configuration.aoSamples),this.samplesR=this.generateHemisphereSamplesR(this.configuration.aoSamples);const t={...Av};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.aoSamples).replace("16.0",this.configuration.aoSamples+".0"),e&&(t.fragmentShader="#define LOGDEPTH\n"+t.fragmentShader),this.effectShaderQuad?(this.effectShaderQuad.material.dispose(),this.effectShaderQuad.material=new hc(t)):this.effectShaderQuad=new nv(new hc(t))}configureDenoisePass(e=!1){this.samplesDenoise=this.generateDenoiseSamples(this.configuration.denoiseSamples,11);const t={...Iv};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.denoiseSamples),e&&(t.fragmentShader="#define LOGDEPTH\n"+t.fragmentShader),this.poissonBlurQuad?(this.poissonBlurQuad.material.dispose(),this.poissonBlurQuad.material=new hc(t)):this.poissonBlurQuad=new nv(new hc(t))}generateHemisphereSamples(e){const t=[];for(let n=0;n<e;n++){const i=2.399963*n,r=Math.sqrt(n+.5)/Math.sqrt(e),s=r*Math.cos(i),a=r*Math.sin(i),o=Math.sqrt(1-(s*s+a*a));t.push(new Wa(s,a,o))}return t}generateHemisphereSamplesR(e){let t=[];for(let n=0;n<e;n++)t.push((n+1)/e);return t}generateDenoiseSamples(e,t){const n=2*Math.PI*t/e,i=1/e,r=i,s=[];let a=i,o=0;for(let t=0;t<e;t++)s.push(new ma(Math.cos(o),Math.sin(o)).multiplyScalar(Math.pow(a,.75))),a+=r,o+=n;return s}setSize(e,t){this.width=e,this.height=t,this.writeTargetInternal.setSize(e,t),this.readTargetInternal.setSize(e,t)}setDepthTexture(e){this.depthTexture=e}render(e,t,n){let i,r,s;e.capabilities.logarithmicDepthBuffer!==this.configuration.logarithmicDepthBuffer&&(this.configuration.logarithmicDepthBuffer=e.capabilities.logarithmicDepthBuffer,this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)),this.debugMode&&(i=e.getContext(),r=i.getExtension("EXT_disjoint_timer_query_webgl2"),null===r&&(console.error("EXT_disjoint_timer_query_webgl2 not available, disabling debug mode."),this.debugMode=!1)),this.debugMode&&(s=i.createQuery(),i.beginQuery(r.TIME_ELAPSED_EXT,s)),this.camera.updateMatrixWorld(),this.effectShaderQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectShaderQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.effectShaderQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.effectShaderQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.effectShaderQuad.material.uniforms.projViewMat.value=this.camera.projectionMatrix.clone().multiply(this.camera.matrixWorldInverse.clone()),this.effectShaderQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectShaderQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectShaderQuad.material.uniforms.cameraPos.value=this.camera.position,this._r.set(this.width,this.height),this.effectShaderQuad.material.uniforms.resolution.value=this._r,this.effectShaderQuad.material.uniforms.time.value=performance.now()/1e3,this.effectShaderQuad.material.uniforms.samples.value=this.samples,this.effectShaderQuad.material.uniforms.samplesR.value=this.samplesR,this.effectShaderQuad.material.uniforms.bluenoise.value=this.bluenoise,this.effectShaderQuad.material.uniforms.radius.value=this.configuration.aoRadius,this.effectShaderQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectShaderQuad.material.uniforms.near.value=this.camera.near,this.effectShaderQuad.material.uniforms.far.value=this.camera.far,this.effectShaderQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectShaderQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,e.setRenderTarget(this.writeTargetInternal),this.effectShaderQuad.render(e);for(let t=0;t<this.configuration.denoiseIterations;t++)[this.writeTargetInternal,this.readTargetInternal]=[this.readTargetInternal,this.writeTargetInternal],this.poissonBlurQuad.material.uniforms.tDiffuse.value=this.readTargetInternal.texture,this.poissonBlurQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.poissonBlurQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.poissonBlurQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.poissonBlurQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.poissonBlurQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.poissonBlurQuad.material.uniforms.cameraPos.value=this.camera.position,this.poissonBlurQuad.material.uniforms.resolution.value=this._r,this.poissonBlurQuad.material.uniforms.time.value=performance.now()/1e3,this.poissonBlurQuad.material.uniforms.blueNoise.value=this.bluenoise,this.poissonBlurQuad.material.uniforms.radius.value=this.configuration.denoiseRadius,this.poissonBlurQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.poissonBlurQuad.material.uniforms.index.value=t,this.poissonBlurQuad.material.uniforms.poissonDisk.value=this.samplesDenoise,this.poissonBlurQuad.material.uniforms.near.value=this.camera.near,this.poissonBlurQuad.material.uniforms.far.value=this.camera.far,this.poissonBlurQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,e.setRenderTarget(this.writeTargetInternal),this.poissonBlurQuad.render(e);this.effectCompisterQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectCompisterQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.effectCompisterQuad.material.uniforms.resolution.value=this._r,this.effectCompisterQuad.material.uniforms.blueNoise.value=this.bluenoise,this.effectCompisterQuad.material.uniforms.intensity.value=this.configuration.intensity,this.effectCompisterQuad.material.uniforms.renderMode.value=this.configuration.renderMode,this.effectCompisterQuad.material.uniforms.gammaCorrection.value=this.autosetGamma?this.renderToScreen:this.configuration.gammaCorrection,this.effectCompisterQuad.material.uniforms.tDiffuse.value=this.writeTargetInternal.texture,this.effectCompisterQuad.material.uniforms.color.value=this._c.copy(this.configuration.color).convertSRGBToLinear(),e.setRenderTarget(this.renderToScreen?null:n),this.effectCompisterQuad.render(e),this.debugMode&&(i.endQuery(r.TIME_ELAPSED_EXT),Pv(s,i,this))}enableDebugMode(){this.debugMode=!0}disableDebugMode(){this.debugMode=!1}setDisplayMode(e){this.configuration.renderMode=["Combined","AO","No AO","Split","Split AO"].indexOf(e)}setQualityMode(e){"Performance"===e?(this.configuration.aoSamples=8,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):"Low"===e?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):"Medium"===e?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=12):"High"===e?(this.configuration.aoSamples=64,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=6):"Ultra"===e&&(this.configuration.aoSamples=64,this.configuration.denoiseSamples=16,this.configuration.denoiseRadius=6)}}Uint8Array.from(atob(Lv),(e=>e.charCodeAt(0)));var Dv=n(3896),Nv=n.n(Dv);function Ov(e,t=!1){const n=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),r=new Set(Object.keys(e[0].morphAttributes)),s={},a={},o=e[0].morphTargetsRelative,l=new zl;let c=0;for(let u=0;u<e.length;++u){const h=e[u];let d=0;if(n!==(null!==h.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const e in h.attributes){if(!i.has(e))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+e+'" attribute exists among all geometries, or in none of them.'),null;void 0===s[e]&&(s[e]=[]),s[e].push(h.attributes[e]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(o!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const e in h.morphAttributes){if(!r.has(e))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===a[e]&&(a[e]=[]),a[e].push(h.morphAttributes[e])}if(t){let e;if(n)e=h.index.count;else{if(void 0===h.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;e=h.attributes.position.count}l.addGroup(c,e,u),c+=e}}if(n){let t=0;const n=[];for(let i=0;i<e.length;++i){const r=e[i].index;for(let e=0;e<r.count;++e)n.push(r.getX(e)+t);t+=e[i].attributes.position.count}l.setIndex(n)}for(const e in s){const t=Uv(s[e]);if(!t)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" attribute."),null;l.setAttribute(e,t)}for(const e in a){const t=a[e][0].length;if(0===t)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[e]=[];for(let n=0;n<t;++n){const t=[];for(let i=0;i<a[e].length;++i)t.push(a[e][i][n]);const i=Uv(t);if(!i)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" morphAttribute."),null;l.morphAttributes[e].push(i)}}return l}function Uv(e){let t,n,i,r=0;for(let s=0;s<e.length;++s){const a=e[s];if(a.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=a.normalized),i!==a.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=a.array.length}const s=new t(r);let a=0;for(let t=0;t<e.length;++t)s.set(e[t].array,a),a+=e[t].array.length;return new _l(s,n,i)}function Bv(e,t){if(t===ps)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===ms||t===fs){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,r=[];if(t===ms)for(let e=1;e<=i;e++)r.push(n.getX(0)),r.push(n.getX(e)),r.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2==0?(r.push(n.getX(e)),r.push(n.getX(e+1)),r.push(n.getX(e+2))):(r.push(n.getX(e+2)),r.push(n.getX(e+1)),r.push(n.getX(e)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=e.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}var Fv={};const zv=t=>{var n;switch(t.type){case"ShapeGeometry":var i=new ef;t.shapeArgs.forEach((e=>i[e.draw](...e.drawArgs))),(n={args:t.args,geometry:new Df(i)}).edges=new $p(n.geometry);break;case"ExtrudeGeometry":i=new ef,t.shapeArgs.forEach((e=>i[e.draw](...e.drawArgs))),(n={geometry:new If(i,t.extrudeSettings)}).edges=new $p(n.geometry);break;case"ParametricGeometry":case"TubeGeometry":const s=new zl;s.setAttribute("position",new _l(t.attributes.position.array,t.attributes.position.itemSize,t.attributes.position.Boolean)),s.setAttribute("normal",new _l(t.attributes.normal.array,t.attributes.normal.itemSize,t.attributes.normal.Boolean)),s.setAttribute("uv",new _l(t.attributes.uv.array,t.attributes.uv.itemSize,t.attributes.uv.Boolean)),s.setIndex(new _l(t.index.array,t.index.itemSize,t.index.Boolean)),(n={geometry:s}).edges=new $p(n.geometry);break;default:if(Fv.hasOwnProperty(t.type)){var r=!1;Fv[t.type].forEach((e=>{if(e.args.length===t.args.length){var i=!0;for(let n=0;n<e.args.length;n++)e.args[n]===t.args[n]||(i=!1);i&&(r=!0,(n=e).count++,n.instances=[])}})),r||((n={args:t.args,geometry:new e[t.type](...t.args),count:0}).edges=new $p(n.geometry),Fv[t.type].push(n))}else Fv[t.type]=[],(n={args:t.args,geometry:new e[t.type](...t.args),count:0}).edges=new $p(n.geometry),Fv[t.type].push(n)}return n},Gv=0,Hv=1,Vv=2,qv=2,Wv=1.25,jv=1,Xv=32,Yv=65535,Jv=Math.pow(2,-24),Kv=Symbol("SKIP_GENERATION");function Zv(e){return function(e){return e.index?e.index.count:e.attributes.position.count}(e)/3}function Qv(e){const t=Zv(e),n=e.drawRange,i=n.start/3,r=(n.start+n.count)/3,s=Math.max(0,i),a=Math.min(t,r)-s;return[{offset:Math.floor(s),count:Math.floor(a)}]}function $v(e){if(!e.groups||!e.groups.length)return Qv(e);const t=[],n=new Set,i=e.drawRange,r=i.start/3,s=(i.start+i.count)/3;for(const t of e.groups){const e=t.start/3,i=(t.start+t.count)/3;n.add(Math.max(r,e)),n.add(Math.min(s,i))}const a=Array.from(n.values()).sort(((e,t)=>e-t));for(let e=0;e<a.length-1;e++){const n=a[e],i=a[e+1];t.push({offset:Math.floor(n),count:Math.floor(i-n)})}return t}function ex(e,t,n,i,r){let s=1/0,a=1/0,o=1/0,l=-1/0,c=-1/0,u=-1/0,h=1/0,d=1/0,p=1/0,f=-1/0,m=-1/0,g=-1/0;for(let i=6*t,r=6*(t+n);i<r;i+=6){const t=e[i+0],n=e[i+1],r=t-n,y=t+n;r<s&&(s=r),y>l&&(l=y),t<h&&(h=t),t>f&&(f=t);const v=e[i+2],x=e[i+3],b=v-x,w=v+x;b<a&&(a=b),w>c&&(c=w),v<d&&(d=v),v>m&&(m=v);const _=e[i+4],M=e[i+5],E=_-M,S=_+M;E<o&&(o=E),S>u&&(u=S),_<p&&(p=_),_>g&&(g=_)}i[0]=s,i[1]=a,i[2]=o,i[3]=l,i[4]=c,i[5]=u,r[0]=h,r[1]=d,r[2]=p,r[3]=f,r[4]=m,r[5]=g}function tx(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function nx(e){let t=-1,n=-1/0;for(let i=0;i<3;i++){const r=e[i+3]-e[i];r>n&&(n=r,t=i)}return t}function ix(e,t){t.set(e)}function rx(e,t,n){let i,r;for(let s=0;s<3;s++){const a=s+3;i=e[s],r=t[s],n[s]=i<r?i:r,i=e[a],r=t[a],n[a]=i>r?i:r}}function sx(e,t,n){for(let i=0;i<3;i++){const r=t[e+2*i],s=t[e+2*i+1],a=r-s,o=r+s;a<n[i]&&(n[i]=a),o>n[i+3]&&(n[i+3]=o)}}function ax(e){const t=e[3]-e[0],n=e[4]-e[1],i=e[5]-e[2];return 2*(t*n+n*i+i*t)}const ox=32,lx=(e,t)=>e.candidate-t.candidate,cx=new Array(ox).fill().map((()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0}))),ux=new Float32Array(6);class hx{constructor(){this.boundingData=new Float32Array(6)}}function dx(e,t,n,i,r,s){let a=i,o=i+r-1;const l=s.pos,c=2*s.axis;for(;;){for(;a<=o&&n[6*a+c]<l;)a++;for(;a<=o&&n[6*o+c]>=l;)o--;if(!(a<o))return a;for(let e=0;e<3;e++){let n=t[3*a+e];t[3*a+e]=t[3*o+e],t[3*o+e]=n}for(let e=0;e<6;e++){let t=n[6*a+e];n[6*a+e]=n[6*o+e],n[6*o+e]=t}a++,o--}}function px(e,t,n,i,r,s){let a=i,o=i+r-1;const l=s.pos,c=2*s.axis;for(;;){for(;a<=o&&n[6*a+c]<l;)a++;for(;a<=o&&n[6*o+c]>=l;)o--;if(!(a<o))return a;{let t=e[a];e[a]=e[o],e[o]=t;for(let e=0;e<6;e++){let t=n[6*a+e];n[6*a+e]=n[6*o+e],n[6*o+e]=t}a++,o--}}}function fx(e,t){return 65535===t[e+15]}function mx(e,t){return t[e+6]}function gx(e,t){return t[e+14]}function yx(e){return e+8}function vx(e,t){return t[e+6]}function xx(e,t){return t[e+7]}let bx,wx,_x,Mx;const Ex=Math.pow(2,32);function Sx(e){return e.count?1:1+Sx(e.left)+Sx(e.right)}function Tx(e,t,n){return bx=new Float32Array(n),wx=new Uint32Array(n),_x=new Uint16Array(n),Mx=new Uint8Array(n),Ax(e,t)}function Ax(e,t){const n=e/4,i=e/2,r=!!t.count,s=t.boundingData;for(let e=0;e<6;e++)bx[n+e]=s[e];if(r){if(t.buffer){const i=t.buffer;Mx.set(new Uint8Array(i),e);for(let t=e,r=e+i.byteLength;t<r;t+=Xv)fx(t/2,_x)||(wx[t/4+6]+=n);return e+i.byteLength}{const r=t.offset,s=t.count;return wx[n+6]=r,_x[i+14]=s,_x[i+15]=Yv,e+Xv}}{const i=t.left,r=t.right,s=t.splitAxis;let a;if(a=Ax(e+Xv,i),a/4>Ex)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return wx[n+6]=a/4,a=Ax(a,r),wx[n+7]=s,a}}function Cx(e,t){const n=e.geometry;t.indirect&&(e._indirectBuffer=function(e,t){const n=(e.index?e.index.count:e.attributes.position.count)/3,i=n>65536,r=i?4:2,s=t?new SharedArrayBuffer(n*r):new ArrayBuffer(n*r),a=i?new Uint32Array(s):new Uint16Array(s);for(let e=0,t=a.length;e<t;e++)a[e]=e;return a}(n,t.useSharedArrayBuffer),function(e){if(0===e.groups.length)return!1;const t=Zv(e),n=$v(e).sort(((e,t)=>e.offset-t.offset)),i=n[n.length-1];i.count=Math.min(t-i.offset,i.count);let r=0;return n.forEach((({count:e})=>r+=e)),t!==r}(n)&&!t.verbose&&console.warn('MeshBVH: Provided geometry contains groups that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),e._indirectBuffer||function(e,t){if(!e.index){const n=e.attributes.position.count,i=function(e,t=ArrayBuffer){return e>65535?new Uint32Array(new t(4*e)):new Uint16Array(new t(2*e))}(n,t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer);e.setIndex(new _l(i,1));for(let e=0;e<n;e++)i[e]=e}}(n,t);const i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=function(e,t=null,n=null,i=null){const r=e.attributes.position,s=e.index?e.index.array:null,a=Zv(e),o=r.normalized;let l;null===t?(l=new Float32Array(6*a*4),n=0,i=a):(l=t,n=n||0,i=i||a);const c=r.array,u=r.offset||0;let h=3;r.isInterleavedBufferAttribute&&(h=r.data.stride);const d=["getX","getY","getZ"];for(let e=n;e<n+i;e++){const t=3*e,n=6*e;let i=t+0,a=t+1,p=t+2;s&&(i=s[i],a=s[a],p=s[p]),o||(i=i*h+u,a=a*h+u,p=p*h+u);for(let e=0;e<3;e++){let t,s,u;o?(t=r[d[e]](i),s=r[d[e]](a),u=r[d[e]](p)):(t=c[i+e],s=c[a+e],u=c[p+e]);let h=t;s<h&&(h=s),u<h&&(h=u);let f=t;s>f&&(f=s),u>f&&(f=u);const m=(f-h)/2,g=2*e;l[n+g+0]=h+m,l[n+g+1]=m+(Math.abs(h)+m)*Jv}}return l}(n),s=t.indirect?Qv(n):$v(n);e._roots=s.map((n=>{const s=function(e,t,n,i,r){const{maxDepth:s,verbose:a,maxLeafTris:o,strategy:l,onProgress:c,indirect:u}=r,h=e._indirectBuffer,d=e.geometry,p=d.index?d.index.array:null,f=u?px:dx,m=Zv(d),g=new Float32Array(6);let y=!1;const v=new hx;return ex(t,n,i,v.boundingData,g),function e(n,i,r,c=null,u=0){if(!y&&u>=s&&(y=!0,a&&(console.warn(`MeshBVH: Max depth of ${s} reached when generating BVH. Consider increasing maxDepth.`),console.warn(d))),r<=o||u>=s)return x(i+r),n.offset=i,n.count=r,n;const m=function(e,t,n,i,r,s){let a=-1,o=0;if(s===Gv)a=nx(t),-1!==a&&(o=(t[a]+t[a+3])/2);else if(s===Hv)a=nx(e),-1!==a&&(o=function(e,t,n,i){let r=0;for(let s=t,a=t+n;s<a;s++)r+=e[6*s+2*i];return r/n}(n,i,r,a));else if(s===Vv){const s=ax(e);let l=Wv*r;const c=6*i,u=6*(i+r);for(let e=0;e<3;e++){const i=t[e],h=(t[e+3]-i)/ox;if(r<ox/4){const t=[...cx];t.length=r;let i=0;for(let r=c;r<u;r+=6,i++){const s=t[i];s.candidate=n[r+2*e],s.count=0;const{bounds:a,leftCacheBounds:o,rightCacheBounds:l}=s;for(let e=0;e<3;e++)l[e]=1/0,l[e+3]=-1/0,o[e]=1/0,o[e+3]=-1/0,a[e]=1/0,a[e+3]=-1/0;sx(r,n,a)}t.sort(lx);let h=r;for(let e=0;e<h;e++){const n=t[e];for(;e+1<h&&t[e+1].candidate===n.candidate;)t.splice(e+1,1),h--}for(let i=c;i<u;i+=6){const r=n[i+2*e];for(let e=0;e<h;e++){const s=t[e];r>=s.candidate?sx(i,n,s.rightCacheBounds):(sx(i,n,s.leftCacheBounds),s.count++)}}for(let n=0;n<h;n++){const i=t[n],c=i.count,u=r-i.count,h=i.leftCacheBounds,d=i.rightCacheBounds;let p=0;0!==c&&(p=ax(h)/s);let f=0;0!==u&&(f=ax(d)/s);const m=jv+Wv*(p*c+f*u);m<l&&(a=e,l=m,o=i.candidate)}}else{for(let e=0;e<ox;e++){const t=cx[e];t.count=0,t.candidate=i+h+e*h;const n=t.bounds;for(let e=0;e<3;e++)n[e]=1/0,n[e+3]=-1/0}for(let t=c;t<u;t+=6){let r=~~((n[t+2*e]-i)/h);r>=ox&&(r=ox-1);const s=cx[r];s.count++,sx(t,n,s.bounds)}const t=cx[ox-1];ix(t.bounds,t.rightCacheBounds);for(let e=ox-2;e>=0;e--){const t=cx[e],n=cx[e+1];rx(t.bounds,n.rightCacheBounds,t.rightCacheBounds)}let d=0;for(let t=0;t<ox-1;t++){const n=cx[t],i=n.count,c=n.bounds,u=cx[t+1].rightCacheBounds;0!==i&&(0===d?ix(c,ux):rx(c,ux,ux)),d+=i;let h=0,p=0;0!==d&&(h=ax(ux)/s);const f=r-d;0!==f&&(p=ax(u)/s);const m=jv+Wv*(h*d+p*f);m<l&&(a=e,l=m,o=n.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:a,pos:o}}(n.boundingData,c,t,i,r,l);if(-1===m.axis)return x(i+r),n.offset=i,n.count=r,n;const v=f(h,p,t,i,r,m);if(v===i||v===i+r)x(i+r),n.offset=i,n.count=r;else{n.splitAxis=m.axis;const s=new hx,a=i,o=v-i;n.left=s,ex(t,a,o,s.boundingData,g),e(s,a,o,g,u+1);const l=new hx,c=v,h=r-o;n.right=l,ex(t,c,h,l.boundingData,g),e(l,c,h,g,u+1)}return n}(v,n,i,g),v;function x(e){c&&c(e/m)}}(e,r,n.offset,n.count,t),a=Sx(s),o=new i(Xv*a);return Tx(0,s,o),o}))}class Ix{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,i=-1/0;for(let r=0,s=e.length;r<s;r++){const s=e[r][t];n=s<n?s:n,i=s>i?s:i}this.min=n,this.max=i}setFromPoints(e,t){let n=1/0,i=-1/0;for(let r=0,s=t.length;r<s;r++){const s=t[r],a=e.dot(s);n=a<n?a:n,i=a>i?a:i}this.min=n,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}Ix.prototype.setFromBox=function(){const e=new Wa;return function(t,n){const i=n.min,r=n.max;let s=1/0,a=-1/0;for(let n=0;n<=1;n++)for(let o=0;o<=1;o++)for(let l=0;l<=1;l++){e.x=i.x*n+r.x*(1-n),e.y=i.y*o+r.y*(1-o),e.z=i.z*l+r.z*(1-l);const c=t.dot(e);s=Math.min(c,s),a=Math.max(c,a)}this.min=s,this.max=a}}(),new Ix;const Lx=function(){const e=new Wa,t=new Wa,n=new Wa;return function(i,r,s){const a=i.start,o=e,l=r.start,c=t;n.subVectors(a,l),e.subVectors(i.end,i.start),t.subVectors(r.end,r.start);const u=n.dot(c),h=c.dot(o),d=c.dot(c),p=n.dot(o),f=o.dot(o)*d-h*h;let m,g;m=0!==f?(u*h-p*d)/f:0,g=(u+m*h)/d,s.x=m,s.y=g}}(),Rx=function(){const e=new ma,t=new Wa,n=new Wa;return function(i,r,s,a){Lx(i,r,e);let o=e.x,l=e.y;if(o>=0&&o<=1&&l>=0&&l<=1)return i.at(o,s),void r.at(l,a);if(o>=0&&o<=1)return l<0?r.at(0,a):r.at(1,a),void i.closestPointToPoint(a,!0,s);if(l>=0&&l<=1)return o<0?i.at(0,s):i.at(1,s),void r.closestPointToPoint(s,!0,a);{let e,c;e=o<0?i.start:i.end,c=l<0?r.start:r.end;const u=t,h=n;return i.closestPointToPoint(c,!0,t),r.closestPointToPoint(e,!0,n),u.distanceToSquared(c)<=h.distanceToSquared(e)?(s.copy(u),void a.copy(c)):(s.copy(e),void a.copy(h))}}}(),Px=function(){const e=new Wa,t=new Wa,n=new wc,i=new ny;return function(r,s){const{radius:a,center:o}=r,{a:l,b:c,c:u}=s;if(i.start=l,i.end=c,i.closestPointToPoint(o,!0,e).distanceTo(o)<=a)return!0;if(i.start=l,i.end=u,i.closestPointToPoint(o,!0,e).distanceTo(o)<=a)return!0;if(i.start=c,i.end=u,i.closestPointToPoint(o,!0,e).distanceTo(o)<=a)return!0;const h=s.getPlane(n);if(Math.abs(h.distanceToPoint(o))<=a){const e=h.projectPoint(o,t);if(s.containsPoint(e))return!0}return!1}}();function kx(e){return Math.abs(e)<1e-15}class Dx extends sl{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map((()=>new Wa)),this.satBounds=new Array(4).fill().map((()=>new Ix)),this.points=[this.a,this.b,this.c],this.sphere=new po,this.plane=new wc,this.needsUpdate=!0}intersectsSphere(e){return Px(e,this)}update(){const e=this.a,t=this.b,n=this.c,i=this.points,r=this.satAxes,s=this.satBounds,a=r[0],o=s[0];this.getNormal(a),o.setFromPoints(a,i);const l=r[1],c=s[1];l.subVectors(e,t),c.setFromPoints(l,i);const u=r[2],h=s[2];u.subVectors(t,n),h.setFromPoints(u,i);const d=r[3],p=s[3];d.subVectors(n,e),p.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}Dx.prototype.closestPointToSegment=function(){const e=new Wa,t=new Wa,n=new ny;return function(i,r=null,s=null){const{start:a,end:o}=i,l=this.points;let c,u=1/0;for(let a=0;a<3;a++){const o=(a+1)%3;n.start.copy(l[a]),n.end.copy(l[o]),Rx(n,i,e,t),c=e.distanceToSquared(t),c<u&&(u=c,r&&r.copy(e),s&&s.copy(t))}return this.closestPointToPoint(a,e),c=a.distanceToSquared(e),c<u&&(u=c,r&&r.copy(e),s&&s.copy(a)),this.closestPointToPoint(o,e),c=o.distanceToSquared(e),c<u&&(u=c,r&&r.copy(e),s&&s.copy(o)),Math.sqrt(u)}}(),Dx.prototype.intersectsTriangle=function(){const e=new Dx,t=new Array(3),n=new Array(3),i=new Ix,r=new Ix,s=new Wa,a=new Wa,o=new Wa,l=new Wa,c=new Wa,u=new ny,h=new ny,d=new ny,p=new Wa;function f(e,t,n){const i=e.points;let r=0,s=-1;for(let e=0;e<3;e++){const{start:o,end:l}=u;o.copy(i[e]),l.copy(i[(e+1)%3]),u.delta(a);const c=kx(t.distanceToPoint(o));if(kx(t.normal.dot(a))&&c){n.copy(u),r=2;break}const h=t.intersectLine(u,p);if(!h&&c&&p.copy(o),(h||c)&&!kx(p.distanceTo(l))){if(r<=1)(1===r?n.start:n.end).copy(p),c&&(s=r);else if(r>=2){(1===s?n.start:n.end).copy(p),r=2;break}if(r++,2===r&&-1===s)break}}return r}return function(a,u=null,p=!1){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(e.copy(a),e.update(),a=e);const m=this.plane,g=a.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){const e=this.satBounds,o=this.satAxes;n[0]=a.a,n[1]=a.b,n[2]=a.c;for(let t=0;t<4;t++){const r=e[t],s=o[t];if(i.setFromPoints(s,n),r.isSeparated(i))return!1}const l=a.satBounds,c=a.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let e=0;e<4;e++){const n=l[e],r=c[e];if(i.setFromPoints(r,t),n.isSeparated(i))return!1}for(let e=0;e<4;e++){const a=o[e];for(let e=0;e<4;e++){const o=c[e];if(s.crossVectors(a,o),i.setFromPoints(s,t),r.setFromPoints(s,n),i.isSeparated(r))return!1}}return u&&(p||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),u.start.set(0,0,0),u.end.set(0,0,0)),!0}{const e=f(this,g,h);if(1===e&&a.containsPoint(h.end))return u&&(u.start.copy(h.end),u.end.copy(h.end)),!0;if(2!==e)return!1;const t=f(a,m,d);if(1===t&&this.containsPoint(d.end))return u&&(u.start.copy(d.end),u.end.copy(d.end)),!0;if(2!==t)return!1;if(h.delta(o),d.delta(l),o.dot(l)<0){let e=d.start;d.start=d.end,d.end=e}const n=h.start.dot(o),i=h.end.dot(o),r=d.start.dot(o),s=d.end.dot(o);return(n===s||r===i||i<r!=n<s)&&(u&&(c.subVectors(h.start,d.start),c.dot(o)>0?u.start.copy(h.start):u.start.copy(d.start),c.subVectors(h.end,d.end),c.dot(o)<0?u.end.copy(h.end):u.end.copy(d.end)),!0)}}}(),Dx.prototype.distanceToPoint=function(){const e=new Wa;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),Dx.prototype.distanceToTriangle=function(){const e=new Wa,t=new Wa,n=["a","b","c"],i=new ny,r=new ny;return function(s,a=null,o=null){const l=a||o?i:null;if(this.intersectsTriangle(s,l))return(a||o)&&(a&&l.getCenter(a),o&&l.getCenter(o)),0;let c=1/0;for(let t=0;t<3;t++){let i;const r=n[t],l=s[r];this.closestPointToPoint(l,e),i=l.distanceToSquared(e),i<c&&(c=i,a&&a.copy(e),o&&o.copy(l));const u=this[r];s.closestPointToPoint(u,e),i=u.distanceToSquared(e),i<c&&(c=i,a&&a.copy(u),o&&o.copy(e))}for(let l=0;l<3;l++){const u=n[l],h=n[(l+1)%3];i.set(this[u],this[h]);for(let l=0;l<3;l++){const u=n[l],h=n[(l+1)%3];r.set(s[u],s[h]),Rx(i,r,e,t);const d=e.distanceToSquared(t);d<c&&(c=d,a&&a.copy(e),o&&o.copy(t))}}return Math.sqrt(c)}}();class Nx{constructor(e,t,n){this.isOrientedBox=!0,this.min=new Wa,this.max=new Wa,this.matrix=new _o,this.invMatrix=new _o,this.points=new Array(8).fill().map((()=>new Wa)),this.satAxes=new Array(3).fill().map((()=>new Wa)),this.satBounds=new Array(3).fill().map((()=>new Ix)),this.alignedSatBounds=new Array(3).fill().map((()=>new Ix)),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),n&&this.matrix.copy(n)}set(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}Nx.prototype.update=function(){const e=this.matrix,t=this.min,n=this.max,i=this.points;for(let r=0;r<=1;r++)for(let s=0;s<=1;s++)for(let a=0;a<=1;a++){const o=i[1*r|2*s|4*a];o.x=r?n.x:t.x,o.y=s?n.y:t.y,o.z=a?n.z:t.z,o.applyMatrix4(e)}const r=this.satBounds,s=this.satAxes,a=i[0];for(let e=0;e<3;e++){const t=s[e],n=r[e],o=i[1<<e];t.subVectors(a,o),n.setFromPoints(t,i)}const o=this.alignedSatBounds;o[0].setFromPointsField(i,"x"),o[1].setFromPointsField(i,"y"),o[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},Nx.prototype.intersectsBox=function(){const e=new Ix;return function(t){this.needsUpdate&&this.update();const n=t.min,i=t.max,r=this.satBounds,s=this.satAxes,a=this.alignedSatBounds;if(e.min=n.x,e.max=i.x,a[0].isSeparated(e))return!1;if(e.min=n.y,e.max=i.y,a[1].isSeparated(e))return!1;if(e.min=n.z,e.max=i.z,a[2].isSeparated(e))return!1;for(let n=0;n<3;n++){const i=s[n],a=r[n];if(e.setFromBox(i,t),a.isSeparated(e))return!1}return!0}}(),Nx.prototype.intersectsTriangle=function(){const e=new Dx,t=new Array(3),n=new Ix,i=new Ix,r=new Wa;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(e.copy(s),e.update(),s=e);const a=this.satBounds,o=this.satAxes;t[0]=s.a,t[1]=s.b,t[2]=s.c;for(let e=0;e<3;e++){const i=a[e],r=o[e];if(n.setFromPoints(r,t),i.isSeparated(n))return!1}const l=s.satBounds,c=s.satAxes,u=this.points;for(let e=0;e<3;e++){const t=l[e],i=c[e];if(n.setFromPoints(i,u),t.isSeparated(n))return!1}for(let e=0;e<3;e++){const s=o[e];for(let e=0;e<4;e++){const a=c[e];if(r.crossVectors(s,a),n.setFromPoints(r,t),i.setFromPoints(r,u),n.isSeparated(i))return!1}}return!0}}(),Nx.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},Nx.prototype.distanceToPoint=function(){const e=new Wa;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),Nx.prototype.distanceToBox=function(){const e=["x","y","z"],t=new Array(12).fill().map((()=>new ny)),n=new Array(12).fill().map((()=>new ny)),i=new Wa,r=new Wa;return function(s,a=0,o=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(o||l)&&(s.getCenter(r),this.closestPointToPoint(r,i),s.closestPointToPoint(i,r),o&&o.copy(i),l&&l.copy(r)),0;const c=a*a,u=s.min,h=s.max,d=this.points;let p=1/0;for(let e=0;e<8;e++){const t=d[e];r.copy(t).clamp(u,h);const n=t.distanceToSquared(r);if(n<p&&(p=n,o&&o.copy(t),l&&l.copy(r),n<c))return Math.sqrt(n)}let f=0;for(let i=0;i<3;i++)for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){const a=(i+1)%3,o=(i+2)%3,l=1<<i|r<<a|s<<o,c=d[r<<a|s<<o],p=d[l];t[f].set(c,p);const m=e[i],g=e[a],y=e[o],v=n[f],x=v.start,b=v.end;x[m]=u[m],x[g]=r?u[g]:h[g],x[y]=s?u[y]:h[g],b[m]=h[m],b[g]=r?u[g]:h[g],b[y]=s?u[y]:h[g],f++}for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)for(let n=0;n<=1;n++){r.x=e?h.x:u.x,r.y=t?h.y:u.y,r.z=n?h.z:u.z,this.closestPointToPoint(r,i);const s=r.distanceToSquared(i);if(s<p&&(p=s,o&&o.copy(i),l&&l.copy(r),s<c))return Math.sqrt(s)}for(let e=0;e<12;e++){const s=t[e];for(let e=0;e<12;e++){const t=n[e];Rx(s,t,i,r);const a=i.distanceToSquared(r);if(a<p&&(p=a,o&&o.copy(i),l&&l.copy(r),a<c))return Math.sqrt(a)}}return Math.sqrt(p)}}();class Ox{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class Ux extends Ox{constructor(){super((()=>new Dx))}}const Bx=new Ux,Fx=new class{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let t=null;this.setBuffer=n=>{t&&e.push(t),t=n,this.float32Array=new Float32Array(n),this.uint16Array=new Uint16Array(n),this.uint32Array=new Uint32Array(n)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,0!==e.length&&this.setBuffer(e.pop())}}};let zx,Gx;const Hx=[],Vx=new Ox((()=>new Ya));function qx(e,t,n,i,r,s){zx=Vx.getPrimitive(),Gx=Vx.getPrimitive(),Hx.push(zx,Gx),Fx.setBuffer(e._roots[t]);const a=Wx(0,e.geometry,n,i,r,s);Fx.clearBuffer(),Vx.releasePrimitive(zx),Vx.releasePrimitive(Gx),Hx.pop(),Hx.pop();const o=Hx.length;return o>0&&(Gx=Hx[o-1],zx=Hx[o-2]),a}function Wx(e,t,n,i,r=null,s=0,a=0){const{float32Array:o,uint16Array:l,uint32Array:c}=Fx;let u=2*e;if(fx(u,l)){const h=mx(e,c),d=gx(u,l);return tx(e,o,zx),i(h,d,!1,a,s+e,zx)}{const p=yx(e),f=vx(e,c);let m,g,y,v,x=p,b=f;if(r&&(y=zx,v=Gx,tx(x,o,y),tx(b,o,v),m=r(y),g=r(v),g<m)){x=f,b=p;const A=m;m=g,g=A,y=v}y||(y=zx,tx(x,o,y));const w=n(y,fx(2*x,l),m,a+1,s+x);let _;if(w===qv){const C=S(x);_=i(C,T(x)-C,!0,a+1,s+x,y)}else _=w&&Wx(x,t,n,i,r,s,a+1);if(_)return!0;v=Gx,tx(b,o,v);const M=n(v,fx(2*b,l),g,a+1,s+b);let E;if(M===qv){const I=S(b);E=i(I,T(b)-I,!0,a+1,s+b,v)}else E=M&&Wx(b,t,n,i,r,s,a+1);return!!E;function S(e){const{uint16Array:t,uint32Array:n}=Fx;let i=2*e;for(;!fx(i,t);)i=2*(e=yx(e));return mx(e,n)}function T(e){const{uint16Array:t,uint32Array:n}=Fx;let i=2*e;for(;!fx(i,t);)i=2*(e=vx(e,n));return mx(e,n)+gx(i,t)}}}const jx=new Wa,Xx=new Wa,Yx=new Wa,Jx=new Wa,Kx=new Wa,Zx=new ma,Qx=new ma,$x=new ma,eb=new Wa,tb=new Wa,nb=new Wa,ib=new Wa;function rb(e,t,n,i,r){const s=3*i;let a=s+0,o=s+1,l=s+2;const c=e.index;e.index&&(a=c.getX(a),o=c.getX(o),l=c.getX(l));const{position:u,normal:h,uv:d,uv1:p}=e.attributes,f=function(e,t,n,i,r,s,a,o,l){Yx.fromBufferAttribute(t,s),Jx.fromBufferAttribute(t,a),Kx.fromBufferAttribute(t,o);const c=function(e,t,n,i,r,s){let a;return a=s===Zn?e.intersectTriangle(i,n,t,!0,r):e.intersectTriangle(t,n,i,s!==Qn,r),null===a?null:{distance:e.origin.distanceTo(r),point:r.clone()}}(e,Yx,Jx,Kx,ib,l);if(c){i&&(Zx.fromBufferAttribute(i,s),Qx.fromBufferAttribute(i,a),$x.fromBufferAttribute(i,o),c.uv=sl.getInterpolation(ib,Yx,Jx,Kx,Zx,Qx,$x,new ma)),r&&(Zx.fromBufferAttribute(r,s),Qx.fromBufferAttribute(r,a),$x.fromBufferAttribute(r,o),c.uv1=sl.getInterpolation(ib,Yx,Jx,Kx,Zx,Qx,$x,new ma)),n&&(eb.fromBufferAttribute(n,s),tb.fromBufferAttribute(n,a),nb.fromBufferAttribute(n,o),c.normal=sl.getInterpolation(ib,Yx,Jx,Kx,eb,tb,nb,new Wa),c.normal.dot(e.direction)>0&&c.normal.multiplyScalar(-1));const t={a:s,b:a,c:o,normal:new Wa,materialIndex:0};sl.getNormal(Yx,Jx,Kx,t.normal),c.face=t,c.faceIndex=s}return c}(n,u,h,d,p,a,o,l,t);return f?(f.faceIndex=i,r&&r.push(f),f):null}function sb(e,t,n,i){const r=e.a,s=e.b,a=e.c;let o=t,l=t+1,c=t+2;n&&(o=n.getX(o),l=n.getX(l),c=n.getX(c)),r.x=i.getX(o),r.y=i.getY(o),r.z=i.getZ(o),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),a.x=i.getX(c),a.y=i.getY(c),a.z=i.getZ(c)}function ab(e,t,n,i,r,s,a){const{geometry:o}=n,{index:l}=o,c=o.attributes.position;for(let n=e,o=t+e;n<o;n++){let e;if(e=n,sb(a,3*e,l,c),a.needsUpdate=!0,i(a,e,r,s))return!0}return!1}function ob(e,t=null){t&&Array.isArray(t)&&(t=new Set(t));const n=e.geometry,i=n.index?n.index.array:null,r=n.attributes.position;let s,a,o,l,c=0;const u=e._roots;for(let e=0,t=u.length;e<t;e++)s=u[e],a=new Uint32Array(s),o=new Uint16Array(s),l=new Float32Array(s),h(0,c),c+=s.byteLength;function h(e,n,s=!1){const c=2*e;if(o[c+15]===Yv){const t=a[e+6];let n=1/0,s=1/0,u=1/0,h=-1/0,d=-1/0,p=-1/0;for(let e=3*t,a=3*(t+o[c+14]);e<a;e++){let t=i[e];const a=r.getX(t),o=r.getY(t),l=r.getZ(t);a<n&&(n=a),a>h&&(h=a),o<s&&(s=o),o>d&&(d=o),l<u&&(u=l),l>p&&(p=l)}return(l[e+0]!==n||l[e+1]!==s||l[e+2]!==u||l[e+3]!==h||l[e+4]!==d||l[e+5]!==p)&&(l[e+0]=n,l[e+1]=s,l[e+2]=u,l[e+3]=h,l[e+4]=d,l[e+5]=p,!0)}{const i=e+8,r=a[e+6],o=i+n,c=r+n;let u=s,d=!1,p=!1;t?u||(d=t.has(o),p=t.has(c),u=!d&&!p):(d=!0,p=!0);const f=u||p;let m=!1;(u||d)&&(m=h(i,n,u));let g=!1;f&&(g=h(r,n,u));const y=m||g;if(y)for(let t=0;t<3;t++){const n=i+t,s=r+t,a=l[n],o=l[n+3],c=l[s],u=l[s+3];l[e+t]=a<c?a:c,l[e+t+3]=o>u?o:u}return y}}}const lb=new Ya;function cb(e,t,n,i){return tx(e,t,lb),n.intersectBox(lb,i)}const ub=new Wa;function hb(e,t,n,i,r){Fx.setBuffer(e._roots[t]),db(0,e,n,i,r),Fx.clearBuffer()}function db(e,t,n,i,r){const{float32Array:s,uint16Array:a,uint32Array:o}=Fx,l=2*e;if(fx(l,a))!function(e,t,n,i,r,s){const{geometry:a,_indirectBuffer:o}=e;for(let e=i,o=i+r;e<o;e++)rb(a,t,n,e,s)}(t,n,i,mx(e,o),gx(l,a),r);else{const a=yx(e);cb(a,s,i,ub)&&db(a,t,n,i,r);const l=vx(e,o);cb(l,s,i,ub)&&db(l,t,n,i,r)}}const pb=new Wa,fb=["x","y","z"];function mb(e,t,n,i){Fx.setBuffer(e._roots[t]);const r=gb(0,e,n,i);return Fx.clearBuffer(),r}function gb(e,t,n,i){const{float32Array:r,uint16Array:s,uint32Array:a}=Fx;let o=2*e;if(fx(o,s))return function(e,t,n,i,r){const{geometry:s,_indirectBuffer:a}=e;let o=1/0,l=null;for(let e=i,a=i+r;e<a;e++){let i;i=rb(s,t,n,e),i&&i.distance<o&&(l=i,o=i.distance)}return l}(t,n,i,mx(e,a),gx(o,s));{const s=xx(e,a),o=fb[s],l=i.direction[o]>=0;let c,u;l?(c=yx(e),u=vx(e,a)):(c=vx(e,a),u=yx(e));const h=cb(c,r,i,pb)?gb(c,t,n,i):null;if(h){const e=h.point[o];if(l?e<=r[u+s]:e>=r[u+s+3])return h}const d=cb(u,r,i,pb)?gb(u,t,n,i):null;return h&&d?h.distance<=d.distance?h:d:h||d||null}}const yb=new Ya,vb=new Dx,xb=new Dx,bb=new _o,wb=new Nx,_b=new Nx;function Mb(e,t,n,i){Fx.setBuffer(e._roots[t]);const r=Eb(0,e,n,i);return Fx.clearBuffer(),r}function Eb(e,t,n,i,r=null){const{float32Array:s,uint16Array:a,uint32Array:o}=Fx;let l=2*e;if(null===r&&(n.boundingBox||n.computeBoundingBox(),wb.set(n.boundingBox.min,n.boundingBox.max,i),r=wb),!fx(l,a)){const a=e+8,l=o[e+6];return tx(a,s,yb),r.intersectsBox(yb)&&Eb(a,t,n,i,r)?!0:(tx(l,s,yb),!(!r.intersectsBox(yb)||!Eb(l,t,n,i,r)))}{const r=t.geometry,c=r.index,u=r.attributes.position,h=n.index,d=n.attributes.position,p=mx(e,o),f=gx(l,a);if(bb.copy(i).invert(),n.boundsTree)return tx(e,s,_b),_b.matrix.copy(bb),_b.needsUpdate=!0,n.boundsTree.shapecast({intersectsBounds:e=>_b.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let t=3*p,n=3*(f+p);t<n;t+=3)if(sb(xb,t,c,u),xb.needsUpdate=!0,e.intersectsTriangle(xb))return!0;return!1}});for(let e=3*p,t=3*(f+p);e<t;e+=3){sb(vb,e,c,u),vb.a.applyMatrix4(bb),vb.b.applyMatrix4(bb),vb.c.applyMatrix4(bb),vb.needsUpdate=!0;for(let e=0,t=h.count;e<t;e+=3)if(sb(xb,e,h,d),xb.needsUpdate=!0,vb.intersectsTriangle(xb))return!0}}}const Sb=new _o,Tb=new Nx,Ab=new Nx,Cb=new Wa,Ib=new Wa,Lb=new Wa,Rb=new Wa;function Pb(e,t,n,i={},r={},s=0,a=1/0){t.boundingBox||t.computeBoundingBox(),Tb.set(t.boundingBox.min,t.boundingBox.max,n),Tb.needsUpdate=!0;const o=e.geometry,l=o.attributes.position,c=o.index,u=t.attributes.position,h=t.index,d=Bx.getPrimitive(),p=Bx.getPrimitive();let f=Cb,m=Ib,g=null,y=null;r&&(g=Lb,y=Rb);let v=1/0,x=null,b=null;return Sb.copy(n).invert(),Ab.matrix.copy(Sb),e.shapecast({boundsTraverseOrder:e=>Tb.distanceToBox(e),intersectsBounds:(e,t,n)=>n<v&&n<a&&(t&&(Ab.min.copy(e.min),Ab.max.copy(e.max),Ab.needsUpdate=!0),!0),intersectsRange:(e,i)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:e=>Ab.distanceToBox(e),intersectsBounds:(e,t,n)=>n<v&&n<a,intersectsRange:(t,r)=>{for(let a=t,o=t+r;a<o;a++){sb(p,3*a,h,u),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let t=e,n=e+i;t<n;t++){sb(d,3*t,c,l),d.needsUpdate=!0;const e=d.distanceToTriangle(p,f,g);if(e<v&&(m.copy(f),y&&y.copy(g),v=e,x=t,b=a),e<s)return!0}}}});for(let r=0,a=Zv(t);r<a;r++){sb(p,3*r,h,u),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let t=e,n=e+i;t<n;t++){sb(d,3*t,c,l),d.needsUpdate=!0;const e=d.distanceToTriangle(p,f,g);if(e<v&&(m.copy(f),y&&y.copy(g),v=e,x=t,b=r),e<s)return!0}}}}),Bx.releasePrimitive(d),Bx.releasePrimitive(p),v===1/0?null:(i.point?i.point.copy(m):i.point=m.clone(),i.distance=v,i.faceIndex=x,r&&(r.point?r.point.copy(y):r.point=y.clone(),r.point.applyMatrix4(Sb),m.applyMatrix4(Sb),r.distance=m.sub(r.point).length(),r.faceIndex=b),i)}function kb(e,t,n,i,r,s,a){const{geometry:o}=n,{index:l}=o,c=o.attributes.position;for(let o=e,u=t+e;o<u;o++){let e;if(e=n.resolveTriangleIndex(o),sb(a,3*e,l,c),a.needsUpdate=!0,i(a,e,r,s))return!0}return!1}function Db(e,t=null){t&&Array.isArray(t)&&(t=new Set(t));const n=e.geometry,i=n.index?n.index.array:null,r=n.attributes.position;let s,a,o,l,c=0;const u=e._roots;for(let e=0,t=u.length;e<t;e++)s=u[e],a=new Uint32Array(s),o=new Uint16Array(s),l=new Float32Array(s),h(0,c),c+=s.byteLength;function h(n,s,c=!1){const u=2*n;if(o[u+15]===Yv){const t=a[n+6];let s=1/0,c=1/0,h=1/0,d=-1/0,p=-1/0,f=-1/0;for(let n=t,a=t+o[u+14];n<a;n++){const t=3*e.resolveTriangleIndex(n);for(let e=0;e<3;e++){let n=t+e;n=i?i[n]:n;const a=r.getX(n),o=r.getY(n),l=r.getZ(n);a<s&&(s=a),a>d&&(d=a),o<c&&(c=o),o>p&&(p=o),l<h&&(h=l),l>f&&(f=l)}}return(l[n+0]!==s||l[n+1]!==c||l[n+2]!==h||l[n+3]!==d||l[n+4]!==p||l[n+5]!==f)&&(l[n+0]=s,l[n+1]=c,l[n+2]=h,l[n+3]=d,l[n+4]=p,l[n+5]=f,!0)}{const e=n+8,i=a[n+6],r=e+s,o=i+s;let u=c,d=!1,p=!1;t?u||(d=t.has(r),p=t.has(o),u=!d&&!p):(d=!0,p=!0);const f=u||p;let m=!1;(u||d)&&(m=h(e,s,u));let g=!1;f&&(g=h(i,s,u));const y=m||g;if(y)for(let t=0;t<3;t++){const r=e+t,s=i+t,a=l[r],o=l[r+3],c=l[s],u=l[s+3];l[n+t]=a<c?a:c,l[n+t+3]=o>u?o:u}return y}}}const Nb=new Wa;function Ob(e,t,n,i,r){Fx.setBuffer(e._roots[t]),Ub(0,e,n,i,r),Fx.clearBuffer()}function Ub(e,t,n,i,r){const{float32Array:s,uint16Array:a,uint32Array:o}=Fx,l=2*e;if(fx(l,a))!function(e,t,n,i,r,s){const{geometry:a,_indirectBuffer:o}=e;for(let e=i,l=i+r;e<l;e++)rb(a,t,n,o?o[e]:e,s)}(t,n,i,mx(e,o),gx(l,a),r);else{const a=yx(e);cb(a,s,i,Nb)&&Ub(a,t,n,i,r);const l=vx(e,o);cb(l,s,i,Nb)&&Ub(l,t,n,i,r)}}const Bb=new Wa,Fb=["x","y","z"];function zb(e,t,n,i){Fx.setBuffer(e._roots[t]);const r=Gb(0,e,n,i);return Fx.clearBuffer(),r}function Gb(e,t,n,i){const{float32Array:r,uint16Array:s,uint32Array:a}=Fx;let o=2*e;if(fx(o,s))return function(e,t,n,i,r){const{geometry:s,_indirectBuffer:a}=e;let o=1/0,l=null;for(let e=i,c=i+r;e<c;e++){let i;i=rb(s,t,n,a?a[e]:e),i&&i.distance<o&&(l=i,o=i.distance)}return l}(t,n,i,mx(e,a),gx(o,s));{const s=xx(e,a),o=Fb[s],l=i.direction[o]>=0;let c,u;l?(c=yx(e),u=vx(e,a)):(c=vx(e,a),u=yx(e));const h=cb(c,r,i,Bb)?Gb(c,t,n,i):null;if(h){const e=h.point[o];if(l?e<=r[u+s]:e>=r[u+s+3])return h}const d=cb(u,r,i,Bb)?Gb(u,t,n,i):null;return h&&d?h.distance<=d.distance?h:d:h||d||null}}const Hb=new Ya,Vb=new Dx,qb=new Dx,Wb=new _o,jb=new Nx,Xb=new Nx;function Yb(e,t,n,i){Fx.setBuffer(e._roots[t]);const r=Jb(0,e,n,i);return Fx.clearBuffer(),r}function Jb(e,t,n,i,r=null){const{float32Array:s,uint16Array:a,uint32Array:o}=Fx;let l=2*e;if(null===r&&(n.boundingBox||n.computeBoundingBox(),jb.set(n.boundingBox.min,n.boundingBox.max,i),r=jb),!fx(l,a)){const a=e+8,l=o[e+6];return tx(a,s,Hb),r.intersectsBox(Hb)&&Jb(a,t,n,i,r)?!0:(tx(l,s,Hb),!(!r.intersectsBox(Hb)||!Jb(l,t,n,i,r)))}{const r=t.geometry,c=r.index,u=r.attributes.position,h=n.index,d=n.attributes.position,p=mx(e,o),f=gx(l,a);if(Wb.copy(i).invert(),n.boundsTree)return tx(e,s,Xb),Xb.matrix.copy(Wb),Xb.needsUpdate=!0,n.boundsTree.shapecast({intersectsBounds:e=>Xb.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let n=p,i=f+p;n<i;n++)if(sb(qb,3*t.resolveTriangleIndex(n),c,u),qb.needsUpdate=!0,e.intersectsTriangle(qb))return!0;return!1}});for(let e=p,n=f+p;e<n;e++){const n=t.resolveTriangleIndex(e);sb(Vb,3*n,c,u),Vb.a.applyMatrix4(Wb),Vb.b.applyMatrix4(Wb),Vb.c.applyMatrix4(Wb),Vb.needsUpdate=!0;for(let e=0,t=h.count;e<t;e+=3)if(sb(qb,e,h,d),qb.needsUpdate=!0,Vb.intersectsTriangle(qb))return!0}}}const Kb=new _o,Zb=new Nx,Qb=new Nx,$b=new Wa,ew=new Wa,tw=new Wa,nw=new Wa;function iw(e,t,n,i={},r={},s=0,a=1/0){t.boundingBox||t.computeBoundingBox(),Zb.set(t.boundingBox.min,t.boundingBox.max,n),Zb.needsUpdate=!0;const o=e.geometry,l=o.attributes.position,c=o.index,u=t.attributes.position,h=t.index,d=Bx.getPrimitive(),p=Bx.getPrimitive();let f=$b,m=ew,g=null,y=null;r&&(g=tw,y=nw);let v=1/0,x=null,b=null;return Kb.copy(n).invert(),Qb.matrix.copy(Kb),e.shapecast({boundsTraverseOrder:e=>Zb.distanceToBox(e),intersectsBounds:(e,t,n)=>n<v&&n<a&&(t&&(Qb.min.copy(e.min),Qb.max.copy(e.max),Qb.needsUpdate=!0),!0),intersectsRange:(i,r)=>{if(t.boundsTree){const o=t.boundsTree;return o.shapecast({boundsTraverseOrder:e=>Qb.distanceToBox(e),intersectsBounds:(e,t,n)=>n<v&&n<a,intersectsRange:(t,a)=>{for(let w=t,_=t+a;w<_;w++){const t=o.resolveTriangleIndex(w);sb(p,3*t,h,u),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let t=i,n=i+r;t<n;t++){const n=e.resolveTriangleIndex(t);sb(d,3*n,c,l),d.needsUpdate=!0;const i=d.distanceToTriangle(p,f,g);if(i<v&&(m.copy(f),y&&y.copy(g),v=i,x=t,b=w),i<s)return!0}}}})}for(let a=0,o=Zv(t);a<o;a++){sb(p,3*a,h,u),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let t=i,n=i+r;t<n;t++){const n=e.resolveTriangleIndex(t);sb(d,3*n,c,l),d.needsUpdate=!0;const i=d.distanceToTriangle(p,f,g);if(i<v&&(m.copy(f),y&&y.copy(g),v=i,x=t,b=a),i<s)return!0}}}}),Bx.releasePrimitive(d),Bx.releasePrimitive(p),v===1/0?null:(i.point?i.point.copy(m):i.point=m.clone(),i.distance=v,i.faceIndex=x,r&&(r.point?r.point.copy(y):r.point=y.clone(),r.point.applyMatrix4(Kb),m.applyMatrix4(Kb),r.distance=m.sub(r.point).length(),r.faceIndex=b),i)}const rw=new Fx.constructor,sw=new Fx.constructor,aw=new Ox((()=>new Ya)),ow=new Ya,lw=new Ya,cw=new Ya,uw=new Ya;let hw=!1;function dw(e,t,n,i,r,s=0,a=0,o=0,l=0,c=null,u=!1){let h,d;u?(h=sw,d=rw):(h=rw,d=sw);const p=h.float32Array,f=h.uint32Array,m=h.uint16Array,g=d.float32Array,y=d.uint32Array,v=d.uint16Array,x=2*t,b=fx(2*e,m),w=fx(x,v);let _=!1;if(w&&b)_=u?r(mx(t,y),gx(2*t,v),mx(e,f),gx(2*e,m),l,a+t,o,s+e):r(mx(e,f),gx(2*e,m),mx(t,y),gx(2*t,v),o,s+e,l,a+t);else if(w){const c=aw.getPrimitive();tx(t,g,c),c.applyMatrix4(n);const h=yx(e),d=vx(e,f);tx(h,p,ow),tx(d,p,lw);const m=c.intersectsBox(ow),y=c.intersectsBox(lw);_=m&&dw(t,h,i,n,r,a,s,l,o+1,c,!u)||y&&dw(t,d,i,n,r,a,s,l,o+1,c,!u),aw.releasePrimitive(c)}else{const h=yx(t),d=vx(t,y);tx(h,g,cw),tx(d,g,uw);const m=c.intersectsBox(cw),v=c.intersectsBox(uw);if(m&&v)_=dw(e,h,n,i,r,s,a,o,l+1,c,u)||dw(e,d,n,i,r,s,a,o,l+1,c,u);else if(m)if(b)_=dw(e,h,n,i,r,s,a,o,l+1,c,u);else{const t=aw.getPrimitive();t.copy(cw).applyMatrix4(n);const c=yx(e),d=vx(e,f);tx(c,p,ow),tx(d,p,lw);const m=t.intersectsBox(ow),g=t.intersectsBox(lw);_=m&&dw(h,c,i,n,r,a,s,l,o+1,t,!u)||g&&dw(h,d,i,n,r,a,s,l,o+1,t,!u),aw.releasePrimitive(t)}else if(v)if(b)_=dw(e,d,n,i,r,s,a,o,l+1,c,u);else{const t=aw.getPrimitive();t.copy(uw).applyMatrix4(n);const c=yx(e),h=vx(e,f);tx(c,p,ow),tx(h,p,lw);const m=t.intersectsBox(ow),g=t.intersectsBox(lw);_=m&&dw(d,c,i,n,r,a,s,l,o+1,t,!u)||g&&dw(d,h,i,n,r,a,s,l,o+1,t,!u),aw.releasePrimitive(t)}}return _}const pw=new Nx,fw=new Ya,mw={strategy:Gv,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0};class gw{static serialize(e,t={}){t={cloneBuffers:!0,...t};const n=e.geometry,i=e._roots,r=e._indirectBuffer,s=n.getIndex();let a;return a=t.cloneBuffers?{roots:i.map((e=>e.slice())),index:s.array.slice(),indirectBuffer:r?r.slice():null}:{roots:i,index:s.array,indirectBuffer:r},a}static deserialize(e,t,n={}){n={setIndex:!0,indirect:Boolean(e.indirectBuffer),...n};const{index:i,roots:r,indirectBuffer:s}=e,a=new gw(t,{...n,[Kv]:!0});if(a._roots=r,a._indirectBuffer=s||null,n.setIndex){const n=t.getIndex();if(null===n){const n=new _l(e.index,1,!1);t.setIndex(n)}else n.array!==i&&(n.array.set(i),n.needsUpdate=!0)}return a}get indirect(){return!!this._indirectBuffer}constructor(e,t={}){if(!e.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if((t=Object.assign({...mw,[Kv]:!1},t)).useSharedArrayBuffer&&"undefined"==typeof SharedArrayBuffer)throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,t[Kv]||(Cx(this,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Ya)));const{_indirectBuffer:n}=this;this.resolveTriangleIndex=t.indirect?e=>n[e]:e=>e}refit(e=null){return(this.indirect?Db:ob)(this,e)}traverse(e,t=0){const n=this._roots[t],i=new Uint32Array(n),r=new Uint16Array(n);!function t(s,a=0){const o=2*s,l=r[o+15]===Yv;if(l){const t=i[s+6],c=r[o+14];e(a,l,new Float32Array(n,4*s,6),t,c)}else{const r=s+Xv/4,o=i[s+6],c=i[s+7];e(a,l,new Float32Array(n,4*s,6),c)||(t(r,a+1),t(o,a+1))}}(0)}raycast(e,t=Kn){const n=this._roots,i=this.geometry,r=[],s=t.isMaterial,a=Array.isArray(t),o=i.groups,l=s?t.side:t,c=this.indirect?Ob:hb;for(let i=0,s=n.length;i<s;i++){const n=a?t[o[i].materialIndex].side:l,s=r.length;if(c(this,i,n,e,r),a){const e=o[i].materialIndex;for(let t=s,n=r.length;t<n;t++)r[t].face.materialIndex=e}}return r}raycastFirst(e,t=Kn){const n=this._roots,i=this.geometry,r=t.isMaterial,s=Array.isArray(t);let a=null;const o=i.groups,l=r?t.side:t,c=this.indirect?zb:mb;for(let i=0,r=n.length;i<r;i++){const n=c(this,i,s?t[o[i].materialIndex].side:l,e);null!=n&&(null==a||n.distance<a.distance)&&(a=n,s&&(n.face.materialIndex=o[i].materialIndex))}return a}intersectsGeometry(e,t){let n=!1;const i=this._roots,r=this.indirect?Yb:Mb;for(let s=0,a=i.length;s<a&&(n=r(this,s,e,t),!n);s++);return n}shapecast(e){const t=Bx.getPrimitive(),n=this.indirect?kb:ab;let{boundsTraverseOrder:i,intersectsBounds:r,intersectsRange:s,intersectsTriangle:a}=e;if(s&&a){const e=s;s=(i,r,s,o,l)=>!!e(i,r,s,o,l)||n(i,r,this,a,s,o,t)}else s||(s=a?(e,i,r,s)=>n(e,i,this,a,r,s,t):(e,t,n)=>n);let o=!1,l=0;const c=this._roots;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(o=qx(this,e,r,s,i,l),o)break;l+=t.byteLength}return Bx.releasePrimitive(t),o}bvhcast(e,t,n){let{intersectsRanges:i,intersectsTriangles:r}=n;const s=Bx.getPrimitive(),a=this.geometry.index,o=this.geometry.attributes.position,l=this.indirect?e=>{const t=this.resolveTriangleIndex(e);sb(s,3*t,a,o)}:e=>{sb(s,3*e,a,o)},c=Bx.getPrimitive(),u=e.geometry.index,h=e.geometry.attributes.position,d=e.indirect?t=>{const n=e.resolveTriangleIndex(t);sb(c,3*n,u,h)}:e=>{sb(c,3*e,u,h)};if(r){const e=(e,n,i,a,o,u,h,p)=>{for(let f=i,m=i+a;f<m;f++){d(f),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(let t=e,i=e+n;t<i;t++)if(l(t),s.needsUpdate=!0,r(s,c,t,f,o,u,h,p))return!0}return!1};if(i){const t=i;i=function(n,i,r,s,a,o,l,c){return!!t(n,i,r,s,a,o,l,c)||e(n,i,r,s,a,o,l,c)}}else i=e}return function(e,t,n,i){if(hw)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");hw=!0;const r=e._roots,s=t._roots;let a,o=0,l=0;const c=(new _o).copy(n).invert();for(let e=0,t=r.length;e<t;e++){rw.setBuffer(r[e]),l=0;const t=aw.getPrimitive();tx(0,rw.float32Array,t),t.applyMatrix4(c);for(let r=0,u=s.length;r<u&&(sw.setBuffer(s[e]),a=dw(0,0,n,c,i,o,l,0,0,t),sw.clearBuffer(),l+=s[r].length,!a);r++);if(aw.releasePrimitive(t),rw.clearBuffer(),o+=r[e].length,a)break}return hw=!1,a}(this,e,t,i)}intersectsBox(e,t){return pw.set(e.min,e.max,t),pw.needsUpdate=!0,this.shapecast({intersectsBounds:e=>pw.intersectsBox(e),intersectsTriangle:e=>pw.intersectsTriangle(e)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},i={},r=0,s=1/0){return(this.indirect?iw:Pb)(this,e,t,n,i,r,s)}closestPointToPoint(e,t={},n=0,i=1/0){return function(e,t,n={},i=0,r=1/0){const s=i*i,a=r*r;let o=1/0,l=null;if(e.shapecast({boundsTraverseOrder:e=>(jx.copy(t).clamp(e.min,e.max),jx.distanceToSquared(t)),intersectsBounds:(e,t,n)=>n<o&&n<a,intersectsTriangle:(e,n)=>{e.closestPointToPoint(t,jx);const i=t.distanceToSquared(jx);return i<o&&(Xx.copy(jx),o=i,l=n),i<s}}),o===1/0)return null;const c=Math.sqrt(o);return n.point?n.point.copy(Xx):n.point=Xx.clone(),n.distance=c,n.faceIndex=l,n}(this,e,t,n,i)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach((t=>{tx(0,new Float32Array(t),fw),e.union(fw)})),e}}class yw{constructor(e){this.name="WorkerBase",this.running=!1,this.worker=e,this.worker.onerror=e=>{throw e.message?new Error(`${this.name}: Could not create Web Worker with error "${e.message}"`):new Error(`${this.name}: Could not create Web Worker.`)}}runTask(){}generate(...e){if(this.running)throw new Error("GenerateMeshBVHWorker: Already running job.");if(null===this.worker)throw new Error("GenerateMeshBVHWorker: Worker has been disposed.");this.running=!0;const t=this.runTask(this.worker,...e);return t.finally((()=>{this.running=!1})),t}dispose(){this.worker.terminate(),this.worker=null}}class vw extends yw{constructor(){super(new Worker(new URL(n.p+n.u(964),n.b),{type:void 0})),this.name="GenerateMeshBVHWorker"}runTask(e,t,n={}){return new Promise(((i,r)=>{if(t.getAttribute("position").isInterleavedBufferAttribute||t.index&&t.index.isInterleavedBufferAttribute)throw new Error("GenerateMeshBVHWorker: InterleavedBufferAttribute are not supported for the geometry attributes.");e.onerror=e=>{r(new Error(`GenerateMeshBVHWorker: ${e.message}`))},e.onmessage=s=>{const{data:a}=s;if(a.error)r(new Error(a.error)),e.onmessage=null;else if(a.serialized){const{serialized:r,position:s}=a,o=gw.deserialize(r,t,{setIndex:!1}),l=Object.assign({setBoundingBox:!0},n);if(t.attributes.position.array=s,t.index)t.index.array=r.index;else{const e=new _l(r.index,1,!1);t.setIndex(e)}l.setBoundingBox&&(t.boundingBox=o.getBoundingBox(new Ya)),i(o),e.onmessage=null}else n.onProgress&&n.onProgress(a.progress)};const s=t.index?t.index.array:null,a=t.attributes.position.array,o=[a];s&&o.push(s),e.postMessage({index:s,position:a,options:{...n,onProgress:null,includedProgressCallback:Boolean(n.onProgress),groups:[...t.groups]}},o.map((e=>e.buffer)).filter((e=>"undefined"==typeof SharedArrayBuffer||!(e instanceof SharedArrayBuffer))))}))}}var xw,bw,ww=0;const _w=(e,t,n)=>{if(ww)setTimeout((()=>{_w(e)}),500);else{const s=window.performance.now(),a=[];if(e.forEach((e=>{if(e.userData.groupMerged)a.push(e);else if(e.isInstancedMesh){if(e.instanceMatrix){var t=$P?e.instanceMatrix.count:Math.floor(e.instanceMatrix.count/2);for(let c=0;c<t;c++){l=e.geometry.clone();var i=new _o;if(e.getMatrixAt(c,i),n){var r=new Wa,s=new qa,o=new Wa;i.decompose(r,s,o),r.x+=n.x,r.y+=n.y,r.z+=n.z,i.compose(r,s,o)}try{l.applyMatrix4(i)}catch(e){console.log("commune-specific matrix error")}for(const e in l.attributes)"position"!==e&&l.deleteAttribute(e);(l=l.toNonIndexed()).index=null,a.push(l)}}}else{var l;e.updateMatrixWorld(!0),(l=e.geometry.clone()).applyMatrix4(e.matrixWorld);for(const e in l.attributes)"position"!==e&&l.deleteAttribute(e);(l=l.toNonIndexed()).index=null,a.push(l)}})),t&&bw.hasOwnProperty("geometry")&&n){a.forEach((e=>{for(const t in e.attributes)"position"!==t&&e.deleteAttribute(t);e.index=null})),(r=Ov(a,!1)).boundsTree=new gw(r,{lazyGeneration:!0});var i=new rc(r,yP.whiteFull);i.position.x=n.x,i.position.y=n.y,i.position.z=n.z,(r=Ov([i.geometry,bw.geometry],!1)).boundsTree=new gw(r,{lazyGeneration:!0}),bw=new rc(r,yP.whiteFull),(xw=new rc(r,yP.cyanFull)).name="collider",xw.material.wireframe=!1,xw.visible=!1}else{var r=Ov(a,!1);Tk(1),ww=1,(new vw).generate(r).then((e=>{r.boundsTree=e,bw=new rc(r,yP.whiteFull),xw=new rc(r,yP.cyanFull),ww=0,Tk(0);const t=window.performance.now()-s;console.log(`Collider generated in ${t.toFixed(3)}ms`)}))}}},Mw=()=>{if(xw)if(ww)setTimeout(Mw,500);else{const n=[];var e=[];if(Jk.children.forEach((t=>{t.children.forEach((t=>{if(t.material===yP.whiteFull){t.updateMatrixWorld(!0);var n=t.geometry.clone();n.applyMatrix4(t.matrixWorld);for(const e in n.attributes)"position"!==e&&n.deleteAttribute(e);n.index&&(n=n.toNonIndexed()),n.userData.groupMerged=!0,e.push(n)}}))})),e.length>0){const t=Ov(e,!1);t.userData.groupMerged=!0,n.push(t)}n.push(bw.geometry),n.forEach((e=>{for(const t in e.attributes)"position"!==t&&e.deleteAttribute(t);e.index=null}));var t=Ov(n,!1);Tk(1),ww=1,(new vw).generate(t).then((e=>{t.boundsTree=e,(xw=new rc(t,yP.whiteFull)).name="collider",xw.visible=!1,Tk(0),ww=0}))}};function Ew(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sw(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Tw,Aw,Cw,Iw,Lw,Rw,Pw,kw,Dw,Nw,Ow,Uw,Bw={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Fw={duration:.5,overwrite:!1,delay:0},zw=1e8,Gw=1e-8,Hw=2*Math.PI,Vw=Hw/4,qw=0,Ww=Math.sqrt,jw=Math.cos,Xw=Math.sin,Yw=function(e){return"string"==typeof e},Jw=function(e){return"function"==typeof e},Kw=function(e){return"number"==typeof e},Zw=function(e){return void 0===e},Qw=function(e){return"object"==typeof e},$w=function(e){return!1!==e},e_=function(){return"undefined"!=typeof window},t_=function(e){return Jw(e)||Yw(e)},n_="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},i_=Array.isArray,r_=/(?:-?\.?\d|\.)+/gi,s_=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,a_=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,o_=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,l_=/[+-]=-?[.\d]+/,c_=/[^,'"\[\]\s]+/gi,u_=/[\d.+\-=]+(?:e[-+]\d*)*/i,h_={},d_={},p_=function(e){return(d_=B_(e,h_))&&_E},f_=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},m_=function(e,t){return!t&&console.warn(e)},g_=function(e,t){return e&&(h_[e]=t)&&d_&&(d_[e]=t)||h_},y_=function(){return 0},v_={},x_=[],b_={},w_={},__={},M_=30,E_=[],S_="",T_=function(e){var t,n,i=e[0];if(Qw(i)||Jw(i)||(e=[e]),!(t=(i._gsap||{}).harness)){for(n=E_.length;n--&&!E_[n].targetTest(i););t=E_[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new XM(e[n],t)))||e.splice(n,1);return e},A_=function(e){return e._gsap||T_(pM(e))[0]._gsap},C_=function(e,t,n){return(n=e[t])&&Jw(n)?e[t]():Zw(n)&&e.getAttribute&&e.getAttribute(t)||n},I_=function(e,t){return(e=e.split(",")).forEach(t)||e},L_=function(e){return Math.round(1e5*e)/1e5||0},R_=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},P_=function(){var e,t,n=x_.length,i=x_.slice(0);for(b_={},x_.length=0,e=0;e<n;e++)(t=i[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},k_=function(e,t,n,i){x_.length&&P_(),e.render(t,n,i),x_.length&&P_()},D_=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(c_).length<2?t:Yw(e)?e.trim():e},N_=function(e){return e},O_=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},U_=function(e,t){for(var n in t)n in e||"duration"===n||"ease"===n||(e[n]=t[n])},B_=function(e,t){for(var n in t)e[n]=t[n];return e},F_=function e(t,n){for(var i in n)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(t[i]=Qw(n[i])?e(t[i]||(t[i]={}),n[i]):n[i]);return t},z_=function(e,t){var n,i={};for(n in e)n in t||(i[n]=e[n]);return i},G_=function(e){var t=e.parent||Aw,n=e.keyframes?U_:O_;if($w(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},H_=function(e,t,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=t._prev,s=t._next;r?r._next=s:e[n]===t&&(e[n]=s),s?s._prev=r:e[i]===t&&(e[i]=r),t._next=t._prev=t.parent=null},V_=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},q_=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},W_=function e(t){return!t||t._ts&&e(t.parent)},j_=function(e){return e._repeat?X_(e._tTime,e=e.duration()+e._rDelay)*e:0},X_=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Y_=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},J_=function(e){return e._end=L_(e._start+(e._tDur/Math.abs(e._ts||e._rts||Gw)||0))},K_=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=L_(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),J_(e),n._dirty||q_(n,e)),e},Z_=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=Y_(e.rawTime(),t),(!t._dur||cM(0,t.totalDuration(),n)-t._tTime>Gw)&&t.render(n,!0)),q_(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Q_=function(e,t,n,i){return t.parent&&V_(t),t._start=L_((Kw(n)?n:n||e!==Aw?aM(e,n,t):e._time)+t._delay),t._end=L_(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),function(e,t,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var s,a=e[i];if(r)for(s=t[r];a&&a[r]>s;)a=a._prev;a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e}(e,t,"_first","_last",e._sort?"_start":0),nM(t)||(e._recent=t),i||Z_(e,t),e},$_=function(e,t){return(h_.ScrollTrigger||f_("scrollTrigger",t))&&h_.ScrollTrigger.create(t,e)},eM=function(e,t,n,i){return eE(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Pw!==DM.frame?(x_.push(e),e._lazy=[t,i],1):void 0:1},tM=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},nM=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},iM=function(e,t,n,i){var r=e._repeat,s=L_(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=s/e._dur),e._dur=s,e._tDur=r?r<0?1e10:L_(s*(r+1)+e._rDelay*r):s,a&&!i?K_(e,e._tTime=e._tDur*a):e.parent&&J_(e),n||q_(e.parent,e),e},rM=function(e){return e instanceof JM?q_(e):iM(e,e._dur)},sM={_start:0,endTime:y_,totalDuration:y_},aM=function e(t,n,i){var r,s,a,o=t.labels,l=t._recent||sM,c=t.duration()>=zw?l.endTime(!1):t._dur;return Yw(n)&&(isNaN(n)||n in o)?(s=n.charAt(0),a="%"===n.substr(-1),r=n.indexOf("="),"<"===s||">"===s?(r>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(r<0?l:i).totalDuration()/100:1)):r<0?(n in o||(o[n]=c),o[n]):(s=parseFloat(n.charAt(r-1)+n.substr(r+1)),a&&i&&(s=s/100*(i_(i)?i[0]:i).totalDuration()),r>1?e(t,n.substr(0,r-1),i)+s:c+s)):null==n?c:+n},oM=function(e,t,n){var i,r,s=Kw(t[1]),a=(s?2:1)+(e<2?0:1),o=t[a];if(s&&(o.duration=t[1]),o.parent=n,e){for(i=o,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=$w(r.vars.inherit)&&r.parent;o.immediateRender=$w(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new rE(t[0],o,t[a+1])},lM=function(e,t){return e||0===e?t(e):t},cM=function(e,t,n){return n<e?e:n>t?t:n},uM=function(e){if("string"!=typeof e)return"";var t=u_.exec(e);return t?e.substr(t.index+t[0].length):""},hM=[].slice,dM=function(e,t){return e&&Qw(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Qw(e[0]))&&!e.nodeType&&e!==Cw},pM=function(e,t,n){return!Yw(e)||n||!Iw&&NM()?i_(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var i;return Yw(e)&&!t||dM(e,1)?(i=n).push.apply(i,pM(e)):n.push(e)}))||n}(e,n):dM(e)?hM.call(e,0):e?[e]:[]:hM.call((t||Lw).querySelectorAll(e),0)},fM=function(e){return e.sort((function(){return.5-Math.random()}))},mM=function(e){if(Jw(e))return e;var t=Qw(e)?e:{each:e},n=HM(t.ease),i=t.from||0,r=parseFloat(t.base)||0,s={},a=i>0&&i<1,o=isNaN(i)||a,l=t.axis,c=i,u=i;return Yw(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!a&&o&&(c=i[0],u=i[1]),function(e,a,h){var d,p,f,m,g,y,v,x,b,w=(h||t).length,_=s[w];if(!_){if(!(b="auto"===t.grid?0:(t.grid||[1,zw])[1])){for(v=-zw;v<(v=h[b++].getBoundingClientRect().left)&&b<w;);b--}for(_=s[w]=[],d=o?Math.min(b,w)*c-.5:i%b,p=o?w*u/b-.5:i/b|0,v=0,x=zw,y=0;y<w;y++)f=y%b-d,m=p-(y/b|0),_[y]=g=l?Math.abs("y"===l?m:f):Ww(f*f+m*m),g>v&&(v=g),g<x&&(x=g);"random"===i&&fM(_),_.max=v-x,_.min=x,_.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(b>w?w-1:l?"y"===l?w/b:b:Math.max(b,w/b))||0)*("edges"===i?-1:1),_.b=w<0?r-w:r,_.u=uM(t.amount||t.each)||0,n=n&&w<0?zM(n):n}return w=(_[e]-_.min)/_.max||0,L_(_.b+(n?n(w):w)*_.v)+_.u}},gM=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(n){var i=Math.round(parseFloat(n)/e)*e*t;return(i-i%1)/t+(Kw(n)?0:uM(n))}},yM=function(e,t){var n,i,r=i_(e);return!r&&Qw(e)&&(n=r=e.radius||zw,e.values?(e=pM(e.values),(i=!Kw(e[0]))&&(n*=n)):e=gM(e.increment)),lM(t,r?Jw(e)?function(t){return i=e(t),Math.abs(i-t)<=n?i:t}:function(t){for(var r,s,a=parseFloat(i?t.x:t),o=parseFloat(i?t.y:0),l=zw,c=0,u=e.length;u--;)(r=i?(r=e[u].x-a)*r+(s=e[u].y-o)*s:Math.abs(e[u]-a))<l&&(l=r,c=u);return c=!n||l<=n?e[c]:t,i||c===t||Kw(t)?c:c+uM(t)}:gM(e))},vM=function(e,t,n,i){return lM(i_(e)?!t:!0===n?!!(n=0):!i,(function(){return i_(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*i)/i}))},xM=function(e,t,n){return lM(n,(function(n){return e[~~t(n)]}))},bM=function(e){for(var t,n,i,r,s=0,a="";~(t=e.indexOf("random(",s));)i=e.indexOf(")",t),r="["===e.charAt(t+7),n=e.substr(t+7,i-t-7).match(r?c_:r_),a+=e.substr(s,t-s)+vM(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),s=i+1;return a+e.substr(s,e.length-s)},wM=function(e,t,n,i,r){var s=t-e,a=i-n;return lM(r,(function(t){return n+((t-e)/s*a||0)}))},_M=function(e,t,n){var i,r,s,a=e.labels,o=zw;for(i in a)(r=a[i]-t)<0==!!n&&r&&o>(r=Math.abs(r))&&(s=i,o=r);return s},MM=function(e,t,n){var i,r,s=e.vars,a=s[t];if(a)return i=s[t+"Params"],r=s.callbackScope||e,n&&x_.length&&P_(),i?a.apply(r,i):a.call(r)},EM=function(e){return V_(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&MM(e,"onInterrupt"),e},SM=255,TM={aqua:[0,SM,SM],lime:[0,SM,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,SM],navy:[0,0,128],white:[SM,SM,SM],olive:[128,128,0],yellow:[SM,SM,0],orange:[SM,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[SM,0,0],pink:[SM,192,203],cyan:[0,SM,SM],transparent:[SM,SM,SM,0]},AM=function(e,t,n){return(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*SM+.5|0},CM=function(e,t,n){var i,r,s,a,o,l,c,u,h,d,p=e?Kw(e)?[e>>16,e>>8&SM,e&SM]:0:TM.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),TM[e])p=TM[e];else if("#"===e.charAt(0)){if(e.length<6&&(i=e.charAt(1),r=e.charAt(2),s=e.charAt(3),e="#"+i+i+r+r+s+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&SM,p&SM,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&SM,e&SM]}else if("hsl"===e.substr(0,3))if(p=d=e.match(r_),t){if(~e.indexOf("="))return p=e.match(s_),n&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,o=+p[1]/100,i=2*(l=+p[2]/100)-(r=l<=.5?l*(o+1):l+o-l*o),p.length>3&&(p[3]*=1),p[0]=AM(a+1/3,i,r),p[1]=AM(a,i,r),p[2]=AM(a-1/3,i,r);else p=e.match(r_)||TM.transparent;p=p.map(Number)}return t&&!d&&(i=p[0]/SM,r=p[1]/SM,s=p[2]/SM,l=((c=Math.max(i,r,s))+(u=Math.min(i,r,s)))/2,c===u?a=o=0:(h=c-u,o=l>.5?h/(2-c-u):h/(c+u),a=c===i?(r-s)/h+(r<s?6:0):c===r?(s-i)/h+2:(i-r)/h+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},IM=function(e){var t=[],n=[],i=-1;return e.split(RM).forEach((function(e){var r=e.match(a_)||[];t.push.apply(t,r),n.push(i+=r.length+1)})),t.c=n,t},LM=function(e,t,n){var i,r,s,a,o="",l=(e+o).match(RM),c=t?"hsla(":"rgba(",u=0;if(!l)return e;if(l=l.map((function(e){return(e=CM(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(s=IM(e),(i=n.c).join(o)!==s.c.join(o)))for(a=(r=e.replace(RM,"1").split(a_)).length-1;u<a;u++)o+=r[u]+(~i.indexOf(u)?l.shift()||c+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!r)for(a=(r=e.split(RM)).length-1;u<a;u++)o+=r[u]+l[u];return o+r[a]},RM=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in TM)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),PM=/hsl[a]?\(/,kM=function(e){var t,n=e.join(" ");if(RM.lastIndex=0,RM.test(n))return t=PM.test(n),e[1]=LM(e[1],t),e[0]=LM(e[0],t,IM(e[1])),!0},DM=function(){var e,t,n,i,r,s,a=Date.now,o=500,l=33,c=a(),u=c,h=1e3/240,d=h,p=[],f=function n(f){var m,g,y,v,x=a()-u,b=!0===f;if(x>o&&(c+=x-l),((m=(y=(u+=x)-c)-d)>0||b)&&(v=++i.frame,r=y-1e3*i.time,i.time=y/=1e3,d+=m+(m>=h?4:h-m),g=1),b||(e=t(n)),g)for(s=0;s<p.length;s++)p[s](y,r,v,f)};return i={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(e){return r/(1e3/(e||60))},wake:function(){Rw&&(!Iw&&e_()&&(Cw=Iw=window,Lw=Cw.document||{},h_.gsap=_E,(Cw.gsapVersions||(Cw.gsapVersions=[])).push(_E.version),p_(d_||Cw.GreenSockGlobals||!Cw.gsap&&Cw||{}),n=Cw.requestAnimationFrame),e&&i.sleep(),t=n||function(e){return setTimeout(e,d-1e3*i.time+1|0)},Dw=1,f(2))},sleep:function(){(n?Cw.cancelAnimationFrame:clearTimeout)(e),Dw=0,t=y_},lagSmoothing:function(e,t){o=e||1e8,l=Math.min(t,o,0)},fps:function(e){h=1e3/(e||240),d=1e3*i.time+h},add:function(e){p.indexOf(e)<0&&p.push(e),NM()},remove:function(e){var t;~(t=p.indexOf(e))&&p.splice(t,1)&&s>=t&&s--},_listeners:p}}(),NM=function(){return!Dw&&DM.wake()},OM={},UM=/^[\d.\-M][\d.\-,\s]/,BM=/["']/g,FM=function(e){for(var t,n,i,r={},s=e.substr(1,e.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)n=s[o],t=o!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,t),r[a]=isNaN(i)?i.replace(BM,"").trim():+i,a=n.substr(t+1).trim();return r},zM=function(e){return function(t){return 1-e(1-t)}},GM=function e(t,n){for(var i,r=t._first;r;)r instanceof JM?e(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?e(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},HM=function(e,t){return e&&(Jw(e)?e:OM[e]||function(e){var t,n,i,r,s=(e+"").split("("),a=OM[s[0]];return a&&s.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[FM(s[1])]:(t=e,n=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",n),t.substring(n,~r&&r<i?t.indexOf(")",i+1):i)).split(",").map(D_)):OM._CE&&UM.test(e)?OM._CE("",e):a}(e))||t},VM=function(e,t,n,i){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===i&&(i=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var r,s={easeIn:t,easeOut:n,easeInOut:i};return I_(e,(function(e){for(var t in OM[e]=h_[e]=s,OM[r=e.toLowerCase()]=n,s)OM[r+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=OM[e+"."+t]=s[t]})),s},qM=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},WM=function e(t,n,i){var r=n>=1?n:1,s=(i||(t?.3:.45))/(n<1?n:1),a=s/Hw*(Math.asin(1/r)||0),o=function(e){return 1===e?1:r*Math.pow(2,-10*e)*Xw((e-a)*s)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:qM(o);return s=Hw/s,l.config=function(n,i){return e(t,n,i)},l},jM=function e(t,n){void 0===n&&(n=1.70158);var i=function(e){return e?--e*e*((n+1)*e+n)+1:0},r="out"===t?i:"in"===t?function(e){return 1-i(1-e)}:qM(i);return r.config=function(n){return e(t,n)},r};I_("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;VM(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),OM.Linear.easeNone=OM.none=OM.Linear.easeIn,VM("Elastic",WM("in"),WM("out"),WM()),Nw=7.5625,Ow=2.75,VM("Bounce",(function(e){return 1-Uw(1-e)}),Uw=function(e){return e<.36363636363636365?Nw*e*e:e<.7272727272727273?Nw*Math.pow(e-1.5/Ow,2)+.75:e<.9090909090909092?Nw*(e-=2.25/Ow)*e+.9375:Nw*Math.pow(e-2.625/Ow,2)+.984375}),VM("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),VM("Circ",(function(e){return-(Ww(1-e*e)-1)})),VM("Sine",(function(e){return 1===e?1:1-jw(e*Vw)})),VM("Back",jM("in"),jM("out"),jM()),OM.SteppedEase=OM.steps=h_.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,i=e+(t?0:1),r=t?1:0;return function(e){return((i*cM(0,.99999999,e)|0)+r)*n}}},Fw.ease=OM["quad.out"],I_("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return S_+=e+","+e+"Params,"}));var XM=function(e,t){this.id=qw++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:C_,this.set=t?t.getSetter:cE},YM=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,iM(this,+e.duration,1,1),this.data=e.data,Dw||DM.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,iM(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(NM(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(K_(this,e),!n._dp||n.parent||Z_(n,this);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Q_(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===Gw||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),k_(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+j_(this))%this._dur||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+j_(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?X_(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?Y_(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this.totalTime(cM(-this._delay,this._tDur,t),!0))},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(NM(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=Gw)&&Math.abs(this._zTime)!==Gw))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Q_(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+($w(e)?this.totalDuration():this.duration())/Math.abs(this._ts)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Y_(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,rM(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){return arguments.length?(this._rDelay=e,rM(this)):this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(aM(this,e),$w(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,$w(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-Gw))},t.eventCallback=function(e,t,n){var i=this.vars;return arguments.length>1?(t?(i[e]=t,n&&(i[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete i[e],this):i[e]},t.then=function(e){var t=this;return new Promise((function(n){var i=Jw(e)?e:N_,r=function(){var e=t.then;t.then=null,Jw(i)&&(i=i(t))&&(i.then||i===t)&&(t.then=e),n(i),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?r():t._prom=r}))},t.kill=function(){EM(this)},e}();O_(YM.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var JM=function(e){function t(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=$w(t.sortChildren),Aw&&Q_(t.parent||Aw,Ew(i),n),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&$_(Ew(i),t.scrollTrigger),i}Sw(t,e);var n=t.prototype;return n.to=function(e,t,n){return oM(0,arguments,this),this},n.from=function(e,t,n){return oM(1,arguments,this),this},n.fromTo=function(e,t,n,i){return oM(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,G_(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new rE(e,t,aM(this,n),1),this},n.call=function(e,t,n){return Q_(this,rE.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,i,r,s,a){return n.duration=t,n.stagger=n.stagger||i,n.onComplete=s,n.onCompleteParams=a,n.parent=this,new rE(e,n,aM(this,r)),this},n.staggerFrom=function(e,t,n,i,r,s,a){return n.runBackwards=1,G_(n).immediateRender=$w(n.immediateRender),this.staggerTo(e,t,n,i,r,s,a)},n.staggerFromTo=function(e,t,n,i,r,s,a,o){return i.startAt=n,G_(i).immediateRender=$w(i.immediateRender),this.staggerTo(e,t,i,r,s,a,o)},n.render=function(e,t,n){var i,r,s,a,o,l,c,u,h,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,y=this._dur,v=this!==Aw&&e>g-Gw&&e>=0?g:e<Gw?0:e,x=this._zTime<0!=e<0&&(this._initted||!y);if(v!==this._tTime||n||x){if(m!==this._time&&y&&(v+=this._time-m,e+=this._time-m),i=v,h=this._start,l=!(u=this._ts),x&&(y||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,o=y+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,n);if(i=L_(v%o),v===g?(a=this._repeat,i=y):((a=~~(v/o))&&a===v/o&&(i=y,a--),i>y&&(i=y)),d=X_(this._tTime,o),!m&&this._tTime&&d!==a&&(d=a),p&&1&a&&(i=y-i,f=1),a!==d&&!this._lock){var b=p&&1&d,w=b===(p&&1&a);if(a<d&&(b=!b),m=b?0:y,this._lock=1,this.render(m||(f?0:L_(a*o)),t,!y)._lock=0,this._tTime=v,!t&&this.parent&&MM(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(y=this._dur,g=this._tDur,w&&(this._lock=2,m=b?y:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;GM(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(!i._dur&&"isPause"===i.data&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(!i._dur&&"isPause"===i.data&&i._start<t)return i;i=i._prev}}(this,L_(m),L_(i)),c&&(v-=i-(i=c._start))),this._tTime=v,this._time=i,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&i&&!t&&(MM(this,"onStart"),this._tTime!==v))return this;if(i>=m&&e>=0)for(r=this._first;r;){if(s=r._next,(r._act||i>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,t,n),i!==this._time||!this._ts&&!l){c=0,s&&(v+=this._zTime=-1e-8);break}}r=s}else{r=this._last;for(var _=e<0?e:i;r;){if(s=r._prev,(r._act||_<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,n);if(r.render(r._ts>0?(_-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(_-r._start)*r._ts,t,n),i!==this._time||!this._ts&&!l){c=0,s&&(v+=this._zTime=_?-1e-8:Gw);break}}r=s}}if(c&&!t&&(this.pause(),c.render(i>=m?0:-1e-8)._zTime=i>=m?1:-1,this._ts))return this._start=h,J_(this),this.render(e,t,n);this._onUpdate&&!t&&MM(this,"onUpdate",!0),(v===g&&g>=this.totalDuration()||!v&&m)&&(h!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((e||!y)&&(v===g&&this._ts>0||!v&&this._ts<0)&&V_(this,1),t||e<0&&!m||!v&&!m&&g||(MM(this,v===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(Kw(t)||(t=aM(this,t,e)),!(e instanceof YM)){if(i_(e))return e.forEach((function(e){return n.add(e,t)})),this;if(Yw(e))return this.addLabel(e,t);if(!Jw(e))return this;e=rE.delayedCall(0,e)}return this!==e?Q_(this,e,t):this},n.getChildren=function(e,t,n,i){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===i&&(i=-zw);for(var r=[],s=this._first;s;)s._start>=i&&(s instanceof rE?t&&r.push(s):(n&&r.push(s),e&&r.push.apply(r,s.getChildren(!0,t,n)))),s=s._next;return r},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return Yw(e)?this.removeLabel(e):Jw(e)?this.killTweensOf(e):(H_(this,e),e===this._recent&&(this._recent=this._last),q_(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=L_(DM.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=aM(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var i=rE.delayedCall(0,t||y_,n);return i.data="isPause",this._hasPause=1,Q_(this,i,aM(this,e))},n.removePause=function(e){var t=this._first;for(e=aM(this,e);t;)t._start===e&&"isPause"===t.data&&V_(t),t=t._next},n.killTweensOf=function(e,t,n){for(var i=this.getTweensOf(e,n),r=i.length;r--;)KM!==i[r]&&i[r].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,i=[],r=pM(e),s=this._first,a=Kw(t);s;)s instanceof rE?R_(s._targets,r)&&(a?(!KM||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&i.push(s):(n=s.getTweensOf(r,t)).length&&i.push.apply(i,n),s=s._next;return i},n.tweenTo=function(e,t){t=t||{};var n,i=this,r=aM(i,e),s=t,a=s.startAt,o=s.onStart,l=s.onStartParams,c=s.immediateRender,u=rE.to(i,O_({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:t.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale())||Gw,onStart:function(){if(i.pause(),!n){var e=t.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale());u._dur!==e&&iM(u,e,0,1).render(u._time,!0,!0),n=1}o&&o.apply(u,l||[])}},t));return c?u.render(0):u},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,O_({startAt:{time:aM(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),_M(this,aM(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),_M(this,aM(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+Gw)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var i,r=this._first,s=this.labels;r;)r._start>=n&&(r._start+=e,r._end+=e),r=r._next;if(t)for(i in s)s[i]>=n&&(s[i]+=e);return q_(this)},n.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),q_(this)},n.totalDuration=function(e){var t,n,i,r=0,s=this,a=s._last,o=zw;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-e:e));if(s._dirty){for(i=s.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>o&&s._sort&&a._ts&&!s._lock?(s._lock=1,Q_(s,a,n-a._delay,1)._lock=0):o=n,n<0&&a._ts&&(r-=n,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-Infinity),o=0),a._end>r&&a._ts&&(r=a._end),a=t;iM(s,s===Aw&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(e){if(Aw._ts&&(k_(Aw,Y_(e,Aw)),Pw=DM.frame),DM.frame>=M_){M_+=Bw.autoSleep||120;var t=Aw._first;if((!t||!t._ts)&&Bw.autoSleep&&DM._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||DM.sleep()}}},t}(YM);O_(JM.prototype,{_lock:0,_hasPause:0,_forcing:0});var KM,ZM=function(e,t,n,i,r,s,a){var o,l,c,u,h,d,p,f,m=new vE(this._pt,e,t,0,1,dE,null,r),g=0,y=0;for(m.b=n,m.e=i,n+="",(p=~(i+="").indexOf("random("))&&(i=bM(i)),s&&(s(f=[n,i],e,t),n=f[0],i=f[1]),l=n.match(o_)||[];o=o_.exec(i);)u=o[0],h=i.substring(g,o.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),u!==l[y++]&&(d=parseFloat(l[y-1])||0,m._pt={_next:m._pt,p:h||1===y?h:",",s:d,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-d,m:c&&c<4?Math.round:0},g=o_.lastIndex);return m.c=g<i.length?i.substring(g,i.length):"",m.fp=a,(l_.test(i)||p)&&(m.e=0),this._pt=m,m},QM=function(e,t,n,i,r,s,a,o,l){Jw(i)&&(i=i(r||0,e,s));var c,u=e[t],h="get"!==n?n:Jw(u)?l?e[t.indexOf("set")||!Jw(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():u,d=Jw(u)?l?oE:aE:sE;if(Yw(i)&&(~i.indexOf("random(")&&(i=bM(i)),"="===i.charAt(1)&&((c=parseFloat(h)+parseFloat(i.substr(2))*("-"===i.charAt(0)?-1:1)+(uM(h)||0))||0===c)&&(i=c)),h!==i)return isNaN(h*i)||""===i?(!u&&!(t in e)&&f_(t,i),ZM.call(this,e,t,h,i,d,o||Bw.stringFilter,l)):(c=new vE(this._pt,e,t,+h||0,i-(h||0),"boolean"==typeof u?hE:uE,0,d),l&&(c.fp=l),a&&c.modifier(a,this,e),this._pt=c)},$M=function(e,t,n,i,r,s){var a,o,l,c;if(w_[e]&&!1!==(a=new w_[e]).init(r,a.rawVars?t[e]:function(e,t,n,i,r){if(Jw(e)&&(e=tE(e,r,t,n,i)),!Qw(e)||e.style&&e.nodeType||i_(e)||n_(e))return Yw(e)?tE(e,r,t,n,i):e;var s,a={};for(s in e)a[s]=tE(e[s],r,t,n,i);return a}(t[e],i,r,s,n),n,i,s)&&(n._pt=o=new vE(n._pt,r,e,0,1,a.render,a,0,a.priority),n!==kw))for(l=n._ptLookup[n._targets.indexOf(r)],c=a._props.length;c--;)l[a._props[c]]=o;return a},eE=function e(t,n){var i,r,s,a,o,l,c,u,h,d,p,f,m,g=t.vars,y=g.ease,v=g.startAt,x=g.immediateRender,b=g.lazy,w=g.onUpdate,_=g.onUpdateParams,M=g.callbackScope,E=g.runBackwards,S=g.yoyoEase,T=g.keyframes,A=g.autoRevert,C=t._dur,I=t._startAt,L=t._targets,R=t.parent,P=R&&"nested"===R.data?R.parent._targets:L,k="auto"===t._overwrite&&!Tw,D=t.timeline;if(D&&(!T||!y)&&(y="none"),t._ease=HM(y,Fw.ease),t._yEase=S?zM(HM(!0===S?y:S,Fw.ease)):0,S&&t._yoyo&&!t._repeat&&(S=t._yEase,t._yEase=t._ease,t._ease=S),t._from=!D&&!!g.runBackwards,!D){if(f=(u=L[0]?A_(L[0]).harness:0)&&g[u.prop],i=z_(g,v_),I&&I.render(-1,!0).kill(),v)if(V_(t._startAt=rE.set(L,O_({data:"isStart",overwrite:!1,parent:R,immediateRender:!0,lazy:$w(b),startAt:null,delay:0,onUpdate:w,onUpdateParams:_,callbackScope:M,stagger:0},v))),n<0&&!x&&!A&&t._startAt.render(-1,!0),x){if(n>0&&!A&&(t._startAt=0),C&&n<=0)return void(n&&(t._zTime=n))}else!1===A&&(t._startAt=0);else if(E&&C)if(I)!A&&(t._startAt=0);else if(n&&(x=!1),s=O_({overwrite:!1,data:"isFromStart",lazy:x&&$w(b),immediateRender:x,stagger:0,parent:R},i),f&&(s[u.prop]=f),V_(t._startAt=rE.set(L,s)),n<0&&t._startAt.render(-1,!0),x){if(!n)return}else e(t._startAt,Gw);for(t._pt=0,b=C&&$w(b)||b&&!C,r=0;r<L.length;r++){if(c=(o=L[r])._gsap||T_(L)[r]._gsap,t._ptLookup[r]=d={},b_[c.id]&&x_.length&&P_(),p=P===L?r:P.indexOf(o),u&&!1!==(h=new u).init(o,f||i,t,p,P)&&(t._pt=a=new vE(t._pt,o,h.name,0,1,h.render,h,0,h.priority),h._props.forEach((function(e){d[e]=a})),h.priority&&(l=1)),!u||f)for(s in i)w_[s]&&(h=$M(s,i,t,p,o,P))?h.priority&&(l=1):d[s]=a=QM.call(t,o,s,"get",i[s],p,P,0,g.stringFilter);t._op&&t._op[r]&&t.kill(o,t._op[r]),k&&t._pt&&(KM=t,Aw.killTweensOf(o,d,t.globalTime(0)),m=!t.parent,KM=0),t._pt&&b&&(b_[c.id]=1)}l&&yE(t),t._onInit&&t._onInit(t)}t._onUpdate=w,t._initted=(!t._op||t._pt)&&!m},tE=function(e,t,n,i,r){return Jw(e)?e.call(t,n,i,r):Yw(e)&&~e.indexOf("random(")?bM(e):e},nE=S_+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",iE=(nE+",id,stagger,delay,duration,paused,scrollTrigger").split(","),rE=function(e){function t(t,n,i,r){var s;"number"==typeof n&&(i.duration=n,n=i,i=null);var a,o,l,c,u,h,d,p,f=(s=e.call(this,r?n:G_(n))||this).vars,m=f.duration,g=f.delay,y=f.immediateRender,v=f.stagger,x=f.overwrite,b=f.keyframes,w=f.defaults,_=f.scrollTrigger,M=f.yoyoEase,E=n.parent||Aw,S=(i_(t)||n_(t)?Kw(t[0]):"length"in n)?[t]:pM(t);if(s._targets=S.length?T_(S):m_("GSAP target "+t+" not found. https://greensock.com",!Bw.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=x,b||v||t_(m)||t_(g)){if(n=s.vars,(a=s.timeline=new JM({data:"nested",defaults:w||{}})).kill(),a.parent=a._dp=Ew(s),a._start=0,b)O_(a.vars.defaults,{ease:"none"}),v?S.forEach((function(e,t){return b.forEach((function(n,i){return a.to(e,n,i?">":t*v)}))})):b.forEach((function(e){return a.to(S,e,">")}));else{if(c=S.length,d=v?mM(v):y_,Qw(v))for(u in v)~nE.indexOf(u)&&(p||(p={}),p[u]=v[u]);for(o=0;o<c;o++){for(u in l={},n)iE.indexOf(u)<0&&(l[u]=n[u]);l.stagger=0,M&&(l.yoyoEase=M),p&&B_(l,p),h=S[o],l.duration=+tE(m,Ew(s),o,h,S),l.delay=(+tE(g,Ew(s),o,h,S)||0)-s._delay,!v&&1===c&&l.delay&&(s._delay=g=l.delay,s._start+=g,l.delay=0),a.to(h,l,d(o,h,S))}a.duration()?m=g=0:s.timeline=0}m||s.duration(m=a.duration())}else s.timeline=0;return!0!==x||Tw||(KM=Ew(s),Aw.killTweensOf(S),KM=0),Q_(E,Ew(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(y||!m&&!b&&s._start===L_(E._time)&&$w(y)&&W_(Ew(s))&&"nested"!==E.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-g))),_&&$_(Ew(s),_),s}Sw(t,e);var n=t.prototype;return n.render=function(e,t,n){var i,r,s,a,o,l,c,u,h,d=this._time,p=this._tDur,f=this._dur,m=e>p-Gw&&e>=0?p:e<Gw?0:e;if(f){if(m!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=e<0){if(i=m,u=this.timeline,this._repeat){if(a=f+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,n);if(i=L_(m%a),m===p?(s=this._repeat,i=f):((s=~~(m/a))&&s===m/a&&(i=f,s--),i>f&&(i=f)),(l=this._yoyo&&1&s)&&(h=this._yEase,i=f-i),o=X_(this._tTime,a),i===d&&!n&&this._initted)return this;s!==o&&(u&&this._yEase&&GM(u,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(L_(a*s),!0).invalidate()._lock=0))}if(!this._initted){if(eM(this,e<0?e:i,n,t))return this._tTime=0,this;if(f!==this._dur)return this.render(e,t,n)}if(this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(i/f),this._from&&(this.ratio=c=1-c),i&&!d&&!t&&MM(this,"onStart"),i&&!d&&!t&&(MM(this,"onStart"),this._tTime!==m))return this;for(r=this._pt;r;)r.r(c,r.d),r=r._next;u&&u.render(e<0?e:!i&&l?-1e-8:u._dur*c,t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),MM(this,"onUpdate")),this._repeat&&s!==o&&this.vars.onRepeat&&!t&&this.parent&&MM(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&V_(this,1),t||e<0&&!d||!m&&!d||(MM(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,i){var r,s,a,o=e.ratio,l=t<0||!t&&(!e._start&&tM(e)&&(e._initted||!nM(e))||(e._ts<0||e._dp._ts<0)&&!nM(e))?0:1,c=e._rDelay,u=0;if(c&&e._repeat&&(u=cM(0,e._tDur,t),s=X_(u,c),a=X_(e._tTime,c),e._yoyo&&1&s&&(l=1-l),s!==a&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||i||e._zTime===Gw||!t&&e._zTime){if(!e._initted&&eM(e,t,i,n))return;for(a=e._zTime,e._zTime=t||(n?Gw:0),n||(n=t&&!a),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=u,r=e._pt;r;)r.r(l,r.d),r=r._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&MM(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&MM(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&V_(e,1),n||(MM(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?EM(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,KM&&!0!==KM.vars.overwrite)._first||EM(this),this.parent&&n!==this.timeline.totalDuration()&&iM(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,s,a,o,l,c,u=this._targets,h=e?pM(e):u,d=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0}(u,h))return"all"===t&&(this._pt=0),EM(this);for(i=this._op=this._op||[],"all"!==t&&(Yw(t)&&(o={},I_(t,(function(e){return o[e]=1})),t=o),t=function(e,t){var n,i,r,s,a=e[0]?A_(e[0]).harness:0,o=a&&a.aliases;if(!o)return t;for(i in n=B_({},t),o)if(i in n)for(r=(s=o[i].split(",")).length;r--;)n[s[r]]=n[i];return n}(u,t)),c=u.length;c--;)if(~h.indexOf(u[c]))for(o in r=d[c],"all"===t?(i[c]=t,a=r,s={}):(s=i[c]=i[c]||{},a=t),a)(l=r&&r[o])&&("kill"in l.d&&!0!==l.d.kill(o)||H_(this,l,"_pt"),delete r[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&p&&EM(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return oM(1,arguments)},t.delayedCall=function(e,n,i,r){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},t.fromTo=function(e,t,n){return oM(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return Aw.killTweensOf(e,t,n)},t}(YM);O_(rE.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),I_("staggerTo,staggerFrom,staggerFromTo",(function(e){rE[e]=function(){var t=new JM,n=hM.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var sE=function(e,t,n){return e[t]=n},aE=function(e,t,n){return e[t](n)},oE=function(e,t,n,i){return e[t](i.fp,n)},lE=function(e,t,n){return e.setAttribute(t,n)},cE=function(e,t){return Jw(e[t])?aE:Zw(e[t])&&e.setAttribute?lE:sE},uE=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},hE=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},dE=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(1===e&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},pE=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},fE=function(e,t,n,i){for(var r,s=this._pt;s;)r=s._next,s.p===i&&s.modifier(e,t,n),s=r},mE=function(e){for(var t,n,i=this._pt;i;)n=i._next,i.p===e&&!i.op||i.op===e?H_(this,i,"_pt"):i.dep||(t=1),i=n;return!t},gE=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},yE=function(e){for(var t,n,i,r,s=e._pt;s;){for(t=s._next,n=i;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:r)?s._prev._next=s:i=s,(s._next=n)?n._prev=s:r=s,s=t}e._pt=i},vE=function(){function e(e,t,n,i,r,s,a,o,l){this.t=t,this.s=i,this.c=r,this.p=n,this.r=s||uE,this.d=a||this,this.set=o||sE,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=gE,this.m=e,this.mt=n,this.tween=t},e}();I_(S_+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return v_[e]=1})),h_.TweenMax=h_.TweenLite=rE,h_.TimelineLite=h_.TimelineMax=JM,Aw=new JM({sortChildren:!1,defaults:Fw,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Bw.stringFilter=kM;var xE={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return function(e){var t=(e=!e.name&&e.default||e).name,n=Jw(e),i=t&&!n&&e.init?function(){this._props=[]}:e,r={init:y_,render:pE,add:QM,kill:mE,modifier:fE,rawVars:0},s={targetTest:0,get:0,getSetter:cE,aliases:{},register:0};if(NM(),e!==i){if(w_[t])return;O_(i,O_(z_(e,r),s)),B_(i.prototype,B_(r,z_(e,s))),w_[i.prop=t]=i,e.targetTest&&(E_.push(i),v_[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}g_(t,i),e.register&&e.register(_E,i,vE)}(e)}))},timeline:function(e){return new JM(e)},getTweensOf:function(e,t){return Aw.getTweensOf(e,t)},getProperty:function(e,t,n,i){Yw(e)&&(e=pM(e)[0]);var r=A_(e||{}).get,s=n?N_:D_;return"native"===n&&(n=""),e?t?s((w_[t]&&w_[t].get||r)(e,t,n,i)):function(t,n,i){return s((w_[t]&&w_[t].get||r)(e,t,n,i))}:e},quickSetter:function(e,t,n){if((e=pM(e)).length>1){var i=e.map((function(e){return _E.quickSetter(e,t,n)})),r=i.length;return function(e){for(var t=r;t--;)i[t](e)}}e=e[0]||{};var s=w_[t],a=A_(e),o=a.harness&&(a.harness.aliases||{})[t]||t,l=s?function(t){var i=new s;kw._pt=0,i.init(e,n?t+n:t,kw,0,[e]),i.render(1,i),kw._pt&&pE(1,kw)}:a.set(e,o);return s?l:function(t){return l(e,o,n?t+n:t,a,1)}},isTweening:function(e){return Aw.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=HM(e.ease,Fw.ease)),F_(Fw,e||{})},config:function(e){return F_(Bw,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,r=e.defaults,s=e.extendTimeline;(i||"").split(",").forEach((function(e){return e&&!w_[e]&&!h_[e]&&m_(t+" effect requires "+e+" plugin.")})),__[t]=function(e,t,i){return n(pM(e),O_(t||{},r),i)},s&&(JM.prototype[t]=function(e,n,i){return this.add(__[t](e,Qw(n)?n:(i=n)&&{},this),i)})},registerEase:function(e,t){OM[e]=HM(t)},parseEase:function(e,t){return arguments.length?HM(e,t):OM},getById:function(e){return Aw.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,i,r=new JM(e);for(r.smoothChildTiming=$w(e.smoothChildTiming),Aw.remove(r),r._dp=0,r._time=r._tTime=Aw._time,n=Aw._first;n;)i=n._next,!t&&!n._dur&&n instanceof rE&&n.vars.onComplete===n._targets[0]||Q_(r,n,n._start-n._delay),n=i;return Q_(Aw,r,0),r},utils:{wrap:function e(t,n,i){var r=n-t;return i_(t)?xM(t,e(0,t.length),n):lM(i,(function(e){return(r+(e-t)%r)%r+t}))},wrapYoyo:function e(t,n,i){var r=n-t,s=2*r;return i_(t)?xM(t,e(0,t.length-1),n):lM(i,(function(e){return t+((e=(s+(e-t)%s)%s||0)>r?s-e:e)}))},distribute:mM,random:vM,snap:yM,normalize:function(e,t,n){return wM(e,t,0,1,n)},getUnit:uM,clamp:function(e,t,n){return lM(n,(function(n){return cM(e,t,n)}))},splitColor:CM,toArray:pM,selector:function(e){return e=pM(e)[0]||m_("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return pM(t,n.querySelectorAll?n:n===e?m_("Invalid scope")||Lw.createElement("div"):e)}},mapRange:wM,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||uM(n))}},interpolate:function e(t,n,i,r){var s=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!s){var a,o,l,c,u,h=Yw(t),d={};if(!0===i&&(r=1)&&(i=null),h)t={p:t},n={p:n};else if(i_(t)&&!i_(n)){for(l=[],c=t.length,u=c-2,o=1;o<c;o++)l.push(e(t[o-1],t[o]));c--,s=function(e){e*=c;var t=Math.min(u,~~e);return l[t](e-t)},i=n}else r||(t=B_(i_(t)?[]:{},t));if(!l){for(a in n)QM.call(d,t,a,"get",n[a]);s=function(e){return pE(e,d)||(h?t.p:t)}}}return lM(i,s)},shuffle:fM},install:p_,effects:__,ticker:DM,updateRoot:JM.updateRoot,plugins:w_,globalTimeline:Aw,core:{PropTween:vE,globals:g_,Tween:rE,Timeline:JM,Animation:YM,getCache:A_,_removeLinkedListItem:H_,suppressOverwrites:function(e){return Tw=e}}};I_("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return xE[e]=rE[e]})),DM.add(JM.updateRoot),kw=xE.to({},{duration:0});var bE=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},wE=function(e,t){return{name:e,rawVars:1,init:function(e,n,i){i._onInit=function(e){var i,r;if(Yw(n)&&(i={},I_(n,(function(e){return i[e]=1})),n=i),t){for(r in i={},n)i[r]=t(n[r]);n=i}!function(e,t){var n,i,r,s=e._targets;for(n in t)for(i=s.length;i--;)(r=e._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=bE(r,n)),r&&r.modifier&&r.modifier(t[n],e,s[i],n))}(e,n)}}}},_E=xE.registerPlugin({name:"attr",init:function(e,t,n,i,r){var s,a;for(s in t)(a=this.add(e,"setAttribute",(e.getAttribute(s)||0)+"",t[s],i,r,0,0,s))&&(a.op=s),this._props.push(s)}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},wE("roundProps",gM),wE("modifiers"),wE("snap",yM))||xE;rE.version=JM.version=_E.version="3.7.0",Rw=1,e_()&&NM(),OM.Power0,OM.Power1,OM.Power2,OM.Power3,OM.Power4,OM.Linear,OM.Quad,OM.Cubic,OM.Quart,OM.Quint,OM.Strong,OM.Elastic,OM.Back,OM.SteppedEase,OM.Bounce,OM.Sine,OM.Expo,OM.Circ;var ME,EE,SE,TE,AE,CE,IE,LE={},RE=180/Math.PI,PE=Math.PI/180,kE=Math.atan2,DE=/([A-Z])/g,NE=/(?:left|right|width|margin|padding|x)/i,OE=/[\s,\(]\S/,UE={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},BE=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},FE=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},zE=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},GE=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},HE=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},VE=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},qE=function(e,t,n){return e.style[t]=n},WE=function(e,t,n){return e.style.setProperty(t,n)},jE=function(e,t,n){return e._gsap[t]=n},XE=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},YE=function(e,t,n,i,r){var s=e._gsap;s.scaleX=s.scaleY=n,s.renderTransform(r,s)},JE=function(e,t,n,i,r){var s=e._gsap;s[t]=n,s.renderTransform(r,s)},KE="transform",ZE=KE+"Origin",QE=function(e,t){var n=EE.createElementNS?EE.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):EE.createElement(e);return n.style?n:EE.createElement(e)},$E=function e(t,n,i){var r=getComputedStyle(t);return r[n]||r.getPropertyValue(n.replace(DE,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&e(t,tS(n)||n,1)||""},eS="O,Moz,ms,Ms,Webkit".split(","),tS=function(e,t,n){var i=(t||AE).style,r=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!(eS[r]+e in i););return r<0?null:(3===r?"ms":r>=0?eS[r]:"")+e},nS=function(){"undefined"!=typeof window&&window.document&&(ME=window,EE=ME.document,SE=EE.documentElement,AE=QE("div")||{style:{}},QE("div"),KE=tS(KE),ZE=KE+"Origin",AE.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",IE=!!tS("perspective"),TE=1)},iS=function e(t){var n,i=QE("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,s=this.nextSibling,a=this.style.cssText;if(SE.appendChild(i),i.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(n=this._gsapBBox());return r&&(s?r.insertBefore(this,s):r.appendChild(this)),SE.removeChild(i),this.style.cssText=a,n},rS=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},sS=function(e){var t;try{t=e.getBBox()}catch(n){t=iS.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===iS||(t=iS.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+rS(e,["x","cx","x1"])||0,y:+rS(e,["y","cy","y1"])||0,width:0,height:0}},aS=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!sS(e))},oS=function(e,t){if(t){var n=e.style;t in LE&&t!==ZE&&(t=KE),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(DE,"-$1").toLowerCase())):n.removeAttribute(t)}},lS=function(e,t,n,i,r,s){var a=new vE(e._pt,t,n,0,1,s?VE:HE);return e._pt=a,a.b=i,a.e=r,e._props.push(n),a},cS={deg:1,rad:1,turn:1},uS=function e(t,n,i,r){var s,a,o,l,c=parseFloat(i)||0,u=(i+"").trim().substr((c+"").length)||"px",h=AE.style,d=NE.test(n),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===r,y="%"===r;return r===u||!c||cS[r]||cS[u]?c:("px"!==u&&!g&&(c=e(t,n,i,"px")),l=t.getCTM&&aS(t),!y&&"%"!==u||!LE[n]&&!~n.indexOf("adius")?(h[d?"width":"height"]=m+(g?u:r),a=~n.indexOf("adius")||"em"===r&&t.appendChild&&!p?t:t.parentNode,l&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==EE&&a.appendChild||(a=EE.body),(o=a._gsap)&&y&&o.width&&d&&o.time===DM.time?L_(c/o.width*m):((y||"%"===u)&&(h.position=$E(t,"position")),a===t&&(h.position="static"),a.appendChild(AE),s=AE[f],a.removeChild(AE),h.position="absolute",d&&y&&((o=A_(a)).time=DM.time,o.width=a[f]),L_(g?s*c/m:s&&c?m/s*c:0))):(s=l?t.getBBox()[d?"width":"height"]:t[f],L_(y?c/s*m:c/100*s)))},hS=function(e,t,n,i){var r;return TE||nS(),t in UE&&"transform"!==t&&~(t=UE[t]).indexOf(",")&&(t=t.split(",")[0]),LE[t]&&"transform"!==t?(r=MS(e,i),r="transformOrigin"!==t?r[t]:r.svg?r.origin:ES($E(e,ZE))+" "+r.zOrigin+"px"):(!(r=e.style[t])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=gS[t]&&gS[t](e,t,n)||$E(e,t)||C_(e,t)||("opacity"===t?1:0)),n&&!~(r+"").trim().indexOf(" ")?uS(e,t,r,n)+n:r},dS=function(e,t,n,i){if(!n||"none"===n){var r=tS(t,e,1),s=r&&$E(e,r,1);s&&s!==n?(t=r,n=s):"borderColor"===t&&(n=$E(e,"borderTopColor"))}var a,o,l,c,u,h,d,p,f,m,g,y,v=new vE(this._pt,e.style,t,0,1,dE),x=0,b=0;if(v.b=n,v.e=i,n+="","auto"==(i+="")&&(e.style[t]=i,i=$E(e,t)||i,e.style[t]=n),kM(a=[n,i]),i=a[1],l=(n=a[0]).match(a_)||[],(i.match(a_)||[]).length){for(;o=a_.exec(i);)d=o[0],f=i.substring(x,o.index),u?u=(u+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(u=1),d!==(h=l[b++]||"")&&(c=parseFloat(h)||0,g=h.substr((c+"").length),(y="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),p=parseFloat(d),m=d.substr((p+"").length),x=a_.lastIndex-m.length,m||(m=m||Bw.units[t]||g,x===i.length&&(i+=m,v.e+=m)),g!==m&&(c=uS(e,t,h,m)||0),v._pt={_next:v._pt,p:f||1===b?f:",",s:c,c:y?y*p:p-c,m:u&&u<4||"zIndex"===t?Math.round:0});v.c=x<i.length?i.substring(x,i.length):""}else v.r="display"===t&&"none"===i?VE:HE;return l_.test(i)&&(v.e=0),this._pt=v,v},pS={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},fS=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(e=n,n=i,i=e),t[0]=pS[n]||n,t[1]=pS[i]||i,t.join(" ")},mS=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,i,r,s=t.t,a=s.style,o=t.u,l=s._gsap;if("all"===o||!0===o)a.cssText="",i=1;else for(r=(o=o.split(",")).length;--r>-1;)n=o[r],LE[n]&&(i=1,n="transformOrigin"===n?ZE:KE),oS(s,n);i&&(oS(s,KE),l&&(l.svg&&s.removeAttribute("transform"),MS(s,1),l.uncache=1))}},gS={clearProps:function(e,t,n,i,r){if("isFromStart"!==r.data){var s=e._pt=new vE(e._pt,t,n,0,0,mS);return s.u=i,s.pr=-10,s.tween=r,e._props.push(n),1}}},yS=[1,0,0,1,0,0],vS={},xS=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},bS=function(e){var t=$E(e,KE);return xS(t)?yS:t.substr(7).match(s_).map(L_)},wS=function(e,t){var n,i,r,s,a=e._gsap||A_(e),o=e.style,l=bS(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=e.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?yS:l:(l!==yS||e.offsetParent||e===SE||a.svg||(r=o.display,o.display="block",(n=e.parentNode)&&e.offsetParent||(s=1,i=e.nextSibling,SE.appendChild(e)),l=bS(e),r?o.display=r:oS(e,"display"),s&&(i?n.insertBefore(e,i):n?n.appendChild(e):SE.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},_S=function(e,t,n,i,r,s){var a,o,l,c=e._gsap,u=r||wS(e,!0),h=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,m=u[0],g=u[1],y=u[2],v=u[3],x=u[4],b=u[5],w=t.split(" "),_=parseFloat(w[0])||0,M=parseFloat(w[1])||0;n?u!==yS&&(o=m*v-g*y)&&(l=_*(-g/o)+M*(m/o)-(m*b-g*x)/o,_=_*(v/o)+M*(-y/o)+(y*b-v*x)/o,M=l):(_=(a=sS(e)).x+(~w[0].indexOf("%")?_/100*a.width:_),M=a.y+(~(w[1]||w[0]).indexOf("%")?M/100*a.height:M)),i||!1!==i&&c.smooth?(x=_-h,b=M-d,c.xOffset=p+(x*m+b*y)-x,c.yOffset=f+(x*g+b*v)-b):c.xOffset=c.yOffset=0,c.xOrigin=_,c.yOrigin=M,c.smooth=!!i,c.origin=t,c.originIsAbsolute=!!n,e.style[ZE]="0px 0px",s&&(lS(s,c,"xOrigin",h,_),lS(s,c,"yOrigin",d,M),lS(s,c,"xOffset",p,c.xOffset),lS(s,c,"yOffset",f,c.yOffset)),e.setAttribute("data-svg-origin",_+" "+M)},MS=function(e,t){var n=e._gsap||new XM(e);if("x"in n&&!t&&!n.uncache)return n;var i,r,s,a,o,l,c,u,h,d,p,f,m,g,y,v,x,b,w,_,M,E,S,T,A,C,I,L,R,P,k,D,N=e.style,O=n.scaleX<0,U="px",B="deg",F=$E(e,ZE)||"0";return i=r=s=l=c=u=h=d=p=0,a=o=1,n.svg=!(!e.getCTM||!aS(e)),g=wS(e,n.svg),n.svg&&(T=(!n.uncache||"0px 0px"===F)&&!t&&e.getAttribute("data-svg-origin"),_S(e,T||F,!!T||n.originIsAbsolute,!1!==n.smooth,g)),f=n.xOrigin||0,m=n.yOrigin||0,g!==yS&&(b=g[0],w=g[1],_=g[2],M=g[3],i=E=g[4],r=S=g[5],6===g.length?(a=Math.sqrt(b*b+w*w),o=Math.sqrt(M*M+_*_),l=b||w?kE(w,b)*RE:0,(h=_||M?kE(_,M)*RE+l:0)&&(o*=Math.abs(Math.cos(h*PE))),n.svg&&(i-=f-(f*b+m*_),r-=m-(f*w+m*M))):(D=g[6],P=g[7],I=g[8],L=g[9],R=g[10],k=g[11],i=g[12],r=g[13],s=g[14],c=(y=kE(D,R))*RE,y&&(T=E*(v=Math.cos(-y))+I*(x=Math.sin(-y)),A=S*v+L*x,C=D*v+R*x,I=E*-x+I*v,L=S*-x+L*v,R=D*-x+R*v,k=P*-x+k*v,E=T,S=A,D=C),u=(y=kE(-_,R))*RE,y&&(v=Math.cos(-y),k=M*(x=Math.sin(-y))+k*v,b=T=b*v-I*x,w=A=w*v-L*x,_=C=_*v-R*x),l=(y=kE(w,b))*RE,y&&(T=b*(v=Math.cos(y))+w*(x=Math.sin(y)),A=E*v+S*x,w=w*v-b*x,S=S*v-E*x,b=T,E=A),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,u=180-u),a=L_(Math.sqrt(b*b+w*w+_*_)),o=L_(Math.sqrt(S*S+D*D)),y=kE(E,S),h=Math.abs(y)>2e-4?y*RE:0,p=k?1/(k<0?-k:k):0),n.svg&&(T=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!xS($E(e,KE)),T&&e.setAttribute("transform",T))),Math.abs(h)>90&&Math.abs(h)<270&&(O?(a*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,h+=h<=0?180:-180)),n.x=i-((n.xPercent=i&&(n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-i)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+U,n.y=r-((n.yPercent=r&&(n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-r)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+U,n.z=s+U,n.scaleX=L_(a),n.scaleY=L_(o),n.rotation=L_(l)+B,n.rotationX=L_(c)+B,n.rotationY=L_(u)+B,n.skewX=h+B,n.skewY=d+B,n.transformPerspective=p+U,(n.zOrigin=parseFloat(F.split(" ")[2])||0)&&(N[ZE]=ES(F)),n.xOffset=n.yOffset=0,n.force3D=Bw.force3D,n.renderTransform=n.svg?RS:IE?LS:TS,n.uncache=0,n},ES=function(e){return(e=e.split(" "))[0]+" "+e[1]},SS=function(e,t,n){var i=uM(t);return L_(parseFloat(t)+parseFloat(uS(e,"x",n+"px",i)))+i},TS=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,LS(e,t)},AS="0deg",CS="0px",IS=") ",LS=function(e,t){var n=t||this,i=n.xPercent,r=n.yPercent,s=n.x,a=n.y,o=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,h=n.skewX,d=n.skewY,p=n.scaleX,f=n.scaleY,m=n.transformPerspective,g=n.force3D,y=n.target,v=n.zOrigin,x="",b="auto"===g&&e&&1!==e||!0===g;if(v&&(u!==AS||c!==AS)){var w,_=parseFloat(c)*PE,M=Math.sin(_),E=Math.cos(_);_=parseFloat(u)*PE,w=Math.cos(_),s=SS(y,s,M*w*-v),a=SS(y,a,-Math.sin(_)*-v),o=SS(y,o,E*w*-v+v)}m!==CS&&(x+="perspective("+m+IS),(i||r)&&(x+="translate("+i+"%, "+r+"%) "),(b||s!==CS||a!==CS||o!==CS)&&(x+=o!==CS||b?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+IS),l!==AS&&(x+="rotate("+l+IS),c!==AS&&(x+="rotateY("+c+IS),u!==AS&&(x+="rotateX("+u+IS),h===AS&&d===AS||(x+="skew("+h+", "+d+IS),1===p&&1===f||(x+="scale("+p+", "+f+IS),y.style[KE]=x||"translate(0, 0)"},RS=function(e,t){var n,i,r,s,a,o=t||this,l=o.xPercent,c=o.yPercent,u=o.x,h=o.y,d=o.rotation,p=o.skewX,f=o.skewY,m=o.scaleX,g=o.scaleY,y=o.target,v=o.xOrigin,x=o.yOrigin,b=o.xOffset,w=o.yOffset,_=o.forceCSS,M=parseFloat(u),E=parseFloat(h);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=PE,p*=PE,n=Math.cos(d)*m,i=Math.sin(d)*m,r=Math.sin(d-p)*-g,s=Math.cos(d-p)*g,p&&(f*=PE,a=Math.tan(p-f),r*=a=Math.sqrt(1+a*a),s*=a,f&&(a=Math.tan(f),n*=a=Math.sqrt(1+a*a),i*=a)),n=L_(n),i=L_(i),r=L_(r),s=L_(s)):(n=m,s=g,i=r=0),(M&&!~(u+"").indexOf("px")||E&&!~(h+"").indexOf("px"))&&(M=uS(y,"x",u,"px"),E=uS(y,"y",h,"px")),(v||x||b||w)&&(M=L_(M+v-(v*n+x*r)+b),E=L_(E+x-(v*i+x*s)+w)),(l||c)&&(a=y.getBBox(),M=L_(M+l/100*a.width),E=L_(E+c/100*a.height)),a="matrix("+n+","+i+","+r+","+s+","+M+","+E+")",y.setAttribute("transform",a),_&&(y.style[KE]=a)},PS=function(e,t,n,i,r,s){var a,o,l=360,c=Yw(r),u=parseFloat(r)*(c&&~r.indexOf("rad")?RE:1),h=s?u*s:u-i,d=i+h+"deg";return c&&("short"===(a=r.split("_")[1])&&(h%=l)!=h%180&&(h+=h<0?l:-360),"cw"===a&&h<0?h=(h+36e9)%l-~~(h/l)*l:"ccw"===a&&h>0&&(h=(h-36e9)%l-~~(h/l)*l)),e._pt=o=new vE(e._pt,t,n,i,h,FE),o.e=d,o.u="deg",e._props.push(n),o},kS=function(e,t){for(var n in t)e[n]=t[n];return e},DS=function(e,t,n){var i,r,s,a,o,l,c,u=kS({},n._gsap),h=n.style;for(r in u.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),h[KE]=t,i=MS(n,1),oS(n,KE),n.setAttribute("transform",s)):(s=getComputedStyle(n)[KE],h[KE]=t,i=MS(n,1),h[KE]=s),LE)(s=u[r])!==(a=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(o=uM(s)!==(c=uM(a))?uS(n,r,s,c):parseFloat(s),l=parseFloat(a),e._pt=new vE(e._pt,i,r,o,l-o,BE),e._pt.u=c||0,e._props.push(r));kS(i,u)};I_("padding,margin,Width,Radius",(function(e,t){var n="Top",i="Right",r="Bottom",s="Left",a=(t<3?[n,i,r,s]:[n+s,n+i,r+i,r+s]).map((function(n){return t<2?e+n:"border"+n+e}));gS[t>1?"border"+e:e]=function(e,t,n,i,r){var s,o;if(arguments.length<4)return s=a.map((function(t){return hS(e,t,n)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(i+"").split(" "),o={},a.forEach((function(e,t){return o[e]=s[t]=s[t]||s[(t-1)/2|0]})),e.init(t,o,r)}}));var NS,OS,US={name:"css",register:nS,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,r){var s,a,o,l,c,u,h,d,p,f,m,g,y,v,x,b=this._props,w=e.style,_=n.vars.startAt;for(h in TE||nS(),t)if("autoRound"!==h&&(a=t[h],!w_[h]||!$M(h,t,n,i,e,r)))if(c=typeof a,u=gS[h],"function"===c&&(c=typeof(a=a.call(n,i,e,r))),"string"===c&&~a.indexOf("random(")&&(a=bM(a)),u)u(this,e,h,a,n)&&(x=1);else if("--"===h.substr(0,2))s=(getComputedStyle(e).getPropertyValue(h)+"").trim(),a+="",RM.lastIndex=0,RM.test(s)||(d=uM(s),p=uM(a)),p?d!==p&&(s=uS(e,h,s,p)+p):d&&(a+=d),this.add(w,"setProperty",s,a,i,r,0,0,h),b.push(h);else if("undefined"!==c){if(_&&h in _?(s="function"==typeof _[h]?_[h].call(n,i,e,r):_[h],h in Bw.units&&!uM(s)&&(s+=Bw.units[h]),"="===(s+"").charAt(1)&&(s=hS(e,h))):s=hS(e,h),l=parseFloat(s),(f="string"===c&&"="===a.charAt(1)?+(a.charAt(0)+"1"):0)&&(a=a.substr(2)),o=parseFloat(a),h in UE&&("autoAlpha"===h&&(1===l&&"hidden"===hS(e,"visibility")&&o&&(l=0),lS(this,w,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==h&&"transform"!==h&&~(h=UE[h]).indexOf(",")&&(h=h.split(",")[0])),m=h in LE)if(g||((y=e._gsap).renderTransform&&!t.parseTransform||MS(e,t.parseTransform),v=!1!==t.smoothOrigin&&y.smooth,(g=this._pt=new vE(this._pt,w,KE,0,1,y.renderTransform,y,0,-1)).dep=1),"scale"===h)this._pt=new vE(this._pt,y,"scaleY",y.scaleY,(f?f*o:o-y.scaleY)||0),b.push("scaleY",h),h+="X";else{if("transformOrigin"===h){a=fS(a),y.svg?_S(e,a,0,v,0,this):((p=parseFloat(a.split(" ")[2])||0)!==y.zOrigin&&lS(this,y,"zOrigin",y.zOrigin,p),lS(this,w,h,ES(s),ES(a)));continue}if("svgOrigin"===h){_S(e,a,1,v,0,this);continue}if(h in vS){PS(this,y,h,l,a,f);continue}if("smoothOrigin"===h){lS(this,y,"smooth",y.smooth,a);continue}if("force3D"===h){y[h]=a;continue}if("transform"===h){DS(this,a,e);continue}}else h in w||(h=tS(h)||h);if(m||(o||0===o)&&(l||0===l)&&!OE.test(a)&&h in w)o||(o=0),(d=(s+"").substr((l+"").length))!==(p=uM(a)||(h in Bw.units?Bw.units[h]:d))&&(l=uS(e,h,s,p)),this._pt=new vE(this._pt,m?y:w,h,l,f?f*o:o-l,m||"px"!==p&&"zIndex"!==h||!1===t.autoRound?BE:GE),this._pt.u=p||0,d!==p&&(this._pt.b=s,this._pt.r=zE);else if(h in w)dS.call(this,e,h,s,a);else{if(!(h in e)){f_(h,a);continue}this.add(e,h,s||e[h],a,i,r)}b.push(h)}x&&yE(this)},get:hS,aliases:UE,getSetter:function(e,t,n){var i=UE[t];return i&&i.indexOf(",")<0&&(t=i),t in LE&&t!==ZE&&(e._gsap.x||hS(e,"x"))?n&&CE===n?"scale"===t?XE:jE:(CE=n||{})&&("scale"===t?YE:JE):e.style&&!Zw(e.style[t])?qE:~t.indexOf("-")?WE:cE(e,t)},core:{_removeProperty:oS,_getMatrix:wS}};_E.utils.checkPrefix=tS,OS=I_("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(NS="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){LE[e]=1})),I_(NS,(function(e){Bw.units[e]="deg",vS[e]=1})),UE[OS[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+NS,I_("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");UE[t[1]]=OS[t[0]]})),I_("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){Bw.units[e]="px"})),_E.registerPlugin(US);var BS=_E.registerPlugin(US)||_E;BS.core.Tween;const FS=document.getElementById("itemMetaData"),zS=document.getElementById("assetLoader");function GS(e,t){return e?e.length>t?e.substring(0,t)+"":e:""}zS.addEventListener("click",(()=>{zS.innerHTML="",zS.style.display="none"}));const HS=document.getElementById("itemMetaNote"),VS=document.getElementById("artwork-detailedMetaData"),qS=document.getElementById("artwork-title"),WS=document.getElementById("artwork-artist"),jS=document.getElementById("artwork-description"),XS=document.getElementById("artwork-mime-type"),YS=document.getElementById("artwork-openExternal"),JS='<svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 96 960 960" width="20"><path fill="white" d="M180 936q-24 0-42-18t-18-42V276q0-24 18-42t42-18h279v60H180v600h600V597h60v279q0 24-18 42t-42 18H180Zm202-219-42-43 398-398H519v-60h321v321h-60V319L382 717Z"/></svg>',KS=()=>{const e=document.createElement("div");return e.className="focusToolButton",e.innerHTML='Load asset &nbsp;&nbsp; <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path fill="white" d="M184.615-200Q157-200 138.5-218.5 120-237 120-264.615v-430.77Q120-723 138.5-741.5 157-760 184.615-760h164.616v40H184.615q-9.23 0-16.923 7.692Q160-704.615 160-695.385v430.77q0 9.23 7.692 16.923Q175.385-240 184.615-240h590.77q9.23 0 16.923-7.692Q800-255.385 800-264.615v-430.77q0-9.23-7.692-16.923Q784.615-720 775.385-720H610.769v-40h164.616Q803-760 821.5-741.5 840-723 840-695.385v430.77Q840-237 821.5-218.5 803-200 775.385-200h-590.77ZM480-364 307.692-536.308 336-564.616l124 124V-760h40v319.384l124-124 28.308 28.308L480-364Z"/></svg>',e};const ZS=document.getElementById("personalNotes"),QS=(e,t)=>{ZS.style.display="flex",ZS.innerHTML="";const n=document.createElement("div"),i=document.createElement("div");i.style="color:white;font-family:sans-serif;font-weight:bolder;font-size:12px;padding: 2px;",i.innerText="Notes";const r=document.createElement("textarea");r.className="focusTextNote",r.value=e.hasOwnProperty("note")?e.note:"",r.addEventListener("focusin",(()=>Lk(1))),r.addEventListener("focusout",(()=>Lk(0))),r.addEventListener("change",(()=>{e.note=r.value,t.parent.userData.note=r.value})),n.append(i,r),ZS.append(n)},$S=document.getElementById("cont"),eT=new ma;let tT;const nT=new Xg;let iT=!1,rT=0;nT.params={Mesh:{},Line:{threshold:.1},LOD:{},Points:{threshold:.1},Sprite:{}};const sT=e=>iT=e;var aT=0;let oT=!1;const lT=new ac(20,20,.1),cT=document.getElementById("roomLegendG"),uT=document.getElementById("roomLegendR"),hT=document.getElementById("info"),dT=document.getElementById("mobile-control"),pT=()=>{sT(0),aT||((aT=new rc(lT,yP.blackOpacityFocus)).position.z=-2.7,aT.position.y=20.5,yP.blackOpacityFocus.opacity=0,Kk.add(aT)),oT?(BS.to(yP.blackOpacityFocus,{duration:.3,opacity:0}),BS.to(aT.position,{duration:.4,y:20.5}),BS.to(yP.torcheMaterial,{duration:.3,opacity:.8}),oT=0,setTimeout((()=>{aT=0,Kk.clear(),cT.style.display="block",uT.style.display="block",hT.style.display="block",hk&&(dT.style.display="block"),sT(1)}),550),setTimeout((()=>{Jk.attach(gT),BS.to(gT.position,{duration:.5,x:mT.position.x,y:mT.position.y,z:mT.position.z,ease:"power1.in"}),BS.to(gT.rotation,{duration:.5,x:mT.rotation.x,y:mT.rotation.y,z:mT.rotation.z,ease:"power1.in"}),BS.to(gT.scale,{duration:.5,x:mT.scale.x,y:mT.scale.y,z:mT.scale.z,ease:"power1.in"}),mT=0}),280)):(BS.to(aT.position,{duration:.5,delay:.55,y:.5}),BS.to(yP.blackOpacityFocus,{duration:.5,delay:.55,opacity:.8}),BS.to(yP.torcheMaterial,{duration:.5,delay:.55,opacity:0}),cT.style.display="none",uT.style.display="none",hT.style.display="none",Mk&&_k(),hk&&(dT.style.display="none"),oT=1)},fT=()=>{if(iT){nT.setFromCamera(eT,aD,0,12);const e=nT.intersectObjects(Jk.children);if(e)if(e.length>1){if(tT=e[0],tT.object.hasOwnProperty("userData")&&tT.distance<12)if(tT.object.userData.isWorldItem)RL.hasOwnProperty(tT.object.userData.objktID)&&!oT&&(e=>{if(FS.style.display="block",!oT)if(Ek){FS.style.top="50%";for(const e in RL)RL[e].focused=!1;e.focused=!0,FS.innerHTML=e.tooltipMetadata,FS.innerHTML+="<span style='font-size:8px;font-family:monospace;min-width:90px;'>Click to focus | Push V to hide metadata</span>",e.hasOwnProperty("note")&&e.note&&e.note.length&&(HS.style.display="block",HS.innerText=e.note)}else FS.style.width="auto",FS.style.top="90%",HS.style.display="none",FS.innerHTML="<span style='font-size:10px;font-family:monospace;min-width:90px;'>Push V to toggle metadata</span>"})(RL[tT.object.userData.objktID]);else if(tT.object.userData.isBlockPanel){let e=tT.object.parent;rT&&(rT.material===yP.redFull||rT.material===yP.cyanFull&&rT.parent!=e)&&(rT.material=yP.whiteFull,rT.scale.x-=.04,rT.scale.y-=.14,e.children.forEach((e=>{e.isMesh&&e.material===yP.whiteFull&&(e.material=yP.redFull,e.scale.x+=.04,e.scale.y+=.14,rT=e)}))),rT||e.children.forEach((e=>{(e.isMesh&&e.material===yP.whiteFull||e.material===yP.cyanFull)&&(e.material=yP.redFull,e.scale.x+=.04,e.scale.y+=.14,rT=e)}))}}else document.getElementById("itemMetaData").style.display="none",document.getElementById("itemMetaNote").style.display="none",tT=null,rT&&rT.material===yP.redFull&&(rT.material=yP.whiteFull,rT.scale.x-=.04,rT.scale.y-=.1,rT=null)}};$S.addEventListener("wheel",(e=>{if(tT){const n=tT.object.parent;if(n.userData.hasOwnProperty("isBlockDisplay")){var t=e.deltaY/700;BS.to(n.parent.position,{duration:.4,y:n.parent.position.y+t})}}})),$S.addEventListener("touchstart",(()=>fT()));var mT=0,gT=0,yT=2e3;$S.addEventListener("click",(()=>{var e=!1;const t=performance.now();if(t-yT>700)if(yT=t,mT)oD.lock(),VS.style.display="none",ZS.innerHTML="",ZS.style.display="none",pT();else if(tT&&iT)if(tT.object.parent.userData.hasOwnProperty("isBlockDisplay")){const e=tT.object.parent;if(!e.userData.focused)if(BS.to(e.position,{duration:2,z:e.position.z+.3}),e.userData.focused=!0,e.userData.item.hasOwnProperty("token")){var n=e.userData.item.token;if("ETH"===n.type){const e=n.display_uri;n.fa={contract:"BA"};const t={id:n.tokenId,objkt:{asset_contract:{address:n.txnHash},token_id:n.tokenId}};RL[t.id]=n,KR(e,t,"ethereum")}else{const e="https://assets.objkt.media/file/assets-003/"+n.display_uri.replace("ipfs://","")+"/display";n.fa={contract:n.fa2_address};const t={id:n.fa2_address+n.token_id};n.url="https://objkt.com/tokens/"+n.fa2_address+"/"+n.token_id,RL[t.id]=n,KR(e,t,"tezos")}}else{const t=e.userData.item,n=t.display_uri;t.fa=0;const i={id:t.permalink};t.url=t.permalink,RL[i.id]=t,KR(n,i)}}else if(iT){const t=tT.object;if(t.hasOwnProperty("userData")&&tT.distance<12&&!kk&&t.userData.isWorldItem&&RL.hasOwnProperty(t.userData.objktID)){document.getElementById("itemMetaData").style.display="none",document.getElementById("itemMetaNote").style.display="none",oD.unlock(),gT=t.parent,(mT={position:{},rotation:{},scale:{}}).position=new Wa(gT.position.x,gT.position.y,gT.position.z),mT.rotation=new Wa(gT.rotation.x,gT.rotation.y,gT.rotation.z),mT.scale=new Wa(gT.scale.x,gT.scale.y,gT.scale.z),Kk.attach(gT);let n=.5;pT(),BS.to(gT.position,{duration:n,x:0,y:0,z:-2.5,ease:"power1.in"}),BS.to(gT.rotation,{duration:n,x:0,y:0,z:0,ease:"power1.in"}),BS.to(gT.scale,{duration:n,x:1,y:1,z:1,ease:"power1.in"}),setTimeout((()=>{((e,t)=>{VS.style.display="flex",ak&&(VS.style.left="-300px",VS.style.animation="0.4s linear 0.1s 1 normal forwards running loaderSlideRight"),qS.innerText=e.name?e.name:"",WS.innerText=e.artist?e.artist:"",jS.innerText="",e.hasOwnProperty("description")&&e.description&&(jS.innerText=e.description),e.hasOwnProperty("mime")&&(XS.innerText=`[MIME type -  ${e.mime}]`),FS.style.display="none",function(e,t){if(e.hasOwnProperty("type")){YS.innerHTML="";const t=document.createElement("div");t.className="focusToolButton";let n=0;switch(e.type){case"tezos":case"objkt":if(n="Objkt",e.mime&&e.mime.indexOf("html")<0&&e.mime.indexOf("application")<0){const t=KS();YS.append(t),t.addEventListener("click",(()=>(e=>{const t="https://assets.objkt.media/file/assets-003/"+e.artifact_uri.replace("ipfs://","")+"/artifact";if(0===e.mime.indexOf("image")){const e=new Image;e.src=t,e.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",zS.append(e),zS.style.display="flex"}else if(0===e.mime.indexOf("video")){const e=document.createElement("video"),n=document.createElement("source");n.src=t,e.append(n),e.autoplay=!0,e.loop=!0,e.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",zS.append(e),zS.style.display="flex"}})(e)))}break;case"artacle":case"ethereum":n="Artacle";break;case"solana":if("image"===e.properties.category||"video"===e.properties.category){const t=KS();YS.append(t),t.addEventListener("click",(()=>(e=>{const t=e.properties.files[0].uri;if("image"===e.properties.category){const e=new Image;e.src=t,e.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",zS.append(e),zS.style.display="flex"}else if("video"===e.properties.category){const e=document.createElement("video"),n=document.createElement("source");n.src=t,e.append(n),e.autoplay=!0,e.loop=!0,e.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",zS.append(e),zS.style.display="flex"}})(e)))}n="Solana FM";break;default:n="web2"}if(n){if(t.innerHTML=`Inspect on ${n} &nbsp;&nbsp; ${JS}`,e.hasOwnProperty("gallica")){t.innerHTML=`Ouvrir dans Gallica &nbsp;&nbsp; ${JS}`;const n=KS();YS.append(n),n.addEventListener("click",(()=>(e=>{const t=`https://gallica.bnf.fr/iiif/${e.IIIFdata.ark}/${e.IIIFdata.vue}/${e.IIIFdata.region}/${e.IIIFdata.size}/${e.IIIFdata.rotation}/${e.IIIFdata.quality}`,n=new Image;n.src=t,n.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",zS.append(n),zS.style.display="flex"})(e)))}if(e.hasOwnProperty("britishLibrary")){t.innerHTML=`Access on the British Library &nbsp;&nbsp; ${JS}`;const n=KS();YS.append(n),n.addEventListener("click",(()=>(e=>{const t=`https://api.bl.uk/image/iiif/${e.IIIFdata.ark}/${e.IIIFdata.region}/${e.IIIFdata.size}/${e.IIIFdata.rotation}/${e.IIIFdata.quality}.jpg`,n=new Image;n.src=t,n.style="display:block;margin:auto;pointer-events:none;max-width:100%;max-height:100%;",zS.append(n),zS.style.display="flex"})(e)))}t.addEventListener("click",(()=>(e=>{e&&(oD.unlock(),e.hasOwnProperty("permalink")?window.open(e.permalink,"_blank"):e.hasOwnProperty("url")&&window.open(e.url,"_blank"))})(e))),YS.append(t)}}const n=(()=>{const e=document.createElement("div");return e.className="focusToolButton",e.innerHTML='Add note &nbsp;&nbsp; <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path fill="white" d="M180.001-400v-59.999h280V-400h-280Zm0-160v-59.999h440V-560h-440Zm0-160v-59.999h440V-720h-440Zm344.615 539.999v-105.692l217.153-216.153q7.462-7.461 16.111-10.5 8.65-3.038 17.299-3.038 9.436 0 18.252 3.538 8.816 3.539 16.029 10.615l37 37.385q6.462 7.461 10 16.153 3.539 8.693 3.539 17.385 0 8.692-3.231 17.692t-10.308 16.461L630.307-180.001H524.616Zm287.691-250.307-37-37.385 37 37.385Zm-240 202.615h38l129.847-130.462-18.385-19-18.615-18.769-130.847 130.231v38Zm149.462-149.462-18.615-18.769 37 37.769-18.385-19Z"/></svg>',e})();QS(e,t),e.hasOwnProperty("note")?e.note&&(ZS.style.display="flex"):(ZS.style.display="none",n.addEventListener("click",(()=>ZS.style.display="flex"))),YS.append(n)}(e,t)})(RL[t.userData.objktID],t)}),550),e=!0}}e||oD.lock()}));const vT={},xT=document.getElementById("connectInfo"),bT=(e,t)=>{xT.innerHTML="";let n="";n=t?"<span style='color:green'></span>":"<span style='color:red'></span>",vT[e]=n;var i="";for(const e in vT)i+=`${e} - ${vT[e]}<br>`;xT.innerHTML=i};var wT={},_T=[];const MT=Dv.gql`
  query getProfiles($artists: [String!]!) {
    holder(where: { address: { _in: $artists } }) {
      alias
      address
      description
      discord
      dns
      email
      ethereum
      facebook
      flag
      github
      gitlab
      inserted_at
      instagram
      last_metadata_update
      logo
      medium
      reddit
      slack
      support
      telegram
      twitter
      tzdomain
      website
    }
  }
`,ET={},ST=Dv.gql`
  {
    token_tag(
      where: {
        tag: { name: { _ilike: "anaverse-sem" } }
        token: {
          holders: {
            holder_address: { _eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9" }
          }
        }
      }
    ) {
      token {
        tags {
          tag {
            name
          }
        }
      }
    }
  }
`,TT={};async function AT(e,t){const n=[];var i;return e.forEach((e=>{ET.hasOwnProperty(e)||n.push(e)})),n.length>0&&(i=await(0,Dv.request)("https://data.objkt.com/v3/graphql",MT,{artists:n}).then((e=>{e&&(e.hasOwnProperty("holder")&&e.holder.forEach((e=>ET[e.address]=e)),t&&e.tzprofiles[0].alias&&lk(e.tzprofiles[0].alias));for(const e in TT)ET[e].seminarist=!0})).catch((e=>{}))),i}(0,Dv.request)("https://data.objkt.com/v3/graphql",ST).then((e=>{e.token_tag.forEach((e=>{e.token.tags.forEach((e=>{0===e.tag.name.indexOf("pres://")&&(TT[e.tag.name.replace("pres://","")]=1)}))}))}));const CT=e=>ET[e.address]=e,IT=new Audio,LT=()=>IT.volume=.1;LT();const RT=document.getElementById("audio-radio"),PT=document.getElementById("radio-name"),kT=document.getElementById("track-name"),DT=document.getElementById("radio-play");var NT=!1;DT.addEventListener("click",(()=>{LT(),NT?(IT.pause(),NT=!1,DT.innerHTML='<img  style="width:15px;height:15px" src="icons/play.svg">'):(IT.play(),NT=!0,DT.innerHTML='<img  style="width:15px;height:15px" src="icons/stop.svg">')}));var OT=!1;const UT={room:{blockchain:"tezos",token_id:"540571",contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE"},skybox:{blockchain:"tezos",token_id:"527345",contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE"},gallery:[{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"2"},position:{x:"-30.0000",y:"1.5000",z:"2.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"1.0000",y:"1.0000",z:"1.0000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"3"},position:{x:"-30.0000",y:"1.5000",z:"-1.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"1.0000",y:"1.0000",z:"1.0000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"1"},position:{x:"-32.0000",y:"8.5000",z:"0.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"3.8000",y:"3.8000",z:"3.8000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"4"},position:{x:"-30.0000",y:"1.5000",z:"-4.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"1.0000",y:"1.0000",z:"1.0000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"0"},position:{x:"-30.0000",y:"1.5000",z:"5.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"1.0000",y:"1.0000",z:"1.0000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"5"},position:{x:"-19.0000",y:"1.5000",z:"-27.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"1.4000",y:"1.4000",z:"1.4000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"6"},position:{x:"-15.0000",y:"1.5000",z:"-27.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"1.4000",y:"1.4000",z:"1.4000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"7"},position:{x:"-11.0000",y:"1.5000",z:"-27.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"1.4000",y:"1.4000",z:"1.4000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1D868VUoMPJpvRqsP9aLpFAne16bT1nL3g",token_id:"10"},position:{x:"-7.0000",y:"1.5000",z:"-27.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"1.4000",y:"1.4000",z:"1.4000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1LjmAdYQCLBjwv4S2oFkEzyHVkomAf5MrW",token_id:"27435"},position:{x:"-42.0000",y:"8.5000",z:"38.0000"},rotation:{x:"-3.1416",y:"0.0000",z:"-3.1416"},scale:{x:"3.1000",y:"3.1000",z:"3.1000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"1043411"},position:{x:"38.0000",y:"15.5000",z:"0.0000"},rotation:{x:"0.0000",y:"-1.5708",z:"0.0000"},scale:{x:"2.6000",y:"2.6000",z:"2.6000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1CUPoajzwiYQN8gfueuktNbAQS5jJ4Jf7V",token_id:"6"},position:{x:"0.0000",y:"5.5000",z:"-85.0000"},rotation:{x:"0.0000",y:"0.0000",z:"0.0000"},scale:{x:"6.4000",y:"6.4000",z:"6.4000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"926697"},position:{x:"-90.0025",y:"1.4774",z:"36.0496"},rotation:{x:"-2.7139",y:"1.5572",z:"2.7139"},scale:{x:"2.1000",y:"2.1000",z:"2.1000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1LjmAdYQCLBjwv4S2oFkEzyHVkomAf5MrW",token_id:"25128"},position:{x:"-71.0000",y:"15.5000",z:"-60.0000"},rotation:{x:"0.0000",y:"1.5708",z:"0.0000"},scale:{x:"2.9000",y:"2.9000",z:"2.9000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"669579"},position:{x:"110.0000",y:"32.5000",z:"-9.0000"},rotation:{x:"0.0000",y:"-1.5708",z:"0.0000"},scale:{x:"1.5000",y:"1.5000",z:"1.5000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1C3dCG9XMnP7iT7tUDs55ebr43wfF3TV7k",token_id:"0"},position:{x:"116.0000",y:"7.5000",z:"-29.0000"},rotation:{x:"0.0000",y:"-1.5708",z:"0.0000"},scale:{x:"6.8000",y:"6.8000",z:"6.8000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1RncKS9P56FhSDradukH9SjMSobqE8zpLV",token_id:"1"},position:{x:"97.0000",y:"15.5000",z:"38.0000"},rotation:{x:"-3.1416",y:"0.0000",z:"-3.1416"},scale:{x:"3.9000",y:"3.9000",z:"3.9000"}},{tokenType:"objkt",objktMetaData:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"541252"},position:{x:"-3.3699",y:"15.4139",z:"103.5790"},rotation:{x:"-3.0723",y:"1.1603",z:"3.0780"},scale:{x:"2.6000",y:"2.6000",z:"2.6000"}}],name:"ANAVER.SE TUTORIAL",collection:"tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9",startPoint:{position:{x:-13.304757667642704,y:29.235408631687264,z:2.47577463339384},direction:{x:-.9462424199874436,y:.019998666693336952,z:-.32283948944761254}}};var BT=!1;const FT=window.localStorage,zT=()=>{BT=!0,setTimeout((()=>{FT.setItem("finishedTutorial",!0)}),18e4,5)},GT=[],HT=e=>Dv.gql`
  query getObjktCuratedGallery {
    gallery(
      where: { gallery_id: { _eq: "${e}" } }
    ) {
      gallery_id
      slug
      description
      curators {
        curator {
          address
          alias
          logo
          twitter
        }
      }
      tokens {
        token {
          token_id
          artifact_uri
          description
          display_uri
          mime
          thumbnail_uri
          timestamp
          name
          fa_contract
          creators {
            creator_address
            holder {
             alias
             twitter
             logo
             tzdomain
           }
          }
        }
      }
    }
  }
`,VT=(e,t)=>{t||(document.getElementById("objktCuratedDisplay").innerHTML=""),e.gallery.forEach((e=>{e.url="https://objkt.com/curations/objkt/"+e.slug,e.chain="tezos";const n=XI(e,"loadCuration");t?GT.push(n):document.getElementById("objktCuratedDisplay").append(n)}))},qT=(e,t)=>{const n=document.createElement("meta");n.setAttribute("property","og:image"),n.setAttribute("content",t);const i=document.createElement("meta");i.setAttribute("name","twitter:image"),i.setAttribute("content",t);const r=document.createElement("meta");r.setAttribute("property","og:title"),r.setAttribute("content",e);const s=document.createElement("meta");s.setAttribute("name","og:title"),s.setAttribute("content",e),document.head.append(n,i,r,s)},WT=()=>{var e="oo"+Array(49).fill(0).map((e=>"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"[58*Math.random()|0])).join("");return console.log("Generating random hash"),console.log(e),e},jT=()=>{qT("ANAVER.SE - generative stereoscopic experiments","https://anaver.se/anaverse-splash.png");const e={room:[],fp:[],sky:[]};for(const t in KT)KT[t].tag.hasOwnProperty("room")&&e.room.push(KT[t]);if(Nn>=6&&Nn<20)qP({skyboxUrl:"./initial_skybox.js",tag:{anaverse:!0,skybox:!0},type:"skybox"},0,WT(),"",!0,!1);else for(const e in KT)21525===KT[e].id&&qP(KT[e],0,WT(),"",!0,!1);e.room.length>0&&(t["Choix alatoire"].fin=performance.now(),e.room.forEach((e=>{8376===e.id&&qP(e,0,WT(),"RANDOM CHAPEL")})))},XT=e=>{if(e){const t=new URL(e);return new URLSearchParams(t.search).get("fxhash")}},YT=()=>{const e=document.getElementsByClassName("galleryFilterCheckbox"),t=[];var n,i=document.getElementsByClassName("gentkCell");for(let n=0;n<e.length;n++)e[n].checked&&t.push(e[n].dataset.key);if(t.length>0){n=e[0].dataset.slug;for(let e=0;e<i.length;e++)i[e].style.display="none"}else for(let e=0;e<i.length;e++)i[e].style.display="inline-block";var r={};n&&KT[n]&&(KT[n].collection.forEach((e=>r[e.completeName]={})),t.forEach((e=>{KT[n].collection.forEach((t=>{t.token.attributes.forEach((n=>{const i=n.attribute;("string"==typeof i.value?i.value:JSON.stringify(i.value))===e&&Array.isArray(t.token.attributes)&&t.token.attributes.forEach((e=>{document.getElementById(t.completeName).style.display="inline-block"}))}))}))})))},JT=()=>{var e;(()=>{for(const e in KT){const t=KT[e];t.slug=e,t.tag={},t.tags.forEach((e=>{switch(t.tag[e]=!0,e){case"firstPerson":case"world":case"skybox":t.type=e}})),t.title=t.name.replace("anaverse - ","");const n=XI(t,"listIterations"),i=document.createElement("div");i.className="gentkDesc",i.innerText=t.description,t.filters={},t.DOMelements={profile:n,description:i,gallery:[]}}!function(){const e=[];for(const t in KT)KT[t].slug=t,e.push(KT[t]),delete KT[t];(function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}})(e),KT={},e.forEach((e=>{KT[e.slug]=e}))}()})(),xA&&(getPersonalTokens(xA),e=xA,(0,Dv.request)("https://data.objkt.com/v3/graphql",Dv.gql`
    query getObjktCuration {
      gallery(
        where: {registry: {name: {_eq: "objkt"}}, items: {_gt: 5}, name: {}, curators: {curator_address: {_eq: "${e}"}}}
        order_by: {updated_at: desc}
        limit: 10
      ) {
        gallery_id
        name
        logo
        description
        slug
        items
        curators {
          curator {
            address
            alias
            logo
            twitter
          }
        }
      }
    }
    
    `).then((e=>VT(e,!0)))),window.location.search?kA():(t["Choix alatoire"].dbut=performance.now(),jT())};var KT={};const ZT=window.localStorage;ZT.getItem("favoriteNativeIterations")||ZT.setItem("favoriteNativeIterations","{}");const QT=(e,t,n)=>{const i=document.createElement("div");i.id="iterationMenu";const r=document.getElementById("tokens");e.hasOwnProperty("personal")?i.style.animation="personalIterationSlideLeft .15s linear forwards":i.style.animation="iterationSlideLeft .15s linear forwards";const s=document.createElement("div");s.id="iterationClose",s.innerText="close",s.addEventListener("click",(()=>$T()));const a=new Image;a.loading="lazy",a.className="thumbnail",a.setAttribute("data-src","/loading.gif"),a.style.imageRendering="auto",a.setAttribute("data-src","/loading.gif"),a.onerror=e=>a.src="/notfound.png",a.src=t,a.style="cursor:pointer;margin:unset";const o=document.createElement("div");if(o.style="    \n  width: 100%;\n  height: calc(100% - 40px);\n  margin-top: 35px;\n  overflow-y: auto;\n  display: inline-flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  align-items: center;",e.hasOwnProperty("name")){const t=document.createElement("div");t.innerText=e.name,t.style="\n    padding: 2%;\n    width: 90%;\n    margin-bottom: 10px;\n    background: red;\n    color: white;\n    text-align: center;\n    border-radius: 5px;\n    ",o.append(t)}o.append(a);const l=tA("Load in Anaverse");l.addEventListener("click",n),a.addEventListener("click",n),o.append(l);const c=tA("Add to favorites");switch(JSON.parse(ZT.getItem("favoriteNativeIterations")).hasOwnProperty(e.contract+e.token_id)&&(c.innerText="Remove from favorites"),c.addEventListener("click",(()=>{const t=JSON.parse(ZT.getItem("favoriteNativeIterations")),n=e.contract+e.token_id,i=document.getElementById("artNameBand"+n);t.hasOwnProperty(n)?(delete t[n],c.innerText="Add to favorites",i.style=""):(t[n]=!0,i.style="background:red;color:white;",c.innerText="Remove from favorites"),ZT.setItem("favoriteNativeIterations",JSON.stringify(t))})),o.append(c),e.chain){case"tezos":const t=document.createElement("div");t.style="\n          display:flex;\n          width: 90%;\n          margin-top:15px;\n          font-size: 10px;\n          border:1px solid red;\n          border-radius:5px;\n          padding:5px";const n=document.createElement("div"),i=document.createElement("div");i.style="margin-right: 10px;";const r=tA("Inspect on objkt.com");if(r.addEventListener("click",(()=>window.open(e.url,"_blank"))),o.append(r),e.holder.logo){const n=document.createElement("img");n.className="profilePic",n.loading="lazy",n.setAttribute("data-src","/loading.gif"),n.src=e.holder.logo,n.onerror=()=>n.remove(),i.append(n),t.append(i)}n.innerHTML=`<strong>Current holder information</strong><br>\n      <strong>Address:</strong> <a style="word-break: break-all;" href="https://objkt.com/users/${e.holder.address}/owned" target="_blank">${e.holder.address}</a>`,e.holder.alias&&(n.innerHTML+=`<br><strong>Alias:</strong> ${e.holder.alias}`),e.holder.twitter&&(n.innerHTML+=`<br><strong>Twitter:</strong> <a href="${e.holder.twitter}" target="_blank">@${e.holder.twitter.replace("https://twitter.com/","")}</a>`),t.append(n),o.append(t);const s=e.hasOwnProperty("token")?e.token.attributes:e.attributes;if(s.length>0){const e=document.createElement("div");e.style="\n          width: 90%;\n          padding:2%;\n          margin-top:15px;\n          font-size: 10px;\n          border:1px solid red;\n          word-break: break-all;\n          border-radius: 5px;",s.forEach((t=>{const n=document.createElement("div");n.innerHTML=`<strong>${t.attribute.name}</strong><br> ${t.attribute.value}`,e.append(n)})),o.append(e)}break;case"ethereum":const a=tA("Inspect on highlight.xyz");if(a.addEventListener("click",(()=>window.open(e.url,"_blank"))),o.append(a),e.attributes.length>0){const t=document.createElement("div");t.style="\n          width: 90%;\n          padding:2%;\n          margin-top:15px;\n          font-size: 10px;\n          border:1px solid red;\n          word-break: break-all;\n          border-radius: 5px;",e.attributes.forEach((e=>{const n=document.createElement("div");n.innerHTML=`<strong>${e.name}</strong><br> ${e.value}`,t.append(n)})),o.append(t)}}i.append(s,o),r.append(i)},$T=()=>{const e=document.getElementById("iterationMenu");e&&(e.style.animation="iterationSlideRight .15s linear forwards",setTimeout((()=>{e.innerHTML="",e.remove()}),200))},eA=(e,t,n)=>{document.getElementById("iterationMenu")?($T(),e&&setTimeout((()=>{QT(e,t,n)}),250)):QT(e,t,n)},tA=e=>{const t=document.createElement("div");return t.className="iterationPanelButton",t.innerText=e,t},nA=window.localStorage,iA=e=>{e.iterationsLoaded=!0;const t=document.getElementById("collection");t.innerHTML="",document.getElementById("loadingCollection")&&document.getElementById("loadingCollection").remove();const n=document.createElement("div");if(n.innerHTML=" Back",n.style="border-radius: 5px;\n    cursor: pointer;\n    padding: 4px;\n    margin: 5px;\n    width: 65px;",n.addEventListener("click",(()=>{$T(),t.parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideRight",setTimeout((()=>t.innerHTML=""),250)})),t.prepend(n),e.DOMelements.hasOwnProperty("profile")){var i=document.createElement("div");i.style.display="flex",i.appendChild(e.DOMelements.profile.cloneNode(1)),i.appendChild(e.DOMelements.description),t.appendChild(i)}const r=document.createElement("DIV");r.id="filter",r.innerText="FILTER TOKENS";const s=document.createElement("div");var a;s.id="iterationList",s.style="display: flex;\n  margin: 20px;\n  padding: 0px;\n  flex-direction: row;\n  flex-wrap: wrap;",xA&&(a=JSON.parse(nA.getItem(xA)))&&(prevLoad=JSON.parse(a.prevLoad));var o=e.DOMelements.gallery.length;for(let t=0;t<o;t++)s.appendChild(e.DOMelements.gallery[t]);var l=document.createElement("div");if(e.DOMelements.hasOwnProperty("filters"))l.style="display: grid;grid-template-columns: 20% 80%;",e.DOMelements.filters.forEach((e=>{r.appendChild(e)})),l.appendChild(r);else{var c=document.createElement("div");l.appendChild(c)}l.appendChild(s),t.append(l)},rA=(e,t)=>{if(sA.innerHTML="",e){var n=.05*window.innerWidth;let t=n,i=n,r="multiply";const s=kn("svg").attr("width",t*e.length).attr("height",i).attr("viewBox",`0 0 ${t*e.length} ${i}`).attr("xmlns","http://www.w3.org/2000/svg").style("cursor","pointer");s.append("text").attr("font-family","sans-serif").attr("x",t*e.length*.5+.1*t).attr("y",.95*i).attr("fill","rgb(0,255,235)").attr("font-size",1.2*t).attr("font-weight","bolder").attr("text-anchor","middle").style("mix-blend-mode",r).text(e),s.append("text").attr("font-family","sans-serif").attr("x",t*e.length*.5+.05*t).attr("y",.95*i).attr("fill","rgb(255,0,0)").attr("font-size",1.2*t).attr("font-weight","bolder").attr("text-anchor","middle").style("mix-blend-mode",r).text(e),sA.style.left=window.innerWidth/2-t*e.length/2+"px",sA.style.top=window.innerHeight/2-n/2+"px",sA.appendChild(s.node())}t&&setTimeout((()=>{rA("")}),t)},sA=document.getElementById("info"),aA=Dv.gql`
  query GetObjktsByHolderPaged(
    $limit: Int!
    $offset: Int!
    $where: token_holder_bool_exp = {}
    $order_by: [token_holder_order_by!] = {}
  ) {
    token_holder(
      limit: $limit
      offset: $offset
      where: $where
      order_by: $order_by
    ) {
      token {
        ...TokenDefault
        __typename

        fa {
          collection_type
          contract
          name
        }
      }
      __typename
      holder {
        alias
      }
    }
  }

  fragment TokenDefault on token {
    pk
    token_id
    artifact_uri
    description
    display_uri
    thumbnail_uri
    timestamp
    mime
    name
    creators {
      creator_address
      holder {
        alias
        twitter
        logo
        tzdomain
      }
    }
    attributes {
      attribute {
        id
        name
        type
        value
        __typename
      }
      __typename
    }
    __typename
  }
`;var oA={},lA={},cA={};const uA=(e,t)=>(0,Dv.request)("https://data.objkt.com/v3/graphql",((e,t)=>Dv.gql`
  query getTokensByContract {
    token(
      where: { fa_contract: { _eq: "${e}" }, token_id: {_eq: "${t}"} }
    ) {
     token_id
     artifact_uri
     description
     display_uri
     mime
     thumbnail_uri
     timestamp
     name
     creators {
       creator_address
       holder {
        alias
        address
        twitter
        logo
        tzdomain
      }
     }
     attributes {
       attribute {
         id
         name
         type
         value
         __typename
       }
       __typename
     }
     __typename
          fa {
           collection_type
           contract
           name
           
         }
       
     }
 }
`)(e,t)).then((t=>{const n=e,i=t.token[0].token_id;var r=t.token[0];r.contract=n,r.token_id=i,r.chain="tezos",r.artist=r.creators[0].holder.alias,r.link=`<span>Check on <a href="https://objkt.com/tokens/${r.contract}/${r.token_id}" target="_blank">objkt</a></span>`;const s=XI(r,"loadItem");document.getElementById("importedContractContent").append(s)})),hA=e=>{const t={};var n=0;e.forEach((e=>{if(n++,e.hasOwnProperty("objktMetaData")&&(e.tezosMetaData=e.objktMetaData),e.hasOwnProperty("contract")&&e.hasOwnProperty("token_id")&&(e.tezosMetaData={contract:e.contract,token_id:e.token_id}),n<500){var i=e.tezosMetaData.contract+e.tezosMetaData.token_id;t.hasOwnProperty(i)||(t[i]=`{\n          token_id: { _eq: ${JSON.stringify(e.tezosMetaData.token_id)} },\n          fa_contract: { _eq: ${JSON.stringify(e.tezosMetaData.contract)} },\n        }`)}}));const i=[];for(const e in t)i.push(t[e]);const r=`query{\n    token(where: {_or:[${i}]}) {\n      description\n      artifact_uri\n      content_rating\n      display_uri\n      metadata\n      mime\n      name\n      thumbnail_uri\n      timestamp\n      creators{\n        creator_address\n        holder {\n          alias\n          twitter\n          address\n        }\n      }\n      fa{\n        contract\n      }\n      token_id\n    }\n  }`;(0,Dv.request)("https://data.objkt.com/v3/graphql",r).then((t=>{e.forEach((e=>{t.token.forEach((t=>{if(t.fa.contract===e.tezosMetaData.contract&&t.token_id===e.tezosMetaData.token_id)if(t.content_rating&&wL(),t.display_uri||t.artifact_uri){const i=t.display_uri?"https://assets.objkt.media/file/assets-003/"+t.display_uri.replace("ipfs://","")+"/display":"https://assets.objkt.media/file/assets-003/"+t.artifact_uri.replace("ipfs://","")+"/artifact",r={position:e.position,rotation:e.rotation,scale:e.scale},s=`https://objkt.com/tokens/${t.fa.contract}/${t.token_id}?ref=${_L}`;t.url=s;const a=t.fa.contract+JSON.stringify(t.token_id);t.artist="",t.creators.forEach((e=>{t.artist+=` ${e.holder.alias}`})),RL[a]=t;var n=!!e.hasOwnProperty("note")&&e.note;KR(i,{id:a},"tezos",r,n)}else console.log("%c [objkt.com] The token ["+t.name+"] was minted without a proper metadata capture.","font-weight:bold;")}))}))})).catch((e=>{console.log(e),rA("GALLERY ERROR",2e3)}))},dA=e=>{if(e.native)switch(e.nativeRequestType){case"generatorList":Promise.all([(0,Dv.request)("https://data.objkt.com/v3/graphql",Dv.gql`
      query getCrossChain {
        token(
          where: {
            tags: {
              tag: { name: { _eq: "anaverse" } }
              token: { tags: { tag: { name: { _eq: "crosschain" } } } }
            }
            supply: { _gt: "0" }
          }
        ) {
          attributes {
            attribute {
              name
              value
            }
          }
          token_id
          fa_contract
          accessibility
          artifact_uri
          average
          content_rating
          decimals
          description
          display_uri
          extra
          flag
          highest_offer
          is_boolean_amount
          last_listed
          last_metadata_update
          level
          lowest_ask
          metadata
          mime
          name
          ophash
          supply
          symbol
          thumbnail_uri
          timestamp
          tzip16_key
          tags {
            tag {
              name
            }
          }
        }
      }
    `).then((e=>{e.token.forEach((e=>{e.iterationsLoaded=!1,e.id=e.fa_contract+e.token_id,e.tags.forEach((t=>{const n=t.tag.name;e.tags.push(n),"anaverse"===n&&(KT[e.name]=e),"skybox"===n&&(KT[e.name].type="skybox")}));const t=`https://assets.objkt.media/file/assets-003/${e.artifact_uri.slice(7)}/artifact/`.replace("//artifact","/artifact");e.imgUrl=`https://assets.objkt.media/file/assets-003/${e.fa_contract}/${e.token_id}/thumb288`,e.figuresUrl=t+"figures.js",e.skyboxUrl=t+"skybox.js",e.attributes.forEach((t=>{switch(t.attribute.name){case"target_chain":e.chain=t.attribute.value;break;case"author_wallet":e.crosschain_author_wallet=t.attribute.value,e.link=`https://highlight.xyz/user/@${t.attribute.value}`}}))}))})),(0,Dv.request)("https://data.objkt.com/v3/graphql",Dv.gql`
      query getAnaverse {
        gallery(
          where: {
            curators: {
              curator_address: { _eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9" }
            }
          }
          order_by: { inserted_at: desc }
        ) {
          logo
          name
          gallery_id
          description
          tokens(limit: 1, order_by: { id: asc }) {
            id
            token {
              tags {
                tag {
                  name
                }
              }
              fa_contract
              artifact_uri
              display_uri
              thumbnail_uri
              token_id
            }
          }
        }
      }
    `).then((e=>{e.gallery.forEach((e=>{if(e.iterationsLoaded=!1,e.id=parseInt(e.gallery_id),e.tags=[],e.tokens.length>0){e.contract=e.tokens[0].token.fa_contract,e.tokens[0].token.tags.forEach((t=>{const n=t.tag.name;e.tags.push(n),"anaverse"===n&&(KT[e.name]=e),"skybox"===n&&(KT[e.name].type="skybox")})),e.link="https://objkt.com/explore/tokens/1?gallery=fxhash:"+e.gallery_id,e.chain="tezos";const t=`https://assets.objkt.media/file/assets-003/${e.tokens[0].token.artifact_uri.slice(7,e.tokens[0].token.artifact_uri.indexOf("?fxhash="))}/artifact/`.replace("//artifact","/artifact");e.figuresUrl=t+"figures.js",e.skyboxUrl=t+"skybox.js"}}))})).catch((e=>{console.log(e),bT("anaver.se native tokens retrieval",0)}))]).then((()=>{bT("anaver.se native tokens retrieval",1),JT()}));break;case"iterationList":switch(e.blockchain){case"tezos":pA(e.gentk);break;case"ethereum":s=e.gentk,Nv()("https://api.highlight.xyz:8080/",Dv.gql`
      query GetPublicCollectionByWalletAddress($walletAddress: String!) {
        getPublicCollectionsByWallet(walletAddress: $walletAddress) {
          collections {
            id
            name
            type
            collectionType
            symbol
            chainId
            contractId
            status
            baseUri
            contractUri
            description
            address
            seriesTokens(first: 500) {
              edges {
                id
                tokenId
                name
                ownerAddress

                attributes {
                  name
                  value
                  __typename
                }
                imageUrl
                animationUrl
                minted
                __typename
              }
              pageInfo {
                endCursor
                totalCount
                __typename
              }
              __typename
            }
            seriesDetails {
              coverImage
              logoUrl
              __typename
            }
            generativeDetails {
              logoUrl
              __typename
            }
            seriesImages {
              urls
              coverImageUrl
              __typename
            }
            editions {
              name
              description
              image
              size
              onChainImage
              animation
              __typename
            }
            mintVectors {
              id
              stats {
                total
                __typename
              }
              __typename
            }
            __typename
          }
          __typename
        }
      }
    `,{walletAddress:s.crosschain_author_wallet}).then((e=>{e.getPublicCollectionsByWallet.collections.forEach((e=>{Nv()("https://api.highlight.xyz:8080/",Dv.gql`
          query GetCollectionAddress($collectionId: String!) {
            getPublicCollection(collectionId: $collectionId) {
              address
            }
          }
        `,{collectionId:e.id}).then((t=>{s.contract=t.getPublicCollection.address,s.collectionId=e.id})).then((()=>{let t=!1;e.seriesTokens.edges[0].attributes.forEach((n=>{n.value===s.artifact_uri&&(t=e)})),t&&(t.seriesTokens.edges.forEach((e=>{((e,t)=>{t.imgUrl=t.imageUrl,t.chain="ethereum",t.gentk=e,t.token_id=t.tokenId,t.contract=e.contract,t.url=`https://highlight.xyz/mint/${e.collectionId}/tokens/${t.token_id}`,t.link=`<div style='font-size:10px'>Open on <a href="${t.url}" target="_blank">Highlight</a></div>`;const n=new URL(t.animationUrl),i=n.searchParams.get("ms");let r=n.searchParams.get("h");const s=t.tokenId;i>1&&(r+=s),t.hash=r;const a=XI(t,"loadIteration");e.iterationsLoaded=1,e.DOMelements.gallery.push(a)})(s,e)})),iA(s))}))}))}))}break;case"specificToken":switch(e.blockchain){case"tezos":EL(e.gallery,e.contract,e.token_id);break;case"ethereum":n=e.gallery,i=e.contract,r=e.token_id,Nv()("https://api.highlight.xyz:8080/",Dv.gql`
      query GetCollectionByOnChainId($onChainId: String!) {
        getCollectionByOnChainId(onChainId: $onChainId) {
          id
          name
          __typename
        }
      }
    `,{onChainId:`1:${i}`}).then((e=>e.getCollectionByOnChainId.id)).then((e=>Nv()("https://api.highlight.xyz:8080/",Dv.gql`
          query TokenDetails($collectionId: String!, $tokenId: String!) {
            getPublicCollection(collectionId: $collectionId) {
              seriesToken(tokenId: $tokenId) {
                id
                tokenId
                name
                description
                imageUrl
                animationUrl
                minted
                ownerAddress
                attributes {
                  name
                  value
                  __typename
                }
                __typename
              }
              __typename
            }
          }
        `,{collectionId:e,tokenId:"string"==typeof r?r:JSON.stringify(r)}))).then((e=>e.getPublicCollection.seriesToken)).then((e=>{const t=new URL(e.animationUrl),s=t.searchParams.get("ms");let a=t.searchParams.get("h");const o=e.tokenId;s>1&&(a+=o),e.hash=a;for(let t in KT)"ethereum"===KT[t].chain&&(NP("gallery",[]),e.attributes.forEach((s=>{if(s.value===KT[t].artifact_uri){const s=KT[t];s.contract=i,qP(s,"string"==typeof r?r:JSON.stringify(r),a,e.name,0,n)}})));return e})).then((e=>(n.skybox?SL(n):qP({skyboxUrl:"./initial_skybox.js",tag:{anaverse:!0,skybox:!0},type:"skybox"},0,WT(),"",!0,!1),setTimeout((()=>{n.hasOwnProperty("startPoint")?(NP("startPoint",n.startPoint),lD()):(NP("startPoint",0),DP())}),3e3),e))).then((e=>{return(t=e.ownerAddress,Nv()("https://api.highlight.xyz:8080/",Dv.gql`
      query PublicUserProfile($slug: String!) {
        getPublicAccountSettings(slug: $slug) {
          id
          displayAvatar
          displayName
          walletAddresses
          verified
          __typename
        }
      }
    `,{slug:t}).then((e=>e.getPublicAccountSettings))).then((t=>{e.owner=t,e.name=e.owner.displayName.length>0?e.owner.displayName.toUpperCase()+"'S "+e.name:e.name,HP("room",e.name)})).catch((e=>{console.log("Could not find information on the room owner")}));var t}))}}else switch(e.blockchain){case"tezos":e.hasOwnProperty("assetList")?hA(e.assetList):(e=>{const t=e.substring(0,e.indexOf("/")),n=e.substring(e.indexOf("/")+1);if(0===t.indexOf("KT1"))return uA(t,n);var i;(0,Dv.request)("https://data.objkt.com/v3/graphql",(i=t,Dv.gql`query getContract($_eq: String = ${i}) {
  fa(where: {path: {_eq: $_eq}}) {
    contract
  }
}`)).then((e=>e.fa[0].contract)).then((e=>uA(e,n)))})(e.id);break;case"solana":e.hasOwnProperty("solanaMetaData")?(e=>{fetch(`https://api.solana.fm/v0/magiceden/tokens/${e.solanaMetaData.contract}?network=mainnet`).then((e=>e.json())).then((t=>{const n={position:e.position,rotation:e.rotation,scale:e.scale},i=e.solanaMetaData.contract,r=t.result.image;e.chain="solana",e.type="solana",RL[i]=t.result,RL[i].contract=i,KR(r,{id:i},"solana",n)}))})(e):(t=e.id,fetch(`https://api.solana.fm/v0/magiceden/tokens/${t}?network=mainnet`).then((e=>e.json())).then((e=>{const n=e.result;n.id=t,n.contract=t,n.display_uri=n.image,n.link=`<span>Check on <a href="https://solana.fm/address/${n.contract}" target="_blank">solana.fm</a></span>`,n.chain="solana",n.url=`https://solana.fm/address/${n.contract}`,RL[n.contract]=n,document.getElementById("importedContractContent").append(XI(n,"loadItem"))})))}var t,n,i,r,s},pA=e=>Nv()("https://data.objkt.com/v3/graphql",Dv.gql`
      query getAllIterations($galleryId: String) {
        gallery(where: { gallery_id: { _eq: $galleryId } }) {
          tokens(order_by: { id: desc }) {
            fa_contract
            token_id
            token {
              name
              artifact_uri
              ophash
              holders(
                limit: 1
                order_by: { last_incremented_at: desc_nulls_last }
              ) {
                holder {
                  address
                  alias
                  twitter
                  logo
                }
              }
              attributes {
                attribute {
                  name
                  value
                }
              }
            }
          }
        }
      }
    `,{galleryId:JSON.stringify(e.id)}).then((t=>{e.collection=t.gallery[0].tokens,e.collection.forEach((t=>{CT(t.token.holders[0].holder),((e,t)=>{const n=XT(t.token.artifact_uri),i=t.token_id;t.gentk=e,t.hash=n,t.id=i,t.contract=t.fa_contract,t.chain=e.chain;var r="";t.token.holders[0].holder.alias&&(r=t.token.holders[0].holder.alias+"'S "),t.holder=t.token.holders[0].holder,t.token.hasOwnProperty("attributes")&&Array.isArray(t.token.attributes)&&t.token.attributes.forEach((e=>{"name"===e.attribute.name.toLowerCase()&&(r+=e.attribute.value)})),r=r.toLowerCase(),t.name=r,t.completeName=r,t.link=`<div style='font-size:10px'>Open on <a target='_blank' href="https://objkt.com/tokens/${t.contract}/${t.token_id}">objkt</a></div>`,e.DOMelements.gallery.push(XI(t,"loadIteration")),t.token.holders[0].holder.alias&&t.token.attributes.push({attribute:{name:"Owner",value:t.token.holders[0].holder.alias}}),((e,t)=>{e.hasOwnProperty("filters")||(e.filters={}),t&&t.length>0&&t.forEach((t=>{const n=t.attribute;e.filters.hasOwnProperty(n.name)?e.filters[n.name].hasOwnProperty(n.value)?e.filters[n.name][n.value]++:e.filters[n.name][n.value]=1:e.filters[n.name]={}}))})(e,t.token.attributes)})(e,t)})),(e=>{const t=[];for(const i in e.filters){var n=document.createElement("div");n.innerHTML="<hr>"+i+" ("+Object.keys(e.filters[i]).length+")",n.style.cursor="pointer";const r=document.createElement("ul");r.style.display="none",r.style.listStyle="none";for(const t in e.filters[i]){const n=document.createElement("li"),s=document.createElement("input");s.type="checkbox",s.className="galleryFilterCheckbox",s.dataset.slug=e.slug,s.dataset.key=t;let a=e.filters[i][t];s.name=t+" ("+a+")";const o=document.createElement("label");o.innerText=t+" ("+a+")",o.for=t+" ("+a+")",s.addEventListener("change",YT),n.appendChild(s),n.appendChild(o),r.appendChild(n)}n.addEventListener("click",(()=>{"none"===r.style.display?r.style.display="block":r.style.display="none"})),t.push(n,r)}e.DOMelements.filters=t})(e),iA(e)})),fA=e=>{xk(),e.iterationsLoaded?iA(e):dA({native:!0,nativeRequestType:"iterationList",blockchain:e.chain,gentk:e})},mA=[],gA=e=>(e=>(0,Dv.request)("https://data.objkt.com/v3/graphql",aA,{where:{holder_address:{_eq:e},quantity:{_gt:0},token:{fa:{live:{_eq:!0}}}},order_by:{last_incremented_at:"desc"},limit:200,offset:0}).then((e=>{e.token_holder.forEach((e=>{if(e.token.id=e.token.fa.contract+e.token.token_id,e.token.hasOwnProperty("creators")&&e.token.creators[0]){var t=e.token.creators[0].creator_address;cA.hasOwnProperty(t)||(cA[t]={}),cA[t][e.token.id]=e.token,lA.hasOwnProperty(t)||(lA[t]=e.token.creators[0].alias),RL[e.token.id]=e.token}})),(e=>{for(const t in e)for(const n in e[t]){const i=e[t][n];i.chain="tezos",i.contract=i.fa.contract,i.creators.forEach((e=>{const t=e.holder;t.address=e.creator_address,CT(t)})),PL[t]=XI(i,"displayCollection")}})(cA),bT("OBJKT tokens retrieval",1)})).catch((e=>{console.log("Failed to retrieve your OBJKT tokens"),console.log(e),bT("OBJKT tokens retrieval",0)})))(e).then((()=>{"tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9"!=e&&Nv()("https://data.objkt.com/v3/graphql",Dv.gql`query getUserAnaverse {
      token(
        where: {royalties: {receiver_address: {_eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9"}}, 
        tags: {tag: {name: {_eq: "anaverse"}}}, holders: {holder_address: {_eq: "${e}"}}}
        limit: 30
        order_by: {level: desc_nulls_last}
        ) {
          artifact_uri
          name
          ophash
          fa_contract
          token_id
          holders(limit: 1, order_by: {last_incremented_at: desc_nulls_last}) {
            holder {
              address
              alias
              logo
              twitter
            }
          }
          attributes {
            attribute {
              name
              value
            }
          }
          display_uri
          thumbnail_uri
          tags {
            tag {
              name
            }
          }
        }
      }
      `).then((e=>{const t=[];e.token.forEach((e=>{let n=0;e.hasOwnProperty("tags")&&e.tags.forEach((t=>{"room"===t.tag.name&&(e.type="room",n=1),"world"===t.tag.name&&(n=1),"skybox"===t.tag.name&&(e.type="skybox",n=1),"firstPerson"===t.tag.name&&(e.type="firstPerson",n=1)})),e.hasOwnProperty("tags")&&e.tags.forEach((i=>{"anaverse"===i.tag.name&&n&&t.push(e)}))})),(e=>{e.forEach((e=>{e.contract=e.fa_contract,e.chain="tezos",e.hash=XT(e.artifact_uri.replace("ipfs://","https://")),e.personal=!0,e.slug=e.name.slice(0,e.name.lastIndexOf("#")-1),e.holder=e.holders[0].holder;var t="";e.hasOwnProperty("attributes")&&Array.isArray(e.attributes)&&e.attributes.forEach((e=>{"name"===e.attribute.name.toLowerCase()&&(t+=e.attribute.value)})),t.length<1&&(t=e.name);let n=e.holder.alias?e.holder.alias+"'s ":"";t=n+t.toLowerCase(),e.name=t,e.completeName=t,mA.push(XI(e,"loadIteration"))}))})(t)})).catch((e=>{bT("personal native anaver.se tokens retrieval",0),console.log("Error : the request to retrieve your native anaver.se tokens failed")}))})),yA=document.getElementById("walletSync"),vA=document.getElementById("walletDetail");var xA="";const bA=window.localStorage;bA.getItem("walldir")||bA.setItem("walldir",'{"eth":{},"tez":{}}'),bA.getItem("beacon:sdk-secret-seed")&&(bA.removeItem("beacon:sdk-secret-seed"),bA.removeItem("beacon:sdk_version"),bA.removeItem("beacon:active-account"),bA.removeItem("beacon:accounts"),bA.removeItem("beacon:postmessage-peers-dapp")),vA.style.display="none";const wA=()=>{var e=document.getElementById("walletDetail");"none"===e.style.display?(e.style.display="flex",e.style.zIndex=9999):(e.style.display="none",e.style.zIndex=-50)};document.getElementById("signin").addEventListener("click",wA);const _A=document.getElementById("tzTarget");document.getElementById("tzLoadWallet").addEventListener("click",(()=>{xA=_A.value.substring(_A.value.indexOf("tz")),MA(xA),kL(),gA(xA),wA();const e=new URL(document.location.href);e.searchParams.set("wallet",xA),window.history.replaceState({},"",e.href)}));const MA=e=>{document.getElementById("helper").style.animation="slideRight .3s linear forwards",AT([e]).then((()=>{var n=ET[e];n?(n.prevLoad="{}",yA.innerHTML=`<div id="alias">${n.alias}</div><div class="profilePic" style="background-image: url('${n.logo}');" ></div>`,((e,t,n)=>{const i=JSON.parse(bA.getItem("walldir"));i.tez[t]={name:n,address:t,type:"tez"},bA.setItem("walldir",JSON.stringify(i))})(0,e,n.alias),lk(n.alias)):yA.innerHTML="<div style='font-size:12px'>CONNECTION ERROR</div>",t.Identit.fin=window.performance.now()}))};window.localStorage,new Map;var EA=n(916);const SA=document.createElement("div");SA.className="artistList";const TA={},AA=[],CA=()=>(0,Dv.request)("https://data.objkt.com/v3/graphql",Dv.gql`
      {
        token_tag(
          where: {
            tag: { name: { _ilike: "anaverse-sem" } }
            token: {
              holders: {
                holder_address: { _eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9" }
                quantity: { _gt: "0" }
              }
            }
          }
        ) {
          token {
            creators {
              creator_address
            }
            description
            fa_contract
            name
            token_id
            artifact_uri
            thumbnail_uri
            tags {
              tag {
                name
              }
            }
            holders {
              holder_address
            }
            extra
          }
        }
      }
    `).then((e=>e.token_tag)).then((e=>(e.forEach((e=>{var t=e.token;t.contract=t.fa_contract,t.tags.forEach((e=>{if(0===e.tag.name.indexOf("gallery://")){const n=e.tag.name.replace("gallery://","");t.gallery_contract=n.substring(0,n.indexOf("/")),t.gallery_token_id=n.substring(n.indexOf("/")+1)}0===e.tag.name.indexOf("lang://")&&(t.lang=" ("+e.tag.name.replace("lang://","")+")")})),t.extra.forEach((e=>{"video/mp4"===e.mime_type&&(t.size=Math.ceil(e.file_size/1e6)+" Mo")})),t.vidsrc=`https://assets.objkt.media/file/assets-003/${t.artifact_uri.replace("ipfs://","")}/artifact`;var n="";t.gallery_contract&&t.gallery_token_id&&II.forEach((e=>{e.contract===t.gallery_contract&&e.id===t.gallery_token_id&&(n=e)})),AA.push(n),t.targetGallery=n,TA[t.contract+t.token_id]={vidsrc:t.vidsrc},t.chain="tezos";const i=XI(t,"loadSeminar");SA.appendChild(i)})),LA(),SA))),IA=(e,t,n)=>{document.getElementById("videoGuide")&&document.getElementById("videoGuide").remove();const i=document.createElement("div");i.id="videoGuide",i.style="z-index:49;\n  position:absolute;\n    left:75%;\n    top:0px;\n  ",hk&&(i.style.left="calc( 75% - 70px )");const r=document.createElement("video");r.id="vidsem",r.controls=!0,t&&(r.poster=t);const s=document.createElement("source"),a=document.createElement("button");a.innerText="x",a.className="vidbuttons",a.style="width: 20px",a.addEventListener("click",(()=>{r.remove(),s.src=null,i.remove(),h.innerHTML="",h.style.display="none"})),r.width=.25*window.innerWidth,r.addEventListener("leavepictureinpicture",(()=>i.style.opacity=1));const o=document.createElement("div");o.style="display: flex;justify-content: space-around;";const l=document.createElement("div");l.style.display="none";const c=document.createElement("button");c.innerText="Subtitles",c.className="vidbuttons",c.disabled=!0,c.addEventListener("click",(()=>{"none"===l.style.display?l.style.display="block":l.style.display="none"}));const u=document.createElement("button");u.innerText="Float video",u.className="vidbuttons",u.addEventListener("click",(()=>{return e=r,void(document.pictureInPictureElement?(document.exitPictureInPicture(),e.parentElement.style.opacity=1):document.pictureInPictureEnabled&&e.requestPictureInPicture().then((t=>e.parentElement.style.opacity=0)));var e})),u.disabled=!0,o.append(c,u,a),r.preload="none",r.setAttribute("crossorigin","anonymous"),r.addEventListener("loadeddata",(()=>{r.readyState>=1&&(u.disabled=!1)})),s.src=e,s.type="video/mp4",r.append(s);const h=document.getElementById("subtitles");TA[n].hasOwnProperty("subtitles")&&(c.disabled=!1,TA[n].subtitles.forEach((e=>{const t=document.createElement("div");t.className="tracksSubsSelects",t.innerText=e.lang+" - "+e.author.substring(0,8)+"",l.append(t),t.setAttribute("data-state","inactive");const n=document.createElement("track"),i=e.lang+" - "+e.author;n.srclang=e.lang,n.src=e.src,n.kind="subtitles",n.label=i,n.id=i,r.append(n);const s=r.textTracks.getTrackById(i);t.addEventListener("click",(()=>{t.style.color="black",s.mode="showing",t.setAttribute("data-state","active")})),s.addEventListener("cuechange",(e=>{s.mode="hidden",h.style.display="block";try{const e=s.activeCues[0].getCueAsHTML();h.innerText=e.textContent}catch(e){}}))}))),i.append(r,o,l),document.body.append(i)},LA=()=>(0,Dv.request)("https://data.objkt.com/v3/graphql",Dv.gql`
      {
        token_tag(
          where: {
            tag: { name: { _eq: "anaverse-sem-subtitle" } }
            token: {
              holders: {
                holder_address: { _eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9" }
                quantity: { _gt: "0" }
              }
            }
          }
        ) {
          token {
            creators {
              creator_address
            }
            fa_contract
            name
            token_id
            artifact_uri
            thumbnail_uri
            tags {
              tag {
                name
              }
            }
            holders {
              holder_address
            }
            extra
            attributes {
              attribute {
                name
                value
              }
            }
          }
        }
      }
    `).then((e=>e.token_tag)).then((e=>{e.forEach((e=>{e=e.token;var t,n,i="";const r=e.creators[0].creator_address;e.attributes.forEach((e=>{switch(e.attribute.name){case"seminar":const r=e.attribute.value;t=r.substring(0,r.indexOf("/")),n=r.substring(r.indexOf("/")+1);break;case"lang":i=e.attribute.value}}));const s=`https://assets.objkt.media/file/assets-003/${e.artifact_uri.replace("ipfs://","")}/artifact`;if(TA.hasOwnProperty(t+n)){var a=TA[t+n];a.hasOwnProperty("subtitles")||(a.subtitles=[]),a.subtitles.push({lang:i,author:r,src:s})}}))})),RA=[{room:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"479112",blockchain:"tezos"},skybox:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"531100",blockchain:"tezos"},gallery:[{tokenType:"tezos",tezosMetaData:{contract:"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",token_id:"63922"},position:{x:"0.0000",y:"3.5000",z:"15.0000"},rotation:{x:"3.1400",y:"0.0000",z:"3.1400"},scale:{x:"2.7000",y:"2.7000",z:"2.7000"}}],startPoint:{position:{x:.11944217486811551,y:9.651916724789947,z:-.6357153710913611},direction:{x:-.001654686534684842,y:.11693555110770382,z:.9931381267978837}},name:"Single01",timeId:"2024-02-04T13:24:17.871Z"},{room:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"426153",blockchain:"tezos"},skybox:{contract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",token_id:"527356",blockchain:"tezos"},gallery:[{tokenType:"tezos",tezosMetaData:{contract:"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",token_id:"255433"},position:{x:"0.8809",y:"2.6584",z:"28.6037"},rotation:{x:"3.0484",y:"-0.0035",z:"3.1413"},scale:{x:"2.6100",y:"2.6100",z:"2.6100"}}],startPoint:{position:{x:.11944217486811551,y:9.651916724789947,z:-.6357153710913611},direction:{x:-.001654686534684842,y:.11693555110770382,z:.9931381267978837}},name:"Single02",timeId:"2024-02-04T13:44:13.303Z"},{room:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"1339956",name:"longkoitang",blockchain:"tezos"},skybox:{contract:"KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi",token_id:"1488105",name:"",blockchain:"tezos"},gallery:[{tokenType:"tezos",tezosMetaData:{contract:"KT1LjmAdYQCLBjwv4S2oFkEzyHVkomAf5MrW",token_id:"25620"},position:{x:"3.0000",y:"4.2300",z:"28.6100"},rotation:{x:"-3.1416",y:"0.0000",z:"-3.1416"},scale:{x:"3.0200",y:"3.0200",z:"3.0200"}}],startPoint:{position:{x:.11944217486811551,y:9.651916724789947,z:-.6357153710913611},direction:{x:-.001654686534684842,y:.11693555110770382,z:.9931381267978837}},name:"Single03",timeId:"2024-02-04T13:47:52.843Z"}];var PA="";const kA=()=>{lk();const e=window.location.search,t=new URLSearchParams(e);if(t.has("videoguide")&&t.has("vgc")&&t.has("vgid")&&setTimeout((()=>{IA(TA[t.get("vgc")+t.get("vgid")].vidsrc,!1,t.get("vgc")+t.get("vgid"))}),2500),t.has("tutorial"))ML(UT),setTimeout((()=>{nk()}),400);else{if(t.has("wallet")){const e=t.get("wallet");MA(e),gA(e),PA=e}t.has("ethwallet")}var n=!t.get("gallery")&&!t.has("autogalgen");if(t.has("loadroom")){n=!1;const e=t.get("loadroom").split("/"),i={room:{blockchain:e[0],contract:e[1],token_id:e[2],name:""},gallery:[]};ML(i)}t.has("loadsingle")&&((e,t)=>{const n=RA[parseInt(Math.random()*RA.length)];n.gallery[0].tezosMetaData={contract:e,token_id:t},ML(n)})(t.get("singlecontract"),t.get("singletokenid")),n&&jT()};var DA=[];const NA=(e,t,n,i)=>{const r=document.createElement("div");r.className="serviceContainer";const s=document.createElement("div");s.innerText=e.name,s.className="serviceLoaderButton",s.addEventListener("click",(()=>{t(),i||(DA.push(function(e){var t=document.createElement("div");t.className="serviceContainer";const n=document.createElement("div");n.innerText=e.name,n.className="serviceLoaderButton";const i=document.createElement("div");return i.className="serviceDesc",i.innerText="Terminate "+e.name,n.addEventListener("click",(()=>{e.terminate(),bk();var n=[];DA.forEach((e=>{e!=t&&n.push(e)})),DA=[...n]})),t.append(n),t.append(i),t}(e)),bk())}));const a=document.createElement("div");a.className="serviceDesc",a.innerText=e.desc,r.append(s),r.append(a),n.push(r)};var OA={"Target wallet":PA};const UA=e=>{const t=document.createElement("div");return t.id="optionDiv",t.append(function(e,t){const n=document.createElement("div");n.style="display:flex;justify-content: space-between;";const i=document.createElement("input");i.type=t,i.value={"Target wallet":OA["Target wallet"]}[e],i.id=e,i.style="width:400px",i.addEventListener("change",(()=>{OA[e]=i.value}));const r=document.createElement("div");return r.innerText=e,r.style="margin-right:5px;",n.appendChild(r),n.appendChild(i),n}("Target wallet","text")),t},BA={},FA=(e,t,n)=>{if(e)for(let i=0;i<n;i++){const n=t[i];if(!e.has(n.level)){const t=new Map;e.set(n.level,t)}const r=e.get(n.level);r.set(n.tokenId,n),e.set(n.level,r)}else{const i=new Map;for(let e=0;e<n;e++){const n=t[e];if(!i.has(n.level)){const e=new Map;i.set(n.level,e)}const r=i.get(n.level);r.set(n.tokenId,n),i.set(n.level,r)}e=i}const i=[...e].sort((([e,t],[n,i])=>e-n));return new Map(i)};var zA;"undefined"!=typeof OffscreenCanvas?zA=new Worker(new URL(n.p+n.u(4),n.b)):console.log("This browser does not support offscreen canvas.");const GA=e=>{rA("CLEARING BLOCKS",2e3),(e=>{BA[e](),delete BA[e]})(e),HA[e].slider.clear(),HA[e].slider.remove(),HA[e]=null,delete HA[e]},HA={},VA=new ac(1.5,.3,.75),qA=new $p(VA),WA=new Ac(1.5,.3);"undefined"!=typeof OffscreenCanvas&&(zA.onmessage=e=>jA(e.data));const jA=e=>{if(HA[e.feedType]){var t=new Yh;const r=new rc(VA,yP.whiteFull),s=new ap(qA,yP.blackLineLone);r.position.set(0,0,-.3755),s.position.set(0,0,-.3755),s.scale.set(1.01,1.01,1.01);const a=new Bd(e.img.data,1e3,200);a.colorSpace=Ms,a.generateMipmaps=!0,a.flipY=!0,a.needsUpdate=!0;var n=new fl({map:a});const o=new rc(WA,n);s.userData.isBlockPanel=1,t.userData.item=e,t.userData.focused=!1,t.add(o,r,s),t.userData.isBlockDisplay=!0;const l=HA[e.feedType].group;let c;e.hasOwnProperty("level")?c="string"==typeof e.level?e.level:JSON.stringify(e.level):e.token.hasOwnProperty("level")&&(c="string"==typeof e.token.level?e.token.level:JSON.stringify(e.token.level)),l[c].add(t),rA(),t.position.y=50;var i=t.parent.children.length;BS.to(t.position,{duration:2,y:.35*i-2})}},XA=e=>{const t=e.children[0],n=e.children[1];BS.to(t.position,{duration:2,y:-20,ease:"power1.in"}),BS.to(n.position,{duration:2,y:-20,ease:"power1.in"}),setTimeout((()=>{n.children.forEach((e=>{e.children.forEach((e=>{e.material.map&&e.material.dispose()}))})),e.remove(t),e.remove(n)}),2e3)},YA=(e,t,n,i)=>{HA.hasOwnProperty(t)||(_k(),HA[t]={map:new Map,group:{},blocks:new Yh,slider:new Yh,added:!0,lowerblock:999999999999},HA[t].blocks.add(HA[t].slider),HA[t].blocks.userData={tokenType:"datavis",feedType:t,args:i},n?(HA[t].blocks.position.set(parseFloat(n.position.x),parseFloat(n.position.y),parseFloat(n.position.z)),HA[t].blocks.rotation.set(parseFloat(n.rotation.x),parseFloat(n.rotation.y),parseFloat(n.rotation.z)),HA[t].blocks.scale.set(parseFloat(n.scale.x),parseFloat(n.scale.y),parseFloat(n.scale.z)),Jk.add(HA[t].blocks)):(Kk.add(HA[t].blocks),HA[t].blocks.position.y=1,HL(HA[t].blocks)));const r=HA[t].map,s=HA[t].group,a=HA[t].slider;var o=0,l=0,c=e.size<=24?0:e.size-24;switch(t){case"teztok-nft-livefeed":case"teztok-nft-lat-transact":case"teztok-sales-nft-livefeed":case"artblocks-nft-livefeed":case"gmstudio-nft-livefeed":case"bright-nft-livefeed":case"genart-nft-livefeed":case"verse-nft-livefeed":case"superrare-nft-livefeed":case"artblocks%3Agmstudio%3Abright%3Agenart%3Asuperrare%3Averse-nft-livefeed":l=!0}HA[t].added&&(sT(!0),HA[t].added=!1),e.forEach(((e,n)=>{if(o>=c)if(r.has(n)){const i=r.get(n);i.size!=e.size&&e.forEach(((e,n)=>{i.has(n)||(i.set(n,e),zA.postMessage({operation:e,feedType:t}))}))}else{n<HA[t].lowestBlock&&(HA[t].lowestBlock=n),r.set(n,e),((e,t,n,i,r)=>{const s=new Yh;var a=r?JSON.stringify(10*Math.cos(t/13*Math.PI)):0;a=parseFloat(a);const o=r?10*Math.sin(t/13*Math.PI):-5;s.position.set(a,0,o),s.rotation.y=r?-t/13*Math.PI-Math.PI/2:0;var l=e;"number"==typeof e&&(l=JSON.stringify(l)),s.name=JSON.stringify(l),n[l]=s;var c=(e=>{const t=e,n=document.createElement("canvas"),i=n.getContext("2d");n.width=100,n.height=100*t.length,i.fillStyle="white",i.fillRect(0,0,100,100*t.length),i.textAlign="center",i.font="bolder 90px monospace";for(let e=0;e<t.length;e++)i.fillStyle="black",e>3&&(i.fillStyle="red"),i.strokeRect(0,100*e,100,100),i.fillText(t[e],50,100*(e+1)-25);return n.toDataURL()})(l);QR(c).then((e=>{const n=new Yh;n.position.x=-1;var a=new fl({map:e}),o=l.length/10;const c=new ac(.1,o,.1),u=new $p(c),h=new Ac(.1,o),d=new rc(h,a),p=new rc(c,yP.whiteFull);p.position.z=-.051;const f=new ap(u,yP.blackLineLone);f.position.z=-.051,n.add(d,p,f),f.scale.set(1.01,1.01,1.01);var m=r?10*Math.cos((t-.42)/13*Math.PI):-1.15,g=r?10*Math.sin((t-.42)/13*Math.PI):-5;n.position.set(m,0,g),n.rotation.y=r?-t/13*Math.PI-Math.PI/2:0,i.add(n),i.add(s)}))})(n,o,s,a,l);const i=(a.children.length-42)/2;for(let e=0;e<i;e++)setTimeout((()=>{XA(a)}),3e3*e);e.forEach(((e,n)=>{zA.postMessage({operation:e,feedType:t})}))}o++}))},JA={};["artblocks","gmstudio","bright","genart","verse","superrare","artblocks%3Agmstudio%3Abright%3Agenart%3Asuperrare%3Averse"].forEach((e=>{const t={interval:0,currentFeed:0};JA[e]=t}));const KA=e=>{ZA(e),rA("CALLING ARTACLE",1500),JA[e].interval=setInterval((()=>{ZA(e)}),25e3)},ZA=e=>{fetch(`https://artacle.io/api/activity/transactionsV3?platform=${e}`).then((e=>e.json())).then((t=>{const n=t.transactions;n.forEach((e=>{e.tokenId=e.tokenName+e.token,e.level=parseInt(e.ts/3e5),e.token={type:"ETH",name:e.tokenName,editions:1,platform:e.tags[0],artist_profile:{alias:e.collectionArtist},display_uri:e.imageUrl,txnHash:e.txnHash,tokenId:e.tokenName+e.token,url:`https://artacle.io/project/${e.projectId}/token/${e.token}`,metadata:{id:e.token,projectId:e.projectId}},e.txnHash.length>0&&(e.permalink="https://etherscan.io/tx/"+e.txnHash),e.type="S"===e.opType?"SALE":"LISTING","S"===e.opType&&(e.previousSale={profit:{profit_in_crypto:e.valueETH-e.prevValueETH,profit_in_usd:e.valueUSD-e.prevValueUSD}}),e.price=e.valueUSD,e.seller_profile={alias:e.fromWallet,address:e.fromWallet},e.buyer_profile={alias:e.toWallet,address:e.toWallet}}));let i=JA[e].currentFeed;i=FA(i,n,200),YA(i,`${e}-nft-livefeed`)}))};var QA=0;const $A=(e,t)=>{iC(e,t),rA("CALLING TEZTOK");var n="sales"===e?"teztok-sales-nft-livefeed":"teztok-nft-livefeed",i=setInterval((()=>{iC(e)}),12e3);((e,t)=>{BA[e]=()=>clearInterval(i)})(n)},eC=new Map;async function tC(e){var t=[];e.forEach(((e,n,i)=>{e.forEach(((e,n)=>{"SALE"===e.implements&&1===e.token.editions&&(eC.get(e.id)||(eC.set(e.id,!0),t.push(e)))}))}));for(let e=0;e<t.length;e++)await uC(t[e]);return e}function nC(e){return e.forEach((e=>{e.token.mime=e.token.mime_type,e.tokenId=e.id,e.seller_address===xA||e.artist_address===xA||e.buyer_address===xA?e.userInvolved=!0:e.userInvolved=!1})),e}function iC(e,t){fetch("https://livefeed-proxy.teztok.com/feed").then((e=>e.json())).then((n=>{var i=nC(n.events),r="teztok-nft-livefeed";if("sales"===e){const e=[];i.forEach((t=>{"SALE"===t.implements&&1===t.token.editions&&e.push(t)})),i=e,r="teztok-sales-nft-livefeed"}tC(QA=FA(QA,i,i.length)).then((n=>{"sales"===e&&n.forEach(((e,t,n)=>{e.previousSale||n.delete(t)})),YA(QA=n,r,t,0)}))}))}const rC={latestGeneralTransactions:Dv.gql`
    query latestGeneralTransactions {
      events(
        limit: 500
        order_by: { opid: desc }
        where: {
          token: { metadata_status: { _eq: "processed" } }
          implements: { _eq: "SALE" }
          price_in_usd: { _gte: "100000000" }
        }
      ) {
        type
        timestamp
        seller_address
        buyer_address
        price

        implements
        level
        price_in_usd
        token_id
        id
        fa2_address
        token {
          fa2_address
          token_id
          editions
          name
          description
          price
          platform
          last_sale_at
          display_uri
          last_sales_price
          artist_profile {
            account
            alias
            twitter
          }
        }

        seller_profile {
          alias
        }

        buyer_profile {
          account
          alias
        }
      }
    }
  `,latestSales:Dv.gql`
    query GetLatestSales($id: String!) {
      events(
        where: { implements: { _eq: "SALE" }, seller_address: { _eq: $id } }
        order_by: { opid: desc }
        limit: 100
      ) {
        type
        timestamp
        seller_address
        buyer_address
        price

        implements
        level
        price_in_usd
        token_id
        id
        fa2_address
        token {
          fa2_address
          token_id
          editions
          name
          description
          price
          platform
          last_sale_at
          display_uri
          last_sales_price
          artist_profile {
            account
            alias
            twitter
          }
        }

        seller_profile {
          alias
        }

        buyer_profile {
          account
          alias
        }
      }
    }
  `,latestPurchases:Dv.gql`
    query GetLatestPurchases($id: String!) {
      events(
        where: { implements: { _eq: "SALE" }, buyer_address: { _eq: $id } }
        order_by: { opid: desc }
        limit: 100
      ) {
        type
        timestamp
        seller_address
        implements
        buyer_address
        price
        price_in_usd
        level
        token_id
        id
        fa2_address
        token {
          fa2_address
          token_id
          editions
          name
          description
          price
          platform
          last_sale_at
          display_uri
          last_sales_price
          artist_profile {
            account
            alias
            twitter
          }
        }

        seller_profile {
          alias
        }

        buyer_profile {
          account
          alias
        }
      }
    }
  `,previousSale:Dv.gql`
    query previousPrice($token_id: String!, $contract: String!) {
      events(
        limit: 2
        where: {
          fa2_address: { _eq: $contract }
          token_id: { _eq: $token_id }
          implements: { _eq: "SALE" }
        }
        order_by: { timestamp: desc }
      ) {
        type
        token {
          fa2_address
          token_id
        }
        id
        price
        price_in_usd
        timestamp
      }
    }
  `},sC=()=>{var e=!1;xA&&(e=xA);var t=document.getElementById("Target wallet").value;return t&&(e=t),e},aC=(e,t)=>{var n;(n=e||sC())?(rA("LATEST SALES",2500),(0,Dv.request)("https://api.teztok.com/v1/graphql",rC.latestSales,{id:n}).then((e=>{const i=nC(e.events),r=[];i.sort(((e,t)=>new Date(e.timestamp)-new Date(t.timestamp))).forEach((e=>{1===e.token.editions&&(e.level="LAT-SALES",e.token.level="LAT-SALES",e.price=e.token.last_sales_price,r.push(e))}));var s=new Map;s.set("LAT-SALES",r),tC(s).then((e=>{const i=e.get("LAT-SALES").sort(((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)));s.set("LAT-SALES",i),YA(s,"teztok-nft-lat-sales",t,{targetWallet:n})}))}))):rA("NO TARGET FOR ANALYSIS",2500)},oC=(e,t)=>{var n;(n=e||sC())?(rA("LATEST PURCHASES",2500),(0,Dv.request)("https://api.teztok.com/v1/graphql",rC.latestPurchases,{id:n}).then((e=>{const i=e.events.sort(((e,t)=>new Date(e.timestamp)-new Date(t.timestamp)));i.forEach((e=>{e.level="LAT-PURCHASES",e.token.level="LAT-PURCHASES",e.token.price=e.price}));var r=new Map;r.set("LAT-PURCHASES",i),tC(r).then((e=>{const i=e.get("LAT-PURCHASES").sort(((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)));r.set("LAT-PURCHASES",i),YA(r,"teztok-nft-lat-purchases",t,{targetWallet:n})}))}))):rA("NO TARGET FOR ANALYSIS",2500)},lC=e=>Math.floor(e/864e5),cC=e=>{rA("LATEST LARGE TRANSACTIONS",2500),(0,Dv.request)("https://api.teztok.com/v1/graphql",rC.latestGeneralTransactions).then((t=>{var n=nC(t.events);const i=[],r=lC(Date.now());n.forEach((e=>{"SALE"===e.implements&&1===e.token.editions&&(e.level=lC(new Date(e.timestamp))-r,e.level>=-20&&(e.level+=" days",i.push(e)))}));let s=FA(0,n=i,n.length);tC(s).then((t=>{s=t,YA(s,"teztok-nft-lat-transact",e,0)}))}))};async function uC(e){await(0,Dv.request)("https://api.teztok.com/v1/graphql",rC.previousSale,{token_id:e.token_id,contract:e.fa2_address}).then((t=>{const n=t.events[0],i=t.events[1];if(i){const t={previousSale:{price:i.price,price_in_usd:i.price_in_usd},profit:{profit_in_crypto:n.price-i.price,profit_in_usd:n.price_in_usd-i.price_in_usd}};t&&i.price>0&&n.price>0&&(e.previousSale=t)}}))}Dv.gql`
  query {
    activityPage(filter: {}, first: 100) {
      pageInfo {
        endCursor
        hasNextPage
      }
      nodes {
        id
        entryType
        artwork {
          title
          artist {
            name
          }
        }
        amount
      }
    }
  }
`;const hC=[];NA({name:"TezTok",desc:"TezTok indexes and normalizes NFT related data on the Tezos Blockchain. The indexer aggregates and stores an event history for all tokens. Every time a new event occurs on a token, the indexer processes the event history and re-creates a token model along with listings, offers, tags, and holdings. TezTok is accountable for all the data presented, the anaver.se only loads such data and does not have its own data analysis service."},(function(){const e=[],t={livefeed:{name:"Live feed",desc:"The TezTok NFT live feed. The use of this NFT LiveFeed is at your own risk. It is your own responsibility to check if the drops displayed are legitimate. The data displayed is to the best of of the TezTok team knowledge. On examination, you will be redirected to the objkt.com website.",terminate:()=>GA("teztok-nft-livefeed")},salefeed:{name:"Live Sales",desc:"The TezTok NFT live feed, but only showing 1/1 secondary market sales.",terminate:()=>GA("teztok-sales-nft-livefeed")},latsales:{name:"Latest sales",desc:"The latest 1/1 NFT sales of the targeted wallet (latest 100 transactions).",terminate:()=>GA("teztok-nft-lat-sales")},latpurchases:{name:"Latest purchases",desc:"The wallet's latest NFT acquisitions (lastest 100 transactions).",terminate:()=>GA("teztok-nft-lat-purchases")},lattransact:{name:"Latest transactions",desc:"The 500 latest transactions above USD$100.",terminate:()=>GA("teztok-nft-lat-transact")}};NA(t.livefeed,$A,e),NA(t.lattransact,cC,e),NA(t.latsales,aC,e),NA(t.latpurchases,oC,e);const n=document.getElementById("galleryMainWindow");n.innerHTML="",n.append(UA()),e.forEach((e=>n.append(e)))}),hC,1),NA({name:"Artacle",desc:"Artacle provides transaction feeds for platforms such as Artblocks and gmStudio. It aims at providing AI-powered insights on generative art collections, including rarity scores, sales data and analytics."},(function(){const e=[],t={artaclelivefeed:{name:"Artacle 1/1",desc:"A cumulative 1/1 feed including generative art platforms and 1/1 platform SuperRare.",terminate:()=>GA("artblocks%3Agmstudio%3Abright%3Agenart%3Asuperrare%3Averse-nft-livefeed"),start:()=>KA("artblocks%3Agmstudio%3Abright%3Agenart%3Asuperrare%3Averse")},superrarelivefeed:{name:"SUPERRARE",desc:"SUPERRARE is a community aiming to revolutionize the economics of human creativity.",terminate:()=>GA("superrare-nft-livefeed"),start:()=>KA("superrare")},artblockslivefeed:{name:"Artblocks live",desc:"Live feed of Artblocks transactions.",terminate:()=>GA("artblocks-nft-livefeed"),start:()=>KA("artblocks")},verselivefeed:{name:"Verse live",desc:"Live feed of Verse transactions.",terminate:()=>GA("verse-nft-livefeed"),start:()=>KA("verse")},gmstudiolivefeed:{name:"GMstudio live",desc:"Live feed of GMstudio transactions.",terminate:()=>GA("gmstudio-nft-livefeed"),start:()=>KA("gmstudio")},brightlivefeed:{name:"Bright Moments",desc:"Live feed of Bright Moments transactions.",terminate:()=>GA("bright-nft-livefeed"),start:()=>KA("bright")},genartlivefeed:{name:"GENART live",desc:"GENART is a fully on-chain generative art platform that is operated as a DAO. ",terminate:()=>GA("genart-nft-livefeed"),start:()=>KA("genart")}};for(const n in t)NA(t[n],t[n].start,e);const n=document.getElementById("galleryMainWindow");n.innerHTML="",n.append(UA()),e.forEach((e=>n.append(e)))}),hC,1);const dC=new Audio("/sound/jetpack/jetpack_start.mp3");dC.volume=1;const pC=new Audio("/sound/jetpack/jetpack_croisiere.mp3");pC.volume=1,pC.loop=!0;var fC=!0;const mC=()=>{"undefined"!=typeof OffscreenCanvas&&(dC.play(),fC=!0,setTimeout((()=>{fC&&pC.play()}),2e3))},gC=()=>{dC.pause(),pC.pause(),fC=!1},yC=new Audio("/sound/steps/steps.mp3");yC.volume=.1;const vC=e=>{"undefined"!=typeof OffscreenCanvas&&(e?yC.play():yC.pause())},xC=[];for(let e=1;e<=4;e++)xC.push(new Audio("/sound/ball/ball"+e+".wav"));const bC=e=>{var t=xC[Math.floor(Math.random()*xC.length)];t.volume=e>=1?1:e,t.play()},wC=()=>{sT(1),Jk.clear(),_C.innerHTML=`Final score <br>\n  Valid hits: ${PC.valid}<br>\n  Invalid hits: ${PC.invalid}<br>`,WC(),setTimeout((()=>{_C.innerHTML="",_C.style.display="none"}),5e3)},_C=document.getElementById("targetInfo"),MC=()=>{VC(DC[0],Math.floor(60+30*Math.random())),bC(1),DC[0].colliding=!0};var EC,SC,TC,AC={};const CC=()=>{sT(0),EC=parseInt(aD.position.x),SC=parseInt(aD.position.y),TC=parseInt(aD.position.z),PC={valid:0,invalid:0,turns:10},AA.forEach((e=>{if(ET.hasOwnProperty(e.curator)&&ET[e.curator].hasOwnProperty("alias")){const t=[];e.gallery.forEach((e=>{"tezos"!==e.tokenType&&"IIIF"!==e.tokenType||t.push(e)})),AC[ET[e.curator].alias]=t}})),_C.style.display="block",HC(),iI(1),document.addEventListener("click",MC),RC()};var IC,LC="";function RC(){LC=kC(Object.keys(AC)),_C.innerHTML=`Current score <br>\n  Valid hits: ${PC.valid}<br>\n  Invalid hits: ${PC.invalid}<br>\n  Turns left: ${PC.turns}<br>\n  <br><br>\n  You are looking for the piece that is <strong>not</strong> by \n  <span style="background:red;font-weight:bolder;color:white;padding:2px;">${LC}</span>.`;var e=LC;if(LC&&e){for(;LC===e;)e=kC(Object.keys(AC));(IC=kC(AC[e])).id=IC.tezosMetaData.contract+JSON.stringify(IC.tezosMetaData.token_id);const t=[kC(AC[LC]),kC(AC[LC]),IC];!function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}(t);for(let e=0;e<3;e++){const n=t[e];n.position.x=`${EC+3*(e-1)}.0000`,n.position.y=`${SC}.0000`,n.position.z=TC-5+".0000",1===e&&(n.position.z=TC-7+".0000"),n.rotation.x="0.0000",n.rotation.y=1-e+".0000",n.rotation.z="0.0000",n.scale.x="1.0000",n.scale.y="1.0000",n.scale.z="1.0000"}hA(t)}}var PC={valid:0,invalid:0,turns:10};const kC=e=>e[Math.floor(Math.random()*e.length)],DC=[],NC=new Xg;let OC=new ma,UC=new po;const BC=new Wa,FC=new Wa,zC=(new Wa(0,0,1),new Jf({transparent:!0,opacity:1})),GC=new Nf(1,20,20);function HC(){new dl(16711935),new dl("blue");const e=new rc(GC,zC);qk.add(e);const t=.5*(.2*Math.random()+.6);return e.scale.setScalar(t),e.collider=new po(e.position,t),e.velocity=new Wa(0,0,0),e.mass=Math.pow(t,3)*Math.PI*4/3,e.position.copy(aD.position),e.colliding=!0,DC.push(e),e}const VC=(e,t)=>{OC.x=0,OC.y=0,NC.setFromCamera(OC,aD),e.position.copy(aD.position).addScaledVector(NC.ray.direction,3),e.velocity.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).addScaledVector(NC.ray.direction,t).multiplyScalar(.5)};function qC(e,t){const n=t.geometry.boundsTree;for(let t=0,i=DC.length;t<i;t++){const i=DC[t];if(i.colliding){const t=i.collider;i.velocity.y+=-10*e,t.center.addScaledVector(i.velocity,e),UC.copy(i.collider);let r=!1;if(n.shapecast({intersectsBounds:e=>e.intersectsSphere(UC),intersectsTriangle:e=>{e.closestPointToPoint(UC.center,BC),BC.sub(UC.center);const t=BC.length();if(t<UC.radius){const e=t-UC.radius;BC.multiplyScalar(1/t),UC.center.addScaledVector(BC,e),r=!0}},traverseBoundsOrder:e=>e.distanceToPoint(UC.center)-UC.radius}),r){BC.subVectors(UC.center,t.center).normalize(),i.velocity.reflect(BC);const n=i.velocity.dot(BC);i.velocity.addScaledVector(BC,.5*-n),i.velocity.multiplyScalar(Math.max(1-e,0)),t.center.copy(UC.center),FC.copy(UC.center).addScaledVector(BC,-UC.radius),n>1&&(bC(1/(aD.position.distanceTo(DC[0].position)/3)),Jk.children.forEach((e=>{var t;DC[0].position.distanceTo(e.position)<1.5&&(tI(e.userData.id),(t=e.userData.id)===IC.id?(PC.valid++,Jk.clear()):PC.invalid++,_C.innerHTML=`Current score <br>\n    Valid hits: ${PC.valid}<br>\n    Invalid hits: ${PC.invalid}<br>\n    Turns left: ${PC.turns}<br>\n    <br><br>\n    You are looking for the piece that is <strong>not</strong> by \n    <span style="background:red;font-weight:bolder;color:white;padding:2px;">${LC}</span>.`,PC.turns--,0===PC.turns?wC():t===IC.id&&RC())})))}}if(DC.length>1)for(let e=0,t=DC.length;e<t;e++){const n=DC[e],i=n.collider;for(let r=e+1;r<t;r++){const e=DC[r],t=e.collider;BC.subVectors(i.center,t.center);const s=BC.length()-(i.radius+t.radius);if(s<0){BC.normalize();const r=n.velocity.dot(BC),a=e.velocity.dot(BC),o=Math.max(r,.2),l=Math.max(a,.2),c=o+l,u=o/c,h=l/c;i.center.addScaledVector(BC,-u*s),t.center.addScaledVector(BC,h*s);const d=new Wa;d.addScaledVector(BC,-r).addScaledVector(BC,a);const p=d.length(),f=n.mass,m=e.mass;let g,y;const v=.5;d.dot(n.velocity)>d.dot(e.velocity)?(g=v*p*(f-m)/(f+m),y=v*p*2*f/(f+m),g-=p):(g=v*p*2*m/(f+m),y=v*p*(m-f)/(f+m),y-=p),d.normalize(),n.velocity.addScaledVector(d,g),e.velocity.addScaledVector(d,y),FC.copy(i.center).addScaledVector(BC,-i.radius)}}n.position.copy(i.center)}}}const WC=()=>{for(let e=0;e<DC.length;e++){let t=DC[e];DC.splice(e,1),e--,t.material.dispose(),t.geometry.dispose(),qk.remove(t)}},jC=()=>{VC(DC[0],Math.floor(60+30*Math.random())),bC(1),DC[0].colliding=!0};var XC,YC,JC=0,KC=0;const ZC=()=>{sT(0),KC=1,WC(),rA("BLUDGEBALL STARTED"),setTimeout((()=>{rA("")}),1500),HC(),XC=QC(),YC=XC[JC],eI(YC),document.addEventListener("click",jC),$C.style.display="block"},QC=()=>{var e=[];return Jk.children.forEach((t=>{t.userData.hasOwnProperty("id")&&e.push(t.userData.id)})),function(e){let t,n=e.length;for(;0!=n;)t=Math.floor(Math.random()*n),n--,[e[n],e[t]]=[e[t],e[n]];return e}(e)},$C=document.getElementById("targetInfo"),eI=e=>{if(e){var t=RL[e];let n=["HIT","GOOD JOB","THAT'S RIGHT"];if(t){let e="";t.hasOwnProperty("creators")&&t.creators[0]&&ET.hasOwnProperty(t.creators[0].creator_address)&&ET[t.creators[0].creator_address].alias&&(e=" by "+ET[t.creators[0].creator_address].alias);let i=parseInt(JC+1)+"/"+XC.length+" ";rA(n[Math.floor(Math.random()*n.length)],2e3),$C.innerText=e?i+t.name+e:i+t.name}}else $C.innerText="Practice Mode"},tI=e=>{e===YC&&(++JC<XC.length&&(YC=XC[JC],eI(YC)),JC===XC.length&&($C.innerText="",$C.style.display="none",rA("YOU WIN",2500),WC()))},nI=()=>{$C.innerText="",$C.style.display="none",rA("BLUDGE - OVER",2e3),WC(),KC=0,sT(1)},iI=e=>KC=e,rI=[],sI={bludgeball:{name:"BludgeBall",desc:"Ever dreamed of throwing a ball? Get the unique opportunity to throw a ball at stuff. Click to throw, click again to have the ball come back to you!",terminate:nI},guessgame:{name:"Guess the intruder",desc:"Given a name and three pieces, guess which one is not from the said artist.",terminate:wC}};function aI(){const e=[];NA({name:"BludgeBall",desc:"Throw a ball around! Hit the frames suspended in your current location in a random order, or just practice if you're not in the mood.",terminate:nI},ZC,e);const t=document.getElementById("galleryMainWindow");t.innerHTML="",e.forEach((e=>t.append(e)))}function oI(){const e=[];NA({name:"Guess the Seminar artist",desc:"Given a name and three pieces, guess which one is not from the said artist.",terminate:wC},CC,e);const t=document.getElementById("galleryMainWindow");t.innerHTML="",e.forEach((e=>t.append(e)))}setTimeout((()=>{NA(sI.bludgeball,aI,rI,1),NA(sI.guessgame,oI,rI,1)}),2e3);const lI=/^::tezos-storage-pointer(\[.*\]){0,1}\{.*\}$/,cI=/\{(.*)\}/,uI=/([a-zA-Z0-9\-\_]+)="([^"]*)"/g,hI=/([a-zA-Z0-9\-\_]+)=([^"\}\s]+)/g,dI=Dv.gql`
  query Articles(
    $filters: ArticleFilter
    $sort: ArticleSortInput
    $skip: Int
    $take: Int
  ) {
    articles(filters: $filters, sort: $sort, skip: $skip, take: $take) {
      ...ArticleInfos
      __typename
    }
  }

  fragment ArticleInfos on Article {
    id
    createdAt
    slug
    title
    flag
    metadata
    description
    tags
    thumbnailUri
    thumbnailMedia {
      ...MediaImage
      __typename
    }
    metadataLocked
    author {
      ...UserBadgeInfos
      __typename
    }
    __typename
  }

  fragment MediaImage on MediaImage {
    cid
    width
    height
    placeholder
    mimeType
    metadata
    processed
    __typename
  }

  fragment UserBadgeInfos on User {
    id
    type
    name
    avatarUri
    avatarMedia {
      ...MediaImage
      __typename
    }
    flag
    __typename
  }
`,pI=(window.localStorage,window.localStorage);var fI=0;document.getElementById("tokens");const mI=document.createElement("div"),gI=document.createElement("div");mI.id="galleryLeftMenu",mI.style.borderRight="1px solid black",gI.id="galleryMainWindow",gI.style.overflow="hidden auto";const yI={"Loaded collection":{},IIIF:{},"Loaded creations":{},"Local galleries":{},"Contract import":{},"Gallery builder":{},"Public galleries":{},Seminars:{},"Data visualisation":{},Construction:{},"Objkt Curated":{},"fx(text)":{},"Mini games":{}},vI=e=>{var t=JSON.parse(pI.getItem("localGalleries"));t&&t.length>0&&t.forEach((t=>{const n=document.createElement("div");n.className="galLoaderButton";const i=document.createElement("div");i.style.border="1px dashed cyan",i.style.padding="10px",i.innerText=t.name,i.addEventListener("click",(()=>{bk(),ML(t)})),n.appendChild(i),n.appendChild(IL(t)),n.appendChild(AL(t,n)),e.appendChild(n)})),yI["Local galleries"].DOM.content=e},xI=e=>{e.innerHTML="",(Nn>=20||Nn<=6)&&(e.style.color="white");const t=document.createElement("div");LP.room.name&&(t.innerHTML=`\n<div id="galleryCreator">\n<div id="galleryCreatorForm">\n \n  <div id="galleryMetaData">\n  <b>Save your current gallery</b><br>\n  <br>Room ID: ${LP.room.name}\n  <br>Skybox ID: ${LP.skybox.name}\n  <br>Number of pieces: ${Jk.children.length}\n  </div>\n  \n</div>\n</div><br>`);const n=document.createElement("input"),i=document.createElement("div");Jk.children.length>0&&Object.keys(LP.room).length>0&&Object.keys(LP.skybox).length>0?(i.id="saveGallery",i.innerText="Save Gallery",i.addEventListener("click",LL),n.type="text",n.value="Enter a gallery name",n.required=!0,n.minlength=4,n.maxlength=40,n.id="galleryName",n.addEventListener("focusin",(()=>Lk(1))),n.addEventListener("focusout",(()=>Lk(0))),t.appendChild(n)):(i.id="saveGallery",i.innerHTML="<span>Choose an indexed room <br> and an indexed skybox to <br> get started.</span>"),t.appendChild(i);const r=document.createElement("div");r.style="padding: 5%; border: 1px dashed cyan;margin:2%;";const s=document.createElement("button");s.innerText="Use current position as starting point",s.addEventListener("click",hD);const a=document.createElement("div");a.id="currentStartingPointDiv",a.innerText="Current starting point:"+JSON.stringify(LP.startPoint),r.append(s,a);const o=document.createElement("div");Jk.children.forEach((e=>{if(RL.hasOwnProperty(e.userData.id)){const t=document.createElement("div");t.style="margin:10px;border:1px dashed cyan;padding:5px;";const n=document.createElement("div");n.style="display:flex;justify-content:space-between;";const i=RL[e.userData.id],r=new Image;r.style="max-width:100px;max-height:100px",r.src=i.img,n.append(r);const s=document.createElement("div"),a=document.createElement("button");a.innerText="remove",a.style="height:30px;margin-left: 5px;",a.addEventListener("click",(()=>{Jk.children.forEach((t=>{e.userData.id===t.userData.id&&(Jk.remove(t),Mw(),n.remove())}))})),s.style="display:flex;align-items: center;";let l=["x","y","z"];if(["position","rotation","scale"].forEach((t=>{const n=document.createElement("div");n.style.marginLeft="15px";const i=document.createElement("div");i.innerText=t,n.append(i),l.forEach((i=>{const r=document.createElement("div"),s=document.createElement("div");s.innerText=i,s.style.padding="3px";const a=document.createElement("input");a.style.width="60px",a.type="number",a.value=e[t][i],a.step=.01,a.addEventListener("change",(()=>e[t][i]=a.value)),r.style.display="flex",r.append(s,a),n.append(r)})),s.append(n)})),s.append(a),n.append(s),t.append(n),o.append(t),e.userData.hasOwnProperty("note")){const n=document.createElement("div"),r=document.createElement("textarea");r.style="width: calc(100% - 20px);margin: 5px;",r.value=e.userData.note,r.addEventListener("focusin",(()=>Lk(1))),r.addEventListener("focusout",(()=>Lk(0))),r.addEventListener("change",(()=>{e.userData.note=r.value,i.note=r.value})),n.append(r),t.append(n)}}})),t.style="padding:5%;border:1px dashed cyan;",e.append(t,r,o);const l=document.createElement("div"),c=document.createElement("div");c.innerHTML="<b>Import a gallery.json file<br> from your local device.</b><br></br>";const u=document.createElement("input");u.style.border="1px dashed cyan",u.style.padding="10px",u.style.margin="10px",u.style.backgroundColor="white",u.type="file",u.addEventListener("change",(e=>{AI.postMessage({type:"local",path:e.target.files[0]}),bk(),rA("GALLERY LOADED",2e3)})),e.addEventListener("dragover",(e=>e.preventDefault())),e.addEventListener("drop",(e=>{e.preventDefault(),e.dataTransfer.items&&([...e.dataTransfer.items].forEach(((e,t)=>{if("file"===e.kind){const t=e.getAsFile();AI.postMessage({type:"local",path:t})}})),bk(),rA("GALLERY LOADED",2e3))})),l.appendChild(c),l.appendChild(u),l.style="padding:5%;border:1px dashed cyan;margin-top:50px",e.appendChild(l),yI["Gallery builder"].DOM.content=e};var bI="Loaded collection";const wI=()=>{(Nn<=6||Nn>=20)&&(mI.style.color="white"),DA.length>0&&(yI["Active services"]={});for(const e in yI){yI[e].DOM={},yI[e].DOM.title=document.createElement("div"),yI[e].DOM.content=document.createElement("div");const t=document.createElement("div");t.innerText=e,t.id=e,t.className="gallerieMenuButton",t.addEventListener("click",(()=>{$T(),bI=e;var n=document.getElementsByClassName("gallerieMenuButton");for(let e=0;e<n.length;e++)n[e].style.backgroundColor="transparent",n[e].style.color="black",(Nn<=6||Nn>=20)&&(n[e].style.color="white");t.style.backgroundColor="rgba(0,0,0,.8)",t.style.color="white";let i="";(Nn<=6||Nn>=20)&&(i='style="background-color:#313131;color:white;"'),gI.innerHTML=`<div ${i} class="helperPanel">${fk[e]}</div>`,gI.appendChild(yI[e].DOM.content)})),mI.appendChild(t)}const t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");r.className="artistList";const s=document.createElement("div");s.className="artistList",document.createElement("div").className="artistList";const a=document.createElement("div");a.id="galleryBuilder";const o=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div");c.className="serviceList",document.createElement("div").className="artistList",document.createElement("div").className="artistList",yI.Seminars.DOM.content=SA;const u=document.createElement("div");u.style="display:flex;margin:10px;    flex-direction: column;align-items: flex-start;";const h=document.createElement("label");h.for="geomChoice",h.innerText="Choose a geometry";const d=document.createElement("input");d.id="geomChoice";var p=[];const f=document.createElement("div");f.style="display:flex;margin:10px;    flex-direction: column;align-items: flex-start;",d.addEventListener("change",(()=>{f.innerHTML="",p=[],g[d.value].forEach((e=>{const t=document.createElement("input");t.id=e;const n=document.createElement("label");n.for=e,n.innerText=e,t.type="number",t.placeholder=e,f.append(n,t),p.push(t)}));const t=document.createElement("button");t.innerText="Load element",t.addEventListener("click",(()=>{const t=p.map((e=>parseFloat(e.value)));(t=>{const n=new Yh;n.position.y+=.5,n.position.z-=4,t.forEach((t=>{const i=new e[t.geometry.type](...t.geometry.args),r=new rc(i,yP.ghost),s=new $p(i),a=new ap(s,yP.blackLineLone);t.tokenType="block",n.userData=t,n.userData.tokenType="block",n.add(r,a)})),HL(n),Kk.add(n)})([{geometry:{type:d.value,args:t}}]),bk()})),f.append(t)}));const m=document.createElement("datalist");m.id="geomList";const g={BoxGeometry:["width","height","depth"],PlaneGeometry:["width","height"],CapsuleGeometry:["radius","length","capSegments","radialSegments"],CircleGeometry:["radius","segments","thetaStart","thetaLength"],ConeGeometry:["radius","height","radialSegments","heightSegments","openEnded","thetaStart","thetaLength"],CylinderGeometry:["radiusTop","radiusBottom","height","radialSegments","heightSegments","openEnded","thetaStart","thetaLength"],DodecahedronGeometry:["radius","detail"],RingGeometry:["innerRadius","outerRadius","thetaSegments","phiSegments","thetaStart","thetaLength"],SphereGeometry:["radius","widthSegments","heightSegments","phiStart","phiLength","thetaStart","thetaLength"],TorusGeometry:["radius","tube","radialSegments","tubularSegments","arc"]};for(const e in g){const t=document.createElement("option");t.value=e,m.append(t)}u.append(h,d,m,f),d.setAttribute("list","geomList"),yI.Construction.DOM.content=u,yI.IIIF.DOM.content=yL();const y=document.createElement("ul");function v(e,t){const n=document.createElement("li");n.style="list-style-type:none;\n    padding:5px;    \n    margin-top: 15px;\n    display: flex;\n    flex-direction: column;\n    border: 1px solid gray;\n    background: rgba(50,50,50,0.1);\n    border-radius: 4px;";const i=document.createElement("input");i.type="text",i.placeholder=t,i.addEventListener("focusin",(()=>Lk(1))),i.addEventListener("focusout",(()=>Lk(0))),[].push(i),n.append(i);const r=document.createElement("button");r.innerText=`Load ${e} indexed asset`,r.addEventListener("click",(()=>dA({native:!1,blockchain:e.toLowerCase(),id:i.value}))),n.append(r),y.append(n)}y.style="padding:10px;",v("Tezos","contract/id"),v("Solana","contract");const x=document.createElement("div");x.className="artistList",x.id="importedContractContent";const b=document.createElement("div"),w=JSON.parse(pI.getItem("importedContracts"));if(w)for(const e in w){const t=document.createElement("div");t.id=e,t.style="border:1px solid gray;padding:5px;margin:5px;background:white;display: flex;justify-content: space-between;";const n=w[e],i=document.createElement("div");i.innerText=`${n.name} - ${n.type}`,i.style="font-size:12px;cursor:pointer;font-family: monospace;",i.addEventListener("click",(()=>{i.innerText=`Loading ${n.name}`,dA(asset)}));const r=document.createElement("div");r.innerText="x",r.style="font-size:10px; padding:2px;cursor:pointer;font-family: monospace;border:1px solid black",r.addEventListener("click",(()=>{t.remove(),delete w[e],pI.setItem("importedContracts",JSON.stringify(w))})),t.append(i,r),b.append(t)}if(n.append(y,b,x),yI["Contract import"].DOM.content=n,DA.length>0&&(DA.forEach((e=>t.appendChild(e))),yI["Active services"].DOM.content=t),rI.forEach((e=>i.appendChild(e))),yI["Mini games"].DOM.content=i,hC.length>0&&(hC.forEach((e=>c.appendChild(e))),yI["Data visualisation"].DOM.content=c),_T.length>0){l.style="display:grid;position:relative;grid-template-columns: 50% 50%;width:200%";const e=document.createElement("div");e.id="list",e.className="artistList";const t=document.createElement("div");t.id="collection",(Nn<=6||Nn>=20)&&(t.style.color="white"),_T.forEach((t=>e.appendChild(t))),l.append(e,t),yI["Loaded creations"].DOM.content=l}else document.getElementById("Loaded creations").style.display="none";vI(r),xI(a),EI.forEach((e=>s.append(e))),yI["Public galleries"].DOM.content=s,o.style="display:grid;position:relative;grid-template-columns: 50% 50%;width:200%;height:100%";const _=document.createElement("div");_.id="list";const M=document.createElement("div");M.id="collection",_.className="artistList",(Nn<=6||Nn>=20)&&(M.style.color="white");for(const e in PL)_.appendChild(PL[e]);o.append(_,M),yI["Loaded collection"].DOM.content=o;const E=document.createElement("div");E.className="artistList",E.style="display:flex;flex-direction: column;";const S=document.createElement("div");S.style.padding="20px";const T=document.createElement("input");T.placehoder="Objkt gallery search",T.className="gloaderTextInput",T.addEventListener("focusin",(()=>Lk(1))),T.addEventListener("focusout",(()=>Lk(0)));const A=document.createElement("div");A.className="artistList",A.id="objktCuratedDisplay",GT.forEach((e=>A.append(e)));const C=document.createElement("button");C.innerText="Search",C.addEventListener("click",(()=>{return e=T.value,(0,Dv.request)("https://data.objkt.com/v3/graphql",Dv.gql`
      query getObjktCuration($name: String) {
        gallery(
          where: {
            registry: { name: { _eq: "objkt" } }
            items: { _gt: 0 }
            name: { _iregex: $name }
          }
          order_by: { updated_at: desc }
          limit: 10
        ) {
          gallery_id
          name
          description
          slug
          logo
          items
          tokens {
            token {
              content_rating
            }
          }
          curators {
            curator {
              address
              alias
              logo
              twitter
            }
          }
        }
      }
    `,{name:e}).then((e=>VT(e)));var e})),S.append(T,C),E.append(S,A),yI["Objkt Curated"].DOM.content=E;const I=document.createElement("div");I.className="artistList",I.style="display:flex;flex-direction: column;";const L=document.createElement("div"),R=document.createElement("input");R.placehoder="article search",R.className="gloaderTextInput",R.addEventListener("focusin",(()=>Lk(1))),R.addEventListener("focusout",(()=>Lk(0)));const P=document.createElement("div");P.style="display: flex;flex-direction: column;",P.id="fxtextDisplay";const k=document.createElement("button");k.innerText="Search",k.addEventListener("click",(()=>{return e=R.value,Nv()("https://api.fxhash.xyz/graphql",dI,{skip:0,take:50,sort:{relevance:"DESC"},filters:{searchQuery_eq:e,flag_in:["CLEAN","NONE"]}}).then((e=>{const t=document.getElementById("fxtextDisplay");t.innerHTML="",t.style.marginTop="20px",e.articles.forEach((e=>{const n=document.createElement("div");n.style.cursor="pointer",n.innerHTML=`<div style=" border-top: 1px solid black;display:flex; margin-left:10px;margin-right:10px;">\n      <div style="padding:4px";><img width=120 height=120 style="width=120px;height=120px;" src="https://media.fxhash.xyz/w_768/${e.thumbnailUri.replace("ipfs://","")}"></div>\n        <div style="display:flex;flex-direction: column;margin: 10px;">\n            <div><h3>${e.title}</h3></div>\n            <div style="font-size:small">${e.description}</div>\n        </div>\n      </div>`,n.addEventListener("click",(()=>{fetch("https://gateway.fxhash.xyz/ipfs/"+e.metadata.artifactUri.replace("ipfs://","")).then((e=>{const t=e.body.getReader();return new ReadableStream({start:e=>function n(){return t.read().then((({done:t,value:i})=>{if(!t)return e.enqueue(i),n();e.close()}))}()})})).then((e=>new Response(e))).then((e=>e.blob())).then((e=>e.text())).then((e=>{const t=function(e){const t=[],n=(e=e.toString()).split("\n");for(let e=0;e<n.length;e++){const i=n[e];if(lI.test(i)){const e=i.match(cI)[1],n={};let r=Array.from(e.matchAll(uI));r=r.concat(Array.from(e.matchAll(hI)));for(const e of r)n[e[1]]=e[2];t.push(n)}}return t}(e),n=[];if(t.forEach((e=>{e.path.indexOf("token_metadata::")>-1&&(e.id=e.path.replace("token_metadata::",""),n.push(e))})),n.length>0){const e=document.getElementById("galleryMainWindow"),t="Contract import";let i="";(Nn<=6||Nn>=20)&&(i='style="background-color:#313131;color:white;"'),e.innerHTML=`<div ${i} class="helperPanel">${fk[t]}</div>`,e.appendChild(yI[t].DOM.content);for(let e=0;e<n.length;e++)setTimeout((()=>{n[e]}),50*e)}}))})),t.append(n)}))}));var e})),L.append(R,k),I.append(L,P),yI["fx(text)"].DOM.content=I,fI=1},_I=()=>{const e=document.getElementById("tokens");e.innerHTML="",e.style="overflow:hidden hidden;display:grid;justify-content: left;grid-template-columns: 200px 2fr;width:100%",e.append(mI,gI),ak&&(mI.style.left="-300px",mI.style.animation="0.2s linear 0s 1 normal forwards running loaderSlideRight",gI.style.top="100%",gI.style.animation="0.2s linear 0s 1 normal forwards running loaderSlideTop"),fI?(()=>{const e=document.createElement("div");e.id="galleryBuilder",xI(e);const t=document.createElement("div");t.className="artistList",vI(t);const n=document.createElement("div");n.style="display:grid;position:relative;grid-template-columns: 50% 50%;width:200%;height:100%";const i=document.createElement("div");i.id="list",i.className="artistList";const r=document.createElement("div");r.id="collection",(Nn<=6||Nn>=20)&&(r.style.color="white");for(const e in PL)i.append(PL[e]);n.append(i,r),yI["Loaded collection"].DOM.content=n})():wI();let t="";(Nn<=6||Nn>=20)&&(t='style="background-color:#313131;color:white;"'),gI.innerHTML=`<div ${t} class="helperPanel">${fk[bI]}</div>`,gI.appendChild(yI[bI].DOM.content)},MI={KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi55:!0,KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi56:!0,KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi57:!0,KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi58:!0,KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi59:!0,KT1NesjBBrgx1iDneL4FVDVcgjQei2ZPo2wi60:!0},EI=[],SI=window.location.search,TI=new URLSearchParams(SI),AI=new Worker(new URL(n.p+n.u(244),n.b)),CI=()=>{const e=[];return II.forEach((t=>{MI.hasOwnProperty(t.contract+t.id)&&e.push(t)})),e[parseInt(Math.random()*e.length)]},II=[],LI=window.localStorage;AI.onmessage=e=>{switch(e.data.type){case"remote":!function(e){var t=0;const n=e.data;n.chain="tezos",n.token_id=n.id,II.push(n);const i=XI(n,"loadGallery");EI.push(i),TI.get("gallery")&&TI.get("galc")===n.contract&&TI.get("galid")===n.id&&(t=n),t&&(ML(t),lk())}(e);break;case"local":!function(e){var t=JSON.parse(LI.getItem("localGalleries"));t?(t.push(e.data),LI.setItem("localGalleries",JSON.stringify(t))):LI.setItem("localGalleries",JSON.stringify([e.data])),bk(),bk()}(e);break;case"gallicarama":UI(e.data)}t["Galleries Natives"].fin=window.performance.now()};const RI={name:"GallicaPix",chain:"IIIF",url:"https://gallicapix.bnf.fr/",display_uri:"https://gallica.bnf.fr/iiif/ark:/12148/bpt6k6439443x/f302/1175.7333333333333,514.3833333333333,1867.9463333333335,1837.0833333333335/200,200/0/native"},PI={name:"Gallica by URL",url:"https://gallica.bnf.fr",chain:"IIIF",display_uri:"https://gallica.bnf.fr/iiif/ark:/12148/btv1b53164599c/f1/4574.62311557789,2773.2381909547735,2927.7587939698496,2992.820100502513/200,200/0/native"},kI={name:"Gallicarama",url:"https://gallicarama.bnf.fr/",chain:"IIIF",display_uri:"https://gallica.bnf.fr/iiif/ark:/12148/btv1b532006577/f41/94.70299999999997,79.87,2069.774,1859.83/200,200/0/native"},DI=(e,t,n)=>{e.source="Gallica";var i=!1;n&&(i=Object.assign({},n));const r=e.region.split(","),s=parseInt(r[2])/parseInt(r[3]);parseInt(1400*s),e.size=",1400";const a=`https://gallica.bnf.fr/iiif/${e.ark}/${e.vue}/${e.region}/${e.size}/${e.rotation}/${e.quality}`;if(t)OI(e,a,t,i);else{var o="";i&&(o=`${i.name.length>20?i.name.substring(0,20)+"":i.name} ${i.artist.length>20?i.artist.substring(0,20)+"":i.artist} `),o+=e.vue;const t=200,n=`${parseInt(t*s)},${t}`,r={IIIFdata:e,link:a,item:i,desc:o,display_uri:`https://gallica.bnf.fr/iiif/${e.ark}/${e.vue}/${e.region}/${n}/${e.rotation}/${e.quality}`,chain:"IIIF"};document.getElementById("importedIIIFContent").append(XI(r,"loadIIIFAsset"))}};let NI=0;const OI=(e,t,n,i)=>{NI++;let r=e.ark+e.vue+"|"+NI;if(i){i.gallica=!0;const s=`https://gallica.bnf.fr/${e.ark}/${e.vue}.item`;i.permalink=s,i.IIIFdata=e,RL[r]=i,KR(t,{id:r},"IIIF",n)}else fetch(`https://gallica.bnf.fr/iiif/${e.ark}/manifest.json`).then((e=>e.json())).then((i=>{const s={description:"",artist:""};i.metadata.forEach((e=>{switch(e.label){case"Title":s.name=e.value,s.title=e.value;break;case"Date":s.year=e.value;case"Language":case"ShelfMark":"string"==typeof e.value?s.description+=`${e.value} | `:s.description+=`${e.value[0]["@value"]} | `}})),s.gallica=!0;const a=`https://gallica.bnf.fr/${e.ark}/${e.vue}.item`;s.permalink=a,s.IIIFdata=e,RL[r]=s,KR(t,{id:r},"IIIF",n)}))},UI=e=>{const t=document.getElementById("gallicaRamaImports");e.chain="IIIF",t.append(XI(e,"gallicaramaProject"))},BI=window.localStorage;BI.getItem("favoriteGalleries")||BI.setItem("favoriteGalleries","{}");const FI=(e,t,n)=>{const i=document.createElement("div");i.id="iterationMenu";const r=document.getElementById("tokens");i.style.animation="iterationSlideLeft .15s linear forwards";const s=document.createElement("div");s.id="iterationClose",s.innerText="close",s.addEventListener("click",(()=>$T()));const a=new Image;a.loading="lazy",a.className="thumbnail",a.setAttribute("data-src","/loading.gif"),a.style.imageRendering="auto",a.setAttribute("data-src","/loading.gif"),a.onerror=e=>a.src="/notfound.png",a.src=t,a.style="cursor:pointer;margin:unset";const o=tA("Enter gallery");o.addEventListener("click",n),a.addEventListener("click",n);const l=document.createElement("div");if(l.style="    \n    width: 100%;\n    height: calc(100% - 40px);\n    margin-top: 35px;\n    overflow-y: auto;\n    display: inline-flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    align-items: center;",e.hasOwnProperty("name")){const t=document.createElement("div");t.innerText=e.name,t.style="\n      padding: 2%;\n      width: 90%;\n      margin-bottom: 10px;\n      background: red;\n      color: white;\n      text-align: center;\n      border-radius: 5px;\n      ",l.append(t)}l.append(a),l.append(o);const c=tA("Add to favorites");JSON.parse(BI.getItem("favoriteGalleries")).hasOwnProperty(e.contract+e.token_id)&&(c.innerText="Remove from favorites"),c.addEventListener("click",(()=>{const t=JSON.parse(BI.getItem("favoriteGalleries")),n=e.contract+e.token_id,i=document.getElementById("artNameBand"+n);t.hasOwnProperty(n)?(delete t[n],c.innerText="Add to favorites",i.style=""):(t[n]=!0,i.style="background:red;color:white;",c.innerText="Remove from favorites"),BI.setItem("favoriteGalleries",JSON.stringify(t))})),l.append(c);let u=`https://anaver.se/?gallery=1&galc=${e.contract}&galid=${e.id}`;e.sem&&(u=e.hasOwnProperty("targetGallery")?`https://anaver.se/?videoguide=1&gallery=1&vgc=${e.contract}&vgid=${e.token_id}&galc=${e.gallery_contract}&galid=${e.gallery_token_id}`:`https://anaver.se/?videoguide=1&vgc=${e.contract}&vgid=${e.token_id}`);const h=tA("Copy access link");h.addEventListener("click",(()=>{h.innerText="Copied!",navigator.clipboard.writeText(u),setTimeout((()=>{h.innerText="Copy access link"}),1300)}));const d=tA("Display QR code");d.addEventListener("click",(()=>{return e=u,EA.toDataURL(e).then((e=>{const t=new Image(200);t.src=e;const n=document.createElement("div");n.style="display:flex;\n        z-index:200;\n        background:rgba(20,20,20,0.9);\n        position:absolute;\n        width:100%;\n        height:100%;\n        align-items: center;\n        justify-content: center;\n        cursor:pointer;",n.append(t),document.body.append(n),n.addEventListener("click",(()=>n.remove()))})).catch((e=>{console.error(e)}));var e})),l.append(h,d);const p=document.createElement("div");if(p.className="iterationBox","tezos"===e.chain){const t=tA("Inspect on objkt.com");t.addEventListener("click",(()=>window.open(e.url,"_blank"))),l.append(t);const n=document.createElement("div");if(n.className="iterationBox",n.style="display:flex;flex-direction: column;",e.hasOwnProperty("item")){for(let t=0;t<e.item.creators.length;t++){t>0&&n.append(document.createElement("hr"));const i=e.item.creators[t];n.append(GI(i.holder))}l.append(n),p.innerText=e.item.description}else p.innerText=e.description;if(l.append(p),e.sem){const t=document.createElement("div");var f;t.className="iterationBox";var m=[];e.tags.forEach((e=>{0===e.tag.name.indexOf("pres://")&&(f=e.tag.name.replace("pres://","")),0===e.tag.name.indexOf("pan://")&&m.push(e.tag.name.replace("pan://",""))})),oA.hasOwnProperty(f)?t.append(GI(ET[f])):AT([f,...m]).then((()=>{const e=GI(ET[f]);e.style.border="2px solid red",e.style.borderRadius="4px",t.append(e),m.forEach((e=>{t.append(document.createElement("hr")),t.append(GI(ET[e]))}))})),l.append(t)}if(e.hasOwnProperty("curation")){const t=tA("Generate Gallery");t.addEventListener("click",(()=>{bk();const t=CI();((e,t)=>{(0,Dv.request)("https://data.objkt.com/v3/graphql",HT(e)).then((e=>{const n=e.gallery[0].tokens,i=Object.assign({},t),r=[];for(let e=0;e<i.gallery.length;e++){const t=i.gallery[e];"objkt"===t.tokenType||"tezos"===t.tokenType?e<n.length&&(t.objktMetaData={contract:n[e].token.fa_contract,token_id:n[e].token.token_id},r.push(t)):"block"===t.tokenType&&r.push(t)}i.gallery=r,ML(i)}))})(e.gallery_id,t)}));const n=tA("Load assets in contract import");n.addEventListener("click",(()=>{var t;$T(),t=e.gallery_id,(0,Dv.request)("https://data.objkt.com/v3/graphql",HT(t)).then((e=>{const t=e.gallery[0].tokens,n=document.getElementById("galleryMainWindow"),i="Contract import";let r="";(Nn<=6||Nn>=20)&&(r='style="background-color:#313131;color:white;"'),n.innerHTML=`<div ${r} class="helperPanel">${fk[i]}</div>`,n.appendChild(yI[i].DOM.content);const s=t.length<=20?t.length:20;for(let e=0;e<s;e++)setTimeout((()=>{const n=t[e].token;n.contract=n.fa_contract,n.chain="tezos",n.artist=n.creators[0].holder.alias;const i=XI(n,"loadItem");document.getElementById("importedContractContent").append(i)}),300*e)}))})),h.remove(),d.remove(),c.remove(),o.remove(),p.remove(),p.innerHTML=`\n        ${e.tokens.length} pieces in this curation.\n        <br><hr>\n\n        ${e.description}\n        `;const i=document.createElement("div");i.className="iterationBox",i.style="display:flex;flex-direction: column;";for(let t=0;t<e.curators.length;t++){t>0&&i.append(document.createElement("hr"));const n=e.curators[t].curator;i.append(GI(n))}l.append(t,n,i,p)}}i.append(s,l),r.append(i)},zI=(e,t,n)=>{document.getElementById("iterationMenu")?($T(),e&&setTimeout((()=>{FI(e,t,n)}),250)):FI(e,t,n)};function GI(e){const t=document.createElement("div");t.style="display:flex;padding:2px;";const n=document.createElement("div"),i=document.createElement("div");i.style="margin-right: 10px;";const r=document.createElement("img");return r.className="profilePic",r.src=e.logo?e.logo:"/loading.gif",r.loading="lazy",r.setAttribute("data-src","/loading.gif"),r.onerror=()=>r.remove(),i.append(r),t.append(i),e.alias&&(n.innerHTML+=`<strong>Alias:</strong> ${e.alias}<br>`),n.innerHTML+=`\n    <strong>Address:</strong> <a style="word-break: break-all;" href="https://objkt.com/users/${e.address}/owned" target="_blank">${e.address}</a>`,e.twitter&&(n.innerHTML+=`<br><strong>Twitter:</strong> <a href="${e.twitter}" target="_blank">@${e.twitter.replace("https://twitter.com/","")}</a>`),t.append(n),t}const HI=window.localStorage;HI.getItem("favoritePaintings")||HI.setItem("favoritePaintings","{}");const VI=(e,t,n)=>{const i=document.createElement("div");i.id="iterationMenu";const r=document.getElementById("tokens");i.style.animation="iterationSlideLeft .15s linear forwards";const s=document.createElement("div");s.id="iterationClose",s.innerText="close",s.addEventListener("click",(()=>$T()));const a=new Image;a.loading="lazy",a.className="thumbnail",a.setAttribute("data-src","/loading.gif"),a.style.imageRendering="auto",a.setAttribute("data-src","/loading.gif"),a.onerror=e=>a.src="/notfound.png",a.src=t,a.style="cursor:pointer;margin:unset";const o=tA("Load in Anaverse");o.addEventListener("click",n),a.addEventListener("click",n);const l=document.createElement("div");if(l.style="    \n  width: 100%;\n  height: calc(100% - 40px);\n  margin-top: 35px;\n  overflow-y: auto;\n  display: inline-flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  align-items: center;",e.hasOwnProperty("name")){const t=document.createElement("div");t.innerText=e.name,t.style="\n    padding: 2%;\n    width: 90%;\n    margin-bottom: 10px;\n    background: red;\n    color: white;\n    text-align: center;\n    border-radius: 5px;\n    ",l.append(t)}l.append(a,o);const c=tA("Add to favorites");JSON.parse(HI.getItem("favoritePaintings")).hasOwnProperty(e.contract+e.token_id)&&(c.innerText="Remove from favorites"),c.addEventListener("click",(()=>{const t=JSON.parse(HI.getItem("favoritePaintings")),n=e.contract+e.token_id,i=document.getElementById("artNameBand"+n);t.hasOwnProperty(n)?(delete t[n],c.innerText="Add to favorites",i.style=""):(t[n]=!0,i.style="background:red;color:white;",c.innerText="Remove from favorites"),HI.setItem("favoritePaintings",JSON.stringify(t))})),l.append(c);const u=document.createElement("div");switch(u.className="iterationBox",e.chain){case"IIIF":if("Gallica"===e.IIIFdata.source){const t=tA("Inspect on Gallica");t.addEventListener("click",(()=>window.open(`https://gallica.bnf.fr/${e.IIIFdata.ark}/${e.IIIFdata.vue}.item`,"_blank"))),l.append(t),u.innerText=e.item.name+" "+e.item.description,l.append(u)}break;case"tezos":const t=tA("Inspect on objkt.com");t.addEventListener("click",(()=>window.open(e.url,"_blank"))),l.append(t);const n=document.createElement("div");n.className="iterationBox",n.style="display:flex;flex-direction: column;";for(let t=0;t<e.creators.length;t++){t>0&&n.append(document.createElement("hr"));const i=e.creators[t];n.append(WI(i.holder))}l.append(n),u.innerText=e.description,l.append(u);break;case"solana":const i=tA("Inspect on Solana FM");i.addEventListener("click",(()=>window.open(e.url,"_blank"))),l.append(i)}i.append(s,l),r.append(i)},qI=(e,t,n)=>{document.getElementById("iterationMenu")?($T(),e&&setTimeout((()=>{VI(e,t,n)}),250)):VI(e,t,n)};function WI(e){const t=document.createElement("div");t.style="display:flex";const n=document.createElement("div"),i=document.createElement("div");i.style="margin-right: 10px;";const r=document.createElement("img");return r.className="profilePic",r.src=e.logo?e.logo:"/loading.gif",r.loading="lazy",r.setAttribute("data-src","/loading.gif"),r.onerror=()=>r.remove(),i.append(r),t.append(i),e.alias&&(n.innerHTML+=`<strong>Alias:</strong> ${e.alias}<br>`),n.innerHTML+=`\n    <strong>Address:</strong> <a style="word-break: break-all;" href="https://objkt.com/users/${e.address}/owned" target="_blank">${e.address}</a>`,e.twitter&&(n.innerHTML+=`<br><strong>Twitter:</strong> <a href="${e.twitter}" target="_blank">@${e.twitter.replace("https://twitter.com/","")}</a>`),t.append(n),t}const jI=window.localStorage,XI=(e,t)=>{const n=document.createElement("div");n.className="gentkProfiles";const i=new Image;i.loading="lazy",i.className="thumbnail",i.setAttribute("data-src","/loading.gif"),i.style.imageRendering="auto",i.setAttribute("data-src","/loading.gif"),i.onerror=e=>i.src="/notfound.png",i.style.cursor="pointer",n.append(i);const r=e.contract+e.token_id;switch(RL[r]=e,RL[r].contract=e.contract,RL[r].token_id=e.token_id,e.chain){case"IIIF":switch(i.src=e.display_uri,t){case"gallicaramaProject":n.append(sL(e)),i.addEventListener("click",(()=>{(e=>{const t=CI(),n=Object.assign({},t),i=[];for(let t=0;t<n.gallery.length;t++){const r=n.gallery[t];if("objkt"===r.tokenType||"tezos"===r.tokenType){if(t<e.length){const n=e[t].url.replace("https://openapi.bnf.fr/iiif/image/v3/","").replace("/full/max/0/default.webp",""),s=n.substring(0,n.lastIndexOf("/")),a=n.substring(n.lastIndexOf("/")+1);r.tokenType="IIIF",e[t].hasOwnProperty("note")&&e[t].note.length>0&&(r.note=e[t].note),r.IIIFdata={ark:s,vue:a,region:"full",rotation:"0",quality:"native",documentSource:s,source:"Gallica",size:"full"},i.push(r)}}else"block"===r.tokenType&&i.push(r)}n.gallery=i,ML(n)})(e.slides),bk()}));break;case"loadIIIFAsset":n.append(iL(e)),n.addEventListener("click",(()=>{qI(e,i.src,(()=>{OI(e.IIIFdata,e.link,null,e.item),bk()}))}));break;case"loadGallica":n.append(rL(e)),n.addEventListener("click",(e=>{const t=document.getElementById("IIIFDiv");oL(t);const n=document.getElementById("collection");n.append(gL()),n.prepend(aL())}));break;case"loadGallicaPix":n.append(rL(e)),n.addEventListener("click",(e=>{const t=document.getElementById("IIIFDiv");oL(t);const n=document.getElementById("collection");n.append((()=>{const e=document.createElement("div"),t=document.createElement("select");t.innerText="Zoologie",t.value="zoologie",t.innerHTML='\n   <option value="zoologie">Zoologie</option>\n   <option value="1418">14-18</option>\n   <option value="1418pub">Publicits 14-28</option>\n   <option value="miroir">Le Miroir de sports</option>\n  <option value="PP">Papiers peints et textiles</option>\n   <option value="vogue">Vogue (Paris)</option>\n  ',t.style="margin:10px;";const n=document.createElement("input");n.type="text",n.value="girafe",n.innerText="girafe",n.style="margin:10px;",n.addEventListener("focusin",(()=>Lk(1))),n.addEventListener("focusout",(()=>Lk(0)));const i=.6*window.innerWidth;e.style=`display:flex;width:${i}px;flex-direction: column;\n      align-items: flex-start;\n      justify-content: space-between;padding:5%;margin:5px;\n  `;const r=document.createElement("div");r.style="padding:10px;border:1px solid cyan;margin:15px;background-color:white;font-family: sans-serif;\n  font-weight: 100;",r.innerHTML='GallicaPix is a machine-learning powered image detector for Gallica. \n  Choose a document corpus and enter a search term to get started. Once the result is loaded, click on\n  the image to open that page in a new tab on the Gallica website. If you are satisfied with your find, you\n  can then load that image by pasting the page\'s address in the "Gallica by URL" tab. ';const s=document.createElement("button");s.innerText="Load results",s.style="margin:10px;";const a=document.createElement("iframe");return a.style=`border:1px solid cyan;width:${i}px;height:${i-50}px;display:none;`,s.addEventListener("click",(()=>{a.style.display="block",a.src=`https://gallicapix.bnf.fr/rest?run=findIllustrations-app.xq&start=1&corpus=${t.value}&sourceTarget=&keyword=${n.value}`})),e.append(r,t,n,s,a),e})()),n.prepend(aL())}));break;case"loadGallicaRama":n.append(rL(e)),n.addEventListener("click",(e=>{const t=document.getElementById("IIIFDiv");oL(t);const n=document.getElementById("collection");n.append((()=>{const e=document.createElement("div"),t=document.createElement("div");t.style="display:flex;padding:10px;border:1px solid cyan;margin:15px;flex-direction: column;background-color:white;font-family: sans-serif;\n  font-weight: 100;",t.innerHTML='Drop Gallicarama JSON files in this box or select a file to import it. \n    <br><br>\n    Once imported, the Gallicarama project can be loaded in two ways:<br><br>\n    - Click on the thumbnail to load a randomly generated 3D gallery populated with your Gallicarama\'s project slides.<br><br>\n    - Click on the "Load Assets" button to preload each pieces in the "Gallica by URL" tab. This will enable\n      you to crop and resize each slide.';const n=document.createElement("input");n.type="file",n.style="margin:10px;padding:10px;border:1px dashed black;",n.addEventListener("change",(e=>{AI.postMessage({type:"local",path:e.target.files[0]})})),t.addEventListener("dragover",(e=>e.preventDefault())),t.addEventListener("drop",(e=>{e.preventDefault(),e.dataTransfer.items&&[...e.dataTransfer.items].forEach(((e,t)=>{if("file"===e.kind){const t=e.getAsFile();AI.postMessage({type:"local",path:t})}}))})),t.append(n);const i=document.createElement("div");return i.id="gallicaRamaImports",i.className="artistList",e.append(t,i),e})()),n.prepend(aL())}))}break;case"tezos":switch(e.hasOwnProperty("token_id")&&e.hasOwnProperty("contract")&&(e.hasOwnProperty("url")||(e.url=`https://objkt.com/tokens/${e.contract}/${e.token_id}`),i.src=`https://assets.objkt.media/file/assets-003/${e.contract}/${e.token_id}/thumb288`),t){case"displayArtistCollection":n.append(QI(e)),i.addEventListener("click",(()=>{const t=(e=>{var t=[];return e.forEach((e=>{e.hasOwnProperty("fa_contract")&&(e.fa={contract:e.fa_contract},e.name=e.token.name,e.display_uri=e.token.display_uri),e.id=e.fa.contract+e.token_id,e.chain="tezos",e.contract=e.fa.contract;const n=generateThumbnail(e,"loadItem");t.push(n)})),t})(wT[e.category]);e.DOMelements={gallery:t},document.getElementById("list").parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideLeft",iA(e)}));break;case"loadCuration":i.src=e.logo,e.curation=!0,n.addEventListener("click",(()=>{zI(e,i.src,(()=>null))})),n.append(YI(e));break;case"loadSeminar":n.append(JI(e,!0)),i.addEventListener("click",(()=>{e.sem=!0,zI(e,i.src,(()=>{window.confirm(`This will load a ${e.size} video. Do you want to proceed?`)&&(bk(),ML(e.targetGallery),IA(e.vidsrc,e.url,e.contract+e.token_id))}))}));break;case"loadGallery":n.append(JI(e)),i.addEventListener("click",(()=>{zI(e,i.src,(()=>{bk(),ML(e)}))}));break;case"loadItem":n.style.cursor="pointer",n.addEventListener("click",(()=>{qI(e,i.src,(()=>$I(e,r)))})),tL(e,n);break;case"displayCollection":nL(e,e.creators[0].creator_address,n),i.addEventListener("click",(()=>{const t=[];for(const n in cA[e.creators[0].creator_address])t.push(XI(cA[e.creators[0].creator_address][n],"loadItem"));e.DOMelements={gallery:t},document.getElementById("list").parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideLeft",iA(e)}));break;case"listIterations":const t=`https://assets.objkt.media/file/assets-003/${e.logo.replace("ipfs://","")}/thumb288`;e.imgURI=t,i.src=t,e.tag.hasOwnProperty("commune")?i.addEventListener("click",(()=>VP(e))):i.addEventListener("click",(()=>fA(e))),n.append(KI(e));break;case"loadIteration":n.append(ZI(e)),n.style.cursor="pointer",n.addEventListener("click",(()=>{eA(e,i.src,(()=>{!e.hasOwnProperty("gentk")&&e.hasOwnProperty("slug")&&(e.gentk=KT[e.slug]),qP(e.gentk,e.id,e.hash,e.name),bk()}))}))}break;case"solana":i.src=e.display_uri,"loadItem"===t&&(n.addEventListener("click",(()=>{qI(e,i.src,(()=>{KR(e.display_uri,{id:e.id},e.chain),bk()}))})),tL(e,n));break;case"ethereum":switch(t){case"listIterations":var s=e.imgUrl;e.imgURI=s,i.src=s,e.tag.hasOwnProperty("commune")?i.addEventListener("click",(()=>VP(e))):i.addEventListener("click",(()=>fA(e))),n.append(KI(e));break;case"loadIteration":s=e.imgUrl,e.imgURI=s,i.src=s,n.append(ZI(e)),i.addEventListener("click",(()=>{eA(e,i.src,(()=>{qP(e.gentk,e.id,e.hash,e.name),bk()}))}))}}return n},YI=e=>{const t=document.createElement("div");t.className="artThumbTitle";const n=document.createElement("div");n.className="artistNames",n.style.minWidth="120px";const i=e.curators[0].curator;if(i.logo)try{const n=document.createElement("img");n.className="profilePic",n.loading="lazy",n.setAttribute("data-src","/loading.gif"),n.src=e.curators[0].curator.logo,i.twitter&&(n.style.cursor="pointer",n.addEventListener("click",(()=>window.open(e.curators[0].curator.twitter,"_blank")))),n.onerror=()=>n.remove(),t.appendChild(n)}catch(e){console.log(e)}const r=document.createElement("div");return r.innerHTML="<strong>"+e.name+"</strong>",i.alias&&(r.innerHTML+="<br>by "+e.curators[0].curator.alias),n.append(r),t.append(n),t},JI=(e,t)=>{const n=document.createElement("div");n.className="artThumbTitle";const i=document.createElement("div");i.className="artistNames";const r=document.createElement("div");r.innerText=e.name,i.append(r);let s=`https://anaver.se/?gallery=1&galc=${e.contract}&galid=${e.id}`;if(t&&(e.lang&&(r.innerText=`${e.lang} ${e.name}`),s=e.hasOwnProperty("targetGallery")?`https://anaver.se/?videoguide=1&gallery=1&vgc=${e.contract}&vgid=${e.token_id}&galc=${e.gallery_contract}&galid=${e.gallery_token_id}`:`https://anaver.se/?videoguide=1&vgc=${e.contract}&vgid=${e.token_id}`),!t){const t=ET[e.curator];if(t.alias){const e=document.createElement("div");e.innerText=t.alias,i.append(e)}if(t&&t.logo)try{const e=document.createElement("img");e.className="profilePic",e.loading="lazy",e.setAttribute("data-src","/loading.gif"),e.src=t.logo,t.twitter&&(e.style.cursor="pointer",e.addEventListener("click",(()=>window.open(t.twitter,"_blank")))),e.onerror=()=>e.remove(),n.appendChild(e)}catch(e){console.log("failed getting image")}}return i.style.minWidth="130px",n.append(i),n},KI=e=>{const t=document.createElement("div");t.className="thumbTitle";var n=document.createElement("A");return n.href=e.link,n.target="_blank",n.innerText=e.name.replace("anaverse -",""),n.style="font-style: italic;font-weight: 100;",t.appendChild(n),t},ZI=e=>{const t=document.createElement("div");t.id="artNameBand"+e.contract+e.token_id,t.className="artThumbTitle",JSON.parse(jI.getItem("favoriteNativeIterations")).hasOwnProperty(e.contract+e.token_id)&&(t.style="background:red;color:white;");const n=document.createElement("div");if(n.className="artistNames",e.hasOwnProperty("token")){const n=ET[e.token.holders[0].holder.address];if(n.logo)try{const e=document.createElement("img");e.className="profilePic",e.loading="lazy",e.setAttribute("data-src","/loading.gif"),e.src=n.logo,n.twitter&&(e.style.cursor="pointer",e.addEventListener("click",(()=>window.open(n.twitter,"_blank")))),e.onerror=()=>e.remove(),t.appendChild(e)}catch(e){console.log("failed getting image")}}return n.innerHTML=e.name,t.append(n),t},QI=e=>{const t=document.createElement("div");t.className="artThumbTitle";const n=document.createElement("div");if(n.className="artistNames",n.innerText=e.fa.name,e.fa.logo)try{const n=document.createElement("img");n.className="profilePic",n.loading="lazy",n.setAttribute("data-src","/loading.gif"),n.src=`https://assets.objkt.media/file/assets-003/${e.fa.logo.replace("ipfs://","")}/thumb288`,n.onerror=()=>n.remove(),t.appendChild(n)}catch(e){console.log("failed getting image")}return t.appendChild(n),t},$I=(e,t)=>{bk();const n=eL(e);KR(n,{id:t},e.chain)},eL=e=>{var t=0;return e.hasOwnProperty("display_uri")&&e.display_uri&&0===e.display_uri.indexOf("ipfs://")&&(t="https://assets.objkt.media/file/assets-003/"+e.display_uri.replace("ipfs://","")+"/display"),e.fa={contract:e.contract},t||(t="https://assets.objkt.media/file/assets-003/"+e.contract+"/"+e.token_id+"/thumb400"),t},tL=(e,t)=>{const n=document.createElement("div");n.id="artNameBand"+e.contract+e.token_id,n.className="artThumbTitle",JSON.parse(jI.getItem("favoritePaintings")).hasOwnProperty(e.contract+e.token_id)&&(n.style="background:red;color:white;");const i=document.createElement("div");i.className="artistNames";var r=e.name;i.style.minWidth="120px",i.innerHTML=`<span style="font-weight:bold;">${r}</span>`,n.append(i),t.append(n)},nL=(e,t,n)=>AT([t]).then((()=>{const i=ET[t],r=document.createElement("div");r.className="artThumbTitle";const s=i.twitter?`@${i.twitter}`:"",a=document.createElement("div");a.className="artistNames";var o=i.alias?i.alias:"";e.artist=o,o=o.length<50?o:o.substring(0,50)+"";var l=!1;TT.hasOwnProperty(t)&&(l=!0);const c=l?"white":"black",u=l?"red":"transparent";if(a.innerHTML=`<span style="color:${c};background:${u};padding:4px;">${o}</span>\n        <span><a href="${i.twitter}" target="_blank">${s.replace("https://twitter.com/","")}</a></span>`,i.logo)try{const e=document.createElement("img");e.className="profilePic",e.loading="lazy",e.setAttribute("data-src","/loading.gif"),e.src=i.logo,e.onerror=()=>e.remove(),r.appendChild(e)}catch(e){console.log("failed getting image")}r.append(a),n.append(r)})),iL=e=>{const t=document.createElement("div");t.className="artThumbTitle";const n=document.createElement("div");return n.className="artistNames",n.innerHTML=`${e.desc}<br><a href="https://gallica.bnf.fr/${e.IIIFdata.ark}/${e.IIIFdata.vue}.item" target="_blank">Open on Gallica</a>`,t.append(n),t},rL=e=>{const t=document.createElement("div");t.className="artThumbTitle";const n=document.createElement("div");return n.className="artistNames",n.innerHTML=`<a href="${e.url}" target="blank">${e.name}</a>`,t.append(n),t},sL=e=>{const t=document.createElement("div");t.className="artThumbTitle",t.style="display: flex;\n  flex-direction: column;\n  min-width:100px;";const n=document.createElement("div");n.className="artistNames",n.innerHTML=`<strong>${e.meta.title}</strong><br>${e.meta.author}`;const i=document.createElement("button");return i.innerText="Load assets",i.className="thumbToolAction",i.addEventListener("click",(()=>{e.slides.forEach((e=>{var t=e.url.replace("https://openapi.bnf.fr/iiif/image/v3/ark:/","https://gallica.bnf.fr/ark:/").replace("/full/max/0/default.webp","");dL(t+=".item")}));const t=document.getElementById("collection");t.parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideRight",setTimeout((()=>t.innerHTML=""),350),setTimeout((()=>{t.append(gL()),t.prepend(aL()),oL(document.getElementById("IIIFDiv"))}),500)})),t.append(n,i),t},aL=()=>{const e=document.createElement("div");return e.innerHTML=" Back",e.style="border-radius: 5px;\n    cursor: pointer;\n    padding: 4px;\n    margin: 5px;\n    width: 65px;",e.addEventListener("click",(()=>{console.log("coucou"),collection.parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideRight",setTimeout((()=>collection.innerHTML=""),250)})),e},oL=e=>{e.style.top="0%",e.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideLeft"},lL={},cL=(e,t,n)=>{e.source="BritishLibrary";const i=e.region.split(","),r=parseInt(i[2])/parseInt(i[3]),s=parseInt(1400*r);e.size=`${s},1400`;const a=`https://api.bl.uk/image/iiif/${e.ark}/${e.region}/${e.size}/${e.rotation}/default.jpg`;if(t)uL(e,a,t,n);else{const t=document.createElement("div");t.className="gentkProfiles";const i=new Image(200*r,200);i.src=a,i.style.padding="10px",i.style.cursor="pointer",lL[i.src]=i,n&&(desc=`${n.name} ${n.artist} `),desc+=e.vueID;const s=document.createElement("div");s.className="artThumbTitle",s.innerHTML=`<div class="artistNames">\n                        <span style="color:black;background:transparent;padding:4px;">${desc}</span>\n    <span><a href="http://access.bl.uk/item/viewer/${e.documentSource}#?cv=${e.vueID}" target="_blank">Open on British Library</a></span></div>`,t.append(i,s),document.getElementById("importedIIIFContent").append(t),i.addEventListener("click",(()=>{bk(),uL(e,a,null,n)}))}},uL=(e,t,n,i)=>{if(i){i.IIIFdata=e,i.britishLibrary=!0;const r=`http://access.bl.uk/item/viewer/${e.documentSource}#?cv=${e.vueID}`;i.permalink=r;const s=e.ark+e.vue+Date.now();RL[s]=i,KR(t,{id:s},"IIIF",n)}else fetch("https://api.bl.uk/metadata/iiif/"+e.documentSource+"/manifest.json").then((e=>e.json())).then((i=>{const r={description:"",artist:""};i.metadata.forEach((e=>{switch(e.label){case"Title":r.name=e.value,r.title=e.value;break;case"Date":r.year=e.value;case"Language":case"ShelfMark":r.description+=`${e.value} | `}})),r.IIIFdata=e,r.britishLibrary=!0;const s=`http://access.bl.uk/item/viewer/${e.documentSource}#?cv=${e.vueID}`;r.permalink=s;const a=e.ark+e.vue+Date.now();RL[a]=r,KR(t,{id:a},"IIIF",n)}))},hL=[],dL=e=>hL.push(e),pL=e=>{if("string"==typeof e)return e;var t="";return e.forEach((e=>t+=e["@value"]+" | ")),t.substring(0,t.length-3)},fL=(e,t,n)=>fetch(e+"/manifest.json").then((e=>e.json())).then((e=>{const i={description:"",artist:"",name:""};var r;e.metadata.forEach((e=>{switch(e.label){case"Creator":i.artist=pL(e.value);break;case"Title":i.name=pL(e.value),i.title=i.name;break;case"Date":i.year=pL(e.value);case"Language":case"ShelfMark":i.description+=`${pL(e.value)} | `}}));var s,a,o=600;const l=parseInt(t.vue),c=JSON.stringify(t.id);var u;if(l){let n=e.sequences[0].canvases[l];const i=n.images[0].resource["@id"];if(a={width:n.width,height:n.height},n.width<n.height){var h=n.width/n.height;r=Math.floor(o*h)}else r=600,h=n.height/n.width,o=Math.floor(r*h);t.id=i.replace("https://api.bl.uk/image/iiif/","").replace("/full/max/0/default.jpg",""),u=`${t.root}/${t.id}/${t.res}/${r},${o}/0/${t.quality}.jpg`}else e.sequences[0].canvases.forEach((e=>{if(e["@id"].substring(e["@id"].lastIndexOf("/")+1)===t.vue){if(a={width:e.width,height:e.height},e.width<e.height){var n=e.width/e.height;r=Math.floor(o*n)}else r=600,n=e.height/e.width,o=Math.floor(r*n);u=`${t.root}/${t.id}/${t.vue}/${t.res}/${r},${o}/0/${t.quality}.jpg`}}));if(a){const e=document.createElement("canvas");e.width=r+40,e.height=o+40,e.style="border: 1px solid black;border-radius: 5px;";const h=e.getContext("2d");h.fillStyle="#FFCCCB",h.fillRect(0,0,r+40,o+40);const d=new Image;d.src=u;const p=(e,t,n)=>{var i={x:.3*e,y:.4*t,w:.4*e,h:.4*t,width:e,height:t};s=i;const r=(i,r,s,a)=>{h.fillStyle="#FFCCCB",h.fillRect(0,0,e+40,t+40),h.drawImage(n,20,20),h.fillStyle="rgba(0,0,0,.4)",h.fillRect(20,20,e,r),h.fillRect(20,20+r+a,e,t-(r+a)),h.fillRect(20,20+r,i,a),h.fillRect(20+i+s,20+r,e-(i+s),a),h.lineWidth=2,h.setLineDash([]),h.strokeStyle="black",h.strokeRect(20+i,20+r,s,a),h.setLineDash([15,15]),h.strokeStyle="white",h.strokeRect(20+i,20+r,s,a),h.fillStyle="white",h.fillRect(i+13,r+13,14,14),h.fillRect(i+s+13,r+13,14,14),h.fillRect(i+s+13,r+a+13,14,14),h.fillRect(i+13,r+a+13,14,14)};r(i.x,i.y,i.w,i.h);var a=!1;const o=e=>{if(e.preventDefault(),e.hasOwnProperty("touches")&&(e=e.touches[0]),e.offsetX>=i.x+13&&e.offsetX<=i.x+35){if(e.offsetY>=i.y+13&&e.offsetY<=i.y+35){if(h.canvas.style.cursor="nwse-resize",a){const t=Math.floor(e.offsetX-i.x),n=Math.floor(e.offsetY-i.y);i.x=e.offsetX-20,i.y=e.offsetY-20,i.w+=20-t,i.h+=20-n,r(i.x,i.y,i.w,i.h)}}else if(e.offsetY>=i.y+i.h+13&&e.offsetY<=i.y+i.h+13+14&&(h.canvas.style.cursor="nesw-resize",a)){const t=Math.floor(e.offsetX-i.x),n=Math.floor(e.offsetY-i.h-i.y);i.x=e.offsetX-20,i.w+=20-t,i.h+=n-20,r(i.x,i.y,i.w,i.h)}}else if(e.offsetX>=i.x+i.w+13&&e.offsetX<=i.x+i.w+13+14){if(e.offsetY>=i.y+13&&e.offsetY<=i.y+13+14){if(h.canvas.style.cursor="nesw-resize",a){const t=Math.floor(e.offsetX-i.w-i.x),n=Math.floor(e.offsetY-i.y);i.y=e.offsetY-20,i.w+=t-20,i.h+=20-n,r(i.x,i.y,i.w,i.h)}}else if(e.offsetY>=i.y+i.h+13&&e.offsetY<=i.y+i.h+13+14){if(a){const t=Math.floor(e.offsetX-i.w-i.x),n=Math.floor(e.offsetY-i.h-i.y);i.w+=t-20,i.h+=n-20,r(i.x,i.y,i.w,i.h)}h.canvas.style.cursor="nwse-resize"}}else e.offsetY>=i.y&&e.offsetY<=i.y+i.h&&e.offsetX>=i.x&&e.offsetX<=i.x+i.w?(h.canvas.style.cursor="move",a&&(i.x=e.offsetX-i.w/2-20,i.y=e.offsetY-i.h/2-20,r(i.x,i.y,i.w,i.h))):h.canvas.style.cursor="crosshair";s=i};h.canvas.addEventListener("mousemove",o),h.canvas.addEventListener("touchmove",o),h.canvas.addEventListener("mousedown",(()=>a=!0)),h.canvas.addEventListener("mouseup",(()=>a=!1)),h.canvas.addEventListener("touchstart",(()=>a=!0)),h.canvas.addEventListener("touchend",(()=>a=!1))};d.addEventListener("load",(()=>{h.drawImage(d,20,20),p(r,o,d)}));const f=document.createElement("button");f.innerText="Load selection",f.style="margin-bottom:5px",f.addEventListener("click",(e=>{const r=a.height/s.height,o={ark:t.id,vue:t.vue,region:`${s.x*r},${s.y*r},${s.w*r},${s.h*r}`,rotation:"0",quality:t.quality,documentSource:JSON.parse(c)};switch(n){case"gallica":DI(o,null,i);break;case"britlib":o.vueID=l,cL(o,null,i)}document.getElementById("collection").parentElement.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideRight",document.getElementById("collection").innerHTML=""})),document.getElementById("IIIFresizeContainer").innerHTML="",document.getElementById("IIIFresizeContainer").append(f,e)}else console.log("Could not retrieve IIIF data.")})),mL=e=>{switch(!0){case-1!=e.indexOf("gallica"):var t=(r=e.replace("https://gallica.bnf.fr/","")).substring(0,r.lastIndexOf("/")),n=r.substring(r.lastIndexOf("/")+1,r.indexOf("."));fL("https://gallica.bnf.fr/iiif/"+(i={id:t,vue:n,res:"full",root:"https://gallica.bnf.fr/iiif",quality:"native"}).id,i,"gallica");break;case-1!=e.indexOf("bl.uk/"):var i,r=e.replace("https://access.bl.uk/item/viewer/",""),s=e.substring(e.indexOf("#?")+1),a=new URLSearchParams(s);t=r.substring(0,r.indexOf("#?")),n=a.get("cv"),fL("https://api.bl.uk/metadata/iiif/"+(i={id:t,vue:n,res:"full",root:"https://api.bl.uk/image/iiif",quality:"default"}).id,i,"britlib")}},gL=()=>{const e=document.createElement("div");if(e.style="display:flex;padding:10px;flex-direction:column",hL.length>0){const t=document.createElement("li");t.style="list-style: none;\n  border: 1px dashed cyan;  \n  margin: 15px;\n  background: white;\n  font-size: 12px;\n  padding: 10px;",t.innerText="These links have been imported. Click on a link to charge its target asset.",hL.forEach((e=>{const n=document.createElement("ul");n.innerText=e,n.style="cursor: pointer",n.addEventListener("click",(()=>mL(e))),t.append(n)})),e.append(t)}const t=document.createElement("div");t.id="IIIFresizeContainer";const n=document.createElement("div");n.style="padding:10px;border:1px solid cyan;margin:15px;background-color:white;font-family: sans-serif;\n  font-weight: 100;",n.innerHTML='To load a page from a document in the anaverse, simply \n  paste its URL in the text field below. You can try this <a href="https://gallica.bnf.fr/ark:/12148/btv1b52504111z/f73.item.zoom" target="_blank">\n   Gallica</a> document on porcelain making or that <a href="https://access.bl.uk/item/viewer/ark:/81055/vdc_100098770628.0x000001#?c=0&m=0&s=0&cv=18&xywh=0%2C-106%2C6684%2C4855"\n    target="_blank" >British Library</a> Japanese design manual. [Note: due to a cyber attack, the British Library online services have been shut down for an unknown duration]<br><br>Design tip: do not select an area outside the document (light red), it will \n    cause your selection to fail.';const i=document.createElement("input");return i.style="width:400px;margin:10px;",i.placeholder="Paste link here",i.addEventListener("focusin",(()=>Lk(1))),i.addEventListener("focusout",(()=>Lk(0))),i.addEventListener("change",(()=>mL(i.value))),e.append(n),e.append(i,t),e},yL=()=>{const e=document.createElement("div");e.id="IIIFDiv",e.style="display:grid;position:relative;grid-template-columns: 50% 50%;width:200%;height:100%";const t=document.createElement("div");t.id="importedIIIFContent",t.style="display: flex;margin:10px;flex-wrap:wrap";const n=document.createElement("div");n.id="list";const i=document.createElement("div");i.id="collection",(Nn<=6||Nn>=20)&&(i.style.color="white");const r=document.createElement("div");return r.className="artistList",r.append(XI(PI,"loadGallica"),XI(RI,"loadGallicaPix"),XI(kI,"loadGallicaRama")),n.append(r,t),e.append(n,i),e};var vL=0;const xL=window.localStorage,bL=document.getElementById("matureNotice");document.getElementById("hideNotice").addEventListener("click",(()=>{oD.lock(),bL.style.display="none"}));const wL=()=>{oD.unlock(),bL.style.display="block"};var _L=null;const ML=e=>{sT(!0),_L=e.curator,dA({native:!0,nativeRequestType:"specificToken",blockchain:e.room.blockchain,contract:e.room.contract,token_id:e.room.token_id,gallery:e})},EL=(e,t)=>(0,Dv.request)("https://data.objkt.com/v3/graphql",` query checkRoom {\n      token(where: {token_id: {_eq: "${e.room.token_id}"},fa_contract: {_eq: "${t}"},creators: {creator_address: {_eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9"}}}) {\n        artifact_uri\n        attributes {\n          attribute {\n            name\n            value\n          }\n        }\n    average\n    decimals\n    description\n    display_uri\n    fa{contract}\n    token_id\n    extra\n    flag\n    highest_offer\n    is_boolean_amount\n    last_listed\n    last_metadata_update\n    level\n    lowest_ask\n    metadata\n    mime\n    name\n    ophash\n    rights\n    tags {\n      tag {\n        name\n      }\n    }\n    supply\n    symbol\n    thumbnail_uri\n    timestamp\n    tzip16_key\n    creators {\n      creator_address\n    }\n    holders {\n      holder {\n        address\n        alias\n      }\n    }\n      }\n    }`).then((t=>{NL(),vL=0,e.hasOwnProperty("startPoint")?NP("startPoint",e.startPoint):(NP("startPoint",0),DP()),NP("gallery",[]),e.hasOwnProperty("DOMthumb")&&qT(JSON.parse(e.name)+" | ANAVER.SE",e.DOMthumb.src.replace("/thumbnail","/display")),e.gallery.forEach((e=>{"block"!=e.tokenType&&"sculpture"!=e.tokenType&&vL++})),sT(!0);var n=t.token[0];Jk.clear();{var i="";n.holders[0].holder.alias&&(i=n.holders[0].holder.alias.toUpperCase()+"'S "),n.hasOwnProperty("attributes")&&n.attributes.forEach((e=>{"name"===e.attribute.name.toLowerCase()&&(i+=e.attribute.value)}));const t=new URL(n.artifact_uri.replace("ipfs://","https://")),r=new URLSearchParams(t.search).get("fxhash");n.type="world",n.tag={room:!0};const s=n.artifact_uri.slice(7,53);n.figuresUrl=`https://assets.objkt.media/file/assets-003/${s}/artifact/figures.js`,n.contract=n.fa.contract,n.chain="tezos",n.tags.forEach((e=>n.tag[e.tag.name]=!0)),n.tag.hasOwnProperty("commune")?VP(n,e.gallery):qP(n,e.room.token_id,r,i,0,e),bT("Gallery room retrieval",1),e.hasOwnProperty("audioguide")&&((e,t)=>{IT.pause(),clearInterval(undefined),IT.src=e,PT.innerText=t,kT.innerText="Gallery audioguide",OT=!0,RT.style.display="flex",setTimeout((()=>{NT=!0,DT.innerHTML='<img  style="width:15px;height:15px" src="icons/stop.svg">',IT.play().catch((e=>{NT=!1,DT.innerHTML='<img  style="width:15px;height:15px" src="icons/play.svg">'}))}),1500)})("https://assets.objkt.media/file/assets-003/"+e.artifact.replace("ipfs://","")+"/artifact/"+e.audioguide.mainTrack,e.name),e.hasOwnProperty("collection")&&e.collection&&(e.collection,AT([e.collection]).then((()=>{ET[e.collection].alias})).catch((e=>{console.log(e)})))}})).then((t=>{e.skybox?SL(e):qP({skyboxUrl:"./initial_skybox.js",tag:{anaverse:!0,skybox:!0},type:"skybox"},0,WT(),"",!0,!1)})).catch((e=>{console.log(e),bT("Gallery room retrieval",0)})),SL=e=>{if(parseInt(e.skybox)){const t=parseInt(e.skybox)+0;e.skybox={token_id:t},TL(e,"")}else if("tezos"===e.skybox.blockchain){const t=`,fa_contract: {_eq: "${e.skybox.contract}"}`;NP("skybox",{contract:e.skybox.contract,token_id:e.skybox.token_id,name:e.skybox.name,blockchain:"tezos"}),TL(e,t)}},TL=(e,t)=>(0,Dv.request)("https://data.objkt.com/v3/graphql",` query checkRoom {\n      token(where: {token_id: {_eq: "${e.skybox.token_id}"}${t},creators: {creator_address: {_eq: "tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9"}}}) {\n        artifact_uri\n    average\n    decimals\n    description\n    display_uri\n    extra\n    flag\n    highest_offer\n    is_boolean_amount\n    last_listed\n    last_metadata_update\n    level\n    lowest_ask\n    metadata\n    mime\n    name\n    ophash\n    rights\n    supply\n    symbol\n    thumbnail_uri\n    token_id\n    timestamp\n    tzip16_key\n    creators {\n      creator_address\n    }\n    holders {\n      holder {\n        address\n        alias\n      }\n    }\n    fa_contract\n      }\n    }`).then((e=>{const t=e.token[0];if(t){Tk(1);var n=1.75*window.innerHeight;const e=new URL(t.artifact_uri.replace("ipfs://","https://")),i=new URLSearchParams(e.search).get("fxhash"),r=`https://assets.objkt.media/file/assets-003/${t.artifact_uri.slice(7,53)}/artifact/skybox.js`;qk.fog=null,UP.postMessage({side:n,skyurl:r,hash:i})}bT("Gallery skybox retrieval",1)})).catch((e=>{bT("Gallery skybox retrieval",0)})),AL=(e,t)=>{var n=document.createElement("div");n.innerText="Remove";var i=JSON.parse(xL.getItem("localGalleries")),r=[];return n.addEventListener("click",(()=>{window.confirm("Do you really want to destroy this local gallery?")&&(i.forEach((n=>{n.hasOwnProperty("timeId")?n.timeId!=e.timeId?r.push(n):t&&t.remove():r.push(n)})),xL.setItem("localGalleries",JSON.stringify(r)),bk(),bk())})),n},CL=e=>{e.forEach((e=>{(0,Dv.request)("https://api.fxhash.xyz/graphql",`query {\n        objkt(id: ${e.fxMetaData.objktid}) {\n          metadata\n         \n          owner {\n            id\n            name\n          }\n          issuer {\n            author {\n              id\n              name\n            }\n          }\n        }\n      }`).then((t=>{const n=t.objkt;n.type="world",n.tag={world:!0,item:!0};const i=new URL(n.metadata.artifactUri.replace("ipfs://","https://")),r=new URLSearchParams(i.search).get("fxhash"),s=n.metadata.artifactUri.slice(7,53);n.figuresUrl=`https://assets.objkt.media/file/assets-003/${s}/artifact/figures.js`.replace("//art","/art");const a={position:e.position,rotation:e.rotation,scale:e.scale};qP(n,e.fxMetaData.objktid,r,n.metadata.name,a)}))}))},IL=e=>{const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});var n=document.createElement("a");return n.href=URL.createObjectURL(t),n.download="gallery",n.innerText="Export gallery",n},LL=()=>{LP.name=document.getElementById("galleryName").value,LP.timeId=new Date;const e={};Jk.children.forEach((t=>{var n={};if(t.userData.hasOwnProperty("tokenType")){switch(n.tokenType=t.userData.tokenType,t.userData.hasOwnProperty("note")&&(n.note=t.userData.note),n.tokenType){case"block":n.block=t.userData;break;case"datavis":n.datavis=t.userData;break;case"sculpture":n.fxMetaData=t.userData.fxMetaData;break;case"IIIF":n.IIIFdata=t.userData.IIIFdata;break;case"solana":n.solanaMetaData=t.userData.solanaMetaData;break;case"ethereum":n.ethereumMetaData=t.userData.ethereumMetaData;case"tezos":n.tezosMetaData=t.userData.tezosMetaData}((t,n)=>{var i="";const r=["x","y","z"];["position","rotation","scale"].forEach((e=>{t[e]={},r.forEach((r=>{t[e][r]=Cn(".4f")(n[e][r]),i+=JSON.stringify(t[e][r])}))})),e[i]=t})(n,t)}})),LP.gallery=[];for(const t in e)LP.gallery.push(e[t]);galleryCreator.style.display="none",galleryCreator.style.zIndex=-5,document.getElementById("galleryMetaData").innerHTML="",document.addEventListener("keydown",Dk);var t=JSON.parse(xL.getItem("localGalleries"));t?(t.push(LP),xL.setItem("localGalleries",JSON.stringify(t))):xL.setItem("localGalleries",JSON.stringify([LP])),Lk(0),bk(),rA("GALLERY SAVED LOCALLY",1500)},RL={};var PL={};const kL=()=>PL={};var DL=0,NL=()=>DL=0,OL=2.5,UL=new Ac(OL,OL),BL=new ac(2.6,2.6,.05),FL=new ac(2.65,.05,.15),zL=new ac(.05,2.65,.15);const GL=e=>Number(e)?Number(e):Number("-"+e.substring(1)),HL=e=>{const t=document.getElementById("worldItemTooltip");sT(0),hk&&(document.getElementById("hang-button").style.display="flex"),[{name:"scale",extent:[.01,10],start:1,step:"0.01",threetype:"scale",axis:"all"},{name:"X position",extent:[-5,5],start:0,step:"0.01",threetype:"position",axis:"x"},{name:"Y position",extent:[-5,5],start:0,step:"0.01",threetype:"position",axis:"y"},{name:"Z position",extent:[-10,-1],start:0,step:"0.01",threetype:"position",axis:"z"},{name:"X rotation",extent:[-Math.PI,Math.PI],start:0,step:"0.01",threetype:"rotation",axis:"x"},{name:"Y rotation",extent:[-Math.PI,Math.PI],start:0,step:"0.01",threetype:"rotation",axis:"y"},{name:"Z rotation",extent:[-Math.PI,Math.PI],start:0,step:"0.01",threetype:"rotation",axis:"z"}].forEach((n=>{let i=document.createElement("div");i.className="worldTooltipDivs";let r=document.createElement("input"),s=document.createElement("input"),a=document.createElement("span");a.draggable=!1,r.style.pointerEvents="all",r.type="range",r.value=n.start,r.step=n.step,r.min=n.extent[0],r.max=n.extent[1],s.step=n.step,s.type="number",s.style="width:50px;pointer-events: all;margin: auto;",r.value=n.start,s.value=r.value,a.addEventListener("click",(()=>{r.value=n.start,"all"===n.axis?e[n.threetype].set(n.start,n.start,n.start):e[n.threetype][n.axis]=n.start})),s.addEventListener("input",(()=>{r.value=s.value,"all"===n.axis?e[n.threetype].set(r.value,r.value,r.value):e[n.threetype][n.axis]=r.value})),r.addEventListener("input",(()=>{s.value=r.value,"all"===n.axis?e[n.threetype].set(r.value,r.value,r.value):e[n.threetype][n.axis]=r.value})),a.innerText=n.name,a.className="worldTooltipLabel",i.appendChild(r),i.appendChild(s),i.appendChild(a),t.appendChild(i),i.addEventListener("dragstart",(e=>e.preventDefault()))}));const n=document.createElement("div");n.innerText=Mk?"Grid snapping is toggled":"Grid snapping is untoggled",n.className="worldTooltipLabel",n.style="width: 200px;margin: auto;",n.addEventListener("click",(()=>{_k(),n.innerText=Mk?"Grid snapping is toggled":"Grid snapping is untoggled",n.style.color=Mk?"white":"black",n.style.backgroundColor=Mk?"black":"white"})),t.appendChild(document.createElement("br")),t.appendChild(n);const i=document.createElement("div");i.innerText="Delete frame",i.className="worldTooltipLabel",i.style="width: 200px;margin: auto;color:red;margin-top:4px;",i.addEventListener("click",(()=>{Kk.clear(),Pk()})),t.appendChild(i),t.appendChild(document.createElement("br"));const r=document.createElement("div");var s="H";hk&&(s="<svg xmlns='http://www.w3.org/2000/svg' height='14' viewBox='0 -960 960 960' width='14'> <path d='M160-80q-33 0-56.5-23.5T80-160v-480q0-33 23.5-56.5T160-720h160l160-160 160 160h160q33 0 56.5 23.5T880-640v480q0 33-23.5 56.5T800-80H160Zm0-80h640v-480H160v480Zm80-80h480L570-440 450-280l-90-120-120 160Zm460-200q25 0 42.5-17.5T760-500q0-25-17.5-42.5T700-560q-25 0-42.5 17.5T640-500q0 25 17.5 42.5T700-440ZM404-720h152l-76-76-76 76ZM160-160v-480 480Z' /> </svg>",t.style.backgroundColor="rgba(255,255,255,0.5)",t.style.border="2px solid black"),r.innerHTML=`Use <b>${s}</b> to hang this item where it is.`,t.appendChild(r),t.style.display="block"};function VL(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const qL="KHR_binary_glTF",WL="KHR_draco_mesh_compression",jL="KHR_lights_punctual",XL="KHR_materials_clearcoat",YL="KHR_materials_ior",JL="KHR_materials_sheen",KL="KHR_materials_specular",ZL="KHR_materials_transmission",QL="KHR_materials_iridescence",$L="KHR_materials_unlit",eR="KHR_materials_volume",tR="KHR_texture_basisu",nR="KHR_texture_transform",iR="KHR_mesh_quantization",rR="KHR_materials_emissive_strength",sR="EXT_texture_webp",aR="EXT_texture_avif",oR="EXT_meshopt_compression",lR="EXT_mesh_gpu_instancing";class cR{constructor(e){this.parser=e,this.name=jL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,s=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let a;const o=new dl(16777215);void 0!==s.color&&o.fromArray(s.color);const l=void 0!==s.range?s.range:0;switch(s.type){case"directional":a=new Xm(o),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new Wm(o),a.distance=l;break;case"spot":a=new zm(o),a.distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return a.position.set(0,0,0),a.decay=2,GR(a,s),void 0!==s.intensity&&(a.intensity=s.intensity),a.name=t.createUniqueName(s.name||"light_"+e),i=Promise.resolve(a),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return n._getNodeRef(t.cache,r,e)}))}}class uR{constructor(){this.name=$L}getMaterialType(){return fl}extendParams(e,t,n){const i=[];e.color=new dl(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture,Ms))}return Promise.all(i)}}class hR{constructor(e){this.parser=e,this.name=rR}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class dR{constructor(e){this.parser=e,this.name=XL}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?jf:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const e=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ma(e,e)}return Promise.all(r)}}class pR{constructor(e){this.parser=e,this.name=QL}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?jf:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.iridescenceFactor&&(t.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(t.iridescenceIOR=s.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(r)}}class fR{constructor(e){this.parser=e,this.name=JL}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?jf:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new dl(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=i.extensions[this.name];return void 0!==s.sheenColorFactor&&t.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,Ms)),void 0!==s.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(r)}}class mR{constructor(e){this.parser=e,this.name=ZL}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?jf:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(r)}}class gR{constructor(e){this.parser=e,this.name=eR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?jf:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return t.attenuationColor=new dl(a[0],a[1],a[2]),Promise.all(r)}}class yR{constructor(e){this.parser=e,this.name=YL}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?jf:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class vR{constructor(e){this.parser=e,this.name=KL}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?jf:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return t.specularColor=new dl(a[0],a[1],a[2]),void 0!==s.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,Ms)),Promise.all(r)}}class xR{constructor(e){this.parser=e,this.name=tR}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,s)}}class bR{constructor(e){this.parser=e,this.name=sR,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const s=r.extensions[t],a=i.images[s.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,s.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class wR{constructor(e){this.parser=e,this.name=aR,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const s=r.extensions[t],a=i.images[s.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,s.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class _R{constructor(e){this.name=oR,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(t){const n=e.byteOffset||0,i=e.byteLength||0,s=e.count,a=e.byteStride,o=new Uint8Array(t,n,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(s,a,o,e.mode,e.filter).then((function(e){return e.buffer})):r.ready.then((function(){const t=new ArrayBuffer(s*a);return r.decodeGltfBuffer(new Uint8Array(t),s,a,o,e.mode,e.filter),t}))}))}return null}}class MR{constructor(e){this.name=lR,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const e of i.primitives)if(e.mode!==PR.TRIANGLES&&e.mode!==PR.TRIANGLE_STRIP&&e.mode!==PR.TRIANGLE_FAN&&void 0!==e.mode)return null;const r=n.extensions[this.name].attributes,s=[],a={};for(const e in r)s.push(this.parser.getDependency("accessor",r[e]).then((t=>(a[e]=t,a[e]))));return s.length<1?null:(s.push(this.parser.createNodeMesh(e)),Promise.all(s).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,r=[];for(const e of n){const t=new _o,n=new Wa,s=new qa,o=new Wa(1,1,1),l=new Kd(e.geometry,e.material,i);for(let e=0;e<i;e++)a.TRANSLATION&&n.fromBufferAttribute(a.TRANSLATION,e),a.ROTATION&&s.fromBufferAttribute(a.ROTATION,e),a.SCALE&&o.fromBufferAttribute(a.SCALE,e),l.setMatrixAt(e,t.compose(n,s,o));for(const t in a)"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,a[t]);Xo.prototype.copy.call(l,e),this.parser.assignFinalMaterial(l),r.push(l)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]})))}}const ER="glTF";class SR{constructor(e){this.name=qL,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ER)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<i;){const t=r.getUint32(s,!0);s+=4;const i=r.getUint32(s,!0);if(s+=4,1313821514===i){const i=new Uint8Array(e,12+s,t);this.content=n.decode(i)}else if(5130562===i){const n=12+s;this.body=e.slice(n,n+t)}s+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class TR{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=WL,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},o={},l={};for(const e in s){const t=UR[e]||e.toLowerCase();a[t]=s[e]}for(const t in e.attributes){const i=UR[t]||t.toLowerCase();if(void 0!==s[t]){const r=n.accessors[e.attributes[t]],s=kR[r.componentType];l[i]=s.name,o[i]=!0===r.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){i.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],i=o[t];void 0!==i&&(n.normalized=i)}t(e)}),a,l)}))}))}}class AR{constructor(){this.name=nR}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class CR{constructor(){this.name=iR}}class IR extends am{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let e=0;e!==i;e++)t[e]=n[r+e];return t}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=2*a,l=3*a,c=i-t,u=(n-t)/c,h=u*u,d=h*u,p=e*l,f=p-l,m=-2*d+3*h,g=d-h,y=1-m,v=g-h+u;for(let e=0;e!==a;e++){const t=s[f+e+a],n=s[f+e+o]*c,i=s[p+e+a],l=s[p+e]*c;r[e]=y*t+v*n+m*i+g*l}return r}}const LR=new qa;class RR extends IR{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return LR.fromArray(r).normalize().toArray(r),r}}const PR={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},kR={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},DR={9728:Yi,9729:$i,9984:Ji,9985:er,9986:Zi,9987:nr},NR={33071:ji,33648:Xi,10497:Wi},OR={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},UR={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},BR={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},FR={CUBICSPLINE:void 0,LINEAR:as,STEP:ss};function zR(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function GR(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function HR(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function VR(e){const t=e.extensions&&e.extensions[WL];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+qR(t.attributes):e.indices+":"+qR(e.attributes)+":"+e.mode,n}function qR(e){let t="";const n=Object.keys(e).sort();for(let i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function WR(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const jR=new _o;class XR{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new VL,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,r=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,r=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||i&&r<98?this.textureLoader=new Pm(this.options.manager):this.textureLoader=new ag(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Tm(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const s={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};zR(r,s,i),GR(s,i),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(s)}))).then((function(){e(s)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n].joints;for(let t=0,n=i.length;t<n;t++)e[i[t]].isBone=!0}for(let t=0,i=e.length;t<i;t++){const i=e[t];void 0!==i.mesh&&(this._addNodeRef(this.meshCache,i.mesh),void 0!==i.skin&&(n[i.mesh].isSkinnedMesh=!0)),void 0!==i.camera&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,i]of e.children.entries())r(i,t.children[n])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!i)throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[qL].body);const i=this.options;return new Promise((function(e,r){n.load($m.resolveURL(t.uri,i.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=OR[i.type],t=kR[i.componentType],n=!0===i.normalized,r=new t(i.count*e);return Promise.resolve(new _l(r,e,n))}const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(e){const r=e[0],s=OR[i.type],a=kR[i.componentType],o=a.BYTES_PER_ELEMENT,l=o*s,c=i.byteOffset||0,u=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,h=!0===i.normalized;let d,p;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let l=t.cache.get(n);l||(d=new a(r,e*u,i.count*u/o),l=new od(d,u/o),t.cache.add(n,l)),p=new cd(l,s,c%u/o,h)}else d=null===r?new a(i.count*s):new a(r,c,i.count*s),p=new _l(d,s,h);if(void 0!==i.sparse){const t=OR.SCALAR,n=kR[i.sparse.indices.componentType],o=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,c=new n(e[1],o,i.sparse.count*t),u=new a(e[2],l,i.sparse.count*s);null!==r&&(p=new _l(p.array.slice(),p.itemSize,p.normalized));for(let e=0,t=c.length;e<t;e++){const t=c[e];if(p.setX(t,u[e*s]),s>=2&&p.setY(t,u[e*s+1]),s>=3&&p.setZ(t,u[e*s+2]),s>=4&&p.setW(t,u[e*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i];let s=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(s=e)}return this.loadTextureImage(e,i,s)}loadTextureImage(e,t,n){const i=this,r=this.json,s=r.textures[e],a=r.images[t],o=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=s.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const n=(r.samplers||{})[s.sampler]||{};return t.magFilter=DR[n.magFilter]||$i,t.minFilter=DR[n.minFilter]||nr,t.wrapS=NR[n.wrapS]||Wi,t.wrapT=NR[n.wrapT]||Wi,i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[o]=l,l}loadImageSource(e,t){const n=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const r=n.images[e],s=self.URL||self.webkitURL;let a=r.uri||"",o=!1;if(void 0!==r.bufferView)a=this.getDependency("bufferView",r.bufferView).then((function(e){o=!0;const t=new Blob([e],{type:r.mimeType});return a=s.createObjectURL(t),a}));else if(void 0===r.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const l=Promise.resolve(a).then((function(e){return new Promise((function(n,r){let s=n;!0===t.isImageBitmapLoader&&(s=function(e){const t=new Oa(e);t.needsUpdate=!0,n(t)}),t.load($m.resolveURL(e,i.path),s,void 0,r)}))})).then((function(e){var t;return!0===o&&s.revokeObjectURL(a),e.userData.mimeType=r.mimeType||((t=r.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e}));return this.sourceCache[e]=l,l}assignTexture(e,t,n,i){const r=this;return this.getDependency("texture",n.index).then((function(s){if(!s)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((s=s.clone()).channel=n.texCoord),r.extensions[nR]){const e=void 0!==n.extensions?n.extensions[nR]:void 0;if(e){const t=r.associations.get(s);s=r.extensions[nR].extendTexture(s,e),r.associations.set(s,t)}}return void 0!==i&&(s.colorSpace=i),e[t]=s,s}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new lp,ol.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new Zd,ol.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||r||s){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),s&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),r&&(t.vertexColors=!0),s&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return Wf}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let s;const a={},o=[];if((r.extensions||{})[$L]){const e=i[$L];s=e.getMaterialType(),o.push(e.extendParams(a,r,t))}else{const n=r.pbrMetallicRoughness||{};if(a.color=new dl(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.fromArray(e),a.opacity=e[3]}void 0!==n.baseColorTexture&&o.push(t.assignTexture(a,"map",n.baseColorTexture,Ms)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(o.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),o.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),o.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===r.doubleSided&&(a.side=Qn);const l=r.alphaMode||"OPAQUE";if("BLEND"===l?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===l&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&s!==fl&&(o.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new ma(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;a.normalScale.set(e,e)}return void 0!==r.occlusionTexture&&s!==fl&&(o.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&s!==fl&&(a.emissive=(new dl).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&s!==fl&&o.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,Ms)),Promise.all(o).then((function(){const n=new s(a);return r.name&&(n.name=r.name),GR(n,r),t.associations.set(n,{materials:e}),r.extensions&&zR(i,n,r),n}))}createUniqueName(e){const t=Ug.sanitizeNodeName(e||"");let n=t;for(let e=1;this.nodeNamesUsed[n];++e)n=t+"_"+e;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[WL].decodePrimitive(e,t).then((function(n){return YR(n,e,t)}))}const s=[];for(let n=0,a=e.length;n<a;n++){const a=e[n],o=VR(a),l=i[o];if(l)s.push(l.promise);else{let e;e=a.extensions&&a.extensions[WL]?r(a):YR(new zl,a,t),i[o]={primitive:a,promise:e},s.push(e)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],s=r.primitives,a=[];for(let e=0,t=s.length;e<t;e++){const t=void 0===s[e].material?(void 0===(o=this.cache).DefaultMaterial&&(o.DefaultMaterial=new Wf({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Kn})),o.DefaultMaterial):this.getDependency("material",s[e].material);a.push(t)}var o;return a.push(t.loadGeometries(s)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),o=n[n.length-1],l=[];for(let n=0,c=o.length;n<c;n++){const c=o[n],u=s[n];let h;const d=a[n];if(u.mode===PR.TRIANGLES||u.mode===PR.TRIANGLE_STRIP||u.mode===PR.TRIANGLE_FAN||void 0===u.mode)h=!0===r.isSkinnedMesh?new Od(c,d):new rc(c,d),!0===h.isSkinnedMesh&&h.normalizeSkinWeights(),u.mode===PR.TRIANGLE_STRIP?h.geometry=Bv(h.geometry,fs):u.mode===PR.TRIANGLE_FAN&&(h.geometry=Bv(h.geometry,ms));else if(u.mode===PR.LINES)h=new ap(c,d);else if(u.mode===PR.LINE_STRIP)h=new ip(c,d);else if(u.mode===PR.LINE_LOOP)h=new op(c,d);else{if(u.mode!==PR.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);h=new pp(c,d)}Object.keys(h.geometry.morphAttributes).length>0&&HR(h,r),h.name=t.createUniqueName(r.name||"mesh_"+e),GR(h,r),u.extensions&&zR(i,h,u),t.assignFinalMaterial(h),l.push(h)}for(let n=0,i=l.length;n<i;n++)t.associations.set(l[n],{meshes:e,primitives:n});if(1===l.length)return l[0];const c=new Yh;t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new pc(fa.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new Bc(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),GR(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let e=0,i=t.joints.length;e<i;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),i=e,r=[],s=[];for(let e=0,a=i.length;e<a;e++){const a=i[e];if(a){r.push(a);const t=new _o;null!==n&&t.fromArray(n.array,16*e),s.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}return new Gd(r,s)}))}loadAnimation(e){const t=this.json.animations[e],n=t.name?t.name:"animation_"+e,i=[],r=[],s=[],a=[],o=[];for(let e=0,n=t.channels.length;e<n;e++){const n=t.channels[e],l=t.samplers[n.sampler],c=n.target,u=c.node,h=void 0!==t.parameters?t.parameters[l.input]:l.input,d=void 0!==t.parameters?t.parameters[l.output]:l.output;void 0!==c.node&&(i.push(this.getDependency("node",u)),r.push(this.getDependency("accessor",h)),s.push(this.getDependency("accessor",d)),a.push(l),o.push(c))}return Promise.all([Promise.all(i),Promise.all(r),Promise.all(s),Promise.all(a),Promise.all(o)]).then((function(e){const t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=[];for(let e=0,n=t.length;e<n;e++){const n=t[e],l=i[e],c=r[e],u=s[e],h=a[e];if(void 0===n)continue;let d;switch(n.updateMatrix(),BR[h.path]){case BR.weights:d=pm;break;case BR.rotation:d=mm;break;default:d=ym}const p=n.name?n.name:n.uuid,f=void 0!==u.interpolation?FR[u.interpolation]:as,m=[];BR[h.path]===BR.weights?n.traverse((function(e){e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(p);let g=c.array;if(c.normalized){const e=WR(g.constructor),t=new Float32Array(g.length);for(let n=0,i=g.length;n<i;n++)t[n]=g[n]*e;g=t}for(let e=0,t=m.length;e<t;e++){const t=new d(m[e]+"."+BR[h.path],l.array,g,f);"CUBICSPLINE"===u.interpolation&&(t.createInterpolant=function(e){return new(this instanceof mm?RR:IR)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),o.push(t)}}return new vm(n,void 0,o)}))}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],i=t._loadNodeShallow(e),r=[],s=n.children||[];for(let e=0,n=s.length;e<n;e++)r.push(t.getDependency("node",s[e]));const a=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),a]).then((function(e){const t=e[0],n=e[1],i=e[2];null!==i&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(i,jR)}));for(let e=0,i=n.length;e<i;e++)t.add(n[e]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],s=r.name?i.createUniqueName(r.name):"",a=[],o=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return o&&a.push(o),void 0!==r.camera&&a.push(i.getDependency("camera",r.camera).then((function(e){return i._getNodeRef(i.cameraCache,r.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){a.push(e)})),this.nodeCache[e]=Promise.all(a).then((function(t){let a;if(a=!0===r.isBone?new Ud:t.length>1?new Yh:1===t.length?t[0]:new Xo,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(r.name&&(a.userData.name=r.name,a.name=s),GR(a,r),r.extensions&&zR(n,a,r),void 0!==r.matrix){const e=new _o;e.fromArray(r.matrix),a.applyMatrix4(e)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return i.associations.has(a)||i.associations.set(a,{}),i.associations.get(a).nodes=e,a})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,r=new Yh;n.name&&(r.name=i.createUniqueName(n.name)),GR(r,n),n.extensions&&zR(t,r,n);const s=n.nodes||[],a=[];for(let e=0,t=s.length;e<t;e++)a.push(i.getDependency("node",s[e]));return Promise.all(a).then((function(e){for(let t=0,n=e.length;t<n;t++)r.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[e,n]of i.associations)(e instanceof ol||e instanceof Oa)&&t.set(e,n);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(r),r}))}}function YR(e,t,n){const i=t.attributes,r=[];function s(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(const t in i){const n=UR[t]||t.toLowerCase();n in e.attributes||r.push(s(i[t],n))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(i)}return GR(e,t),function(e,t,n){const i=t.attributes,r=new Ya;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,s=e.max;if(void 0===t||void 0===s)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new Wa(t[0],t[1],t[2]),new Wa(s[0],s[1],s[2])),e.normalized){const t=WR(kR[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const s=t.targets;if(void 0!==s){const e=new Wa,t=new Wa;for(let i=0,r=s.length;i<r;i++){const r=s[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],s=i.min,a=i.max;if(void 0!==s&&void 0!==a){if(t.setX(Math.max(Math.abs(s[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(s[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(s[2]),Math.abs(a[2]))),i.normalized){const e=WR(kR[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const a=new po;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,n){let i=!1,r=!1,s=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(i=!0),void 0!==n.NORMAL&&(r=!0),void 0!==n.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(e);const a=[],o=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(i){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;a.push(t)}if(r){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;o.push(t)}if(s){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then((function(t){const n=t[0],a=t[1],o=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=a),s&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}new class extends Mm{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new dR(e)})),this.register((function(e){return new xR(e)})),this.register((function(e){return new bR(e)})),this.register((function(e){return new wR(e)})),this.register((function(e){return new fR(e)})),this.register((function(e){return new mR(e)})),this.register((function(e){return new gR(e)})),this.register((function(e){return new yR(e)})),this.register((function(e){return new hR(e)})),this.register((function(e){return new vR(e)})),this.register((function(e){return new pR(e)})),this.register((function(e){return new cR(e)})),this.register((function(e){return new _R(e)})),this.register((function(e){return new MR(e)}))}load(e,t,n,i){const r=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:$m.extractUrlBase(e),this.manager.itemStart(e);const a=function(t){i?i(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},o=new Tm(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{r.parse(n,s,(function(n){t(n),r.manager.itemEnd(e)}),a)}catch(e){a(e)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const s={},a={},o=new TextDecoder;if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(o.decode(new Uint8Array(e,0,4))===ER){try{s[qL]=new SR(e)}catch(e){return void(i&&i(e))}r=JSON.parse(s[qL].content)}else r=JSON.parse(o.decode(e));else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new XR(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](l);a[t.name]=t,s[t.name]=!0}if(r.extensionsUsed)for(let e=0;e<r.extensionsUsed.length;++e){const t=r.extensionsUsed[e],n=r.extensionsRequired||[];switch(t){case $L:s[t]=new uR;break;case WL:s[t]=new TR(r,this.dracoLoader);break;case nR:s[t]=new AR;break;case iR:s[t]=new CR;break;default:n.indexOf(t)>=0&&void 0===a[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(s),l.setPlugins(a),l.parse(n,i)}parseAsync(e,t){const n=this;return new Promise((function(i,r){n.parse(e,t,i,r)}))}};const JR=new Worker(new URL(n.p+n.u(68),n.b));JR.onmessage=e=>{e.data[1].hasOwnProperty("id")&&((e,t,n,i,r)=>{DL++,RL[t.id].img=e,r&&(RL[t.id].note=r),rA("LOADING PIECE "+DL+(vL>0?"/"+vL:""),1500);var s=new Yh;QR(e).then((e=>{e.magFilter=$i,e.minFilter=nr,e.colorSpace=Ms,e.anisotropy=tD;var a,o,l,c,u,h,d=new fl({map:e});if(e.image.height===e.image.width)a=new rc(UL,d),(o=new rc(BL,yP.ghost)).position.set(0,0,-.05),(c=new rc(FL,yP.ghost)).position.set(0,1.3,0),(l=new rc(FL,yP.ghost)).position.set(0,-1.3,0),(u=new rc(zL,yP.ghost)).position.set(-1.3,0,0),(h=new rc(zL,yP.ghost)).position.set(1.3,0,0);else if(e.image.height>e.image.width){var p=OL*(e.image.width/e.image.height);a=new rc(new Ac(p,OL),d),(o=new rc(new ac(p+.1,2.6,.05),yP.ghost)).position.set(0,0,-.05),(c=new rc(new ac(p+.15,.05,.15),yP.ghost)).position.set(0,1.3,0),(l=new rc(new ac(p+.15,.05,.15),yP.ghost)).position.set(0,-1.3,0),(u=new rc(zL,yP.ghost)).position.set(-(p/2+.05),0,0),(h=new rc(zL,yP.ghost)).position.set(p/2+.05,0,0)}else{var f=OL*(e.image.height/e.image.width);a=new rc(new Ac(OL,f),d),(o=new rc(new ac(2.6,f+.1,.05),yP.hatchingMaterial)).position.set(0,0,-.05),(c=new rc(FL,yP.ghost)).position.set(0,f/2+.05,0),(l=new rc(FL,yP.ghost)).position.set(0,-(f/2+.05),0),(u=new rc(new ac(.05,f+.15,.15),yP.ghost)).position.set(-1.3,0,0),(h=new rc(new ac(.05,f+.15,.15),yP.ghost)).position.set(1.3,0,0)}switch(a.position.set(0,0,0),s.add(o,c,l,u,h,a),s.position.z=-4,a.userData.isWorldItem=!0,t&&(a.userData.objktID=t.id),s.position.y+=.5,t&&(s.userData.tokenType=n,s.userData.id=t.id),r&&(s.userData.note=r,a.userData.note=r),n){case"ethereum":case"openSea":s.userData.ethereumMetaData={contract:RL[t.id].contract,token_id:RL[t.id].token_id},s.userData.type="ethereum";break;case"tezos":case"objkt":s.userData.tezosMetaData={contract:RL[t.id].fa.contract,token_id:RL[t.id].token_id},s.userData.type="tezos";break;case"solana":s.userData.solanaMetaData={contract:RL[t.id].contract}}RL[t.id].hasOwnProperty("IIIFdata")&&(s.userData.IIIFdata=RL[t.id].IIIFdata),((e,t)=>{switch(e.type=t,t){case"tezos":case"objkt":(e=>{const t=e.collection?e.collection:"";e.hasOwnProperty("artist_profile")&&e.artist_profile&&(e.artist=e.artist_profile.alias)," null"!==e.artist&&null!==e.artist&&void 0!==e.artist||(e.artist=" unknown artist"),e.tooltipMetadata=`<strong>${e.name}</strong> - ${e.artist}<br>\n${t}<br><br><em>${GS(e.description,250)}</em><br>\n<br>\n<span style="font-size:9px;font-family:monospace;font-style: italic;">[media type:  ${e.mime}]</span>\n<br><br>`})(e);break;case"ethereum":case"openSeaMetaData":case"openSea":(e=>{e.hasOwnProperty("name")?e.tooltipMetadata=`<strong>${e.name}</strong><br><br>`:e.tooltipMetadata="No information provider available.<br><br>"})(e);break;case"solana":(e=>{e.url=`https://solana.fm/address/${e.contract}`,e.tooltipMetadata=`<strong>${e.name}</strong><br><br>`})(e);break;case"web2":buildWeb2Metadata(e);break;case"IIIF":(e=>{e.tooltipMetadata=`<strong>${e.name}</strong><br> ${e.artist}<br>\n  <br><em>${GS(e.description,250)}</em><br>\n  <br>\n  <span style="font-size:9px;font-family:monospace;font-style: italic;">[${e.year}]</span>\n  <br><br>`})(e)}})(RL[t.id],n),i?(s.children.forEach((e=>{"Mesh"===e.type&&("PlaneGeometry"===e.geometry.type?(e.material.opacity=1,e.material.transparent=!1):e.material=yP.whiteFull)})),s.position.set(GL(i.position.x),GL(i.position.y),GL(i.position.z)),s.rotation.set(GL(i.rotation.x),GL(i.rotation.y),GL(i.rotation.z)),s.scale.set(GL(i.scale.x),GL(i.scale.y),GL(i.scale.z)),Jk.attach(s),Mw()):(HL(s),Kk.add(s)),setTimeout((()=>{rA()}),2e3)}))})(...e.data)};const KR=(e,t,n,i,r)=>{RL[t.id].hasOwnProperty("mime")&&RL[t.id].mime&&RL[t.id].mime.substring(0,RL[t.id].mime.indexOf("/")),i&&!r&&i.hasOwnProperty("note")&&(r=i.note),JR.postMessage({img:e,id:t,type:n,location:i,currentRoom:LP.room,note:r})},ZR=new Pm,QR=e=>new Promise((t=>ZR.load(e,t))),$R="rgb(255,0,0)",eP="rgb(0,255,235)",tP=new fl({color:"white",opacity:.85,transparent:!0}),nP=new Zd({color:"black",onBeforeCompile:e=>{e.vertexShader=`\n    attribute vec3 instT;\n    attribute vec4 instR;\n    attribute vec3 instS;\n    \n    // http://barradeau.com/blog/?p=1109\n    vec3 trs( inout vec3 position, vec3 T, vec4 R, vec3 S ) {\n        position *= S;\n        position += 2.0 * cross( R.xyz, cross( R.xyz, position ) + R.w * position );\n        position += T;\n        return position;\n    }\n    ${e.vertexShader}\n`.replace("#include <begin_vertex>","#include <begin_vertex>\n      transformed = trs(transformed, instT, instR, instS);\n")}}),iP=new Zd({color:eP}),rP=new Zd({color:"red"}),sP=new Zd({color:"black"}),aP=new Zd({color:eP,onBeforeCompile:e=>{e.vertexShader=`\n    attribute vec3 instT;\n    attribute vec4 instR;\n    attribute vec3 instS;\n    \n    // http://barradeau.com/blog/?p=1109\n    vec3 trs( inout vec3 position, vec3 T, vec4 R, vec3 S ) {\n        position *= S;\n        position += 2.0 * cross( R.xyz, cross( R.xyz, position ) + R.w * position );\n        position += T;\n        return position;\n    }\n    ${e.vertexShader}\n`.replace("#include <begin_vertex>","#include <begin_vertex>\n      transformed = trs(transformed, instT, instR, instS);\n").replace("uniform float linewidth;","attribute float linewidth;")}}),oP=new Zd({color:$R,onBeforeCompile:e=>{e.vertexShader=`\n    attribute vec3 instT;\n    attribute vec4 instR;\n    attribute vec3 instS;\n    \n    // http://barradeau.com/blog/?p=1109\n    vec3 trs( inout vec3 position, vec3 T, vec4 R, vec3 S ) {\n        position *= S;\n        position += 2.0 * cross( R.xyz, cross( R.xyz, position ) + R.w * position );\n        position += T;\n        return position;\n    }\n    ${e.vertexShader}\n`.replace("#include <begin_vertex>","#include <begin_vertex>\n      transformed = trs(transformed, instT, instR, instS);\n")}}),lP=new fl({color:$R,side:Qn}),cP=new fl({color:eP,side:Qn}),uP=new fl({color:"white",side:Qn}),hP=new fl({color:"black",side:Qn}),dP=new dl("rgb(0, 0, 0)"),pP=new dl("rgb(255, 255, 255)"),fP=new dl($R),mP=new dl(eP),gP=new fl({color:"black",side:Qn,transparent:!0,opacity:0}),yP={torcheMaterial:new fl({color:"black",side:Qn,transparent:!0,opacity:0}),blackOpacityFocus:gP,ghost:tP,whiteFull:uP,blackFull:hP,redFull:lP,redLineLone:rP,redLine:oP,cyanFull:cP,cyanLine:aP,red:$R,cyan:eP,blackLine:nP,hatchingMaterial:0,blackColor:dP,whiteColor:pP,blackLineLone:sP,cyanLineLone:iP,redColor:fP,cyanColor:mP};var vP,xP,bP,wP,_P,MP=0,EP=0;const SP=({pos:e,rot:t,scale:n,mesh:i,i:r,fig:s,lines:a,count:o})=>{i.hasOwnProperty("isBox")&&(wP.pos.push(e.x,e.y,e.z),$P||(o=EP,_P.pos.push(e.x-.35,e.y-.05,e.z+.35)),n?(n.x=n.x*i.parameters[0],n.y=n.y*i.parameters[1],n.z=n.z*i.parameters[2]):((n=new Wa(1,1,1)).x=i.parameters[0],n.y=i.parameters[1],n.z=i.parameters[2]),wP.scale.push(n.x,n.y,n.z),$P||_P.scale.push(n.x,n.y,n.z),(i=vP).isBox=!0,r=MP-1,MP++);var l=new Wa(e.x,e.y,e.z);const c=new Po(0,0,0,"XYZ"),u=new qa;var h=new Wa(1,1,1);n&&(h=new Wa(n.x,n.y,n.z)),t&&c.set(t.x,t.y,t.z);const d=new _o;var p;if(u.setFromEuler(c),d.compose(l,u,h),s.hatch||s.full)i.setMatrixAt(r,d),s.hatch&&(i.setColorAt(r,yP.whiteColor),$P||(l.x-=.35,l.y-=.05,l.z+=.35,(p=new _o).compose(l,u,h),i.setMatrixAt(Math.floor(o/2+r),p),i.setColorAt(Math.floor(o/2+r),yP.whiteColor))),s.full&&($P?i.setColorAt(r,yP.blackColor):(i.setColorAt(r,yP.redColor),l.x-=.35,l.y-=.05,l.z+=.35,(p=new _o).compose(l,u,h),i.setMatrixAt(o/2+r,p),i.setColorAt(o/2+r,yP.cyanColor)));else if(s.lines){const e=new _o,t=new Wa(0,0,0);e.compose(l,u,t),i.setMatrixAt(r,e)}i.hasOwnProperty("isBox")||(a.userData.Params.pos.push(e.x,e.y,e.z),a.userData.Params.rot.push(u.x,u.y,u.z,u.w),a.userData.Params.scale.push(h.x,h.y,h.z),$P||(a.userData.ParamsCyan.pos.push(e.x-.35,e.y-.05,e.z+.35),a.userData.ParamsCyan.rot.push(u.x,u.y,u.z,u.w),a.userData.ParamsCyan.scale.push(h.x,h.y,h.z))),i.hasOwnProperty("isBox")&&(wP.rot.push(u.x,u.y,u.z,u.w),$P||_P.rot.push(u.x,u.y,u.z,u.w))},TP=(e,t)=>{Fv={},e.forEach((e=>{"PlaneGeometry"!=e.geometry.type&&zv(e.geometry)})),EP=0;for(const e in Fv)Fv[e].forEach((e=>{if("BoxGeometry"===e.geometry.type)e.count++,$P||(e.count=Math.floor(2*e.count)),EP+=e.count,e.instanceNum=0,e.instancedMesh={isBox:!0,parameters:e.args};else if(e.count>1){e.count++,$P||(e.count=Math.floor(2*e.count+2)),e.instancedMesh=new Kd(e.geometry,yP.whiteFull,e.count),e.instancedMesh.geometry.center(),e.instancedMesh.instanceMatrix.needsUpdate=!0,t.push(e.instancedMesh),e.instanceNum=0;var n=new $p(e.instancedMesh.geometry);n.setAttribute("linewidth",new Hd(new Float32Array([5]),1));var i=(new eg).copy(n);i.center(),i.instanceCount=1/0;var r=$P?yP.blackLine:yP.redLine;if(r.needsUpdate=!0,e.instanceEdges=new ap(i,r),e.instanceEdges.frustumCulled=!1,e.instanceEdges.userData.Params={pos:[],rot:[],scale:[]},!$P){var s=new $p(e.instancedMesh.geometry),a=(new eg).copy(s);a.center(),a.instanceCount=1/0,e.instanceEdgesCyan=new ap(a,yP.cyanLine),yP.cyanLine.needsUpdate=!0,e.instanceEdges.frustumCulled=!1,e.instanceEdges.userData.ParamsCyan={pos:[],rot:[],scale:[]}}}else e.instanceNum=-1}));if(EP>0){(vP=new Kd(new ac(1,1,1),yP.whiteFull,EP)).instanceMatrix.needsUpdate=!0;var n=new $p(vP.geometry),i=(new eg).copy(n);i.center(),i.instanceCount=1/0;var r,s=$P?yP.blackLine:yP.redLine;(xP=new ap(i,s)).frustumCulled=!1,wP={pos:[],rot:[],scale:[]},$P||((r=(new eg).copy(n)).center(),r.instanceCount=1/0,(bP=new ap(r,yP.cyanLine)).frustumCulled=!1,_P={pos:[],rot:[],scale:[]}),MP=1}e.forEach((e=>{var n=zv(e.geometry);if(e.hasOwnProperty("parentGroup")&&(n.instanceNum=-1),e.hasOwnProperty("position")&&(e.pos=e.position),e.hasOwnProperty("rotation")&&(e.rot=e.position),e.attributes){const t=new zl;t.setAttribute("position",new _l(e.attributes.positions,3)),n.geometry=t,n.edges=new $p(t),n.instanceNum=-1}n.instanceNum>-1||"BoxGeometry"===n.geometry.type&&!e.hasOwnProperty("parentGroup")?e.hatch||e.full?(SP({pos:e.pos,rot:e.rot,scale:e.scale,mesh:n.instancedMesh,i:n.instanceNum,fig:e,lines:n.instanceEdges,count:n.count}),n.instanceNum++):SP({pos:e.pos,rot:e.rot,scale:e.scale,mesh:n.instancedMesh,i:n.instanceNum,fig:e,lines:n.instanceEdges,count:n.count}):((e,t,n)=>{var i;(e.hatch||e.full||e.lines)&&(n&&(i=function(e,t,n,i){var r=[],s=!!t&&yP.whiteFull;if($P){if(s=n?yP.blackFull:s,n||t){var a=new rc(e.geometry,s);a.userData.color="black",r.push(a)}i&&((i=new ap(e.edges,yP.blackLineLone)).userData.color="black",r.push(i))}else{if(n||t){s=n?yP.redFull:s;var o=new rc(e.geometry,s);o.userData.color="red",s=n?yP.cyanFull:s;var l=new rc(e.geometry,s);l.userData.color="cyan",r.push(o,l)}if(i){var c=new ap(e.edges,yP.redLineLone);c.userData.color="red";var u=new ap(e.edges,yP.cyanLineLone);u.userData.color="cyan",r.push(c,u)}}return r}(n,e.hatch,e.full,e.lines)),i.forEach((n=>{e.hasOwnProperty("uncentered")&&e.uncentered||n.geometry.center(),n.position.set(e.pos.x,e.pos.y,e.pos.z),"cyan"===n.userData.color&&(n.position.x-=.35,n.position.y-=.05,n.position.z+=.35),e.hasOwnProperty("rot")&&n.rotation.set(e.rot.x,e.rot.y,e.rot.z),e.hasOwnProperty("scale")&&n.scale.set(e.scale.x+.01,e.scale.y+.01,e.scale.z+.01),e.hasOwnProperty("parentGroup")?AP[e.parentGroup].add(n):t.push(n)})))})(e,t,n)})),vP&&i&&(i.setAttribute("instT",new Hd(new Float32Array(wP.pos),3)),i.setAttribute("instR",new Hd(new Float32Array(wP.rot),4)),i.setAttribute("instS",new Hd(new Float32Array(wP.scale),3)),t.push(vP,xP),$P||(r.setAttribute("instT",new Hd(new Float32Array(_P.pos),3)),r.setAttribute("instR",new Hd(new Float32Array(_P.rot),4)),r.setAttribute("instS",new Hd(new Float32Array(_P.scale),3)),t.push(bP)),vP.instanceColor&&(vP.instanceColor.needsUpdate=!0));for(const e in Fv)Fv[e].forEach((e=>{e.hasOwnProperty("instanceMesh")&&(e.instanceMesh.instanceColor.needsUpdate=!0),e.hasOwnProperty("instanceEdges")&&(e.instanceEdges.geometry.setAttribute("instT",new Hd(new Float32Array(e.instanceEdges.userData.Params.pos),3)),e.instanceEdges.geometry.setAttribute("instR",new Hd(new Float32Array(e.instanceEdges.userData.Params.rot),4)),e.instanceEdges.geometry.setAttribute("instS",new Hd(new Float32Array(e.instanceEdges.userData.Params.scale),3)),t.push(e.instanceEdges),$P||(e.instanceEdgesCyan.geometry.setAttribute("instT",new Hd(new Float32Array(e.instanceEdges.userData.ParamsCyan.pos),3)),e.instanceEdgesCyan.geometry.setAttribute("instR",new Hd(new Float32Array(e.instanceEdges.userData.ParamsCyan.rot),4)),e.instanceEdgesCyan.geometry.setAttribute("instS",new Hd(new Float32Array(e.instanceEdges.userData.ParamsCyan.scale),3)),t.push(e.instanceEdgesCyan)))}))};var AP={};const CP=(t,n,i,r,s)=>{let a=!1;const o=[];var l=[];(e=>{if(AP={},e)for(const n in e){var t=e[n];AP[n]=new Yh,t.hasOwnProperty("pos")&&AP[n].position.set(t.pos.x,t.pos.y,t.pos.z),t.hasOwnProperty("rot")&&AP[n].rotation.set(t.rot.x,t.rot.y,t.rot.z)}})(r),TP(n,o);for(const e in AP){var c=AP[e];(new Ya).setFromObject(c).getCenter(c.position).multiplyScalar(-1),o.push(c)}const u=new Yh;if(u.userData.color="red",s.hasOwnProperty("commune")&&(a=!0,u.position.set(s.deltaLocation.x,s.deltaLocation.y,s.deltaLocation.z)),"roomGroup"===t.name){if(function(){for(let n=0;n<o.length;n++)if("roomGroup"===t.name){if(o[n].isGroup||o[n].isLineSegments){if(o[n].isGroup){var e=[];o[n].updateWorldMatrix(!1,!0),o[n].children.forEach((t=>{if(t.material===yP.whiteFull){t.updateMatrixWorld(!0);var n=t.geometry.clone();n.applyMatrix4(t.matrixWorld);for(const e in n.attributes)"position"!==e&&n.deleteAttribute(e);(n=n.toNonIndexed()).index=null,e.push(n)}}));const t=Ov(e,!1);t.userData.groupMerged=!0,l.push(t)}}else o[n].userData.groupMerged=!1,l.push(o[n]);u.add(o[n])}}(),a){let e={bbox:(new Ya).setFromObject(u),name:s.name};IP.push(e)}rD(),_w(l,a,s.deltaLocation)}else o.forEach((e=>u.add(e)));var h=!1;if(u.userData.fxMetaData={genid:s.genid,hash:s.hash,objktid:s.objktid},"movingGroup"===t.name)if(s.loc){t=Jk;const e=s.loc;u.position.set(GL(e.position.x),GL(e.position.y),GL(e.position.z)),u.rotation.set(GL(e.rotation.x),GL(e.rotation.y),GL(e.rotation.z)),u.scale.set(GL(e.scale.x),GL(e.scale.y),GL(e.scale.z)),h=!0,Jk.attach(u),Mw()}else u.userData.tokenType="sculpture",u.position.z-=4,HL(u);h||(u.children.forEach((e=>{e.isLineSegments||(e.castShadow=!0,e.receiveShadow=!0)})),t.add(u)),setTimeout((()=>{rA()}),400),console.log("%cLoading new anaver.se native content.","font-weight:bolder;text-decoration:underline"),s.gallery&&(console.log("%cBuilding gallery.","font-weight:bolder;text-decoration:underline"),(t=>{const n={objkt:[],tezos:[],openSea:[],ethereum:[],solana:[],block:[],sculpture:[],IIIF:[],datavis:[]};if(t.forEach((e=>n[e.tokenType].push(e))),n.tezos=[...n.tezos,...n.objkt],n.ethereum=[...n.ethereum,...n.openSea],n.tezos.length>0){const e={native:!1,blockchain:"tezos",assetList:n.tezos};dA(e)}if(n.solana.length>0)for(let e=0;e<n.solana.length;e++)setTimeout((()=>{const t=n.solana[e];t.native=!1,t.blockchain=t.tokenType,dA(t)}),500*e);n.block.length>0&&(n.block.forEach((t=>{var n=new Yh;n.userData=t.block,n.userData.tokenType="block";const i=new e[t.block.geometry.type](...t.block.geometry.args),r=new rc(i,yP.whiteFull),s=new $p(i),a=new ap(s,yP.blackLineLone);n.add(r,a),n.position.set(GL(t.position.x),GL(t.position.y),GL(t.position.z)),n.rotation.set(GL(t.rotation.x),GL(t.rotation.y),GL(t.rotation.z)),n.scale.set(GL(t.scale.x),GL(t.scale.y),GL(t.scale.z)),Jk.attach(n)})),Mw()),n.sculpture.length>0&&CL(n.sculpture),n.IIIF.length>0&&n.IIIF.forEach((e=>{switch(e.IIIFdata.source){case"Gallica":DI(e.IIIFdata,e);break;case"BritishLibrary":cL(e.IIIFdata,e)}})),n.datavis.length>0&&n.datavis.forEach((e=>{switch(e.datavis.feedType){case"teztok-nft-livefeed":$A(0,e);break;case"teztok-nft-lat-sales":aC(e.datavis.args.targetWallet,e);break;case"teztok-nft-lat-purchases":oC(e.datavis.args.targetWallet,e);break;case"teztok-nft-lat-transact":cC(0)}}))})(s.gallery.gallery))},IP=[];var LP={room:{},skybox:{},gallery:[]},RP={},PP=0,kP=0;const DP=()=>kP=0,NP=(e,t)=>LP[e]=t,OP=new Worker(new URL(n.p+n.u(260),n.b));var UP;"undefined"!=typeof OffscreenCanvas?UP=new Worker(new URL(n.p+n.u(216),n.b)):setTimeout((()=>{console.log("This browser does not support offscreen canvas."),uk()}),250);var BP=!0;const FP=["PAINTING THE SKIES","CALLING THE UNIVERSE","SHUFFLING THE COSMOS","GENERATING INFINITY"],zP=["CHANGING LOCATION","GOING SOMEWHERE ELSE","PLANNING ESCAPE","BEAM ME UP SCOTTY","VERSING ANA","GENERATING VERTICES","INSTANCIATING MESHES","UNFRIENDING GPU"],GP=e=>e[Math.floor(Math.random()*e.length)],HP=(e,t)=>{const n=t.toUpperCase();"firstPerson"===e?(document.getElementById("firstPersonLegendR").innerText=n,document.getElementById("firstPersonLegendG").innerText=n):"room"===e&&(document.getElementById("roomLegendR").innerText=n,document.getElementById("roomLegendG").innerText=n)},VP=(e,t)=>{setInterval((()=>{IP.forEach((e=>{e.bbox.containsPoint(aD.position)&&HP("room",e.name)}))}),2e3);const n=[];e.hasOwnProperty("gallery_id")||(e.name=e.name.substring(0,e.name.lastIndexOf("#")-1),e.gallery_id=KT[e.name].gallery_id),(0,Dv.request)("https://data.objkt.com/v3/graphql",Dv.gql`
      query getAllIterations($galleryId: String) {
        gallery(where: { gallery_id: { _eq: $galleryId } }) {
          tokens(order_by: { id: asc }) {
            fa_contract
            token_id
            token {
              name
              artifact_uri
              ophash
              holders(
                limit: 1
                order_by: { last_incremented_at: desc_nulls_last }
              ) {
                holder {
                  alias
                }
              }
              attributes {
                attribute {
                  name
                  value
                }
              }
            }
          }
        }
      }
    `,{galleryId:e.gallery_id}).then((i=>{for(let e=0;e<i.gallery[0].tokens.length;e++){const t=i.gallery[0].tokens[e],r=t.token.artifact_uri,s=r.replace("ipfs://","").substring(r.indexOf("/?fxhash")+2,r.indexOf("/?fxhash")+53);let a="";t.token.holders[0].holder.alias&&(a=t.token.holders[0].holder.alias+"'S "),t.token.attributes.forEach((e=>{"name"!==e.attribute.name&&"Name"!==e.attribute.name||(a+=e.attribute.value)})),a=a.toUpperCase(),n.push({hash:s,name:a})}LP.room={contract:i.gallery[0].tokens[0].fa_contract,token_id:i.gallery[0].tokens[0].token_id,name:e.name,blockchain:e.chain},OP.postMessage({figuresUrl:e.figuresUrl,hash:n,type:"world",tag:{room:!0},name:"Commune",gallery:t})})),bk()},qP=(e,n,i,r,s,a)=>{switch(0===t["Tlchargement premier espace"].dbut&&(t["Tlchargement premier espace"].dbut=performance.now()),e.type){case"skybox":e.hasOwnProperty("tag")&&(LP.skybox={contract:e.contract,token_id:n,name:r,blockchain:e.chain});var o=1.75*window.innerHeight,l=e.skyboxUrl;rA(GP(FP)),"undefined"!=typeof OffscreenCanvas&&UP.postMessage({side:o,skyurl:l,hash:i});break;default:var c;if(e.hasOwnProperty("tag")){c=e.tag,e.tag.room&&(LP.room={contract:e.contract,token_id:n,name:r,blockchain:e.chain},LP.gallery=[]),c.room&&rA(GP(zP)),OP.postMessage({figuresUrl:e.figuresUrl,hash:i,type:e.type,tag:c,name:r,loc:s,genid:e.id,objktid:n,gallery:a});break}}};"undefined"!=typeof OffscreenCanvas&&(UP.onmessage=e=>{6==++PP?(RP[e.data.pos]=e.data.imagedata,uD(RP,e.data.side),RP={},PP=0):RP[e.data.pos]=e.data.imagedata});OP.onmessage=e=>(e=>{switch(e.type){case"purge":jk.clear(),Jk.clear(),Yk.clear(),(()=>{Tk(1);const e=[new rc(new Ac(0,0))];e[0].position.y=-20,_w(e)})(),clearInterval(void 0);break;case"firstPerson":if(jk.clear(),CP(jk,e.figures,0,e.groups,e),jk.scale.set(.1,.1,.1),e.features.hasOwnProperty("fpLoc")){const t=e.features.fpLoc;jk.rotation.set(t.rot.x,t.rot.y,t.rot.z),jk.position.set(t.pos.x,t.pos.y,t.pos.z)}else jk.position.set(.1,-.11,-.1),jk.rotation.y=-Math.PI/2;"string"==typeof e.name&&HP(e.type,e.name);break;case"world":e.tag.room?(oD&&(oD.moveSpeed=100),Jk.clear(),e.hasOwnProperty("commune")||Yk.clear(),BP&&(BP=!1,t["Tlchargement premier espace"].fin=performance.now(),t["Cration Monde"].dbut=performance.now()),e.hasOwnProperty("startPoint")?kP=e.startPoint:LP.hasOwnProperty("startPoint")?LP.startPoint&&(kP=LP.startPoint):kP=0,kP?(aD.position.x=kP.position.x,aD.position.y=kP.position.y,aD.position.z=kP.position.z,aD.lookAt(kP.position.x+kP.direction.x,kP.position.y+kP.direction.y,kP.position.z+kP.direction.z)):(aD.position.x=0,aD.position.y=100,aD.position.z=0,kP=0),e.features,"string"==typeof e.name&&HP("room",e.name),e.hasOwnProperty("commune")||Yk.clear(),CP(Yk,e.figures,0,e.groups,e),$P||(Yk.children[0].position.z=.1)):e.tag.item&&CP(Kk,e.figures,0,e.groups,e)}})(e.data);const WP=document.getElementById("titleG"),jP=document.getElementById("titleR"),XP=document.getElementById("landingTitle"),YP=document.getElementById("hider"),JP=(document.getElementById("titleG"),document.getElementById("titleG"),document.getElementById("enter")),KP=document.getElementById("enterG"),ZP=document.getElementById("enterR"),QP=(document.getElementById("tips"),document.getElementById("helper"));var $P=!0;document.getElementById("perfMode");const ek=window.localStorage;let tk=1;document.getElementById("tutorial").addEventListener("click",(()=>{tk&&(ML(UT),setTimeout((()=>{nk()}),400),tk=0)})),document.getElementById("tutohelp").addEventListener("click",(()=>{tk&&(ML(UT),setTimeout((()=>{nk()}),400),tk=0)}));const nk=()=>{KP.innerText="ENTER TUTORIAL",ZP.innerText="ENTER TUTORIAL",JP.addEventListener("click",zT),uk()};ek.getItem("mode")?(ek.getItem("mode"),$P=!0):ek.setItem("mode","monochrome");const ik=()=>{OT&&(IT.play(),NT=!0,DT.innerHTML='<img  style="width:15px;height:15px" src="icons/stop.svg">'),setTimeout((()=>{ak&&$k(!0)}),500),document.getElementById("walletDetail").style.display="none";const e=window.location.search,t=new URLSearchParams(e);0!==xA.length||t.has("wallet")||t.has("ethwallet")||(console.log("No wallets found. Loading anaglyphic's collection as a backup."),gA("tz1hkKqGk3fPPYroNagWpWsxxV3x8P8jqwp9")),(0,Dv.request)("https://data.objkt.com/v3/graphql",Dv.gql`
      query getObjktCuration {
        gallery(
          where: {
            registry: { name: { _eq: "objkt" } }
            items: { _gt: 4 }
            name: {}
            curators: { curator_address: {} }
          }
          order_by: { updated_at: desc }
          limit: 20
        ) {
          gallery_id
          name
          logo
          items
          description
          slug
          curators {
            curator {
              address
              alias
              logo
              twitter
            }
          }
          tokens {
            token {
              content_rating
            }
          }
        }
      }
    `).then((e=>{const t={gallery:[]};e.gallery.forEach((e=>{try{e.tokens.some((e=>"mature"===e.token.content_rating))||t.gallery.push(e)}catch(e){console.log("Unable to load objkt curation due to unavailable content rating.")}})),VT(t,!0)})),oD.lock(),eD(),YP.style.animation="hide .8s linear forwards",setTimeout((()=>{YP.style.display="none"}),1e3)};JP.addEventListener("click",ik);var rk=!1,sk=1;document.body.addEventListener("touchstart",(()=>{QP.style.display="none",sk=4,document.getElementById("fullscreen-button").addEventListener("touchstart",(()=>{document.body.requestFullscreen&&document.body.requestFullscreen()}))})),document.getElementById("helper").addEventListener("touchstart",(()=>{QP.style.display="none",ok()}));var ak=!0;const ok=()=>{ak=!1,rk||(rk=!0,$k(!1),pk(),setTimeout((()=>{ik()}),2e3))};JP.addEventListener("touchstart",ok);const lk=(e,t)=>{document.getElementById("walletSync").style.animation="reveal .8s linear forwards",e&&(t?(WP.innerHTML=e+"<br>x<br>ANAVER.SE",jP.innerHTML=e+"<br>x<br>ANAVER.SE",document.title=e+" x ANAVER.SE"):(WP.innerHTML=e.toUpperCase()+"'S<br>ANAVER.SE",jP.innerHTML=e.toUpperCase()+"'S<br>ANAVER.SE",document.title=e.toUpperCase()+"'S ANAVER.SE")),document.getElementById("barcode").style.animation="reveal .8s linear forwards",XP.style.animation="reveal .8s linear forwards"};var ck=!1;const uk=()=>{ck||(document.getElementById("barcode").addEventListener("click",lD),document.getElementById("barcode").style.cursor="pointer",ck=!0,JP.style.animation="reveal .5s linear forwards",JP.style.pointerEvents="all",Pn("#barrouge").transition().duration(500).attr("transform","translate(-2,0)"),Pn("#barcyan").transition().duration(500).attr("transform","translate(2,0)"),WP.style.animation="shift .5s linear forwards",jP.style.animation="unshift .5s linear forwards",document.getElementById("enterR").style.animation="unshift .5s linear forwards",document.getElementById("enterG").style.animation="shift .5s linear forwards",t["Cration Monde"].fin=performance.now(),t["Total ANAVER.SE"].fin=performance.now(),setTimeout((()=>{horlogesLog()}),2500))};var hk=!1,dk=1;const pk=()=>{dk=!1,$k(!1),XP.style.display="flex",JP.style.display="flex",hk=!0,document.getElementById("mobile-control").style.display="block";let e=!1;document.getElementById("help-trigger-button").addEventListener("touchstart",(()=>{e?(document.getElementById("mobile-help-panel").style.display="none",document.getElementById("hang-button-desc").style.display="none"):(document.getElementById("mobile-help-panel").style.display="block","flex"===document.getElementById("hang-button").style.display&&(document.getElementById("hang-button-desc").style.display="block")),e=!e})),document.getElementById("mobile-control").style.display="block";try{void 0!==screen.orientation.type&&"landscape-primary"===screen.orientation.type&&screen.orientation.lock("landscape-primary")}catch(e){console.log("Are you using safari for iOS ?"),uk()}},fk={IIIF:"The IIIF consortium lets you import high quality public domain assets from the world's largest National Libraries, Museum and \n  Universities. This tab helps you load documents hosted by the Bibliothque Nationale de France through its <strong>Gallica</strong> service\n  and by the British Library through its <strong>Available Online</strong> program. Click on a service's image to access it. Clicking a link \n  (in red) will open the service's web page.",highlights:'In this page, you can select and <b>load generative structures, \n      skies and items</b>. Because the anaverse is "generative", each element \n      you see in this table is a "generator", i.e. an algorithm creating multiple versions\n      of the same type of worlds. Clicking on a generator will reveal a \n      list of the different versions, or "iterations", available for the loading.',"Loaded collection":'This tab displays the <b>personal collection</b> of the identity you signed in as. If you didn\'t specify an identity,\n                        Anaglyphic\'s personal collection is loaded instead.\n                        To hang a painting, click first on an artist thumbnail, and then select the \n                        piece you want to hang. <a href="https://observablehq.com/@anaglyph-ic/anaverse-seminar-list"\n                        target="blank"><span style="cursor:pointer;color:white;background:red;padding:2px;">Seminar artists</span></a> are marked in red and white.',"Loaded creations":"This tab displays the <b>personal creations</b> of the identity you signed in as. \n                        If you are not signed in, Ana's personal creations will be loaded instead.\n                        To hang a painting, click first on a collection thumbnail, and then select the \n                        piece you want to hang.","Local galleries":'This tab displays the <b>local galleries you created</b>. These galleries are only accessible\n                        on your current machine, and only as long as you do not purge your local website storage.\n                        To share a gallery with the world, you will need to learn how to <a href="https://observablehq.com/collection/@anaglyph-ic/starting-with-the-anaver-se"\n                        target="blank">export a local gallery</a>.',"Gallery builder":"Use these inputs to either save locally your current gallery or import a compatible gallery.json file.","Public galleries":"This tab displays <b>publicly accessible blockchain-indexed galleries</b>. These galleries are \n                        accessible by all users at all times. They are handcrafted by curators.","Data visualisation":"This tab displays <b>data visualisation procedures</b> available in the anaverse. The data presented \n                          in this tab is public and made to fit in a 3D environment for exploration.","fx(text)":"This tab enables you to search for an fx(text) article and load its tezos-indexed content. The content will be made available for you to hang in the current space.","Objkt Curated":"This tab lets you search for <a href='https://objkt.com/'>objkt.com</a> user curations. If a profile is synced in,\n   this tab will start with the profiles' most recent curations. If not, the most recent curations of all users will be displayed. Use the \n   search field to look for a curation (the search engine looks for the name of the gallery). Clicking on a <strong>curation thumbnail</strong> will load it in a gallery template.\n   Click on <strong>Load assets</strong> instead to load each piece in the Contract import tab and build your own 3D gallery. Only curated galleries with\n   more than five items are displayed.","Mini games":"Mini games for the anaverse.","Your Views inventory":'This panel shows all the pieces privately contained in your "Views vault". These elements are visible to you only. The images and metadata are called from the secure Views servers.',"Active services":"This tab shows all active services in your current anaverse session and lets you terminate them.","Contract import":"This form lets you import artworks by pasting a contract address.",Gallica:"Gallica is the Bibliothque nationale de France's digital library. Established in October 1997, it has more than 6 million digitized materials, including photographs, cartoons, drawings, prints, posters, maps, and more. All library materials are freely available. Use the IIIF format to import a Gallica resource. Simply paste a link from the Gallica integration system to populate the relevant fields.","Screen record":"Use this panel to record your screen while navigating the anaverse.",Seminars:' This tab lets you load <a href="https://observablehq.com/@anaglyph-ic/anaverse-seminar-series"\n    target="blank">Anaverse seminar series</a> videos within your current anaverse context. It also lets you load other compatible videos, for you which you need to provide a valid URL. Please bear in mind that these videos need to be fully preloaded before being played, and that they can be very heavy.',Construction:'This tab lets you add <a href="https://threejs.org/docs/index.html?q=geometry" target="_blank">Three JS elements</a> into the world.'};var mk=!1;const gk=document.getElementById("mobile-jetpack"),yk=document.getElementById("header"),vk=document.getElementById("tokens"),xk=()=>{const e=document.getElementById("collection");vk.style.top="0%",vk.style.animation="0.4s linear 0s 1 normal forwards running tokensSlideLeft";var t=document.createElement("div");t.innerText="LOADING COLLECTION ...",t.id="loadingCollection",e.appendChild(t)},bk=e=>{var t=document.getElementById("anavTooltip");t.style.animation="0.2s linear 0s 1 normal forwards running reveal",mk?(window.innerWidth>window.innerHeight&&oD.lock(),ak&&(yk.style.animation="0.2s linear 0s 1 normal forwards running loaderHeaderSlideUp",vk.style.top="0px",vk.style.animation="0.2s linear 0s 1 normal forwards running tokensSlideDown",t.style.animation="0.2s linear 0s 1 normal forwards running hide",setTimeout((()=>{vk.innerHTML="",t.style.zIndex=0,t.style.display="none",mk=!1}),200)),hk&&(gk.style.display="flex",vk.innerHTML="",t.style.zIndex=0,t.style.display="none",mk=!1)):(ak&&(yk.style.animation="0.2s linear 0s 1 normal forwards running loaderHeaderSlideDown"),window.innerWidth>window.innerHeight&&oD.unlock(),e?(()=>{const e=document.getElementById("tokens");e.style.width="200%",e.style.height="100%";const t=document.createElement("div");t.id="list",e.append(t);const n=document.createElement("div");n.id="collection",e.append(t,n),ak&&(e.style.position="relative",e.style.top="100%",e.style.animation="0.2s linear 0s 1 normal forwards running loaderSlideTop");var i=document.createElement("div"),r=document.createElement("ul");if(r.style.listStyle="none",e.style.gridTemplateColumns="",e.style.overflow="hidden hidden",e.style.display="grid",mA.length>0){r.className="tokensDiv";var s=document.createElement("div");s.innerText="Personal tokens",s.className="tokenCatTitle",s.style.cursor="pointer",r.style.width="90%",r.style.borderRight="2px solid red",s.addEventListener("click",(()=>{"wrap"===r.style.flexWrap?(r.style.display="inline-flex",r.style.height="220px",r.style.alignItems="flex-start",r.style.flexWrap="nowrap"):(r.style.flexWrap="wrap",r.style.height="",r.style.alignItems="")})),i.appendChild(s),r.style.height="220px",r.style.alignItems="flex-start",r.style.flexWrap="nowrap",mA.forEach((e=>{r.append(e)}))}var a=[];for(const e in KT)a.push(KT[e]);var o=a[parseInt(Math.random()*a.length)].description;o.length>500&&(o=o.substring(0,500)+"...");var l="";(Nn<=6||Nn>=20)&&(l='style="background-color:#313131;color:white;"',e.style.color="white");var c=document.createElement("div");c.id="highlight",c.innerHTML=`<div ${l} id='highlightDesc' class='helperPanel'>\n    ${fk.highlights}\n        </div>\n        `;var u=document.createElement("div");u.innerHTML="<div class='tokenCatTitle'>First Person - Handeld Items</div>";var h=document.createElement("div");h.className="tokensDiv";var d=document.createElement("div");d.innerHTML="<div class='tokenCatTitle'>Rooms & spaces</div>";var p=document.createElement("div");p.className="tokensDiv";var f=document.createElement("div");f.innerHTML="<div class='tokenCatTitle'>Skies and environments</div>";var m=document.createElement("div");m.className="tokensDiv";var g=document.createElement("div");g.innerHTML="<div class='tokenCatTitle'>Sculptures</div>";var y=document.createElement("div");y.className="tokensDiv";for(const e in KT){const t=KT[e];"firstPerson"===t.type?h.appendChild(t.DOMelements.profile):"world"===t.type&&t.tag.room||"world"===t.type&&t.tag.commune?p.appendChild(t.DOMelements.profile):"skybox"===t.type?BT?9574===t.id&&m.appendChild(t.DOMelements.profile):m.appendChild(t.DOMelements.profile):"world"===t.type&&t.tag.item&&y.appendChild(t.DOMelements.profile)}(BT?[m]:[c,i,r,d,p,f,m,g,y,u,h]).forEach((e=>t.appendChild(e)))})():_I(),t.style.display="grid",t.style.zIndex=48,mk=!0,hk&&(gk.style.display="none"))};var wk=0;const _k=()=>Mk=!Mk;var Mk=!1,Ek=!0,Sk=!1;const Tk=e=>Sk=e;var Ak=0;Rn({minus:"-"});const Ck=document.getElementById("audio-radio");var Ik=document.getElementById("helper");Ik.style.display="block",Ik.addEventListener("touchstart",(()=>{Ik.style.display="none"}));const Lk=e=>wk=e;function Rk(){if(Kk.children.length>0){var e=Kk.children[0];e.children.forEach((e=>{("Mesh"===e.type||e.isLineSegments)&&("PlaneGeometry"===e.geometry.type?(e.material.opacity=1,e.material.transparent=!1):e.isLineSegments||(e.material=yP.whiteFull))})),Jk.attach(e),Mw(),Kk.clear(),sT(!0),kk=0,Pk(),Mk&&_k()}}function Pk(){let e=document.getElementById("worldItemTooltip");e.innerHTML="",e.style.display="none",sT(1),hk&&(document.getElementById("hang-button").style.display="none")}let kk=0;const Dk=e=>{if(!wk)switch(e.code){case"ShiftLeft":Sk?Sk=!1:Ak||(Sk=!0,setTimeout((()=>{Sk=!1}),7e3),Ak=!0,setTimeout((()=>{Ak=!1}),2e4));break;case"KeyB":"0.3s linear 0s 1 normal forwards running slideRight"===Ik.style.animation?Ik.style.animation="slideLeft .3s linear forwards":Ik.style.animation="slideRight .3s linear forwards";break;case"KeyL":bk(!0);break;case"KeyE":default:break;case"KeyC":let e=document.getElementById("viseur");"block"===e.style.display?e.style.display="none":e.style.display="block";break;case"KeyK":document.body.requestFullscreen();break;case"KeyG":0===Kk.children.length&&bk();break;case"KeyN":if("none"===document.getElementById("worldItemTooltip").style.display){if(tT){kk=1;let e=tT.object.parent;Kk.attach(e),HL(tT.object.parent),oD.unlock(),sT(0)}}else Pk();break;case"KeyH":Rk();break;case"KeyY":"flex"===Ck.style.display?Ck.style.display="none":Ck.style.display="flex";break;case"KeyV":Ek=!Ek}},Nk=new Po(0,0,0,"YXZ"),Ok=new Wa,Uk={type:"change"},Bk={type:"lock"},Fk={type:"unlock"},zk=Math.PI/2;function Gk(e){return e>-3*zk/2&&e<-zk/2?-zk:e>-zk/2&&e<zk/2?0:e>zk/2&&e<1.5*zk?zk:e>1.5*zk||e<-3*zk/2?2*zk:void 0}var Hk,Vk,qk;class Wk extends ea{constructor(e,t){function n(){Hk.domElement.ownerDocument.pointerLockElement===Hk.domElement?(Hk.dispatchEvent(Bk),Hk.isLocked=!0):(Hk.dispatchEvent(Fk),Hk.isLocked=!1)}function i(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}super(),void 0===t&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,Hk=this,Vk=t=>{if(!1===Hk.isLocked)return;const n=t.movementX||t.mozMovementX||t.webkitMovementX||0,i=t.movementY||t.mozMovementY||t.webkitMovementY||0;if(Nk.setFromQuaternion(e.quaternion),Nk.y-=.002*n,Nk.x-=.002*i,Nk.x=Math.max(zk-Hk.maxPolarAngle,Math.min(zk-Hk.minPolarAngle,Nk.x)),e.quaternion.setFromEuler(Nk),Mk){var r=new Po(Gk(Nk._x),Gk(Nk._y),Gk(Nk._z),"YXZ");Kk.quaternion.setFromEuler(r)}else Kk.quaternion.setFromEuler(Nk);Zk.quaternion.setFromEuler(Nk),Hk.dispatchEvent(Uk)},this.connect=function(){Hk.domElement.ownerDocument.addEventListener("mousemove",Vk),Hk.domElement.ownerDocument.addEventListener("pointerlockchange",n),Hk.domElement.ownerDocument.addEventListener("pointerlockerror",i)},this.disconnect=function(){Hk.domElement.ownerDocument.removeEventListener("mousemove",Vk),Hk.domElement.ownerDocument.removeEventListener("pointerlockchange",n),Hk.domElement.ownerDocument.removeEventListener("pointerlockerror",i)},this.dispose=function(){this.disconnect()},this.getObject=function(){return e},this.getDirection=function(){const t=new Wa(0,0,-1);return function(n){return n.copy(t).applyQuaternion(e.quaternion)}}(),this.moveForward=function(t){Ok.setFromMatrixColumn(e.matrix,0),Ok.crossVectors(e.up,Ok),e.position.addScaledVector(Ok,t)},this.moveRight=function(t){Ok.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(Ok,t)},this.lock=()=>{this.domElement.requestPointerLock&&this.domElement.requestPointerLock()},this.unlock=()=>Hk.domElement.ownerDocument.exitPointerLock(),this.connect()}}const jk=new Yh;jk.name="fpGroup";const Xk=new Yh;Xk.name="worldGroup";const Yk=new Yh;Yk.name="roomGroup";const Jk=new Yh;Jk.name="itemGroup";const Kk=new Yh;Kk.name="movingGroup";const Zk=new Yh;Zk.name="torcheGroup";var Qk=!1;const $k=e=>Qk=e;var eD,tD=1;Xk.add(Yk,Jk,Kk,Zk);const nD=new Wa;let iD=0;const rD=()=>iD=!1;var sD,aD,oD;const lD=()=>{nD.y=0,kP?(aD.position.x=kP.position.x,aD.position.y=kP.position.y,aD.position.z=kP.position.z,aD.lookAt(kP.position.x+kP.direction.x,kP.position.y+kP.direction.y,kP.position.z+kP.direction.z)):aD.position.set(0,4,0)},cD=new Lm,uD=(e,t)=>{let n=[];Tk(1);for(const r in e){var i=document.createElement("canvas");i.width=t,i.height=t,i.getContext("2d").putImageData(e[r],0,0),n.push(i.toDataURL())}const r=cD.load(n);r.needsUpdate=!0,r.colorSpace=Ms,r.mapping=Gi,qk.background=r,setTimeout((()=>{rA(),Tk(0)}),1200),uk()},hD=()=>{const e=new Xg;let t=new ma;t.x=0,t.y=0,e.setFromCamera(t,aD),NP("startPoint",{position:{x:aD.position.x,y:aD.position.y,z:aD.position.z},direction:{x:e.ray.direction.x,y:e.ray.direction.y,z:e.ray.direction.z}}),document.getElementById("currentStartingPointDiv")&&(document.getElementById("currentStartingPointDiv").innerText="Current starting point:"+JSON.stringify(LP.startPoint))},dD=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((e=>e.charCodeAt(0)))),pD=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map((e=>e.charCodeAt(0))));var fD;const mD=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),gD=null!==(fD=String.fromCodePoint)&&void 0!==fD?fD:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};function yD(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=mD.get(e))&&void 0!==t?t:e}var vD,xD,bD,wD,_D,MD,ED,SD;function TD(e){return e>=vD.ZERO&&e<=vD.NINE}!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(vD||(vD={})),function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(xD||(xD={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(bD||(bD={})),(_D=wD||(wD={}))[_D.Legacy=0]="Legacy",_D[_D.Strict=1]="Strict",_D[_D.Attribute=2]="Attribute";class AD{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=bD.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=wD.Strict}startEntity(e){this.decodeMode=e,this.state=bD.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case bD.EntityStart:return e.charCodeAt(t)===vD.NUM?(this.state=bD.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=bD.NamedEntity,this.stateNamedEntity(e,t));case bD.NumericStart:return this.stateNumericStart(e,t);case bD.NumericDecimal:return this.stateNumericDecimal(e,t);case bD.NumericHex:return this.stateNumericHex(e,t);case bD.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===vD.LOWER_X?(this.state=bD.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=bD.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,i){if(t!==n){const r=n-t;this.result=this.result*Math.pow(i,r)+parseInt(e.substr(t,r),i),this.consumed+=r}}stateNumericHex(e,t){const n=t;for(;t<e.length;){const r=e.charCodeAt(t);if(!(TD(r)||(i=r,i>=vD.UPPER_A&&i<=vD.UPPER_F||i>=vD.LOWER_A&&i<=vD.LOWER_F)))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(r,3);t+=1}var i;return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const i=e.charCodeAt(t);if(!TD(i))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(i,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===vD.SEMI)this.consumed+=1;else if(this.decodeMode===wD.Strict)return 0;return this.emitCodePoint(yD(this.result),this.consumed),this.errors&&(e!==vD.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let i=n[this.treeIndex],r=(i&xD.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const a=e.charCodeAt(t);if(this.treeIndex=ID(n,i,this.treeIndex+Math.max(1,r),a),this.treeIndex<0)return 0===this.result||this.decodeMode===wD.Attribute&&(0===r||((s=a)===vD.EQUALS||function(e){return e>=vD.UPPER_A&&e<=vD.UPPER_Z||e>=vD.LOWER_A&&e<=vD.LOWER_Z||TD(e)}(s)))?0:this.emitNotTerminatedNamedEntity();if(i=n[this.treeIndex],r=(i&xD.VALUE_LENGTH)>>14,0!==r){if(a===vD.SEMI)return this.emitNamedEntityData(this.treeIndex,r,this.consumed+this.excess);this.decodeMode!==wD.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}var s;return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,i=(n[t]&xD.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:i}=this;return this.emitCodePoint(1===t?i[e]&~xD.VALUE_LENGTH:i[e+1],n),3===t&&this.emitCodePoint(i[e+2],n),n}end(){var e;switch(this.state){case bD.NamedEntity:return 0===this.result||this.decodeMode===wD.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case bD.NumericDecimal:return this.emitNumericEntity(0,2);case bD.NumericHex:return this.emitNumericEntity(0,3);case bD.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case bD.EntityStart:return 0}}}function CD(e){let t="";const n=new AD(e,(e=>t+=gD(e)));return function(e,i){let r=0,s=0;for(;(s=e.indexOf("&",s))>=0;){t+=e.slice(r,s),n.startEntity(i);const a=n.write(e,s+1);if(a<0){r=s+n.end();break}r=s+a,s=0===a?r+1:r}const a=t+e.slice(r);return t="",a}}function ID(e,t,n,i){const r=(t&xD.BRANCH_LENGTH)>>7,s=t&xD.JUMP_TABLE;if(0===r)return 0!==s&&i===s?n:-1;if(s){const t=i-s;return t<0||t>=r?-1:e[n+t]-1}let a=n,o=a+r-1;for(;a<=o;){const t=a+o>>>1,n=e[t];if(n<i)a=t+1;else{if(!(n>i))return e[t+r];o=t-1}}return-1}function LD(e){return e===MD.Space||e===MD.NewLine||e===MD.Tab||e===MD.FormFeed||e===MD.CarriageReturn}function RD(e){return e===MD.Slash||e===MD.Gt||LD(e)}function PD(e){return e>=MD.Zero&&e<=MD.Nine}CD(dD),CD(pD),function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"}(MD||(MD={})),function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"}(ED||(ED={})),function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"}(SD||(SD={}));const kD={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class DD{constructor({xmlMode:e=!1,decodeEntities:t=!0},n){this.cbs=n,this.state=ED.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=ED.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=e,this.decodeEntities=t,this.entityTrie=e?pD:dD}reset(){this.state=ED.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=ED.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(e){e===MD.Lt||!this.decodeEntities&&this.fastForwardTo(MD.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=ED.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===MD.Amp&&(this.state=ED.BeforeEntity)}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(t?RD(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=ED.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===MD.Gt||LD(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const e=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=e}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===kD.TitleEnd?this.decodeEntities&&e===MD.Amp&&(this.state=ED.BeforeEntity):this.fastForwardTo(MD.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===MD.Lt)}stateCDATASequence(e){e===kD.Cdata[this.sequenceIndex]?++this.sequenceIndex===kD.Cdata.length&&(this.state=ED.InCommentLike,this.currentSequence=kD.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=ED.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===kD.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=ED.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!RD(e):function(e){return e>=MD.LowerA&&e<=MD.LowerZ||e>=MD.UpperA&&e<=MD.UpperZ}(e)}startSpecial(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=ED.SpecialStartSequence}stateBeforeTagName(e){if(e===MD.ExclamationMark)this.state=ED.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===MD.Questionmark)this.state=ED.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const t=32|e;this.sectionStart=this.index,this.xmlMode||t!==kD.TitleEnd[2]?this.state=this.xmlMode||t!==kD.ScriptEnd[2]?ED.InTagName:ED.BeforeSpecialS:this.startSpecial(kD.TitleEnd,3)}else e===MD.Slash?this.state=ED.BeforeClosingTagName:(this.state=ED.Text,this.stateText(e))}stateInTagName(e){RD(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=ED.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){LD(e)||(e===MD.Gt?this.state=ED.Text:(this.state=this.isTagStartChar(e)?ED.InClosingTagName:ED.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===MD.Gt||LD(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=ED.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===MD.Gt||this.fastForwardTo(MD.Gt))&&(this.state=ED.Text,this.baseState=ED.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===MD.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=ED.InSpecialTag,this.sequenceIndex=0):this.state=ED.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===MD.Slash?this.state=ED.InSelfClosingTag:LD(e)||(this.state=ED.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===MD.Gt?(this.cbs.onselfclosingtag(this.index),this.state=ED.Text,this.baseState=ED.Text,this.sectionStart=this.index+1,this.isSpecial=!1):LD(e)||(this.state=ED.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===MD.Eq||RD(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=ED.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===MD.Eq?this.state=ED.BeforeAttributeValue:e===MD.Slash||e===MD.Gt?(this.cbs.onattribend(SD.NoValue,this.index),this.state=ED.BeforeAttributeName,this.stateBeforeAttributeName(e)):LD(e)||(this.cbs.onattribend(SD.NoValue,this.index),this.state=ED.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===MD.DoubleQuote?(this.state=ED.InAttributeValueDq,this.sectionStart=this.index+1):e===MD.SingleQuote?(this.state=ED.InAttributeValueSq,this.sectionStart=this.index+1):LD(e)||(this.sectionStart=this.index,this.state=ED.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===MD.DoubleQuote?SD.Double:SD.Single,this.index),this.state=ED.BeforeAttributeName):this.decodeEntities&&e===MD.Amp&&(this.baseState=this.state,this.state=ED.BeforeEntity)}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,MD.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,MD.SingleQuote)}stateInAttributeValueNoQuotes(e){LD(e)||e===MD.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(SD.Unquoted,this.index),this.state=ED.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===MD.Amp&&(this.baseState=this.state,this.state=ED.BeforeEntity)}stateBeforeDeclaration(e){e===MD.OpeningSquareBracket?(this.state=ED.CDATASequence,this.sequenceIndex=0):this.state=e===MD.Dash?ED.BeforeComment:ED.InDeclaration}stateInDeclaration(e){(e===MD.Gt||this.fastForwardTo(MD.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=ED.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===MD.Gt||this.fastForwardTo(MD.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=ED.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===MD.Dash?(this.state=ED.InCommentLike,this.currentSequence=kD.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=ED.InDeclaration}stateInSpecialComment(e){(e===MD.Gt||this.fastForwardTo(MD.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=ED.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const t=32|e;t===kD.ScriptEnd[3]?this.startSpecial(kD.ScriptEnd,4):t===kD.StyleEnd[3]?this.startSpecial(kD.StyleEnd,4):(this.state=ED.InTagName,this.stateInTagName(e))}stateBeforeEntity(e){this.entityExcess=1,this.entityResult=0,e===MD.Number?this.state=ED.BeforeNumericEntity:e===MD.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=ED.InNamedEntity,this.stateInNamedEntity(e))}stateInNamedEntity(e){if(this.entityExcess+=1,this.trieIndex=ID(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];const t=this.trieCurrent&xD.VALUE_LENGTH;if(t){const n=(t>>14)-1;if(this.allowLegacyEntity()||e===MD.Semi){const e=this.index-this.entityExcess+1;e>this.sectionStart&&this.emitPartial(this.sectionStart,e),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,0===n&&this.emitNamedEntity()}else this.trieIndex+=n}}emitNamedEntity(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&xD.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~xD.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(e){(32|e)===MD.LowerX?(this.entityExcess++,this.state=ED.InHexEntity):(this.state=ED.InNumericEntity,this.stateInNumericEntity(e))}emitNumericEntity(e){const t=this.index-this.entityExcess-1;t+2+Number(this.state===ED.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint(yD(this.entityResult))),this.state=this.baseState}stateInNumericEntity(e){e===MD.Semi?this.emitNumericEntity(!0):PD(e)?(this.entityResult=10*this.entityResult+(e-MD.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(e){e===MD.Semi?this.emitNumericEntity(!0):PD(e)?(this.entityResult=16*this.entityResult+(e-MD.Zero),this.entityExcess++):function(e){return e>=MD.UpperA&&e<=MD.UpperF||e>=MD.LowerA&&e<=MD.LowerF}(e)?(this.entityResult=16*this.entityResult+((32|e)-MD.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===ED.Text||this.baseState===ED.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===ED.Text||this.state===ED.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==ED.InAttributeValueDq&&this.state!==ED.InAttributeValueSq&&this.state!==ED.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case ED.Text:this.stateText(e);break;case ED.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case ED.InSpecialTag:this.stateInSpecialTag(e);break;case ED.CDATASequence:this.stateCDATASequence(e);break;case ED.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case ED.InAttributeName:this.stateInAttributeName(e);break;case ED.InCommentLike:this.stateInCommentLike(e);break;case ED.InSpecialComment:this.stateInSpecialComment(e);break;case ED.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case ED.InTagName:this.stateInTagName(e);break;case ED.InClosingTagName:this.stateInClosingTagName(e);break;case ED.BeforeTagName:this.stateBeforeTagName(e);break;case ED.AfterAttributeName:this.stateAfterAttributeName(e);break;case ED.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case ED.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case ED.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case ED.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case ED.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case ED.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case ED.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case ED.InDeclaration:this.stateInDeclaration(e);break;case ED.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case ED.BeforeComment:this.stateBeforeComment(e);break;case ED.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case ED.InNamedEntity:this.stateInNamedEntity(e);break;case ED.BeforeEntity:this.stateBeforeEntity(e);break;case ED.InHexEntity:this.stateInHexEntity(e);break;case ED.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()}finish(){this.state===ED.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.state===ED.InCommentLike?this.currentSequence===kD.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===ED.InNumericEntity&&this.allowLegacyEntity()||this.state===ED.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===ED.InTagName||this.state===ED.BeforeAttributeName||this.state===ED.BeforeAttributeValue||this.state===ED.AfterAttributeName||this.state===ED.InAttributeName||this.state===ED.InAttributeValueSq||this.state===ED.InAttributeValueDq||this.state===ED.InAttributeValueNq||this.state===ED.InClosingTagName||this.cbs.ontext(this.sectionStart,e)}emitPartial(e,t){this.baseState!==ED.Text&&this.baseState!==ED.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)}emitCodePoint(e){this.baseState!==ED.Text&&this.baseState!==ED.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)}}const ND=new Set(["input","option","optgroup","select","button","datalist","textarea"]),OD=new Set(["p"]),UD=new Set(["thead","tbody"]),BD=new Set(["dd","dt"]),FD=new Set(["rt","rp"]),zD=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",OD],["h1",OD],["h2",OD],["h3",OD],["h4",OD],["h5",OD],["h6",OD],["select",ND],["input",ND],["output",ND],["button",ND],["datalist",ND],["textarea",ND],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",BD],["dt",BD],["address",OD],["article",OD],["aside",OD],["blockquote",OD],["details",OD],["div",OD],["dl",OD],["fieldset",OD],["figcaption",OD],["figure",OD],["footer",OD],["form",OD],["header",OD],["hr",OD],["main",OD],["nav",OD],["ol",OD],["pre",OD],["section",OD],["table",OD],["ul",OD],["rt",FD],["rp",FD],["tbody",UD],["tfoot",UD]]),GD=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),HD=new Set(["math","svg"]),VD=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),qD=/\s|\//;class WD{constructor(e,t={}){var n,i,r,s,a;this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(i=t.lowerCaseAttributeNames)&&void 0!==i?i:!t.xmlMode,this.tokenizer=new(null!==(r=t.Tokenizer)&&void 0!==r?r:DD)(this.options,this),null===(a=(s=this.cbs).onparserinit)||void 0===a||a.call(s,this)}ontext(e,t){var n,i;const r=this.getSlice(e,t);this.endIndex=t-1,null===(i=(n=this.cbs).ontext)||void 0===i||i.call(n,r),this.startIndex=t}ontextentity(e){var t,n;const i=this.tokenizer.getSectionStart();this.endIndex=i-1,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,gD(e)),this.startIndex=i}isVoidElement(e){return!this.options.xmlMode&&GD.has(e)}onopentagname(e,t){this.endIndex=t;let n=this.getSlice(e,t);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)}emitOpenTag(e){var t,n,i,r;this.openTagStart=this.startIndex,this.tagname=e;const s=!this.options.xmlMode&&zD.get(e);if(s)for(;this.stack.length>0&&s.has(this.stack[this.stack.length-1]);){const e=this.stack.pop();null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,e,!0)}this.isVoidElement(e)||(this.stack.push(e),HD.has(e)?this.foreignContext.push(!0):VD.has(e)&&this.foreignContext.push(!1)),null===(r=(i=this.cbs).onopentagname)||void 0===r||r.call(i,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var t,n;this.startIndex=this.openTagStart,this.attribs&&(null===(n=(t=this.cbs).onopentag)||void 0===n||n.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,t){var n,i,r,s,a,o;this.endIndex=t;let l=this.getSlice(e,t);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(HD.has(l)||VD.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))this.options.xmlMode||"br"!==l||(null===(i=(n=this.cbs).onopentagname)||void 0===i||i.call(n,"br"),null===(s=(r=this.cbs).onopentag)||void 0===s||s.call(r,"br",{},!0),null===(o=(a=this.cbs).onclosetag)||void 0===o||o.call(a,"br",!1));else{const e=this.stack.lastIndexOf(l);if(-1!==e)if(this.cbs.onclosetag){let t=this.stack.length-e;for(;t--;)this.cbs.onclosetag(this.stack.pop(),0!==t)}else this.stack.length=e;else this.options.xmlMode||"p"!==l||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1}onselfclosingtag(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var t,n;const i=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===i&&(null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,i,!e),this.stack.pop())}onattribname(e,t){this.startIndex=e;const n=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n}onattribdata(e,t){this.attribvalue+=this.getSlice(e,t)}onattribentity(e){this.attribvalue+=gD(e)}onattribend(e,t){var n,i;this.endIndex=t,null===(i=(n=this.cbs).onattribute)||void 0===i||i.call(n,this.attribname,this.attribvalue,e===SD.Double?'"':e===SD.Single?"'":e===SD.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const t=e.search(qD);let n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n}ondeclaration(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction(`!${e}`,`!${n}`)}this.startIndex=t+1}onprocessinginstruction(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction(`?${e}`,`?${n}`)}this.startIndex=t+1}oncomment(e,t,n){var i,r,s,a;this.endIndex=t,null===(r=(i=this.cbs).oncomment)||void 0===r||r.call(i,this.getSlice(e,t-n)),null===(a=(s=this.cbs).oncommentend)||void 0===a||a.call(s),this.startIndex=t+1}oncdata(e,t,n){var i,r,s,a,o,l,c,u,h,d;this.endIndex=t;const p=this.getSlice(e,t-n);this.options.xmlMode||this.options.recognizeCDATA?(null===(r=(i=this.cbs).oncdatastart)||void 0===r||r.call(i),null===(a=(s=this.cbs).ontext)||void 0===a||a.call(s,p),null===(l=(o=this.cbs).oncdataend)||void 0===l||l.call(o)):(null===(u=(c=this.cbs).oncomment)||void 0===u||u.call(c,`[CDATA[${p}]]`),null===(d=(h=this.cbs).oncommentend)||void 0===d||d.call(h)),this.startIndex=t+1}onend(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let e=this.stack.length;e>0;this.cbs.onclosetag(this.stack[--e],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)}reset(){var e,t,n,i;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(i=(n=this.cbs).onparserinit)||void 0===i||i.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let n=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);for(;t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,t-this.bufferOffset);return n}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))}end(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}}var jD,XD;(XD=jD||(jD={})).Root="root",XD.Text="text",XD.Directive="directive",XD.Comment="comment",XD.Script="script",XD.Style="style",XD.Tag="tag",XD.CDATA="cdata",XD.Doctype="doctype",jD.Root,jD.Text,jD.Directive,jD.Comment,jD.Script,jD.Style,jD.Tag,jD.CDATA,jD.Doctype;class YD{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return oN(this,e)}}class JD extends YD{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class KD extends JD{constructor(){super(...arguments),this.type=jD.Text}get nodeType(){return 3}}class ZD extends JD{constructor(){super(...arguments),this.type=jD.Comment}get nodeType(){return 8}}class QD extends JD{constructor(e,t){super(t),this.name=e,this.type=jD.Directive}get nodeType(){return 1}}class $D extends YD{constructor(e){super(),this.children=e}get firstChild(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class eN extends $D{constructor(){super(...arguments),this.type=jD.CDATA}get nodeType(){return 4}}class tN extends $D{constructor(){super(...arguments),this.type=jD.Root}get nodeType(){return 9}}class nN extends $D{constructor(e,t,n=[],i=("script"===e?jD.Script:"style"===e?jD.Style:jD.Tag)){super(n),this.name=e,this.attribs=t,this.type=i}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map((e=>{var t,n;return{name:e,value:this.attribs[e],namespace:null===(t=this["x-attribsNamespace"])||void 0===t?void 0:t[e],prefix:null===(n=this["x-attribsPrefix"])||void 0===n?void 0:n[e]}}))}}function iN(e){return(t=e).type===jD.Tag||t.type===jD.Script||t.type===jD.Style;var t}function rN(e){return e.type===jD.Text}function sN(e){return e.type===jD.Comment}function aN(e){return Object.prototype.hasOwnProperty.call(e,"children")}function oN(e,t=!1){let n;if(rN(e))n=new KD(e.data);else if(sN(e))n=new ZD(e.data);else if(iN(e)){const i=t?lN(e.children):[],r=new nN(e.name,{...e.attribs},i);i.forEach((e=>e.parent=r)),null!=e.namespace&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=r}else if(function(e){return e.type===jD.CDATA}(e)){const i=t?lN(e.children):[],r=new eN(i);i.forEach((e=>e.parent=r)),n=r}else if(function(e){return e.type===jD.Root}(e)){const i=t?lN(e.children):[],r=new tN(i);i.forEach((e=>e.parent=r)),e["x-mode"]&&(r["x-mode"]=e["x-mode"]),n=r}else{if(!function(e){return e.type===jD.Directive}(e))throw new Error(`Not implemented yet: ${e.type}`);{const t=new QD(e.name,e.data);null!=e["x-name"]&&(t["x-name"]=e["x-name"],t["x-publicId"]=e["x-publicId"],t["x-systemId"]=e["x-systemId"]),n=t}}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function lN(e){const t=e.map((e=>oN(e,!0)));for(let e=1;e<t.length;e++)t[e].prev=t[e-1],t[e-1].next=t[e];return t}const cN={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class uN{constructor(e,t,n){this.dom=[],this.root=new tN(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=cN),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:cN,this.elementCB=null!=n?n:null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new tN(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,t){const n=this.options.xmlMode?jD.Tag:void 0,i=new nN(e,t,void 0,n);this.addNode(i),this.tagStack.push(i)}ontext(e){const{lastNode:t}=this;if(t&&t.type===jD.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{const t=new KD(e);this.addNode(t),this.lastNode=t}}oncomment(e){if(this.lastNode&&this.lastNode.type===jD.Comment)return void(this.lastNode.data+=e);const t=new ZD(e);this.addNode(t),this.lastNode=t}oncommentend(){this.lastNode=null}oncdatastart(){const e=new KD(""),t=new eN([e]);this.addNode(t),e.parent=t,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,t){const n=new QD(e,t);this.addNode(n)}handleCallback(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e}addNode(e){const t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null}}function hN(e){for(let t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}new Map(hN([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(hN([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(hN([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(hN([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));const dN=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function pN(e,t){return function(n){let i,r=0,s="";for(;i=e.exec(n);)r!==i.index&&(s+=n.substring(r,i.index)),s+=t.get(i[0].charCodeAt(0)),r=i.index+1;return s+n.substring(r)}}var fN,mN;function gN(e){return Array.isArray(e)?e.map(gN).join(""):aN(e)&&!sN(e)?gN(e.children):rN(e)?e.data:""}function yN(e,t,n=!0,i=1/0){return Array.isArray(t)||(t=[t]),vN(e,t,n,i)}function vN(e,t,n,i){const r=[];for(const s of t){if(e(s)&&(r.push(s),--i<=0))break;if(n&&aN(s)&&s.children.length>0){const t=vN(e,s.children,n,i);if(r.push(...t),(i-=t.length)<=0)break}}return r}String.prototype.codePointAt,pN(/[&<>'"]/g,dN),pN(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),pN(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),function(e){e[e.XML=0]="XML",e[e.HTML=1]="HTML"}(fN||(fN={})),function(e){e[e.UTF8=0]="UTF8",e[e.ASCII=1]="ASCII",e[e.Extensive=2]="Extensive",e[e.Attribute=3]="Attribute",e[e.Text=4]="Text"}(mN||(mN={})),new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]),new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),new Set(["svg","math"]);const xN={tag_name:e=>"function"==typeof e?t=>iN(t)&&e(t.name):"*"===e?iN:t=>iN(t)&&t.name===e,tag_type:e=>"function"==typeof e?t=>e(t.type):t=>t.type===e,tag_contains:e=>"function"==typeof e?t=>rN(t)&&e(t.data):t=>rN(t)&&t.data===e};function bN(e,t,n=!0,i=1/0){return yN(xN.tag_name(e),t,n,i)}var wN;!function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(wN||(wN={}));const _N=["url","type","lang"],MN=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function EN(e){return bN("media:content",e).map((e=>{const{attribs:t}=e,n={medium:t.medium,isDefault:!!t.isDefault};for(const e of _N)t[e]&&(n[e]=t[e]);for(const e of MN)t[e]&&(n[e]=parseInt(t[e],10));return t.expression&&(n.expression=t.expression),n}))}function SN(e,t){return bN(e,t,!0,1)[0]}function TN(e,t,n=!1){return gN(bN(e,t,n,1)).trim()}function AN(e,t,n,i,r=!1){const s=TN(n,i,r);s&&(e[t]=s)}function CN(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}const IN={xmlMode:!0};window.getRSSFeed=(e,t)=>fetch(e).then((e=>{e.text().then((e=>{const n=function(e,t=IN){return function(e){const t=SN(CN,e);return t?"feed"===t.name?function(e){var t;const n=e.children,i={type:"atom",items:bN("entry",n).map((e=>{var t;const{children:n}=e,i={media:EN(n)};AN(i,"id","id",n),AN(i,"title","title",n);const r=null===(t=SN("link",n))||void 0===t?void 0:t.attribs.href;r&&(i.link=r);const s=TN("summary",n)||TN("content",n);s&&(i.description=s);const a=TN("updated",n);return a&&(i.pubDate=new Date(a)),i}))};AN(i,"id","id",n),AN(i,"title","title",n);const r=null===(t=SN("link",n))||void 0===t?void 0:t.attribs.href;r&&(i.link=r),AN(i,"description","subtitle",n);const s=TN("updated",n);return s&&(i.updated=new Date(s)),AN(i,"author","email",n,!0),i}(t):function(e){var t,n;const i=null!==(n=null===(t=SN("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],r={type:e.name.substr(0,3),id:"",items:bN("item",e.children).map((e=>{const{children:t}=e,n={media:EN(t)};AN(n,"id","guid",t),AN(n,"title","title",t),AN(n,"link","link",t),AN(n,"description","description",t);const i=TN("pubDate",t);return i&&(n.pubDate=new Date(i)),n}))};AN(r,"title","title",i),AN(r,"link","link",i),AN(r,"description","description",i);const s=TN("lastBuildDate",i);return s&&(r.updated=new Date(s)),AN(r,"author","managingEditor",i,!0),r}(t):null}(function(e,t){return function(e,t){const n=new uN(void 0,t);return new WD(n,t).end(e),n.root}(e,t).children}(e,t))}(e);console.log(n);const i=((e,t)=>{"franceinfo"===t&&e.map((e=>({title:e.title,description:e.description,datetime:e.pubDate,href:e.link,img:e.enclosure})))})(n.items,t);console.log(i)}))}));t["Total ANAVER.SE"].dbut=window.performance.now(),console.info("\n _______ _______ _______ _______ _______ _______     _______ _______ \n|  _  | |   | | |  _  | |  |  | |   __|_| __  | |   |   __|_|   __|_|\n|     | | | | | |     | |  |  | |   __|_|    -|-|_ _|__   | |   __|_|\n|__|__|_|_|___|_|__|__|_|____/_/|_____|_|__|__|_|_|_|_____|_|_____|_|\n                                                  \nWelcome to the anaver.se\nIf you want to learn more -> twitter.com/anaglyph_ic"),(()=>{t["Code Barre"].dbut=window.performance.now();const e=document.getElementById("cont");document.getElementById("barcode")&&document.getElementById("barcode").remove();const n=kn("svg").attr("width",200).attr("height",40).attr("id","barcode");n.style("left","10px"),n.style("top","0px"),n.style("position","absolute");var i=n.append("g").attr("id","barrouge"),r=n.append("g").attr("id","barcyan");for(let e=0;e<30;e++)r.append("rect").style("mix-blend-mode",Bn).attr("x",5*e).attr("y",.01*window.innerHeight).attr("width",Un[e]).attr("height",40).attr("fill","rgb(0,255,235)"),i.append("rect").style("mix-blend-mode",Bn).attr("x",5*e).attr("y",.01*window.innerHeight).attr("width",Un[e]).attr("height",40).attr("fill","rgb(255,0,0)");e.append(n.node()),t["Code Barre"].fin=window.performance.now()})(),(()=>{if(Nn<=6||Nn>=20){document.getElementById("hider").style.backgroundColor="#313131",document.getElementById("titleG").style.mixBlendMode="screen",document.getElementById("titleR").style.mixBlendMode="screen",document.getElementById("enterR").style.mixBlendMode="screen",document.getElementById("enterG").style.mixBlendMode="screen",document.getElementById("helper").style.backgroundColor="#313131",document.getElementById("helper").style.color="white",document.getElementById("links").style.color="white",document.getElementById("connectInfo").style.color="white",document.getElementById("perfMode").style.color="white",document.getElementById("anavTooltip").style.backgroundColor="rgba(25, 25, 25, 0.6)",document.getElementById("header").style.backgroundColor="rgba(25, 25, 25, 0.6)",document.getElementById("header").style.color="white";const e=document.getElementsByClassName("hiderlinks");for(let t=0;t<e.length;t++)e[t].style.color="white"}})(),(()=>{const e=JSON.parse(bA.getItem("walldir")),t=document.getElementById("tezosWalletsDirectory");for(const n in e.tez){const i=document.createElement("option");i.value=e.tez[n].name+" - "+n,t.append(i)}})(),(()=>{var e=window.innerHeight,t=window.innerWidth;const n=document.getElementById("cont"),i=new gg,r=t/e,s=new Wa;document.addEventListener("keydown",Dk),document.getElementById("loader-button").addEventListener("click",(()=>{bk(!0)})),document.getElementById("gallery-button").addEventListener("click",(()=>{0===Kk.children.length&&(_I(),bk())})),document.getElementById("hang-button").addEventListener("click",Rk);const a=new ad;(sD=new pc(60,r,1e-4,1e4)).position.set(0,0,.1);const o=new nd({antialias:0,alpha:!0});o.setClearColor(0,0),o.setSize(t,e),o.setPixelRatio(1),a.background=null,jk.position.set(.1,-.11,-.1),jk.rotation.y=-Math.PI/2,a.add(jk);const l=new nd({antialias:0});tD=l.capabilities.getMaxAnisotropy(),l.outputColorSpace=Ms,l.setSize(t,e),l.setPixelRatio(1),(aD=new pc(60,r,.1,1e4)).position.set(0,1,2),qk=new ad;const c=new Ym(4210752,30);qk.add(c),Xk.name="World",qk.add(Xk),n.appendChild(l.domElement),l.domElement.style.position="absolute",l.domElement.style.top="0px",l.domElement.style.left="0px",l.domElement.style.width=t+"px",l.domElement.style.height=e+"px";var u=`rgb(${Math.floor(150*Math.random())},${Math.floor(120*Math.random())},${Math.floor(150*Math.random())})`,h=new dl(u);qk.background=h,n.appendChild(o.domElement),o.domElement.style.position="absolute",o.domElement.style.top="0px",o.domElement.style.left="0px",o.domElement.style.pointerEvents="none",oD=new Wk(aD,l.domElement);let d=!1,p=!1,f=!1,m=!1;qk.add(oD.getObject());var g,y=!1;const v=document.getElementById("mobile-jetpack");var x,b;v.addEventListener("touchstart",(e=>{e.preventDefault(),y?g&&(clearInterval(g),gC(),v.style.background="radial-gradient( rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.5) 100% )"):(_(e),g=setInterval((()=>{mC(),nD.y+=2}),40),v.style.background="radial-gradient( rgba(255, 25, 25, 0.7) 0%, rgba(255, 25, 25, 0.5) 100% )"),y=!y})),v.addEventListener("touchend",(e=>{g&&(clearInterval(g),gC(),v.style.background="radial-gradient( rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.5) 100% )",y=!1)}));const w=new Po(0,0,0,"YXZ"),_=e=>{for(let t=0;t<e.touches.length;t++){const n=e.touches[t];n.clientX<window.innerWidth/2&&(b=n)}Qk=!1};l.domElement.addEventListener("touchstart",_),l.domElement.addEventListener("touchmove",(e=>{for(let t=0;t<e.touches.length;t++){const n=e.touches[t];if(n.clientY>.3*window.innerHeight)if(n.clientX>window.innerWidth/2){e.preventDefault(),x&&(e.movementX=15*(n.pageX-x.pageX),e.movementY=3*(n.pageY-x.pageY));const t=e.movementX||e.mozMovementX||e.webkitMovementX||0,i=e.movementY||e.mozMovementY||e.webkitMovementY||0;w.setFromQuaternion(aD.quaternion),w.y-=.002*t,w.x-=.002*i,aD.quaternion.setFromEuler(w),Kk.quaternion.setFromEuler(w),Zk.quaternion.setFromEuler(w),x=n}else e.preventDefault(),b&&(e.movementX=n.pageX-b.pageX,e.movementY=n.pageY-b.pageY),M&&(d=!1,f=!1,m=!1,p=!1,window.innerHeight,Math.abs(e.movementX)<Math.abs(e.movementY)?e.movementY>0?(d=!1,f=!1,m=!1,p=!0):(d=!0,f=!1,m=!1,p=!1):Math.abs(e.movementX)>Math.abs(e.movementY)&&(e.movementX>0?(d=!1,f=!1,m=!0,p=!1):(d=!1,f=!0,m=!1,p=!1)),b=n,M=!1)}})),l.domElement.addEventListener("touchend",(()=>{b=!1}));var M=!0;l.domElement.addEventListener("touchend",(e=>{d=!1,p=!1,f=!1,m=!1,x=!1,M=!0})),document.addEventListener("keydown",(function(e){if(!wk)switch(e.code){case"ArrowUp":case"KeyW":d=!0;break;case"ArrowLeft":case"KeyA":f=!0;break;case"ArrowDown":case"KeyS":p=!0;break;case"ArrowRight":case"KeyD":m=!0;break;case"Space":nD.y<.5&&oD.getObject().position.y>-20?nD.y+=30:(nD.y+=2,mC());break;case"KeyR":lD()}})),document.addEventListener("keyup",(function(e){switch(e.code){case"ArrowUp":case"KeyW":d=!1;break;case"ArrowLeft":case"KeyA":f=!1;break;case"ArrowDown":case"KeyS":p=!1;break;case"ArrowRight":case"KeyD":m=!1;break;case"Space":gC()}})),oD.moveSpeed=0;let E=new Wa,S=new Wa,T=new Ya,A=new _o,C=new ny,I=new ny(new Wa,new Wa(0,-1,0));var L=!1;eD=function(){if(fT(),$P)L||(Yk.children.forEach((e=>{"green"===e.userData.color&&(e.clear(),Yk.remove(e))})),l.renderLists.dispose(),L=!0);else{var n=aD.getWorldDirection(new Wa),r=n.z>0?-1:1,c=n.x>0?1:-1;Yk.children.forEach((e=>{"green"===e.userData.color&&(e.position.x=Math.abs(.2*n.x)*r,e.position.z=Math.abs(.2*n.z)*c)}))}if(dk&&Qk){if(!iD){iD=new Ev(l),iD.addPass(new bv(qk,aD));const n=new kv(qk,aD,t,e);var u=(new Ya).setFromObject(qk);const i=Math.abs(u.max.x)+Math.abs(u.max.y)+Math.abs(u.max.z)+Math.abs(u.min.x)+Math.abs(u.min.y)+Math.abs(u.min.z);(Nn<=6||Nn>=20)&&(qk.fog=new sd("rgba(25,25,40,0.7)",0,i/4)),n.configuration.aoRadius=i/500,n.configuration.distanceFalloff=i/60,n.configuration.intensity=2,n.configuration.aoSamples=3,n.configuration.denoiseRadius=0,n.configuration.denoiseSamples=1,iD.addPass(n),iD.render()}iD.render()}else l.render(qk,aD);function h(e){if(Sk||(oD.getObject().position.y<8&&nD.y<0&&oD.getObject().position.y>3?nD.y=-30/sk:nD.y-=50*e/sk),nD.x-=10*nD.x*e*1,nD.z-=10*nD.z*e*1,s.z=Number(d)-Number(p),s.x=Number(m)-Number(f),s.normalize(),oD.getObject().updateMatrixWorld(),(d||p)&&(nD.z-=s.z*oD.moveSpeed*e*1.2),(f||m)&&(nD.x-=s.x*oD.moveSpeed*e*1.2),oD.moveRight(-nD.x*e),oD.moveForward(-nD.z*e),oD.getObject().position.y+=nD.y*e,xw){T.makeEmpty(),A.copy(xw.matrixWorld).invert(),C.copy(I),C.start.applyMatrix4(oD.getObject().matrixWorld).applyMatrix4(A),C.end.applyMatrix4(oD.getObject().matrixWorld).applyMatrix4(A),T.expandByPoint(C.start),T.expandByPoint(C.end),T.min.addScalar(-1),T.max.addScalar(1);var t=!1;xw.geometry.boundsTree.shapecast({intersectsBounds:e=>e.intersectsBox(T),intersectsTriangle:e=>{const n=E,i=S,r=e.closestPointToSegment(C,n,i);if(r<1){t=!0;const e=1-r,s=i.sub(n).normalize();C.start.addScaledVector(s,e),C.end.addScaledVector(s,e)}}});const e=E;e.copy(C.start).applyMatrix4(xw.matrixWorld);const n=S;n.subVectors(e,oD.getObject().position);const i=Math.max(0,n.length()-.1);n.normalize().multiplyScalar(i),t?(oD.getObject().position.add(n),vC(!!(p||d||f||m)),n.y<1&&n.y>0&&(nD.y=.01)):vC(!1)}oD.getObject().position.y<-25&&lD()}o.render(a,sD),requestAnimationFrame(eD);const g=Math.min(i.getDelta(),.5);for(let e=0;e<2;e++)if(h(g/2),xw&&KC)for(let e=0;e<3;e++)qC(g/5,xw);Mk?Kk.position.set(Math.floor(oD.getObject().position.x),Math.floor(oD.getObject().position.y),Math.floor(oD.getObject().position.z)):Kk.position.set(oD.getObject().position.x,oD.getObject().position.y,oD.getObject().position.z),Zk.position.set(oD.getObject().position.x,oD.getObject().position.y,oD.getObject().position.z)},window.addEventListener("resize",(()=>{e=window.innerHeight,t=window.innerWidth,aD.aspect=t/e,aD.updateProjectionMatrix(),l.setSize(t,e),l.setPixelRatio(1),iD&&Qk&&iD.setSize(t,e),sD.aspect=t/e,sD.updateProjectionMatrix(),o.setSize(t,e),o.setPixelRatio(1),document.getElementById("helper").style.left=t-250+"px",document.getElementById("vidsem")&&(document.getElementById("vidsem").width=.25*window.innerWidth)}))})(),dA({native:!0,nativeRequestType:"generatorList"}),lk(),(0,Dv.request)("https://data.objkt.com/v3/graphql",Dv.gql`
      query {
        token(
          where: {
            tags: { tag: { name: { _eq: "anaverse-gallery" } } }
            supply: { _gt: "0" }
          }
          limit: 500
        ) {
          name
          description
          creators {
            creator_address
            holder {
              address
              alias
              logo
              twitter
              tzdomain
            }
          }
          fa_contract
          token_id
          artifact_uri
          thumbnail_uri
          holders {
            holder_address
          }
        }
      }
    `).then((e=>{var t=[];const n=[];e.token.forEach((e=>{const i="https://assets.objkt.media/file/assets-003/"+e.artifact_uri.replace("ipfs://","")+"/artifact";var r=!0;e.holders.forEach((e=>{"tz1burnburnburnburnburnburnburjAYjjX"===e.holder_address&&(r=!1)})),r&&(n.push(e.creators[0].creator_address),t.push({galurl:i,contract:e.fa_contract,id:e.token_id,curator:e.creators[0].creator_address,thumbnail:e.thumbnail_uri,artifact:e.artifact_uri,item:e}))})),AT(n).then((()=>AI.postMessage({type:"remote",galleryURLs:t}))),setTimeout(CA,2500)})),window.testBox=(e,t)=>{t||(t=WT());var n=1.75*window.innerHeight;return UP.postMessage({side:n,skyurl:e,hash:t}),console.info("Loading test skybox")},window.testRoom=(e,t,n)=>{t||(t=WT()),n||(n="Test Room"),OP.postMessage({figuresUrl:e,hash:t,type:"world",tag:{room:!0},name:n})},window.testFirstPerson=(e,t,n)=>{t||(t=WT()),OP.postMessage({figuresUrl:e,hash:t,type:"firstPerson",tag:{firstPerson:!0},name:n})},window.testItem=(e,t,n)=>{t||(t=WT()),OP.postMessage({figuresUrl:e,hash:t,type:"world",tag:{item:!0},name:n})},window.testPeinture=e=>hA([e]),window.testCommune=(e,t,n,i)=>{if(i||(i=10),!t){t=[];for(let e=0;e<i;e++)t.push(WT())}n||(n="Test commune"),OP.postMessage({figuresUrl:e,hash:t,type:"world",tag:{room:!0},name:n})}})()})();
onmessage=function(e){this.fetch(e.data.img).then((e=>{const t=e.body.getReader();return new ReadableStream({start:e=>function n(){return t.read().then((({done:t,value:a})=>{if(!t)return e.enqueue(a),n();e.close()}))}()})})).then((e=>new Response(e))).then((e=>e.blob())).then((e=>URL.createObjectURL(e))).then((t=>this.postMessage([t,e.data.id,e.data.type,e.data.location]))).catch((e=>console.error(e)))};
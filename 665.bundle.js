onmessage=function(a){a.data.galleryURLs.forEach((a=>{fetch(a.galurl).then((a=>a.json())).then((e=>{var t,o,n,r,l,c;e&&(t=e,o=a.contract,n=a.id,r=a.curator,l=a.thumbnail,c={room:parseInt(t.room),skybox:parseInt(t.skybox),name:JSON.stringify(t.name),contract:o,collection:t.collection,id:n,curator:r,gallery:[],thumbnail:l},t.gallery.forEach((a=>{for(const e in a)switch(e){case"position":case"rotation":case"scale":for(const t in a[e])"x"===t||"y"===t||"z"===t||delete a[e][t];break;case"objktMetaData":case"openSeaMetaData":case"tokenType":break;default:delete a[e]}})),t.gallery.forEach((a=>{var e=!1;if(a.hasOwnProperty("objktMetaData")){var t=!1;for(const e in a.objktMetaData)"contract"===e||"token_id"===e?t=!0:delete a.objktMetaData[e];t&&(e=!0)}e&&c.gallery.push(a)})),c.gallery.length>0&&postMessage(c))})).catch((a=>{console.log("invalid gallery"),console.log(a)}))}))};
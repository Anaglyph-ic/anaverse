const skybox=(o,t)=>{let l="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",a=t.slice(2),r=new RegExp(".{"+(t.length/4|0)+"}","g"),e=a.match(r).map((o=>{return t=o,[...t].reduce(((o,t)=>o*l.length+l.indexOf(t)|0),0);var t}));var h=((o,t,l,a)=>()=>{var r=((o|=0)+(t|=0)|0)+(a|=0)|0;return a=a+1|0,o=t^t>>>9,t=(l|=0)+(l<<3)|0,l=(l=l<<21|l>>>11)+r|0,(r>>>0)/4294967296})(...e);const f=document.createElement("canvas"),M=f.getContext("2d"),n=4*o,i=3*o;f.width=n,f.height=i;const s={},d={px:{x:3*o,y:o},nx:{x:o,y:o},py:{x:2*o,y:0},ny:{x:2*o,y:2*o},pz:{x:2*o,y:o},nz:{x:0,y:o}},$={blue:{deepSky:`rgb(${Math.floor(100*h())},${50+Math.floor(100*h())},${200+Math.floor(50*h())})`,shallowSky:`rgb(${100+Math.floor(100*h())},${150+Math.floor(100*h())},${200+Math.floor(50*h())})`,earth:`rgb(${Math.floor(100*h())},${50+Math.floor(100*h())},${200+Math.floor(50*h())})`},red:{deepSky:`rgb(${150+Math.floor(50*h())},${50+Math.floor(50*h())},${Math.floor(50*h())})`,shallowSky:`rgb(${150+Math.floor(50*h())},${100+Math.floor(100*h())},${50+Math.floor(50*h())})`,earth:`rgb(${150+Math.floor(50*h())},${50+Math.floor(50*h())},${Math.floor(50*h())})`},bluered:{deepSky:`rgb(${20+Math.floor(20*h())},${30+Math.floor(30*h())},${150+Math.floor(50*h())})`,shallowSky:`rgb(${200+Math.floor(50*h())},${Math.floor(100+20*h())},${100+Math.floor(20*h())})`,earth:`rgb(${150+Math.floor(50*h())},${100+Math.floor(100*h())},${50+Math.floor(50*h())})`},redblue:{earth:`rgb(${40+Math.floor(100*h())},${30+Math.floor(30*h())},${200+Math.floor(50*h())})`,deepSky:`rgb(${20+Math.floor(50*h())},${Math.floor(50+20*h())},${200+Math.floor(20*h())})`,shallowSky:`rgb(${200+Math.floor(50*h())},${60+Math.floor(100*h())},${30+Math.floor(50*h())})`},violet:{deepSky:`rgb(${40+Math.floor(20*h())},${20*h()},${200+Math.floor(55*h())})`,shallowSky:`rgb(${10+Math.floor(30*h())},${200+Math.floor(30*h())},${200+Math.floor(30*h())})`,earth:`rgb(${40+Math.floor(20*h())},${20*h()},${200+Math.floor(55*h())})`}},g=M.createLinearGradient(2*o,0,2*o,3*o);var c,y=[];for(const o in $)y.push(o);var p=["nz","nx","pz","px"];s.face=p[Math.floor(h()*p.length)];const S=d[s.face].x+.5*o;s.palette=y[Math.floor(h()*y.length)],c=$[s.palette],g.addColorStop(0,c.deepSky),g.addColorStop(.35,c.deepSky),g.addColorStop(.5,c.shallowSky),g.addColorStop(.65,c.earth),M.fillStyle=g,M.fillRect(0,0,4*o,3*o),M.shadowBlur=.01*o,M.strokeStyle="white",M.shadowColor="white",M.fillStyle="white";var u=.2*o+o*Math.floor(6*h())*.1,b=.2*o+o*Math.floor(6*h())*.1;s["Grid Size"]=Math.floor(u*b);var v=[0,1,4],w=.01*o*(1+v[Math.floor(v.length*h())]);s.Complexity=Math.floor(u/w+b/w);const x=.01*u/o;M.lineWidth=.001*o;for(let t=0;t<=u;t+=w)M.fillRect(S-u/2+t,1.5*o-b/2,.001*o,b);for(let t=0;t<=b;t+=w)M.fillRect(S-u/2,1.5*o-b/2+t,u,.001*o);var k=[],m=[];for(let t=0;t<u-w;t+=w)for(let l=0;l<b-w;l+=w){let a=S-u/2+t,r=1.5*o-b/2+l;if(h()<x&&m.push([a,r]),h()<x){var T=w*Math.floor(10*h()),P=w*Math.floor(10*h());a+T<S+u/2&&r+P<1.5*o+b/2&&(M.fillStyle=g,M.shadowBlur=0,M.fillRect(a,r,T,P))}else if(h()<x){k.push([a,r]);var R=w*Math.floor(5*h());if(a+=R,r+=R,a+R<S+u/2&&r+R<1.5*o+b/2){M.beginPath(),M.fillStyle=g,M.shadowBlur=0;var B=Math.PI/8*Math.floor(16*h()),C=Math.PI/8*Math.floor(4*h());M.moveTo(a,r),M.lineTo(a+Math.cos(B),r+Math.sin(B)),M.arc(a,r,R,B,C),M.lineTo(a+Math.cos(C),r+Math.sin(C)),M.lineTo(a,r),M.fill(),M.fillStyle="white",M.shadowBlur=.01*o,M.stroke(),M.closePath()}}else h()<x&&(k.push([a+w/2,r+w/2]),M.fillStyle="white",M.shadowBlur=.01*o,M.fillRect(a,r,w,w))}for(let o=0;o<m.length;o+=3)m[o]&&m[o+1]&&m[o+2]&&(M.beginPath(),M.fillStyle=g,M.shadowBlur=0,M.moveTo(m[o][0],m[o][1]),M.lineTo(m[o+1][0],m[o+1][1]),M.lineTo(m[o+2][0],m[o+2][1]),M.lineTo(m[o][0],m[o][1]),M.stroke(),M.fill(),M.closePath());var I=Math.floor(k.length*h());for(let o=0;o<I;++o){var z=k[Math.floor(h()*k.length)],D=k[Math.floor(h()*k.length)];M.beginPath(),M.moveTo(z[0],z[1]),M.lineTo(D[0],D[1]),M.stroke(),M.closePath()}function E(t,l,a){var r=h()<.5;r&&(M.fillStyle=r?"white":g,M.fillRect(S-u/2+t*w,1.5*o-b/2+l*w,w,w),M.strokeRect(S-u/2+t*w,1.5*o-b/2+l*w,w,w)),M.font=`bold ${.8*w}px monospace`,M.fillStyle=r?g:"white",M.textAlign="center",M.textBaseline="ideographic",M.fillText(a,S-u/2+t*w+w/2,1.5*o-b/2+l*w+w)}M.shadowBlur=.001*o;var G=["色彩","色调","色素","色系","色光","色品","色域","色学"],A=["天空","天堂","天文","天地","天上","天色","天体","天亮","天边","天晴","天际","天黑","天机","天候"],L=G[Math.floor(h()*G.length)]+A[Math.floor(h()*A.length)],N=[];function W(){var o=[Math.floor(h()*(u/w)),Math.floor(h()*(b/w))],t=!0;N.forEach((l=>{l[0]===o[0]&&l[1]===o[1]&&(t=!1)})),t?N.push(o):W()}s.Name=L;for(let o=0;o<L.length;++o)W();if(h()<.2)for(let o=0;o<L.length;++o){var j=o;N.push([0,j])}h()<.2&&(N[1]=[N[0][0]++,N[0][1]],N[3]=[N[2][0]++,N[2][1]]),h()<.2&&(N[1]=[N[0][0],N[0][1]++],N[3]=[N[2][0],N[2][1]++]);for(let o=0;o<L.length;++o)E(N[o][0],N[o][1],L[o]);s.Pastel=!1,h()<.4&&(s.Pastel=!0,M.fillStyle=`rgba(255,255,255,${.5*h()})`,M.fillRect(0,0,4*o,3*o)),s.Intensity=40+Math.floor(40*h());{var q=s.Intensity;const o=M.getImageData(0,0,n,i);for(let t=0,l=0;t<i;++t)for(let t=0;t<n;++t,l+=4)o.data[l+0]+=Math.round(q*(Math.random()-.5)),o.data[l+1]+=Math.round(q*(Math.random()-.5)),o.data[l+2]+=Math.round(q*(Math.random()-.5));M.putImageData(o,0,0)}return{image:M.getImageData(0,0,n,i),coordinates:d,features:s}};export{skybox};